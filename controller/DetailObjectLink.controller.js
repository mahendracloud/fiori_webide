sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","ugiaiwui/mdg/aiw/library/js/ClassUtils","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider","sap/ui/core/message/Message"],function(e,t,r,a,l,s,n,i,o){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.DetailObjectLink",{formatter:a,History:r,inputId:null,_oCatalog:null,_oResourceBundle:null,oAttach:[],oFileUpload:"",aSearchResults:undefined,aSelectDialog:undefined,nSearchResults:undefined,nSelectDialog:undefined,mSelectDialog:undefined,mSearchResults:undefined,stSelectDialog:undefined,stSearchResults:undefined,stWSearchResults:undefined,stWSelectDialog:undefined,fSelectDialog:undefined,eqSelectDialog:undefined,fSearchResults:undefined,eqSearchResults:undefined,isItemPress:"",classType:"",_class:"",defaultCharArr:[],charValueArr:[],lArray:[],singleVal:"",charValue:"",cPath:"",sPath:"",resultArr:[],system:false,charFlag:"",codeFlag:"",pSelectDialog:undefined,uSelectDialog:undefined,stdSelectDialog:undefined,prSelectDialog:undefined,linkCat:"",objCat:"",onInit:function(){this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));var e=this._oComponent.getModel();e.setDefaultCountMode(sap.ui.model.odata.CountMode.None);this.getView().setModel(e);var t=this._oComponent.getModel("NewModel");this.getView().setModel(t,"valueHelp");var r=this._oComponent.getModel("NewModel2");this.getView().setModel(r,"valueHelp2");var l=this._oComponent.getModel("ApprovalModel");this.getView().setModel(l,"ApprModel");this.reasSystemStatus();var s=a.currentDate();this.getView().byId("validFrm").setValue(s);var n=a.getCurrentTime();this.getView().byId("validFrmTime").setValue(n);var i=new sap.m.DatePicker;var o=i._oMaxDate;var u=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"MM/dd/yyyy"});var c=u.format(o);this.getView().byId("validTo").setValue(c);var d=o.getHours();var g=o.getMinutes();var b=o.getSeconds();this.getView().byId("validToTime").setValue(d+":"+g+":"+b);this.getRouter().getRoute("olDetail").attachPatternMatched(this._onRouteMatched,this);var O=new sap.ui.model.json.JSONModel;var f={visible:false};O.setData(f);this.getView().setModel(O,"aVisModel");var p=new sap.ui.model.json.JSONModel;var j={enable:false};p.setData(j);this.getView().setModel(p,"aEnModel");this.getClassType(this);var h=sap.ui.getCore().getMessageManager();this.getView().setModel(h.getMessageModel(),"message");h.registerObject(this.getView(),true)},getClassType:function(e){var t=e.getView().getModel("valueHelp");var r=e.getObTab();var a=new sap.ui.model.Filter("Obtab","EQ",r);var l="/ClassTypeSet";t.read(l,{filters:[a],success:function(t){if(t.results.length>0){e.Classtype=t.results[0].Klart;e.Classtypedesc=t.results[0].Artxt}else{e.Classtype="";e.Classtypedesc=""}},error:function(){e.Classtype="";e.Classtypedesc=""}})},getObTab:function(){var e=sap.ui.getCore().getModel("EAMCRModel");var t="";t=e.getProperty("/6").Obtab;return t},onAfterRendering:function(){if(sap.m.ComboBox.prototype.onAfterRendering){$("#"+this.byId("linkCategory").sId+"-inner").prop("readOnly",true);$("#"+this.byId("objectCategory").sId+"-inner").prop("readOnly",true)}this.attachRequest()},_onRouteMatched:function(e){this.currentObj=undefined;var r=decodeURIComponent(e.getParameter("arguments").itemPath);this.action=e.getParameter("arguments").action;this.mode=e.getParameter("arguments").mode;var a=new sap.ui.model.json.JSONModel;var l=sap.ui.getCore().getModel("AIWListOLModel");this.currentObj=l.getProperty(r);this.sExistFlag=false;var s=new t([]);var n=new t([]);n=sap.ui.getCore().getModel("linkCatModel");this.getView().setModel(n,"linkCatModel");s=sap.ui.getCore().getModel("objCatModel");this.getView().setModel(s,"objCatModel");a.setData(this.currentObj);this.getView().setModel(a,"olDetailModel");sap.ui.getCore().setModel(a,"olDetailModel");this.getView().byId("idBtnCheck").setVisible(true);var i=this.getView().createId("clsFrag");this.class=sap.ui.core.Fragment.byId(i,"assignmentTab");var o=this.getView().createId("charFrag");this.char=sap.ui.core.Fragment.byId(o,"characteristicsTab");if(this.action==="changeOL"){this.link=e.getParameter("arguments").link;this.status=e.getParameter("arguments").status;var u=encodeURIComponent(this.link);this.getView().byId("olDetailPage").setTitle(this.getView().getModel("i18n").getProperty("olCheaderTitle"));var c;if(l.length>0){for(var d=0;d<l.length;d++){if(l[d].link===this.link){c=d;this.sExistFlag=true;break}}}if(this.sExistFlag){this.currentObj=c;a.setData(this.currentObj)}else{this.readLinkData(u)}if(this.status==="true"||this.lockMsg===true){this.disableFields()}else{this.enableFields()}if(sap.ui.getCore().getModel("refreshModel")!==undefined){var g=sap.ui.getCore().getModel("refreshModel");g.setProperty("/refreshSearch",false)}}else{if(this.currentObj.mode==="create"){this.getView().byId("olDetailPage").setTitle(this.getView().getModel("i18n").getProperty("olheaderTitle"))}else{this.getView().byId("olDetailPage").setTitle(this.getView().getModel("i18n").getProperty("olCheaderTitle"))}}if(this.mode==="display"){this.getView().byId("idBtnCheck").setVisible(false);var b=this.getView().getModel("aVisModel").getData();b.visible=true;this.getView().getModel("aVisModel").setData(b);this.class.setVisible(false);this.char.setVisible(false);this.currentObj.linkCatEn=false;this.currentObj.objCatEn=false;this.currentObj.linkFromEQEn=false;this.currentObj.linkToEQEn=false;this.currentObj.linkObjEqEn=false;this.currentObj.linkFrmFlEn=false;this.currentObj.linkToFlEn=false;this.currentObj.linkObjFlEn=false;var O=new t;var f=sap.ui.getCore().getModel("AIWAPPROVE").getProperty("/AIWListOLModel"+r);O.setData(f);this.getView().setModel(O,"AIWAPPROVE")}else{var b=this.getView().getModel("aVisModel").getData();b.visible=false;this.getView().getModel("aVisModel").setData(b);var p=this.getView().getModel("aEnModel").getData();p.enable=true;this.getView().getModel("aEnModel").setData(p);this.class.setVisible(true);this.char.setVisible(true);if(this.currentObj.Class){var j=new sap.ui.model.json.JSONModel;j.setData(this.currentObj.Class);this.class.setModel(j)}if(this.currentObj.Char){this.chData=this.currentObj.Char}var h=new sap.ui.model.json.JSONModel;var m=this.class.getModel().getData();if(m.length>0){var v=[];for(var V=0;V<this.chData.length;V++){if(m[0].Class===this.chData[V].Class){v.push(this.chData[V])}}this.currentObj.Char=v;h.setData(v);this.char.setModel(h)}else{this.char.setModel(new t([]));this.currentObj.Char=[]}}a.setData(this.currentObj);this.getView().setModel(a,"olDetailModel");sap.ui.getCore().setModel(a,"olDetailModel");this.oModelUpdateFlag=false;this.attachModelEventHandlers(a)},relPossSelect:function(e){},relUsedSelect:function(e){},readLinkData:function(e){var t=this;var r=this._oView.getModel();var l=[new sap.ui.model.Filter("Objlink","EQ",e)];var s=this.getView().getModel("olDetailModel");var n=["OLClass","OLVal","Olink","OLLAM"];r.read("/ChangeRequestSet",{filters:l,urlParameters:{$expand:n},success:function(e){if(e.results.length>0){var r=e.results[0].Message;t.lockMsg="";if(r!==""){t.lockMsg=true;t.createMessagePopover(r,"Error")}var l=e.results[0];var n=l.Olink.results[0];t.currentObj=n;if(n!==null&&n!==undefined){t.linkCat=n.Netyp;t.objCat=n.Kantyp;t.currentObj.mode="change";t.currentObj.link=n.Objlink;t.currentObj.linkCat=n.Netyp;t.currentObj.linkCatDesc=n.Netyptxt;t.currentObj.objCat=n.Kantyp;t.currentObj.objCatDesc=n.Kantyptxt;t.currentObj.linkDesc=n.Kanxt;t.currentObj.netId=n.Netid;t.currentObj.netIdDesc=n.Netidtxt;t.currentObj.linkNum=n.Lfdknr;t.currentObj.autGrp=n.Begru;t.currentObj.autGrpDesc=n.Begtx;t.currentObj.validFrm=a.getDateFormat(n.Datva);t.currentObj.timeFrm=a.getTime(n.Zeitva);t.currentObj.validTo=a.getDateFormat(n.Datvb);t.currentObj.timeTo=a.getTime(n.Zeitvb);t.currentObj.medium=n.Mediu;t.currentObj.mediumDesc=n.Medkxt;t.currentObj.linkFrmFlEn=true;t.currentObj.linkToFlEn=true;t.currentObj.linkObjFlEn=true;t.currentObj.linkFromEQEn=true;t.currentObj.linkToEQEn=true;t.currentObj.linkObjEqEn=true;t.currentObj.linkCatEn=false;t.currentObj.linkCatVS="None";t.currentObj.objCatEn=false;t.currentObj.objCatVS="None";t.currentObj.linkFEqLblRQ=true;t.currentObj.linkToEqLblRQ=true;t.currentObj.linkFrmEq="";t.currentObj.linkFrmEqDesc="";t.currentObj.linkToEq="";t.currentObj.linkToEqDesc="";t.currentObj.linkObjEq="";t.currentObj.linkObjEqDesc="";t.currentObj.linkFrmflLblV=false;t.currentObj.linkFrmFlV=false;t.currentObj.linkFrmFlDescV=false;t.currentObj.linkToFlLblV=false;t.currentObj.linkToFlV=false;t.currentObj.linkToFlDescV=false;t.currentObj.linkObjFlLblV=false;t.currentObj.linkObjFlV=false;t.currentObj.linkObjFlDescV=false;t.currentObj.linkFrmEqLblV=true;t.currentObj.linkFrmEqV=true;t.currentObj.linkFrmEqDescV=true;t.currentObj.linkToEqLblV=true;t.currentObj.linkToEQV=true;t.currentObj.linkToEqDescV=true;t.currentObj.linkObjEqLblV=true;t.currentObj.linkObjEqV=true;t.currentObj.linkObjEqDescV=true;t.currentObj.LAM=[];t.currentObj.Class=[];t.currentObj.Char=[];if(t.objCat==="E"){t.currentObj.linkCatEn=false;t.currentObj.linkFrmFlEn=false;t.currentObj.linkToFlEn=false;t.currentObj.linkObjFlEn=false;t.currentObj.linkFEqLblRQ=true;t.currentObj.linkToEqLblRQ=true;t.currentObj.linkFrmflLblV=false;t.currentObj.linkFrmFlV=false;t.currentObj.linkFrmFlDescV=false;t.currentObj.linkToFlLblV=false;t.currentObj.linkToFlV=false;t.currentObj.linkToFlDescV=false;t.currentObj.linkObjFlLblV=false;t.currentObj.linkObjFlV=false;t.currentObj.linkObjFlDescV=false;t.currentObj.linkCatVS="None";t.currentObj.objCatEn=false;t.currentObj.objCatVS="None";t.currentObj.linkFEqLblRQ=true;t.currentObj.linkToEqLblRQ=true;t.currentObj.linkFrmEq=n.Eqvon;t.currentObj.linkFrmEqDesc=n.Eqtxtf;t.currentObj.linkToEq=n.Eqnach;t.currentObj.linkToEqDesc=n.Eqtxtt;t.currentObj.linkObjEq=n.Eqkant;t.currentObj.linkObjEqDesc=n.Eqtxtl;t.currentObj.linkFrmflLblV=false;t.currentObj.linkFrmFlV=false;t.currentObj.linkFrmFlDescV=false;t.currentObj.linkToFlLblV=false;t.currentObj.linkToFlV=false;t.currentObj.linkToFlDescV=false;t.currentObj.linkObjFlLblV=false;t.currentObj.linkObjFlV=false;t.currentObj.linkObjFlDescV=false;t.currentObj.linkFrmEqLblV=true;t.currentObj.linkFrmEqV=true;t.currentObj.linkFrmEqDescV=true;t.currentObj.linkToEqLblV=true;t.currentObj.linkToEQV=true;t.currentObj.linkToEqDescV=true;t.currentObj.linkObjEqLblV=true;t.currentObj.linkObjEqV=true;t.currentObj.linkObjEqDescV=true;s.setData(t.currentObj);t.getView().setModel(s,"olDetailModel");t.readStatusProf(t.linkCat)}else if(t.objCat==="T"){t.currentObj.linkCatEn=false;t.currentObj.linkFromEQEn=false;t.currentObj.linkToEQEn=false;t.currentObj.linkObjEqEn=false;t.currentObj.linkFrmflLblRQ=true;t.currentObj.linkToFlLblRQ=true;t.currentObj.linkFrmEqLblV=false;t.currentObj.linkFrmEqV=false;t.currentObj.linkFrmEqDescV=false;t.currentObj.linkToEqLblV=false;t.currentObj.linkToEQV=false;t.currentObj.linkToEqDescV=false;t.currentObj.linkObjEqLblV=false;t.currentObj.linkObjEqV=false;t.currentObj.linkObjEqDescV=false;t.currentObj.linkCatVS="None";t.currentObj.objCatEn=false;t.currentObj.objCatVS="None";t.currentObj.linkFrmflLblRQ=true;t.currentObj.linkToFlLblRQ=true;t.currentObj.linkFrmFl=n.Tpvon;t.currentObj.linkFrmFlDesc=n.Fltxtf;t.currentObj.linkToFl=n.Tpnach;t.currentObj.linkToFlDesc=n.Fltxtt;t.currentObj.linkObjFl=n.Tpkant;t.currentObj.linkObjFlDesc=n.Fltxtl;t.currentObj.linkFrmflLblV=true;t.currentObj.linkFrmFlV=true;t.currentObj.linkFrmFlDescV=true;t.currentObj.linkToFlLblV=true;t.currentObj.linkToFlV=true;t.currentObj.linkToFlDescV=true;t.currentObj.linkObjFlLblV=true;t.currentObj.linkObjFlV=true;t.currentObj.linkObjFlDescV=true;t.currentObj.linkFrmEqLblV=false;t.currentObj.linkFrmEqV=false;t.currentObj.linkFrmEqDescV=false;t.currentObj.linkToEqLblV=false;t.currentObj.linkToEQV=false;t.currentObj.linkToEqDescV=false;t.currentObj.linkObjEqLblV=false;t.currentObj.linkObjEqV=false;t.currentObj.linkObjEqDescV=false;s.setData(t.currentObj);t.getView().setModel(s,"olDetailModel");t.readStatusProf(t.linkCat)}if(n.Bezarp==="2"){t.currentObj.twoWayRel=true;t.currentObj.oneWayRel=false}else if(n.Bezarp==="1"){t.currentObj.oneWayRel=true;t.currentObj.twoWayRel=false}if(n.Bezarl==="2"){t.currentObj.twoWayUsd=true;t.currentObj.oneWayUsd=false;t.currentObj.relNotUsd=false}else if(n.Bezarl==="1"){t.currentObj.oneWayUsd=true;t.currentObj.relNotUsd=false;t.currentObj.twoWayUsd=false}else if(n.Bezarl==="0"){t.currentObj.relNotUsd=true;t.currentObj.oneWayUsd=false;t.currentObj.twoWayUsd=false}var i=l.OLLAM.results;var o=new sap.ui.model.json.JSONModel;o.setData(i);t.currentObj.LAM=i;var u=l.OLClass.results;if(u){if(u.length>0){for(var c=0;c<u.length;c++){u[c].ctEnable=false;u[c].classEnable=false;u[c].ClassTypeDesc=u[c].Artxt;delete u[c].Artxt;sClassList[c].ClassDesc=sClassList[c].Kltxt;delete sClassList[c].Kltxt;delete u[c].Changerequestid;delete u[c].Clint;delete u[c].Service;u[c].classDelEnable=true}if(t.lockMsg==="true"){for(var c=0;c<u.length;c++){u[c].classDelEnable=false}}var d=new sap.ui.model.json.JSONModel;d.setData(u);t.class.setModel(d);t.currentObj.Class=u}}var g=l.OLVal.results;if(g){if(g.length>0){for(var b=0;b<g.length;b++){g[b].cNameEnable=false;delete g[b].Ataut;delete g[b].Ataw1;delete g[b].Atawe;delete g[b].Atcod;delete g[b].Atflb;delete g[b].Atflv;delete g[b].Atimb;delete g[b].Atsrt;delete g[b].Atvglart;delete g[b].Atzis;delete g[b].Changerequestid;delete g[b].CharName;delete g[b].Charid;delete g[b].Classtype;delete g[b].Service;delete g[b].Valcnt;g[b].slNo=b+1;g[b].flag=g[b].Class+"-"+g[b].slNo}if(t.lockMsg==="true"){for(var c=0;c<g.length;c++){g[c].charAddEnable=false;g[c].charClrEnable=false;g[c].charDltEnable=false}}else{for(var O=0;O<g.length;O++){var f=1;for(var p=0;p<g.length;p++){if(O===p){continue}if(g[p].Atnam===g[O].Atnam&&g[p].Class===g[O].Class){f++}}if(f>1){g[O].charDltEnable=true}else{g[O].charDltEnable=false}if(g[O].Atein===true){g[O].charAddEnable=false}}}var j=new sap.ui.model.json.JSONModel;j.setData(g);t.char.setModel(j);t.currentObj.Char=g}}s.setData(t.currentObj);t.getView().setModel(s,"olDetailModel")}}},error:function(e){}})},disableFields:function(){var e={enable:false};var t=new sap.ui.model.json.JSONModel;t.setData(e);this.getView().setModel(t,"mainView");this.class.setMode("None");this.char.setMode("None")},enableFields:function(){var e=this;var t={enable:true};var r=new sap.ui.model.json.JSONModel;r.setData(t);this.getView().setModel(r,"mainView");this.class.setMode("SingleSelectLeft");this.char.setMode("Delete")},onDonePress:function(e){var t=this;var a=true;var l=this.getView().getModel("olDetailModel");var s=e.getSource().getId();var n=this.currentObj.linkCat;var i=this.currentObj.objCat;var o=this.currentObj.linkDesc;var u=this.currentObj.linkNum;var c=this.currentObj.linkFrmEq;var d=this.currentObj.linkToEq;var g=this.currentObj.linkObjEq;var b=this.currentObj.linkFrmFl;var O=this.currentObj.linkToFl;var f=this.currentObj.linkObjFl;var p=this._oView.byId("oneWayRel");var j=this._oView.byId("twoWayUsd");if(n===""||i===""||o===""||u===""){if(n===""){this.currentObj.linkCatVS="Error"}if(i===""){this.currentObj.objCatVS="Error"}if(o===""){this.currentObj.linkDescVS="Error"}if(u===""){this.currentObj.linkNumVS="Error"}l.setData(this.currentObj);var h=this.getView().getModel("i18n").getProperty("MANDMSG");t.createMessagePopover(h,"Error");return}var m=this.ObjectIsEmpty();if(m===true){return}if(i==="E"){if(c===d===g){this.validateEquiObject(c);return}else if(c===d){this.validateEquiObject(c);return}else if(c===g){this.validateEquiObject(c);return}else if(d===g){this.validateEquiObject(c);return}}else if(i==="T"){if(b===O===f){this.validateFlocObject(b);return}else if(b===O){this.validateFlocObject(b);return}else if(b===f){this.validateFlocObject(b);return}else if(O===f){this.validateFlocObject(b);return}}if(p.getSelected()&&j.getSelected()){var v=this._oView.getModel("i18n").getProperty("REL_ERR");t.createMessagePopover(v,"Error");return}if(!a){l.setData(this.currentObj);return}var V=this.currentObj;if(t.class.getModel()){var E=t.class.getModel().getData();if(E){V.Class=[];for(var S=0;S<E.length;S++){V.Class.push(E[S])}l.setData(V)}}if(this.chData){var k=this.chData;if(k!==null&&k!==undefined){V.Char=[];for(var T=0;T<k.length;T++){V.Char.push(k[T])}}l.setData(V)}if(s.indexOf("idBtnCheck")>-1){this.validateCheck();return}this.chData=[];if(this.action==="changeOL"){if(this.oModelUpdateFlag&&!this.sExistFlag){var F=sap.ui.getCore().getModel("AIWListOLModel").getData();F.push(this.getView().getModel("olDetailModel").getData())}}var M=r.getInstance().getPreviousHash();if(M!==undefined){history.go(-1)}},validateCheck:function(){var e=this;var t=sap.ui.getCore().getModel("AIWFLOC").getData();var r=sap.ui.getCore().getModel("AIWEQUI").getData();var l=sap.ui.getCore().getModel("AIWListONModel").getData();var s=e.getView().getModel("olDetailModel").getData();var n=sap.ui.getCore().getModel("tempCrTypeModel").getData();var i={ChangeRequestType:n.crtype,CrDescription:n.desc,IsDraft:"C",Messages:[],FuncLoc:[],FLAddr:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqPRT:[],EqLAM:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[]};if(t.length>0){for(var o=0;o<t.length;o++){var u={Tplnr:t[o].Functionallocation,Txtmi:t[o].Flocdescription,TplkzFlc:t[o].Strucindicator,Tplxt:t[o].StrucIndicatorDesc,EditMask:t[o].EditMask,Hierarchy:t[o].Hierarchy,Fltyp:t[o].Floccategory,Flttx:t[o].FlocCategoryDesc,Swerk:t[o].Maintplant,Plantname:t[o].MaintplantDesc,StorFloc:t[o].Location,Locationdesc:t[o].Locationdesc,Abckzfloc:t[o].Abckz,Abctx:t[o].Abctx,Bukrsfloc:t[o].Bukrs,Butxt:t[o].Butxt,City:t[o].City,KostFloc:t[o].Kostl,KokrFloc:t[o].Kokrs,Contareaname:t[o].Mctxt,PlntFloc:t[o].Werks,Planningplantdes:t[o].Planningplantdes,Ingrp:t[o].Ingrp,Plannergrpdesc:t[o].Innam,Arbplfloc:t[o].Arbpl,Wergwfloc:t[o].WcWerks,Gewrkfloc:t[o].MainArbpl,MainWcPlant:t[o].MainWerks,Tplma:t[o].SupFunctionallocation,Supflocdesc:t[o].SupFlocdescription,BeberFl:t[o].BeberFl,Fing:t[o].Fing,Tele:t[o].Tele,Submtiflo:t[o].ConstrType,Constdesc:t[o].ConstructionDesc,Eqart:t[o].TechnicalObjectTyp,Eartx:t[o].Description,Stattext:t[o].Stattext,StsmFloc:t[o].StsmEqui,Statproftxt:t[o].StsmEquiDesc,UstwFloc:t[o].UstwEqui,UswoFloc:t[o].UswoEqui,UstaFloc:t[o].UstaEqui,Adrnri:t[o].Adrnri,Deact:t[o].Deact};i.FuncLoc.push(u);var c={Funcloc:t[o].Functionallocation,Title:t[o].TitleCode,Name1:t[o].Name1,Name2:t[o].Name2,Name3:t[o].Name3,Name4:t[o].Name4,Sort1:t[o].Sort1,Sort2:t[o].Sort2,NameCo:t[o].NameCo,PostCod1:t[o].PostCod1,City1:t[o].City1,Building:t[o].Building,Floor:t[o].Floor,Roomnum:t[o].Roomnum,Strsuppl1:t[o].Strsuppl1,Strsuppl2:t[o].Strsuppl2,Strsuppl3:t[o].Strsuppl3,Location:t[o].AddrLocation,RPostafl:t[o].RefPosta,Landx:t[o].Landx,TimeZone:t[o].TimeZone,RPostFl:t[o].Region,Regiotxt:t[o].RegionDesc};i.FLAddr.push(c);var d=t[o].intlAddr;if(d){for(var g=0;g<d.length;g++){i.FLAddrI.push(d[g])}}if(e.AltLblDerv==="2"&&t[o].altlbl){for(var b=0;b<t[o].altlbl.length;b++){var O={Funcloc:t[o].Functionallocation,AltAlkey:t[o].altlbl[b].AltAlkey,AltStrno:t[o].altlbl[b].AltStrno,AltTplkz:t[o].altlbl[b].AltTplkz};i.FLALTLBEL.push(O)}}if(t[o].Floccategory==="L"&&t[o].lam){var f={Funcloc:t[o].Functionallocation,Lrpid:t[o].lam.Lrpid,Strtptatr:t[o].lam.Strtptatr,Endptatr:t[o].lam.Endptatr,Length:t[o].lam.Length.toString(),LinUnit:t[o].lam.LinUnit,Startmrkr:t[o].lam.Startmrkr,Endmrkr:t[o].lam.Endmrkr,Mrkdisst:t[o].lam.Mrkdisst,Mrkdisend:t[o].lam.Mrkdisend,MrkrUnit:t[o].lam.MrkrUnit};i.FLLAM.push(f)}var p=t[o].classItems;if(p){if(p.length>0){for(var j=0;j<p.length;j++){var h={Funcloc:t[o].Functionallocation,Classtype:p[j].Classtype,Class:p[j].Class,Clstatus1:p[j].Clstatus1};i.FLClass.push(h)}}}var m=t[o].characteristics;if(m){if(m.length>0){for(var v=0;v<m.length;v++){var V={Funcloc:t[o].Functionallocation,Atnam:m[v].Atnam,Textbez:m[v].Textbez,Atwrt:m[v].Atwrt,Class:m[v].Class};i.FLVal.push(V)}}}}}if(r.length>0){for(var E=0;E<r.length;E++){var S={Herst:r[E].Herst,Equnr:r[E].Equnr,Txtmi:r[E].Eqktx,Swerk:r[E].Maintplant,Name1:r[E].MaintplantDesc,TplnEilo:r[E].Tplnr,Flocdescription:r[E].Pltxt,Eqtyp:r[E].EquipmentCatogory,Etytx:r[E].EquipCatgDescription,Eqart:r[E].TechnicalObjectTyp,Eartx:r[E].Description,Typbz:r[E].Typbz,SubmEeqz:r[E].ConstrType,Constdesc:r[E].ConstructionDesc,BukrEilo:r[E].Bukrs,Butxt:r[E].Butxt,HequEeqz:r[E].SuperordinateEquip,SuperordEqDes:r[E].SuperordinateEquipDesc,TidnEeqz:r[E].TechIdNum,KostEilo:r[E].Kostl,KokrEilo:r[E].Kokrs,Contareaname:r[E].Mctxt,StorEilo:r[E].Location,Locationdesc:r[E].Locationdesc,AbckEilo:r[E].Abckz,Abctx:r[E].Abctx,PplaEeqz:r[E].Werks,Planningplantdes:r[E].Planningplantdes,IngrEeqz:r[E].Ingrp,Plannergrpdesc:r[E].Innam,Serge:r[E].Serge,MapaEeqz:r[E].MapaEeqz,Stattext:r[E].Stattext,StsmEqui:r[E].StsmEqui,Statproftxt:r[E].StsmEquiDesc,UstwEqui:r[E].UstwEqui,UswoEqui:r[E].UswoEqui,UstaEqui:r[E].UstaEqui,Deact:r[E].Deact,Answt:r[E].Answt,Ansdt:e._formatDate(r[E].Ansdt),Waers:r[E].Waers,ArbpEilo:r[E].Arbpl,WorkCenterPlant:r[E].WcWerks,ArbpEeqz:r[E].MainArbpl,MainWcPlant:r[E].MainWerks,BebeEilo:r[E].BeberFl,Fing:r[E].Fing,Tele:r[E].Tele,HeqnEeqz:r[E].EquipPosition,Adrnri:r[E].Adrnri,Funcid:r[E].Funcid,Frcfit:r[E].Frcfit,Frcrmv:r[E].Frcrmv};i.Equipment.push(S);var k={Equi:r[E].Equnr,PlanvPrt:r[E].PlanvPrt,SteufPrt:r[E].SteufPrt,KtschPrt:r[E].KtschPrt,Ewformprt:r[E].Ewformprt,SteufRef:r[E].SteufRef,KtschRef:r[E].KtschRef,EwformRef:r[E].EwformRef};i.EqPRT.push(k);if(r[E].EquipmentCatogory==="L"&&r[E].lam){var T={Equi:r[E].Equnr,Lrpid:r[E].lam.Lrpid,Strtptatr:r[E].lam.Strtptatr,Endptatr:r[E].lam.Endptatr,Length:r[E].lam.Length.toString(),LinUnit:r[E].lam.LinUnit,Startmrkr:r[E].lam.Startmrkr,Endmrkr:r[E].lam.Endmrkr,Mrkdisst:r[E].lam.Mrkdisst,Mrkdisend:r[E].lam.Mrkdisend,MrkrUnit:r[E].lam.MrkrUnit};i.EqLAM.push(T)}var F={Equi:r[E].Equnr,Title:r[E].TitleCode,Name1:r[E].Name1,Name2:r[E].Name2,Name3:r[E].Name3,Name4:r[E].Name4,Sort1:r[E].Sort1,Sort2:r[E].Sort2,NameCo:r[E].NameCo,PostCod1:r[E].PostCod1,City1:r[E].City1,Building:r[E].Building,Floor:r[E].Floor,Roomnum:r[E].Roomnum,Strsuppl1:r[E].Strsuppl1,Strsuppl2:r[E].Strsuppl2,Strsuppl3:r[E].Strsuppl3,Location:r[E].AddrLocation,RefPosta:r[E].RefPosta,Landx:r[E].Landx,TimeZone:r[E].TimeZone,RfePost:r[E].Region,Regiotxt:r[E].RegionDesc};i.EqAddr.push(F);var M=r[E].intlAddr;if(M){for(var g=0;g<M.length;g++){i.EqAddrI.push(M[g])}}var D=r[E].classItems;if(D){if(D.length>0){for(var w=0;w<D.length;w++){var C={Equi:r[E].Equnr,Classtype:D[w].Classtype,Class:D[w].Class,Clstatus1:D[w].Clstatus1};i.EqClass.push(C)}}}var P=r[E].characteristics;if(P){if(P.length>0){for(var y=0;y<P.length;y++){var q={Equi:r[E].Equnr,Atnam:P[y].Atnam,Textbez:P[y].Textbez,Atwrt:P[y].Atwrt,Class:P[y].Class};i.EqVal.push(q)}}}}}if(l.length>0){for(var x=0;x<l.length;x++){var I={Objnetwrk:l[x].Objnetwrk,Netgrp:l[x].Netgrp,Netwtyp:l[x].Netwtyp,Netxt:l[x].Netxt,Ntobjtyp:l[x].Ntobjtyp};i.ONetwork.push(I);if(l[x].lam){var N={Objnetwrk:l[x].Objnetwrk,Lrpid:l[x].lam.Lrpid,Strtptatr:l[x].lam.Strtptatr,Endptatr:l[x].lam.Endptatr,Length:l[x].lam.Length,LinUnit:l[x].lam.LinUnit,Startmrkr:l[x].lam.Startmrkr,Endmrkr:l[x].lam.Endmrkr,Mrkdisst:l[x].lam.Mrkdisst,Mrkdisend:l[x].lam.Mrkdisend,MrkrUnit:l[x].lam.MrkrUnit};i.ONLAM.push(N)}}}var L={Begru:s.autGrp,Objlink:s.link,Kanxt:s.linkDesc,Eqkant:s.linkObjEq,Tpkant:s.linkObjFl,Netyp:s.linkCat,Eqvon:s.linkFrmEq,Tpvon:s.linkFrmFl,Eqnach:s.linkToEq,Tpnach:s.linkToFl,Mediu:s.medium,Lfdknr:s.linkNum,Kantyp:s.objCat,Netid:s.netId,Bezarp:s.Bezarp,Bezarl:s.Bezarl,Datva:a._formatDate(s.validFrm),Zeitva:a._timeConvert(s.timeFrm),Datvb:a._formatDate(s.validTo),Zeitvb:a._timeConvert(s.timeTo),Stattext:s.Stattext,StsmOl:s.StsmOl,UstwOl:s.UstwOl,UswoOl:s.UswoOl,UstaOl:s.UstaOl};i.Olink.push(L);if(s.Class){for(var A=0;A<s.Class.length;A++){var R={Objlink:s.Class[A].Objlink,Classtype:s.Class[A].Classtype,Class:s.Class[A].Class,Clstatus1:s.Class[A].Clstatus1};i.OLClass.push(R)}}if(s.Char){for(var _=0;_<s.Char.length;_++){var B={Objlink:s.Char[_].Objlink,Atnam:s.Char[_].Atnam,Textbez:s.Char[_].Textbez,Atwrt:s.Char[_].Atwrt,Class:s.Char[_].Class};i.OLVal.push(B)}}this.getView().byId("olDetailPage").setBusy(true);var U=this.getView().getModel();U.create("/ChangeRequestSet",i,{success:function(t){e.getView().byId("olDetailPage").setBusy(false);var r=t;var l=[];for(var s=0;s<r.Messages.results.length;s++){l.push({type:a.getMessageType(r.Messages.results[s].Type),title:r.Messages.results[s].Message})}e.createMessagePopover(l,"")},error:function(t){e.getView().byId("olDetailPage").setBusy(false);var r=[],a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){r[0]=JSON.parse(t.responseText).error.message.value}else{for(var l=0;l<JSON.parse(t.responseText).error.innererror.errordetails.length;l++){r[l]=JSON.parse(t.responseText).error.innererror.errordetails[l].message}}var s=r.join("\n");sap.m.MessageBox.show(s,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})}})},attachModelEventHandlers:function(e){e.attachPropertyChange(this.handlePropertyChanged,this)},handlePropertyChanged:function(){this.oModelUpdateFlag=true},ObjectIsEmpty:function(){var e=true;var t=this._oView.byId("linkFromEQ");var r=this._oView.byId("linkToEQ");var a=this._oView.byId("linkfrmFl");var l=this._oView.byId("linkToFl");var s=this._oView.byId("objectCategory");if(s.getSelectedKey()==="E"){if(t.getValue()===""&&r.getValue()===""){t.setValueState("Error");r.setValueState("Error");var n=this.getView().getModel("i18n").getProperty("OBJ_ERR");this.createMessagePopover(n,"Error");e=true;return e}else if(t.getValue()===""&&r.getValue()!==""){t.setValueState("Error");var i=this.getView().getModel("i18n").getProperty("EQ_FRM_ERR");this.createMessagePopover(i,"Error");e=true;return e}else if(t.getValue()!==""&&r.getValue()===""){var o=this.getView().getModel("i18n").getProperty("EQ_TO_ERR");r.setValueState("Error");this.createMessagePopover(o,"Error");e=true;return e}}else if(s.getSelectedKey()==="T"){if(a.getValue()===""&&l.getValue()===""){var u=this.getView().getModel("i18n").getProperty("FL_OBJ_ERR");a.setValueState("Error");l.setValueState("Error");this.createMessagePopover(u,"Error");e=true;return e}else if(a.getValue()===""&&l.getValue()!==""){var c=this.getView().getModel("i18n").getProperty("FL_FRM_ERR");a.setValueState("Error");this.createMessagePopover(c,"Error");e=true;return e}else if(a.getValue()!==""&&l.getValue()===""){var d=this.getView().getModel("i18n").getProperty("FL_TO_ERR");l.setValueState("Error");this.createMessagePopover(d,"Error");e=true;return e}}},readStatusDetails:function(e){var t=this;var r="/DeriveOLstatusSet(Netyp='"+t.currentObj.linkCat+"',Lvorm=false)";var a=this.getView().getModel();a.read(r,{success:function(e){t._oView.byId("userSts").setValue(e.USER_STAT);t._oView.byId("stsObj").setValue(e.USER_STATWITHNUM);t._oView.byId("stsWoNo").setValue(e.USER_STATWOUTNUM)},error:function(e){}})},validateEquiObject:function(e){var t=this;var r=t._oView.byId("linkFromEQ");var a=t._oView.byId("linkToEQ");var l=t._oView.byId("linkEquipment");var s=t.getView().getModel("i18n").getProperty("OBJ_ERR_TXT");if(r.getValue()===e&&a.getValue()===e&&l.getValue()===e){r.setValueState("Error");r.setValueStateText(s);a.setValueState("Error");a.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(r.getValue()===e&&a.getValue()===e||r.getValue()!==""&&a.getValue()!==""&&r.getValue()===a.getValue()){r.setValueState("Error");r.setValueStateText(s);a.setValueState("Error");a.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(r.getValue()===e&&l.getValue()===e||r.getValue()!==""&&l.getValue()!==""&&r.getValue()===l.getValue()){r.setValueState("Error");r.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(a.getValue()===e&&l.getValue()===e||a.getValue()!==""&&l.getValue()!==""&&a.getValue()===l.getValue()){a.setValueState("Error");a.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else{a.setValueState("None");a.setValueStateText();l.setValueState("None");l.setValueStateText();r.setValueState("None");r.setValueStateText()}},validateFlocObject:function(e){var t=this;var r=t._oView.byId("linkfrmFl");var a=t._oView.byId("linkToFl");var l=t._oView.byId("linkObj1");var s=t.getView().getModel("i18n").getProperty("OBJ_ERR_TXT");if(r.getValue()===e&&a.getValue()===e&&l.getValue()===e){r.setValueState("Error");r.setValueStateText(s);a.setValueState("Error");a.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(r.getValue()===e&&a.getValue()===e||r.getValue()!==""&&a.getValue()!==""&&r.getValue()===a.getValue()){r.setValueState("Error");r.setValueStateText(s);a.setValueState("Error");a.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(r.getValue()===e&&l.getValue()===e||r.getValue()!==""&&l.getValue()!==""&&r.getValue()===l.getValue()){r.setValueState("Error");r.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else if(a.getValue()===e&&l.getValue()===e||a.getValue()!==""&&l.getValue()!==""&&a.getValue()===l.getValue()){a.setValueState("Error");a.setValueStateText(s);l.setValueState("Error");l.setValueStateText(s);t.createMessagePopover(s,"Error")}else{a.setValueState("None");a.setValueStateText();l.setValueState("None");l.setValueStateText();r.setValueState("None");r.setValueStateText()}},parseRelation:function(){var e=this._oView.byId("oneWayRel");var t=this._oView.byId("twoWayRel");if(e.getSelected()){return"1"}else if(t.getSelected()){return"2"}else{return""}},parseRelationUsed:function(){var e=this._oView.byId("oneWayUsd");var t=this._oView.byId("twoWayUsd");var r=this._oView.byId("relNotUsd");if(r.getSelected()){return"0"}else if(e.getSelected()){return"1"}else if(t.getSelected()){return"2"}else{return""}},getCurrentDate:function(){var e=new Date;var t=e.getMonth();var r=e.getDate();var a=e.getFullYear();if(t<9){t=t+1;t="0"+t}else{t=t+1}if(r<10){r="0"+r}return t+"/"+r+"/"+a},validateDate:function(){var e=this.getCurrentDate();var t=this.getView().byId("validFrm");var r=this.getView().byId("purchStatus");var a;if(t.getValue()!==null&&t.getValue()!==""){if(t.getValue()<e){var l=this.getView().getModel("i18n").getProperty("DATE_MSG");t.setValueState("Error");a=false;this.createMessagePopover(l,"Error")}else if(r.getValue()===""||r.getValue()===null||r.getValue()===undefined){var s=this.getView().getModel("i18n").getProperty("DATE_VALID");r.setValueState("Error");t.setValueState("None");a=false;this.createMessagePopover(s,"Error")}else{t.setValueState("None");a=true}}else{if(r.getValue()!==""){t.setValueState("Error");var n=this.getView().getModel("i18n").getProperty("DATE_VALID2");a=false;this.createMessagePopover(n,"Error")}}return a},onDateChange:function(){var e=this._oView.byId("validFrm");var t=this._oView.byId("validTo");var r=e.getValue();var a=t.getValue();if(r!==""&&a!==""){var l=r.split("/")[0];var s=r.split("/")[1];var n=r.split("/")[2];var i=n+l+s;var o=a.split("/")[0];var u=a.split("/")[1];var c=a.split("/")[2];var d=c+o+u;if(i>d){var g=this.getView().getModel("i18n").getProperty("DATE_ERR");e.setValueState("Error");e.setValueStateText(g);t.setValueState("Error");t.setValueStateText(g);this.createMessagePopover(g,"Error")}else{e.setValueState("None");t.setValueState("None")}}},onNetIdVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a;if(a===undefined){var l=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("xtxt.NET_ID"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/NetidSet",template:new sap.m.StandardListItem({title:"{Netwid}",description:"{Netxt}"})},confirm:function(e){t.currentObj.netIdVS="None";t.currentObj.netIdVST="";t.currentObj.netIdDesc=e.getParameters().selectedItem.getProperty("description");t.currentObj.netId=e.getParameters().selectedItem.getProperty("title");r.setData(t.currentObj)},search:function(e){var t=e.getParameter("value");if(e.getSource().getBinding("items")){e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Netwid",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Netxt",sap.ui.model.FilterOperator.Contains,t)],false)])}}});var s="/NetidSet";var n=t.getView().getModel("valueHelp");var i=function(e){if(e.results){var r=sap.ui.getCore().getModel("AIWListONModel").getData();if(r.length>0){for(var s=0;s<r.length;s++){if(r[s].Objnetwrk){var n={Netwid:r[s].Objnetwrk,Netxt:r[s].Netxt};e.results.unshift(n)}}}a=e;var i=new sap.m.StandardListItem({title:"{Netwid}",description:"{Netxt}",active:true});var o=new sap.ui.model.json.JSONModel;o.setData(e);l.setModel(o);l.bindAggregation("items","/results",i)}else{l.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}};var o=function(){};t._readData(s,n,i,o)}else{var u=new sap.ui.model.json.JSONModel;u.setData(a);l.setModel(u);var c=l.getItems();for(var d=0;d<c.length;d++){c[d].setVisible(true)}}l.open()},onStatProfVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a={title:this.getView().getModel("i18n").getProperty("xtxt.STS_PROF"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/StatusProfileSet",template:new sap.m.StandardListItem({title:"{Stsma}",description:"{Txt}"})},confirm:function(e){t.currentObj.stsProfVS="None";t.currentObj.stsProfVST="";t.currentObj.stsProfDesc=e.getParameters().selectedItem.getProperty("description");t.currentObj.stsProf=e.getParameters().selectedItem.getProperty("title");r.setData(t.currentObj);var a=e.getParameters().selectedItem.getProperty("title");t.readStatusDetails(a)}};var l="/StatusProfileSet";var s=this.getView().getModel("valueHelp");var n=i.getSelectDialog(s,l,[],a,"Stsma","Txt");n.open()},onStatusVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a=t.currentObj.stsProf;var l={title:this.getView().getModel("i18n").getProperty("xtxt.STS_OBJ"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STS_PROF}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>USER_STS}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]})],items:{path:"/StatValueHelpSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{STSMA}"}),new sap.m.Text({text:"{WGBEZ}"}),new sap.m.Text({text:"{TXT30}"})]})},confirm:function(e){t.currentObj.stsObjVS="None";t.currentObj.stsObjVST="";t.currentObj.stsObj=e.getParameter("selectedItem").getCells()[1].getText();r.setData(t.currentObj)}};var s=[new sap.ui.model.Filter("STONR_FLAG","EQ","WI"),new sap.ui.model.Filter("STSMA","EQ",a)];var n="/StatValueHelpSet";var o=this.getView().getModel("valueHelp");var u=[new sap.m.Text({text:"{STSMA}"}),new sap.m.Text({text:"{ESTAT}"}),new sap.m.Text({text:"{TXT30}"})];var c=i.getValueHelp(o,n,u,s,l,"ESTAT","TXT30");c.open();c.setModel(t.getView().getModel("i18n"),"i18n")},onStatusWOVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a=t.currentObj.stsProf;var l={title:this.getView().getModel("i18n").getProperty("xtxt.STS_WO_NO"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",multiSelect:true,columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STS_PROF}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>USER_STS}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]})],items:{path:"/StatValueHelpSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{STSMA}"}),new sap.m.Text({text:"{WGBEZ}"}),new sap.m.Text({text:"{TXT30}"})]})},confirm:function(e){var a=e.getParameter("selectedContexts");t.currentObj.stsWoNoVS="None";t.currentObj.stsWoNoVST="";t.currentObj.stsWoNo=a.map(function(e){return e.getObject().ESTAT}).join(" ");r.setData(t.currentObj)}};var s=[new sap.ui.model.Filter("STONR_FLAG","EQ","WO"),new sap.ui.model.Filter("STSMA","EQ",a)];var n="/StatValueHelpSet";var o=this.getView().getModel("valueHelp");var u=[new sap.m.Text({text:"{STSMA}"}),new sap.m.Text({text:"{ESTAT}"}),new sap.m.Text({text:"{TXT30}"})];var c=i.getValueHelp(o,n,u,s,l,"ESTAT","TXT30");c.open();c.setModel(t.getView().getModel("i18n"),"i18n")},onEquipVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a;var l=e.getSource().mBindingInfos.value.binding;if(l!==undefined&&l!==null){a=l.sPath}else{a=e.getSource().mBindingInfos.value.parts[0].path}a=a.substring(1);var s;if(s===undefined){var n=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("EQUIPMENT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/EquipmentNumberSet",template:new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}"})},confirm:function(e){if(a==="linkFrmEq"){t.currentObj.linkFrmEqVS="None";t.currentObj.linkFrmEqVST="";t.currentObj.linkFrmEq=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkFrmEqDesc=e.getParameters().selectedItem.getProperty("description")}else if(a==="linkToEq"){t.currentObj.linkToEqVS="None";t.currentObj.linkToEqVST="";t.currentObj.linkToEq=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkToEqDesc=e.getParameters().selectedItem.getProperty("description")}else if(a==="linkObjEq"){t.currentObj.linkObjEqVS="None";t.currentObj.linkObjEqVST="";t.currentObj.linkObjEq=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkObjEqDesc=e.getParameters().selectedItem.getProperty("description")}r.setData(t.currentObj)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Equnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Eqktx",sap.ui.model.FilterOperator.Contains,t)],false)])}});var i="/EquipmentNumberSet";var o=this.getView().getModel("valueHelp");o.read(i,{success:function(e,r){if(e.results.length>0){var a=sap.ui.getCore().getModel("AIWEQUI").getData();if(a.length>0){for(var l=0;l<a.length;l++){if(a[l].Equnr){var i={Equnr:a[l].Equnr,Eqktx:a[l].Eqktx};e.results.unshift(i)}}}s=e;var o=new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}",active:true});var u=new sap.ui.model.json.JSONModel;u.setData(e);n.setModel(u);n.bindAggregation("items","/results",o)}else{n.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var u=new sap.ui.model.json.JSONModel;u.setData(s);n.setModel(u);var c=n.getItems();for(var d=0;d<c.length;d++){c[d].setVisible(true)}}n.open()},onFlocVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a;var l=e.getSource().mBindingInfos.value.binding;if(l!==undefined&&l!==null){a=l.sPath}else{a=e.getSource().mBindingInfos.value.parts[0].path}a=a.substring(1);var s;if(s===undefined){var n=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("FLOC"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/FunctionLocationSet",template:new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}"})},confirm:function(e){if(a==="linkFrmFl"){t.currentObj.linkFrmFlVS="None";t.currentObj.linkFrmFlVST="";t.currentObj.linkFrmFl=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkFrmFlDesc=e.getParameters().selectedItem.getProperty("description")}else if(a==="linkToFl"){t.currentObj.linkToFlVS="None";t.currentObj.linkToFlVST="";t.currentObj.linkToFl=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkToFlDesc=e.getParameters().selectedItem.getProperty("description")}else if(a==="linkObjFl"){t.currentObj.linkObjFlVS="None";t.currentObj.linkObjFlVST="";t.currentObj.linkObjFl=e.getParameters().selectedItem.getProperty("title");t.currentObj.linkObjFlDesc=e.getParameters().selectedItem.getProperty("description")}r.setData(t.currentObj)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Tplnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Pltxt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var i="/FunctionLocationSet";var o=this.getView().getModel("valueHelp");o.read(i,{success:function(e,r){if(e.results.length>0){var a=sap.ui.getCore().getModel("AIWFLOC").getData();if(a.length>0){for(var l=0;l<a.length;l++){if(a[l].Functionallocation){var i={Tplnr:a[l].Functionallocation,Pltxt:a[l].Flocdescription};e.results.unshift(i)}}}s=e;var o=new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}",active:true});var u=new sap.ui.model.json.JSONModel;u.setData(e);n.setModel(u);n.bindAggregation("items","/results",o)}else{n.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var u=new sap.ui.model.json.JSONModel;u.setData(s);n.setModel(u);var c=n.getItems();for(var d=0;d<c.length;d++){c[d].setVisible(true)}}n.open()},onAuthGrpVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a={title:this.getView().getModel("i18n").getProperty("xtxt.AUTH_GRP"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/AuthGroupValueHelpSet",template:new sap.m.StandardListItem({title:"{BEGRU}",description:"{BEGTX}"})},confirm:function(e){t.currentObj.autGrpVS="None";t.currentObj.autGrpVST="";t.currentObj.autGrp=e.getParameters().selectedItem.getProperty("title");t.currentObj.autGrpDesc=e.getParameters().selectedItem.getProperty("description");r.setData(t.currentObj)}};var l="/AuthGroupValueHelpSet";var s=this.getView().getModel("valueHelp");var n=i.getSelectDialog(s,l,[],a,"BEGRU","BEGTX");n.open()},onMediumVH:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a={title:this.getView().getModel("i18n").getProperty("MED"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/MediumValueHelpSet",template:new sap.m.StandardListItem({title:"{MEDIU}",description:"{MEDKXT}"})},confirm:function(e){t.currentObj.mediumVS="None";t.currentObj.mediumVST="";t.currentObj.mediumDesc=e.getParameters().selectedItem.getProperty("description");t.currentObj.medium=e.getParameters().selectedItem.getProperty("title");r.setData(t.currentObj)}};var l="/MediumValueHelpSet";var s=this.getView().getModel("valueHelp");var n=i.getSelectDialog(s,l,[],a,"MEDIU","MEDKXT");n.open()},onLiveChange:function(e){if(e.getSource().getValue()===" "){e.getSource().setValue("")}e.getSource().setValueState("None")},onLinkCatChange:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a=this.getView().getModel("linkCatModel");var l=a.getData();if(t.currentObj.linkCat!==""){for(var s=0;s<l.length;s++){if(l[s].NETYP===t.currentObj.linkCat){t.currentObj.linkCatEn=false;t.currentObj.linkCatDesc=l[s].TYPTX}}this.readStatusProf(t.currentObj.linkCat)}else{t.currentObj.linkCatEn=true}r.setData(t.currentObj)},onObjCatChange:function(e){var t=this;var r=this.getView().getModel("olDetailModel");var a=this.getView().getModel("objCatModel");var l=a.getData();for(var s=0;s<l.length;s++){if(l[s].Kantyp===t.currentObj.objCat){t.currentObj.objCatEn=false;t.currentObj.objCatDesc=l[s].Kantyp_txt}}if(t.currentObj.objCat==="E"){t.currentObj.linkCatEn=false;t.currentObj.linkFrmFlEn=false;t.currentObj.linkToFlEn=false;t.currentObj.linkObjFlEn=false;t.currentObj.linkFEqLblRQ=true;t.currentObj.linkToEqLblRQ=true;t.currentObj.linkFrmflLblV=false;t.currentObj.linkFrmFlV=false;t.currentObj.linkFrmFlDescV=false;t.currentObj.linkToFlLblV=false;t.currentObj.linkToFlV=false;t.currentObj.linkToFlDescV=false;t.currentObj.linkObjFlLblV=false;t.currentObj.linkObjFlV=false;t.currentObj.linkObjFlDescV=false}else if(t.currentObj.objCat==="T"){t.currentObj.linkCatEn=false;t.currentObj.linkFromEQEn=false;t.currentObj.linkToEQEn=false;t.currentObj.linkObjEqEn=false;t.currentObj.linkFrmflLblRQ=true;t.currentObj.linkToFlLblRQ=true;t.currentObj.linkFrmEqLblV=false;t.currentObj.linkFrmEqV=false;t.currentObj.linkFrmEqDescV=false;t.currentObj.linkToEqLblV=false;t.currentObj.linkToEQV=false;t.currentObj.linkToEqDescV=false;t.currentObj.linkObjEqLblV=false;t.currentObj.linkObjEqV=false;t.currentObj.linkObjEqDescV=false}else if(t.currentObj.objCat===""){t.currentObj.linkCatEn=true}r.setData(t.currentObj)},reasSystemStatus:function(){var e=this;var t=this.getObTab();var r=this.getView().getModel("valueHelp");var a="/SystemStatValueHelpSet(STSMA=' ',ObjTyp='"+t+"')";r.read(a,{success:function(t){e._oView.byId("systemStatus").setValue(t.TXT04)},error:function(e){}})},readStatusProf:function(e,t){var r=this;var a=this.getView().getModel("olDetailModel");var l=this.getView().getModel();var s="/DeriveOLstatusSet(Netyp='"+e+"',Lvorm=false)";l.read(s,{success:function(e){if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){r.currentObj.usrSts=e.Usta_oln;r.currentObj.stProfLblV=true;r.currentObj.stsProf=e.Stsm_oln;r.currentObj.stsProfV=true;r.currentObj.stsProfDesc=e.Statproftxt;r.currentObj.stsProfDescV=true;r.currentObj.stsObj=e.Ustw_oln;r.currentObj.stsObjLblV=true;r.currentObj.stsObjV=true;r.currentObj.stsWoLblV=true;r.currentObj.stsWoNoV=true;r.currentObj.stsWoNo=e.Uswo_oln;r.currentObj.sysSts=e.Stattext}else{r.currentObj.stProfLblV=false;r.currentObj.stsProfV=false;r.currentObj.stsProfDescV=false;r.currentObj.stsObjLblV=false;r.currentObj.stsObjV=false;r.currentObj.stsWoLblV=false;r.currentObj.stsWoNoV=false;r.currentObj.usrSts="";r.currentObj.stsProf="";r.currentObj.stsProfDesc="";r.currentObj.stsObj="";r.currentObj.stsWoNo="";r.currentObj.sysSts=""}a.setData(r.currentObj)},error:function(e){}})},onVHChange:function(e){var t=e.getSource().getValue();var r;var a=e.getSource().mBindingInfos.value.binding;if(a!==undefined&&a!==null){r=a.sPath}else{r=e.getSource().mBindingInfos.value.parts[0].path}r=r.substring(1);switch(r){case"netId":this._networkId(t,e);break;case"stsProf":this._statProfile(t,e);break;case"stsObj":this._statObj(t,e);break;case"stsWoNo":this._statWONum(t,e);break;case"linkFrmEq":this._equipment(t,e);break;case"linkToEq":this._equipment(t,e);break;case"linkObjEq":this._equipment(t,e);break;case"linkFrmFl":this._floc(t,e);break;case"linkToFl":this._floc(t,e);break;case"linkObjFl":this._floc(t,e);break;case"autGrp":this._authGroup(t,e);break;case"medium":this._medium(t,e);break}},_networkId:function(e,t){var r=e.toUpperCase().trim();var a=this;var l=this.getView().getModel("olDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var n=sap.ui.getCore().getModel("AIWListONModel").getData();if(n.length>0){for(var i=0;i<n.length;i++){if(s===n[i].Objnetwrk){a.currentObj.netIdDesc=n[i].Netxt;a.currentObj.netId=n[i].Objnetwrk;a.currentObj.netIdVS="None";l.setData(a.currentObj);return}}}var o=[new sap.ui.model.Filter("Netwid","EQ",r)];var u="/NetidSet";var c=this.getView().getModel("valueHelp");c.read(u,{filters:o,success:function(e,t){if(e.results.length>0){a.currentObj.netIdDesc=e.results[0].Netxt;a.currentObj.netId=s;a.currentObj.netIdVS="None";l.setData(a.currentObj)}else{a.currentObj.netIdVS="Error";a.currentObj.netIdDesc="";a.currentObj.netIdVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.netIdVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.netIdVST=r;l.setData(a.currentObj)}})}else{a.currentObj.netId=s;l.setData(a.currentObj)}},_statProfile:function(e,t){var r=e.toUpperCase();var a=this;var l=this.getView().getModel("olDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var n=[new sap.ui.model.Filter("Obtyp","EQ","INET"),new sap.ui.model.Filter("Stsma","EQ",r)];var i="/StatusProfileSet";var o=this.getView().getModel("valueHelp");o.read(i,{filters:n,success:function(e,t){if(e.results.length>0){a.currentObj.stsProfDesc=e.results[0].Txt;a.currentObj.stsProf=s;l.setData(a.currentObj);a.readStatusDetails(r)}else{a.currentObj.stsProfVS="Error";a.currentObj.stsProfDesc="";a.currentObj.stsProfVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.stsProfVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.stsProfVST=r;l.setData(a.currentObj)}})}else{a.currentObj.stsProf=s;l.setData(a.currentObj)}},_statObj:function(e,t){var r=e.toUpperCase();var a=this;var l=this.getView().getModel("olDetailModel");var s=a.currentObj.stsProf;var n=r.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var i=[new sap.ui.model.Filter("STONR_FLAG","EQ","WI"),new sap.ui.model.Filter("Txt04","EQ",r),new sap.ui.model.Filter("Stsma","EQ",s)];var o="/StatValueHelpSet";var u=this.getView().getModel("valueHelp");u.read(o,{filters:i,success:function(e,t){if(e.results.length>0){a.currentObj.stsObj=n;l.setData(a.currentObj)}else{a.currentObj.stsObjVS="Error";a.currentObj.stsObjVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.stsObjVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.stsObjVST=r;l.setData(a.currentObj)}})}else{a.currentObj.stsProf=n;l.setData(a.currentObj)}},_statWONum:function(e,t){var r=e.toUpperCase();var a=this;var l=this.getView().getModel("olDetailModel");var s=a.currentObj.stsProf;var n=r.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var i=[new sap.ui.model.Filter("STONR_FLAG","EQ","WO"),new sap.ui.model.Filter("Txt04","EQ",r),new sap.ui.model.Filter("Stsma","EQ",s)];var o="/StatValueHelpSet";var u=this.getView().getModel("valueHelp");u.read(o,{filters:i,success:function(e,t){if(e.results.length>0){a.currentObj.stsWoNo=n;l.setData(a.currentObj)}else{a.currentObj.stsWoNoVS="Error";a.currentObj.stsWoNoVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.stsWoNoVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.stsWoNoVST=r;l.setData(a.currentObj)}})}else{a.currentObj.stsWoNo=n;l.setData(a.currentObj)}},_authGroup:function(e,t){var r=e.toUpperCase();var a=this;var l=this.getView().getModel("olDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var n=[new sap.ui.model.Filter("BEGRU","EQ",r)];var i="/AuthGroupValueHelpSet";var o=this.getView().getModel("valueHelp");o.read(i,{filters:n,success:function(e,t){if(e.results.length>0){a.currentObj.autGrpDesc=e.results[0].BEGTX;a.currentObj.autGrp=s;l.setData(a.currentObj)}else{a.currentObj.autGrpVS="Error";a.currentObj.autGrpDesc="";a.currentObj.autGrpVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.autGrpVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.autGrpVST=r;l.setData(a.currentObj)}})}else{a.currentObj.autGrp=s;l.setData(a.currentObj)}},_medium:function(e,t){var r=e.toUpperCase();var a=this;var l=this.getView().getModel("olDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var n=[new sap.ui.model.Filter("MEDIU","EQ",r)];var i="/MediumValueHelpSet";var o=this.getView().getModel("valueHelp");o.read(i,{filters:n,success:function(e,t){if(e.results.length>0){a.currentObj.mediumDesc=e.results[0].MEDKXT;a.currentObj.medium=s;l.setData(a.currentObj)}else{a.currentObj.mediumVS="Error";a.currentObj.mediumDesc="";a.currentObj.mediumVST="Invalid Entry";l.setData(a.currentObj)}},error:function(e){a.currentObj.mediumVS="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.currentObj.mediumVST=r;l.setData(a.currentObj)}})}else{a.currentObj.medium=s;l.setData(a.currentObj)}},onNumberChange:function(){var e=this;var t=this.getView().getModel("olDetailModel");var r=this.getView().byId("number");if(r.getValue()===""){r.setValue("1")}e.currentObj.linkNumVS="None";t.setData(e.currentObj)},_equipment:function(e,t){var r=this;var a=e.toUpperCase();var l=this.getView().getModel("olDetailModel");var s;var n=t.getSource().mBindingInfos.value.binding;if(n!==undefined&&n!==null){s=n.sPath}else{s=t.getSource().mBindingInfos.value.parts[0].path}s=s.substring(1);var i=a.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){var o=this.getView().getModel("valueHelp");var u="/EquipmentNumberSet";var c=[new sap.ui.model.Filter("Equnr","EQ",a)];var d=false;var g=sap.ui.getCore().getModel("AIWEQUI").getData();if(g.length>0){for(var b=0;b<g.length;b++){if(g[b].Equnr===a){if(s==="linkFrmEq"){r.currentObj.linkFrmEqVS="None";r.currentObj.linkFrmEqVST="";r.currentObj.linkFrmEq=i;r.currentObj.linkFrmEqDesc=g[b].Eqktx;d=true}else if(s==="linkToEq"){r.currentObj.linkToEqVS="None";r.currentObj.linkToEqVST="";r.currentObj.linkToEq=i;r.currentObj.linkToEqDesc=g[b].Eqktx;d=true}else if(s==="linkObjEq"){r.currentObj.linkObjEqVS="None";r.currentObj.linkObjEqVST="";r.currentObj.linkObjEq=i;r.currentObj.linkObjEqDesc=g[b].Eqktx;d=true}l.setData(r.currentObj)}}}if(d===true){return}else{o.read(u,{filters:c,success:function(e,t){if(e.results.length>0){if(s==="linkFrmEq"){r.currentObj.linkFrmEqVS="None";r.currentObj.linkFrmEqVST="";r.currentObj.linkFrmEq=i;r.currentObj.linkFrmEqDesc=e.results[0].Eqktx}else if(s==="linkToEq"){r.currentObj.linkToEqVS="None";r.currentObj.linkToEqVST="";r.currentObj.linkToEq=i;r.currentObj.linkToEqDesc=e.results[0].Eqktx}else if(s==="linkObjEq"){r.currentObj.linkObjEqVS="None";r.currentObj.linkObjEqVST="";r.currentObj.linkObjEq=i;r.currentObj.linkObjEqDesc=e.results[0].Eqktx}l.setData(r.currentObj)}else{if(s==="linkFrmEq"){r.currentObj.linkFrmEqVS="Error";r.currentObj.linkFrmEqDesc="";r.currentObj.linkFrmEqVST="Invalid Entry"}else if(s==="linkToEq"){r.currentObj.linkToEqVS="Error";r.currentObj.linkToEqDesc="";r.currentObj.linkToEqVST="Invalid Entry"}else if(s==="linkObjEq"){r.currentObj.linkObjEqVS="Error";r.currentObj.linkObjEqDesc="";r.currentObj.linkObjEqVST="Invalid Entry"}l.setData(r.currentObj)}},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var n=t.join("\n");r.showMessage(n);if(s==="linkFrmEq"){r.currentObj.linkFrmEqVS="Error"}else if(s==="linkToEq"){r.currentObj.linkToEqVS="Error"}else if(s==="linkObjEq"){r.currentObj.linkObjEqVS="Error"}l.setData(r.currentObj)}})}}else{if(s==="linkFrmEq"){r.currentObj.linkFrmEq=i}else if(s==="linkToEq"){r.currentObj.linkToEq=i}else if(s==="linkObjEq"){r.currentObj.linkObjEq=i}l.setData(r.currentObj)}},_floc:function(e,t){var r=this;var a=e.toUpperCase();var l=this.getView().getModel("olDetailModel");var s;var n=t.getSource().mBindingInfos.value.binding;if(n!==undefined&&n!==null){s=n.sPath}else{s=t.getSource().mBindingInfos.value.parts[0].path}s=s.substring(1);var i=a.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){var o=this.getView().getModel("valueHelp");var u="/FunctionLocationSet";var c=[new sap.ui.model.Filter("Tplnr","EQ",a)];var d=false;var g=sap.ui.getCore().getModel("AIWFLOC").getData();if(g.length>0){for(var b=0;b<g.length;b++){if(g[b].Functionallocation===a){if(s==="linkFrmFl"){r.currentObj.linkFrmFlVS="None";r.currentObj.linkFrmFlVST="";r.currentObj.linkFrmFl=i;r.currentObj.linkFrmFlDesc=g[b].Flocdescription;d=true}else if(s==="linkToFl"){r.currentObj.linkToFlVS="None";r.currentObj.linkToFlVST="";r.currentObj.linkToFl=i;r.currentObj.linkToFlDesc=g[b].Flocdescription;d=true}else if(s==="linkObjFl"){r.currentObj.linkObjFlVS="None";r.currentObj.linkObjFlVST="";r.currentObj.linkObjFl=i;r.currentObj.linkObjFlDesc=g[b].Flocdescription;d=true}l.setData(r.currentObj)}}}if(d===true){return}else{o.read(u,{filters:c,success:function(e,t){if(e.results.length>0){if(s==="linkFrmFl"){r.currentObj.linkFrmFlVS="None";r.currentObj.linkFrmFlVST="";r.currentObj.linkFrmFl=i;r.currentObj.linkFrmFlDesc=e.results[0].Pltxt}else if(s==="linkToFl"){r.currentObj.linkToFlVS="None";r.currentObj.linkToFlVST="";r.currentObj.linkToFl=i;r.currentObj.linkToFlDesc=e.results[0].Pltxt}else if(s==="linkObjFl"){r.currentObj.linkObjFlVS="None";r.currentObj.linkObjFlVST="";r.currentObj.linkObjFl=i;r.currentObj.linkObjFlDesc=e.results[0].Pltxt}l.setData(r.currentObj)}else{if(s==="linkFrmFl"){r.currentObj.linkFrmFlVS="Error";r.currentObj.linkFrmFlVST="Invalid Entry";r.currentObj.linkFrmFlDesc=""}else if(s==="linkToFl"){r.currentObj.linkToFlVS="Error";r.currentObj.linkToFlVST="Invalid Entry";r.currentObj.linkToFlDesc=""}else if(s==="linkObjFl"){r.currentObj.linkObjFlVS="Error";r.currentObj.linkObjFlDesc="";r.currentObj.linkObjFlVST="Invalid Entry"}l.setData(r.currentObj)}},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var n=t.join("\n");r.showMessage(n);if(s==="linkFrmFl"){r.currentObj.linkFrmFlVS="Error"}else if(s==="linkToFl"){r.currentObj.linkToFlVS="Error"}else if(s==="linkObjFl"){r.currentObj.linkObjFlVS="Error"}l.setData(r.currentObj)}})}}else{if(s==="linkFrmFl"){r.currentObj.linkFrmFl=i}else if(s==="linkToFl"){r.currentObj.linkToFl=i}else if(s==="linkObjFl"){r.currentObj.linkObjFl=i}l.setData(r.currentObj)}},onLinkLamPress:function(e){this._showLamDetail(e.getSource())},_showLamDetail:function(e){var t=e.oBindingContexts.olDetailModel.sPath;this.getRouter().navTo("linkLamDetail",{itemPath:encodeURIComponent(t)})},attachRequest:function(){var e=this.getView().createId("clsFrag");var t=this.getView().createId("charFrag");var r=sap.ui.core.Fragment.byId(e,"type");var a=sap.ui.core.Fragment.byId(e,"class");var l=sap.ui.core.Fragment.byId(e,"status");var s=sap.ui.core.Fragment.byId(t,"charName");var i=sap.ui.core.Fragment.byId(t,"charValue");var o=sap.ui.core.Fragment.byId(t,"charValueAdd");var u=sap.ui.core.Fragment.byId(t,"charValueClear");var c=sap.ui.core.Fragment.byId(t,"charValueDelete");var d=this;o.attachPress(function(e){n.handleSelCharAdd(e)});u.attachPress(function(e){n.handleCharClear(e)});c.attachPress(function(e){n.charRowDeletePress(e)});i.attachChange(function(e){d.onChange(e)})},valueHelpSelect:function(e){var t=this.getObTab();var r=e.getSource().getId().split("tskL--");r=r[1];if(e.getSource().getId().indexOf("type")>-1){n.valueHelpClassSelect("type",this,t,e)}else if(e.getSource().getId().indexOf("class")>-1){n.valueHelpClassSelect("class",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){n.valueHelpClassSelect("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){n.valueHelpCharSelect("charName",this,t,e)}else if(e.getSource().getId().indexOf("charValue")>-1){var a=e.getSource().getParent().getBindingContext().getPath();n.valueHelpCharSelect("charValue",this,t,e,a)}},onChange:function(e){var t=this.getObTab();var r=e.getSource().getId().split("tskL--");r=r[1];if(e.getSource().getId().indexOf("type")>-1){n.onClassChange("type",this,t,e)}else if(e.getSource().getId().indexOf("class")>-1){n.onClassChange("class",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){n.onClassChange("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){n.onCharChange("charName",this,e)}else if(e.getSource().getId().indexOf("charValue")>-1){n.onCharChange("charValue",this,e)}},onCharChange:function(e){var t=this.getObTab(this.oModelName);var r=e.getSource().getId().split("tskL--");r=r[1];if(e.getSource().getId().indexOf("charValueAdd")>-1){n.handleSelCharAdd("charValueAdd",this,t,e)}else if(e.getSource().getId().indexOf("charValueClear")>-1){n.handleCharClear("charValueClear",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){n.onClassChange("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){n.onCharChange("charName",this,e)}},handleClassRowAdd:function(){var e=this.getObTab();n.classRowAddPress(this,e)},handleCharRowAdd:function(){n.charRowAddPress(this)},handleCharRowDelete:function(e){var t=this.getObTab();n.charRowDeletePress(e,this,t)},handleClassRowDelete:function(e){n.classRowDeletePress(e,this)},onClassSelect:function(e){n.classSelectPress(e,this)},onSelect:function(e){n.selectPress(e,this)},_getMessagePopover:function(){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment("ugieamui.mdg.eam.lib.popover.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}return this._oMessagePopover},handleMessagePopoverPress:function(e){this._getMessagePopover().openBy(e.getSource())},createMessagePopover:function(e,t){var r=[];var a,l=this._getMessagePopover();if(typeof e==="string"){r.push({type:t,title:e,message:e})}else if(Array.isArray(e)){r=e;for(var s=0;s<r.length;s++){r[s].message=r[s].title}}sap.ui.getCore().getMessageManager().removeAllMessages();for(var s=0;s<r.length;s++){a=new o({message:r[s].message,type:r[s].type,target:"/Dummy",processor:this.getView().getModel()});sap.ui.getCore().getMessageManager().addMessages(a)}l.toggle(this.getView().byId("idMessagePopover"));this.getView().byId("idMessagePopover").setEnabled(true);this.getView().byId("idMessagePopover").setText(r.length+"")}})});