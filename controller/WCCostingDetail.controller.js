sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/core/routing/History"],function(e,t,i,n,o){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.WCCostingDetail",{formatter:n,onInit:function(){var e,i=new t({busy:true,delay:0});this.getRouter().getRoute("wccosting").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(i,"objectView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){i.setProperty("/delay",e)})},typeCheck:function(e){if(e){var t="";if(typeof e==="boolean"){return e}else if(typeof e==="string"){if(e.indexOf("false")>-1){t=false}else if(e.indexOf("true")>-1){t=true}return t}}else{return false}},onNavBack:function(){window.history.go(-1)},_onObjectMatched:function(e){var t=new sap.ui.model.json.JSONModel;var i=sap.ui.getCore().getModel("wcDetailModel");t.setData(i.getProperty(decodeURIComponent(e.getParameter("arguments").itemPath)));this.setModel(t,"wcCosting");this.getView().bindElement({path:decodeURIComponent(e.getParameter("arguments").itemPath),model:"wcCosting"})},_bindView:function(e){var t=this.getModel("objectView"),i=this.getModel();this.getView().bindElement({path:e,parameters:{expand:"ToSupplier"},events:{change:this._onBindingChange.bind(this),dataRequested:function(){i.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("objectView"),i=e.getElementBinding();if(!i.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var n=this.getResourceBundle(),o=e.getBindingContext().getObject(),a=o.ProductID,r=o.ProductID;t.setProperty("/busy",false);t.setProperty("/shareSendEmailSubject",n.getText("shareSendEmailObjectSubject",[a]));t.setProperty("/shareSendEmailMessage",n.getText("shareSendEmailObjectMessage",[r,a,location.href]))}})});