sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/core/routing/History"],function(e,t,i,a,n){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.WCCapacityDetail",{formatter:a,onInit:function(){var e,i=new t({busy:true,delay:0});this.getRouter().getRoute("wccapacity").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(i,"objectView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){i.setProperty("/delay",e)})},typeCheck:function(e){if(e){var t="";if(typeof e==="boolean"){return e}else if(typeof e==="string"){if(e.indexOf("false")>-1){t=false}else if(e.indexOf("true")>-1){t=true}return t}}else{return false}},onNavBack:function(){window.history.go(-1)},_onObjectMatched:function(e){var t=new sap.ui.model.json.JSONModel;var i=sap.ui.getCore().getModel("wcDetailModel");t.setData(i.getProperty(decodeURIComponent(e.getParameter("arguments").itemPath)));this.setModel(t,"wcCapacity");this.getView().bindElement({path:decodeURIComponent(e.getParameter("arguments").itemPath),model:"wcCapacity"})},_bindView:function(e){var t=this.getModel("objectView"),i=this.getModel();this.getView().bindElement({path:e,parameters:{expand:"ToSupplier"},events:{change:this._onBindingChange.bind(this),dataRequested:function(){i.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("objectView"),i=e.getElementBinding();if(!i.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var a=this.getResourceBundle(),n=e.getBindingContext().getObject(),o=n.ProductID,r=n.ProductID;t.setProperty("/busy",false);t.setProperty("/shareSendEmailSubject",a.getText("shareSendEmailObjectSubject",[o]));t.setProperty("/shareSendEmailMessage",a.getText("shareSendEmailObjectMessage",[r,o,location.href]))},formatTime:function(e){if(e.ms!==0){var t=e.substr(2,2);var i=e.substr(5,2);var a=e.substr(8,2);return t+":"+i+":"+a}else{return""}}})});