sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/core/routing/History","sap/ui/core/routing/Router","sap/m/MessageBox","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider","sap/ui/core/message/Message","ugiaiwui/mdg/aiw/request/util/ValueHelpRequest"],function(e,t,a,i,o,s,n,r,l){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.TLMaintPckgDetail",{formatter:a,onInit:function(){var e,a=new t({busy:true,delay:0});this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this.getView()));var i=this._oComponent.getModel();i.setDefaultCountMode(sap.ui.model.odata.CountMode.None);this.getView().setModel(i);var o=this._oComponent.getModel("NewModel");this.getView().setModel(o,"valueHelp");var s=this._oComponent.getModel("NewModel2");this.getView().setModel(s,"valueHelp2");this.getRouter().getRoute("tlMaintPckg").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(a,"objectView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){a.setProperty("/delay",e)});var n=sap.ui.getCore().getMessageManager();this.getView().setModel(n.getMessageModel(),"message");n.registerObject(this.getView(),true)},showMessage:function(e){this.createMessagePopover(e,"Error")},_onObjectMatched:function(e){var a=e.getParameter("arguments").itemPath;this.mode=e.getParameter("arguments").mode;var i=sap.ui.getCore().getModel("tlDetailModel");this.itemPath="/lMaintPckg/"+a;var o=new t;o.setData(i.getProperty(this.itemPath));this.setModel(o,"mtlMaintPckg");if(this.mode==="display"){this.getView().byId("idTblMaintPckgDetail").setMode("None");this.getView().byId("idAddMaintPckg").setEnabled(false)}else{this.getView().byId("idTblMaintPckgDetail").setMode("Delete");this.getView().byId("idAddMaintPckg").setEnabled(true)}},onNavBack:function(){window.history.go(-1)},addMaintPckg:function(){var e=this;var t=this.getModel("mtlMaintPckg");var a=t.getData();var i={Ktex1:"",Ktxhi:"",Kzyk1:"",Paket:"",Plnal:a.Plnal,Strat:a.Strat,Vornr:a.Vornr};a.MPArr.push(i);this.getModel("mtlMaintPckg").setData(a)},deleteMaintPckg:function(e){var t=e.getSource();var a=this.getModel("mtlMaintPckg");var i=a.getData();var o=e.getParameter("listItem").getBindingContext("mtlMaintPckg").sPath;var s=a.getProperty(o).Paket;i[s]=false;o=o.split("/")[2];i.MPArr.splice(parseInt(o),1);a.setData(i)},onCycleShrtTxtVH:function(e){l.CycleShrtTxtVH(e,this)},onCycleShrtTxtChange:function(e){l._CycleShrtTxtchange(e,this)},disableFields:function(){var e={enable:false};var t=new sap.ui.model.json.JSONModel;t.setData(e);this.getView().setModel(t,"tlOpDetailModel")},enableFields:function(){var e={enable:true};var t=new sap.ui.model.json.JSONModel;t.setData(e);this.getView().setModel(t,"tlOpDetailModel")}})});