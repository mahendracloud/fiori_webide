sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","ugiaiwui/mdg/aiw/request/model/formatter","sap/m/MessageToast","sap/ui/core/routing/Router","sap/m/MessageBox","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider"],function(e,t,a,r,i,s,l,n){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.TLHeaderDetail",{formatter:r,cycleSeq:[],wcSearchResults:undefined,wcSelectDialog:undefined,ppdtSearchResults:undefined,ppdtSelectDialog:undefined,wcpdtSearchResults:undefined,wcpdtSelectDialog:undefined,udtSearchResults:undefined,udtSelectDialog:undefined,plgpDtSelectDialog:undefined,plgpDtSearchResults:undefined,sydtSearchResults:undefined,sydtSelectDialog:undefined,sdtSearchResults:undefined,sdtSelectDialog:undefined,onInit:function(){var e,a=new t({busy:true,delay:0});this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this.getView()));var r=this._oComponent.getModel();r.setDefaultCountMode(sap.ui.model.odata.CountMode.None);this.getView().setModel(r);var i=this._oComponent.getModel("NewModel");this.getView().setModel(i,"valueHelp");var s=this._oComponent.getModel("NewModel2");this.getView().setModel(s,"valueHelp2");this.getRouter().getRoute("tlHdrDetail").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(a,"objectView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){a.setProperty("/delay",e)})},_onObjectMatched:function(e){var t=new sap.ui.model.json.JSONModel;var a=sap.ui.getCore().getModel("tlDetailModel");this.status=e.getParameter("arguments").status;t.setData(a.getProperty(decodeURIComponent(e.getParameter("arguments").itemPath)));this.getView().setModel(t,"hdrDetailview");this.itemPath=e.getParameter("arguments").itemPath;this.getView().bindElement({path:decodeURIComponent(e.getParameter("arguments").itemPath),model:"hdrDetailview"});var r=e.getParameter("arguments").mainPath;this.action=e.getParameter("arguments").action;var i=new sap.ui.model.json.JSONModel;var s=decodeURIComponent(r)+decodeURIComponent(this.itemPath);this.mode=e.getParameter("arguments").mode;if(this.action==="createGTL"||this.action==="approveGTL"){var l=sap.ui.getCore().getModel("AIWListGTLModel");this.headerDetail=l.getProperty(s);i.setData(this.headerDetail)}else if(this.action==="createETL"||this.action==="approveETL"){var n=sap.ui.getCore().getModel("AIWListETLModel");this.headerDetail=n.getProperty(s);i.setData(this.headerDetail)}else if(this.action==="createFTL"||this.action==="approveFTL"){var d=sap.ui.getCore().getModel("AIWListFTLModel");this.headerDetail=d.getProperty(s);i.setData(this.headerDetail)}this.getView().bindElement({path:decodeURIComponent(e.getParameter("arguments").itemPath),model:"tlHeaderDetailModel"});var o=e.getParameter("arguments").pPlant;var u=e.getParameter("arguments").mainWc;var h=e.getParameter("arguments").mainWcPlant;var p=e.getParameter("arguments").wcDesc;var g=e.getParameter("arguments").pPlantDesc;if(o!=="null"){this.headerDetail.Iwerk=o;this.headerDetail.pPlantDtEnb=false}else{this.headerDetail.pPlantDtEnb=true}if(g!=="null"){this.headerDetail.pPlantDesc=g}if(u!=="null"){this.headerDetail.KapArbpl=u}if(h!=="null"){this.headerDetail.Werks=h}if(this.headerDetail.Verwe!==""){this.headerDetail.usgValueState="None"}if(this.headerDetail.Statu!==""){this.headerDetail.statusVS="None"}if(this.status===true){this.disableFields()}else if(this.status===false){this.enableFields()}if(this.mode==="display"){this.headerDetail.enable=false;this.headerDetail.pPlantDtEnb=false;this.headerDetail.visible=true}else{this.headerDetail.enable=true;this.headerDetail.pPlantDtEnb=true;this.headerDetail.visible=false}i.setData(this.headerDetail);this.getView().setModel(i,"tlHeaderDetailModel")},disableFields:function(){var e={hEnable:false};var t=new sap.ui.model.json.JSONModel;t.setData(e);this.getView().setModel(t,"hDetail")},enableFields:function(){var e={hEnable:true};var t=new sap.ui.model.json.JSONModel;t.setData(e);this.getView().setModel(t,"hDetail")},readHdrDefaults:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r=this.getView().getModel().sServiceUrl;var i=new sap.ui.model.odata.v2.ODataModel(r,{json:true,useBatch:false,defaultCountMode:sap.ui.model.odata.CountMode.None});var s=[];var l="/ProfileDataSet";var n=[new sap.ui.model.Filter("Profidnetz","EQ","")];i.read(l,{filters:n,success:function(a){s=a.results[0];if(s){if(e==="planningPlant"){t.headerDetail.Verwe=s.Verwe;t.headerDetail.usageDesc=s.Vtext;t.headerDetail.Statu=s.Statu;t.headerDetail.statusDesc=s.Sttext}if(e==="usage"){t.headerDetail.Statu=s.Statu;t.headerDetail.statusDesc=s.Sttext}if(e==="status"){t.headerDetail.Verwe=s.Verwe;t.headerDetail.usageDesc=s.Vtext}if(e==="desc"){t.headerDetail.Verwe=s.Verwe;t.headerDetail.usageDesc=s.Vtext;t.headerDetail.Statu=s.Statu;t.headerDetail.statusDesc=s.Sttext}}},error:function(e){}});a.setData(t.headerDetail)},onNavBack:function(){var e=this.getView().getModel("i18n").getProperty("DATA_LOSS");var t=this;sap.m.MessageBox.show(e,{title:"Confirmation",icon:sap.m.MessageBox.Icon.QUESTION,actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:function(e){if(e==="YES"){var a=new sap.ui.model.json.JSONModel;var r=t.getView().getModel("itDetailview").getData();r=t.displayObject();window.history.go(-1)}}})},onCancelPress:function(){var e=this.getView().getModel("i18n").getProperty("DATA_LOSS");var t=this;sap.m.MessageBox.show(e,{title:"Confirmation",icon:sap.m.MessageBox.Icon.QUESTION,actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:function(e){if(e==="YES"){var a=new sap.ui.model.json.JSONModel;var r=t.getView().getModel("itDetailview").getData();r=t.displayObject();a.setData(r);t.getView().setModel(a,"itDetailview");window.history.go(-1)}}})},onPplantDtVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("PLAN_PLANT_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/PlanningPlantSet",template:new sap.m.StandardListItem({title:"{Werks}",description:"{Name1}"})},confirm:function(e){t.headerDetail.pPlantValueState="None";t.headerDetail.Iwerk=e.getParameters().selectedItem.getProperty("title");t.headerDetail.pPlantDesc=e.getParameters().selectedItem.getProperty("description");a.setData(t.headerDetail);t.readHdrDefaults("planningPlant")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Werks",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Name1",sap.ui.model.FilterOperator.Contains,t)],false)])}});var i="/PlanningPlantSet";var s=this.getView().getModel("valueHelp");s.read(i,{success:function(e,a){if(e.results.length>0){t.ppdtSearchResults=e;var i=new sap.m.StandardListItem({title:"{Werks}",description:"{Name1}"});var s=new sap.ui.model.json.JSONModel;s.setData(e);r.setModel(s);r.bindAggregation("items","/results",i)}else{r.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}});r.open()},onUsageDtVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r;if(r===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("USAGE"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/UsageVHSet",template:new sap.m.StandardListItem({title:"{VERWE}",description:"{TXT}"})},confirm:function(e){t.headerDetail.usgValueState="None";t.headerDetail.usgValueStateTxt="";t.headerDetail.Verwe=e.getParameters().selectedItem.getProperty("title");t.headerDetail.usageDesc=e.getParameters().selectedItem.getProperty("description");a.setData(t.headerDetail);t.readHdrDefaults("usage")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("VERWE",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("TXT",sap.ui.model.FilterOperator.Contains,t)],false)])}});var s="/UsageVHSet";var l=this.getView().getModel("valueHelp");l.read(s,{success:function(e,a){if(e.results.length>0){r=e;var s=new sap.m.StandardListItem({title:"{VERWE}",description:"{TXT}"});var l=new sap.ui.model.json.JSONModel;l.setData(e);i.setModel(l);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var n=new sap.ui.model.json.JSONModel;n.setData(r);i.setModel(n);var d=i.getItems();for(var o=0;o<d.length;o++){d[o].setVisible(true)}}i.open()},onStrategyVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r={title:this.getView().getModel("i18n").getProperty("STRAT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STRATEGY}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SCH_IND}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>UINT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>FACT_CAL}"})]})],items:{path:"/StrategySet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})]})},confirm:function(e){t.headerDetail.Strat=e.getParameter("selectedItem").getCells()[0].getText();t.headerDetail.stratDesc=e.getParameter("selectedItem").getCells()[1].getText();a.setData(t.headerDetail)}};var i="/StrategySet";var s=[];var l=this.getView().getModel("valueHelp");var d=[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})];var o=n.getValueHelp(l,i,d,s,r,"Strat","Ktext");o.open();o.setModel(t.getView().getModel("i18n"),"i18n")},onPlannerGrpVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r;if(r===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("PL_GRP"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/PlannerGroupSet",template:new sap.m.StandardListItem({title:"{FEVOR}",description:"{TXT}"})},confirm:function(e){t.headerDetail.plGrpValueState="None";t.headerDetail.Vagrp=e.getParameters().selectedItem.getProperty("title");t.headerDetail.plGrpDesc=e.getParameters().selectedItem.getProperty("description");a.setData(t.headerDetail)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("FEVOR",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("TXT",sap.ui.model.FilterOperator.Contains,t)],false)])}});var s="/PlannerGroupSet";var l=this.getView().getModel("valueHelp");l.read(s,{success:function(e,a){if(e.results.length>0){r=e;var s=new sap.m.StandardListItem({title:"{FEVOR}",description:"{TXT}"});var l=new sap.ui.model.json.JSONModel;l.setData(e);i.setModel(l);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var n=new sap.ui.model.json.JSONModel;n.setData(r);i.setModel(n);var d=i.getItems();for(var o=0;o<d.length;o++){d[o].setVisible(true)}}i.open()},onWCDtVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r={title:this.getView().getModel("i18n").getProperty("WC"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>WC_CAT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>PLANT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>WORK_CENTER}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>LANGUAGE}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>CTRL_KEY}"})]})],items:{path:"/WorkCenterVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"}),new sap.m.Text({text:"{Steus}"})]})},confirm:function(e){t.headerDetail.KapArbpl=e.getParameter("selectedItem").getCells()[2].getText();t.headerDetail.Werks=e.getParameter("selectedItem").getCells()[1].getText();if(t.headerDetail.wcDtValueState==="Error"){t.headerDetail.wcDtValueState="None"}a.setData(t.headerDetail)}};var i="/WorkCenterVHSet";var s=[];var l=this.getView().getModel("valueHelp");var d=[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})];var o=n.getValueHelp(l,i,d,s,r,"Ktext","Arbpl");o.open();o.setModel(t.getView().getModel("i18n"),"i18n")},onPlantWcVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r={title:this.getView().getModel("i18n").getProperty("PLANT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>WC_CAT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>PLANT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>WORK_CENTER}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>LANGUAGE}"})]})],items:{path:"/WorkCenterVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]})},confirm:function(e){t.headerDetail.wcPlantValueState="None";t.headerDetail.Werks=e.getParameter("selectedItem").getCells()[1].getText();a.setData(t.headerDetail)}};var i="/WorkCenterVHSet";var s=[];var l=this.getView().getModel("valueHelp");var d=[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})];var o=n.getValueHelp(l,i,d,s,r,"Werks","Verwe");o.open();o.setModel(t.getView().getModel("i18n"),"i18n")},onSysCondDtVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r;if(r===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("SYS_CONDITION"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/SystemConditionSet",template:new sap.m.StandardListItem({title:"{ANLZU}",description:"{ANLZUX}"})},confirm:function(e){t.headerDetail.Anlzu=e.getParameters().selectedItem.getProperty("title");t.headerDetail.sysCondDesc=e.getParameters().selectedItem.getProperty("description");a.setData(t.headerDetail)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("ANLZU",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("ANLZUX",sap.ui.model.FilterOperator.Contains,t)],false)])}});var s="/SystemConditionSet";var l=this.getView().getModel("valueHelp");l.read(s,{success:function(e,a){if(e.results.length>0){r=e;var s=new sap.m.StandardListItem({title:"{ANLZU}",description:"{ANLZUX}"});var l=new sap.ui.model.json.JSONModel;l.setData(e);i.setModel(l);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var n=new sap.ui.model.json.JSONModel;n.setData(r);i.setModel(n);var d=i.getItems();for(var o=0;o<d.length;o++){d[o].setVisible(true)}}i.open()},onStatusDtVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r;if(r===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("STATUS"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/StatusVHSet",template:new sap.m.StandardListItem({title:"{PLNST}",description:"{TXT}"})},confirm:function(e){t.headerDetail.statusValueState="None";t.headerDetail.Statu=e.getParameters().selectedItem.getProperty("title");t.headerDetail.statusDesc=e.getParameters().selectedItem.getProperty("description");a.setData(t.headerDetail);t.readHdrDefaults("status")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("PLNST",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("TXT",sap.ui.model.FilterOperator.Contains,t)],false)])}});var s="/StatusVHSet";var l=this.getView().getModel("valueHelp");l.read(s,{success:function(e,a){if(e.results.length>0){r=e;var s=new sap.m.StandardListItem({title:"{PLNST}",description:"{TXT}"});var l=new sap.ui.model.json.JSONModel;l.setData(e);i.setModel(l);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var n=new sap.ui.model.json.JSONModel;n.setData(r);i.setModel(n);var d=i.getItems();for(var o=0;o<d.length;o++){d[o].setVisible(true)}}i.open()},onAssemblyVH:function(e){var t=this;var a=this.getView().getModel("tlHeaderDetailModel");var r={title:this.getView().getModel("i18n").getProperty("Assembly"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>LANGUAGE}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>MAT}"})]})],items:{path:"/MaterialVH_PRTSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Maktg}"}),new sap.m.Text({text:"{Spras}"}),new sap.m.Text({text:"{Matnr}"})]})},confirm:function(e){t.headerDetail.assmbly=e.getParameter("selectedItem").getCells()[0].getText();t.headerDetail.assmblyDesc=e.getParameter("selectedItem").getCells()[2].getText();a.setData(t.headerDetail)}};var i="/MaterialVH_PRTSet";var s=[];var l=this.getView().getModel("valueHelp");var d=[new sap.m.Text({text:"{Maktg}"}),new sap.m.Text({text:"{Spras}"}),new sap.m.Text({text:"{Matnr}"})];var o=n.getValueHelp(l,i,d,s,r,"Matnr","Maktg");o.open();o.setModel(t.getView().getModel("i18n"),"i18n")},validateFields:function(){var e=false;var t=this.headerDetail.Plnal;var a=this.headerDetail.Ktext;var r=this.headerDetail.Iwerk;var i=this.headerDetail.Statu;var s=this.headerDetail.Verwe;if(t===""||a===""||r===""||i===""||s===""){e=true;if(t===""){this.headerDetail.grpCntrValueState="Error"}if(a===""){this.headerDetail.descDtValueState="Error"}if(r===""){this.headerDetail.pPlantValueState="Error"}if(i===""){this.headerDetail.statusValueState="Error"}if(s===""){this.headerDetail.usgValueState="Error"}this.getView().getModel("tlHeaderDetailModel").setData(this.headerDetail);var l=this.getView().getModel("i18n").getProperty("MANDMSG");sap.m.MessageToast.show(l,{duration:1e4})}return e},onHdrDonePress:function(e){var t=this.validateFields();var a=sap.ui.getCore().getModel("tlDetailModel");var r=a.getData().header;var i=parseInt(this.itemPath.substr(-1));r[i].Plnnr=this.headerDetail.Plnnr;r[i].Plnal=this.headerDetail.Plnal;r[i].Ktext=this.headerDetail.Ktext;r[i].Iwerk=this.headerDetail.Iwerk;r[i].pPlantDesc=this.headerDetail.pPlantDesc;r[i].KapArbpl=this.headerDetail.KapArbpl;r[i].Werks=this.headerDetail.Werks;r[i].Verwe=this.headerDetail.Verwe;r[i].usageDesc=this.headerDetail.usageDesc;r[i].Vagrp=this.headerDetail.Vagrp;r[i].plGrpDesc=this.headerDetail.plGrpDesc;r[i].Statu=this.headerDetail.Statu;r[i].statusDesc=this.headerDetail.statusDesc;r[i].Anlzu=this.headerDetail.Anlzu;r[i].sysCondDesc=this.headerDetail.sysCondDesc;r[i].Strat=this.headerDetail.Strat;r[i].stratDesc=this.headerDetail.stratDesc;var s=this.getView().getParent()._pageStack[0].id;s=s+"--taskListHeaderOverview";var l=new sap.ui.model.json.JSONModel;l.setData(r);sap.ui.getCore().setModel(l,"tlDetailModel");sap.ui.getCore().byId(s).setSelectedItem(sap.ui.getCore().byId(s).getItems()[i],true,true);window.history.go(-1)},onLiveChange:function(e){if(e.getSource().getValue()===" "){e.getSource().setValue("")}e.getSource().setValueState("None")},onChange:function(e){var t=e.getSource().getValue();var a;var r=e.getSource().mBindingInfos.value.binding;if(r!==undefined&&r!==null){a=r.sPath}else{a=e.getSource().mBindingInfos.value.parts[0].path}a=a.substring(1);switch(a){case"Ktext":this._descChange(t,e);break;case"Iwerk":this._planningPlant(t,e);break;case"KapArbpl":this._mainWc(t,e);break;case"Werks":this._mainWcPlnt(t,e);break;case"Verwe":this._usage(t,e);break;case"Vagrp":this._plannerGrp(t,e);break;case"Statu":this._status(t,e);break;case"Strat":this._maintenanceStrat(t,e);break;case"assmbly":this._assmbly(t,e);break}},_descChange:function(e,t){var a=this;var r=a.getView().getModel("tlHeaderDetailModel");if(e!==""){a.headerDetail.descDtValueState="None";r.setData(a.headerDetail);a.readHdrDefaults("desc")}},_planningPlant:function(e,t){var a=this;var r=e.toUpperCase();var i=this.getView().getModel("tlDetailModel");var r=e.toUpperCase();var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/PlanningPlantSet";var d=[new sap.ui.model.Filter("WERKS","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.pPlantValueState="None";a.headerDetail.Iwerk=s;a.headerDetail.pPlantDesc=e.results[0].NAME1;i.setData(a.headerDetail);a.readHdrDefaults("planningPlant")}else{a.headerDetail.pPlantValueState="Error";a.headerDetail.pPlantDesc="";a.headerDetail.pPlantValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.pPlantValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.pPlantValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Iwerk=s;i.setData(a.headerDetail)}},_mainWc:function(e,t){var a=e;var r=this;var i=this.getView().getModel("tlDetailModel");var s=a.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/WorkCenterSet";var d=[new sap.ui.model.Filter("Arbpl","EQ",a)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){r.headerDetail.wcDtValueState="None";r.headerDetail.KapArbpl=s;r.headerDetail.Werks=e.results[0].Werks;i.setData(r.headerDetail)}else{r.headerDetail.wcDtValueState="Error";r.headerDetail.Werks="";r.headerDetail.wcDtValueStateTxt="Invalid Entry";i.setData(r.headerDetail)}},error:function(e){r.headerDetail.wcDtValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;r.headerDetail.wcDtValueStateTxt=a;i.setData(r.headerDetail)}})}else{r.headerDetail.KapArbpl=s;i.setData(r.headerDetail)}},_mainWcPlnt:function(e,t){var a=e;var r=this;var i=this.getView().getModel("tlDetailModel");var s=a.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/WorkCenterSet";var d=[new sap.ui.model.Filter("Werks","EQ",a)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){r.headerDetail.wcPlantValueState="None";r.headerDetail.Werks=s;i.setData(r.headerDetail)}else{r.headerDetail.wcPlantValueState="Error";r.headerDetail.wcPlantValueStateTxt="Invalid Entry";i.setData(r.headerDetail)}},error:function(e){r.headerDetail.wcPlantValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;r.headerDetail.wcPlantValueStateTxt=a;i.setData(r.headerDetail)}})}else{r.headerDetail.Werks=s;i.setData(r.headerDetail)}},_usage:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/UsageVHSet";var d=[new sap.ui.model.Filter("VERWE","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.usgValueState="None";a.headerDetail.Verwe=s;a.headerDetail.usageDesc=e.results[0].TXT;i.setData(a.headerDetail);a.readHdrDefaults("usage")}else{a.headerDetail.usgValueState="Error";a.headerDetail.usageDesc="";a.headerDetail.usgValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.usgValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.usgValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Verwe=s;i.setData(a.headerDetail)}},_plannerGrp:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/PlannerGroupSet";var d=[new sap.ui.model.Filter("FEVOR","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.plGrpValueState="None";a.headerDetail.Vagrp=s;a.headerDetail.plGrpDesc=e.results[0].TXT;i.setData(a.headerDetail);a.readHdrDefaults("usage")}else{a.headerDetail.plGrpValueState="Error";a.headerDetail.plGrpDesc="";a.headerDetail.plGrpValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.plGrpValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.plGrpValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Vagrp=s;i.setData(a.headerDetail)}},_status:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/StatusVHSet";var d=[new sap.ui.model.Filter("PLNST","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.statusValueState="None";a.headerDetail.Statu=s;a.headerDetail.statusDesc=e.results[0].TXT;i.setData(a.headerDetail);a.readHdrDefaults("status")}else{a.headerDetail.statusValueState="Error";a.headerDetail.statusDesc="";a.headerDetail.statusValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.statusValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.statusValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Statu=s;i.setData(a.headerDetail)}},_systemCondition:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l="/SystemConditionSet?$filter="+jQuery.sap.encodeURL("ANLZU eq '"+r+"'");var n=this.getView().getModel("valueHelp");var l="/SystemConditionSet";var d=[new sap.ui.model.Filter("ANLZU","EQ",r)];n.read(l,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.sysCondValueState="None";a.headerDetail.Anlzu=s;a.headerDetail.sysCondDesc=e.results[0].ANLZUX;i.setData(a.headerDetail)}else{a.headerDetail.sysCondValueState="Error";a.headerDetail.sysCondDesc="";a.headerDetail.sysCondValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.sysCondValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.sysCondValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Anlzu=s;i.setData(a.headerDetail)}},_maintenanceStrat:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/MaintStratVHSet";var d=[new sap.ui.model.Filter("Strat","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.maintStrValueState="None";a.headerDetail.Strat=s;a.headerDetail.stratDesc=e.results[0].Ktext;i.setData(a.headerDetail)}else{a.headerDetail.maintStrValueState="Error";a.headerDetail.stratDesc="";a.headerDetail.maintStrValueStateTxt="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.maintStrValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.maintStrValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.Strat=s;i.setData(a.headerDetail)}},_assmbly:function(e,t){var a=this;var r=e;var i=this.getView().getModel("tlDetailModel");var s=r.replace(/^[ ]+|[ ]+$/g,"");if(s!==""){var l=this.getView().getModel("valueHelp");var n="/MaterialVH_PRTSet";var d=[new sap.ui.model.Filter("Strat","EQ",r)];l.read(n,{filters:d,success:function(e,t){if(e.results.length>0){a.headerDetail.assemblyValueState="None";a.headerDetail.assmbly=s;a.headerDetail.assmblyDesc=e.results[0].Maktg;i.setData(a.headerDetail)}else{a.headerDetail.assemblyValueState="Error";a.headerDetail.stratDesc="";a.headerDetail.assmblyDesc="Invalid Entry";i.setData(a.headerDetail)}},error:function(e){a.headerDetail.assemblyValueState="Error";var t=JSON.parse(e.responseText);var r=t.error.message.value;a.headerDetail.assemblyValueStateTxt=r;i.setData(a.headerDetail)}})}else{a.headerDetail.assmbly=s;i.setData(a.headerDetail)}}})});