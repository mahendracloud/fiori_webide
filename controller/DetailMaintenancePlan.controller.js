sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","ugiaiwui/mdg/aiw/request/util/ValueHelpRequest","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider","sap/ui/core/message/Message"],function(e,t,a,r,l,s,i,n,o){"use strict";return e.extend("ugiaiwui.mdg.aiw.request.controller.DetailMaintenancePlan",{formatter:r,detailFlag:true,index:-1,oAttach:[],colItems:"",colItemsT:"",maintCycle:"",oFileUpload:"",maintItems:"",counter:"",spSelectDialog:undefined,fSelectDialog:undefined,ntSelectDialog:undefined,otSelectDialog:undefined,cuSelectDialog:undefined,coSelectDialog:undefined,plpSelectDialog:undefined,plgpSelectDialog:undefined,wcSelectDialog:undefined,wcpSelectDialog:undefined,strSearchResults:undefined,strSelectDialog:undefined,csSelectDialog:undefined,csSearchResults:undefined,mItemSelectDialog:undefined,mItemResults:undefined,counterUnit:"",cycleUnit:"",stratUnit:"",system:"",classType:"",_class:"",defaultCharArr:[],charValueArr:[],lArray:[],singleVal:"",charValue:"",cPath:"",sPath:"",resultArr:[],charFlag:"",onInit:function(){this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this.getView()));this.getRouter().getRoute("detailMpmi").attachPatternMatched(this._onRouteMatched,this);var e=this._oComponent.getModel();e.setDefaultCountMode(sap.ui.model.odata.CountMode.None);this.getView().setModel(e);var a=this._oComponent.getModel("NewModel");this.getView().setModel(a,"valueHelp");var r=this._oComponent.getModel("NewModel2");this.getView().setModel(r,"valueHelp2");this.oAttach=[];this.oModelUpdateFlag=false;this.oModelName="AIWMPMI";this.getView().setModel(new t([]),this.oModelName);this.getModel(this.oModelName).setProperty("/itemModel",[]);this.readMaintPlanCat();var l={titleName:this.getOwnerComponent().getModel("i18n").getProperty("createMpmiTitle"),visible:false,enabled:true};var s={createVisible:true,approveVisible:false,tlGroupVisible:true,tlGroupEnabled:true,objLstItmTableMode:"MultiSelect"};this.getView().setModel(new t(l),"mainView");this.getView().setModel(new t(s),"ApproveModel");sap.ui.getCore().setModel(new t(l),"mainView");sap.ui.getCore().setModel(new t(s),"ApproveModel");var i={itemStatus:false,oModelUpdateFlag:false};sap.ui.getCore().setModel(new t(i),"AIWMPMIStatus");var n=this.getView().createId("clsFrag");var o=this.getView().createId("charFrag");var d=this.getView().createId("lamFrag");this.class=sap.ui.core.Fragment.byId(n,"assignmentTab");this.char=sap.ui.core.Fragment.byId(o,"characteristicsTab");this.getClassType(this);var c=sap.ui.getCore().getMessageManager();this.getView().setModel(c.getMessageModel(),"message");c.registerObject(this.getView(),true)},_onRouteMatched:function(e){var a=e.getParameter("name");if(a==="detailMpmi"){var r=sap.ui.getCore().getModel("AIWMPMIStatus").getData().itemStatus;if(r){var l=sap.ui.getCore().getModel("AIWMPMIStatus").getData().oModelUpdateFlag;var s=sap.ui.getCore().getModel("AIWMPMIDetail").getProperty("/itemModel");this.oModelUpdateFlag=l;this.getView().getModel(this.oModelName).setProperty("/itemModel",s);sap.ui.getCore().getModel("AIWMPMI").getProperty(this.rowIndex).itemModel=s;sap.ui.getCore().setModel(new t({itemStatus:false,oModelUpdateFlag:false}),"AIWMPMIStatus")}else{this.rowIndex=decodeURIComponent(e.getParameter("arguments").Path);this.viewName=e.getParameter("arguments").ViewName;this.oModelUpdateFlag=false;var i=this.getView().getModel("mainView");var n=this.getView().getModel("ApproveModel");var o=i.getData();var d=n.getData();var c=new t;o.enabled=true;this.getView().byId("idBtnCheck").setVisible(true);if(sap.ui.getCore().getModel("refreshModel")!==undefined){var u=sap.ui.getCore().getModel("refreshModel");u.setProperty("/refreshSearch",false)}var g=sap.ui.getCore().getModel("ClassAttachRequest");var f=g.getData();if(f.attachMpmiFlag){this.attachRequest();f.attachMpmiFlag=false;g.setData(f)}var M=[],p=[],h;var m=true;if(this.viewName==="CreateMpmi"){c.setData(sap.ui.getCore().getModel(this.oModelName).getProperty(this.rowIndex));this.CrStatus=false;this.stratUnit=c.getData().Unitc;this.backUpCycleType=c.getData().cycleType;this.backUpStich=c.getData().Stich;this.backUpMehrfach=c.getData().Mehrfach;this.getView().setModel(c,this.oModelName);if(c.getData().viewParameter==="change"){if(c.getData().Strat===""||c.getData().Strat===undefined){c.getData().StratEnabled=true}else{c.getData().StratEnabled=false}if(c.getData().Mehrfach===""||c.getData().Mehrfach===undefined){c.getData().MehrfachEnabled=true}else{c.getData().MehrfachEnabled=false}if(c.getData().Wset===""||c.getData().Wset===undefined){c.getData().WsetEnabled=true}else{c.getData().WsetEnabled=false}c.getData().WarplEnabled=false;c.getData().MptypEnabled=false;c.getData().HorizVisible=false;o.titleName=this.getOwnerComponent().getModel("i18n").getProperty("changeMpmi")}else{c.getData().WarplEnabled=true;o.titleName=this.getOwnerComponent().getModel("i18n").getProperty("createMpmi")}var S=this.getView().getModel(this.oModelName).getProperty("/itemModel").length;if(S<=0){this.maintenanceItems()}M=c.getData().classItems;this.chData=c.getData().characteristics;if(this.chData.length>0){if(M.length>0){for(var b=0;b<this.chData.length;b++){if(M[0].Class===this.chData[b].Class){p.push(this.chData[b])}}}}h=c.getData().charNewButton}if(this.viewName==="ChangeMpmi"){this.CrStatus=e.getParameter("arguments").CrStatus;var y=e.getParameter("arguments").Mplan;o.titleName=this.getOwnerComponent().getModel("i18n").getProperty("changeMpmi");if(this.CrStatus==="true"){o.enabled=false;m=false;h=false}this.sExistFlag=false;var V;var v=sap.ui.getCore().getModel(this.oModelName).getData();if(v.length>0){for(var E=0;E<v.length;E++){if(v[E].Warpl===y){V=E;this.sExistFlag=true;break}}}if(this.sExistFlag){var I=v[V].cycleModel.lenth;for(var P=0;P<I;P++){v[V].cycleModel[P].Zykl1Enabled=false;v[V].cycleModel[P].ZeiehEnabled=false;v[V].cycleModel[P].PakTextEnabled=false;v[V].cycleModel[P].OffsetEnabled=false;v[V].cycleModel[P].PointEnabled=false;v[V].cycleModel[P].CycleseqiEnabled=false}v[V].HorizVisible=false;v[V].FabklEnabled=false;v[V].WarplEnabled=false;v[V].MptypEnabled=false;v[V].StratEnabled=false;v[V].WsetEnabled=false;v[V].MehrfachEnabled=false;this.stratUnit=v[V].Unitc;this.getView().setModel(new t(v[V]),this.oModelName);M=v[V].classItems;this.chData=v[V].characteristics;if(this.chData.length>0){if(M.length>0){for(var b=0;b<this.chData.length;b++){if(M[0].Class===this.chData[b].Class){p.push(this.chData[b])}}}}h=v[V].charNewButton}else{this.readMaintenancePlanData(y,this.CrStatus)}}if(this.viewName==="Approve"){this.getView().byId("idBtnCheck").setVisible(false);c.setData(sap.ui.getCore().getModel(this.oModelName).getProperty(this.rowIndex));var C=c.getData().cycleModel.lenth;for(var T=0;T<C;T++){c.getData().cycleModel[T].Zykl1Enabled=false;c.getData().cycleModel[T].ZeiehEnabled=false;c.getData().cycleModel[T].PakTextEnabled=false;c.getData().cycleModel[T].OffsetEnabled=false;c.getData().cycleModel[T].PointEnabled=false;c.getData().cycleModel[T].CycleseqiEnabled=false}c.getData().WarplEnabled=false;c.getData().FabklEnabled=false;c.getData().MptypEnabled=false;c.getData().StratEnabled=false;c.getData().WsetEnabled=false;c.getData().MehrfachEnabled=false;if(c.getData().Mehrfach===true||(c.getData().Wset!==""||c.getData()!==undefined)){c.getData().HorizVisible=false}else{c.getData().HorizVisible=true}this.getView().setModel(c,this.oModelName);this.CrStatus=false;var w=new t;var L=sap.ui.getCore().getModel("AIWAPPROVE").getProperty("/AIWMPMI"+this.rowIndex);w.setData(L);this.getView().setModel(w,"AIWAPPROVE");o.titleName=this.getOwnerComponent().getModel("i18n").getProperty("approveMpmi");o.enabled=false;d.createVisible=false;d.approveVisible=true;d.tlGroupEnabled=false}var k=this.getView().createId("clsFrag");var A=sap.ui.core.Fragment.byId(k,"newHeader");A.setEnabled(m);this.class.setModel(new t(M));this.char.setModel(new t(p));this.class.setVisible(d.createVisible);this.char.setVisible(d.createVisible);this.readSystem();i.setData(o);n.setData(d)}}else{return}},ValidateTimeKey:function(e,t,a){var r=this;var l=a.cycleIndSingle;var s=a.cycleIndMultCntr;var i=a.ScheIndRbTimeKeyDate;var n=e;var o=this.getView().getModel("i18n");if((l||s)&&i){for(var d=0;d<n.length;d++){var c=n[d].Zykl1;var u=n[d].Zeieh.toUpperCase();if((u==="DAY"||u==="D")&&parseInt(c)%30!==0){n[d].Zykl1VS="Error";this.invokeMessage(o.getProperty("KEY_SCH_NOT_POSSIBLE")+c)}else if((u==="H"||u==="HR")&&parseInt(c)%720!==0){n[d].Zykl1VS="Error";this.invokeMessage(o.getProperty("KEY_SCH_NOT_POSSIBLE")+c)}else if(u==="MIN"&&parseInt(c)%43200!==0){n[d].Zykl1VS="Error";this.invokeMessage(o.getProperty("KEY_SCH_NOT_POSSIBLE")+c)}else{n[d].Zykl1VS="None"}}}},readCounterReading:function(e,t){var a=this;var r=a.getView().getModel("valueHelp");var l=a.getView().getModel("AIWMPMI");var s=l.getData();r.read("/StCounterReadSet(Counter='"+e+"',Unit='"+t+"')",{success:function(e){if(s.Szaeh===""){s.Szaeh=e.StCounter;l.setData(s)}}})},onInactiveSelect:function(e){var t=e.getSource().getModel(this.oModelName).getData();t.Deact=e.getSource().getSelected()},onOffsetChange:function(e){var t=e.getSource().getValue();if(t===""||t===undefined){e.getSource().setValue("")}else{e.getSource().setValue(t.toUpperCase())}},attachModelEventHandlers:function(e){e.attachPropertyChange(this.handlePropertyChanged,this)},handlePropertyChanged:function(){this.oModelUpdateFlag=true},readMaintPlanCat:function(){var e=this;var a="/MPLANItemCatgSet";var r=e.getView().getModel("valueHelp");var l=function(a){if(a.results.length>0){var r=[];for(var l=0;l<a.results.length;l++){r.push(a.results[l])}var s=new t([]);s.setData(r);e.getView().setModel(s,"MainPlanCatModel")}};var s=function(){};e._readData(a,r,l,s)},maintenanceItems:function(){var e=this;var t="/TempKeySet";var a=[new l("CRType","EQ","MPITEM"),new l("ObjNo","EQ",1)];var r=e.getView().getModel("valueHelp");var s=e.getView().getModel("mainView");var i=s.getData();i.viewBusy=true;s.setData(i);var n=function(t){var a=e.getView().getModel(e.oModelName).getData();var r=[{Mitemnumb:t.results[0].Key,Pstxt:a.Wptxt,Cycleseq:"",Tplnr:"",Pltxt:"",Equnr:"",Eqktx:"",AsmblyOb:"",Assemblydesc:"",Werks:"",Planningplantdes:"",Auart:"",oTypeTxt:"",Qmart:"",nTypeTxt:"",ArbpMi:"",WergwMi:"",Ingrp:"",Innam:"",Zeieh:"",Priok:"",ItmPriotxt:"",GsberMi:"",Gtext:"",TaskDet:false,Ilart:"",Ilatx:"",PlntyMi:"",ApfktMi:"",PlnnrMi:"",PlnalMi:"",Gpcounterdesc:"",AnlzuMi:"",Anlzux:"",SwerkMil:"",Name1:"",StortMil:"",Locationdesc:"",MsgrpIl:"",BeberMil:"",Fing:"",Tele:"",ArbplIl:"",Workcenterdesc:"",AbckzIl:"",Abctx:"",EqfnrIl:"",BukrsMil:"",Butxt:"",City:"",Anln1Mil:"",Anln2Mil:"",Txt50:"",GsberIl:"",KostlMil:"",Contareaname:"",KokrsMil:"",Posid:"",Post1:"",AufnrIl:"",SettleOrdDesc:"",QmartLBL:true,QmartVis:true,nTypetxtVis:true,AuartLBL:true,AuartVis:true,oTypeTxtVis:true,CycleseqLBL:false,CycleseqVis:false,AsmblyObMaxLength:40,maintItemE:false,cycleSetE:false,TplnrEnabled:false,equiE:false,assemblyE:false,CycleseqVS:"None",CycleseqVST:"",TplnrVS:"None",TplnrVST:"",EqunrVS:"None",EqunrVST:"",AsmblyObVS:"None",AsmblyObVST:"",WerksVS:"None",WerksVST:"",AuartVS:"None",AuartVST:"",QmartVS:"None",QmartVST:"",ArbpMiVS:"None",ArbpMiVST:"",WergwMiVS:"None",WergwMiVST:"",IngrpVS:"None",IngrpVST:"",ZeiehVS:"None",ZeiehVST:"",LDVisible:false,lam:{Mitemnumb:t.results[0].Key,Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}];e.getModel(e.oModelName).setProperty("/itemModel",r);i.viewBusy=false;s.setData(i)};var o=function(){i.viewBusy=false;s.setData(i)};e._readData(t,r,n,o,a)},readSystem:function(){var e=this;var t="/SystemTypeSet";var a=e.getView().getModel("valueHelp");var r=e.getView().getModel(e.oModelName).getProperty("/itemModel");var l=function(t){e.system=t.results[0].System;if(r.length>0){if(e.system===true){r[0].AsmblyObMaxLength=40}else{r[0].AsmblyObMaxLength=18}}e.getView().getModel(e.oModelName).setProperty("/itemModel",r)};var s=function(){};e._readData(t,a,l,s)},valueHelpFunSelect:function(e){var t=e.getSource().getBindingInfo("value").binding.sPath;if(t.indexOf("/Strat")!==-1){i.valueHelpFunMaintStrategy(e.getSource().getModel(this.oModelName).getData(),this)}else if(t.indexOf("/Wset")!==-1){i.valueHelpFunCycleSet(e.getSource().getModel(this.oModelName).getData(),this)}else if(t.indexOf("/Hunit")!==-1){i.valueHelpFunSchedulePeriod(e.getSource().getModel(this.oModelName).getData(),this)}else if(t.indexOf("/Fabkl")!==-1){i.valueHelpFunFactoryCalendar(e.getSource().getModel(this.oModelName).getData(),this)}else if(t.indexOf("/Mpcycleno")!==-1){i.valueHelpFunCounter("Mpcycleno",e,e.getSource().getModel(this.oModelName).getData(),this)}},onSchedulePeriodUnitChange:function(e){i.SchedulePeriodUnitChange(e,e.getSource().getModel(this.oModelName).getData(),this)},onMaintPlanCatChange:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();e.getSource().setValueState("None");a.Mptyp=e.getSource().getProperty("selectedKey");a.Txt=e.getSource().getSelectedItem().getText()},cycleIndicatorSelected:function(e){var t=this;var a=e.getSource().getModel(t.oModelName);var r=a.getData();var l=e.getSource().getProperty("selectedIndex");r.cycleIndSingle=false;r.cycleIndStrategy=false;r.cycleIndMultCntr=false;r.StratEnabled=false;r.MehrfachEnabled=false;r.WsetEnabled=false;switch(l){case 0:r.cycleType=0;r.cycleIndSingle=true;r.cycleIndStrategyEnabled=false;r.cycleIndMultCntrEnabled=false;r.Strat=" ";r.StratDesc=" ";r.StratLBL=false;r.StratVis=false;r.StratDescVis=false;r.Wset=" ";r.Ktext=" ";r.WsetLBL=false;r.WsetVis=false;r.KtextVis=false;r.Mehrfach=false;r.MehrfachLBL=false;r.MehrfachVis=false;r.ButtonNewCycleEnabled=true;if(r.ScheIndRbPerformance===true){r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false}break;case 1:r.cycleType=1;r.cycleIndStrategy=true;r.cycleIndSingleEnabled=false;r.cycleIndMultCntrEnabled=false;r.Strat=" ";r.StratDesc=" ";r.StratLBL=true;r.StratVis=true;r.StratDescVis=true;r.StratEnabled=true;r.Mehrfach=false;r.MehrfachLBL=false;r.MehrfachVis=false;r.Wset=" ";r.Ktext=" ";r.WsetLBL=false;r.WsetVis=false;r.KtextVis=false;r.ButtonNewCycleEnabled=false;break;case 2:r.cycleType=2;r.cycleIndMultCntr=true;r.cycleIndStrategyEnabled=false;r.cycleIndSingleEnabled=false;r.Strat=" ";r.StratDesc=" ";r.StratLBL=false;r.StratVis=false;r.StratDescVis=false;r.MehrfachLBL=true;r.MehrfachVis=true;r.MehrfachEnabled=true;r.Wset="";r.Ktext="";r.WsetLBL=true;r.WsetVis=true;r.WsetEnabled=true;r.KtextVis=true;r.ButtonNewCycleEnabled=true;r.cycleSetSeqColVis=true;break}if(r.menuAction==="copy"||r.menuAction==="change"){if(r.Mptyp===""||r.Mptyp===undefined||r.Mptyp===" "){r.MptypEnabled=true}else{r.MptypEnabled=false}if(r.cycleType===1&&(r.Strat===""||r.Strat===undefined||r.Strat===" ")){r.StratEnabled=true}else{r.StratEnabled=false}if(r.cycleType===2&&(r.Mehrfach===false||r.Mehrfach===""||r.Mehrfach===undefined||r.Mehrfach===" ")){r.MehrfachEnabled=true}else{r.MehrfachEnabled=false}if(r.cycleType===2&&(r.Wset===""||r.Wset===undefined||r.Wset===" ")){r.WsetEnabled=true}else{r.WsetEnabled=false}}this.backUpCycleType=r.cycleType;a.setData(r)},readScheduling:function(e,t){var a=this;var r="/MPSHDParamSet('"+t+"')";var l=a.getView().getModel();var s=function(t){e.Fabkl=t.Fabkl;e.FabklDesc=t.FabklDesc;e.Abrho=t.Abrho;var r=t.Termk;if(r==="1"){e.Stich=1;e.ScheIndRbTimeKeyDate=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}else if(r==="2"){e.Stich=2;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbPerformanceEnabled=false;e.ScheIndRbTimeFactCal=true;e.ScheIndRbTimeFactCalEnabled=true}else if(r==="3"){e.Stich=3;e.ScheIndRbTimeEnabled=false;e.ScheIndRbTimeKeyDateEnabled=false;e.ScheIndRbTimeFactCalEnabled=false;e.ScheIndRbPerformance=true;e.ScheIndRbPerformanceEnabled=true;a.stratUnit=t.Zeieh}else if(r===""){e.Stich=0;e.ScheIndRbTime=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}a.getView().getModel(a.oModelName).refresh()};var i=function(){};a._readData(r,l,s,i)},onMultiCounterSelect:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();if(a.Mehrfach){a.ScheIndText=false;a.ScheIndTitle=false;a.ScheIndLBL=false;a.ScheIndRbTimeVis=false;a.ScheIndRbTimeKeyDateVis=false;a.ScheIndRbTimeFactCalVis=false;a.ScheIndRbPerformanceVis=false;a.AbrhoLBL=false;a.AbrhoVis=false;a.HunitVis=false;a.FabklLBL=false;a.Fabkl="";a.FabklVis=false;a.FabklDesc="";a.FabklDescVis=false;a.ButtonNewCycleEnabled=true;a.CycleSetSeqVis=true;a.OPText=true;a.OPTitle=true;a.OPLBL=true;a.OROPVis=true;a.AndOPvis=true;a.OROP=true;a.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE")}else{a.ScheIndText=true;a.ScheIndTitle=true;a.ScheIndLBL=true;a.ScheIndRbTimeVis=true;a.ScheIndRbTimeKeyDateVis=true;a.ScheIndRbTimeFactCalVis=true;a.ScheIndRbPerformanceVis=true;a.AbrhoLBL=true;a.AbrhoVis=true;a.HunitVis=true;a.FabklLBL=true;a.Fabkl="";a.FabklVis=true;a.FabklDesc="";a.FabklDescVis=true;a.OPText=false;a.OPTitle=false;a.OPLBL=false;a.OROPVis=false;a.AndOPvis=false;a.OROP=false;a.CycleSetSeqVis=false}if(a.cycleIndMultCntr===true&&a.Mehrfach===true||a.cycleIndMultCntr===true&&a.Wset!==""){a.ButtonNewCycleEnabled=true;a.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE")}else{a.ButtonNewCycleEnabled=false;a.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_START_TXT")}this.backUpMehrfach=a.Mehrfach;t.getView().getModel(t.oModelName).refresh()},readCycleDetails:function(e){var t=this;if(e!==""){var a="/CyclesetSet('"+e+"')/CyclesetToMPCycle";var r=t.getView().getModel();var l=function(e){var a=t.getView().getModel(t.oModelName).getProperty("/cycleModel");a=[];for(var r=0;r<e.results.length;r++){a.push(e.results[r])}t.getView().getModel(t.oModelName).setProperty("/cycleModel",a)};var s=function(){};t._readData(a,r,l,s)}},cyclicChange:function(e){var t=e.getSource().getValue();if(t===""){e.getSource().setValue(1)}},schPeriodChange:function(e){var t=e.getSource().getValue();if(t===""){e.getSource().setValue("000")}},onStartChange:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();t.valid=r.isValidDate(a.Stadt);if(t.valid===false){a.StadtVS="Error";var l=t.getView().getModel("i18n").getProperty("DATE_ERROR");t.invokeMessage(l)}if(t.valid===true){a.StadtVS="None"}},indicatorSelected:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();var r=e.getSource().getProperty("selectedIndex");a.ScheIndRbTime=false;a.ScheIndRbTimeKeyDate=false;a.ScheIndRbTimeFactCal=false;a.ScheIndRbPerformance=false;if(r===0){a.Stich=0;a.ScheIndRbTime=true;a.FabklEnabled=false;a.Fabkl="";a.FabklDesc="";a.FabklLBLReq=false;a.SzaehLBL=false;a.SzaehVis=false;a.UnitcVis=false;a.StadtVis=true;a.StadtLBL=true;a.AbrhoLBL=true;a.AbrhoVis=true;a.HunitVis=true}if(r===1){a.Stich=1;a.ScheIndRbTimeKeyDate=true;a.FabklEnabled=true;a.FabklLBLReq=true;a.SzaehLBL=false;a.SzaehVis=false;a.UnitcVis=false;a.StadtVis=true;a.StadtLBL=true;a.AbrhoLBL=true;a.AbrhoVis=true;a.HunitVis=true}if(r===2){a.Stich=2;a.ScheIndRbTimeFactCal=true;a.FabklEnabled=true;a.FabklLBLreq=true;a.SzaehLBL=false;a.SzaehVis=false;a.UnitcVis=false;a.StadtVis=true;a.StadtLBL=true;a.AbrhoLBL=true;a.AbrhoVis=true;a.HunitVis=true}if(r===3&&a.cycleIndSingle===true){a.Stich=3;a.ScheIndRbPerformance=true;a.FabklEnabled=false;a.Fabkl="";a.FabklDesc="";a.FabklLBLReq=true;a.SzaehLBL=true;a.SzaehVis=true;a.UnitcVis=true;a.StadtVis=false;a.StadtLBL=false;a.AbrhoLBL=false;a.AbrhoVis=false;a.HunitVis=false}this.backUpStich=a.Stich;t.getView().getModel(t.oModelName).refresh()},readCounterData:function(e,t,a,r){var l=this;var s="/CounterDataSet('"+t+"')";var i=l.getView().getModel("valueHelp");var n=function(t){if(a==="counterUnit"){if(l.stratUnit===""||l.stratUnit===undefined){e.Unitc=t.Unitc}if(t.Unitc!==l.stratUnit){var s="Unit "+l.stratUnit+" and counter unit "+t.Unitc+" have different dimensions";if(r==="Point"){e.MpcyclenoVS="Error"}l.invokeMessage(s)}else{e.MpcyclenoVS="None"}l.counterUnit=t.Unitc}else if(a==="cycleUnit"){l.cycleUnit=t.Unitc;e.Unitc=t.Unitc}l.getView().getModel(l.oModelName).refresh();return t.Unitc};var o=function(){};l._readData(s,i,n,o)},readCycleCounterData:function(e,t){var a=this;var r="/CounterDataSet('"+t+"')";var l=a.getView().getModel("valueHelp");var s=function(t){var r=a.cycleCounterUnit;var l="Unit "+r+" and counter unit "+t.Unitc+" have different dimensions";var s=[];if(r==="D"||r==="DAY"||r==="WK"||r==="YR"||r==="MON"||r==="HR"){s=["D","H","YR","MIN","MIS","MON","MSE","NS","PDA","PS","S","HR","DAY","001","WK"];var i=s.includes(t.Unitc);if(i===true){e.Unitc=t.Unitc;e.MpcyclenoVS="None"}else{e.MpcyclenoVS="Error";a.invokeMessage(l)}}else{e.Unitc=t.Unitc;if(t.Unitc!==r){e.MpcyclenoVS="Error";a.invokeMessage(l)}else{e.MpcyclenoVS="None"}}a.getView().getModel(a.oModelName).refresh()};var i=function(){};a._readData(r,l,s,i)},addMaintCycleRow:function(e){var t=this;var a;var r=e.getSource().getModel(t.oModelName).getData();r.MptypEnabled=false;if(!r.cycleIndStrategy&&!r.cycleIndMultCntr&&!r.cycleIndSingle){a=t.getView().getModel("i18n").getProperty("")}if(r.cycleIndStrategy){r.StratEnabled=false;r.cycleIndStrategyEnabled=false;r.cycleIndMultCntrEnabled=false;r.cycleIndSingleEnabled=false}if(r.cycleIndMultCntr){if(r.Mehrfach){r.MehrfachEnabled=false}r.StratEnabled=false;r.WsetEnabled=false;r.cycleIndStrategyEnabled=false;r.cycleIndMultCntrEnabled=false;r.cycleIndSingleEnabled=false}var l=t.getView().getModel(t.oModelName).getProperty("/cycleModel");if(r.cycleIndSingle){if(l){if(l.length===0){r.ButtonNewCycleEnabled=true}else{r.ButtonNewCycleEnabled=false;t.getView().getModel(t.oModelName).refresh();return}}}var s;var i=[];if(l===null){s="1"}else{s=l.length+1;s=s.toString()}i={Mpcycleno:s,Zykl1:"",Zeieh:"",PakText:"",Offset:"",Ofsetunit:"",Point:"",Psort:"",Cycleseqi:"00",Zykl1VS:"None",ZeiehVS:"None",PointVS:"None"};if(r.menuAction==="create"){i.Zykl1Enabled=true;i.ZeiehEnabled=true;i.PakTextEnabled=true;i.OffsetEnabled=true;i.PointEnabled=true;i.CycleseqiEnabled=true}else{i.Zykl1Enabled=false;i.ZeiehEnabled=false;i.PakTextEnabled=false;i.OffsetEnabled=false;i.PointEnabled=false;i.CycleseqiEnabled=false}l.push(i);t.getView().getModel(t.oModelName).setProperty("/cycleModel",l);t.getView().getModel(t.oModelName).refresh()},handleCycleDelete:function(e){var t=this;var a,r,l,s;r=e.getSource();a=e.getParameter("listItem").getBindingContext(t.oModelName).sPath;a=a.substring(a.lastIndexOf("/")+1);s=parseInt(a.substr(-1),10);l=r.getModel(t.oModelName).getProperty("/cycleModel");l.splice(s,1);r.getModel(t.oModelName).setProperty("/cycleModel",l);r.getModel(t.oModelName).ButtonNewCycleEnabled=true},handleItemDelete:function(e){var t=this;var a,r,l,s,i;r=e.getSource();a=e.getParameter("listItem").getBindingContext(t.oModelName).sPath;a=a.substring(a.lastIndexOf("/")+1);s=parseInt(a.substr(-1),10);l=r.getModel(t.oModelName).getProperty("/itemModel");i=r.getModel(t.oModelName).getProperty("/ObjListItems");if(i){for(var n=i.length-1;n>=0;n--){if(i[n].Mitemnumb===l[s].Mitemnumb){i.splice(n,1)}}}l.splice(s,1);r.getModel(t.oModelName).setProperty("/itemModel",l);r.getModel(t.oModelName).setProperty("/ObjListItems",i)},onChangeCycle:function(e){var t=this;var a=e.getSource().getBindingInfo("value").binding.sPath;var r=e.getSource().getModel(t.oModelName).getData();var l=t.getView().getModel(t.oModelName).getProperty("/cycleModel");var s=e.getSource();var i=s.getParent().getParent();var n=e.getParameters().newValue;var o=e.getSource().getId();o=o.substr(o.lastIndexOf("-")+1);if(a.indexOf("Zeieh")!==-1){if(n!==""){l[o].ZeiehVS="None";t.cycleCounterUnit=n.toUpperCase();l[o].Zeieh=n.toUpperCase();l[o].Ofsetunit=n.toUpperCase();if(n.toUpperCase()==="D"||n.toUpperCase()==="DAY"||n.toUpperCase()==="WK"||n.toUpperCase()==="YR"||n.toUpperCase()==="H"||n.toUpperCase()==="MON"||n.toUpperCase()==="HR"||n.toUpperCase()==="MIN"){t.counter=false;if(l[o].Zeieh!==""&&l[o].Point!==""){t.readCounterReading(l[o].Point,l[o].Zeieh)}if(l[o].Point===""){if(r.ScheIndRbPerformance===true){r.Stich=0;r.ScheIndRbTime=true;r.ScheIndRbTimeEnabled=true;r.ScheIndRbTimeFactCalEnabled=true}r.ScheIndRbPerformanceEnabled=false;r.SzaehLBL=false;r.SzaehVis=false;r.UnitcVis=false;r.StadtLBL=true;r.StadtVis=true}else{r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false;r.Stich=3;r.ScheIndRbPerformance=true;r.ScheIndRbPerformanceEnabled=true;r.ScheIndRbTimeEnabled=false;r.ScheIndRbTimeKeyDateEnabled=false;r.ScheIndRbTimeFactCalEnabled=false;r.Fabkl="";r.FabklDesc="";r.FabklEnabled=false;r.FabklDescLBLReq=false}l[o].PointVS="None";t.ValidateTimeKey(l,o,r)}else{r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false;r.Stich=3;r.ScheIndRbPerformanceEnabled=true;r.ScheIndRbTimeEnabled=false;r.ScheIndRbTimeKeyDateEnabled=false;r.ScheIndRbTimeFactCalEnabled=false;r.Fabkl="";r.FabklDesc="";r.FabklEnabled=false;r.FabklDescLBLReq=false;if(l[o].Point===""){t.counter=true;l[o].PointVS="Error";t.invokeMessage(t.getView().getModel("i18n").getProperty("COUNTER_MANDMSG"))}else{t.counter=false;l[o].PointVS="None"}}}else{l[o].ZeiehVS="Error"}t.getView().getModel(t.oModelName).setProperty("/cycleModel",l);t.getView().getModel(t.oModelName).refresh()}if(a.indexOf("Zykl1")!==-1){if(n!==""){l[o].Zykl1VS="None";l[o].Zykl1=n;t.ValidateTimeKey(l,o,r)}else{l[o].Zykl1VS="Error"}t.getView().getModel(t.oModelName).setProperty("/cycleModel",l)}if(a.indexOf("Point")!==-1){if(n!==""){l[o].Point=n.toUpperCase();var d=n.toUpperCase();var c=d.replace(/^[ ]+|[ ]+$/g,"");if(c!==""){var u="/MSCounterSet";var g=[new sap.ui.model.Filter("Point","EQ",d)];var f=t.getView().getModel("valueHelp");var M=function(e){if(e.results.length>0){l[o].PointVS="None";l[o].Point=n.toUpperCase();l[o].Psort=e.results[0].Psort;t.counter=false;r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false;r.Stich=3;r.ScheIndRbPerformance=true;r.ScheIndRbPerformanceEnabled=true;r.ScheIndRbTimeEnabled=false;r.ScheIndRbTimeKeyDateEnabled=false;r.ScheIndRbTimeFactCalEnabled=false;r.Fabkl="";r.FabklDesc="";r.FabklEnabled=false;r.FabklDescLBLReq=false;t.getView().getModel(t.oModelName).refresh();t.readCycleCounterData(r,d);if(l[o].Zeieh!==""&&l[o].Point!==""){t.readCounterReading(l[o].Point,l[o].Zeieh)}}else{l[o].PointVS="Error"}t.getView().getModel(t.oModelName).setProperty("/cycleModel",l);t.getView().getModel(t.oModelName).refresh()};var p=function(){l[o].PointVS="Error";t.getView().getModel(t.oModelName).setProperty("/cycleModel",l)};t._readData(u,f,M,p,g)}else{t.index=i._oItemNavigation.iFocusedIndex;var h=l[o].Zeieh;if(h==="D"||h==="DAY"||h==="WK"||h==="YR"||h==="MON"||h==="HR"){r.Stich=0;r.ScheIndRbPerformanceEnabled=false;r.ScheIndRbTimeEnabled=true;r.ScheIndRbTimeKeyDateEnabled=true;r.ScheIndRbTimeFactCalEnabled=true;r.ScheIndRbTime=true;r.Fabkl="";r.FabklDesc="";r.FabklEnabled=false;r.FabklDescLBLReq=false;t.counter=false;l[o].PointVS="None"}else{t.counter=true;l[o].PointVS="Error"}t.getView().getModel(t.oModelName).setProperty("/cycleModel",l)}}else{r.Unitc="";if(t.backUpCycleType>=0){r.Strat=" ";r.StratDesc=" ";r.Wset=" ";r.Ktext=" ";r.ButtonNewCycleEnabled=true;r.cycleIndStrategyEnabled=false;r.StratLBL=false;r.StratVis=false;r.StratDescVis=false;switch(t.backUpCycleType){case 0:r.cycleType=0;r.cycleIndSingle=true;r.cycleIndMultCntrEnabled=false;r.WsetLBL=false;r.WsetVis=false;r.KtextVis=false;r.Mehrfach=false;r.MehrfachLBL=false;r.MehrfachVis=false;if(r.ScheIndRbPerformance===true){r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false}break;case 2:r.cycleType=2;r.cycleIndMultCntr=true;r.cycleIndSingleEnabled=false;r.MehrfachLBL=true;r.MehrfachVis=true;r.MehrfachEnabled=true;r.WsetLBL=true;r.WsetVis=true;r.WsetEnabled=true;r.KtextVis=true;r.cycleSetSeqColVis=true;break}}if(t.backUpMehrfach){if(r.Mehrfach){r.ScheIndText=false;r.ScheIndTitle=false;r.ScheIndLBL=false;r.ScheIndRbTimeVis=false;r.ScheIndRbTimeKeyDateVis=false;r.ScheIndRbTimeFactCalVis=false;r.ScheIndRbPerformanceVis=false;r.AbrhoLBL=false;r.AbrhoVis=false;r.HunitVis=false;r.FabklLBL=false;r.Fabkl="";r.FabklVis=false;r.FabklDesc="";r.FabklDescVis=false;r.ButtonNewCycleEnabled=true;r.CycleSetSeqVis=true;r.OPText=true;r.OPTitle=true;r.OPLBL=true;r.OROPVis=true;r.AndOPvis=true;r.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE")}else{r.ScheIndText=true;r.ScheIndTitle=true;r.ScheIndLBL=true;r.ScheIndRbTimeVis=true;r.ScheIndRbTimeKeyDateVis=true;r.ScheIndRbTimeFactCalVis=true;r.ScheIndRbPerformanceVis=true;r.AbrhoLBL=true;r.AbrhoVis=true;r.HunitVis=true;r.FabklLBL=true;r.Fabkl="";r.FabklVis=true;r.FabklDesc="";r.FabklDescVis=true;r.OPText=false;r.OPTitle=false;r.OPLBL=false;r.OROPVis=false;r.AndOPvis=false;r.CycleSetSeqVis=false}}if(t.backUpStich>=0){r.ScheIndRbTime=false;r.ScheIndRbTimeKeyDate=false;r.ScheIndRbTimeFactCal=false;r.ScheIndRbPerformance=false;r.ScheIndRbTimeEnabled=true;r.ScheIndRbTimeKeyDateEnabled=true;r.ScheIndRbTimeFactCalEnabled=true;r.ScheIndRbPerformanceEnabled=true;r.AbrhoLBL=true;r.AbrhoVis=true;r.HunitVis=true;r.FabklEnabled=true;r.FabklLBLReq=true;r.SzaehLBL=false;r.SzaehVis=false;r.StadtVis=true;r.StadtLBL=true;r.UnitcVis=false;if(t.backUpStich===0){r.Stich=0;r.ScheIndRbTime=true;r.FabklEnabled=false;r.Fabkl="";r.FabklDesc="";r.FabklLBLReq=false}if(t.backUpStich===1){r.Stich=1;r.ScheIndRbTimeKeyDate=true}if(t.backUpStich===2){r.Stich=2;r.ScheIndRbTimeFactCal=true}if(t.backUpStich===3&&r.cycleIndSingle===true){r.Stich=3;r.ScheIndRbPerformance=true;r.FabklEnabled=false;r.Fabkl="";r.FabklDesc="";r.FabklLBLReq=true;r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtVis=false;r.StadtLBL=false;r.AbrhoLBL=false;r.AbrhoVis=false;r.HunitVis=false}}l[o].Psort="";t.getView().getModel(t.oModelName).refresh();t.getView().getModel(t.oModelName).setProperty("/cycleModel",l)}}if(a.indexOf("Cycleseqi")!==-1){if(n!==""){l[t.index-1].CycleseqiVS="None";t.getView().getModel(t.oModelName).setProperty("/cycleModel",l)}}},cycleChange:function(e){var t=this;var a=t.getView().getModel(t.oModelName).getProperty("/cycleModel");var r=e.getSource();var l=r.getParent().getParent();var s=e.getParameters().newValue;t.index=l._oItemNavigation.iFocusedIndex;if(s===""){a[t.index-1].Zeieh="";a[t.index-1].Ofsetunit=""}a[t.index-1].ZeiehVS="None";t.getView().getModel(t.oModelName).setProperty("/cycleModel",a)},valueItemHelpSelect:function(e){var t=e.getSource().getBindingInfo("value").binding.sPath;if(t.indexOf("Point")!==-1){i.valueHelpFunCycleCounter(e,e.getSource().getModel(this.oModelName).getData(),this)}else if(t.indexOf("Zeieh")!==-1){i.valueHelpFunUnit(e,e.getSource().getModel(this.oModelName).getData(),this)}},addItemRow:function(e){var t=this;var a="/TempKeySet";var r=[new l("CRType","EQ","MPITEM"),new l("ObjNo","EQ",1)];var s=t.getView().getModel("valueHelp");var i=t.getView().getModel("mainView");var n=i.getData();var o=e.getSource().getModel(t.oModelName).getData();n.viewBusy=true;i.setData(n);var d=function(e){if(o.Mptyp){o.MptypEnabled=false}if(o.cycleIndStrategy){o.StratEnabled=false;o.cycleIndStrategyEnabled=false;o.cycleIndSingleEnabled=false;o.cycleIndMultCntr=false}if(o.cycleIndMultCntr){o.WsetEnabled=false;o.MehrfachEnabled=false;o.StratEnabled=false;o.cycleIndStrategyEnabled=false;o.cycleIndSingleEnabled=false;o.cycleIndMultCntr=false;if(o.Mehrfach===false&&o.Wset===""&&o.Strat===""){o.cycleIndSingle=true}}var a=t.getView().getModel(t.oModelName).getProperty("/itemModel");var r={Mitemnumb:e.results[0].Key,Pstxt:o.Wptxt,Cycleseq:"",Tplnr:"",Pltxt:"",Equnr:"",Eqktx:"",AsmblyOb:"",Assemblydesc:"",Werks:"",Planningplantdes:"",Auart:"",oTypeTxt:"",Qmart:"",nTypeTxt:"",ArbpMi:"",WergwMi:"",Ingrp:"",Innam:"",Zeieh:"",Priok:"",ItmPriotxt:"",GsberMi:"",Gtext:"",TaskDet:false,Ilart:"",Ilatx:"",PlntyMi:"",ApfktMi:"",PlnnrMi:"",PlnalMi:"",Gpcounterdesc:"",AnlzuMi:"",Anlzux:"",SwerkMil:"",SwerkMilVS:"None",Name1:"",StortMil:"",Locationdesc:"",MsgrpIl:"",BeberMil:"",Fing:"",Tele:"",ArbplIl:"",Workcenterdesc:"",AbckzIl:"",Abctx:"",EqfnrIl:"",enableLoc:true,BukrsMil:"",Butxt:"",City:"",Anln1Mil:"",Anln2Mil:"",Txt50:"",GsberIl:"",KostlMil:"",Contareaname:"",KokrsMil:"",Posid:"",Post1:"",AufnrIl:"",SettleOrdDesc:"",QmartLBL:true,QmartVis:true,nTypetxtVis:true,AuartLBL:true,AuartVis:true,oTypeTxtVis:true,CycleseqLBL:false,CycleseqVis:false,AsmblyObMaxLength:40,maintItemE:false,cycleSetE:false,TplnrEnabled:false,equiE:false,assemblyE:false,CycleseqVS:"None",CycleseqVST:"",TplnrVS:"None",TplnrVST:"",EqunrVS:"None",EqunrVST:"",AsmblyObVS:"None",AsmblyObVST:"",WerksVS:"None",WerksVST:"",AuartVS:"None",AuartVST:"",QmartVS:"None",QmartVST:"",ArbpMiVS:"None",ArbpMiVST:"",WergwMiVS:"None",WergwMiVST:"",IngrpVS:"None",IngrpVST:"",LDVisible:false,lam:{Mitemnumb:e.results[0].Key,Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}};a.push(r);t.getView().getModel(t.oModelName).setProperty("/itemModel",a);t.getView().getModel(t.oModelName).refresh();n.viewBusy=false;i.setData(n)};var c=function(){n.viewBusy=false;i.setData(n)};t._readData(a,s,d,c,r)},onAssignItemPress:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();var r;if(a.Mptyp===null){r=""}else{r=a.Mptyp}var l={title:t.getView().getModel("i18n").getProperty("ASSIGN_ITEM"),noDataText:t.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>MAINT_ITEM_TXT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>MAINT_CAT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>EQUI}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>LOC_ACC}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>ASSEMBLY}"})]})],items:{path:"/OpenMISet?$filter=Mityp eq '"+r+"'",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Wapos}"}),new sap.m.Text({text:"{Mityp}"}),new sap.m.Text({text:"{Equnr}"}),new sap.m.Text({text:"{Iloan}"}),new sap.m.Text({text:"{Bautl}"})]})},confirm:function(e){var a=e.getParameter("selectedItem").getCells()[0].getText();t.readMplanItem(t,a)}};var s="/OpenMISet";var i=[new sap.ui.model.Filter("Mityp","EQ",r)];var o=t.getView().getModel("valueHelp2");var d=[new sap.m.Text({text:"{Wapos}"}),new sap.m.Text({text:"{Mityp}"}),new sap.m.Text({text:"{Equnr}"}),new sap.m.Text({text:"{Iloan}"}),new sap.m.Text({text:"{Bautl}"})];var c=n.getValueHelp(o,s,d,i,l,"Wapos","Mityp");c.open();c.setModel(this.getView().getModel("i18n"),"i18n");t.getView().getModel(t.oModelName).refresh()},readMplanItem:function(e,t){var a="/MPItemSet";var r=e.getView().getModel();var l=[new sap.ui.model.Filter("Mitemnumb","EQ",t)];var s=function(a){if(a.results.length>0){var r=e.getView().getModel(e.oModelName).getProperty("/itemModel");if(r!==null&&r.length>0){var l={Mitemnumb:t,Pstxt:a.results[0].Pstxt,Cycleseq:a.results[0].Cycleseq,Tplnr:a.results[0].TplnrMi,Pltxt:a.results[0].Flocdesc,Equnr:a.results[0].Equnr,Eqktx:a.results[0].Equipdesc,AsmblyOb:a.results[0].Bautl,Werks:a.results[0].PlntMi,Planningplantdes:a.results[0].Planningplantdes,Auart:a.results[0].Auart,oTypeTxt:a.results[0].Ordertypedesc,Qmart:a.results[0].Qmart,nTypeTxt:a.results[0].Qmartx,ArbpMi:a.results[0].ArbplMi,WergwMi:a.results[0].MainWcPlant,Ingrp:a.results[0].IngrpMi,Innam:a.results[0].Plannergrpdesc,Zeieh:a.results[0].Zeieh,Priok:a.results[0].Priok,ItmPriotxt:a.results[0].ItmPriotxt,GsberMi:a.results[0].GsberMi,Gtext:a.results[0].Gtext,TaskDet:a.results[0].TaskDet,Ilart:a.results[0].Ilart,Ilatx:a.results[0].Ilatx,PlntyMi:a.results[0].PlntyMi,ApfktMi:a.results[0].ApfktMi,PlnnrMi:a.results[0].PlnnrMi,PlnalMi:a.results[0].PlnalMi,Gpcounterdesc:a.results[0].Gpcounterdesc,AnlzuMi:a.results[0].AnlzuMi,Anlzux:a.results[0].Anlzux,SwerkMil:a.results[0].SwerkMil,Name1:a.results[0].Name1,StortMil:a.results[0].StortMil,Locationdesc:a.results[0].Locationdesc,MsgrpIl:a.results[0].MsgrpIl,BeberMil:a.results[0].BeberMil,Fing:a.results[0].Fing,Tele:a.results[0].Tele,ArbplIl:a.results[0].ArbplIl,Workcenterdesc:a.results[0].Workcenterdesc,AbckzIl:a.results[0].AbckzIl,Abctx:a.results[0].Abctx,EqfnrIl:a.results[0].EqfnrIl,BukrsMil:a.results[0].BukrsMil,Butxt:a.results[0].Butxt,City:a.results[0].City,Anln1Mil:a.results[0].Anln1Mil,Anln2Mil:a.results[0].Anln2Mil,Txt50:a.results[0].Txt50,GsberIl:a.results[0].GsberIl,KostlMil:a.results[0].KostlMil,Contareaname:a.results[0].Contareaname,KokrsMil:a.results[0].KokrsMil,Posid:a.results[0].Posid,Post1:a.results[0].Post1,AufnrIl:a.results[0].AufnrIl,SettleOrdDesc:a.results[0].SettleOrdDesc,QmartLBL:true,QmartVis:true,nTypetxtVis:true,AuartLBL:true,AuartVis:true,oTypeTxtVis:true,CycleseqLBL:false,CycleseqVis:false,AsmblyObMaxLength:0,maintItemE:false,cycleSetE:false,TplnrEnabled:false,equiE:false,assemblyE:false,CycleseqVS:"None",CycleseqVST:"",TplnrVS:"None",TplnrVST:"",EqunrVS:"None",EqunrVST:"",AsmblyObVS:"None",AsmblyObVST:"",WerksVS:"None",WerksVST:"",AuartVS:"None",AuartVST:"",QmartVS:"None",QmartVST:"",ArbpMiVS:"None",ArbpMiVST:"",WergwMiVS:"None",WergwMiVST:"",IngrpVS:"None",IngrpVST:""};r.push(l);e.getView().getModel(e.oModelName).setProperty("/itemModel",r)}else{e.getView().getModel(e.oModelName).setProperty("/itemModel",a.results)}}};var i=function(){};e._readData(a,r,s,i,l)},onObjectChange:function(e){var t=this;var a=e.getSource().getBindingInfo("value").binding.sPath;var r=e.getParameters().newValue;var l=parseInt(a.substr(-1));var s=t.getView().getModel(t.oModelName).getProperty("/itemModel");var i,n,o,d,c,u,g;if(a.indexOf("/Equnr")>0){if(r!==""){c=r.toUpperCase();i=c.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){o="/EquiAssestVHSet";n=new sap.ui.model.Filter("Equnr","EQ",c);d=t.getView().getModel("valueHelp");u=function(e){if(e.results.length>0){s[l].equiState="None";s[l].Equnr=c;s[l].Eqktx=e.results[0].Eqktu}else{s[l].equiState="Error"}t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};g=function(){s[l].equiState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};t._readData(o,d,u,g,n)}}else{s[l].equiState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)}}if(a.indexOf("/Tplnr")>0){if(r!==""){c=r.toUpperCase();i=c.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){o="/FlocAssestVHSet";n=new sap.ui.model.Filter("Tplnr","EQ",c);d=t.getView().getModel("valueHelp");u=function(e){if(e.results.length>0){s[l].flocState="None";s[l].Tplnr=r.toUpperCase();s[l].Pltxt=e.results[0].Pltxt}else{s[l].flocState="Error"}t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};g=function(){s[l].flocState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};t._readData(o,d,u,g,n)}}else{s[l].flocState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)}}if(a.indexOf("/AsmblyOb")>0){if(r!==""){c=r.toUpperCase();i=c.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){o="/AssemblyBOMSet";n=new sap.ui.model.Filter("MatnrAsmblyOb","EQ",c);d=t.getView().getModel("valueHelp");u=function(e){if(e.results.length>0){s[l].aState="None";s[l].AsmblyOb=r.toUpperCase()}else{s[l].aState="Error"}t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};g=function(){s[l].aState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)};t._readData(o,d,u,g,n)}}else{s[l].aState="Error";t.getView().getModel(t.oModelName).setProperty("/itemModel",s)}}},onItemPress:function(e){var t=this;var a=e.getSource().getModel(t.oModelName).getData();a.MptypEnabled=false;a.StratEnabled=false;if(a.cycleIndMultCntr){a.MehrfachEnabled=false;a.WsetEnabled=false}t._showObject(e.getSource())},_showObject:function(e){var a=this;var r=e.getModel(a.oModelName).getData();var l=e.oBindingContexts.AIWMPMI.sPath;var s=a.getView().getModel(a.oModelName).getProperty("/cycleModel");var i=" ";var n=false;var o=[];var d=r.Unitc;var c=r.Strat;if(r.Unitc===""||r.Unitc===undefined){d="Blank"}if(r.Strat===""||r.Strat===undefined){c="Blank"}if(r.cycleIndSingle){if(r.ScheIndRbPerformance){var u=s[0].Zeieh;if(u!==""&&u!==undefined){d=u;c="singlePerf"}}}if((r.Mehrfach===true||r.Wset!=="")&&r.cycleIndMultCntr===true){n=true;for(var g=0;g<s.length;g++){o.push(s[g].Cycleseqi)}}a.getView().getModel(a.oModelName).setProperty("/cycleModel",s);if(r.Mptyp){i=r.Mptyp}a.getView().getModel(a.oModelName).refresh();if(a.viewName!=="ChangeMpmi"){var f={itemStatus:true,oModelUpdateFlag:false};sap.ui.getCore().setModel(new t(f),"AIWMPMIStatus")}sap.ui.getCore().setModel(a.getView().getModel(a.oModelName),"AIWMPMIDetail");a.itemDetailNavFlag=true;l=l.substring(l.lastIndexOf("/")+1);var M=a.rowIndex.substring(a.rowIndex.lastIndexOf("/")+1);a.getRouter().navTo("itemMpmi",{itemPath:encodeURIComponent(l),CrStatus:a.CrStatus,maintCat:i,multiCycle:n,sys:a.system,strategy:c,cUnit:d,mainRowIndex:encodeURIComponent(M),viewName:a.viewName})},onDonePress:function(e){var t=this;t.doneFlag=true;var r=e.getSource().getId();var l=e.getSource().getModel(t.oModelName).getData();var s=t.getView().getModel("i18n").getResourceBundle();var i=t.getView().getModel(t.oModelName).getData();var n=t.getView().getModel(t.oModelName).getProperty("/cycleModel");var o=i.cycleIndSingle;var d=i.cycleIndMultCntr;var c=i.ScheIndRbTimeKeyDate;var u=this.getView().getModel("i18n");if((o||d)&&c){for(var g=0;g<n.length;g++){if(n[g].Zykl1VS==="Error"){this.invokeMessage(u.getProperty("KEY_SCH_NOT_POSSIBLE")+n[g].Zykl1);return}}}if(t.viewName==="CreateMpmi"||t.oModelUpdateFlag===true){t.handleValueState("Wptxt","WptxtVS",e);t.handleValueState("Mptyp","MptypVS",e);var f=l.Warpl;var M=l.cycleType;if(M===""||M===undefined){t.doneFlag=false;t.invokeMessage(s.getText("mpmiCycleType",[f]));return}var p=l.ButtonNewCycleEnabled;if(p&&M===0){var h=t.getView().getModel(t.oModelName).getProperty("/cycleModel");if(h.length<=0){t.doneFlag=false;t.invokeMessage(s.getText("mpmiCycleMand",[f]));return}}var m=t.getView().getModel(t.oModelName).getProperty("/itemModel");if(m.length<=0){t.doneFlag=false;t.invokeMessage(s.getText("mpmiItemMand",[f]));return}}if(t.doneFlag===false){var S=t.getView().getModel("i18n").getProperty("MANDMSG");t.invokeMessage(S);return}else{var b=t.getView().getModel(t.oModelName);var y=b.getData();if(t.class.getModel()){var V=t.class.getModel().getData();if(V){y.classItems=[];for(var v=0;v<V.length;v++){y.classItems.push(V[v])}b.setData(y)}}if(this.chData){var E=this.chData;if(E!==null&&E!==undefined){y.characteristics=[];for(var I=0;I<E.length;I++){y.characteristics.push(E[I])}}b.setData(y)}if(r.indexOf("idBtnCheck")>-1){this.validateCheck();return}if(t.oModelUpdateFlag&&!t.sExistFlag){var P=sap.ui.getCore().getModel(t.oModelName).getData();t.getView().getModel(t.oModelName).getData().viewParameter="change";if(t.itemDetailNavFlag){t.itemDetailNavFlag=false;P.push(sap.ui.getCore().getModel("AIWMPMIDetail").getData())}else{P.push(t.getView().getModel(t.oModelName).getData())}}sap.ui.getCore().getModel(t.oModelName).refresh();t.currentFragment=undefined;t.rowIndex=undefined;var C=a.getInstance().getPreviousHash();if(C!==undefined){history.go(-1)}else{t.getRouter().navTo("main",{},true)}}},validateCheck:function(){var e=this;var t=e.getView().getModel(e.oModelName).getData();var a=sap.ui.getCore().getModel("AIWFLOC").getData();var l=sap.ui.getCore().getModel("AIWEQUI").getData();var s=sap.ui.getCore().getModel("AIWListWCModel").getData();var i=sap.ui.getCore().getModel("tempCrTypeModel").getData();var n={ChangeRequestType:i.crtype,CrDescription:i.desc,IsDraft:"C",Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[]};if(a.length>0){for(var o=0;o<a.length;o++){var d={Tplnr:a[o].Functionallocation,Txtmi:a[o].Flocdescription,TplkzFlc:a[o].Strucindicator,Tplxt:a[o].StrucIndicatorDesc,EditMask:a[o].EditMask,Hierarchy:a[o].Hierarchy,Fltyp:a[o].Floccategory,Flttx:a[o].FlocCategoryDesc,Swerk:a[o].Maintplant,Plantname:a[o].MaintplantDesc,StorFloc:a[o].Location,Locationdesc:a[o].Locationdesc,Abckzfloc:a[o].Abckz,Abctx:a[o].Abctx,Bukrsfloc:a[o].Bukrs,Butxt:a[o].Butxt,City:a[o].City,KostFloc:a[o].Kostl,KokrFloc:a[o].Kokrs,Contareaname:a[o].Mctxt,PlntFloc:a[o].Werks,Planningplantdes:a[o].Planningplantdes,Ingrp:a[o].Ingrp,Plannergrpdesc:a[o].Innam,Arbplfloc:a[o].Arbpl,Wergwfloc:a[o].WcWerks,Gewrkfloc:a[o].MainArbpl,MainWcPlant:a[o].MainWerks,Tplma:a[o].SupFunctionallocation,Supflocdesc:a[o].SupFlocdescription,BeberFl:a[o].BeberFl,Fing:a[o].Fing,Tele:a[o].Tele,Submtiflo:a[o].ConstrType,Constdesc:a[o].ConstructionDesc,Eqart:a[o].TechnicalObjectTyp,Eartx:a[o].Description,Stattext:a[o].Stattext,StsmFloc:a[o].StsmEqui,Statproftxt:a[o].StsmEquiDesc,UstwFloc:a[o].UstwEqui,UswoFloc:a[o].UswoEqui,UstaFloc:a[o].UstaEqui,Adrnri:a[o].Adrnri,Deact:a[o].Deact};n.FuncLoc.push(d);var c={Funcloc:a[o].Functionallocation,Title:a[o].TitleCode,Name1:a[o].Name1,Name2:a[o].Name2,Name3:a[o].Name3,Name4:a[o].Name4,Sort1:a[o].Sort1,Sort2:a[o].Sort2,NameCo:a[o].NameCo,PostCod1:a[o].PostCod1,City1:a[o].City1,Building:a[o].Building,Floor:a[o].Floor,Roomnum:a[o].Roomnum,Strsuppl1:a[o].Strsuppl1,Strsuppl2:a[o].Strsuppl2,Strsuppl3:a[o].Strsuppl3,Location:a[o].AddrLocation,RPostafl:a[o].RefPosta,Landx:a[o].Landx,TimeZone:a[o].TimeZone,RPostFl:a[o].Region,Regiotxt:a[o].RegionDesc};n.FLAddr.push(c);var u=a[o].intlAddr;if(u){for(var g=0;g<u.length;g++){n.FLAddrI.push(u[g])}}if(e.AltLblDerv==="2"&&a[o].altlbl){for(var f=0;f<a[o].altlbl.length;f++){var M={Funcloc:a[o].Functionallocation,AltAlkey:a[o].altlbl[f].AltAlkey,AltStrno:a[o].altlbl[f].AltStrno,AltTplkz:a[o].altlbl[f].AltTplkz};n.FLALTLBEL.push(M)}}if(a[o].Floccategory==="L"&&a[o].lam){var p={Funcloc:a[o].Functionallocation,Lrpid:a[o].lam.Lrpid,Strtptatr:a[o].lam.Strtptatr,Endptatr:a[o].lam.Endptatr,Length:a[o].lam.Length,LinUnit:a[o].lam.LinUnit,Startmrkr:a[o].lam.Startmrkr,Endmrkr:a[o].lam.Endmrkr,Mrkdisst:a[o].lam.Mrkdisst,Mrkdisend:a[o].lam.Mrkdisend,MrkrUnit:a[o].lam.MrkrUnit};n.FLLAM.push(p)}var h=a[o].classItems;if(h){if(h.length>0){for(var m=0;m<h.length;m++){var S={Funcloc:a[o].Functionallocation,Classtype:h[m].Classtype,Class:h[m].Class,Clstatus1:h[m].Clstatus1};n.FLClass.push(S)}}}var b=a[o].characteristics;if(b){if(b.length>0){for(var y=0;y<b.length;y++){var V={Funcloc:a[o].Functionallocation,Atnam:b[y].Atnam,Textbez:b[y].Textbez,Atwrt:b[y].Atwrt,Class:b[y].Class};n.FLVal.push(V)}}}}}if(l.length>0){for(var v=0;v<l.length;v++){var E={Herst:l[v].Herst,Equnr:l[v].Equnr,Txtmi:l[v].Eqktx,Swerk:l[v].Maintplant,Name1:l[v].MaintplantDesc,TplnEilo:l[v].Tplnr,Flocdescription:l[v].Pltxt,Eqtyp:l[v].EquipmentCatogory,Etytx:l[v].EquipCatgDescription,Eqart:l[v].TechnicalObjectTyp,Eartx:l[v].Description,Typbz:l[v].Typbz,SubmEeqz:l[v].ConstrType,Constdesc:l[v].ConstructionDesc,BukrEilo:l[v].Bukrs,Butxt:l[v].Butxt,HequEeqz:l[v].SuperordinateEquip,SuperordEqDes:l[v].SuperordinateEquipDesc,TidnEeqz:l[v].TechIdNum,KostEilo:l[v].Kostl,KokrEilo:l[v].Kokrs,Contareaname:l[v].Mctxt,StorEilo:l[v].Location,Locationdesc:l[v].Locationdesc,AbckEilo:l[v].Abckz,Abctx:l[v].Abctx,PplaEeqz:l[v].Werks,Planningplantdes:l[v].Planningplantdes,IngrEeqz:l[v].Ingrp,Plannergrpdesc:l[v].Innam,Serge:l[v].Serge,MapaEeqz:l[v].MapaEeqz,Stattext:l[v].Stattext,StsmEqui:l[v].StsmEqui,Statproftxt:l[v].StsmEquiDesc,UstwEqui:l[v].UstwEqui,UswoEqui:l[v].UswoEqui,UstaEqui:l[v].UstaEqui,Deact:l[v].Deact,Answt:l[v].Answt,Ansdt:e._formatDate(l[v].Ansdt),Waers:l[v].Waers,ArbpEilo:l[v].Arbpl,WorkCenterPlant:l[v].WcWerks,ArbpEeqz:l[v].MainArbpl,MainWcPlant:l[v].MainWerks,BebeEilo:l[v].BeberFl,Fing:l[v].Fing,Tele:l[v].Tele,HeqnEeqz:l[v].EquipPosition,Adrnri:l[v].Adrnri,Funcid:l[v].Funcid,Frcfit:l[v].Frcfit,Frcrmv:l[v].Frcrmv};n.Equipment.push(E);var I={Equi:l[v].Equnr,PlanvPrt:l[v].PlanvPrt,SteufPrt:l[v].SteufPrt,KtschPrt:l[v].KtschPrt,Ewformprt:l[v].Ewformprt,SteufRef:l[v].SteufRef,KtschRef:l[v].KtschRef,EwformRef:l[v].EwformRef};n.EqPRT.push(I);if(l[v].EquipmentCatogory==="L"&&l[v].lam){var P={Equi:l[v].Equnr,Lrpid:l[v].lam.Lrpid,Strtptatr:l[v].lam.Strtptatr,Endptatr:l[v].lam.Endptatr,Length:l[v].lam.Length,LinUnit:l[v].lam.LinUnit,Startmrkr:l[v].lam.Startmrkr,Endmrkr:l[v].lam.Endmrkr,Mrkdisst:l[v].lam.Mrkdisst,Mrkdisend:l[v].lam.Mrkdisend,MrkrUnit:l[v].lam.MrkrUnit};n.EqLAM.push(P)}var C={Equi:l[v].Equnr,Title:l[v].TitleCode,Name1:l[v].Name1,Name2:l[v].Name2,Name3:l[v].Name3,Name4:l[v].Name4,Sort1:l[v].Sort1,Sort2:l[v].Sort2,NameCo:l[v].NameCo,PostCod1:l[v].PostCod1,City1:l[v].City1,Building:l[v].Building,Floor:l[v].Floor,Roomnum:l[v].Roomnum,Strsuppl1:l[v].Strsuppl1,Strsuppl2:l[v].Strsuppl2,Strsuppl3:l[v].Strsuppl3,Location:l[v].AddrLocation,RefPosta:l[v].RefPosta,Landx:l[v].Landx,TimeZone:l[v].TimeZone,RfePost:l[v].Region,Regiotxt:l[v].RegionDesc};n.EqAddr.push(C);var T=l[v].intlAddr;if(T){for(var g=0;g<T.length;g++){n.EqAddrI.push(T[g])}}var w=l[v].classItems;if(w){if(w.length>0){for(var L=0;L<w.length;L++){var k={Equi:l[v].Equnr,Classtype:w[L].Classtype,Class:w[L].Class,Clstatus1:w[L].Clstatus1};n.EqClass.push(k)}}}var A=l[v].characteristics;if(A){if(A.length>0){for(var D=0;D<A.length;D++){var N={Equi:l[v].Equnr,Atnam:A[D].Atnam,Textbez:A[D].Textbez,Atwrt:A[D].Atwrt,Class:A[D].Class};n.EqVal.push(N)}}}}}if(s.length>0){for(var x=0;x<s.length;x++){var F={Werks:s[x].plant,Arbpl:s[x].wc,Txtmi:s[x].wcDesc,Verwe:s[x].wcCat,Crveran:s[x].person,Planv:s[x].usg,Vgwts:s[x].stdVal,Crsteus:s[x].ctrlKey};if(s[x].hasOwnProperty("Type")){if(s[x].Type==="X"){F.Type="X"}}n.Workcenter.push(F);if(s[x].cost){for(var B=0;B<s[x].cost.length;B++){var R={Werks:s[x].cost[B].CrKokrs,Arbpl:s[x].wc,CrKostl:s[x].cost[B].CrKostl,Costcentxt:s[x].cost[B].Costcentxt,CrLstar:s[x].cost[B].CrLstar,Forn1:s[x].cost[B].Forn1,ActvttypeTxt:s[x].cost[B].ActvttypeTxt,Frmltxt:s[x].cost[B].Frmltxt};n.WCCost.push(R)}}}}var q={Warpl:t.Warpl,Abrho:t.Abrho,Hunit:t.Hunit,Mptyp:t.Mptyp,Wptxt:t.Wptxt,Stich:t.Stich.toString(),Fabkl:t.Fabkl,FabklDesc:t.FabklDesc,Sfakt:t.Sfakt,Andor:e.parseValue(t.Andor),Mehrfach:e.parseValue(t.Mehrfach),Strat:t.Strat,StratDesc:t.StratDesc,Wset:t.Wset,Startdate:e._formatDate(t.Stadt),Unitc:t.Unitc,Szaeh:t.Szaeh,PointStp:t.Mpcycleno,Vspos:t.Vspos,Topos:t.Topos,Vsneg:t.Vsneg,Toneg:t.Toneg,Horiz:t.Horiz,CallConf:t.CallConf,PlanSort:t.PlanSort,Begru:t.Begru,InactMp:t.Deact};n.MPLAN.push(q);var O=t.itemModel;if(O){for(var U=0;U<O.length;U++){var W={Mplan:t.Warpl,Qmart:O[U].Qmart,Qmartx:O[U].nTypeTxt,PlntMi:O[U].Werks,Planningplantdes:O[U].Planningplantdes,IngrpMi:O[U].Ingrp,Plannergrpdesc:O[U].Innam,Pstxt:O[U].Pstxt,WergwMi:O[U].WergwMi,ArbpMi:O[U].ArbpMi,Auart:O[U].Auart,Ordertypedesc:O[U].oTypeTxt,Bautl:O[U].AsmblyOb,Cycleseq:O[U].Cycleseq,Equnr:O[U].Equnr,Equipdesc:O[U].Eqktx,TplnrMi:O[U].Tplnr,Flocdesc:O[U].Pltxt,Mitemnumb:O[U].Mitemnumb,PlnnrMi:O[U].PlnnrMi,PlntyMi:O[U].PlntyMi,PlnalMi:O[U].PlnalMi,SwerkMil:O[U].SwerkMil,StortMil:O[U].StortMil,MsgrpIl:O[U].MsgrpIl,BeberMil:O[U].BeberMil,Fing:O[U].Fing,ArbplIl:O[U].ArbplIl,AbckzIl:O[U].AbckzIl,EqfnrIl:O[U].EqfnrIl,BukrsMil:O[U].BukrsMil,Butxt:O[U].Butxt,City:O[U].City,Anln1Mil:O[U].Anln1Mil,Anln2Mil:O[U].Anln2Mil,GsberIl:O[U].GsberIl,KostlMil:O[U].KostlMil,KokrsMil:O[U].KokrsMil,Posid:O[U].Posid,AufnrIl:O[U].AufnrIl};n.MPItem.push(W);if(O[U].lam){var K={Mplan:t.Warpl,Mitemnumb:O[U].lam.Mitemnumb,Lrpid:O[U].lam.Lrpid,Strtptatr:O[U].lam.Strtptatr,Endptatr:O[U].lam.Endptatr,Length:O[U].lam.Length,LinUnit:O[U].lam.LinUnit,Startmrkr:O[U].lam.Startmrkr,Endmrkr:O[U].lam.Endmrkr,Mrkdisst:O[U].lam.Mrkdisst,Mrkdisend:O[U].lam.Mrkdisend,MrkrUnit:O[U].lam.MrkrUnit};n.MPLAM.push(K)}}}var H=t.cycleModel;if(H){for(var z=0;z<H.length;z++){var _={Mplan:t.Warpl,Point:H[z].Point,PointTxt:H[z].Psort,Offset:H[z].Offset,Ofsetunit:H[z].Ofsetunit,PakText:H[z].PakText,Zeieh:H[z].Zeieh,Zykl1:H[z].Zykl1,Cycleseqi:H[z].Cycleseqi,Mpcycleno:H[z].Mpcycleno};n.MPCycle.push(_)}}var Z=t.ObjListItems;if(O){for(var g=0;g<Z.length;g++){var Q={AsmblyOb:Z[g].AsmblyOb,EquiObj:Z[g].EquiObj,FlocObj:Z[g].FlocObj,MatnrObj:Z[g].MatnrObj,Mitemnumb:Z[g].Mitemnumb,Mplan:Z[g].Warpl};n.MPOBList.push(Q)}}var G=t.classItems;if(G){if(G.length>0){for(var j=0;j<G.length;j++){var Y={Mplan:t.Warpl,Classtype:G[j].Classtype,Class:G[j].Class,Clstatus1:G[j].Clstatus1};n.ClassMpl.push(Y)}}}var J=t.characteristics;if(J){if(J.length>0){for(var x=0;x<J.length;x++){var X={Mplan:t.Warpl,Atnam:J[x].Atnam,Textbez:J[x].Textbez,Atwrt:J[x].Atwrt,Class:J[x].Class};n.ValuaMpl.push(X)}}}if(n.FLAddrI.length>0){n.FLAddrI=$.map(n.FLAddrI,function(e){return $.extend(true,{},e)});for(var x=0;x<n.FLAddrI.length>0;x++){delete n.FLAddrI[x].AdNationEnable;delete n.FLAddrI[x].City1iVS;delete n.FLAddrI[x].StreetiVS}}if(n.EqAddrI.length>0){n.EqAddrI=$.map(n.EqAddrI,function(e){return $.extend(true,{},e)});for(var x=0;x<n.EqAddrI.length>0;x++){delete n.EqAddrI[x].AdNationEnable;delete n.EqAddrI[x].City1iVS;delete n.EqAddrI[x].StreetiVS}}this.getView().byId("maintenancePage").setBusy(true);var ee=this.getView().getModel();ee.create("/ChangeRequestSet",n,{success:function(t){e.getView().byId("maintenancePage").setBusy(false);var a=t;var l=[];for(var s=0;s<a.Messages.results.length;s++){l.push({type:r.getMessageType(a.Messages.results[s].Type),title:a.Messages.results[s].Message})}e.createMessagePopover(l,"")},error:function(t){e.getView().byId("maintenancePage").setBusy(false);var a=[],r=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var l=0;l<JSON.parse(t.responseText).error.innererror.errordetails.length;l++){a[l]=JSON.parse(t.responseText).error.innererror.errordetails[l].message}}var s=a.join("\n");sap.m.MessageBox.show(s,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})}})},_getMessagePopover:function(){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment("ugieamui.mdg.eam.lib.popover.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}return this._oMessagePopover},handleMessagePopoverPress:function(e){this._getMessagePopover().openBy(e.getSource())},createMessagePopover:function(e,t){var a=[];var r,l=this._getMessagePopover();if(typeof e==="string"){a.push({type:t,title:e,message:e})}else if(Array.isArray(e)){a=e;for(var s=0;s<a.length;s++){a[s].message=a[s].title}}sap.ui.getCore().getMessageManager().removeAllMessages();for(var s=0;s<a.length;s++){r=new o({message:a[s].message,type:a[s].type,target:"/Dummy",processor:this.getView().getModel()});sap.ui.getCore().getMessageManager().addMessages(r)}l.toggle(this.getView().byId("idMessagePopover"));this.getView().byId("idMessagePopover").setEnabled(true);this.getView().byId("idMessagePopover").setText(a.length+"")}})});