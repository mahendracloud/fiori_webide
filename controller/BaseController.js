sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","ugiaiwui/mdg/aiw/request/model/formatter","ugiaiwui/mdg/aiw/request/util/ValueHelpRequest","ugiaiwui/mdg/aiw/library/js/ClassUtils","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider"],function(e,t,a,r,n,l,i){"use strict";var s=undefined;var o=undefined;return e.extend("ugiaiwui.mdg.aiw.request.controller.BaseController",{getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onShareEmailPress:function(){var e=this.getModel("objectView")||this.getModel("worklistView");sap.m.URLHelper.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},addHistoryEntry:function(){var e=[];return function(t,a){if(a){e=[]}var r=e.some(function(e){return e.intent===t.intent});if(!r){e.push(t);this.getOwnerComponent().getService("ShellUIService").then(function(t){t.setHierarchy(e)})}}}(),onMeasuringPointChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("")}else{e.getSource().setValue(a.toUpperCase());n._changeMeasPointNumber(e,t)}},onPostalCodeChange:function(){var e=this;var t=e.getView().getModel(e.oModelName);var a=t.getData();t.setData(a);if(a.Title!==""&&a.Title!==undefined||a.TitleCode!==""&&a.TitleCode!==undefined||a.Name1!==""&&a.Name1!==undefined||a.Name2!==""&&a.Name2!==undefined||a.Name3!==""&&a.Name3!==undefined||a.Name4!==""&&a.Name4!==undefined||a.Sort1!==""&&a.Sort1!==undefined||a.Sort2!==""&&a.Sort2!==undefined||a.NameCo!==""&&a.NameCo!==undefined||a.PostCod1!==""&&a.PostCod1!==undefined||a.City1!==""&&a.City1!==undefined||a.Building!==""&&a.Building!==undefined||a.Floor!==""&&a.Floor!==undefined||a.Roomnum!==""&&a.Roomnum!==undefined||a.AddrLocation!==""&&a.AddrLocation!==undefined||a.Strsuppl1!==""&&a.Strsuppl1!==undefined||a.Strsuppl2!==""&&a.Strsuppl2!==undefined||a.Strsuppl3!==""&&a.Strsuppl3!==undefined||a.TimeZone!==""&&a.TimeZone!==undefined||a.RefPosta!==""&&a.RefPosta!==undefined||a.Region!==""&&a.Region!==undefined){a.RefPostaLblReq=true;e.onTimeZoneValidation("",a.RefPosta,a.PostCod1)}else{a.RefPostaLblReq=false;a.RefPostaVS="None"}t.setData(a)},onTimeZoneValidation:function(e,t,a){var r=this;var n=r.getView().getModel("mainView");var l=n.getData();var i=r.getView().getModel(r.oModelName);var s=i.getData();var o=r.getView().getModel("valueHelp");var c="/TzoneValidSet(Tzone='"+e+"',Land1='"+t+"',PostalCode='"+a+"')";var u=function(e){s.TimeZone=e.Tzone;s.TimeZoneVS="None";s.PostCod1VS="None";i.setData(s);if(s.Title!==""&&s.Title!==undefined||s.TitleCode!==""&&s.TitleCode!==undefined||s.Name1!==""&&s.Name1!==undefined||s.Name2!==""&&s.Name2!==undefined||s.Name3!==""&&s.Name3!==undefined||s.Name4!==""&&s.Name4!==undefined||s.Sort1!==""&&s.Sort1!==undefined||s.Sort2!==""&&s.Sort2!==undefined||s.NameCo!==""&&s.NameCo!==undefined||s.PostCod1!==""&&s.PostCod1!==undefined||s.City1!==""&&s.City1!==undefined||s.Building!==""&&s.Building!==undefined||s.Floor!==""&&s.Floor!==undefined||s.Roomnum!==""&&s.Roomnum!==undefined||s.AddrLocation!==""&&s.AddrLocation!==undefined||s.Strsuppl1!==""&&s.Strsuppl1!==undefined||s.Strsuppl2!==""&&s.Strsuppl2!==undefined||s.Strsuppl3!==""&&s.Strsuppl3!==undefined||s.TimeZone!==""&&s.TimeZone!==undefined||s.RefPosta!==""&&s.RefPosta!==undefined||s.Region!==""&&s.Region!==undefined){s.RefPostaLblReq=true}else{s.RefPostaLblReq=false;s.RefPostaVS="None"}i.setData(s);l.viewBusy=false;n.setData(l)};var d=function(t){var a=JSON.parse(t.responseText);var r=a.error.message.value;if(e!==""){s.TimeZoneVS="Error"}else{s.PostCod1VS="Error"}i.setData(s);l.viewBusy=false;n.setData(l);sap.m.MessageBox.show(r,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})};if(t!==""){l.viewBusy=true;n.setData(l);r._readData(c,o,u,d)}},onTimeZoneChange:function(e){var t=this.getView().getModel(this.oModelName);var a=t.getData();var r=e.getSource().getValue();t.setData(a);if(a.Title!==""&&a.Title!==undefined||a.TitleCode!==""&&a.TitleCode!==undefined||a.Name1!==""&&a.Name1!==undefined||a.Name2!==""&&a.Name2!==undefined||a.Name3!==""&&a.Name3!==undefined||a.Name4!==""&&a.Name4!==undefined||a.Sort1!==""&&a.Sort1!==undefined||a.Sort2!==""&&a.Sort2!==undefined||a.NameCo!==""&&a.NameCo!==undefined||a.PostCod1!==""&&a.PostCod1!==undefined||a.City1!==""&&a.City1!==undefined||a.Building!==""&&a.Building!==undefined||a.Floor!==""&&a.Floor!==undefined||a.Roomnum!==""&&a.Roomnum!==undefined||a.AddrLocation!==""&&a.AddrLocation!==undefined||a.Strsuppl1!==""&&a.Strsuppl1!==undefined||a.Strsuppl2!==""&&a.Strsuppl2!==undefined||a.Strsuppl3!==""&&a.Strsuppl3!==undefined||a.TimeZone!==""&&a.TimeZone!==undefined||a.RefPosta!==""&&a.RefPosta!==undefined||a.Region!==""&&a.Region!==undefined){a.RefPostaLblReq=true;t.setData(a);e.getSource().setValue(r.toUpperCase());n._changeTimeZoneChange(e,this)}else{a.RefPostaLblReq=false;a.RefPostaVS="None";t.setData(a)}},readAddressTitle:function(){var e=this;var a="/AddrTittleSet";var r=e.getView().getModel("valueHelp");var n=function(a){if(a.results.length>0){var r=[{Title:"",TitleCode:""}];for(var n=0;n<a.results.length;n++){var l={Title:a.results[n].TitleMedi,TitleCode:a.results[n].Title};r.push(l)}var i=new t([]);i.setData(r);e.getView().setModel(i,"AddressTitleModel")}};var l=function(){};e._readData(a,r,n,l)},onAddressTitleChange:function(e){var t=this;var a=e.getParameter("selectedItem");var r=t.getView().getModel(t.oModelName);var n=r.getData();e.getSource().setValueState("None");e.getSource().setSelectedKey(a.getKey());n.Title=a.getText();r.setData(n);if(n.Title!==""&&n.Title!==undefined||n.TitleCode!==""&&n.TitleCode!==undefined||n.Name1!==""&&n.Name1!==undefined||n.Name2!==""&&n.Name2!==undefined||n.Name3!==""&&n.Name3!==undefined||n.Name4!==""&&n.Name4!==undefined||n.Sort1!==""&&n.Sort1!==undefined||n.Sort2!==""&&n.Sort2!==undefined||n.NameCo!==""&&n.NameCo!==undefined||n.PostCod1!==""&&n.PostCod1!==undefined||n.City1!==""&&n.City1!==undefined||n.Building!==""&&n.Building!==undefined||n.Floor!==""&&n.Floor!==undefined||n.Roomnum!==""&&n.Roomnum!==undefined||n.AddrLocation!==""&&n.AddrLocation!==undefined||n.Strsuppl1!==""&&n.Strsuppl1!==undefined||n.Strsuppl2!==""&&n.Strsuppl2!==undefined||n.Strsuppl3!==""&&n.Strsuppl3!==undefined||n.TimeZone!==""&&n.TimeZone!==undefined||n.RefPosta!==""&&n.RefPosta!==undefined||n.Region!==""&&n.Region!==undefined){n.RefPostaLblReq=true}else{n.RefPostaLblReq=false;n.RefPostaVS="None"}r.setData(n)},onFunctionalLocChange:function(e){var t=this;var a,r;var n="AIWFLOC";var l=e.getSource().getValue();if(l===""||l===undefined){e.getSource().setValue("")}else{l=l.toUpperCase().trim();e.getSource().setValue(l);var i=sap.ui.getCore().getModel(n);var s=i.getData();var o=0;var c=[];var u=e.getSource().getModel(n).getData().Strucindicator;var d=e.getSource().getBindingContext(n);if(s.length>1){for(var f=0;f<s.length;f++){if(l===s[f].Functionallocation){o++}}if(o>1){e.getSource().setValue("");e.getSource().setValueState("Error");if(t.oMessagePopover){c.push({type:"Error",title:t.getResourceBundle().getText("flocExist",[l])});t.createMessagePopover(c,false)}else{t.invokeMessage(t.getResourceBundle().getText("flocExist",[l]))}}else{if(u){t.readSupFlocDetails(l)}if(d){a=d.getPath();r=d.getProperty(a);if(r.Strucindicator){i.setProperty(a,r);t.readSupFlocDetails(l)}}}}else{if(u){t.readSupFlocDetails(l)}if(d){a=d.getPath();r=d.getProperty(a);if(r.Strucindicator){t.readSupFlocDetails(l)}}}}},cycleIndicatorSelected:function(e){var t=e;if(typeof e==="string"){t=parseInt(e.substr(e.indexOf("/")+1))}var a=sap.ui.getCore().getModel("AIWMPMI");var r=a.getData()[t];r.cycleIndSingle=false;r.cycleIndStrategy=false;r.cycleIndMultCntr=false;r.StratEnabled=false;r.MehrfachEnabled=false;r.WsetEnabled=false;switch(r.cycleType){case 0:r.cycleType=0;r.cycleIndSingle=true;r.cycleIndStrategyEnabled=false;r.cycleIndMultCntrEnabled=false;r.Strat=" ";r.StratDesc=" ";r.StratLBL=false;r.StratVis=false;r.StratDescVis=false;r.Wset=" ";r.Ktext=" ";r.WsetLBL=false;r.WsetVis=false;r.KtextVis=false;r.Mehrfach=false;r.MehrfachLBL=false;r.MehrfachVis=false;r.ButtonNewCycleEnabled=true;if(r.ScheIndRbPerformance===true){r.SzaehLBL=true;r.SzaehVis=true;r.UnitcVis=true;r.StadtLBL=false;r.StadtVis=false}break;case 1:r.cycleType=1;r.cycleIndStrategy=true;r.cycleIndSingleEnabled=false;r.cycleIndMultCntrEnabled=false;r.StratLBL=true;r.StratVis=true;r.StratDescVis=true;r.StratEnabled=true;r.Mehrfach=false;r.MehrfachLBL=false;r.MehrfachVis=false;r.Wset=" ";r.Ktext=" ";r.WsetLBL=false;r.WsetVis=false;r.KtextVis=false;r.ButtonNewCycleEnabled=false;break;case 2:r.cycleType=2;r.cycleIndMultCntr=true;r.cycleIndStrategyEnabled=false;r.cycleIndSingleEnabled=false;r.Strat=" ";r.StratDesc=" ";r.StratLBL=false;r.StratVis=false;r.StratDescVis=false;r.MehrfachLBL=true;r.MehrfachVis=true;r.MehrfachEnabled=true;r.WsetLBL=true;r.WsetVis=true;r.WsetEnabled=true;r.KtextVis=true;r.ButtonNewCycleEnabled=true;r.cycleSetSeqColVis=true;break}if(r.menuAction==="copy"||r.menuAction==="change"){if(r.Mptyp===""||r.Mptyp===undefined||r.Mptyp===" "){r.MptypEnabled=true}else{r.MptypEnabled=false}if(r.cycleType===1&&(r.Strat===""||r.Strat===undefined||r.Strat===" ")){r.StratEnabled=true}else{r.StratEnabled=false}if(r.cycleType===2&&(r.Mehrfach===false||r.Mehrfach===""||r.Mehrfach===undefined||r.Mehrfach===" ")){r.MehrfachEnabled=true}else{r.MehrfachEnabled=false}if(r.cycleType===2&&(r.Wset===""||r.Wset===undefined||r.Wset===" ")){r.WsetEnabled=true}else{r.WsetEnabled=false}}t="/"+t;a.setProperty(t,r);if(this.getView().getModel("AIWMPMI")){this.getView().getModel("AIWMPMI").refresh()}},onLiveChange:function(e){var t=e.getSource().getValue();if(t===" "){e.getSource().setValue("")}e.getSource().setValueState("None")},onValueChange:function(e){var t=e.getSource().getValue();if(t===" "||t===undefined){e.getSource().setValue("")}else{e.getSource().setValue(t.toUpperCase())}},setValueStateNone:function(e){e.getSource().setValueState("None")},_readData:function(e,t,a,r,n,l){t.read(e,{filters:n,urlParameters:l,success:a,error:r})},handleValueState:function(e,t,a){var r=this;var n=a.getSource().getModel(r.oModelName).getData()[e];if(n===""||n===undefined){r.doneFlag=false;a.getSource().getModel(r.oModelName).getData()[t]="Error"}else{a.getSource().getModel(r.oModelName).getData()[t]="None"}a.getSource().getModel(r.oModelName).refresh()},readSystem:function(e){var t=e.getView().getModel("valueHelp");t.read("/SystemTypeSet",{success:function(t){e.system=t.results[0].System;if(e.system===true){e.getModel(e.oModelName).getData().ConstrTypeMaxL=40;e.getModel(e.oModelName).getData().charValueMaxL=70}else{e.getModel(e.oModelName).getData().ConstrTypeMaxL=18;e.getModel(e.oModelName).getData().charValueMaxL=30}e.getModel(e.oModelName).refresh();return e.system},error:function(){}})},readSystemStatus:function(e){var t;if(e.getView().getModel(e.oModelName)){t=e.getView().getModel(e.oModelName)}else{t=sap.ui.getCore().getModel(e.oModelName)}var a=t.getData();var r="";if(e.oModelName==="AIWEQUI"){r="IEQ"}else if(e.oModelName==="AIWFLOC"){r="IFL"}var n=e.getView().getModel("valueHelp");var l="/SystemStatValueHelpSet(STSMA='',ObjTyp='"+r+"')";var i=function(r){if(e.oModelName==="AIWEQUI"&&(a.Tplnr===""||a.Tplnr===undefined)&&(a.SuperordinateEquip===""||a.SuperordinateEquip===undefined)&&a.Deact!=true){a.Stattext=r.TXT04}if(e.oModelName==="AIWFLOC"&&a.Deact!=true){a.Stattext=r.TXT04}t.setData(a)};var s=function(){};e._readData(l,n,i,s)},equipmentChange:function(e){var t=this;var a;var r=e.getSource().getValue();if(r===""||r===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Eqktx=""}else{e.getSource().setValue(r.toUpperCase());var l=false;var i=e.getSource().getModel(t.oModelName).getData().Tplnr;var s=sap.ui.getCore().getModel("AIWEQUI").getData();if(s.length>0){for(var o=0;o<s.length;o++){if(s[o].Equnr===r){a=s[o].Eqktx;l=true;break}}}if(t.oModelName.indexOf("Search")!==-1){if(l){return}n._changeEquiment(e,t)}else{if(l){e.getSource().getModel(t.oModelName).getData().Eqktx=a;var c=t.oModelName;if(t.oModelName==="itemDetailView"){if(i!==""||i!==undefined){e.getSource().getModel(t.oModelName).getData().Tplnr="";e.getSource().getModel(t.oModelName).getData().Pltxt=""}c="AIWMPMI"}t.fetchData(c)}else{n._changeEquiment(e,t)}}}},onEquipmentChange:function(e){var t=this;var a;var r=e.getSource().getValue();if(r===""||r===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Eqktx=""}else{e.getSource().setValue(r.toUpperCase());var l=false;var i=sap.ui.getCore().getModel("AIWEQUI").getData();if(i.length>0){for(var s=0;s<i.length;s++){if(i[s].Equnr===r){a=i[s].Eqktx;l=true;break}}}if(t.oModelName.indexOf("Search")!==-1){if(l){return}n._changeEquiment(e,t)}else{if(l){e.getSource().getModel(t.oModelName).getData().Eqktx=a;var o=t.oModelName;if(t.oModelName==="itemDetailView"){o="AIWMPMI"}t.fetchData(o)}else{n._changeEquiment(e,t)}}}},onMaintPlanDescChange:function(e){e.getSource().setValueState("None");var t;var a=e.getSource().getValue();var r=e.getSource().getModel("AIWMPMI").getData();if(r.length){for(var n=0;n<r.length;n++){if(r[n].Wptxt===a){t=r[n].itemModel;for(var l=0;l<t.length;l++){t[l].Pstxt=a}break}}}else{t=r.itemModel;for(var i=0;i<t.length;i++){t[i].Pstxt=a}}},onEquipCatChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().EquipCatgDescription=""}else{e.getSource().setValue(a.toUpperCase());n._changeEquipmentCategory(e,t)}},readStatusProf:function(e,t){var a;var r=t.getView().getModel();var n=t.getView().getModel(t.oModelName);var l=n.getData();var i=t.getView().getModel("mainView");var s=i.getData();if(t.oModelName==="AIWEQUI"){a="/DeriveSTProfileSet(Eqtyp='"+e+"',Lvorm=false,Deact="+l.Deact+",Fltyp='')"}if(t.oModelName==="AIWFLOC"){a="/DeriveSTProfileSet(Eqtyp='',Lvorm=false,Deact="+l.Deact+",Fltyp='"+e+"')"}r.read(a,{success:function(e){if(e.DescStsma!==""&&(e.Dscstatwithnum!==""||e.Dscstatwoutnum!=="")){l.Stattext=e.Txt30;l.UstaEqui=e.Txt30;l.StsmEqui=e.Stsma;l.StsmEquiDesc=e.DescStsma;l.UstwEqui=e.Dscstatwithnum;l.UswoEqui=e.Dscstatwoutnum;t.userWithSts=e.Dscstatwithnum;t.userWithoutSts=e.Dscstatwoutnum;s.visible=true}else{s.visible=false;l.Stattext="";l.UstaEqui="";l.StsmEqui="";l.StsmEquiDesc="";l.UstwEqui="";l.UswoEqui=""}i.setData(s);n.setData(l)},error:function(){}})},statProfChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().StsmEquiDesc=""}e.getSource().setValueState("None")},onStatProfChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().StsmEquiDesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeStatProfile(e,t)}},generateUserStatus:function(e,t,a){var r=e+" "+t;a.getModel(a.oModelName).getData().UstaEqui=r},onStatObjChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue(t.userWithSts)}else{e.getSource().setValue(a.toUpperCase());t.generateUserStatus(a.toUpperCase(),e.getSource().getModel(t.oModelName).getData().UswoEqui,t);n._changeStatObj(e,t)}},onStatWOChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue(t.userWithoutSts)}else{e.getSource().setValue(a.toUpperCase());t.generateUserStatus(e.getSource().getModel(t.oModelName).getData().UstwEqui,a.toUpperCase(),t);n._changeStatWONum(e,t)}},techObjTypeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Description=""}e.getSource().setValueState("None")},onTechObjTypeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");if(t.detailFlag){e.getSource().getModel(t.oModelName).getData().Description=""}}else{e.getSource().setValue(a.toUpperCase());n._changeTechnicalObjectType(e,t)}},maintPlantChange:function(e){e.getSource().setValueState("None")},onMaintPlantChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){var r=e.getSource();sap.m.MessageBox.show("Dependent fields would be cleared after changing the Maintenance Plant. Do you want to continue",{title:"Warning",icon:sap.m.MessageBox.Icon.WARNING,actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(e){if(e==="OK"){t.SOPMaintPlant="";r.setValue("");r.getModel(t.oModelName).getData().MaintplantDesc="";r.getModel(t.oModelName).getData().Bukrs="";r.getModel(t.oModelName).getData().Butxt="";r.getModel(t.oModelName).getData().BukrsEnabled=true;r.getModel(t.oModelName).getData().Werks="";r.getModel(t.oModelName).getData().Planningplantdes="";r.getModel(t.oModelName).getData().Kokrs="";if(t.oModelName==="AIWFLOC"){r.getModel(t.oModelName).getData().City=""}r.getModel(t.oModelName).refresh();var a=t.getView().getModel("dataOrigin").getData();var n=r.getName();a.forEach(function(e){if(e.property===n){e.instLoc=false;e.maintenance=true;e.currentVal=r.getValue()}if(e.property==="PplaEeqz"||e.property==="PlntFloc"){e.instLoc=false;e.maintenance=true;e.currentVal=""}})}else{r.setValue(t.SOPMaintPlant)}}})}else{e.getSource().setValue(a.toUpperCase());if(e.getSource().getValue()!==t.SOPMaintPlant){t.validateMaintPlantChange(e.getSource().getValue(),t.SOPMaintPlant,e.getSource())}else{n._changeMaintenancePlant(e,t)}}},validateMaintPlantChange:function(e,t,a){var r=this;var l=a;var i="/MaintPlantVHSet";var s=[new sap.ui.model.Filter("Werks","EQ",e),new sap.ui.model.Filter("IWerk","EQ",t?t:""),new sap.ui.model.Filter("Pplant","EQ",l.getModel(r.oModelName).getData().Werks)];var o=r.getView().getModel("valueHelp2");o.read(i,{filters:s,success:function(e){n._changeMaintenancePlant(l,r)},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;sap.m.MessageBox.show(a,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,actions:[sap.m.MessageBox.Action.OK],onClose:function(e){r.getView().getModel(r.oModelName).getData().Maintplant=r.SOPMaintPlant;r.getView().getModel(r.oModelName).refresh()}})}})},locationChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Locationdesc="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onLocationChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Locationdesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeLocation(e,t)}},abcIndChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Abctx="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onAbcIndChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Abctx=""}else{e.getSource().setValue(a.toUpperCase());n._changeAbcIndicator(e,t)}},wcChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Ktext="";e.getSource().getModel(t.oModelName).getData().WcWerks=""}e.getSource().setValueState("None")},onWcChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Ktext="";e.getSource().getModel(t.oModelName).getData().WcWerks=""}else{var r=false;e.getSource().setValue(a.toUpperCase());if(sap.ui.getCore().getModel("AIWListWCModel")){var l=sap.ui.getCore().getModel("AIWListWCModel").getData();if(l.length>0){for(var i=0;i<l.length;i++){if(l[i].wc.toUpperCase()===a.toUpperCase()){e.getSource().setValue(a.toUpperCase());e.getSource().getModel(t.oModelName).getData().Ktext=l[i].wcDesc;e.getSource().getModel(t.oModelName).getData().WcWerks=l[i].plant;r=true}}}}if(r===true){return}else{n._changeWorkCenter(e,t)}}},plantSecChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Fing="";e.getSource().getModel(t.oModelName).getData().Tele="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onPlantSecChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Fing="";e.getSource().getModel(t.oModelName).getData().Tele=""}else{e.getSource().setValue(a.toUpperCase());n._changePlantSec(e,t)}},companyCodeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Butxt="";e.getSource().getModel(t.oModelName).getData().Kokrs="";if(t.oModelName==="AIWFLOC"){e.getSource().getModel(t.oModelName).getData().City=""}}e.getSource().setValueState("None")},onCompanyCodeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Butxt="";e.getSource().getModel(t.oModelName).getData().Kokrs="";if(t.oModelName==="AIWFLOC"){e.getSource().getModel(t.oModelName).getData().City=""}}else{e.getSource().setValue(a.toUpperCase());n._changeCompanyCode(e,t)}},costCenterChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Mctxt="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onCostCenterdChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Mctxt=""}else{e.getSource().setValue(a.toUpperCase());n._changeCostCenter(e,t)}},plPlantChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Planningplantdes="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onPlPlantChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Planningplantdes=""}else{e.getSource().setValue(a.toUpperCase());n._changePlanningPlant(e,t)}},plGrpChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Innam="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onPlGrpdChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Innam=""}else{e.getSource().setValue(a.toUpperCase());n._changePlannerGroup(e,t)}},mainWcChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().MainKtext="";e.getSource().getModel(t.oModelName).getData().MainWerks="";var r=t.getView().getModel("dataOrigin").getData();var n=e.getSource().getName();r.forEach(function(t){if(t.property===n){t.instLoc=false;t.maintenance=true;t.currentVal=e.getSource().getValue()}})}e.getSource().setValueState("None")},onMainWcChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().MainKtext="";e.getSource().getModel(t.oModelName).getData().MainWerks=""}else{e.getSource().setValue(a.toUpperCase());var r=false;if(sap.ui.getCore().getModel("AIWListWCModel")){var l=sap.ui.getCore().getModel("AIWListWCModel").getData();if(l.length>0){for(var i=0;i<l.length;i++){if(l[i].wc.toUpperCase()===a.toUpperCase()){e.getSource().setValue(a.toUpperCase());e.getSource().getModel(t.oModelName).getData().MainKtext=l[i].wcDesc;e.getSource().getModel(t.oModelName).getData().MainWerks=l[i].plant;r=true;var s=t.getView().getModel("dataOrigin").getData();var o=e.getSource().getName();s.forEach(function(e){if(e.property===o){e.instLoc=false;e.maintenance=true;e.currentVal=l[i].plant}});break}}}}if(r===true){return}else{n._changeMainArbpl(e,t)}}},flocChange:function(e){var t=this;if(t.oModelName==="AIWEQUI"){t.EquiTplnr=e.getSource().getModel(t.oModelName).getData().Tplnr;e.getSource().setValueState("None")}if(t.oModelName==="AIWMSPT"||t.oModelName==="itemDetailView"){var a=e.getSource().getModel(t.oModelName).getData().Tplnr;if(a===""||a===undefined){e.getSource().getModel(t.oModelName).getData().Tplnr="";e.getSource().getModel(t.oModelName).getData().Pltxt=""}e.getSource().setValueState("None")}},onFlocChange:function(e){var t=this;var a;var r=e.getSource().getValue();if(r===""||r===undefined){if(t.oModelName==="AIWEQUI"){t.openDoiView(r)}e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Pltxt=""}else{e.getSource().setValue(r.toUpperCase());var l=false;var i=sap.ui.getCore().getModel("AIWFLOC").getData();var s=e.getSource().getModel(t.oModelName).getData().Equnr;if(i.length>0){for(var o=0;o<i.length;o++){if(i[o].Functionallocation===r.toUpperCase()){a=i[o].Flocdescription;l=true;break}}}if(t.oModelName.indexOf("Search")!==-1){if(l){return}n._changeFunctionalLocation(e,t)}else{if(l){e.getSource().getModel(t.oModelName).getData().Pltxt=a;var c=t.oModelName;if(t.oModelName==="itemDetailView"){if(s!==""||s!==undefined){e.getSource().getModel(t.oModelName).getData().Equnr="";e.getSource().getModel(t.oModelName).getData().Eqktx=""}c="AIWMPMI"}t.fetchData(c)}else{n._changeFunctionalLocation(e,t)}}}},onFlocCatChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().FlocCategoryDesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeFlocCategory(e,t)}},constTypeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().ConstructionDesc=""}e.getSource().setValueState("None")},onConstTypeChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().ConstructionDesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeConstructionType(e,t)}},cntryChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Landx=""}e.getSource().setValueState("None")},onCntryChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Landx=""}else{e.getSource().setValue(a.toUpperCase());n._changeCntryChange(e,t)}},langChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().LanguP=""}e.getSource().setValueState("None")},onLangChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().LanguP=""}else{e.getSource().setValue(a.toUpperCase());n._changeLangChange(e,t)}},maintStrategyChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().StratDesc=""}e.getSource().setValueState("None")},onMaintStrategyChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().StratDesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeMaintStrategy(e,t)}},cycleSetChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Ktext=""}e.getSource().setValueState("None")},onCycleSetChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().Ktext=""}else{e.getSource().setValue(a.toUpperCase());n._changeCycleSet(e,t)}},factCalendarChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().FabklDesc=""}e.getSource().setValueState("None")},onFactCalendarChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().FabklDesc=""}else{e.getSource().setValue(a.toUpperCase());n._changeFactoryCalendar(e,t)}},onCounterChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("")}else{e.getSource().setValue(a.toUpperCase());n._changeCounter(e,t)}},regionChange:function(e){var t=this;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().RegionDesc=""}e.getSource().setValueState("None")},onRegionChange:function(e){var t=this;var a=t.getView().getModel(t.oModelName);var r=a.getData();var l=e.getSource().getValue();a.setData(r);if(r.Title!==""&&r.Title!==undefined||r.TitleCode!==""&&r.TitleCode!==undefined||r.Name1!==""&&r.Name1!==undefined||r.Name2!==""&&r.Name2!==undefined||r.Name3!==""&&r.Name3!==undefined||r.Name4!==""&&r.Name4!==undefined||r.Sort1!==""&&r.Sort1!==undefined||r.Sort2!==""&&r.Sort2!==undefined||r.NameCo!==""&&r.NameCo!==undefined||r.PostCod1!==""&&r.PostCod1!==undefined||r.City1!==""&&r.City1!==undefined||r.Building!==""&&r.Building!==undefined||r.Floor!==""&&r.Floor!==undefined||r.Roomnum!==""&&r.Roomnum!==undefined||r.AddrLocation!==""&&r.AddrLocation!==undefined||r.Strsuppl1!==""&&r.Strsuppl1!==undefined||r.Strsuppl2!==""&&r.Strsuppl2!==undefined||r.Strsuppl3!==""&&r.Strsuppl3!==undefined||r.TimeZone!==""&&r.TimeZone!==undefined||r.RefPosta!==""&&r.RefPosta!==undefined||r.Region!==""&&r.Region!==undefined){r.RefPostaLblReq=true;if(r.RefPosta!==""){e.getSource().setValue(l.toUpperCase());n._changeRegionChange(e,t)}else{t.invokeMessage(t.getResourceBundle().getText("countryKeyMand"));r.RefPostaVS="Error";e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().RegionDesc=""}a.setData(r)}else{e.getSource().setValue("");e.getSource().getModel(t.oModelName).getData().RegionDesc="";r.RefPostaLblReq=false;r.RefPostaVS="None";a.setData(r)}},handleSearch:function(e){var t=this;var a=e.getParameter("value");if(t.inputId.indexOf("EQUI_FunctionalLoc")!==-1||t.inputId.indexOf("SuperiorFloc")!==-1||t.inputId.indexOf("MSPT_FunctionalLoc")!==-1||t.inputId.indexOf("Item_FunctionalLoc")!==-1||t.inputId.indexOf("SRCH_FunctionalLoc")!==-1||t.inputId.indexOf("COPY_FunctionalLoc")!==-1){e.getSource().getBinding("items").filter(!a?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Tplnr",sap.ui.model.FilterOperator.Contains,a),new sap.ui.model.Filter("Pltxt",sap.ui.model.FilterOperator.Contains,a)],true)])}else if(t.inputId.indexOf("EQUI_Equipment")!==-1||t.inputId.indexOf("SuperordEqui")!==-1||t.inputId.indexOf("MSPT_Equipment")!==-1||t.inputId.indexOf("Item_Equipment")!==-1||t.inputId.indexOf("COPY_Equipment")!==-1){e.getSource().getBinding("items").filter(!a?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Equnr",sap.ui.model.FilterOperator.Contains,a),new sap.ui.model.Filter("Eqktx",sap.ui.model.FilterOperator.Contains,a)],true)])}else if(t.inputId.indexOf("ConstructionType")!==-1){e.getSource().getBinding("items").filter(!a?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.Contains,a),new sap.ui.model.Filter("Maktx",sap.ui.model.FilterOperator.Contains,a)],true)])}},handleClose:function(e){var t=this;var a=t.getView().getModel(t.oModelName);var r=a.getData();var n=e.getParameter("selectedItem");if(n){if(t.inputId.indexOf("EQUI_FunctionalLoc")!==-1){e.getSource().getBinding("items").filter([]);r.TplnrVS="None";r.TplnrVST="";r.Tplnr=e.getParameter("selectedItem").getProperty("title");r.Pltxt=e.getParameter("selectedItem").getProperty("description");a.setData(r);t.fetchData()}else if(t.inputId.indexOf("MSPT_FunctionalLoc")!==-1||t.inputId.indexOf("SRCH_FunctionalLoc")!==-1){e.getSource().getBinding("items").filter([]);r.TplnrVS="None";r.TplnrVST="";r.Tplnr=e.getParameter("selectedItem").getProperty("title");r.Pltxt=e.getParameter("selectedItem").getProperty("description");a.setData(r)}else if(t.inputId.indexOf("SuperiorFloc")!==-1){e.getSource().getBinding("items").filter([]);r.SupFunctionallocationVS="None";r.SupFunctionallocationVST="";r.SupFunctionallocation=e.getParameter("selectedItem").getProperty("title");r.SupFlocdescription=e.getParameter("selectedItem").getProperty("description");a.setData(r);t.readSupFlocDetails()}else if(t.inputId.indexOf("SuperordEqui")!==-1){r.SuperordinateEquipVS="None";r.SuperordinateEquipVST="";r.SuperordinateEquip=e.getParameter("selectedItem").getProperty("title");r.SuperordinateEquipDesc=e.getParameter("selectedItem").getProperty("description");a.setData(r);t.fetchData()}else if(t.inputId.indexOf("EQUI_Equipment")!==-1||t.inputId.indexOf("MSPT_Equipment")!==-1){e.getSource().getBinding("items").filter([]);r.Equnr=e.getParameter("selectedItem").getProperty("title");r.Eqktx=e.getParameter("selectedItem").getProperty("description");r.EqunrVS="None";r.EqunrVST="";a.setData(r)}else if(t.inputId.indexOf("ConstructionType")!==-1){e.getSource().getBinding("items").filter([]);r.ConstrType=e.getParameter("selectedItem").getProperty("title");r.ConstructionDesc=e.getParameter("selectedItem").getProperty("description");r.ConstrTypeVS="None";r.ConstrTypeVST="";a.setData(r)}}},fetchData:function(e,a,n){var l=this;var i="/ChangeRequestSet";var s=l.getView().getModel();var o=[];var c={};var u={ChangeRequestType:"AIWEAM0P",CrDescription:"",Reason:"01",DeriveData:true,FuncLoc:[],FLAddr:[],FLAddrI:[],FLLAM:[],FLClass:[],FLVal:[],FLALTLBEL:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],FLLAMCH:[],EqLAMCH:[]};var d=sap.ui.getCore().getModel("AIWFLOC");var f=sap.ui.getCore().getModel("AIWEQUI");var p=sap.ui.getCore().getModel("AIWMSPT");var g=sap.ui.getCore().getModel("AIWMPMI");var S=l.getView().getModel(e);var m;if(e==="AIWFLOC"){m=S.getData().Functionallocation}if(e==="AIWEQUI"){m=S.getData().Equnr}if(e==="AIWMSPT"){m=S.getData().Mspoint}if(e==="AIWMPMI"){m=g.getData()[a].Warpl}if(e==="itemDetailView"){m=g.getData()[a].Warpl}var h=sap.ui.getCore().getModel("AIWEQUI").getData();var M=sap.ui.getCore().getModel("AIWFLOC").getData();var V=sap.ui.getCore().getModel("AIWMSPT").getData();var E=sap.ui.getCore().getModel("AIWMPMI").getData();if(M.length>0){for(var b=0;b<M.length;b++){var C={Tplnr:M[b].Functionallocation,Txtmi:M[b].Flocdescription,TplkzFlc:M[b].Strucindicator,Tplxt:M[b].StrucIndicatorDesc,EditMask:M[b].EditMask,Hierarchy:M[b].Hierarchy,Fltyp:M[b].Floccategory,Flttx:M[b].FlocCategoryDesc,Swerk:M[b].Maintplant,Plantname:M[b].MaintplantDesc,StorFloc:M[b].Location,Locationdesc:M[b].Locationdesc,Abckzfloc:M[b].Abckz,Abctx:M[b].Abctx,Bukrsfloc:M[b].Bukrs,Butxt:M[b].Butxt,City:M[b].City,KostFloc:M[b].Kostl,KokrFloc:M[b].Kokrs,Contareaname:M[b].Mctxt,PlntFloc:M[b].Werks,Planningplantdes:M[b].Planningplantdes,Ingrp:M[b].Ingrp,Plannergrpdesc:M[b].Innam,Arbplfloc:M[b].Arbpl,Workcenterdesc:M[b].Ktext,Wergwfloc:M[b].WcWerks,Gewrkfloc:M[b].MainArbpl,MainWcDesc:M[b].MainKtext,MainWcPlant:M[b].MainWerks,Tplma:M[b].SupFunctionallocation,Supflocdesc:M[b].SupFlocdescription,BeberFl:M[b].BeberFl,Fing:M[b].Fing,Tele:M[b].Tele,Submtiflo:M[b].ConstrType,Constdesc:M[b].ConstructionDesc,Eqart:M[b].TechnicalObjectTyp,Eartx:M[b].Description,Stattext:M[b].Stattext,StsmFloc:M[b].StsmEqui,Statproftxt:M[b].StsmEquiDesc,UstwFloc:M[b].UstwEqui,UswoFloc:M[b].UswoEqui,UstaFloc:M[b].UstaEqui,IsMenu:M[b].menuAction,Adrnr:M[b].Adrnr,Adrnri:M[b].Adrnri,Modeldesc:M[b].Modeldesc,Modelref:M[b].Modelref,Modelrver:M[b].Modelrver,Modelext:M[b].Modelext,Modelname:M[b].Modelname,Modelver:M[b].Modelver};var L=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;if(L&&L.length>0){var T=L[b].DOI;C.Swerki=T[0].instLoc?"H":T[0].maintenance?"D":"";C.Storti=T[1].instLoc?"H":T[1].maintenance?"D":"";C.Beberi=T[2].instLoc?"H":T[2].maintenance?"D":"";C.Ppsidi=T[3].instLoc?"H":T[3].maintenance?"D":"";C.Abckzi=T[4].instLoc?"H":T[4].maintenance?"D":"";C.Bukrsi=T[5].instLoc?"H":T[5].maintenance?"D":"";C.Kostli=T[6].instLoc?"H":T[6].maintenance?"D":"";C.Kokrsi=T[7].instLoc?"H":T[7].maintenance?"D":"";C.Iwerki=T[8].instLoc?"H":T[8].maintenance?"D":"";C.Ingrpi=T[9].instLoc?"H":T[9].maintenance?"D":"";C.Lgwidi=T[10].instLoc?"H":T[10].maintenance?"D":"";C.Adrnri=T[12].instLoc?"H":T[12].maintenance?"D":""}if(M[b].viewParameter==="create"){C.Type=true}u.FuncLoc.push(C);if(M[b].Title!==""&&M[b].Title!==undefined||M[b].TitleCode!==""&&M[b].TitleCode!==undefined||M[b].Name1!==""&&M[b].Name1!==undefined||M[b].Name2!==""&&M[b].Name2!==undefined||M[b].Name3!==""&&M[b].Name3!==undefined||M[b].Name4!==""&&M[b].Name4!==undefined||M[b].Sort1!==""&&M[b].Sort1!==undefined||M[b].Sort2!==""&&M[b].Sort2!==undefined||M[b].NameCo!==""&&M[b].NameCo!==undefined||M[b].PostCod1!==""&&M[b].PostCod1!==undefined||M[b].City1!==""&&M[b].City1!==undefined||M[b].Building!==""&&M[b].Building!==undefined||M[b].Floor!==""&&M[b].Floor!==undefined||M[b].Roomnum!==""&&M[b].Roomnum!==undefined||M[b].AddrLocation!==""&&M[b].AddrLocation!==undefined||M[b].Strsuppl1!==""&&M[b].Strsuppl1!==undefined||M[b].Strsuppl2!==""&&M[b].Strsuppl2!==undefined||M[b].Strsuppl3!==""&&M[b].Strsuppl3!==undefined||M[b].TimeZone!==""&&M[b].TimeZone!==undefined||M[b].RefPosta!==""&&M[b].RefPosta!==undefined||M[b].Region!==""&&M[b].Region!==undefined){var A={Funcloc:M[b].Functionallocation,Title:M[b].TitleCode,Name1:M[b].Name1,Name2:M[b].Name2,Name3:M[b].Name3,Name4:M[b].Name4,Sort1:M[b].Sort1,Sort2:M[b].Sort2,NameCo:M[b].NameCo,PostCod1:M[b].PostCod1,City1:M[b].City1,Building:M[b].Building,Floor:M[b].Floor,Roomnum:M[b].Roomnum,Strsuppl1:M[b].Strsuppl1,Strsuppl2:M[b].Strsuppl2,Strsuppl3:M[b].Strsuppl3,Location:M[b].AddrLocation,RPostafl:M[b].RefPosta,Landx:M[b].Landx,TimeZone:M[b].TimeZone,RPostFl:M[b].Region,Regiotxt:M[b].RegionDesc};u.FLAddr.push(A)}var F=M[b].intlAddr;if(F.length>0){for(var P=0;P<F.length;P++){u.FLAddrI.push(F[P])}}if(l.AltLblDerv==="2"&&M[b].altlbl.length>0){for(var v=0;v<M[b].altlbl.length;v++){var D={Funcloc:M[b].Functionallocation,AltAlkey:M[b].altlbl[v].AltAlkey,AltStrno:M[b].altlbl[v].AltStrno,AltTplkz:M[b].altlbl[v].AltTplkz};u.FLALTLBEL.push(D)}}if(M[b].lam){var y={Funcloc:M[b].Functionallocation,Lrpid:M[b].lam.Lrpid,Strtptatr:M[b].lam.Strtptatr,Endptatr:M[b].lam.Endptatr,Length:M[b].lam.Length.toString(),LinUnit:M[b].lam.LinUnit,Startmrkr:M[b].lam.Startmrkr,Endmrkr:M[b].lam.Endmrkr,Mrkdisst:M[b].lam.Mrkdisst,Mrkdisend:M[b].lam.Mrkdisend,MrkrUnit:M[b].lam.MrkrUnit,LamDer:M[b].lam.LamDer};u.FLLAM.push(y)}var I=M[b].classItems;if(I){if(I.length>0){for(var k=0;k<I.length;k++){var N={Funcloc:M[b].Functionallocation,Classtype:I[k].Classtype,Class:I[k].Class,Clstatus1:I[k].Clstatus1,Artxt:I[k].ClassTypeDesc};u.FLClass.push(N)}}}var q=M[b].characteristics;if(q){if(q.length>0){for(var x=0;x<q.length;x++){var w={Funcloc:M[b].Functionallocation,Atnam:q[x].Atnam,Textbez:q[x].Textbez,Atwrt:q[x].Atwrt,Class:q[x].Class};u.FLVal.push(w)}}}var R=M[b].linearChar;if(R){if(R.length>0){var B=$.map(R,function(e){return $.extend(true,{},e)});for(var x=0;x<B.length;x++){delete B[x].linCharEnable;B[x].Funcloc=M[b].Functionallocation;u.FLLAMCH.push(B[x])}}}}}if(h.length>0){for(var O=0;O<h.length;O++){var W={Herst:h[O].Herst,Equnr:h[O].Equnr,Txtmi:h[O].Eqktx,Swerk:h[O].Maintplant,Name1:h[O].MaintplantDesc,TplnEilo:h[O].Tplnr,Flocdescription:h[O].Pltxt,Eqtyp:h[O].EquipmentCatogory,Etytx:h[O].EquipCatgDescription,Eqart:h[O].TechnicalObjectTyp,Eartx:h[O].Description,Typbz:h[O].Typbz,SubmEeqz:h[O].ConstrType,Constdesc:h[O].ConstructionDesc,BukrEilo:h[O].Bukrs,Butxt:h[O].Butxt,HequEeqz:h[O].SuperordinateEquip,SuperordEqDes:h[O].SuperordinateEquipDesc,TidnEeqz:h[O].TechIdNum,KostEilo:h[O].Kostl,KokrEilo:h[O].Kokrs,Contareaname:h[O].Mctxt,StorEilo:h[O].Location,Locationdesc:h[O].Locationdesc,AbckEilo:h[O].Abckz,Abctx:h[O].Abctx,PplaEeqz:h[O].Werks,Planningplantdes:h[O].Planningplantdes,IngrEeqz:h[O].Ingrp,Plannergrpdesc:h[O].Innam,Serge:h[O].Serge,MapaEeqz:h[O].MapaEeqz,Stattext:h[O].Stattext,StsmEqui:h[O].StsmEqui,Statproftxt:h[O].StsmEquiDesc,UstwEqui:h[O].UstwEqui,UswoEqui:h[O].UswoEqui,UstaEqui:h[O].UstaEqui,Answt:h[O].Answt,Ansdt:l._formatDate(h[O].Ansdt),Waers:h[O].Waers,ArbpEilo:h[O].Arbpl,Workcenterdesc:h[O].Ktext,WorkCenterPlant:h[O].WcWerks,ArbpEeqz:h[O].MainArbpl,MainWcDesc:h[O].MainKtext,MainWcPlant:h[O].MainWerks,BebeEilo:h[O].BeberFl,Fing:h[O].Fing,Tele:h[O].Tele,HeqnEeqz:h[O].EquipPosition,IsMenu:h[O].menuAction,Adrnr:h[O].Adrnr,Adrnri:h[O].Adrnri,Fhmkz:h[O].Fhmkz,Funcid:h[O].Funcid,Frcfit:h[O].Frcfit,Frcrmv:h[O].Frcrmv};var U=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;if(U&&U.length>0){var T=U[O].DOI;W.Swerki=T[0].instLoc?"R":T[0].maintenance?"D":"";W.Storti=T[1].instLoc?"R":T[1].maintenance?"D":"";W.Beberi=T[2].instLoc?"R":T[2].maintenance?"D":"";W.Ppsidi=T[3].instLoc?"R":T[3].maintenance?"D":"";W.Abckzi=T[4].instLoc?"R":T[4].maintenance?"D":"";W.Kostli=T[5].instLoc?"R":T[5].maintenance?"D":"";W.Iwerki=T[6].instLoc?"R":T[6].maintenance?"D":"";W.Ingrpi=T[7].instLoc?"R":T[7].maintenance?"D":"";W.Gewrki=T[8].instLoc?"R":T[8].maintenance?"D":"";W.Adrnri=T[10].instLoc?"R":T[10].maintenance?"D":""}if(h[O].viewParameter==="create"){W.Type=true}u.Equipment.push(W);if(h[O].Title!==""&&h[O].Title!==undefined||h[O].TitleCode!==""&&h[O].TitleCode!==undefined||h[O].Name1!==""&&h[O].Name1!==undefined||h[O].Name2!==""&&h[O].Name2!==undefined||h[O].Name3!==""&&h[O].Name3!==undefined||h[O].Name4!==""&&h[O].Name4!==undefined||h[O].Sort1!==""&&h[O].Sort1!==undefined||h[O].Sort2!==""&&h[O].Sort2!==undefined||h[O].NameCo!==""&&h[O].NameCo!==undefined||h[O].PostCod1!==""&&h[O].PostCod1!==undefined||h[O].City1!==""&&h[O].City1!==undefined||h[O].Building!==""&&h[O].Building!==undefined||h[O].Floor!==""&&h[O].Floor!==undefined||h[O].Roomnum!==""&&h[O].Roomnum!==undefined||h[O].AddrLocation!==""&&h[O].AddrLocation!==undefined||h[O].Strsuppl1!==""&&h[O].Strsuppl1!==undefined||h[O].Strsuppl2!==""&&h[O].Strsuppl2!==undefined||h[O].Strsuppl3!==""&&h[O].Strsuppl3!==undefined||h[O].TimeZone!==""&&h[O].TimeZone!==undefined||h[O].RefPosta!==""&&h[O].RefPosta!==undefined||h[O].Region!==""&&h[O].Region!==undefined){var z={Equi:h[O].Equnr,Title:h[O].TitleCode,Name1:h[O].Name1,Name2:h[O].Name2,Name3:h[O].Name3,Name4:h[O].Name4,Sort1:h[O].Sort1,Sort2:h[O].Sort2,NameCo:h[O].NameCo,PostCod1:h[O].PostCod1,City1:h[O].City1,Building:h[O].Building,Floor:h[O].Floor,Roomnum:h[O].Roomnum,Strsuppl1:h[O].Strsuppl1,Strsuppl2:h[O].Strsuppl2,Strsuppl3:h[O].Strsuppl3,Location:h[O].AddrLocation,RefPosta:h[O].RefPosta,Landx:h[O].Landx,TimeZone:h[O].TimeZone,RfePost:h[O].Region,Regiotxt:h[O].RegionDesc};u.EqAddr.push(z)}var F=h[O].intlAddr;if(F.length>0){for(var P=0;P<F.length;P++){u.EqAddrI.push(F[P])}}var K={Equi:h[O].Equnr,PlanvPrt:h[O].PlanvPrt,SteufPrt:h[O].SteufPrt,KtschPrt:h[O].KtschPrt,Ewformprt:h[O].Ewformprt,SteufRef:h[O].SteufRef,KtschRef:h[O].KtschRef,EwformRef:h[O].EwformRef};u.EqPRT.push(K);if(h[O].lam){var H={Equi:h[O].Equnr,Lrpid:h[O].lam.Lrpid,Strtptatr:h[O].lam.Strtptatr,Endptatr:h[O].lam.Endptatr,Length:h[O].lam.Length.toString(),LinUnit:h[O].lam.LinUnit,Startmrkr:h[O].lam.Startmrkr,Endmrkr:h[O].lam.Endmrkr,Mrkdisst:h[O].lam.Mrkdisst,Mrkdisend:h[O].lam.Mrkdisend,MrkrUnit:h[O].lam.MrkrUnit,LamDer:h[O].lam.LamDer};u.EqLAM.push(H)}var _=h[O].classItems;if(_){if(_.length>0){for(var Q=0;Q<_.length;Q++){var Z={Equi:h[O].Equnr,Classtype:_[Q].Classtype,Class:_[Q].Class,Clstatus1:_[Q].Clstatus1,Artxt:_[Q].ClassTypeDesc};u.EqClass.push(Z)}}}var j=h[O].characteristics;if(j){if(j.length>0){for(var G=0;G<j.length;G++){var J={Equi:h[O].Equnr,Atnam:j[G].Atnam,Textbez:j[G].Textbez,Atwrt:j[G].Atwrt,Class:j[G].Class};u.EqVal.push(J)}}}var R=h[O].linearChar;if(R){if(R.length>0){var B=$.map(R,function(e){return $.extend(true,{},e)});for(var x=0;x<B.length;x++){delete B[x].linCharEnable;B[x].Equi=h[O].Equnr;u.EqLAMCH.push(B[x])}}}}}if(V.length>0){for(var X=0;X<V.length;X++){var Y={Point:V[X].Mspoint,Equnr:V[X].Equnr,Eqktx:V[X].Eqktx,Tplnr:V[X].Tplnr,Floctxt:V[X].Pltxt,Mptyp:V[X].Mptyp,Mpttx:V[X].Mpttx,Codgr:V[X].Codgr,Codgrtxt:V[X].Codgrtxt,ObtypMs:V[X].ObtypMs,Objtypetxt:V[X].Txt,AtnamMs:V[X].AtnamMs,Atbez:V[X].Atbez,Mseh6:V[X].Mseh6,Msehl:V[X].Msehl,Indct:V[X].Indct,Cdsuf:V[X].Cdsuf,Cjumc:V[X].Cjumc,Desir:V[X].Desir,Pyeac:V[X].Pyeac,Mrmin:V[X].Mrmin,Mrmax:V[X].Mrmax,Pttxt:V[X].Pttxt,Psort:V[X].Psort,Inact:V[X].Inact,Decim:V[X].Decim.toString(),Locas:V[X].Locas,Maktx:V[X].Maktx,Begru:V[X].Begru,Begtx:V[X].Begtx,Expon:V[X].Expon,Mrngu:V[X].Mrngu,Dstxt:V[X].Dstxt,Indrv:V[X].Indrv,IsMenu:V[X].menuAction};if(V[X].viewParameter==="create"){Y.Type=true}u.MSPoint.push(Y);if(V[X].lam){var ee={Mspoint:V[X].Mspoint,Lrpid:V[X].lam.Lrpid,Strtptatr:V[X].lam.Strtptatr,Endptatr:V[X].lam.Endptatr,Length:V[X].lam.Length.toString(),LinUnit:V[X].lam.LinUnit,Startmrkr:V[X].lam.Startmrkr,Endmrkr:V[X].lam.Endmrkr,Mrkdisst:V[X].lam.Mrkdisst,Mrkdisend:V[X].lam.Mrkdisend,MrkrUnit:V[X].lam.MrkrUnit,LamDer:V[X].lam.LamDer};u.MSLAM.push(ee)}var te=V[X].classItems;if(te){if(te.length>0){for(var ae=0;ae<te.length;ae++){var re={Mspoint:V[X].Mspoint,Classtype:te[ae].Classtype,Class:te[ae].Class,Clstatus1:te[ae].Clstatus1,Artxt:te[ae].ClassTypeDesc};u.MSClass.push(re)}}}var ne=V[X].characteristics;if(ne){if(ne.length>0){for(var le=0;le<ne.length;le++){var ie={Mspoint:V[X].Mspoint,Atnam:ne[le].Atnam,Textbez:ne[le].Textbez,Atwrt:ne[le].Atwrt,Class:ne[le].Class};u.MSVal.push(ie)}}}}}if(E.length>0){for(var se=0;se<E.length;se++){var oe={Warpl:E[se].Warpl,Abrho:E[se].Abrho,Hunit:E[se].Hunit,Mptyp:E[se].Mptyp,Wptxt:E[se].Wptxt,Stich:E[se].Stich.toString(),Fabkl:E[se].Fabkl,FabklDesc:E[se].FabklDesc,Sfakt:E[se].Sfakt,Andor:l.parseValue(E[se].Andor),Mehrfach:l.parseValue(E[se].Mehrfach),Strat:E[se].Strat,StratDesc:E[se].StratDesc,Wset:E[se].Wset,Startdate:l._formatDate(E[se].Stadt),Unitc:E[se].Unitc,Szaeh:E[se].Szaeh,PointStp:E[se].Mpcycleno,Vspos:E[se].Vspos,Topos:E[se].Topos,Vsneg:E[se].Vsneg,Toneg:E[se].Toneg,Horiz:E[se].Horiz,CallConf:E[se].CallConf,PlanSort:E[se].PlanSort,Begru:E[se].Begru,IsMenu:E[se].menuAction};if(E[se].viewParameter==="create"){oe.Type=true}u.MPLAN.push(oe);var ce=E[se].itemModel;if(ce){for(var ue=0;ue<ce.length;ue++){var de={Mplan:E[se].Warpl,Qmart:ce[ue].Qmart,Qmartx:ce[ue].nTypeTxt,PlntMi:ce[ue].Werks,Planningplantdes:ce[ue].Planningplantdes,IngrpMi:ce[ue].Ingrp,Plannergrpdesc:ce[ue].Innam,Pstxt:ce[ue].Pstxt,WergwMi:ce[ue].WergwMi,ArbpMi:ce[ue].ArbpMi,Auart:ce[ue].Auart,Ordertypedesc:ce[ue].oTypeTxt,Bautl:ce[ue].AsmblyOb,Cycleseq:ce[ue].Cycleseq,Equnr:ce[ue].Equnr,Equipdesc:ce[ue].Eqktx,TplnrMi:ce[ue].Tplnr,Flocdesc:ce[ue].Pltxt,Mitemnumb:ce[ue].Mitemnumb,PlnnrMi:ce[ue].PlnnrMi,PlntyMi:ce[ue].PlntyMi,PlnalMi:ce[ue].PlnalMi,SwerkMil:ce[ue].SwerkMil,Name1:ce[ue].Name1,StortMil:ce[ue].StortMil,Locationdesc:ce[ue].StortMilTxt,MsgrpIl:ce[ue].MsgrpIl,BeberMil:ce[ue].BeberMil,Fing:ce[ue].Fing,ArbplIl:ce[ue].ArbplIl,Workcenterdesc:ce[ue].ArbplIlTxt,AbckzIl:ce[ue].AbckzIl,Abctx:ce[ue].Abctx,EqfnrIl:ce[ue].EqfnrIl};if(E[se].viewParameter==="create"){de.Type=true}u.MPItem.push(de);if(ce[ue].lam){var fe={Mplan:E[se].Warpl,Mitemnumb:ce[ue].lam.Mitemnumb,Lrpid:ce[ue].lam.Lrpid,Mspoint:ce[ue].Mspoint,Strtptatr:ce[ue].lam.Strtptatr,Endptatr:ce[ue].lam.Endptatr,Length:ce[ue].lam.Length.toString(),LinUnit:ce[ue].lam.LinUnit,Startmrkr:ce[ue].lam.Startmrkr,Endmrkr:ce[ue].lam.Endmrkr,Mrkdisst:ce[ue].lam.Mrkdisst,Mrkdisend:ce[ue].lam.Mrkdisend,MrkrUnit:ce[ue].lam.MrkrUnit,LamDer:ce[ue].lam.LamDer};u.MPLAM.push(fe)}}}var pe=E[se].ObjListItems;if(pe){for(var P=0;P<pe.length;P++){var ge={AsmblyOb:pe[P].AsmblyOb,EquiObj:pe[P].EquiObj,FlocObj:pe[P].FlocObj,MatnrObj:pe[P].MatnrObj,Mitemnumb:pe[P].Mitemnumb,Mplan:pe[P].Warpl};u.MPOBList.push(ge)}}var Se=E[se].cycleModel;if(Se){for(var me=0;me<Se.length;me++){var he={Mplan:E[se].Warpl,Point:Se[me].Point,PointTxt:Se[me].Psort,Offset:Se[me].Offset,Ofsetunit:Se[me].Ofsetunit,PakText:Se[me].PakText,Zeieh:Se[me].Zeieh,Zykl1:Se[me].Zykl1,Cycleseqi:Se[me].Cycleseqi,Mpcycleno:Se[me].Mpcycleno};u.MPCycle.push(he)}}var te=E[se].classItems;if(te){if(te.length>0){for(var ae=0;ae<te.length;ae++){var re={Mplan:E[se].Warpl,Classtype:te[ae].Classtype,Class:te[ae].Class,Clstatus1:te[ae].Clstatus1};u.ClassMpl.push(re)}}}var ne=E[se].characteristics;if(ne){if(ne.length>0){for(var le=0;le<ne.length;le++){var ie={Mplan:E[se].Warpl,Atnam:ne[le].Atnam,Textbez:ne[le].Textbez,Atwrt:ne[le].Atwrt,Class:ne[le].Class};u.ValuaMpl.push(ie)}}}}}var Me=l.getView().getModel("mainView");var Ve=Me.getData();Ve.tableBusy=true;Me.setData(Ve);var Ee=function(a){if(a.FuncLoc){if(a.FuncLoc.results.length>0){o=[];if(a.FuncLoc.results.length>0){for(var i=0;i<a.FuncLoc.results.length;i++){var s=a.FuncLoc.results[i];var u={intlAddr:[],altlbl:[],classItems:[],characteristics:[],linearChar:[],FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};u.Functionallocation=s.Tplnr;u.Flocdescription=s.Txtmi;u.EditMask=s.EditMask;u.Hierarchy=s.Hierarchy;u.Floccategory=s.Fltyp;u.FlocCategoryDesc=s.Flttx;u.Strucindicator=s.TplkzFlc;u.StrucIndicatorDesc=s.Tplxt;u.SupFunctionallocation=s.Tplma;u.SupFlocdescription=s.Supflocdesc;u.Stattext=s.Stattext;u.StsmEqui=s.StsmFloc;u.StsmEquiDesc=s.Statproftxt;u.UstwEqui=s.UstwFloc;u.UswoEqui=s.UswoFloc;u.UstaEqui=s.UstaFloc;u.TechnicalObjectTyp=s.Eqart;u.Description=s.Eartx;u.Maintplant=s.Swerk;u.MaintplantDesc=s.Plantname;u.Location=s.StorFloc;u.Locationdesc=s.Locationdesc;u.BeberFl=s.BeberFl;u.Fing=s.Fing;u.Tele=s.Tele;u.Arbpl=s.Arbplfloc;u.Ktext=s.Workcenterdesc;u.WcWerks=s.Wergwfloc;u.MainArbpl=s.Gewrkfloc;u.MainKtext=s.MainWcDesc;u.MainWerks=s.MainWcPlant;u.Abckz=s.Abckzfloc;u.Abctx=s.Abctx;u.Bukrs=s.Bukrsfloc;u.Butxt=s.Butxt;u.City=s.City;u.Kostl=s.KostFloc;u.Kokrs=s.KokrFloc;u.Mctxt=s.Contareaname;u.Werks=s.PlntFloc;u.Planningplantdes=s.Planningplantdes;u.Ingrp=s.Ingrp;u.Innam=s.Plannergrpdesc;u.ConstrType=s.Submtiflo;u.ConstructionDesc=s.Constdes;u.menuAction=s.IsMenu;u.Adrnr=s.Adrnr;u.Adrnri=s.Adrnri;u.Modeldesc=s.Modeldesc;u.Modelref=s.Modelref;u.Modelrver=s.Modelrver;u.Modelext=s.Modelext;u.Modelname=s.Modelname;u.Modelver=s.Modelver;if(s.Type===true){u.viewParameter="create"}if(s.Type===false){u.viewParameter="change";if(u.Floccategory===""||u.Floccategory===undefined){u.FlocCatEnabled=true}else{u.FlocCatEnabled=false}if(u.Strucindicator===""||u.Strucindicator===undefined){u.StrucIndEnabled=true}else{u.StrucIndEnabled=false}u.FunctionalLocEnabled=false}if(s.Swerk!==""){u.BukrsEnabled=false}else{u.MaintplantEnabled=true;u.BukrsEnabled=true}if(a.FLLAM.results.length>0){var S=a.FLLAM.results;for(var M=0;M<S.length;M++){if(S[M].Funcloc===u.Functionallocation){var V={Funcloc:S[M].Funcloc,Lrpid:S[M].Lrpid,LrpidDesc:S[M].LrpDescr,Strtptatr:S[M].Strtptatr,Endptatr:S[M].Endptatr,Length:parseInt(S[M].Length!==""?S[M].Length:"0"),LinUnit:S[M].LinUnit,LinUnitDesc:S[M].Uomtext,Startmrkr:S[M].Startmrkr,Endmrkr:S[M].Endmrkr,Mrkdisst:S[M].Mrkdisst,Mrkdisend:S[M].Mrkdisend,MrkrUnit:S[M].MrkrUnit,LamDer:S[M].LamDer};u.lam=V;break}}}if(a.FLAddr){if(a.FLAddr.results){var E=a.FLAddr.results;if(E){if(E.length>0){for(var b=0;b<E.length;b++){if(u.Functionallocation===E[b].Funcloc){var C=sap.ui.getCore().getModel("flocAddressView");var L=C.getData();var T=true;var A,F;if(L.length>0){for(var P=0;P<L.length;P++){if(u.Functionallocation===L[P].Functionallocation){T=false;F=P;break}}}if(T&&u.SupFunctionallocation!==""&&u.SupFunctionallocation!==undefined){A={Functionallocation:u.Functionallocation,IsEditable:E[b].IsEditable};L.push(A);C.setData(L)}if(!T&&u.SupFunctionallocation!==""&&u.SupFunctionallocation!==undefined){L[F].Functionallocation=u.Functionallocation;L[F].IsEditable=u.IsEditable;C.setData(L)}u.Title=E[b].Titletxt?E[b].Titletxt:"";u.TitleCode=E[b].Title?E[b].Title:"";u.Name1=E[b].Name1?E[b].Name1:"";u.Name2=E[b].Name2?E[b].Name2:"";u.Name3=E[b].Name3?E[b].Name3:"";u.Name4=E[b].Name4?E[b].Name4:"";u.Sort1=E[b].Sort1?E[b].Sort1:"";u.Sort2=E[b].Sort2?E[b].Sort2:"";u.NameCo=E[b].NameCo?E[b].NameCo:"";u.PostCod1=E[b].PostCod1?E[b].PostCod1:"";u.City1=E[b].City1?E[b].City1:"";u.Building=E[b].Building?E[b].Building:"";u.Floor=E[b].Floor?E[b].Floor:"";u.Roomnum=E[b].Roomnum?E[b].Roomnum:"";u.Strsuppl1=E[b].Strsuppl1?E[b].Strsuppl1:"";u.Strsuppl2=E[b].Strsuppl2?E[b].Strsuppl2:"";u.Strsuppl3=E[b].Strsuppl3?E[b].Strsuppl3:"";u.AddrLocation=E[b].Location?E[b].Location:"";u.RefPosta=E[b].RPostafl?E[b].RPostafl:"";u.Landx=E[b].Landx?E[b].Landx:"";u.TimeZone=E[b].TimeZone?E[b].TimeZone:"";u.Region=E[b].RPostFl?E[b].RPostFl:"";u.ReigonDesc=E[b].Regiotxt?E[b].Regiotxt:""}}}else{u.Title=u.Title?u.Title:"";u.TitleCode=u.TitleCode?u.TitleCode:"";u.Name1=u.Name1?u.Name1:"";u.Name2=u.Name2?u.Name2:"";u.Name3=u.Name3?u.Name3:"";u.Name4=u.Name4?u.Name4:"";u.Sort1=u.Sort1?u.Sort1:"";u.Sort2=u.Sort2?u.Sort2:"";u.NameCo=u.NameCo?u.NameCo:"";u.PostCod1=u.PostCod1?u.PostCod1:"";u.City1=u.City1?u.City1:"";u.Building=u.Building?u.Building:"";u.Floor=u.Floor?u.Floor:"";u.Roomnum=u.Roomnum?u.Roomnum:"";u.Strsuppl1=u.Strsuppl1?u.Strsuppl1:"";u.Strsuppl2=u.Strsuppl2?u.Strsuppl2:"";u.Strsuppl3=u.Strsuppl3?u.Strsuppl3:"";u.AddrLocation=u.AddrLocation?u.AddrLocation:"";u.RefPosta=u.RefPosta?u.RefPosta:"";u.Landx=u.Landx?u.Landx:"";u.TimeZone=u.TimeZone?u.TimeZone:"";u.Region=u.Region?u.Region:"";u.RegionDesc=u.RegionDesc?u.RegionDesc:""}}}}var v=a.FLAddrI.results;if(v.length>0){for(var D=0;D<v.length;D++){if(v[D].Funcloc===u.Functionallocation){v[D].AdNationEnable=false;v[D].City1iVS="None";v[D].StreetiVS="None";u.intlAddr.push(v[D])}}}var y=a.FLALTLBEL.results;if(y.length>0){for(var I=0;I<y.length;I++){if(y[I].Funcloc===u.Functionallocation){var k={Funcloc:y[I].Funcloc,AltAlkey:y[I].AltAlkey,Altxt:y[I].Altxt,AltStrno:y[I].AltStrno,AltTplkz:y[I].AltTplkz,Tplxt:y[I].Tplxt,Name1i:y[I].Editm,Actvs:y[I].Actvs,AltPrkey:y[I].AltPrkey,AltReuse:y[I].AltReuse,enableLblSys:false,enableAltLbl:true,enableStrInd:true,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};u.altlbl.push(k)}}}if(a.FLClass){var N=a.FLClass.results;if(N){if(N.length>0){for(var q=0;q<N.length;q++){if(u.Functionallocation===N[q].Funcloc){N[q].ctEnable=false;N[q].classEnable=false;N[q].ClassTypeDesc=N[q].Artxt;delete N[q].Artxt;N[q].ClassDesc=N[q].Kltxt;delete N[q].Kltxt;delete N[q].Changerequestid;delete N[q].Clint;delete N[q].Service;u.classItems.push(N[q])}}u.charNewButton=true;if(l.class&&l.class.getId().includes("detailFloc")===true){l.class.setModel(new t(u.classItems))}}}}if(a.FLVal){var x=a.FLVal.results;if(x){if(x.length>0){for(var w=0;w<x.length;w++){if(u.Functionallocation===x[w].Funcloc){x[w].cNameEnable=false;x[w].Textbz=x[w].Atwtb;delete x[w].Ataut;delete x[w].Ataw1;delete x[w].Atawe;delete x[w].Atcod;delete x[w].Atflb;delete x[w].Atflv;delete x[w].Atimb;delete x[w].Atsrt;delete x[w].Atvglart;delete x[w].Atzis;delete x[w].Changerequestid;delete x[w].CharName;delete x[w].Charid;delete x[w].Classtype;delete x[w].Service;delete x[w].Valcnt;x[w].slNo=w+1;x[w].flag=x[w].Class+"-"+x[w].slNo;u.characteristics.push(x[w])}}for(var D=0;D<u.characteristics.length;D++){var R=1;for(var I=0;I<u.characteristics.length;I++){if(D===I){continue}if(u.characteristics[I].Atnam===u.characteristics[D].Atnam&&u.characteristics[I].Class===u.characteristics[D].Class){R++}}if(R>1){u.characteristics[D].charDltEnable=true}else{u.characteristics[D].charDltEnable=false}if(u.characteristics[D].Atein===true){u.characteristics[D].charAddEnable=false}}if(l.char&&l.char.getId().includes("detailFloc")===true){l.char.setModel(new t(u.characteristics))}}}}if(a.FLLAMCH){var B=a.FLLAMCH.results;if(B){if(B.length>0){for(var O=0;O<B.length;O++){if(u.Functionallocation===B[O].Funcloc){B[O].linCharEnable=true;u.linearChar.push(B[O])}}}}}if(u.UstaEqui){Ve.visible=true}else{Ve.visible=false}Me.setData(Me);o.push(u)}d.setData(o);var W=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var U=0;U<a.FuncLoc.results.length;U++){var s=a.FuncLoc.results[U];for(var D=0;D<W.length;D++){if(s.Tplnr===W[D].key){var z=W[D].DOI;if(s.Swerki===""){z[0].maintenance=false;z[0].instLoc=false;z[0].SupFlVal="";z[0].currentVal="";z[0].targetVal=""}else if(s.Swerki==="D"){z[0].maintenance=true;z[0].instLoc=false;z[0].SupFlVal="";z[0].currentVal=s.Swerk;z[0].targetVal=s.Swerk}else{z[0].maintenance=false;z[0].instLoc=true;z[0].SupFlVal=s.Swerk;z[0].currentVal="";z[0].targetVal=s.Swerk}if(s.Storti===""){z[1].maintenance=false;z[1].instLoc=false;z[1].SupFlVal="";z[1].currentVal="";z[1].targetVal=""}else if(s.Storti==="D"){z[1].maintenance=true;z[1].instLoc=false;z[1].SupFlVal="";z[1].currentVal=s.StorFloc;z[1].targetVal=s.StorFloc}else{z[1].maintenance=false;z[1].instLoc=true;z[1].SupFlVal=s.StorFloc;z[1].currentVal="";z[1].targetVal=s.StorFloc}if(s.Beberi===""){z[2].maintenance=false;z[2].instLoc=false;z[2].SupFlVal="";z[2].currentVal="";z[2].targetVal=""}else if(s.Beberi==="D"){z[2].maintenance=true;z[2].instLoc=false;z[2].SupFlVal="";z[2].currentVal=s.BeberFl;z[2].targetVal=s.BeberFl}else{z[2].maintenance=false;z[2].instLoc=true;z[2].SupFlVal=s.BeberFl;z[2].currentVal="";z[2].targetVal=s.BeberFl}if(s.Ppsidi===""){z[3].maintenance=false;z[3].instLoc=false;z[3].SupFlVal="";z[3].currentVal="";z[3].targetVal=""}else if(s.Ppsidi==="D"){z[3].maintenance=true;z[3].instLoc=false;z[3].SupFlVal="";z[3].currentVal=s.Arbplfloc;z[3].targetVal=s.Arbplfloc}else{z[3].maintenance=false;z[3].instLoc=true;z[3].SupFlVal=s.Arbplfloc;z[3].currentVal="";z[3].targetVal=s.Arbplfloc}if(s.Abckzi===""){z[4].maintenance=false;z[4].instLoc=false;z[4].SupFlVal="";z[4].currentVal="";z[4].targetVal=""}else if(s.Abckzi==="D"){z[4].maintenance=true;z[4].instLoc=false;z[4].SupFlVal="";z[4].currentVal=s.Abckzfloc;z[4].targetVal=s.Abckzfloc}else{z[4].maintenance=false;z[4].instLoc=true;z[4].SupFlVal=s.Abckzfloc;z[4].currentVal="";z[4].targetVal=s.Abckzfloc}if(s.Bukrsi===""){z[5].maintenance=false;z[5].instLoc=false;z[5].SupFlVal="";z[5].currentVal="";z[5].targetVal=""}else if(s.Bukrsi==="D"){z[5].maintenance=true;z[5].instLoc=false;z[5].SupFlVal="";z[5].currentVal=s.Bukrsfloc;z[5].targetVal=s.Bukrsfloc}else{z[5].maintenance=false;z[5].instLoc=true;z[5].SupFlVal=s.Bukrsfloc;z[5].currentVal="";z[5].targetVal=s.Bukrsfloc}if(s.Kostli===""){z[6].maintenance=false;z[6].instLoc=false;z[6].SupFlVal="";z[6].currentVal="";z[6].targetVal=""}else if(s.Kostli==="D"){z[6].maintenance=true;z[6].instLoc=false;z[6].SupFlVal="";z[6].currentVal=s.KostFloc;z[6].targetVal=s.KostFloc}else{z[6].maintenance=false;z[6].instLoc=true;z[6].SupFlVal=s.KostFloc;z[6].currentVal="";z[6].targetVal=s.KostFloc}if(s.Kokrsi===""){z[7].maintenance=false;z[7].instLoc=false;z[7].SupFlVal="";z[7].currentVal="";z[7].targetVal=""}else if(s.Kokrsi==="D"){z[7].maintenance=true;z[7].instLoc=false;z[7].SupFlVal="";z[7].currentVal=s.KokrFloc;z[7].targetVal=s.KokrFloc}else{z[7].maintenance=false;z[7].instLoc=true;z[7].SupFlVal=s.KokrFloc;z[7].currentVal="";z[7].targetVal=s.KokrFloc}if(s.Iwerki===""){z[8].maintenance=false;z[8].instLoc=false;z[8].SupFlVal="";z[8].currentVal="";z[8].targetVal=""}else if(s.Iwerki==="D"){z[8].maintenance=true;z[8].instLoc=false;z[8].SupFlVal="";z[8].currentVal=s.PlntFloc;z[8].targetVal=s.PlntFloc}else{z[8].maintenance=false;z[8].instLoc=true;z[8].SupFlVal=s.PlntFloc;z[8].currentVal="";z[8].targetVal=s.PlntFloc}if(s.Ingrpi===""){z[9].maintenance=false;z[9].instLoc=false;z[9].SupFlVal="";z[9].currentVal="";z[9].targetVal=""}else if(s.Ingrpi==="D"){z[9].maintenance=true;z[9].instLoc=false;z[9].SupFlVal="";z[9].currentVal=s.Ingrp;z[9].targetVal=s.Ingrp}else{z[9].maintenance=false;z[9].instLoc=true;z[9].SupFlVal=s.Ingrp;z[9].currentVal="";z[9].targetVal=s.Ingrp}if(s.Lgwidi===""){z[10].maintenance=false;z[10].instLoc=false;z[10].SupFlVal="";z[10].currentVal="";z[10].targetVal=""}else if(s.Lgwidi==="D"){z[10].maintenance=true;z[10].instLoc=false;z[10].SupFlVal="";z[10].currentVal=s.Gewrkfloc;z[10].targetVal=s.Gewrkfloc}else{z[10].maintenance=false;z[10].instLoc=true;z[10].SupFlVal=s.Gewrkfloc;z[10].currentVal="";z[10].targetVal=s.Gewrkfloc}if(s.Adrnri===""){z[12].maintenance=false;z[12].instLoc=false;z[12].SupFlVal="";z[12].currentVal="";z[12].targetVal=""}else if(s.Adrnri==="D"){z[12].maintenance=true;z[12].instLoc=false;z[12].SupFlVal="";z[12].currentVal=s.Adrnr;z[12].targetVal=s.Adrnr}else{z[12].maintenance=false;z[12].instLoc=true;z[12].SupFlVal=s.Adrnr;z[12].currentVal="";z[12].targetVal=s.Adrnr}}}}for(var D=0;D<d.getData().length;D++){if(m===d.getData()[D].Functionallocation){var K="/"+D;var H=new t;H.setData(d.getProperty(K));l.lam.setModel(H,"AIWLAM");return}}}}}if(a.Equipment){if(a.Equipment.results.length>0){o=[];for(var _=0;_<a.Equipment.results.length;_++){var u=a.Equipment.results[_];c={intlAddr:[],classItems:[],characteristics:[],linearChar:[],charNewButton:false,attachmentCount:"0",Guids:"",EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",ConstrTypeMaxL:0,charValueMaxL:0};c.Equnr=u.Equnr;c.Eqktx=u.Txtmi;c.EquipmentCatogory=u.Eqtyp;c.EquipCatgDescription=u.Etytx;c.Maintplant=u.Swerk;c.MaintplantDesc=u.Name1;c.SuperordinateEquip=u.HequEeqz;c.SuperordinateEquipDesc=u.SuperordEqDes;c.Bukrs=u.BukrEilo;c.Butxt=u.Butxt;c.Location=u.StorEilo;c.Locationdesc=u.Locationdesc;c.Abckz=u.AbckEilo;c.Abctx=u.Abctx;c.Kostl=u.KostEilo;c.Kokrs=u.KokrEilo;c.Mctxt=u.Contareaname;c.Answt=u.Answt;c.Ansdt=r.getDateFormat(u.Ansdt);c.Waers=u.Waers;c.Werks=u.PplaEeqz;c.Planningplantdes=u.Planningplantdes;c.Ingrp=u.IngrEeqz;c.Innam=u.Plannergrpdesc;c.Arbpl=u.ArbpEilo;c.Ktext=u.Workcenterdesc;c.WcWerks=u.WorkCenterPlant;c.MainArbpl=u.ArbpEeqz;c.MainKtext=u.MainWcDesc;c.MainWerks=u.MainWcPlant;c.BeberFl=u.BebeEilo;c.Fing=u.Fing;c.Tele=u.Tele;c.Herst=u.Herst;c.TechnicalObjectTyp=u.Eqart;c.Description=u.Eartx;c.Typbz=u.Typbz;c.ConstrType=u.SubmEeqz;c.ConstructionDesc=u.Constdesc;c.TechIdNum=u.TidnEeqz;c.Serge=u.Serge;c.MapaEeqz=u.MapaEeqz;c.EquipPosition=u.HeqnEeqz;c.Stattext=u.Stattext;c.StsmEqui=u.StsmEqui;c.StsmEquiDesc=u.Statproftxt;c.UstwEqui=u.UstwEqui;c.UswoEqui=u.UswoEqui;c.UstaEqui=u.UstaEqui;c.menuAction=u.IsMenu;c.Adrnr=u.Adrnr;c.Adrnri=u.Adrnri;c.Fhmkz=u.Fhmkz;c.Funcid=u.Funcid;c.Frcfit=u.Frcfit;c.Frcrmv=u.Frcrmv;if(a.EqPRT){var Q=a.EqPRT.results[_];if(Q){c.PlanvPrt=Q.PlanvPrt;c.SteufPrt=Q.SteufPrt;c.KtschPrt=Q.KtschPrt;c.Ewformprt=Q.Ewformprt;c.PlanvPrtText=h[_].PlanvPrtText;c.SteufPrtText=h[_].SteufPrtText;c.KtschPrtText=h[_].KtschPrtText;c.EwformprtText=h[_].EwformprtText;c.SteufRef=Q.SteufRef;c.KtschRef=Q.KtschRef;c.EwformRef=Q.EwformRef}else{c.PlanvPrt="";c.SteufPrt="";c.KtschPrt="";c.Ewformprt="";c.PlanvPrtText="";c.SteufPrtText="";c.KtschPrtText="";c.EwformprtText="";c.SteufRef=false;c.KtschRef=false;c.EwformRef=false}}if(a.EqLAM.results.length>0){var Z=a.EqLAM.results;for(var M=0;M<Z.length;M++){if(Z[M].Equi===u.Equnr){var j={Equi:Z[M].Equi,Lrpid:Z[M].Lrpid,LrpidDesc:Z[M].LrpDescr,Strtptatr:Z[M].Strtptatr,Endptatr:Z[M].Endptatr,Length:parseInt(Z[M].Length!==""?Z[M].Length:"0"),LinUnit:Z[M].LinUnit,LinUnitDesc:Z[M].Uomtext,Startmrkr:Z[M].Startmrkr,Endmrkr:Z[M].Endmrkr,Mrkdisst:Z[M].Mrkdisst,Mrkdisend:Z[M].Mrkdisend,MrkrUnit:Z[M].MrkrUnit,LamDer:Z[M].LamDer};c.lam=j;break}}}if(u.Type===true){c.viewParameter="create"}if(u.Type===false){c.viewParameter="change";c.EqunrEnabled=false;if(c.EquipmentCatogory===""||c.EquipmentCatogory===undefined){c.EquipCatEnabled=true}else{c.EquipCatEnabled=false}if(c.Maintplant===""||c.Maintplant===undefined){c.MaintplantEnabled=true}else{c.MaintplantEnabled=false}if(c.Tplnr===""||c.Tplnr===undefined){c.TplnrEnabled=true}else{c.TplnrEnabled=false}}if(u.Swerk!==""){c.BukrsEnabled=false}else{c.BukrsEnabled=true}if(u.Eqtyp!=="P"){c.Tplnr=u.TplnEilo;c.Pltxt=u.Flocdescription;c.TplnrEnabled=true}else{c.Tplnr="";c.Pltxt="";c.TplnrEnabled=false}if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined){c.TplnrEnabled=false;c.SuperordinateEquipEnabled=true}if(c.Tplnr!==""&&c.Tplnr!==undefined){c.TplnrEnabled=true;c.SuperordinateEquipEnabled=false}if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){c.MaintplantEnabled=false}else{c.MaintplantEnabled=true}if(a.EqAddr){if(a.EqAddr.results){var E=a.EqAddr.results;if(E){if(E.length>0){for(var G=0;G<E.length;G++){if(c.Equnr===E[G].Equi){var J=sap.ui.getCore().getModel("equiAddressView");var X=J.getData();var Y=true;var ee,te;if(X.length>0){for(var ae=0;ae<X.length;ae++){if(u.Equnr===X[ae].Equnr){Y=false;te=ae;break}}}if(Y===true){if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){ee={Equnr:u.Equnr,Tplnr:c.Tplnr,IsEditable:E[G].IsEditable};X.push(ee);J.setData(X)}}if(Y===false){if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){X[te].Equnr=u.Equnr;X[te].Tplnr=u.Tplnr;X[te].IsEditable=u.IsEditable;J.setData(X)}}c.IsEditable=E[G].IsEditable;c.Title=E[G].Titletxt?E[G].Titletxt:"";c.TitleCode=E[G].Title?E[G].Title:"";c.Name1=E[G].Name1?E[G].Name1:"";c.Name2=E[G].Name2?E[G].Name2:"";c.Name3=E[G].Name3?E[G].Name3:"";c.Name4=E[G].Name4?E[G].Name4:"";c.Sort1=E[G].Sort1?E[G].Sort1:"";c.Sort2=E[G].Sort2?E[G].Sort2:"";c.NameCo=E[G].NameCo?E[G].NameCo:"";c.PostCod1=E[G].PostCod1?E[G].PostCod1:"";c.City1=E[G].City1?E[G].City1:"";c.Building=E[G].Building?E[G].Building:"";c.Floor=E[G].Floor?E[G].Floor:"";c.Roomnum=E[G].Roomnum?E[G].Roomnum:"";c.AddrLocation=E[G].Location?E[G].Location:"";c.Strsuppl1=E[G].Strsuppl1?E[G].Strsuppl1:"";c.Strsuppl2=E[G].Strsuppl2?E[G].Strsuppl2:"";c.Strsuppl3=E[G].Strsuppl3?E[G].Strsuppl3:"";c.RefPosta=E[G].RefPosta?E[G].RefPosta:"";c.Landx=E[G].Landx?E[G].Landx:"";c.TimeZone=E[G].TimeZone?E[G].TimeZone:"";c.Region=E[G].RfePost?E[G].RfePost:"";c.RegionDesc=E[G].Regiotxt?E[G].Regiotxt:""}}}else{c.Title=c.Title?c.Title:"";c.TitleCode=c.TitleCode?c.TitleCode:"";c.Name1=c.Name1?c.Name1:"";c.Name2=c.Name2?c.Name2:"";c.Name3=c.Name3?c.Name3:"";c.Name4=c.Name4?c.Name4:"";c.Sort1=c.Sort1?c.Sort1:"";c.Sort2=c.Sort2?c.Sort2:"";c.NameCo=c.NameCo?c.NameCo:"";c.PostCod1=c.PostCod1?c.PostCod1:"";c.City1=c.City1?c.City1:"";c.Building=c.Building?c.Building:"";c.Floor=c.Floor?c.Floor:"";c.Roomnum=c.Roomnum?c.Roomnum:"";c.Strsuppl1=c.Strsuppl1?c.Strsuppl1:"";c.Strsuppl2=c.Strsuppl2?c.Strsuppl2:"";c.Strsuppl3=c.Strsuppl3?c.Strsuppl3:"";c.AddrLocation=c.AddrLocation?c.AddrLocation:"";c.RefPosta=c.RefPosta?c.RefPosta:"";c.Landx=c.Landx?c.Landx:"";c.TimeZone=c.TimeZone?c.TimeZone:"";c.Region=c.Region?c.Region:"";c.RegionDesc=c.RegionDesc?c.RegionDesc:""}}}}var v=a.EqAddrI.results;if(v.length>0){for(var D=0;D<v.length;D++){if(v[D].Equi===c.Equnr){v[D].AdNationEnable=false;v[D].City1iVS="None";v[D].StreetiVS="None";c.intlAddr.push(v[D])}}}if(a.EqClass){var N=a.EqClass.results;if(N){if(N.length>0){for(var re=0;re<N.length;re++){if(c.Equnr===N[re].Equi){N[re].ctEnable=false;N[re].classEnable=false;N[re].ClassTypeDesc=N[re].Artxt;delete N[re].Artxt;N[re].ClassDesc=N[re].Kltxt;delete N[re].Kltxt;delete N[re].Changerequestid;delete N[re].Clint;delete N[re].Service;c.classItems.push(N[re])}}c.charNewButton=true;if(l.class&&l.class.getId().includes("detailEqui")===true){l.class.setModel(new t(c.classItems))}}}}if(a.EqVal){var x=a.EqVal.results;if(x){if(x.length>0){for(var ne=0;ne<x.length;ne++){if(c.Equnr===x[ne].Equi){x[ne].cNameEnable=false;x[ne].Textbz=x[ne].Atwtb;delete x[ne].Ataut;delete x[ne].Ataw1;delete x[ne].Atawe;delete x[ne].Atcod;delete x[ne].Atflb;delete x[ne].Atflv;delete x[ne].Atimb;delete x[ne].Atsrt;delete x[ne].Atvglart;delete x[ne].Atzis;delete x[ne].Changerequestid;delete x[ne].CharName;delete x[ne].Charid;delete x[ne].Classtype;delete x[ne].Service;delete x[ne].Valcnt;x[ne].slNo=ne+1;x[ne].flag=x[ne].Class+"-"+x[ne].slNo;c.characteristics.push(x[ne])}}for(var D=0;D<c.characteristics.length;D++){var R=1;for(var I=0;I<c.characteristics.length;I++){if(D===I){continue}if(c.characteristics[I].Atnam===c.characteristics[D].Atnam&&c.characteristics[I].Class===c.characteristics[D].Class){R++}}if(R>1){c.characteristics[D].charDltEnable=true}else{c.characteristics[D].charDltEnable=false}if(c.characteristics[D].Atein===true){c.characteristics[D].charAddEnable=false}}if(l.char&&l.char.getId().includes("detailEqui")===true){l.char.setModel(new t(c.characteristics))}}}}if(a.EqLAMCH){var B=a.EqLAMCH.results;if(B){if(B.length>0){for(var O=0;O<B.length;O++){if(u.Equnr===B[O].Equi){B[O].linCharEnable=true;u.linearChar.push(B[O])}}}}}if(c.UstaEqui){Ve.visible=true}else{Ve.visible=false}Me.setData(Ve);o.push(c)}f.setData(o);for(var le=0;le<f.getData().length;le++){if(m===f.getData()[le].Equnr){l.rowIndex="/"+le;var H=new t;var ie=f.getProperty(l.rowIndex);ie.Title=ie.Title?ie.Title:"";ie.TitleCode=ie.TitleCode?ie.TitleCode:"";ie.Name1=ie.Name1?ie.Name1:"";ie.Name2=ie.Name2?ie.Name2:"";ie.Name3=ie.Name3?ie.Name3:"";ie.Name4=ie.Name4?ie.Name4:"";ie.Sort1=ie.Sort1?ie.Sort1:"";ie.Sort2=ie.Sort2?ie.Sort2:"";ie.NameCo=ie.NameCo?ie.NameCo:"";ie.PostCod1=ie.PostCod1?ie.PostCod1:"";ie.City1=ie.City1?ie.City1:"";ie.Building=ie.Building?ie.Building:"";ie.Floor=ie.Floor?ie.Floor:"";ie.Roomnum=ie.Roomnum?ie.Roomnum:"";ie.Strsuppl1=ie.Strsuppl1?ie.Strsuppl1:"";ie.Strsuppl2=ie.Strsuppl2?ie.Strsuppl2:"";ie.Strsuppl3=ie.Strsuppl3?ie.Strsuppl3:"";ie.AddrLocation=ie.AddrLocation?ie.AddrLocation:"";ie.RefPosta=ie.RefPosta?ie.RefPosta:"";ie.Landx=ie.Landx?ie.Landx:"";ie.TimeZone=ie.TimeZone?ie.TimeZone:"";ie.Region=ie.Region?ie.Region:"";ie.RegionDesc=ie.RegionDesc?ie.RegionDesc:"";if(ie.Title!==""&&ie.Title!==undefined||ie.TitleCode!==""&&ie.TitleCode!==undefined||ie.Name1!==""&&ie.Name1!==undefined||ie.Name2!==""&&ie.Name2!==undefined||ie.Name3!==""&&ie.Name3!==undefined||ie.Name4!==""&&ie.Name4!==undefined||ie.Sort1!==""&&ie.Sort1!==undefined||ie.Sort2!==""&&ie.Sort2!==undefined||ie.NameCo!==""&&ie.NameCo!==undefined||ie.PostCod1!==""&&ie.PostCod1!==undefined||ie.City1!==""&&ie.City1!==undefined||ie.Building!==""&&ie.Building!==undefined||ie.Floor!==""&&ie.Floor!==undefined||ie.Roomnum!==""&&ie.Roomnum!==undefined||ie.AddrLocation!==""&&ie.AddrLocation!==undefined||ie.Strsuppl1!==""&&ie.Strsuppl1!==undefined||ie.Strsuppl2!==""&&ie.Strsuppl2!==undefined||ie.Strsuppl3!==""&&ie.Strsuppl3!==undefined||ie.TimeZone!==""&&ie.TimeZone!==undefined||ie.RefPosta!==""&&ie.RefPosta!==undefined||ie.Region!==""&&ie.Region!==undefined){ie.RefPostaLblReq=true;var se=l.getView().getModel("equiAddressView");var oe=se.getData();oe.enabled=ie.IsEditable;se.setData(oe)}H.setData(ie);l.getView().setModel(H,l.oModelName);l.lam.setModel(H,"AIWLAM");var ce=[H.getData()];var ue=$.map(ce,function(e){return $.extend(true,{},e)});var de=new t;de.setData(ue);l.getView().setModel(de,"SUP_EQUI_DATA");var fe=sap.ui.getCore().getModel("SUP_EQUI_DATA");var pe=fe.getData();var ge=true;for(var Se=0;Se<pe.length;Se++){if(ie.Equnr===pe[Se].Equnr){ge=false}}if(ge===true){if(ie.SuperordinateEquip!==""&&ie.SuperordinateEquip!==undefined||ie.Tplnr!==""&&ie.Tplnr!==undefined){pe.push(ue[0]);fe.setData(pe)}}Ve.tableBusy=false;Me.setData(Ve);return}}var me=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var U=0;U<a.Equipment.results.length;U++){var s=a.Equipment.results[U];for(var D=0;D<me.length;D++){if(s.Equnr===me[D].key){var z=me[D].DOI;if(s.Swerki===""){z[0].maintenance=false;z[0].instLoc=false;z[0].SupFlVal="";z[0].currentVal="";z[0].targetVal=""}else if(s.Swerki==="D"){z[0].maintenance=true;z[0].instLoc=false;z[0].SupFlVal="";z[0].currentVal=s.Swerk;z[0].targetVal=s.Swerk}else{z[0].maintenance=false;z[0].instLoc=true;z[0].SupFlVal=s.Swerk;z[0].currentVal="";z[0].targetVal=s.Swerk}if(s.Storti===""){z[1].maintenance=false;z[1].instLoc=false;z[1].SupFlVal="";z[1].currentVal="";z[1].targetVal=""}else if(s.Storti==="D"){z[1].maintenance=true;z[1].instLoc=false;z[1].SupFlVal="";z[1].currentVal=s.StorEilo;z[1].targetVal=s.StorEilo}else{z[1].maintenance=false;z[1].instLoc=true;z[1].SupFlVal=s.StorEilo;z[1].currentVal="";z[1].targetVal=s.StorEilo}if(s.Beberi===""){z[2].maintenance=false;z[2].instLoc=false;z[2].SupFlVal="";z[2].currentVal="";z[2].targetVal=""}else if(s.Beberi==="D"){z[2].maintenance=true;z[2].instLoc=false;z[2].SupFlVal="";z[2].currentVal=s.BebeEilo;z[2].targetVal=s.BebeEilo}else{z[2].maintenance=false;z[2].instLoc=true;z[2].SupFlVal=s.BebeEilo;z[2].currentVal="";z[2].targetVal=s.BebeEilo}if(s.Ppsidi===""){z[3].maintenance=false;z[3].instLoc=false;z[3].SupFlVal="";z[3].currentVal="";z[3].targetVal=""}else if(s.Ppsidi==="D"){z[3].maintenance=true;z[3].instLoc=false;z[3].SupFlVal="";z[3].currentVal=s.ArbpEilo;z[3].targetVal=s.ArbpEilo}else{z[3].maintenance=false;z[3].instLoc=true;z[3].SupFlVal=s.ArbpEilo;z[3].currentVal="";z[3].targetVal=s.ArbpEilo}if(s.Abckzi===""){z[4].maintenance=false;z[4].instLoc=false;z[4].SupFlVal="";z[4].currentVal="";z[4].targetVal=""}else if(s.Abckzi==="D"){z[4].maintenance=true;z[4].instLoc=false;z[4].SupFlVal="";z[4].currentVal=s.AbckEilo;z[4].targetVal=s.AbckEilo}else{z[4].maintenance=false;z[4].instLoc=true;z[4].SupFlVal=s.AbckEilo;z[4].currentVal="";z[4].targetVal=s.AbckEilo}if(s.Kostli===""){z[5].maintenance=false;z[5].instLoc=false;z[5].SupFlVal="";z[5].currentVal="";z[5].targetVal=""}else if(s.Kostli==="D"){z[5].maintenance=true;z[5].instLoc=false;z[5].SupFlVal="";z[5].currentVal=s.KostEilo;z[5].targetVal=s.KostEilo}else{z[5].maintenance=false;z[5].instLoc=true;z[5].SupFlVal=s.KostEilo;z[5].currentVal="";z[5].targetVal=s.KostEilo}if(s.Iwerki===""){z[6].maintenance=false;z[6].instLoc=false;z[6].SupFlVal="";z[6].currentVal="";z[6].targetVal=""}else if(s.Iwerki==="D"){z[6].maintenance=true;z[6].instLoc=false;z[6].SupFlVal="";z[6].currentVal=s.PplaEeqz;z[6].targetVal=s.PplaEeqz}else{z[6].maintenance=false;z[6].instLoc=true;z[6].SupFlVal=s.PplaEeqz;z[6].currentVal="";z[6].targetVal=s.PplaEeqz}if(s.Ingrpi===""){z[7].maintenance=false;z[7].instLoc=false;z[7].SupFlVal="";z[7].currentVal="";z[7].targetVal=""}else if(s.Ingrpi==="D"){z[7].maintenance=true;z[7].instLoc=false;z[7].SupFlVal="";z[7].currentVal=s.IngrEeqz;z[7].targetVal=s.IngrEeqz}else{z[7].maintenance=false;z[7].instLoc=true;z[7].SupFlVal=s.IngrEeqz;z[7].currentVal="";z[7].targetVal=s.IngrEeqz}if(s.Gewrki===""){z[8].maintenance=false;z[8].instLoc=false;z[8].SupFlVal="";z[8].currentVal="";z[8].targetVal=""}else if(s.Gewrki==="D"){z[8].maintenance=true;z[8].instLoc=false;z[8].SupFlVal="";z[8].currentVal=s.ArbpEeqz;z[8].targetVal=s.ArbpEeqz}else{z[8].maintenance=false;z[8].instLoc=true;z[8].SupFlVal=s.ArbpEeqz;z[8].currentVal="";z[8].targetVal=s.ArbpEeqz}if(s.Adrnri===""){z[10].maintenance=false;z[10].instLoc=false;z[10].SupFlVal="";z[10].currentVal="";z[10].targetVal=""}else if(s.Adrnri==="D"){z[10].maintenance=true;z[10].instLoc=false;z[10].SupFlVal="";z[10].currentVal=s.Adrnr;z[10].targetVal=s.Adrnr}else{z[10].maintenance=false;z[10].instLoc=true;z[10].SupFlVal=s.Adrnr;z[10].currentVal="";z[10].targetVal=s.Adrnr}}}}}}if(a.MSPoint){o=[];var he=a.MSPoint.results;if(he){if(he.length>0){for(var Ee=0;Ee<he.length;Ee++){c={classItems:[],characteristics:[],charNewButton:false,attachmentCount:"0",Guids:"",PttxtVS:"None",PttxtVST:"",ObtypMsVS:"None",ObtypMsVST:"",MptypVS:"None",MptypVST:"",AtnamMsVS:"None",AtnamMsVST:"",EqunrVS:"None",EqunrVST:"",TplnrVS:"None",TplnrVST:"",CodgrVS:"None",CodgrVST:"",MspointEnabled:true,ObtypMsEnabled:true,EqunrEnabled:true,TplnrEnabled:true,MptypEnabled:true,AtnamMsEnabled:true,valCodeStuffSel:false};c.Mspoint=he[Ee].Point;c.Psort=he[Ee].Psort;c.Pttxt=he[Ee].Pttxt;c.ObtypMs=he[Ee].ObtypMs;c.Txt=he[Ee].Objtypetxt;c.Equnr=he[Ee].Equnr;c.Eqktx=he[Ee].Eqktx;c.Tplnr=he[Ee].Tplnr;c.Pltxt=he[Ee].Floctxt;c.Mptyp=he[Ee].Mptyp;c.Mpttx=he[Ee].Mpttx;c.Inact=he[Ee].Inact;c.AtnamMs=he[Ee].AtnamMs;c.Atbez=he[Ee].Atbez;c.Mseh6=he[Ee].Mseh6;c.Msehl=he[Ee].Msehl;c.Decim=he[Ee].Decim.toString();c.Codgr=he[Ee].Codgr;c.Codgrtxt=he[Ee].Codgrtxt;c.Locas=he[Ee].Locas;c.Maktx=he[Ee].Maktx;c.Begru=he[Ee].Begru;c.Begtx=he[Ee].Begtx;c.Indct=he[Ee].Indct;c.Expon=he[Ee].Expon;c.Cdsuf=he[Ee].Cdsuf;c.Cjumc=he[Ee].Cjumc;c.Pyeac=he[Ee].Pyeac;c.Desir=he[Ee].Desir;c.Mrngu=he[Ee].Mrngu;c.Dstxt=he[Ee].Dstxt;c.Indrv=he[Ee].Indrv;c.Mrmax=he[Ee].Mrmax;c.Mrmin=he[Ee].Mrmin;c.valCodeStuffSel=false;c.menuAction=he[Ee].IsMenu;if(he[Ee].Type===true){c.viewParameter="create"}if(he[Ee].Type===false){c.viewParameter="change";c.MspointEnabled=false;if(c.ObtypMs===""||c.ObtypMs===undefined){c.ObtypMsEnabled=true}else{c.ObtypMsEnabled=false}if(c.ObtypMs==="IEQ"){c.TplnrEnabled=false;if(c.Equnr===""||c.Equnr===undefined){c.EqunrEnabled=true}else{c.EqunrEnabled=false}}if(c.ObtypMs==="IFL"){c.EqunrEnabled=false;if(c.Tplnr===""||c.Tplnr===undefined){c.TplnrEnabled=true}else{c.TplnrEnabled=false}}if(c.Mptyp===""||c.Mptyp===undefined){c.MptypEnabled=true}else{c.MptypEnabled=false}if(c.AtnamMs===""||c.AtnamMs===undefined){c.AtnamMsEnabled=true}else{c.AtnamMsEnabled=false}}if(he[Ee].Indct){c.countEnable=true;c.tEnable=false}else{c.countEnable=false;c.tEnable=true}if(he[Ee].Equnr!==""){c.EqunrEnabled=true;c.EqunrLblVis=true;c.EqunrInpVis=true;c.EqktxInpVis=true;c.TplnrEnabled=false;c.TplnrLblVis=false;c.TplnrInpVis=false;c.PltxtInpVis=false}else{c.EqunrEnabled=false;c.EqunrLblVis=false;c.EqunrInpVis=false;c.EqktxInpVis=false;c.TplnrEnabled=true;c.TplnrLblVis=true;c.TplnrInpVis=true;c.PltxtInpVis=true}if(a.MSLAM.results.length>0){var be=a.MSLAM.results;for(var M=0;M<be.length;M++){if(be[M].Mspoint===he[Ee].Point){var Ce={Mspoint:be[M].Mspoint,Lrpid:be[M].Lrpid,LrpidDesc:be[M].LrpDescr,Strtptatr:be[M].Strtptatr,Endptatr:be[M].Endptatr,Length:parseInt(be[M].Length!==""?be[M].Length:"0"),LinUnit:be[M].LinUnit,LinUnitDesc:be[M].Uomtext,Startmrkr:be[M].Startmrkr,Endmrkr:be[M].Endmrkr,Mrkdisst:be[M].Mrkdisst,Mrkdisend:be[M].Mrkdisend,MrkrUnit:be[M].MrkrUnit,LamDer:be[M].LamDer};c.lam=Ce;break}}}if(a.MSClass){var N=a.MSClass.results;if(N){if(N.length>0){for(var Le=0;Le<N.length;Le++){if(c.Mspoint===N[Le].Mspoint){N[Le].ctEnable=false;N[Le].classEnable=false;N[Le].ClassTypeDesc=N[Le].Artxt;delete N[Le].Artxt;N[Le].ClassDesc=N[Le].Kltxt;delete N[Le].Kltxt;delete N[Le].Changerequestid;delete N[Le].Clint;delete N[Le].Service;c.classItems.push(N[Le])}}c.charNewButton=true;if(l.class&&l.class.getId().includes("detailMspt")===true){l.class.setModel(new t(c.classItems))}}}}if(a.MSVal){var x=a.MSVal.results;if(x){if(x.length>0){for(var Te=0;Te<x.length;Te++){if(c.Mspoint===x[Te].Mspoint){x[Te].cNameEnable=false;x[Te].Textbz=x[Te].Atwtb;delete x[Te].Ataut;delete x[Te].Ataw1;delete x[Te].Atawe;delete x[Te].Atcod;delete x[Te].Atflb;delete x[Te].Atflv;delete x[Te].Atimb;delete x[Te].Atsrt;delete x[Te].Atvglart;delete x[Te].Atzis;delete x[Te].Changerequestid;delete x[Te].CharName;delete x[Te].Charid;delete x[Te].Classtype;delete x[Te].Service;delete x[Te].Valcnt;x[Te].slNo=Te+1;x[Te].flag=x[Te].Class+"-"+x[Te].slNo;c.characteristics.push(x[Te])}}for(var D=0;D<c.characteristics.length;D++){var R=1;for(var I=0;I<c.characteristics.length;I++){if(D===I){continue}if(c.characteristics[I].Atnam===c.characteristics[D].Atnam&&c.characteristics[I].Class===c.characteristics[D].Class){R++}}if(R>1){c.characteristics[D].charDltEnable=true}else{c.characteristics[D].charDltEnable=false}if(c.characteristics[D].Atein===true){c.characteristics[D].charAddEnable=false}}if(l.char&&l.char.getId().includes("detailMspt")===true){l.char.setModel(new t(c.characteristics))}}}}o.push(c)}p.setData(o);for(var Ae=0;Ae<p.getData().length;Ae++){if(m===p.getData()[Ae].Mspoint){l.rowIndex="/"+Ae;var H=new t;H.setData(p.getProperty(l.rowIndex));l.getView().setModel(H,e);l.lam.setModel(H,"AIWLAM");Ve.tableBusy=false;Me.setData(Ve);return}}}}}if(a.MPLAN){o=[];var Fe=a.MPLAN.results;if(Fe){for(var Pe=0;Pe<Fe.length;Pe++){c={classItems:[],characteristics:[],cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,WarplEnabled:true,StratEnabled:true,MehrfachEnabled:true,WsetEnabled:true,MptypEnabled:true,cycleIndSingleEnabled:true,cycleIndStrategyEnabled:true,cycleIndMultCntrEnabled:true,FabklLBLReq:false,ButtonNewItemEnabled:true,ButtonAssignItemEnabled:true,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,cycleModel:[],attachmentCount:"0",Guids:"",MaintenanceItemMode:"Delete",WarplVS:"None",WarplVST:"",WptxtVS:"None",WptxtVST:"",StratVS:"None",StratVST:"",WsetVS:"None",WsetVST:"",StadtVS:"None",StadtVST:"",StichVS:"None",StichVST:"",HunitVS:"None",HunitVST:""};c.Warpl=Fe[Pe].Warpl;c.Wptxt=Fe[Pe].Wptxt;c.Mptyp=Fe[Pe].Mptyp;c.Strat=Fe[Pe].Strat;c.StratDesc=Fe[Pe].StratDesc;c.StratEnabled=false;c.MehrfachEnabled=false;c.WsetEnabled=false;c.menuAction=Fe[Pe].IsMenu;if(Fe[Pe].Type===true){c.viewParameter="create"}if(Fe[Pe].Mehrfach==="X"||Fe[Pe].Stich==="4"){c.cycleSetSeqColVis=true;c.CycleSetSeqVis=true;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.Fabkl="";c.FabklDesc="";c.ButtonNewCycleEnabled=true;c.OPText=true;c.OPTitle=true;c.OPLBL=true;c.OROPVis=true;c.AndOPvis=true;c.WsetLBL=true;c.WsetVis=true;c.KtextVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.MehrfachLBL=true;c.MehrfachVis=true;c.Mehrfach=true;c.StadtLBL=true;c.StadtVis=true;c.Stadt=r.getDateFormat(Fe[Pe].Startdate);c.StadtLBLText=l.getView().getModel("i18n").getProperty("CYCLE_STDATE");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.Unitc=" ";c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.MaintenanceCycleMode="Delete";c.cycleIndMultCntr=true;c.cycleType=2}else if(Fe[Pe].Strat===""&&(Fe[Pe].Stich===" "||Fe[Pe].Stich==="1"||Fe[Pe].Stich==="2")){c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeEnabled=true;c.ScheIndRbTimeKeyDateEnabled=true;c.ScheIndRbTimeFactCalEnabled=true;c.ScheIndRbPerformanceEnabled=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.Fabkl="";c.FabklDesc="";c.StadtLBL=true;c.StadtVis=true;c.Stadt=r.getDateFormat(Fe[Pe].Startdate);c.StadtLBLText=l.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.Unitc=" ";c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.MaintenanceCycleMode="Delete";c.cycleIndSingle=true;c.cycleType=0}else if(Fe[Pe].Strat!==""&&Fe[Pe].Stich==="3"){c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformance=true;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.Fabkl="";c.FabklDesc="";c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.Strat=Fe[Pe].Strat;l.readScheduling(Fe[Pe],Fe[Pe].Strat,e);c.StadtLBL=false;c.StadtVis=false;c.Stadt=r.getDateFormat(Fe[Pe].Startdate);c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.MpcyclenoLBL=true;c.MpcyclenoVis=true;c.MaintenanceCycleMode="None";c.cycleIndStrateg=true;c.cycleType=1}else if(Fe[Pe].Strat.indexOf("TIME")>-1&&Fe[Pe].Mehrfach===""&&Fe[Pe].Stich!=="3"){c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.Fabkl="";c.FabklDesc="";c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.Strat=Fe[Pe].Strat;c.StadtLBL=true;c.StadtVis=true;c.Stadt=r.getDateFormat(Fe[Pe].Startdate);c.StadtLBLText=l.getView().getModel("i18n").getProperty("CYCLE_START_TXT");l.readScheduling(Fe[Pe],Fe[Pe].Strat,e);c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.Unitc=Fe[Pe].Unitc;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.MaintenanceCycleMode="Delete";c.cycleIndStrateg=true;c.cycleType=1}else if(Fe[Pe].Strat===""&&Fe[Pe].Stich==="3"&&Fe[Pe].Mehrfach===""){c.cycleIndSingle=true;c.cycleType=0;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.Fabkl="";c.FabklDesc="";c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.Strat=Fe[Pe].Strat;c.StadtLBL=false;c.StadtVis=false;c.Stadt=r.getDateFormat(Fe[Pe].Startdate);c.StadtLBLText=l.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.Unitc=" ";c.MaintenanceCycleMode="Delete"}if(Fe[Pe].Stich==="1"){c.ScheIndRbTimeKeyDate=true;c.FabklEnabled=true;c.Fabkl=Fe[Pe].Fabkl;c.FabklDesc=Fe[Pe].FabklDesc}else if(Fe[Pe].Stich==="2"){c.ScheIndRbTimeFactCal=true;c.FabklEnabled=true;c.Fabkl=Fe[Pe].Fabkl;c.FabklDesc=Fe[Pe].FabklDesc}else if(Fe[Pe].Stich==="3"){c.ScheIndRbPerformance=true;c.FabklEnabled=false}else if(Fe[Pe].Stich===" "||Fe[Pe].Stich===""){c.ScheIndRbTime=true;c.FabklEnabled=false;c.Fabkl=Fe[Pe].Fabkl;c.FabklDesc=Fe[Pe].FabklDesc}if(Fe[Pe].Stich){c.Stich=parseInt(Fe[Pe].Stich)}else{c.Stich=0}c.Wset=Fe[Pe].Wset;c.Ktext=Fe[Pe].Ktext;c.Sfakt=Fe[Pe].Sfakt;c.Abrho=Fe[Pe].Abrho;c.Hunit=Fe[Pe].Hunit;c.StratDesc=Fe[Pe].StratDesc;c.Szaeh=Fe[Pe].Szaeh;c.Mpcycleno=Fe[Pe].PointStp;c.Andor=Fe[Pe].Andor;if(Fe[Pe].PointStp!==""){c.Unitc=Fe[Pe].Unitc}if(Fe[Pe].Andor==="X"){c.AndOP=true}else{c.OROP=true}c.Vspos=Fe[Pe].Vspos;c.Topos=Fe[Pe].Topos;c.Vsneg=Fe[Pe].Vsneg;c.Toneg=Fe[Pe].Toneg;c.Horiz=Fe[Pe].Horiz;c.CallConf=Fe[Pe].CallConf;c.PlanSort=Fe[Pe].PlanSort;c.Begru=Fe[Pe].Begru;c.cycleIndSingle=false;c.cycleIndStrategy=false;c.cycleIndMultCntr=false;c.StratEnabled=false;c.MehrfachEnabled=false;c.WsetEnabled=false;switch(c.cycleType){case 0:c.cycleType=0;c.cycleIndSingle=true;c.cycleIndStrategyEnabled=false;c.cycleIndMultCntrEnabled=false;c.Strat=" ";c.StratDesc=" ";c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.Wset=" ";c.Ktext=" ";c.WsetLBL=false;c.WsetVis=false;c.KtextVis=false;c.Mehrfach=false;c.MehrfachLBL=false;c.MehrfachVis=false;c.ButtonNewCycleEnabled=true;if(c.ScheIndRbPerformance===true){c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.StadtLBL=false;c.StadtVis=false}break;case 1:c.cycleType=1;c.cycleIndStrategy=true;c.cycleIndSingleEnabled=false;c.cycleIndMultCntrEnabled=false;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.StratEnabled=true;c.Mehrfach=false;c.MehrfachLBL=false;c.MehrfachVis=false;c.Wset=" ";c.Ktext=" ";c.WsetLBL=false;c.WsetVis=false;c.KtextVis=false;c.ButtonNewCycleEnabled=false;break;case 2:c.cycleType=2;c.cycleIndMultCntr=true;c.cycleIndStrategyEnabled=false;c.cycleIndSingleEnabled=false;c.Strat=" ";c.StratDesc=" ";c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.MehrfachLBL=true;c.MehrfachVis=true;c.MehrfachEnabled=true;c.WsetLBL=true;c.WsetVis=true;c.WsetEnabled=true;c.KtextVis=true;c.ButtonNewCycleEnabled=true;c.cycleSetSeqColVis=true;break}if(c.menuAction==="copy"||c.menuAction==="change"){if(c.Mptyp===""||c.Mptyp===undefined||c.Mptyp===" "){c.MptypEnabled=true}else{c.MptypEnabled=false}if(c.cycleType===1&&(c.Strat===""||c.Strat===undefined||c.Strat===" ")){c.StratEnabled=true}else{c.StratEnabled=false}if(c.cycleType===2&&(c.Mehrfach===false||c.Mehrfach===""||c.Mehrfach===undefined||c.Mehrfach===" ")){c.MehrfachEnabled=true}else{c.MehrfachEnabled=false}if(c.cycleType===2&&(c.Wset===""||c.Wset===undefined||c.Wset===" ")){c.WsetEnabled=true}else{c.WsetEnabled=false}}if(Fe[Pe].Type===false){c.viewParameter="change";c.WarplEnabled=false;if(c.Mptyp===""||c.Mptyp===undefined||c.Mptyp===" "){c.MptypEnabled=true}else{c.MptypEnabled=false}if(c.cycleType===1&&(c.Strat===""||c.Strat===undefined||c.Strat===" ")){c.StratEnabled=true}else{c.StratEnabled=false}if(c.cycleType===2&&(c.Mehrfach===false||c.Mehrfach===""||c.Mehrfach===undefined||c.Mehrfach===" ")){c.MehrfachEnabled=true}else{c.MehrfachEnabled=false}if(c.cycleType===2&&(c.Wset===""||c.Wset===undefined||c.Wset===" ")){c.WsetEnabled=true}else{c.WsetEnabled=false}}if(a.MPCycle){var ve=a.MPCycle.results;if(ve){for(var De=0;De<ve.length;De++){if(c.Warpl===ve[De].Mplan){ve[De].Psort=ve[De].PointTxt;c.cycleModel.push(ve[De])}}}}if(c.cycleModel){var ye=c.cycleModel.length;for(var Ie=0;Ie<ye;Ie++){if(c.menuAction==="copy"||c.menuAction==="change"){c.cycleModel[Ie].Zykl1Enabled=false;c.cycleModel[Ie].ZeiehEnabled=false;c.cycleModel[Ie].PakTextEnabled=false;c.cycleModel[Ie].OffsetEnabled=false;c.cycleModel[Ie].PointEnabled=false;c.cycleModel[Ie].CycleseqiEnabled=false}else{c.cycleModel[Ie].Zykl1Enabled=true;c.cycleModel[Ie].ZeiehEnabled=true;c.cycleModel[Ie].PakTextEnabled=true;c.cycleModel[Ie].OffsetEnabled=true;c.cycleModel[Ie].PointEnabled=true;c.cycleModel[Ie].CycleseqiEnabled=true}}}if(a.MPItem){var ke=a.MPItem.results;if(ke){var Ne=new t;var qe=[];for(var xe=0;xe<ke.length;xe++){if(c.Warpl===ke[xe].Mplan){var we={};we.Mitemnumb=ke[xe].Mitemnumb;we.Pstxt=ke[xe].Pstxt;we.Cycleseq=ke[xe].Cycleseq;we.Tplnr=ke[xe].TplnrMi;we.Pltxt=ke[xe].Flocdesc;we.Equnr=ke[xe].Equnr;we.Eqktx=ke[xe].Equipdesc;we.AsmblyOb=ke[xe].Bautl;we.Werks=ke[xe].PlntMi;we.Planningplantdes=ke[xe].Planningplantdes;we.Auart=ke[xe].Auart;we.oTypeTxt=ke[xe].Ordertypedesc;we.Qmart=ke[xe].Qmart;we.nTypeTxt=ke[xe].Qmartx;we.ArbpMi=ke[xe].ArbpMi;we.WergwMi=ke[xe].WergwMi;we.Ingrp=ke[xe].IngrpMi;we.Innam=ke[xe].Plannergrpdesc;we.Zeieh=ke[xe].Zeieh;we.Priok=ke[xe].Priok;we.ItmPriotxt=ke[xe].GsberMi;we.GsberMi=ke[xe].GsberMi;we.Gtext=ke[xe].Gtext;we.TaskDet=ke[xe].TaskDet;we.Ilart=ke[xe].Ilart;we.Ilatx=ke[xe].Ilatx;we.PlntyMi=ke[xe].PlntyMi;we.ApfktMi=ke[xe].ApfktMi;we.PlnnrMi=ke[xe].PlnnrMi;we.PlnalMi=ke[xe].PlnalMi;we.Gpcounterdesc=ke[xe].Gpcounterdesc;we.AnlzuMi=ke[xe].AnlzuMi;we.Anlzux=ke[xe].Anlzux;we.SwerkMil=ke[xe].SwerkMil;we.Name1=ke[xe].SwerkMilTxt;we.StortMil=ke[xe].StortMil;we.Locationdesc=ke[xe].StortMilTxt;we.MsgrpIl=ke[xe].MsgrpIl;we.BeberMil=ke[xe].BeberMil;we.Fing=ke[xe].BeberMilTxt;we.Tele=ke[xe].Tele;we.ArbplIl=ke[xe].ArbplIl;we.Workcenterdesc=ke[xe].ArbplIlTxt;we.AbckzIl=ke[xe].AbckzIl;we.Abctx=ke[xe].Abctx;we.EqfnrIl=ke[xe].EqfnrIl;we.BukrsMil=ke[xe].BukrsMil;we.Butxt=ke[xe].Butxt;we.City=ke[xe].City;we.Anln1Mil=ke[xe].Anln1Mil;we.Anln2Mil=ke[xe].Anln2Mil;we.Txt50=ke[xe].Anln1MilTxt;we.GsberIl=ke[xe].GsberIl;we.KostlMil=ke[xe].KostlMil;we.Contareaname=ke[xe].KostlMilTxt;we.KokrsMil=ke[xe].KokrsMil;we.Posid=ke[xe].Post1;we.Post1=ke[xe].Post1;we.AufnrIl=ke[xe].AufnrIl;we.SettleOrdDesc=ke[xe].SettleOrdDesc;we.enableLoc=false;we.PlnnrMi=ke[xe].PlnnrMi;we.PlntyMi=ke[xe].PlntyMi;we.PlnalMi=ke[xe].PlnalMi;we.QmartLBL=true;we.QmartVis=true;we.nTypetxtVis=true;we.AuartLBL=true;we.AuartVis=true;we.oTypeTxtVis=true;we.CycleseqLBL=false;we.CycleseqVis=false;we.AsmblyObMaxLength=0;we.maintItemE=false;we.cycleSetE=false;we.TplnrEnabled=false;we.equiE=false;we.assemblyE=false;we.CycleseqVS="None";we.CycleseqVST="";we.TplnrVS="None";we.TplnrVST="";we.EqunrVS="None";we.EqunrVST="";we.AsmblyObVS="None";we.AsmblyObVST="";we.WerksVS="None";we.WerksVST="";we.AuartVS="None";we.AuartVST="";we.QmartVS="None";we.QmartVST="";we.ArbpMiVS="None";we.ArbpMiVST="";we.WergwMiVS="None";we.WergwMiVST="";we.IngrpVS="None";we.IngrpVST="";if(c.Mptyp==="NO"){we.AuartLBL=false;we.AuartVis=false;we.oTypeTxtVis=false}if(c.Mptyp==="PM"){we.QmartLBL=false;we.QmartVis=false;we.nTypetxtVis=false}if(a.MPLAM.results.length>0){var Re=a.MPLAM.results;for(var D=0;D<Re.length;D++){if(Re[D].Mplan===ke[xe].Mplan&&Re[D].Mitemnumb===ke[xe].Mitemnumb){var Be={Mplan:ke[xe].Mplan,Mitemnumb:ke[xe].Mitemnumb,Lrpid:Re[D].Lrpid,LrpidDesc:Re[D].LrpDescr,Strtptatr:Re[D].Strtptatr,Endptatr:Re[D].Endptatr,Length:Re[D].Length,LinUnit:Re[D].LinUnit,LinUnitDesc:Re[D].Uomtext,Startmrkr:Re[D].Startmrkr,Endmrkr:Re[D].Endmrkr,Mrkdisst:Re[D].Mrkdisst,Mrkdisend:Re[D].Mrkdisend,MrkrUnit:Re[D].MrkrUnit,LamDer:Re[D].LamDer};we.lam=Be;we.LDVisible=true;break}}}qe.push(we)}}Ne.setData(qe);c.itemModel=qe}}if(a.MPOBList){var Oe=a.MPOBList.results;if(Oe){var We=[];for(var U=0;U<Oe.length;U++){if(c.Warpl===Oe[U].Mplan){var we={};we.Warpl=Oe[U].Mplan;we.Mitemnumb=Oe[U].Mitemnumb;we.MatnrObj=Oe[U].MatnrObj;we.FlocObj=Oe[U].FlocObj;we.EquiObj=Oe[U].EquiObj;we.AsmblyOb=Oe[U].AsmblyOb;we.Matnrtxt=Oe[U].Matnrtxt;we.Equnrtxt=Oe[U].Equnrtxt;we.Tplnrtxt=Oe[U].Tplnrtxt;we.Bautltxt=Oe[U].Bautltxt;we.Enable=false;We.push(we)}}c.ObjListItems=We}}if(a.ClassMpl){var N=a.ClassMpl.results;if(N){if(N.length>0){for(var Le=0;Le<N.length;Le++){if(c.Warpl===N[Le].Mplan){N[Le].ctEnable=false;N[Le].classEnable=false;N[Le].ClassTypeDesc=N[Le].Artxt;delete N[Le].Artxt;N[Le].ClassDesc=N[Le].Kltxt;delete N[Le].Kltxt;delete N[Le].Changerequestid;delete N[Le].Clint;delete N[Le].Service;c.classItems.push(N[Le])}}c.charNewButton=true;if(l.class&&l.class.getId().includes("detailMpmi")===true){l.class.setModel(new t(c.classItems))}}}}if(a.ValuaMpl){var x=a.ValuaMpl.results;if(x){if(x.length>0){for(var Te=0;Te<x.length;Te++){if(c.Warpl===x[Te].Mplan){x[Te].cNameEnable=false;x[Te].Textbz=x[Te].Atwtb;delete x[Te].Ataut;delete x[Te].Ataw1;delete x[Te].Atawe;delete x[Te].Atcod;delete x[Te].Atflb;delete x[Te].Atflv;delete x[Te].Atimb;delete x[Te].Atsrt;delete x[Te].Atvglart;delete x[Te].Atzis;delete x[Te].Changerequestid;delete x[Te].CharName;delete x[Te].Charid;delete x[Te].Classtype;delete x[Te].Service;delete x[Te].Valcnt;x[Te].slNo=Te+1;x[Te].flag=x[Te].Class+"-"+x[Te].slNo;c.characteristics.push(x[Te])}}for(var D=0;D<c.characteristics.length;D++){var R=1;for(var I=0;I<c.characteristics.length;I++){if(D===I){continue}if(c.characteristics[I].Atnam===c.characteristics[D].Atnam&&c.characteristics[I].Class===c.characteristics[D].Class){R++}}if(R>1){c.characteristics[D].charDltEnable=true}else{c.characteristics[D].charDltEnable=false}if(c.characteristics[D].Atein===true){c.characteristics[D].charAddEnable=false}}if(l.char&&l.char.getId().includes("detailMpmi")===true){l.char.setModel(new t(c.characteristics))}}}}o.push(c)}g.setData(o);for(var Ue=0;Ue<g.getData().length;Ue++){if(m===g.getData()[Ue].Warpl){l.rowIndex="/"+Ue;var H=new t;H.setData(g.getProperty(l.rowIndex));l.getView().setModel(H,e);var ze={itemStatus:true,oModelUpdateFlag:false};sap.ui.getCore().setModel(new t(ze),"AIWMPMIStatus");sap.ui.getCore().setModel(H,"AIWMPMIDetail");var Ke=new t;Ke.setData(H.getData().itemModel[n]);l.getView().setModel(Ke,"itemDetailView");l.lam.setModel(Ke,"AIWLAM");if(l.strategy==="PERF"||l.strategy==="singlePerf"){l.readCounter(Ke.getData(),l)}Ve.tableBusy=false;Me.setData(Ve);return}}}}Ve.tableBusy=false;Me.setData(Ve)};var be=function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=t.join("\n");Ve.tableBusy=false;Me.setData(Ve);sap.m.MessageBox.show(r,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})};if(u.FLAddrI.length>0){u.FLAddrI=$.map(u.FLAddrI,function(e){return $.extend(true,{},e)});for(var le=0;le<u.FLAddrI.length>0;le++){delete u.FLAddrI[le].AdNationEnable;delete u.FLAddrI[le].City1iVS;delete u.FLAddrI[le].StreetiVS}}if(u.EqAddrI.length>0){u.EqAddrI=$.map(u.EqAddrI,function(e){return $.extend(true,{},e)});for(var le=0;le<u.EqAddrI.length>0;le++){delete u.EqAddrI[le].AdNationEnable;delete u.EqAddrI[le].City1iVS;delete u.EqAddrI[le].StreetiVS}}s.create(i,u,{success:Ee,error:be})},setObjectAddress:function(e){var t=this.getView().getModel(e);var a=t.getData();a.Title=a.Title?a.Title:"";a.TitleCode=a.TitleCode?a.TitleCode:"";a.Name1=a.Name1?a.Name1:"";a.Name2=a.Name2?a.Name2:"";a.Name3=a.Name3?a.Name3:"";a.Name4=a.Name4?a.Name4:"";a.Sort1=a.Sort1?a.Sort1:"";a.Sort2=a.Sort2?a.Sort2:"";a.NameCo=a.NameCo?a.NameCo:"";a.PostCod1=a.PostCod1?a.PostCod1:"";a.City1=a.City1?a.City1:"";a.Building=a.Building?a.Building:"";a.Floor=a.Floor?a.Floor:"";a.Roomnum=a.Roomnum?a.Roomnum:"";a.Strsuppl1=a.Strsuppl1?a.Strsuppl1:"";a.Strsuppl2=a.Strsuppl2?a.Strsuppl2:"";a.Strsuppl3=a.Strsuppl3?a.Strsuppl3:"";a.AddrLocation=a.AddrLocation?a.AddrLocation:"";a.RefPosta=a.RefPosta?a.RefPosta:"";a.Landx=a.Landx?a.Landx:"";a.TimeZone=a.TimeZone?a.TimeZone:"";a.Region=a.Region?a.Region:"";a.RegionDesc=a.RegionDesc?a.RegionDesc:"";t.setData(a)},onAddressFieldChange:function(){var e=this.getView().getModel(this.oModelName);var t=e.getData();e.setData(t);if(t.Title!==""&&t.Title!==undefined||t.TitleCode!==""&&t.TitleCode!==undefined||t.Name1!==""&&t.Name1!==undefined||t.Name2!==""&&t.Name2!==undefined||t.Name3!==""&&t.Name3!==undefined||t.Name4!==""&&t.Name4!==undefined||t.Sort1!==""&&t.Sort1!==undefined||t.Sort2!==""&&t.Sort2!==undefined||t.NameCo!==""&&t.NameCo!==undefined||t.PostCod1!==""&&t.PostCod1!==undefined||t.City1!==""&&t.City1!==undefined||t.Building!==""&&t.Building!==undefined||t.Floor!==""&&t.Floor!==undefined||t.Roomnum!==""&&t.Roomnum!==undefined||t.AddrLocation!==""&&t.AddrLocation!==undefined||t.Strsuppl1!==""&&t.Strsuppl1!==undefined||t.Strsuppl2!==""&&t.Strsuppl2!==undefined||t.Strsuppl3!==""&&t.Strsuppl3!==undefined||t.TimeZone!==""&&t.TimeZone!==undefined||t.RefPosta!==""&&t.RefPosta!==undefined||t.Region!==""&&t.Region!==undefined){t.RefPostaLblReq=true}else{t.RefPostaLblReq=false;t.RefPostaVS="None"}e.setData(t)},parseValue:function(e){if(e){return"X"}else{return""}},_formatDate:function(e){if(e!==""&&e!==null&&e!==undefined){var t="";var a=new Date(e);var r=a.getFullYear();var n=a.getMonth()+1;if(n<10){n="0"+n}var l=a.getDate();if(l<10){l="0"+l}var i=a.getHours();if(i<10){i="0"+i}var s=a.getMinutes();if(s<10){s="0"+s}var o=a.getSeconds();if(o<10){o="0"+o}t=r+"-"+n+"-"+l+"T"+i+":"+s+":"+o;return t}else{return null}},configureMessagePopover:function(){var e=new sap.m.MessageItem({type:"{type}",title:"{title}"});this.oMessagePopover=new sap.m.MessagePopover({items:{path:"/",template:e}})},onUpdateFinished:function(e){var t=this.getView().getModel(this.oModelName).getData();if(t!==null&&t!==undefined){var a=e.getSource();var r=e.getParameter("total");if(r&&a.getBinding("items").isLengthFinal()){t.tableResultCount=this.getResourceBundle().getText("RESULTS",[r])}else{t.tableResultCount=this.getResourceBundle().getText("RESULTS",[0])}this.getView().getModel(this.oModelName).refresh()}},onSearch:function(){var e=this;var a=e.getView().getModel(e.oModelName);var r=a.getData();var n=r.MaxNo;n=parseInt(n);if(n===""||n===0||isNaN(n)){var l=e.getView().getModel("i18n").getProperty("VALUE_ERR");r.MaxNoVS="Error";a.setData(r);e.invokeMessage(l);return}else{r.MaxNoVS="None";a.setData(r)}var i=e.getView().getModel();var s={$top:n};var o=[],c=[];var u;if(e.oModelName==="AIWFLOC"||e.oSearchModelName==="AIWFLOC"){u="/FLSearchSet";c=[new sap.ui.model.Filter("Itplnr","EQ",r.Tplnr.toUpperCase()),new sap.ui.model.Filter("Ipltxt","EQ",r.Pltxt.toUpperCase()),new sap.ui.model.Filter("Ifltyp","EQ",r.Floccategory.toUpperCase()),new sap.ui.model.Filter("Iswerk","EQ",r.Maintplant.toUpperCase()),new sap.ui.model.Filter("Iingrp","EQ",r.Ingrp.toUpperCase()),new sap.ui.model.Filter("Igewrkfloc","EQ",r.MainArbpl)]}if(e.oModelName==="AIWEQUI"||e.oSearchModelName==="AIWEQUI"){u="/EQSearchSet";c=[new sap.ui.model.Filter("IEqunr","EQ",r.Equnr.toUpperCase()),new sap.ui.model.Filter("Itxtmi","EQ",r.Eqktx.toUpperCase()),new sap.ui.model.Filter("Iswerk","EQ",r.Maintplant.toUpperCase()),new sap.ui.model.Filter("Ieqtyp","EQ",r.EquipmentCatogory.toUpperCase()),new sap.ui.model.Filter("Ieqart","EQ",r.TechnicalObjectTyp.toUpperCase())]}if(e.oModelName==="AIWMSPT"||e.oSearchModelName==="AIWMSPT"){u="/MSSearchSet";c=[new sap.ui.model.Filter("Ipoint","EQ",r.Mspoint.toUpperCase()),new sap.ui.model.Filter("Ipttxt","EQ",r.Pttxt.toUpperCase()),new sap.ui.model.Filter("Iequnr","EQ",r.Equnr.toUpperCase()),new sap.ui.model.Filter("Itplnr","EQ",r.Tplnr.toUpperCase()),new sap.ui.model.Filter("Imptyp","EQ",r.Mptyp.toUpperCase())]}if(e.oModelName==="AIWMPMI"||e.oSearchModelName==="AIWMPMI"){u="/MPSearchSet";c=[new sap.ui.model.Filter("Istrat","EQ",r.Strat.toUpperCase()),new sap.ui.model.Filter("Iwarpl","EQ",r.Warpl.toUpperCase()),new sap.ui.model.Filter("Imptyp","EQ",r.Mptyp.toUpperCase()),new sap.ui.model.Filter("IplanSort","EQ",r.MplanSort.toUpperCase()),new sap.ui.model.Filter("Iwptxt","EQ",r.Wptxt.toUpperCase())]}r.tableBusy=true;a.setData(r);jQuery.sap.delayedCall(10,e,function(){var n=function(n){var l=new t([]);if(n.results.length>0){o=n.results;r.tableBusy=false;r.tableThresholdLength=o.length;l.setData(o);e.getView().setModel(l,e.oSearchModelTable)}else{r.tableBusy=false;r.tableThresholdLength=o.length;l.setData(o);e.getView().setModel(l,e.oSearchModelTable)}a.setData(r)};var l=function(){e.setModel(new t,e.oSearchModelTable);r.tableBusy=false;a.setData(r)};e._readData(u,i,n,l,c,s)})},onSearchItemSelect:function(e){this.selectedIndex=e.getSource()._aSelectedPaths;var t=this.getView().getModel("mainView");var a=t.getData();if(this.selectedIndex.length>0){a.importEnabled=true}else{a.importEnabled=false}t.setData(a)},onImportToMocrPress:function(){var e=this;var t=false;var a=[];var r=0;var n;n=sap.ui.getCore().getModel(this.oSearchModelName).getData();var l=this.getView().byId("searchResults").getModel().getData();if(this.selectedIndex.length>0){for(var i=0;i<this.selectedIndex.length;i++){var s=this.selectedIndex[i].split("/")[1];s=parseInt(s);if(l[s].UsmdActive&&l[s].UsmdActive==="1"){if(this.oSearchModelName==="AIWEQUI"){a.push({type:"Error",title:"Equipment "+l[s].Equi+" already locked in the Change Request"})}if(this.oSearchModelName==="AIWFLOC"){a.push({type:"Error",title:"Functional Location "+l[s].Funcloc+" already locked in the Change Request"})}if(this.oSearchModelName==="AIWMSPT"){a.push({type:"Error",title:"Measuring Point "+l[s].Mspoint+" already locked in the Change Request"})}if(this.oSearchModelName==="AIWMPMI"){a.push({type:"Error",title:"Maintenance Plan "+l[s].Mplan+" already locked in the Change Request"})}continue}if(n.length>0){for(var o=0;o<n.length;o++){if(this.oSearchModelName==="AIWEQUI"){if(n[o].Equnr===l[s].Equi){a.push({type:"Error",title:"Equipment "+l[s].Equi+e.getResourceBundle().getText("locked")});t=true;break}}if(this.oSearchModelName==="AIWFLOC"){if(n[o].Functionallocation===l[s].Funcloc){a.push({type:"Error",title:"Functional Location "+l[s].Funcloc+e.getResourceBundle().getText("locked")});t=true;break}}if(this.oSearchModelName==="AIWMSPT"){if(n[o].Mspoint===l[s].Mspoint){a.push({type:"Error",title:"Measuring Point "+l[s].Mspoint+e.getResourceBundle().getText("locked")});t=true;break}}if(this.oSearchModelName==="AIWMPMI"){if(n[o].Warpl===l[s].Mplan){a.push({type:"Error",title:"Maintenance Plan "+l[s].Mplan+e.getResourceBundle().getText("locked")});t=true;break}}}}if(!t){t=false;r=r+1;if(this.oSearchModelName==="AIWEQUI"){this.readEquipmentData(l[s].Equi)}if(this.oSearchModelName==="AIWFLOC"){this.readFunctionalLocData(l[s].Funcloc)}if(this.oSearchModelName==="AIWMSPT"){this.readMeasuringPointData(l[s].Mspoint)}if(this.oSearchModelName==="AIWMPMI"){this.readMaintenancePlanData(l[s].Mplan)}}}this.createMessagePopover(a,r)}},handleSearchImportPress:function(e,t){var a;a=sap.ui.getCore().getModel(t).getData();a.push(e);sap.ui.getCore().getModel(t).refresh()},createMessagePopover:function(e,a){if(a>0){e.push({type:"Success",title:"Successfuly import added to the MOCR: "+a})}var r=new t;r.setData(e);this.oMessagePopover.setModel(r);this.oMessagePopover.toggle(this.getView().byId("idMessagePopover"));this.getView().byId("idMessagePopover").setEnabled(true);this.getView().byId("idMessagePopover").setText(e.length+"")},handleMessagePopoverPress:function(e){this.oMessagePopover.toggle(e.getSource())},onSearchDonePress:function(){this.selectedIndex=[];var e=sap.ui.getCore().getModel("refreshModel");e.setProperty("/refreshSearch",true);var t=this.getView().byId("idPanel");var r=this.getView().byId("searchResults");var n=this.getView().byId("sColListItem");t.destroyContent();r.destroyColumns();r.destroyItems();n.destroyCells();r.setModel();if(this._oTPC){this._oTPC.destroyPersoService();this._oTPC.destroy()}var l=a.getInstance().getPreviousHash();if(l!==undefined){history.go(-1)}else{this.getRouter().navTo("main",{},true)}},handleMainTableRow:function(e,a){var r;r=new t;r.setData(e);this.getView().setModel(r,a);this.getView().getModel(a).refresh();this.attachModelEventHandlers(r)},handleCreatePress:function(e,t){var a,r;a=this.getView().getModel(t);a.setData(e);this.getView().setModel(a,t)},setCommonApprovalData:function(e,t,a){var r=[];var n=sap.ui.getCore().getModel("AIWAPPROVE");var l="/"+e;var i={classItems:t.classItems,characteristics:t.characteristics};if(t.linearChar){i.linearChar=t.linearChar}if(a){i.Title=t.Title;i.Name1=t.Name1;i.Name2=t.Name2;i.Name3=t.Name3;i.Name4=t.Name4;i.Sort1=t.Sort1;i.Sort2=t.Sort2;i.NameCo=t.NameCo;i.Building=t.Building;i.Floor=t.Floor;i.Roomnum=t.Roomnum;i.Street=t.Street;i.HouseNr1=t.HouseNr1;i.HouseNr2=t.HouseNr2;i.Strsuppl1=t.Strsuppl1;i.Strsuppl2=t.Strsuppl2;i.Strsuppl3=t.Strsuppl3;i.AddrLocation=t.AddrLocation;i.District=t.District;i.PostCod1=t.PostCod1;i.City1=t.City1;i.RPostafl=t.RPostafl;i.Landx=t.Landx;i.RfePost=t.RfePost;i.Regiotxt=t.Regiotxt;i.HomeCity=t.HomeCity;i.TimeZone=t.TimeZone;i.Taxjurcod=t.Taxjurcod;i.Regiogrou=t.Regiogrou;i.RfePostl=t.RfePostl;i.Dontusestxt=t.Dontusestxt;i.PoBox=t.PoBox;i.PoboxNum=t.PoboxNum;i.DlvsrvTy=t.DlvsrvTy;i.DlvsrvNr=t.DlvsrvNr;i.PostCod2=t.PostCod2;i.PoboxLoc=t.PoboxLoc;i.PoboxLby=t.PoboxLby;i.PoboxCty=t.PoboxCty;i.LandxP=t.LandxP;i.RfePstal=t.RfePstal;i.RegiotxtP=t.RegiotxtP;i.Dontuseptxt=t.Dontuseptxt;i.PostCod3=t.PostCod3;i.Remark=t.Remark;i.emailAddress=[];i.urlAddress=[];i.telephoneData=[];i.faxData=[];if(t.emailAddress){if(t.emailAddress.length>0){i.emailAddress=t.emailAddress}}if(t.urlAddress){if(t.urlAddress.length>0){i.urlAddress=t.urlAddress}}if(t.telephoneData){if(t.telephoneData.length>0){i.telephoneData=t.telephoneData}}if(t.faxData){if(t.faxData.length>0){i.faxData=t.faxData}}if(t.intlAddr){if(t.intlAddr.length>0){i.intlAddr=t.intlAddr}}}if(n.getProperty(l)){r=n.getProperty(l)}else{r=[]}r.push(i);n.setProperty(l,r)},readFunctionalLocData:function(e,a){var r=this;var n="AIWFLOC";var l="/ChangeRequestSet";var i=["FLClass","FLAddr","FLAddrI","FLEmail","FLFax","FLMltxt","FLPermit","FuncLoc","FLLAM","FLLAMCH","FLPrtnr","FLTele","FLUrl","FLVal","FLALTLBEL","FLLAMCH","FLDOI"];var s={$expand:i};var o=r.getView().getModel();var c=[new sap.ui.model.Filter("Tplnr","EQ",e),new sap.ui.model.Filter("Tplma","EQ","")];var u=function(l){r.BusyDialog.close();var i=l.results[0];if(i===undefined){return}var s={Functionallocation:e,intlAddr:[],altlbl:[],Partners:[],Permits:[],classItems:[],characteristics:[],linearChar:[],linearCharAddEnable:false,attachmentCount:"0",Guids:"",charNewButton:false,FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};if(i.FuncLoc){var o=i.FuncLoc.results[0];if(o){s.Flocdescription=o.Txtmi;s.Strucindicator=o.TplkzFlc;s.StrucIndicatorDesc=o.Tplxt;s.EditMask=o.EditMask;s.Hierarchy=o.Hierarchy;s.Floccategory=o.Fltyp;s.FlocCategoryDesc=o.Flttx;s.Maintplant=o.Swerk;s.MaintplantDesc=o.Plantname;s.Location=o.StorFloc;s.Locationdesc=o.Locationdesc;s.Abckz=o.Abckzfloc;s.Abctx=o.Abctx;s.Bukrs=o.Bukrsfloc;s.Butxt=o.Butxt;s.City=o.City;s.Kostl=o.KostFloc;s.Kokrs=o.KokrFloc;s.Mctxt=o.Contareaname;s.Werks=o.PlntFloc;s.Planningplantdes=o.Planningplantdes;s.Ingrp=o.Ingrp;s.Innam=o.Plannergrpdesc;s.Arbpl=o.Arbplfloc;s.Ktext=o.Workcenterdesc;s.WcWerks=o.Wergwfloc;s.MainArbpl=o.Gewrkfloc;s.MainKtext=o.MainWcDesc;s.MainWerks=o.MainWcPlant;s.SupFunctionallocation=o.Tplma;s.SupFlocdescription=o.Supflocdesc;s.BeberFl=o.BeberFl;s.Fing=o.Fing;s.Tele=o.Tele;s.ConstrType=o.Submtiflo;s.ConstructionDesc=o.Constdesc;s.TechnicalObjectTyp=o.Eqart;s.Description=o.Eartx;s.Stattext=o.Stattext;s.StsmEqui=o.StsmFloc;s.StsmEquiDesc=o.Statproftxt;s.UstwEqui=o.UstwFloc;s.UswoEqui=o.UswoFloc;s.UstaEqui=o.UstaFloc;s.Deact=o.Deact;s.DeactEnable=a==="true"?false:true;s.Alkey=o.Alkey;s.Altxt=o.Altxt;s.Adrnr=o.Adrnr;if(o.Swerk!==""){s.BukrsEnabled=false}else{s.MaintplantEnabled=true;s.BukrsEnabled=true}}}if(i.FLLAM.results.length>0){var c=i.FLLAM.results[0];s.lam={Funcloc:e,Lrpid:c.Lrpid,LrpidDesc:c.LrpDescr,Strtptatr:c.Strtptatr,Endptatr:c.Endptatr,Length:c.Length,LinUnit:c.LinUnit,LinUnitDesc:c.Uomtext,Startmrkr:c.Startmrkr,Endmrkr:c.Endmrkr,Mrkdisst:c.Mrkdisst,Mrkdisend:c.Mrkdisend,MrkrUnit:c.MrkrUnit,enableLrp:true,enableMarker:true,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None",LamDer:"D"}}else{s.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}if(i.FLAddr){var u=i.FLAddr.results[0];if(u){var d=sap.ui.getCore().getModel("flocAddressView");var f=d.getData();var p=true;var g;if(f.length>0){for(var S=0;S<f.length;S++){if(s.Functionallocation===f[S].Functionallocation){p=false;break}}}if(p){g={Functionallocation:s.Functionallocation,IsEditable:u.IsEditable};f.push(g);d.setData(f)}s.IsEditable=u.IsEditable;s.Title=u.Titletxt;s.TitleCode=u.Title;s.Name1=u.Name1;s.Name2=u.Name2;s.Name3=u.Name3;s.Name4=u.Name4;s.Sort1=u.Sort1;s.Sort2=u.Sort2;s.NameCo=u.NameCo;s.PostCod1=u.PostCod1;s.City1=u.City1;s.Building=u.Building;s.Floor=u.Floor;s.Roomnum=u.Roomnum;s.AddrLocation=u.Location;s.Strsuppl1=u.Strsuppl1;s.Strsuppl2=u.Strsuppl2;s.Strsuppl3=u.Strsuppl3;s.RefPosta=u.RPostafl;s.Landx=u.Landx;s.TimeZone=u.TimeZone;s.Region=u.RPostFl;s.RegionDesc=u.Regiotxt}else{s.Title=s.Title?s.Title:"";s.TitleCode=s.TitleCode?s.TitleCode:"";s.Name1=s.Name1?s.Name1:"";s.Name2=s.Name2?s.Name2:"";s.Name3=s.Name3?s.Name3:"";s.Name4=s.Name4?s.Name4:"";s.Sort1=s.Sort1?s.Sort1:"";s.Sort2=s.Sort2?s.Sort2:"";s.NameCo=s.NameCo?s.NameCo:"";s.PostCod1=s.PostCod1?s.PostCod1:"";s.City1=s.City1?s.City1:"";s.Building=s.Building?s.Building:"";s.Floor=s.Floor?s.Floor:"";s.Roomnum=s.Roomnum?s.Roomnum:"";s.Strsuppl1=s.Strsuppl1?s.Strsuppl1:"";s.Strsuppl2=s.Strsuppl2?s.Strsuppl2:"";s.Strsuppl3=s.Strsuppl3?s.Strsuppl3:"";s.AddrLocation=s.AddrLocation?s.AddrLocation:"";s.RefPosta=s.RefPosta?s.RefPosta:"";s.Landx=s.Landx?s.Landx:"";s.TimeZone=s.TimeZone?s.TimeZone:"";s.Region=s.Region?s.Region:"";s.RegionDesc=s.RegionDesc?s.RegionDesc:""}}var m=i.FLAddrI.results;if(m.length>0){for(var h=0;h<m.length;h++){m[h].AdNationEnable=false;m[h].City1iVS="None";m[h].StreetiVS="None";s.intlAddr.push(m[h])}}var M=i.FLALTLBEL.results;if(M.length>0){for(var V=0;V<M.length;V++){var E={Funcloc:e,AltAlkey:M[V].AltAlkey,Altxt:M[V].Altxt,AltStrno:M[V].AltStrno,AltTplkz:M[V].AltTplkz,Tplxt:M[V].Tplxt,Name1i:M[V].Editm,Actvs:M[V].Actvs,AltPrkey:M[V].AltPrkey,AltReuse:M[V].AltReuse,enableLblSys:false,enableAltLbl:true,enableStrInd:true,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};s.altlbl.push(E)}}if(i.FLClass){var b=$.map(i.FLClass.results,function(e){return $.extend(true,{},e)});if(b){if(b.length>0){for(var C=0;C<b.length;C++){b[C].ctEnable=false;b[C].classEnable=false;b[C].ClassTypeDesc=b[C].Artxt;delete b[C].Artxt;b[C].ClassDesc=b[C].Kltxt;delete b[C].Kltxt;delete b[C].Changerequestid;delete b[C].Clint;delete b[C].Service;b[C].classDelEnable=true;s.classItems.push(b[C])}if(a==="true"){for(var C=0;C<Object.classItems.length;C++){Object.classItems[C].classDelEnable=false}}s.charNewButton=true;if(r.class){r.class.setModel(new t(s.classItems))}}}}if(i.FLVal){var L=$.map(i.FLVal.results,function(e){return $.extend(true,{},e)});if(L){if(L.length>0){for(var T=0;T<L.length;T++){L[T].cNameEnable=false;L[T].Textbz=L[T].Atwtb;delete L[T].Ataut;delete L[T].Ataw1;delete L[T].Atawe;delete L[T].Atcod;delete L[T].Atflb;delete L[T].Atflv;delete L[T].Atimb;delete L[T].Atsrt;delete L[T].Atvglart;delete L[T].Atzis;delete L[T].Changerequestid;delete L[T].CharName;delete L[T].Charid;delete L[T].Classtype;delete L[T].Service;delete L[T].Valcnt;L[T].slNo=T+1;L[T].flag=L[T].Class+"-"+L[T].slNo;s.characteristics.push(L[T])}if(a==="true"){for(var C=0;C<s.characteristics.length;C++){s.characteristics[C].charAddEnable=false;s.characteristics[C].charClrEnable=false;s.characteristics[C].charDltEnable=false}}else{for(var h=0;h<s.characteristics.length;h++){var A=1;for(var V=0;V<s.characteristics.length;V++){if(h===V){continue}if(s.characteristics[V].Atnam===s.characteristics[h].Atnam&&s.characteristics[V].Class===s.characteristics[h].Class){A++}}if(A>1){s.characteristics[h].charDltEnable=true}else{s.characteristics[h].charDltEnable=false}if(s.characteristics[h].Atein===true){s.characteristics[h].charAddEnable=false}}}if(r.char){r.char.setModel(new t(s.characteristics))}}}}if(i.FLLAMCH){var F=$.map(i.FLLAMCH.results,function(e){return $.extend(true,{},e)});if(F){if(F.length>0){for(var T=0;T<F.length;T++){F[T].linCharEnable=true;delete F[T].__metadata;s.linearChar.push(F[T])}if(a==="true"){for(var C=0;C<s.linearChar.length;C++){s.linearChar[C].linCharEnable=false}}if(r.linearChar){r.linearChar.setModel(new t(s.linearChar))}}}}if(r.noOfCopyObjects!==undefined||r.noOfCopyObjects<0){s.Functionallocation="";s.FunctionallocationVS="Error";s.viewParameter="create";s.altlbl=[];var P,v;P=r.getView().getModel(n);v=P.getData();v.push(s);if(r.noOfCopyObjects<=1){var v=$.map(v,function(e){return $.extend(true,{},e)});if(v.length>0){v.forEach(function(e){if(e.intlAddr.length>0){e.intlAddr.forEach(function(t){t.Funcloc=e.Functionallocation})}})}}P.setData(v);sap.ui.getCore().setModel(new t(P.getData()),n);r.onUpdateTitleCount(n,v);r.noOfCopyObjects--;if(s.SupFunctionallocation!==""){r.DOIonReadFL(s.Functionallocation,s.SupFunctionallocation,"copy")}else{r.modifyDoiForCopyChange(o,"CPY")}return}if(s.Floccategory===""||s.Floccategory===undefined){s.FlocCatEnabled=true}else{s.FlocCatEnabled=false}if(s.Strucindicator===""||s.Strucindicator===undefined){s.StrucIndEnabled=true}else{s.StrucIndEnabled=false}if(s.Maintplant===""||s.Maintplant===undefined){s.MaintplantEnabled=true}else{s.MaintplantEnabled=false}if(s.Bukrs===""||s.Bukrs===undefined){s.BukrsEnabled=true}else{s.BukrsEnabled=false}s.FunctionalLocEnabled=false;var D;if(a==="true"){D=false;s.FunctionalLocEnabled=false;s.FlocCatEnabled=false;s.StrucIndEnabled=false;s.MaintplantEnabled=false;s.BukrsEnabled=false}else{D=s.IsEditable}if(r.detailFlag===true){if(a==="true"){for(var y=0;y<s.altlbl.length;y++){s.altlbl[y].enableAltLbl=false;s.altlbl[y].enableStrInd=false}}r.handleMainTableRow(s,n);if(s.Floccategory==="L"&&r.lamSwitch==="X"){r.lam.setVisible(true);r.lam.setModel(new t(s),"AIWLAM");r.linearChar.setVisible(true)}else{r.lam.setVisible(false);r.linearChar.setVisible(false)}if(s.SupFunctionallocation!==""){r.DOIonReadFL(s.Functionallocation,s.SupFunctionallocation,"change")}else{r.modifyDoiForCopyChange(o,"CHREAD");r.functionalLocation="";r.functionalLocDesc=""}if(s.Maintplant!==""&&s.MaintplantVS!=="Error"){this.SOPMaintPlant=s.Maintplant}else{this.SOPMaintPlant=""}}else{D=s.IsEditable;s.viewParameter="change";s.Modeldesc=o.Modeldesc;s.Modelref=o.Modelref;s.Modelrver=o.Modelrver;s.Modelext=o.Modelext;s.Modelname=o.Modelname;s.Modelver=o.Modelver;var I=true;sap.ui.getCore().setModel(I,"flocImportFlag");r.handleSearchImportPress(s,n);if(s.SupFunctionallocation!==""){r.DOIonReadFL(s.Functionallocation,s.SupFunctionallocation,"change",i)}else{r.modifyDoiForCopyChange(o,"CHIMPT")}}if(r.getView().getModel("flocAddressView")){var k=r.getView().getModel("flocAddressView");var N=k.getData();N.enabled=D;k.setData(N)}};var d=function(e){r.BusyDialog.close();var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var n=t.join("\n");r.createMessagePopover([{title:n,type:"Error"}],false)};r.BusyDialog.open();r._readData(l,o,u,d,c,s)},modifyDoiForCopyChange:function(e,t){var a=this;var r=$.map(a.DOIarrayFL,function(e){return $.extend(true,{},e)});if(e.Swerk!==""){r[0].maintenance=true;r[0].currentVal=e.Swerk;r[0].currentValDesc=e.Plantname;r[0].targetVal=e.Swerk}if(e.StorFloc!==""){r[1].maintenance=true;r[1].currentVal=e.StorFloc;r[1].currentValDesc=e.Locationdesc;r[1].targetVal=e.StorFloc}if(e.BeberFl!==""){r[2].maintenance=true;r[2].currentVal=e.BeberFl;r[2].currentValDesc=e.Fing;r[2].targetVal=e.BeberFl}if(e.Arbplfloc!==""){r[3].maintenance=true;r[3].currentVal=e.Arbplfloc;r[3].currentValDesc=e.Workcenterdesc;r[3].targetVal=e.Arbplfloc}if(e.Abckzfloc!==""){r[4].maintenance=true;r[4].currentVal=e.Abckzfloc;r[4].currentValDesc=e.Abctx;r[4].targetVal=e.Abckzfloc}if(e.KostFloc!==""){r[6].maintenance=true;r[6].currentVal=e.KostFloc;r[6].currentValDesc=e.Contareaname;r[6].targetVal=e.KostFloc}if(e.PlntFloc!==""){r[8].maintenance=true;r[8].currentVal=e.PlntFloc;r[8].currentValDesc=e.Planningplantdes;r[8].targetVal=e.PlntFloc}if(e.Ingrp!==""){r[9].maintenance=true;r[9].currentVal=e.Ingrp;r[9].currentValDesc=e.Plannergrpdesc;r[9].targetVal=e.Ingrp}if(e.Gewrkfloc!==""){r[10].maintenance=true;r[10].currentVal=e.Gewrkfloc;r[10].currentValDesc=e.MainWcDesc;r[10].targetVal=e.Gewrkfloc}if(e.Bukrsfloc!==""){r[5].maintenance=true;r[5].currentVal=e.Bukrsfloc;r[5].currentValDesc="";r[5].targetVal=e.Bukrsfloc}if(e.KokrFloc!==""){r[7].maintenance=true;r[7].currentVal=e.KokrFloc;r[7].currentValDesc="";r[7].targetVal=e.KokrFloc}if(e.Wergwfloc!==""){r[11].maintenance=true;r[11].currentVal=e.Wergwfloc;r[11].currentValDesc="";r[11].targetVal=e.Wergwfloc}if(e.Adrnr!==""){r[12].maintenance=true;r[12].currentVal=e.Adrnr;r[12].currentValDesc="";r[12].targetVal=e.Adrnr}if(t==="CHREAD"){a.getView().getModel("dataOrigin").setData(r)}else{sap.ui.getCore().getModel("dataOriginMOP").getData().FL.push({key:e.Tplnr,DOI:r})}},DOIonReadFL:function(e,t,a,r){var n=this;var l="AIWFLOC";var i="/ChangeRequestSet";var s=["FuncLoc","FLDOI"];var o={$expand:s};var c=n.getView().getModel();var u=[new sap.ui.model.Filter("Tplnr","EQ",""),new sap.ui.model.Filter("Tplma","EQ",t)];var d=function(t){n.BusyDialog.close();var l=t.results[0];var i=[];if(l.FLDOI.results.length>0){var i=l.FLDOI.results}var s=n.DOIarrayFL;for(var o=0;o<i.length;o++){i[o].instLoc=true;if(i[o].hasOwnProperty("maintenance")){if(!i[o].maintenance){i[o].targetVal=i[o].SupFlVal}}else{i[o].maintenance=s[o].maintenance;if(i[o].maintenance){i[o].instLoc=false}else{i[o].instLoc=true}i[o].currentVal=s[o].currentVal}if(i[o].Property==="Maintplant"||i[o].Property==="PplaEeqz"){i[o].locEnable=false;i[o].maintEnable=false}else{i[o].locEnable=true;i[o].maintEnable=true}i[o].targetVal=i[o].SupFlVal}if(a==="change"&&n.detailFlag===true){n.getView().getModel("dataOrigin").setData(i)}else{sap.ui.getCore().getModel("dataOriginMOP").getData().FL.push({key:e,DOI:i});if(r&&a==="change"){var c=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var u=0;u<r.FuncLoc.results.length;u++){var d=r.FuncLoc.results[u];for(var f=0;f<c.length;f++){if(e===c[f].key){var p=c[f].DOI;if(d.Swerki===""){p[0].maintenance=false;p[0].instLoc=false;p[0].SupFlVal="";p[0].currentVal="";p[0].targetVal=""}else if(d.Swerki==="D"){p[0].maintenance=true;p[0].instLoc=false;p[0].SupFlVal="";p[0].currentVal=d.Swerk;p[0].targetVal=d.Swerk}else{p[0].maintenance=false;p[0].instLoc=true;p[0].SupFlVal=d.Swerk;p[0].currentVal="";p[0].targetVal=d.Swerk}if(d.Storti===""){p[1].maintenance=false;p[1].instLoc=false;p[1].SupFlVal="";p[1].currentVal="";p[1].targetVal=""}else if(d.Storti==="D"){p[1].maintenance=true;p[1].instLoc=false;p[1].SupFlVal="";p[1].currentVal=d.StorFloc;p[1].targetVal=d.StorFloc}else{p[1].maintenance=false;p[1].instLoc=true;p[1].SupFlVal=d.StorFloc;p[1].currentVal="";p[1].targetVal=d.StorFloc}if(d.Beberi===""){p[2].maintenance=false;p[2].instLoc=false;p[2].SupFlVal="";p[2].currentVal="";p[2].targetVal=""}else if(d.Beberi==="D"){p[2].maintenance=true;p[2].instLoc=false;p[2].SupFlVal="";p[2].currentVal=d.BeberFl;p[2].targetVal=d.BeberFl}else{p[2].maintenance=false;p[2].instLoc=true;p[2].SupFlVal=d.BeberFl;p[2].currentVal="";p[2].targetVal=d.BeberFl}if(d.Ppsidi===""){p[3].maintenance=false;p[3].instLoc=false;p[3].SupFlVal="";p[3].currentVal="";p[3].targetVal=""}else if(d.Ppsidi==="D"){p[3].maintenance=true;p[3].instLoc=false;p[3].SupFlVal="";p[3].currentVal=d.Arbplfloc;p[3].targetVal=d.Arbplfloc}else{p[3].maintenance=false;p[3].instLoc=true;p[3].SupFlVal=d.Arbplfloc;p[3].currentVal="";p[3].targetVal=d.Arbplfloc}if(d.Abckzi===""){p[4].maintenance=false;p[4].instLoc=false;p[4].SupFlVal="";p[4].currentVal="";p[4].targetVal=""}else if(d.Abckzi==="D"){p[4].maintenance=true;p[4].instLoc=false;p[4].SupFlVal="";p[4].currentVal=d.Abckzfloc;p[4].targetVal=d.Abckzfloc}else{p[4].maintenance=false;p[4].instLoc=true;p[4].SupFlVal=d.Abckzfloc;p[4].currentVal="";p[4].targetVal=d.Abckzfloc}if(d.Bukrsi===""){p[5].maintenance=false;p[5].instLoc=false;p[5].SupFlVal="";p[5].currentVal="";p[5].targetVal=""}else if(d.Bukrsi==="D"){p[5].maintenance=true;p[5].instLoc=false;p[5].SupFlVal="";p[5].currentVal=d.Bukrsfloc;p[5].targetVal=d.Bukrsfloc}else{p[5].maintenance=false;p[5].instLoc=true;p[5].SupFlVal=d.Bukrsfloc;p[5].currentVal="";p[5].targetVal=d.Bukrsfloc}if(d.Kostli===""){p[6].maintenance=false;p[6].instLoc=false;p[6].SupFlVal="";p[6].currentVal="";p[6].targetVal=""}else if(d.Kostli==="D"){p[6].maintenance=true;p[6].instLoc=false;p[6].SupFlVal="";p[6].currentVal=d.KostFloc;p[6].targetVal=d.KostFloc}else{p[6].maintenance=false;p[6].instLoc=true;p[6].SupFlVal=d.KostFloc;p[6].currentVal="";p[6].targetVal=d.KostFloc}if(d.Kokrsi===""){p[7].maintenance=false;p[7].instLoc=false;p[7].SupFlVal="";p[7].currentVal="";p[7].targetVal=""}else if(d.Kokrsi==="D"){p[7].maintenance=true;p[7].instLoc=false;p[7].SupFlVal="";p[7].currentVal=d.KokrFloc;p[7].targetVal=d.KokrFloc}else{p[7].maintenance=false;p[7].instLoc=true;p[7].SupFlVal=d.KokrFloc;p[7].currentVal="";p[7].targetVal=d.KokrFloc}if(d.Iwerki===""){p[8].maintenance=false;p[8].instLoc=false;p[8].SupFlVal="";p[8].currentVal="";p[8].targetVal=""}else if(d.Iwerki==="D"){p[8].maintenance=true;p[8].instLoc=false;p[8].SupFlVal="";p[8].currentVal=d.PlntFloc;p[8].targetVal=d.PlntFloc}else{p[8].maintenance=false;p[8].instLoc=true;p[8].SupFlVal=d.PlntFloc;p[8].currentVal="";p[8].targetVal=d.PlntFloc}if(d.Ingrpi===""){p[9].maintenance=false;p[9].instLoc=false;p[9].SupFlVal="";p[9].currentVal="";p[9].targetVal=""}else if(d.Ingrpi==="D"){p[9].maintenance=true;p[9].instLoc=false;p[9].SupFlVal="";p[9].currentVal=d.Ingrp;p[9].targetVal=d.Ingrp}else{p[9].maintenance=false;p[9].instLoc=true;p[9].SupFlVal=d.Ingrp;p[9].currentVal="";p[9].targetVal=d.Ingrp}if(d.Lgwidi===""){p[10].maintenance=false;p[10].instLoc=false;p[10].SupFlVal="";p[10].currentVal="";p[10].targetVal=""}else if(d.Lgwidi==="D"){p[10].maintenance=true;p[10].instLoc=false;p[10].SupFlVal="";p[10].currentVal=d.Gewrkfloc;p[10].targetVal=d.Gewrkfloc}else{p[10].maintenance=false;p[10].instLoc=true;p[10].SupFlVal=d.Gewrkfloc;p[10].currentVal="";p[10].targetVal=d.Gewrkfloc}if(d.Adrnri===""){p[12].maintenance=false;p[12].instLoc=false;p[12].SupFlVal="";p[12].currentVal="";p[12].targetVal=""}else if(d.Adrnri==="D"){p[12].maintenance=true;p[12].instLoc=false;p[12].SupFlVal="";p[12].currentVal=d.Adrnr;p[12].targetVal=d.Adrnr}else{p[12].maintenance=false;p[12].instLoc=true;p[12].SupFlVal=d.Adrnr;p[12].currentVal="";p[12].targetVal=d.Adrnr}}}}}}};var f=function(){n.BusyDialog.close()};n.BusyDialog.open();n._readData(i,c,d,f,u,o)},readEquipmentData:function(e,a){var n=this;var l="AIWEQUI";var i="/ChangeRequestSet";var s=["EqClass","EqAddr","EqAddrI","EqEmail","EqFax","EqMltxt","EqPermt","Equipment","EqLAM","EqPRT","EqPRTNR","EqStock","EqTel","EqUrl","EqVal","Equi_DOI","AINHeaderinfo","AINAttachments","AINCharacteristics","AINAnnounce","EqDFPS","EqLAMCH"];var o={$expand:s};var c=n.getView().getModel();var u=[new sap.ui.model.Filter("Equnr","EQ",e),new sap.ui.model.Filter("HequEeqz","EQ",""),new sap.ui.model.Filter("Werks","EQ","")];var d=function(i){n.BusyDialog.close();var s=i.results[0];if(s===undefined){return}var o={Equnr:e,intlAddr:[],Partners:[],Permits:[],PRTInfo:{},Stock:{},dfps:{},classItems:[],characteristics:[],charNewButton:false,linearChar:[],linearCharAddEnable:false,attachmentCount:"0",Guids:"",EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",PlanvPrtVS:"None",PlanvPrtVST:"",SteufPrtVS:"None",SteufPrtVST:"",KtschPrtVS:"None",KtschPrtVST:"",EwformprtVS:"None",EwformprtVST:"",ConstrTypeMaxL:0,charValueMaxL:0};if(s.Equipment){var c=s.Equipment.results[0];if(c){o.Eqktx=c.Txtmi;o.EquipmentCatogory=c.Eqtyp;o.EquipCatgDescription=c.Etytx;o.Maintplant=c.Swerk;o.MaintplantDesc=c.Name1;o.SuperordinateEquip=c.HequEeqz;o.SuperordinateEquipDesc=c.SuperordEqDes;o.Bukrs=c.BukrEilo;o.Butxt=c.Butxt;o.Location=c.StorEilo;o.Locationdesc=c.Locationdesc;o.Abckz=c.AbckEilo;o.Abctx=c.Abctx;o.Kostl=c.KostEilo;o.Kokrs=c.KokrEilo;o.Mctxt=c.Contareaname;o.Answt=c.Answt;o.Ansdt=r.getDateFormat(c.Ansdt);o.Waers=c.Waers;o.Werks=c.PplaEeqz;o.Planningplantdes=c.Planningplantdes;o.Ingrp=c.IngrEeqz;o.Innam=c.Plannergrpdesc;o.Arbpl=c.ArbpEilo;o.Ktext=c.Workcenterdesc;o.WcWerks=c.WorkCenterPlant;o.MainArbpl=c.ArbpEeqz;o.MainKtext=c.MainWcDesc;o.MainWerks=c.MainWcPlant;o.BeberFl=c.BebeEilo;o.Fing=c.Fing;o.Tele=c.Tele;o.Herst=c.Herst;o.TechnicalObjectTyp=c.Eqart;o.Description=c.Eartx;o.Typbz=c.Typbz;o.ConstrType=c.SubmEeqz;o.ConstructionDesc=c.Constdesc;o.TechIdNum=c.TidnEeqz;o.Serge=c.Serge;o.MapaEeqz=c.MapaEeqz;o.EquipPosition=c.HeqnEeqz;o.Stattext=c.Stattext;o.StsmEqui=c.StsmEqui;o.StsmEquiDesc=c.Statproftxt;o.UstwEqui=c.UstwEqui;o.UswoEqui=c.UswoEqui;o.UstaEqui=c.UstaEqui;o.Deact=c.Deact;o.DeactEnable=a==="true"?false:true;o.Fhmkz=c.Fhmkz;o.Funcid=c.Funcid;o.Frcfit=c.Frcfit;o.Frcrmv=c.Frcrmv;o.Adrnr=c.Adrnr;o.AcsnodeIppe="";o.DescIppe="";o.VariantIppe="";o.AltIppe="";o.Ppeguid=c.Ppeguid;if(c.Swerk!==""){o.BukrsEnabled=false}else{o.BukrsEnabled=true}if(c.Eqtyp!=="P"){o.Tplnr=c.TplnEilo;o.Pltxt=c.Flocdescription;o.TplnrEnabled=true}else{o.Tplnr="";o.Pltxt="";o.TplnrEnabled=false}if(o.SuperordinateEquip!==""&&o.SuperordinateEquip!==undefined){o.TplnrEnabled=false;o.SuperordinateEquipEnabled=true}if(o.SuperordinateEquip===""&&o.Tplnr!==""&&o.Tplnr!==undefined){o.TplnrEnabled=true;o.SuperordinateEquipEnabled=false}if(o.SuperordinateEquip!==""&&o.SuperordinateEquip!==undefined||o.Tplnr!==""&&o.Tplnr!==undefined){o.MaintplantEnabled=false}else{o.MaintplantEnabled=true}}}if(s.EqPRT){var u=s.EqPRT.results[0];if(u){o.PlanvPrt=u.PlanvPrt;o.SteufPrt=u.SteufPrt;o.KtschPrt=u.KtschPrt;o.Ewformprt=u.Ewformprt;o.SteufRef=u.SteufRef;o.KtschRef=u.KtschRef;o.EwformRef=u.EwformRef}else{o.PlanvPrt="";o.SteufPrt="";o.KtschPrt="";o.Ewformprt="";o.SteufRef=false;o.KtschRef=false;o.EwformRef=false}}if(s.EqLAM.results.length>0){var d=s.EqLAM.results[0];o.lam={Equi:e,Lrpid:d.Lrpid,LrpidDesc:d.LrpDescr,Strtptatr:d.Strtptatr,Endptatr:d.Endptatr,Length:d.Length,LinUnit:d.LinUnit,LinUnitDesc:d.Uomtext,Startmrkr:d.Startmrkr,Endmrkr:d.Endmrkr,Mrkdisst:d.Mrkdisst,Mrkdisend:d.Mrkdisend,MrkrUnit:d.MrkrUnit,enableLrp:true,enableMarker:true,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None",LamDer:"N"}}else{o.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}if(s.EqAddr){var f=s.EqAddr.results[0];if(f){o.IsEditable=f.IsEditable;o.Title=f.Titletxt;o.TitleCode=f.Title;o.Name1=f.Name1;o.Name2=f.Name2;o.Name3=f.Name3;o.Name4=f.Name4;o.Sort1=f.Sort1;o.Sort2=f.Sort2;o.NameCo=f.NameCo;o.PostCod1=f.PostCod1;o.City1=f.City1;o.Building=f.Building;o.Floor=f.Floor;o.Roomnum=f.Roomnum;o.AddrLocation=f.Location;o.Strsuppl1=f.Strsuppl1;o.Strsuppl2=f.Strsuppl2;o.Strsuppl3=f.Strsuppl3;o.RefPosta=f.RefPosta;o.Landx=f.Landx;o.TimeZone=f.TimeZone;o.Region=f.RfePost;o.RegionDesc=f.Regiotxt}else{o.Title=o.Title?o.Title:"";o.TitleCode=o.TitleCode?o.TitleCode:"";o.Name1=o.Name1?o.Name1:"";o.Name2=o.Name2?o.Name2:"";o.Name3=o.Name3?o.Name3:"";o.Name4=o.Name4?o.Name4:"";o.Sort1=o.Sort1?o.Sort1:"";o.Sort2=o.Sort2?o.Sort2:"";o.NameCo=o.NameCo?o.NameCo:"";o.PostCod1=o.PostCod1?o.PostCod1:"";o.City1=o.City1?o.City1:"";o.Building=o.Building?o.Building:"";o.Floor=o.Floor?o.Floor:"";o.Roomnum=o.Roomnum?o.Roomnum:"";o.Strsuppl1=o.Strsuppl1?o.Strsuppl1:"";o.Strsuppl2=o.Strsuppl2?o.Strsuppl2:"";o.Strsuppl3=o.Strsuppl3?o.Strsuppl3:"";o.AddrLocation=o.AddrLocation?o.AddrLocation:"";o.RefPosta=o.RefPosta?o.RefPosta:"";o.Landx=o.Landx?o.Landx:"";o.TimeZone=o.TimeZone?o.TimeZone:"";o.Region=o.Region?o.Region:"";o.RegionDesc=o.RegionDesc?o.RegionDesc:""}}var p=s.EqAddrI.results;if(p.length>0){for(var g=0;g<p.length;g++){p[g].AdNationEnable=false;p[g].City1iVS="None";p[g].StreetiVS="None";o.intlAddr.push(p[g])}}var S=s.AINHeaderinfo.results;if(S.length>0){for(var m=0;m<S.length;m++){var h=S[0];var M={};M.Name=h.Name;M.Modelid=h.Modelid;M.Description=h.Description;M.Manufacturer=h.Manufacturer;M.Modeltemplate=h.Modeltemplate;M.Globalid=h.Globalid;M.moreInfo=true;M.linkVisible=false;M.deLinkVisible=true;M.equiCreate=i.results[0].AineqInd;M.AinEqunr=i.results[0].AinEqunr}}if(s.EqDFPS&&s.EqDFPS.results.length>0){var V=s.EqDFPS.results[0];o.dfps={Equnr:c.Equi,Tailno:V.DeviceId,Area:V.Topsiteid,AreaDesc:V.Topsitede,AreaPrfl:V.AreaPro,AreaPro:V.AreaPrfl,Site:V.SiteId,SiteDesc:V.SiteDesc,SitePrfl:V.SitePro,SitePro:V.SitePrfl,MPO:V.MpoId,MPODesc:V.MpoDescr,RIC:V.RicId,RICDesc:V.RicDescr,ModelId:V.ModelId,ModelIdDesc:V.ModelDes,ForeignEq:r.XtoTrue(V.Foreignob),TechSts:V.TecState,OperSts:V.DepState,Remark:V.DfpsRmrk,dfpsCrtEnabled:false,dfpsDltEnabled:true,dfpsEnabled:true,TailnoReq:true,Foreignob:V.Foreignob}}else{o.dfps={Equnr:c.Equi,Tailno:"",Area:"",AreaDesc:"",AreaPrfl:"",AreaPro:"",Site:"",SiteDesc:"",SitePrfl:"",SitePro:"",MPO:"",MPODesc:"",RIC:"",RICDesc:"",ModelId:"",ModelIdDesc:"",ForeignEq:false,TechSts:"",OperSts:"",Remark:"",dfpsCrtEnabled:true,dfpsDltEnabled:false,dfpsEnabled:false,TailnoReq:false,SitePro:"",Foreignob:false,AreaPro:""}}if(s.EqClass){var E=$.map(s.EqClass.results,function(e){return $.extend(true,{},e)});if(E){if(E.length>0){for(var b=0;b<E.length;b++){E[b].ctEnable=false;E[b].classEnable=false;E[b].ClassTypeDesc=E[b].Artxt;delete E[b].Artxt;E[b].ClassDesc=E[b].Kltxt;delete E[b].Kltxt;delete E[b].Changerequestid;delete E[b].Clint;delete E[b].Service;E[b].classDelEnable=true;o.classItems.push(E[b])}if(a==="true"){for(var b=0;b<Object.classItems.length;b++){Object.classItems[b].classDelEnable=false}}o.charNewButton=true;if(n.class){n.class.setModel(new t(o.classItems))}}}}if(s.EqVal){var C=$.map(s.EqVal.results,function(e){return $.extend(true,{},e)});if(C){if(C.length>0){for(var L=0;L<C.length;L++){C[L].cNameEnable=false;C[L].Textbz=C[L].Atwtb;delete C[L].Ataut;delete C[L].Ataw1;delete C[L].Atawe;delete C[L].Atcod;delete C[L].Atflb;delete C[L].Atflv;delete C[L].Atimb;delete C[L].Atsrt;delete C[L].Atvglart;delete C[L].Atzis;delete C[L].Changerequestid;delete C[L].CharName;delete C[L].Charid;delete C[L].Classtype;delete C[L].Service;delete C[L].Valcnt;C[L].slNo=L+1;C[L].flag=C[L].Class+"-"+C[L].slNo;o.characteristics.push(C[L])}if(a==="true"){for(var b=0;b<o.characteristics.length;b++){o.characteristics[b].charAddEnable=false;o.characteristics[b].charClrEnable=false;o.characteristics[b].charDltEnable=false}}else{for(var g=0;g<o.characteristics.length;g++){var T=1;for(var A=0;A<o.characteristics.length;A++){if(g===A){continue}if(o.characteristics[A].Atnam===o.characteristics[g].Atnam&&o.characteristics[A].Class===o.characteristics[g].Class){T++}}if(T>1){o.characteristics[g].charDltEnable=true}else{o.characteristics[g].charDltEnable=false}if(o.characteristics[g].Atein===true){o.characteristics[g].charAddEnable=false}}}if(n.char){n.char.setModel(new t(o.characteristics))}}}}if(s.EqLAMCH){var F=$.map(s.EqLAMCH.results,function(e){return $.extend(true,{},e)});if(F){if(F.length>0){for(var L=0;L<F.length;L++){F[L].linCharEnable=true;delete F[L].__metadata;o.linearChar.push(F[L])}if(a==="true"){for(var b=0;b<o.linearChar.length;b++){o.linearChar[b].linCharEnable=false}}if(n.linearChar){n.linearChar.setModel(new t(o.linearChar))}}}}if(s.EqPRTNR){var P={};var v=s.EqPRTNR.results;if(v){if(v.length>0){for(var D=0;D<v.length;D++){P.Partnrfun=v[D].Partnrfun;P.Partnereq=v[D].Partnereq;P.NameList=v[D].NameList;P.AddInd=v[D].AddInd;P.Address=v[D].Address;P.Partnrfuntxt=v[D].Partnrfuntxt;o.Partners.push(P)}}}}if(s.EqPermt){var y={};var I=s.EqPermt.results;if(I){if(I.length>0){for(var k=0;k<I.length;k++){y.Countereq=I[k].Countereq;y.Pmsog=I[k].Pmsog;y.KAa=I[k].KAa;y.KDruck=I[k].KDruck;y.KPro=I[k].KPro;o.Permits.push(y)}o.PmtLtext=I[0].PmtLtext}}}if(s.EqPRT){if(s.EqPRT.results){var N=s.EqPRT.results[0];if(N){o.PRTInfo.PlanvPrt=N.PlanvPrt;o.PRTInfo.Fgru1=N.Fgru1;o.PRTInfo.Fgru2=N.Fgru2;o.PRTInfo.Kzkbl=N.Kzkbl;o.PRTInfo.SteufPrt=N.SteufPrt;o.PRTInfo.SteufRef=N.SteufRef;o.PRTInfo.KtschPrt=N.KtschPrt;o.PRTInfo.Ktschref=N.Ktschref;o.PRTInfo.Ewformprt=N.Ewformprt;o.PRTInfo.Ewformref=N.Ewformref;o.PRTInfo.Bzoffbprt=N.Bzoffbprt;o.PRTInfo.Bzoffbref=N.Bzoffbref;o.PRTInfo.Offstb=N.Offstb;o.PRTInfo.Ehoffbprt=N.Ehoffbprt;o.PRTInfo.Offstbref=N.Offstbref;o.PRTInfo.Bzoffeprt=N.Bzoffeprt;o.PRTInfo.Offsteref=N.Offsteref;o.PRTInfo.Offste=N.Offste;o.PRTInfo.Ehoffeprt=N.Ehoffeprt;o.PRTInfo.Offsteref=N.Offsteref;o.PRTInfo.Warpl=N.Warpl;o.PRTInfo.PointEq=N.PointEq}}}if(s.EqStock){if(s.EqStock.results){var q=s.EqStock.results[0];if(q){o.Stock.Equilbbsa=q.Equilbbsa;o.Stock.BWerk=q.BWerk;o.Stock.Sloc2equi=q.Sloc2equi;o.Stock.Chrg2stk=q.Chrg2stk;o.Stock.Sobk2stk=q.Sobk2stk;o.Stock.Kunnr=q.Kunnr;o.Stock.Kdauf=q.Kdauf;o.Stock.PsPspPn=q.PsPspPn;o.Stock.LifnrStc=q.LifnrStc}}}if(n.CopyTempArray&&n.CopyTempArray.length>0){o.Equnr=n.CopyTempArray[0];o.viewParameter="create";o.EqunrEnabled=true;o.EquipCatEnabled=true;o.MaintplantEnabled=true;o.BukrsEnabled=true;var x=sap.ui.getCore().getModel("equiAddressView");var w=x.getData();var R=true;var B;if(w.length>0){for(var O=0;O<w.length;O++){if(o.Equnr===w[O].Equnr){R=false;break}}}if(R){B={Equnr:o.Equnr,IsEditable:o.IsEditable};w.push(B);x.setData(w)}if(o.EquipmentCatogory===""||o.EquipmentCatogory===undefined){o.EquipCatEnabled=true}else{o.EquipCatEnabled=true}if(o.Maintplant===""||o.Maintplant===undefined){o.MaintplantEnabled=true}else{o.MaintplantEnabled=true}if(o.Bukrs===""||o.Bukrs===undefined){o.BukrsEnabled=true}else{o.BukrsEnabled=false}n.CopyTempArray.shift();var W,U;W=n.getView().getModel(l);U=W.getData();U.push(o);if(n.CopyTempArray.length<=0){var U=$.map(U,function(e){return $.extend(true,{},e)});if(U.length>0){U.forEach(function(e){if(e.intlAddr.length>0){e.intlAddr.forEach(function(t){t.Equi=e.Equnr})}})}}W.setData(U);sap.ui.getCore().setModel(new t(W.getData()),l);n.onUpdateTitleCount(l,U);if(o.SuperordinateEquip!==""){n.DOIonReadEQ(o.Equnr,o.SuperordinateEquip,"copy")}else{n.modifyEQDoiForCopyChange(c,"CPY")}if(M){sap.ui.getCore().getModel("ainMOP").getData().push({key:o.Equnr,AIN:M})}return}if(o.EquipmentCatogory===""||o.EquipmentCatogory===undefined){o.EquipCatEnabled=true}else{o.EquipCatEnabled=false}if(o.Maintplant===""||o.Maintplant===undefined){o.MaintplantEnabled=true}else{o.MaintplantEnabled=false}if(o.Bukrs===""||o.Bukrs===undefined){o.BukrsEnabled=true}else{o.BukrsEnabled=false}o.EqunrEnabled=false;var z;if(a==="true"){z=false;o.EqunrEnabled=false;o.EquipCatEnabled=false;o.MaintplantEnabled=false;o.BukrsEnabled=false;o.TplnrEnabled=false}else{z=o.IsEditable}if(n.detailFlag===true){var K=sap.ui.getCore().getModel("PRTVisibleEnableModel");var H=K.getData();if(o.Fhmkz&&a==="true"){H.PRTVisible=true;H.PRTEnable=false}else if(o.Fhmkz&&a==="false"){H.PRTVisible=true;H.PRTEnable=true}else{H.PRTVisible=false;H.PRTEnable=false}K.setData(H);n.getView().setModel(K,"PRTVisibleEnableModel");if(o.EquipmentCatogory==="L"&&n.lamSwitch==="X"){n.lam.setVisible(true);n.linearChar.setVisible(true);if(a==="true"){o.lam.enableLrp=false;o.lam.enableMarker=false}n.lam.setModel(new t(o),"AIWLAM")}else{n.lam.setVisible(false);n.linearChar.setVisible(false)}n.handleMainTableRow(o,l);if(o.SuperordinateEquip!==""){n.DOIonReadEQ(o.Equnr,o.SuperordinateEquip,"change")}else{n.modifyEQDoiForCopyChange(c,"CHREAD");n.superiorEquipment="";n.superiorEqDesc="";n.functionalLocation="";n.functionalLocDesc=""}if(M){n.getView().getModel("ain").setData(M);sap.ui.getCore().getModel("ain").setData(M)}if(o.Maintplant!==""&&o.MaintplantVS!=="Error"){this.SOPMaintPlant=o.Maintplant}else{this.SOPMaintPlant=""}if(o.Ppeguid!==null&&o.Ppeguid!==""){n.getIPPEConfig(o.Ppeguid)}}else{z=o.IsEditable;o.viewParameter="change";n.handleSearchImportPress(o,l);if(o.SuperordinateEquip!==""){n.DOIonReadEQ(o.Equnr,o.SuperordinateEquip,"change",s)}else{n.modifyEQDoiForCopyChange(c,"CHIMPT")}if(M){sap.ui.getCore().getModel("ainMOP").getData().push({key:o.Equnr,AIN:M})}var x=sap.ui.getCore().getModel("equiAddressView");var w=x.getData();var R=true;var B;if(w.length>0){for(var O=0;O<w.length;O++){if(o.Equnr===w[O].Equnr){R=false;break}}}if(R){B={Equnr:o.Equnr,IsEditable:o.IsEditable};w.push(B);x.setData(w)}}n.readSystem(n);if(n.getView().getModel("equiAddressView")){var _=n.getView().getModel("equiAddressView");var Q=_.getData();Q.enabled=z;_.setData(Q)}};var f=function(){n.BusyDialog.close()};n.BusyDialog.open();n._readData(i,c,d,f,u,o)},DOIonReadEQ:function(e,t,a,r){var n=this;var l="AIWEQUI";var i="/ChangeRequestSet";var s=["Equipment","Equi_DOI"];var o={$expand:s};var c=n.getView().getModel();var u=[new sap.ui.model.Filter("Equnr","EQ",""),new sap.ui.model.Filter("HequEeqz","EQ",t),new sap.ui.model.Filter("Werks","EQ","")];var d=function(t){n.BusyDialog.close();var l=t.results[0];var i=[];if(l.Equi_DOI.results.length>0){var i=l.Equi_DOI.results}var s=n.DOIarrayEQ;for(var o=0;o<i.length;o++){i[o].instLoc=true;if(i[o].hasOwnProperty("maintenance")){if(!i[o].maintenance){i[o].targetVal=i[o].SupFlVal}}else{i[o].maintenance=s[o].maintenance;if(i[o].maintenance){i[o].instLoc=false}else{i[o].instLoc=true}i[o].currentVal=s[o].currentVal}if(i[o].Property==="Maintplant"||i[o].Property==="PplaEeqz"){i[o].locEnable=false;i[o].maintEnable=false}else{i[o].locEnable=true;i[o].maintEnable=true}i[o].targetVal=i[o].SupFlVal}if(a==="change"&&n.detailFlag===true){n.getView().getModel("dataOrigin").setData(i)}else{sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.push({key:e,DOI:i});if(r&&a==="change"){var c=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var u=0;u<r.Equipment.results.length;u++){var d=r.Equipment.results[u];for(var f=0;f<c.length;f++){if(e===c[f].key){var p=c[f].DOI;if(d.Swerki===""){p[0].maintenance=false;p[0].instLoc=false;p[0].SupFlVal="";p[0].currentVal="";p[0].targetVal=""}else if(d.Swerki==="D"){p[0].maintenance=true;p[0].instLoc=false;p[0].SupFlVal="";p[0].currentVal=d.Swerk;p[0].targetVal=d.Swerk}else{p[0].maintenance=false;p[0].instLoc=true;p[0].SupFlVal=d.Swerk;p[0].currentVal="";p[0].targetVal=d.Swerk}if(d.Storti===""){p[1].maintenance=false;p[1].instLoc=false;p[1].SupFlVal="";p[1].currentVal="";p[1].targetVal=""}else if(d.Storti==="D"){p[1].maintenance=true;p[1].instLoc=false;p[1].SupFlVal="";p[1].currentVal=d.StorEilo;p[1].targetVal=d.StorEilo}else{p[1].maintenance=false;p[1].instLoc=true;p[1].SupFlVal=d.StorEilo;p[1].currentVal="";p[1].targetVal=d.StorEilo}if(d.Beberi===""){p[2].maintenance=false;p[2].instLoc=false;p[2].SupFlVal="";p[2].currentVal="";p[2].targetVal=""}else if(d.Beberi==="D"){p[2].maintenance=true;p[2].instLoc=false;p[2].SupFlVal="";p[2].currentVal=d.BebeEilo;p[2].targetVal=d.BebeEilo}else{p[2].maintenance=false;p[2].instLoc=true;p[2].SupFlVal=d.BebeEilo;p[2].currentVal="";p[2].targetVal=d.BebeEilo}if(d.Ppsidi===""){p[3].maintenance=false;p[3].instLoc=false;p[3].SupFlVal="";p[3].currentVal="";p[3].targetVal=""}else if(d.Ppsidi==="D"){p[3].maintenance=true;p[3].instLoc=false;p[3].SupFlVal="";p[3].currentVal=d.ArbpEilo;p[3].targetVal=d.ArbpEilo}else{p[3].maintenance=false;p[3].instLoc=true;p[3].SupFlVal=d.ArbpEilo;p[3].currentVal="";p[3].targetVal=d.ArbpEilo}if(d.Abckzi===""){p[4].maintenance=false;p[4].instLoc=false;p[4].SupFlVal="";p[4].currentVal="";p[4].targetVal=""}else if(d.Abckzi==="D"){p[4].maintenance=true;p[4].instLoc=false;p[4].SupFlVal="";p[4].currentVal=d.AbckEilo;p[4].targetVal=d.AbckEilo}else{p[4].maintenance=false;p[4].instLoc=true;p[4].SupFlVal=d.AbckEilo;p[4].currentVal="";p[4].targetVal=d.AbckEilo}if(d.Kostli===""){p[5].maintenance=false;p[5].instLoc=false;p[5].SupFlVal="";p[5].currentVal="";p[5].targetVal=""}else if(d.Kostli==="D"){p[5].maintenance=true;p[5].instLoc=false;p[5].SupFlVal="";p[5].currentVal=d.KostEilo;p[5].targetVal=d.KostEilo}else{p[5].maintenance=false;p[5].instLoc=true;p[5].SupFlVal=d.KostEilo;p[5].currentVal="";p[5].targetVal=d.KostEilo}if(d.Iwerki===""){p[6].maintenance=false;p[6].instLoc=false;p[6].SupFlVal="";p[6].currentVal="";p[6].targetVal=""}else if(d.Iwerki==="D"){p[6].maintenance=true;p[6].instLoc=false;p[6].SupFlVal="";p[6].currentVal=d.PplaEeqz;p[6].targetVal=d.PplaEeqz}else{p[6].maintenance=false;p[6].instLoc=true;p[6].SupFlVal=d.PplaEeqz;p[6].currentVal="";p[6].targetVal=d.PplaEeqz}if(d.Ingrpi===""){p[7].maintenance=false;p[7].instLoc=false;p[7].SupFlVal="";p[7].currentVal="";p[7].targetVal=""}else if(d.Ingrpi==="D"){p[7].maintenance=true;p[7].instLoc=false;p[7].SupFlVal="";p[7].currentVal=d.IngrEeqz;p[7].targetVal=d.IngrEeqz}else{p[7].maintenance=false;p[7].instLoc=true;p[7].SupFlVal=d.IngrEeqz;p[7].currentVal="";p[7].targetVal=d.IngrEeqz}if(d.Gewrki===""){p[8].maintenance=false;p[8].instLoc=false;p[8].SupFlVal="";p[8].currentVal="";p[8].targetVal=""}else if(d.Gewrki==="D"){p[8].maintenance=true;p[8].instLoc=false;p[8].SupFlVal="";p[8].currentVal=d.ArbpEeqz;p[8].targetVal=d.ArbpEeqz}else{p[8].maintenance=false;p[8].instLoc=true;p[8].SupFlVal=d.ArbpEeqz;p[8].currentVal="";p[8].targetVal=d.ArbpEeqz}if(d.Adrnri===""){p[10].maintenance=false;p[10].instLoc=false;p[10].SupFlVal="";p[10].currentVal="";p[10].targetVal=""}else if(d.Adrnri==="D"){p[10].maintenance=true;p[10].instLoc=false;p[10].SupFlVal="";p[10].currentVal=d.Adrnr;p[10].targetVal=d.Adrnr}else{p[10].maintenance=false;p[10].instLoc=true;p[10].SupFlVal=d.Adrnr;p[10].currentVal="";p[10].targetVal=d.Adrnr}}}}}}};var f=function(){n.BusyDialog.close()};n.BusyDialog.open();n._readData(i,c,d,f,u,o)},modifyEQDoiForCopyChange:function(e,t){var a=this;var r=$.map(a.DOIarrayEQ,function(e){return $.extend(true,{},e)});if(e.Swerk!==""){r[0].maintenance=true;r[0].currentVal=e.Swerk;r[0].currentValDesc=e.Name1;r[0].targetVal=e.Swerk}if(e.StorEilo!==""){r[1].maintenance=true;r[1].currentVal=e.StorEilo;r[1].currentValDesc=e.Locationdesc;r[1].targetVal=e.StorEilo}if(e.BebeEilo!==""){r[2].maintenance=true;r[2].currentVal=e.BebeEilo;r[2].currentValDesc=e.Fing;r[2].targetVal=e.BebeEilo}if(e.ArbpEilo!==""){r[3].maintenance=true;r[3].currentVal=e.ArbpEilo;r[3].currentValDesc=e.Workcenterdesc;r[3].targetVal=e.ArbpEilo}if(e.AbckEilo!==""){r[4].maintenance=true;r[4].currentVal=e.AbckEilo;r[4].currentValDesc=e.Abctx;r[4].targetVal=e.AbckEilo}if(e.KostEilo!==""){r[5].maintenance=true;r[5].currentVal=e.KostEilo;r[5].currentValDesc=e.Contareaname;r[5].targetVal=e.KostEilo}if(e.PplaEeqz!==""){r[6].maintenance=true;r[6].currentVal=e.PplaEeqz;r[6].currentValDesc=e.Planningplantdes;r[6].targetVal=e.PplaEeqz}if(e.IngrEeqz!==""){r[7].maintenance=true;r[7].currentVal=e.IngrEeqz;r[7].currentValDesc=e.Plannergrpdesc;r[7].targetVal=e.IngrEeqz}if(e.ArbpEeqz!==""){r[8].maintenance=true;r[8].currentVal=e.ArbpEeqz;r[8].currentValDesc=e.MainWcDesc;r[8].targetVal=e.ArbpEeqz}if(e.WorkCenterPlant!==""){r[9].maintenance=true;r[9].currentVal=e.WorkCenterPlant;r[9].currentValDesc="";r[9].targetVal=e.WorkCenterPlant}if(e.Adrnr!==""){r[10].maintenance=true;r[10].currentVal=e.Adrnr;r[10].currentValDesc="";r[10].targetVal=e.Adrnr}if(t==="CHREAD"){a.getView().getModel("dataOrigin").setData(r)}else{sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.push({key:e.Equnr,DOI:r})}},readMeasuringPointData:function(e,a){var n=this;var l="AIWMSPT";var i="/ChangeRequestSet";var s=["MSClass","MSLAM","MSPoint","MSVal","DataOrigin_N"];var o={$expand:s};var c=n.getView().getModel();var u=[new sap.ui.model.Filter("Point","EQ",e)];var d=function(i){n.BusyDialog.close();var s=i.results[0];if(s===undefined){return}var o={Mspoint:e,classItems:[],characteristics:[],charNewButton:false,attachmentCount:"0",Guids:"",PttxtVS:"None",PttxtVST:"",ObtypMsVS:"None",ObtypMsVST:"",MptypVS:"None",MptypVST:"",AtnamMsVS:"None",AtnamMsVST:"",EqunrVS:"None",EqunrVST:"",TplnrVS:"None",TplnrVST:"",CodgrVS:"None",CodgrVST:"",MspointEnabled:true,ObtypMsEnabled:true,EqunrEnabled:true,TplnrEnabled:true,MptypEnabled:true,AtnamMsEnabled:true,valCodeStuffSel:false};if(s.MSPoint){var c=s.MSPoint.results[0];if(c){o.Pttxt=c.Pttxt;o.ObtypMs=c.ObtypMs;if(o.ObtypMs==="IFL"){o.EqunrEnabled=false;o.TplnrEnabled=true}else if(o.ObtypMs==="IEQ"){o.EqunrEnabled=true;o.TplnrEnabled=false}o.Txt=c.Objtypetxt;o.Mptyp=c.Mptyp;o.Mpttx=c.Mpttx;o.Equnr=c.Equnr;o.Eqktx=c.Eqktx;o.Tplnr=c.Tplnr;o.Pltxt=c.Floctxt;o.Indct=c.Indct;o.AtnamMs=c.AtnamMs;o.Atbez=c.Atbez;o.Mseh6=c.Mseh6;o.Msehl=c.Msehl;o.Codgr=c.Codgr;o.Codgrtxt=c.Codgrtxt;o.Cjumc=c.Cjumc;o.Cdsuf=c.Cdsuf;o.Pyeac=c.Pyeac;o.Desir=c.Desir;o.Mrmax=c.Mrmax;o.Mrmin=c.Mrmin;o.Deact=c.Inact;o.DeactEnable=true;if(c.Equnr!==""){o.EqunrEnabled=true;o.EqunrLblVis=true;o.EqunrInpVis=true;o.EqktxInpVis=true;o.TplnrEnabled=false;o.TplnrLblVis=false;o.TplnrInpVis=false;o.PltxtInpVis=false}else{o.EqunrEnabled=false;o.EqunrLblVis=false;o.EqunrInpVis=false;o.EqktxInpVis=false;o.TplnrEnabled=true;o.TplnrLblVis=true;o.TplnrInpVis=true;o.PltxtInpVis=true}if(c.Indct){o.countEnable=true;o.tEnable=false}else{o.countEnable=false;o.tEnable=true}o.Psort=c.Psort;o.Inact=c.Inact;o.Mseh6=c.Mseh6;o.Msehl=c.Msehl;o.Decim=c.Decim.toString();o.Locas=c.Locas;o.Maktx=c.Maktx;o.Begru=c.Begru;o.Begtx=c.Begtx;o.Expon=c.Expon;o.Mrngu=c.Mrngu;o.Dstxt=c.Dstxt;o.Indrv=c.Indrv;o.Inact=c.Inact}}if(s.MSLAM.results.length>0){var u=s.MSLAM.results[0];o.lam={Mspoint:e,Lrpid:u.Lrpid,LrpidDesc:u.LrpDescr,Strtptatr:u.Strtptatr,Endptatr:u.Endptatr,Length:u.Length,LinUnit:u.LinUnit,LinUnitDesc:u.Uomtext,Startmrkr:u.Startmrkr,Endmrkr:u.Endmrkr,Mrkdisst:u.Mrkdisst,Mrkdisend:u.Mrkdisend,MrkrUnit:u.MrkrUnit,enableLrp:true,enableMarker:true,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}else{o.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}if(s.MSClass){var d=$.map(s.MSClass.results,function(e){return $.extend(true,{},e)});if(d){if(d.length>0){for(var f=0;f<d.length;f++){d[f].ctEnable=false;d[f].classEnable=false;d[f].ClassTypeDesc=d[f].Artxt;delete d[f].Artxt;d[f].ClassDesc=d[f].Kltxt;delete d[f].Kltxt;delete d[f].Changerequestid;delete d[f].Clint;delete d[f].Service;d[f].classDelEnable=true;o.classItems.push(d[f])}if(a==="true"){for(var f=0;f<Object.classItems.length;f++){Object.classItems[f].classDelEnable=false}}o.charNewButton=true;if(n.class){n.class.setModel(new t(o.classItems))}}}}if(s.MSVal){var p=$.map(s.MSVal.results,function(e){return $.extend(true,{},e)});if(p){if(p.length>0){for(var g=0;g<p.length;g++){p[g].cNameEnable=false;p[g].Textbz=p[g].Atwtb;delete p[g].Ataut;delete p[g].Ataw1;delete p[g].Atawe;delete p[g].Atcod;delete p[g].Atflb;delete p[g].Atflv;delete p[g].Atimb;delete p[g].Atsrt;delete p[g].Atvglart;delete p[g].Atzis;delete p[g].Changerequestid;delete p[g].CharName;delete p[g].Charid;delete p[g].Classtype;delete p[g].Service;delete p[g].Valcnt;p[g].slNo=g+1;p[g].flag=p[g].Class+"-"+p[g].slNo;o.characteristics.push(p[g])}if(a==="true"){for(var f=0;f<o.characteristics.length;f++){o.characteristics[f].charAddEnable=false;o.characteristics[f].charClrEnable=false;o.characteristics[f].charDltEnable=false}}else{for(var S=0;S<o.characteristics.length;S++){var m=1;for(var h=0;h<o.characteristics.length;h++){if(S===h){continue}if(o.characteristics[h].Atnam===o.characteristics[S].Atnam&&o.characteristics[h].Class===o.characteristics[S].Class){m++}}if(m>1){o.characteristics[S].charDltEnable=true}else{o.characteristics[S].charDltEnable=false}if(o.characteristics[S].Atein===true){o.characteristics[S].charAddEnable=false}}}if(n.char){n.char.setModel(new t(o.characteristics))}}}}if(s.DataOrigin_N.results.length>0){var M=s.DataOrigin_N.results[0];o.readTransfSel=true;o.readTransf=M.Trans;o.RT={readTransfSel:true,readTransf:M.Trans,RTValidFrom:r.dateFormat(M.Datlo),RTTime:r.getTime(M.Timlo),RTMeasPos:M.Psort,RTMeasDesc:M.Pttxt,RTFloc:M.Tplnr,RTFlocDesc:M.Pltxt,RTEqui:M.Equnr,RTEquiDesc:M.Eqktx}}else{o.readTransfSel=false;o.readTransf="";o.RT={readTransfSel:false,readTransf:"",RTValidFrom:"",RTTime:"",RTMeasPos:"",RTMeasDesc:"",RTFloc:"",RTFlocDesc:"",RTEqui:"",RTEquiDesc:""}}n.setCommonApprovalData(l,o);if(n.CopyTempArray&&n.CopyTempArray.length>0){o.Mspoint=n.CopyTempArray[0];o.viewParameter="create";o.MspointEnabled=true;o.ObtypMsEnabled=true;if(o.Equnr===""||o.Equnr===undefined){o.EqunrEnabled=false}else{o.EqunrEnabled=true}if(o.Tplnr===""||o.Tplnr===undefined){o.TplnrEnabled=false}else{o.TplnrEnabled=true}o.MptypEnabled=true;o.AtnamMsEnabled=true;n.CopyTempArray.shift();var V,E;V=n.getView().getModel(l);E=V.getData();E.push(o);V.setData(E);sap.ui.getCore().setModel(new t(V.getData()),l);n.onUpdateTitleCount(l,E);return}if(o.ObtypMs===""||o.ObtypMs===undefined){o.ObtypMsEnabled=true}else{o.ObtypMsEnabled=false}if(o.ObtypMs==="IEQ"){o.TplnrEnabled=false;if(o.Equnr===""||o.Equnr===undefined){o.EqunrEnabled=true}else{o.EqunrEnabled=false}}if(o.ObtypMs==="IFL"){o.EqunrEnabled=false;if(o.Tplnr===""||o.Tplnr===undefined){o.TplnrEnabled=true}else{o.TplnrEnabled=false}}if(o.Mptyp===""||o.Mptyp===undefined){o.MptypEnabled=true}else{o.MptypEnabled=false}if(o.AtnamMs===""||o.AtnamMs===undefined){o.AtnamMsEnabled=true}else{o.AtnamMsEnabled=false}o.MspointEnabled=false;if(a==="true"){o.MspointEnabled=false;o.ObtypMsEnabled=false;o.EqunrEnabled=false;o.TplnrEnabled=false;o.MptypEnabled=false;o.AtnamMsEnabled=false;o.DeactEnable=false}if(n.detailFlag===true){if(o.Mptyp==="L"&&n.lamSwitch==="X"){n.lam.setVisible(true);if(a==="true"){o.lam.enableLrp=false;o.lam.enableMarker=false}n.lam.setModel(new t(o),"AIWLAM")}else{n.lam.setVisible(false)}n.handleMainTableRow(o,l)}else{o.viewParameter="change";n.handleSearchImportPress(o,l)}};var f=function(){n.BusyDialog.close()};n.BusyDialog.open();n._readData(i,c,d,f,u,o)},readMaintenancePlanData:function(e,a){var n=this;var l="AIWMPMI";var i="/ChangeRequestSet";var s=["MPCycle","MPItem","MPLAM","MPLAN","MPOBList","ClassMpl","ValuaMpl"];var o={$expand:s};var c=n.getView().getModel();var u=[new sap.ui.model.Filter("Mplan","EQ",e)];var d=function(i){n.BusyDialog.close();var s=i.results[0];if(s===undefined){return}var o={classItems:[],characteristics:[],charNewButton:false,cycleModel:[],itemModel:[],ObjListItems:[],lam:[],Warpl:e,cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,WarplEnabled:true,StratEnabled:true,MehrfachEnabled:true,WsetEnabled:true,MptypEnabled:true,cycleIndSingleEnabled:true,cycleIndStrategyEnabled:true,cycleIndMultCntrEnabled:true,FabklLBLReq:false,ButtonNewItemEnabled:true,ButtonAssignItemEnabled:true,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,attachmentCount:"0",Guids:"",MaintenanceItemMode:"Delete",WarplVS:"None",WarplVST:"",WptxtVS:"None",WptxtVST:"",StratVS:"None",StratVST:"",WsetVS:"None",WsetVST:"",StadtVS:"None",StadtVST:"",StichVS:"None",StichVST:"",HunitVS:"None",HunitVST:""};if(s.MPLAN){var c=s.MPLAN.results[0];if(c){o.Wptxt=c.Wptxt;o.Mptyp=c.Mptyp;o.Strat=c.Strat;o.StratDesc=c.StratDesc;o.Deact=c.InactMp;o.DeactEnable=true;if(c.Mehrfach==="X"||c.Stich==="4"){o.cycleSetSeqColVis=true;o.CycleSetSeqVis=true;o.ScheIndText=false;o.ScheIndTitle=false;o.ScheIndLBL=false;o.ScheIndRbTimeVis=false;o.ScheIndRbTimeKeyDateVis=false;o.ScheIndRbTimeFactCalVis=false;o.ScheIndRbPerformanceVis=false;o.ScheIndRbTimeEnabled=false;o.ScheIndRbTimeKeyDateEnabled=false;o.ScheIndRbTimeFactCalEnabled=false;o.ScheIndRbPerformanceEnabled=false;o.AbrhoLBL=false;o.AbrhoVis=false;o.HunitVis=false;o.FabklLBL=false;o.FabklVis=false;o.FabklDescVis=false;o.Fabkl="";o.FabklDesc="";o.ButtonNewCycleEnabled=true;o.OPText=true;o.OPTitle=true;o.OPLBL=true;o.OROPVis=true;o.AndOPvis=true;o.WsetLBL=true;o.WsetVis=true;o.KtextVis=true;o.StratLBL=true;o.StratVis=true;o.StratDescVis=true;o.MehrfachLBL=true;o.MehrfachVis=true;o.Mehrfach=true;o.StadtLBL=true;o.StadtVis=true;o.Stadt=r.getDateFormat(c.Startdate);o.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_STDATE");o.SzaehLBL=false;o.SzaehVis=false;o.UnitcVis=false;o.Unitc=" ";o.MpcyclenoLBL=false;o.MpcyclenoVis=false;o.MaintenanceCycleMode="Delete";o.cycleIndMultCntr=true;o.cycleType=2}else if(c.Strat===""&&(c.Stich===""||c.Stich==="1"||c.Stich==="2")){o.cycleSetSeqColVis=false;o.CycleSetSeqVis=false;o.ScheIndText=true;o.ScheIndTitle=true;o.ScheIndLBL=true;o.ScheIndRbTimeEnabled=true;o.ScheIndRbTimeKeyDateEnabled=true;o.ScheIndRbTimeFactCalEnabled=true;o.ScheIndRbPerformanceEnabled=true;o.AbrhoLBL=true;o.AbrhoVis=true;o.HunitVis=true;o.FabklLBL=true;o.FabklVis=true;o.FabklDescVis=true;o.Fabkl="";o.FabklDesc="";o.StadtLBL=true;o.StadtVis=true;o.Stadt=r.getDateFormat(c.Startdate);o.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");o.SzaehLBL=false;o.SzaehVis=false;o.UnitcVis=false;o.Unitc=" ";o.MpcyclenoLBL=false;o.MpcyclenoVis=false;o.MaintenanceCycleMode="Delete";o.cycleIndSingle=true;o.cycleType=0}else if(c.Strat!==""&&c.Stich==="3"){o.cycleSetSeqColVis=false;o.CycleSetSeqVis=false;o.ScheIndText=false;o.ScheIndTitle=false;o.ScheIndLBL=false;o.ScheIndRbTimeVis=false;o.ScheIndRbTimeKeyDateVis=false;o.ScheIndRbTimeFactCalVis=false;o.ScheIndRbPerformanceVis=false;o.ScheIndRbTimeEnabled=false;o.ScheIndRbTimeKeyDateEnabled=false;o.ScheIndRbTimeFactCalEnabled=false;o.ScheIndRbPerformance=true;o.AbrhoLBL=false;o.AbrhoVis=false;o.HunitVis=false;o.FabklLBL=false;o.FabklVis=false;o.FabklDescVis=false;o.Fabkl="";o.FabklDesc="";o.StratLBL=true;o.StratVis=true;o.StratDescVis=true;o.Strat=c.Strat;n.readScheduling(c,c.Strat,l);o.StadtLBL=false;o.StadtVis=false;o.Stadt=r.getDateFormat(c.Startdate);o.SzaehLBL=true;o.SzaehVis=true;o.UnitcVis=true;o.MpcyclenoLBL=true;o.MpcyclenoVis=true;o.MaintenanceCycleMode="None";o.cycleIndStrateg=true;o.cycleType=1}else if(c.Strat.indexOf("TIME")>-1&&c.Mehrfach===""&&c.Stich!=="3"){o.ScheIndText=true;o.ScheIndTitle=true;o.ScheIndLBL=true;o.ScheIndRbTimeVis=true;o.ScheIndRbTimeKeyDateVis=true;o.ScheIndRbTimeFactCalVis=true;o.ScheIndRbPerformanceVis=true;o.AbrhoLBL=true;o.AbrhoVis=true;o.HunitVis=true;o.FabklLBL=true;o.FabklVis=true;o.FabklDescVis=true;o.Fabkl="";o.FabklDesc="";o.StratLBL=true;o.StratVis=true;o.StratDescVis=true;o.Strat=c.Strat;o.StadtLBL=true;o.StadtVis=true;o.Stadt=r.getDateFormat(c.Startdate);o.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");n.readScheduling(c,c.Strat,l);o.SzaehLBL=false;o.SzaehVis=false;o.UnitcVis=false;o.Unitc=c.Unitc;o.MpcyclenoLBL=false;o.MpcyclenoVis=false;o.MaintenanceCycleMode="Delete";o.cycleIndStrateg=true;o.cycleType=1}else if(c.Strat===""&&c.Stich==="3"&&c.Mehrfach===""){o.cycleIndSingle=true;o.cycleType=0;o.ScheIndText=true;o.ScheIndTitle=true;o.ScheIndLBL=true;o.ScheIndRbTimeVis=true;o.ScheIndRbTimeKeyDateVis=true;o.ScheIndRbTimeFactCalVis=true;o.ScheIndRbPerformanceVis=true;o.ScheIndRbTimeEnabled=false;o.ScheIndRbTimeKeyDateEnabled=false;o.ScheIndRbTimeFactCalEnabled=false;o.FabklLBL=true;o.FabklVis=true;o.FabklDescVis=true;o.Fabkl="";o.FabklDesc="";o.StratLBL=false;o.StratVis=false;o.StratDescVis=false;o.Strat=c.Strat;o.StadtLBL=false;o.StadtVis=false;o.Stadt=r.getDateFormat(c.Startdate);o.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");o.SzaehLBL=true;o.SzaehVis=true;o.UnitcVis=true;o.Unitc=" ";o.MaintenanceCycleMode="Delete"}if(c.Stich==="1"){o.ScheIndRbTimeKeyDate=true;o.FabklEnabled=true;o.Fabkl=c.Fabkl;o.FabklDesc=c.FabklDesc}else if(c.Stich==="2"){o.ScheIndRbTimeFactCal=true;o.FabklEnabled=true;o.Fabkl=c.Fabkl;o.FabklDesc=c.FabklDesc}else if(c.Stich==="3"){o.ScheIndRbPerformance=true;o.FabklEnabled=false}else if(c.Stich===""||c.Stich===" "){o.ScheIndRbTime=true;o.FabklEnabled=false;o.Fabkl=c.Fabkl;o.FabklDesc=c.FabklDesc}if(c.Stich){o.Stich=parseInt(c.Stich)}else{o.Stich=0}o.Wset=c.Wset;o.Ktext=c.Ktext;o.Sfakt=c.Sfakt;o.Abrho=c.Abrho;o.Hunit=c.Hunit;o.StratDesc=c.StratDesc;o.Szaeh=c.Szaeh;o.Mpcycleno=c.PointStp;o.Andor=c.Andor;if(c.PointStp!==""){o.Unitc=c.Unitc}if(c.Andor==="X"){o.AndOP=true}else{o.OROP=true}n.stratUnit=o.Unitc;o.Vspos=c.Vspos;o.Topos=c.Topos;o.Vsneg=c.Vsneg;o.Toneg=c.Toneg;o.Horiz=c.Horiz;o.CallConf=c.CallConf;o.PlanSort=c.PlanSort;o.Begru=c.Begru;o.cycleIndSingle=false;o.cycleIndStrategy=false;o.cycleIndMultCntr=false;o.StratEnabled=false;o.MehrfachEnabled=false;o.WsetEnabled=false;o.MaintenanceCycleMode="None";switch(o.cycleType){case 0:o.cycleType=0;o.cycleIndSingle=true;o.cycleIndStrategyEnabled=false;o.cycleIndMultCntrEnabled=false;o.Strat=" ";o.StratDesc=" ";o.StratLBL=false;o.StratVis=false;o.StratDescVis=false;o.Wset=" ";o.Ktext=" ";o.WsetLBL=false;o.WsetVis=false;o.KtextVis=false;o.Mehrfach=false;o.MehrfachLBL=false;o.MehrfachVis=false;o.ButtonNewCycleEnabled=true;if(o.ScheIndRbPerformance===true){o.SzaehLBL=true;o.SzaehVis=true;o.UnitcVis=true;o.StadtLBL=false;o.StadtVis=false}break;case 1:o.cycleType=1;o.cycleIndStrategy=true;o.cycleIndSingleEnabled=false;o.cycleIndMultCntrEnabled=false;o.StratLBL=true;o.StratVis=true;o.StratDescVis=true;o.StratEnabled=true;o.Mehrfach=false;o.MehrfachLBL=false;o.MehrfachVis=false;o.Wset=" ";o.Ktext=" ";o.WsetLBL=false;o.WsetVis=false;o.KtextVis=false;o.ButtonNewCycleEnabled=false;break;case 2:o.cycleType=2;o.cycleIndMultCntr=true;o.cycleIndStrategyEnabled=false;o.cycleIndSingleEnabled=false;o.Strat=" ";o.StratDesc=" ";o.StratLBL=false;o.StratVis=false;o.StratDescVis=false;o.MehrfachLBL=true;o.MehrfachVis=true;o.MehrfachEnabled=true;o.WsetLBL=true;o.WsetVis=true;o.WsetEnabled=true;o.KtextVis=true;o.ButtonNewCycleEnabled=true;o.cycleSetSeqColVis=true;break}}}if(s.MPCycle){var u=s.MPCycle.results;if(u){for(var d=0;d<u.length;d++){u[d].Psort=u[d].PointTxt;o.cycleModel.push(u[d])}}}if(s.MPItem){var f=s.MPItem.results;if(f){var p=new t;var g=[];for(var S=0;S<f.length;S++){var m={};m.Mitemnumb=f[S].Mitemnumb;m.Pstxt=f[S].Pstxt;m.Cycleseq=f[S].Cycleseq;m.Tplnr=f[S].TplnrMi;m.Pltxt=f[S].Flocdesc;m.Equnr=f[S].Equnr;m.Eqktx=f[S].Equipdesc;m.AsmblyOb=f[S].Bautl;m.Assemblydesc=f[S].Assemblydesc;m.Serialnr=f[S].Serialnr;m.Sermat=f[S].Sermat;m.UiiMitem=f[S].UiiMitem;m.Deviceid=f[S].Deviceid;m.Werks=f[S].PlntMi;m.Planningplantdes=f[S].Planningplantdes;m.Auart=f[S].Auart;m.oTypeTxt=f[S].Ordertypedesc;m.Qmart=f[S].Qmart;m.nTypeTxt=f[S].Qmartx;m.ArbpMi=f[S].ArbpMi;m.WergwMi=f[S].WergwMi;m.Ingrp=f[S].IngrpMi;m.Innam=f[S].Plannergrpdesc;m.Zeieh=f[S].Zeieh;m.Priok=f[S].Priok;m.ItmPriotxt=f[S].GsberMi;m.GsberMi=f[S].GsberMi;m.Gtext=f[S].Gtext;m.TaskDet=f[S].TaskDet;m.Ilart=f[S].Ilart;m.Ilatx=f[S].Ilatx;m.PlntyMi=f[S].PlntyMi;m.ApfktMi=f[S].ApfktMi;m.PlnnrMi=f[S].PlnnrMi;m.PlnalMi=f[S].PlnalMi;m.Gpcounterdesc=f[S].Gpcounterdesc;m.AnlzuMi=f[S].AnlzuMi;m.Anlzux=f[S].Anlzux;m.SwerkMil=f[S].SwerkMil;m.Name1=f[S].Name1;m.StortMil=f[S].StortMil;m.Locationdesc=f[S].Locationdesc;m.MsgrpIl=f[S].MsgrpIl;m.BeberMil=f[S].BeberMil;m.Fing=f[S].Fing;m.Tele=f[S].Tele;m.ArbplIl=f[S].ArbplIl;m.Workcenterdesc=f[S].Workcenterdesc;m.AbckzIl=f[S].AbckzIl;m.Abctx=f[S].Abctx;m.EqfnrIl=f[S].EqfnrIl;m.BukrsMil=f[S].BukrsMil;m.Butxt=f[S].Butxt;m.City=f[S].City;m.Anln1Mil=f[S].Anln1Mil;m.Anln2Mil=f[S].Anln2Mil;m.Txt50=f[S].Txt50;m.GsberIl=f[S].GsberIl;m.KostlMil=f[S].KostlMil;m.Contareaname=f[S].Contareaname;m.KokrsMil=f[S].KokrsMil;m.Posid=f[S].Posid;m.Post1=f[S].Post1;m.AufnrIl=f[S].AufnrIl;m.SettleOrdDesc=f[S].SettleOrdDesc;m.PlnnrMi=f[S].PlnnrMi;m.PlntyMi=f[S].PlntyMi;m.PlnalMi=f[S].PlnalMi;m.QmartLBL=true;m.QmartVis=true;m.nTypetxtVis=true;m.AuartLBL=true;m.AuartVis=true;m.oTypeTxtVis=true;m.CycleseqLBL=false;m.CycleseqVis=false;m.AsmblyObMaxLength=0;m.maintItemE=false;m.cycleSetE=false;m.TplnrEnabled=false;m.equiE=false;m.assemblyE=false;m.CycleseqVS="None";m.CycleseqVST="";m.TplnrVS="None";m.TplnrVST="";m.EqunrVS="None";m.EqunrVST="";m.AsmblyObVS="None";m.AsmblyObVST="";m.WerksVS="None";m.WerksVST="";m.AuartVS="None";m.AuartVST="";m.QmartVS="None";m.QmartVST="";m.ArbpMiVS="None";m.ArbpMiVST="";m.WergwMiVS="None";m.WergwMiVST="";m.IngrpVS="None";m.IngrpVST="";g.push(m)}p.setData(g);o.itemModel=g}}if(s.MPLAM){var h=s.MPLAM.results;if(h){for(var M=0;M<o.itemModel.length;M++){for(var V=0;V<h.length;V++){if(o.itemModel[M].Mitemnumb===h[V].Mitemnumb){o.itemModel[M].lam={};o.itemModel[M].lam=h[V]}}}}}if(s.MPOBList){var E=s.MPOBList.results;if(E){var b=[];for(var S=0;S<E.length;S++){var m={};if(n.CopyTempArray&&n.CopyTempArray.length>0){m.Warpl=n.CopyTempArray[0]}else{m.Warpl=E[S].Mplan}m.Mitemnumb=E[S].Mitemnumb;m.MatnrObj=E[S].MatnrObj;m.FlocObj=E[S].FlocObj;m.EquiObj=E[S].EquiObj;m.AsmblyOb=E[S].AsmblyOb;m.Matnrtxt=E[S].Matnrtxt;m.Equnrtxt=E[S].Equnrtxt;m.Tplnrtxt=E[S].Tplnrtxt;m.Bautltxt=E[S].Bautltxt;m.Enable=false;b.push(m)}o.ObjListItems=b}}if(s.ClassMpl){var C=$.map(s.ClassMpl.results,function(e){return $.extend(true,{},e)});if(C){if(C.length>0){for(var S=0;S<C.length;S++){C[S].ctEnable=false;C[S].classEnable=false;C[S].ClassTypeDesc=C[S].Artxt;delete C[S].Artxt;C[S].ClassDesc=C[S].Kltxt;delete C[S].Kltxt;delete C[S].Changerequestid;delete C[S].Clint;delete C[S].Service;C[S].classDelEnable=true;o.classItems.push(C[S])}if(a==="true"){for(var S=0;S<Object.classItems.length;S++){Object.classItems[S].classDelEnable=false}}o.charNewButton=true;if(n.class){n.class.setModel(new t(o.classItems))}}}}if(s.ValuaMpl){var L=$.map(s.ValuaMpl.results,function(e){return $.extend(true,{},e)});if(L){if(L.length>0){for(var T=0;T<L.length;T++){L[T].cNameEnable=false;L[T].Textbz=L[T].Atwtb;delete L[T].Ataut;delete L[T].Ataw1;delete L[T].Atawe;delete L[T].Atcod;delete L[T].Atflb;delete L[T].Atflv;delete L[T].Atimb;delete L[T].Atsrt;delete L[T].Atvglart;delete L[T].Atzis;delete L[T].Changerequestid;delete L[T].CharName;delete L[T].Charid;delete L[T].Classtype;delete L[T].Service;delete L[T].Valcnt;L[T].slNo=T+1;L[T].flag=L[T].Class+"-"+L[T].slNo;o.characteristics.push(L[T])}if(a==="true"){for(var S=0;S<o.characteristics.length;S++){o.characteristics[S].charAddEnable=false;o.characteristics[S].charClrEnable=false;o.characteristics[S].charDltEnable=false}}else{for(var M=0;M<o.characteristics.length;M++){var A=1;for(var V=0;V<o.characteristics.length;V++){if(M===V){continue}if(o.characteristics[V].Atnam===o.characteristics[M].Atnam&&o.characteristics[V].Class===o.characteristics[M].Class){A++}}if(A>1){o.characteristics[M].charDltEnable=true}else{o.characteristics[M].charDltEnable=false}if(o.characteristics[M].Atein===true){o.characteristics[M].charAddEnable=false}}}if(n.char){n.char.setModel(new t(o.characteristics))}}}}if(n.CopyTempArray&&n.CopyTempArray.length>0){if(o.cycleModel){if(o.cycleModel.length>0){for(var F=0;F<o.cycleModel.length;F++){o.cycleModel[F].Zykl1Enabled=false;o.cycleModel[F].ZeiehEnabled=false;o.cycleModel[F].PakTextEnabled=false;o.cycleModel[F].OffsetEnabled=false;o.cycleModel[F].PointEnabled=false;o.cycleModel[F].CycleseqiEnabled=false}}}o.Warpl=n.CopyTempArray[0];o.menuAction="copy";o.viewParameter="create";o.WarplEnabled=true;if(o.Mptyp===""||o.Mptyp===undefined||o.Mptyp===" "){o.MptypEnabled=true}else{o.MptypEnabled=false}if(o.cycleType===1&&(o.Strat===""||o.Strat===undefined||o.Strat===" ")){o.StratEnabled=true}else{o.StratEnabled=false}if(o.cycleType===2&&(o.Mehrfach===false||o.Mehrfach===""||o.Mehrfach===undefined||o.Mehrfach===" ")){o.MehrfachEnabled=true}else{o.MehrfachEnabled=false}if(o.cycleType===2&&(o.Wset===""||o.Wset===undefined||o.Wset===" ")){o.WsetEnabled=true}else{o.WsetEnabled=false}n.CopyTempArray.shift();var P,v;P=n.getView().getModel("copyModel");v=P.getData();v.push(o);P.setData(v);n.onUpdateTitleCount(l,v);if(n.CopyTempArray.length===0){n.readCreateTempKey("MPITEM",l,"active_copy",s.MPItem.results.length*parseInt(n.noOfCopyObjects),P.getData(),"MPITEM")}return}if(o.Mptyp===""||o.Mptyp===undefined||o.Mptyp===" "){o.MptypEnabled=true}else{o.MptypEnabled=false}if(o.cycleType===1&&(o.Strat===""||o.Strat===undefined||o.Strat===" ")){o.StratEnabled=true}else{o.StratEnabled=false}if(o.cycleType===2&&(o.Mehrfach===false||o.Mehrfach===""||o.Mehrfach===undefined||o.Mehrfach===" ")){o.MehrfachEnabled=true}else{o.MehrfachEnabled=false}if(o.cycleType===2&&(o.Wset===""||o.Wset===undefined||o.Wset===" ")){o.WsetEnabled=true}else{o.WsetEnabled=false}o.WarplEnabled=false;if(a==="true"){if(o.cycleModel){if(o.cycleModel.length>0){for(var D=0;D<o.cycleModel.length;D++){o.cycleModel[D].Zykl1Enabled=false;o.cycleModel[D].ZeiehEnabled=false;o.cycleModel[D].PakTextEnabled=false;o.cycleModel[D].OffsetEnabled=false;o.cycleModel[D].PointEnabled=false;o.cycleModel[D].CycleseqiEnabled=false}}}o.MaintenanceItemMode="None";o.ButtonNewCycleEnabled=false;o.ButtonNewItemEnabled=false;o.ButtonAssignItemEnabled=false;o.WarplEnabled=false;o.MptypEnabled=false;o.StratEnabled=false;o.WsetEnabled=false;o.MehrfachEnabled=false;o.FabklEnabled=false;o.DeactEnable=false}if(n.detailFlag===true){n.handleMainTableRow(o,l)}else{if(o.cycleModel){if(o.cycleModel.length>0){for(var y=0;y<o.cycleModel.length;y++){o.cycleModel[y].Zykl1Enabled=false;o.cycleModel[y].ZeiehEnabled=false;o.cycleModel[y].PakTextEnabled=false;o.cycleModel[y].OffsetEnabled=false;o.cycleModel[y].PointEnabled=false;o.cycleModel[y].CycleseqiEnabled=false}}}o.menuAction="change";o.viewParameter="change";n.handleSearchImportPress(o,l)}};var f=function(){n.BusyDialog.close()};n.BusyDialog.open();n._readData(i,c,d,f,u,o)},readScheduling:function(e,t,a){var r=this;var n="/MPSHDParamSet('"+t+"')";var l=r.getView().getModel();var i=function(t){e.Fabkl=t.Fabkl;e.FabklDesc=t.FabklDesc;e.Abrho=t.Abrho;var n=t.Termk;if(n==="1"){e.Stich=1;e.ScheIndRbTimeKeyDate=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}else if(n==="2"){e.Stich=2;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbPerformanceEnabled=false;e.ScheIndRbTimeFactCal=true;e.ScheIndRbTimeFactCalEnabled=true}else if(n==="3"){e.Stich=3;e.ScheIndRbTimeEnabled=false;e.ScheIndRbTimeKeyDateEnabled=false;e.ScheIndRbTimeFactCalEnabled=false;e.ScheIndRbPerformance=true;e.ScheIndRbPerformanceEnabled=true;r.stratUnit=t.Zeieh}else if(n===""){e.Stich=0;e.ScheIndRbTime=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}if(r.getView().getModel(a)){r.getView().getModel(a).refresh()}};var s=function(){};r._readData(n,l,i,s)},readCounterData:function(e,t,a,r){var n=this;var l="/CounterDataSet('"+t+"')";var i=n.getView().getModel("valueHelp");var s=function(t){if(a==="counterUnit"){if(n.stratUnit===""||n.stratUnit===undefined){e.Unitc=t.Unitc;n.stratUnit=t.Unitc}if(t.Unitc!==n.stratUnit){var l="Unit "+n.stratUnit+" and counter unit "+t.Unitc+" have different dimensions";if(r==="Point"){e.FabklVS="Error"}else if(r==="Mpcycleno"){e.MpcyclenoVS="Error"}n.invokeMessage(l)}n.counterUnit=t.Unitc;n.getView().getModel(n.oModelName).refresh()}else if(a==="cycleUnit"){n.cycleUnit=t.Unitc}return t.Unitc};var o=function(){};n._readData(l,i,s,o)},getObTab:function(e,t){var a=sap.ui.getCore().getModel("EAMCRModel");var r=a.getData();var n="";var l="";switch(e){case"AIWEQUI":for(var i=0;i<r.length;i++){if(r[i].Obtab==="EQUI"){if(t==="type"){l=r[i].CRType}else{n=r[i].Obtab}break}}break;case"AIWFLOC":for(var i=0;i<r.length;i++){if(r[i].Obtab==="IFLOT"){if(t==="type"){l=r[i].CRType}else{n=r[i].Obtab}break}}break;case"AIWMSPT":for(var i=0;i<r.length;i++){if(r[i].Obtab==="IMPTT"){if(t==="type"){l=r[i].CRType}else{n=r[i].Obtab}break}}break;case"AIWMPMI":for(var i=0;i<r.length;i++){if(r[i].Obtab==="MPLA"){if(t==="type"){l=r[i].CRType}else{n=r[i].Obtab}break}}break}if(t==="type"){return l}else{return n}},attachRequest:function(){var e=this.getView().createId("clsFrag");var t=this.getView().createId("charFrag");var a=sap.ui.core.Fragment.byId(e,"type");var r=sap.ui.core.Fragment.byId(e,"class");var n=sap.ui.core.Fragment.byId(e,"status");var i=sap.ui.core.Fragment.byId(t,"charName");var s=sap.ui.core.Fragment.byId(t,"charValue");var o=sap.ui.core.Fragment.byId(t,"charValueAdd");var c=sap.ui.core.Fragment.byId(t,"charValueClear");var u=sap.ui.core.Fragment.byId(t,"charValueDelete");var d=this;o.attachPress(function(e){l.handleSelCharAdd(e)});c.attachPress(function(e){l.handleCharClear(e)});u.attachPress(function(e){l.charRowDeletePress(e)});s.attachChange(function(e){d.onChange(e)})},valueHelpSelect:function(e){var t=this.getObTab(this.oModelName);var a=e.getSource().getId().split("tskL--");a=a[1];if(e.getSource().getId().indexOf("type")>-1){l.valueHelpClassSelect("type",this,t,e)}else if(e.getSource().getId().indexOf("class")>-1){l.valueHelpClassSelect("class",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){l.valueHelpClassSelect("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){l.valueHelpCharSelect("charName",this,t,e)}else if(e.getSource().getId().indexOf("charValue")>-1){var r=e.getSource().getParent().getBindingContext().getPath();l.valueHelpCharSelect("charValue",this,t,e,r)}},onChange:function(e){var t=this.getObTab(this.oModelName);var a=e.getSource().getId().split("tskL--");a=a[1];this.classType=this.Classtype;var r=e.getSource().getBindingContext().sPath;this._class=e.getSource().getBindingContext().getModel().getProperty(r).Class;if(e.getSource().getId().indexOf("type")>-1){l.onClassChange("type",this,t,e)}else if(e.getSource().getId().indexOf("class")>-1){l.onClassChange("class",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){l.onClassChange("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){l.onCharChange("charName",this,e)}else if(e.getSource().getId().indexOf("charValue")>-1){l.onCharChange("charValue",this,e,t)}},onCharChange:function(e){var t=this.getObTab(this.oModelName);var a=e.getSource().getId().split("tskL--");a=a[1];this.classType=this.Classtype;var r=e.getSource().getBindingContext().sPath;this._class=e.getSource().getBindingContext().getModel().getProperty(r).Class;if(e.getSource().getId().indexOf("charValueAdd")>-1){l.handleSelCharAdd("charValueAdd",this,t,e)}else if(e.getSource().getId().indexOf("charValueClear")>-1){l.handleCharClear("charValueClear",this,t,e)}else if(e.getSource().getId().indexOf("status")>-1){l.onClassChange("status",this,t,e)}else if(e.getSource().getId().indexOf("charName")>-1){l.onCharChange("charName",this,e)}else if(e.getSource().getId().indexOf("charValue")>-1){l.onCharChange("charValue",this,e,t)}},handleClassRowAdd:function(){var e=this.getObTab(this.oModelName);l.classRowAddPress(this,e)},handleCharRowAdd:function(){l.charRowAddPress(this)},handleCharRowDelete:function(e){var t=this.getObTab(this.oModelName);l.charRowDeletePress(e,this,t)},handleClassRowDelete:function(e){l.classRowDeletePress(e,this)},onClassSelect:function(e){l.classSelectPress(e,this)},onSelect:function(e){l.selectPress(e,this)},invokeMessage:function(e){this.createMessagePopover(e,"Error")},calculateLAM:function(){var e=this;var t=e.lam.getModel("AIWLAM").getData();var a=sap.ui.getCore().getModel("tempCrTypeModel").getData();var r=[new sap.ui.model.Filter("Crtype","EQ",a.crtype),new sap.ui.model.Filter("Lrpid","EQ",t.lam.Lrpid),new sap.ui.model.Filter("StartPoint","EQ",t.lam.Strtptatr),new sap.ui.model.Filter("EndPoint","EQ",t.lam.Endptatr),new sap.ui.model.Filter("LinearLength","EQ",t.lam.Length),new sap.ui.model.Filter("LinearUnit","EQ",t.lam.LinUnit),new sap.ui.model.Filter("Startmrkr","EQ",t.lam.Startmrkr),new sap.ui.model.Filter("Endmrkr","EQ",t.lam.Endmrkr),new sap.ui.model.Filter("Mrkdisst","EQ",t.lam.Mrkdisst),new sap.ui.model.Filter("Mrkdisend","EQ",t.lam.Mrkdisend),new sap.ui.model.Filter("MrkrUnit","EQ",t.lam.MrkrUnit)];var n;if(e.viewName.indexOf("Floc")>-1){n=new sap.ui.model.Filter("Tplnr","EQ",e.getView().getModel("AIWFLOC").getData().Functionallocation);r.push(n)}else if(e.viewName.indexOf("Equi")>-1){n=new sap.ui.model.Filter("Equi","EQ",e.getView().getModel("AIWEQUI").getData().Equnr);r.push(n)}else if(e.viewName.indexOf("Mspt")>-1){n=new sap.ui.model.Filter("Mspoint","EQ",e.getView().getModel("AIWMSPT").getData().Mspoint);r.push(n)}else if(e.viewName.indexOf("Mpmi")>-1){n=new sap.ui.model.Filter("Mpitem","EQ",e.getView().getModel(e.oModelName).getData().Mitemnumb);r.push(n)}else{n=new sap.ui.model.Filter("Objnetwrk","EQ",e.getView().getModel("ONDetailModel").getData().Objnetwrk);r.push(n)}var l="/LAMDerivationSet";var i=e.getView().getModel("valueHelp2");i.read(l,{filters:r,success:function(a,r){var n=a.results[0];t.lam.Lrpid=n.Lrpid;t.lam.Strtptatr=n.StartPoint;t.lam.Endptatr=n.EndPoint;t.lam.Length=n.LinearLength;t.lam.LinUnit=n.LinearUnit;t.lam.Startmrkr=n.Startmrkr;t.lam.Endmrkr=n.Endmrkr;t.lam.Mrkdisst=n.Mrkdisst;t.lam.Mrkdisend=n.Mrkdisend;t.lam.MrkrUnit=n.MrkrUnit;e.lam.getModel("AIWLAM").setData(t)},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=t.join("\n");sap.m.MessageBox.show(r,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})}})},onLrpHelp:function(e){n.networkLrpVH(e,this)},onLrpChange:function(e){n._LRPChange(e,this)},onStartPointVH:function(e){switch(this.oModelName){case"AIWFLOC":n._startPointVH("startPoint",e,this,"IF");break;case"AIWEQUI":n._startPointVH("startPoint",e,this,"IE");break;case"AIWMSPT":n._startPointVH("startPoint",e,this,"ML");break;case"AIWListONModel":n._startPointVH("startPoint",e,this,"NW");break;case"itemDetailView":n._startPointVH("startPoint",e,this,"WP");break}},onStartPointChange:function(e){switch(this.oModelName){case"AIWFLOC":n._startPointChange("startPoint",e,this,"IF");break;case"AIWEQUI":n._startPointChange("startPoint",e,this,"IE");break;case"AIWMSPT":n._startPointChange("startPoint",e,this,"ML");break;case"AIWListONModel":n._startPointChange("startPoint",e,this,"NW");break;case"itemDetailView":n._startPointChange("startPoint",e,this,"WP");break}},onEndPointVH:function(e){switch(this.oModelName){case"AIWFLOC":n._endPointVH("endPoint",e,this,"IF");break;case"AIWEQUI":n._endPointVH("endPoint",e,this,"IE");break;case"AIWMSPT":n._endPointVH("endPoint",e,this,"ML");break;case"AIWListONModel":n._endPointVH("endPoint",e,this,"NW");break;case"itemDetailView":n._endPointVH("endPoint",e,this,"WP");break}},onEndPointChange:function(e){switch(this.oModelName){case"AIWFLOC":n._endPointChange("endPoint",e,this,"IF");break;case"AIWEQUI":n._endPointChange("endPoint",e,this,"IE");break;case"AIWMSPT":n._endPointChange("endPoint",e,this,"ML");break;case"AIWListONModel":n._endPointChange("endPoint",e,this,"NW");break;case"itemDetailView":n._endPointChange("endPoint",e,this,"WP");break}},onLamUOMVH:function(e){n.lamUOMVH("uom",e,this)},onUomChange:function(e){n._uomMarkerDistUnitChange("uom",e,this)},onMarkerDistUnit:function(e){n.lamUOMVH("mrkrDistUnit",e,this)},onMarkerUnitChange:function(e){n._uomMarkerDistUnitChange("mrkrDistUnit",e,this)},onStartMarkerVH:function(e){switch(this.oModelName){case"AIWFLOC":n._startPointVH("startMarker",e,this,"IF");break;case"AIWEQUI":n._startPointVH("startMarker",e,this,"IE");break;case"AIWMSPT":n._startPointVH("startMarker",e,this,"ML");break;case"AIWListONModel":n._startPointVH("startMarker",e,this,"NW");break;case"itemDetailView":n._startPointVH("startMarker",e,this,"WP");break}},onStartMarkerChange:function(e){switch(this.oModelName){case"AIWFLOC":n._startPointChange("startMarker",e,this,"IF");break;case"AIWEQUI":n._startPointChange("startMarker",e,this,"IE");break;case"AIWMSPT":n._startPointChange("startMarker",e,this,"ML");break;case"AIWListONModel":n._startPointChange("startMarker",e,this,"NW");break;case"itemDetailView":n._startPointChange("startMarker",e,this,"WP");break}},onEndMarkerVH:function(e){switch(this.oModelName){case"AIWFLOC":n._endPointVH("endMarker",e,this,"IF");break;case"AIWEQUI":n._endPointVH("endMarker",e,this,"IE");break;case"AIWMSPT":n._endPointVH("endMarker",e,this,"ML");break;case"AIWListONModel":n._endPointVH("endMarker",e,this,"NW");break;case"itemDetailView":n._endPointVH("endMarker",e,this,"WP");break}},onEndMarkerChange:function(e){switch(this.oModelName){case"AIWFLOC":n._endPointChange("endMarker",e,this,"IF");break;case"AIWEQUI":n._endPointChange("endMarker",e,this,"IE");break;case"AIWMSPT":n._endPointChange("endMarker",e,this,"ML");break;case"AIWListONModel":n._endPointChange("endMarker",e,this,"NW");break;case"itemDetailView":n._endPointChange("endMarker",e,this,"WP");break}},onLengthChange:function(){var e=this.lam.getModel("AIWLAM");var t=e.getData();if(t.lam.Strtptatr!==""&&t.lam.Endptatr!==""){this.calculateLAM()}},onDistStartChange:function(){var e=this.lam.getModel("AIWLAM");var t=e.getData();if(t.lam.Strtptatr!==""&&t.lam.Endptatr!==""){this.calculateLAM()}},onDistEndChange:function(){var e=this.lam.getModel("AIWLAM");var t=e.getData();if(t.lam.Strtptatr!==""&&t.lam.Endptatr!==""){this.calculateLAM()}},readCharUnit:function(e,t,a){var r="/DerCharUnitSet('"+a+"')";var n=t.getView().getModel("valueHelp");var l=function(a){t.BusyDialog.close();if(a){e.Mseh6=a.Mseh3;e.Msehl=a.Msehl;e.Decim=a.Decim.toString()}else{e.Mseh6="";e.Msehl="";e.Decim=""}t.getModel(t.oModelName).refresh()};var i=function(e){t.BusyDialog.close();var a=JSON.parse(e.response.body);var r=a.error.message.value};t.BusyDialog.open();this._readData(r,n,l,i,[])},onCityAddrVH:function(e){n.CityAddrVH(e.getSource().getModel(this.oModelName).getData(),this)},onCityAddrChange:function(e){var t=this;var a=e.getSource().getValue();if(a!==""&&a!==undefined){e.getSource().setValue(a.toUpperCase());n._changeCityAddr(e,t)}},readAddressVersion:function(e){var a="/AddrVerSet";var r=e.getView().getModel("valueHelp");var n=function(a){if(a.results.length>0){var r=new t([]);r.setData(a.results);e.getView().setModel(r,"AddressVersionModel")}};var l=function(){};this._readData(a,r,n,l)},handleIntlAddrAdd:function(){var e=this.getView().getModel(this.oModelName).getData();if(e.RefPosta===""){this.createMessagePopover("Enter Country Key","Error");return}if(this.oModelName==="AIWEQUI"){var t={AdNation:"",AdNationEnable:true,Equi:e.Equnr,Equiaddrn:"",Buildingi:"",City1i:"",Floori:"",Homecityi:"",Housenr1i:"",Housenr2i:"",Locationi:"",Name1i:"",Name2i:"",Name3i:"",Name4i:"",Nametexti:"",NameCoi:"",Poboxlbyi:"",Remarki:"",Roomnumi:"",Sort1i:"",Sort2i:"",Streeti:"",Stsuppl1i:"",Stsuppl2i:"",Stsuppl3i:"",Titlei:"",NationTex:"",City1iVS:"None",StreetiVS:"None"}}else if(this.oModelName==="AIWFLOC"){var t={AdNation:"",AdNationEnable:true,Funcloc:e.Functionallocation,Funclocan:"",Buildingi:"",City1i:"",Floori:"",Homecityi:"",Housenr1i:"",Housenr2i:"",Locationi:"",Name1i:"",Name2i:"",Name3i:"",Name4i:"",Nametexti:"",NameCoi:"",Poboxlbyi:"",Remarki:"",Roomnumi:"",Sort1i:"",Sort2i:"",Streeti:"",Stsuppl1i:"",Stsuppl2i:"",Stsuppl3i:"",Titlei:"",NationTex:"",City1iVS:"None",StreetiVS:"None"}}e.intlAddr.push(t);this.getView().getModel(this.oModelName).refresh()},onStreetVH:function(e){n.streetVH(e,this)},onCityVH:function(e){n.cityVH(e,this)},onStreetIChange:function(e){var t=this;var a=e.getSource().getValue();if(a!==""&&a!==undefined){e.getSource().setValue(a.toUpperCase());n._changeStreetI(e,t)}},onCityIChange:function(e){var t=this;var a=e.getSource().getValue();if(a!==""&&a!==undefined){e.getSource().setValue(a.toUpperCase());n._changeCityI(e,t)}},handleIntlAddrPress:function(e){var t=this;var a=this.oModelName;if(t.viewName.indexOf("Approve")>-1){var r=e.getSource().getBindingContext("AIWAPPROVE").sPath}else{var r=e.getSource().getBindingContext(this.oModelName).sPath}if(t.viewName.indexOf("Change")>-1){sap.ui.getCore().setModel(this.getView().getModel(this.oModelName),"EQFLChangeModel");a="EQFLChangeModel"}var n=true;if(t.viewName.indexOf("Equi")>-1){n=t.getView().getModel("equiAddressView").getData().enabled}else if(t.viewName.indexOf("Floc")>-1){n=t.getView().getModel("flocAddressView").getData().enabled}this.getRouter().navTo("intlAddr",{modelName:a,sCrStatus:t.sCrStatus,itemPath:encodeURIComponent(r),viewName:this.viewName,rowIndex:encodeURIComponent(this.rowIndex),addrEnable:n})},handleIntlAddrDelete:function(e){var t=this;var a=e.getParameter("listItem").getBindingContext(this.oModelName).sPath;a=a.substring(a.lastIndexOf("/")+1);var r=e.getSource().getModel(this.oModelName).getData().intlAddr;r.splice(a,1);this.getView().getModel(this.oModelName).refresh()},onAddrVersionChange:function(e){var t=this;var a=e.getSource();var r=e.getSource().getParent().getBindingContext(this.oModelName).getPath();var n=parseInt(r.split("/")[2]);var l=e.getParameter("selectedItem").getKey();var i=false;var s=this.getView().getModel(this.oModelName).getData();var o=s.intlAddr;for(var c=0;c<o.length;c++){if(c===n){continue}if(o[c].AdNation===l){i=true;t.createMessagePopover("Address Version already exists","Error");o[n].AdNation="";a.setSelectedKey();break}}if(!i){o[n].AdNation=a.getSelectedKey();o[n].AdNationEnable=false;this.getView().getModel(this.oModelName).setData(s)}},getClassType:function(e){var t=e.getView().getModel("valueHelp");var a=e.getObTab(e.oModelName);var r=new sap.ui.model.Filter("Obtab","EQ",a);var n="/ClassTypeSet";t.read(n,{filters:[r],success:function(t){if(t.results.length>0){e.Classtype=t.results[0].Klart;e.Classtypedesc=t.results[0].Artxt}else{e.Classtype="";e.Classtypedesc=""}},error:function(){e.Classtype="";e.Classtypedesc=""}})},dataDerivationFlow:function(){var e=this;var n=sap.ui.getCore().getModel("AIWFLOC").getData();var l=sap.ui.getCore().getModel("AIWEQUI").getData();var i=sap.ui.getCore().getModel("AIWListWCModel").getData();var s={ChangeRequestType:"AIWEAM0P",CrDescription:"",Reason:"01",DeriveData:true,IsDraft:"",Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqDFPS:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],ClassWC:[],ValueWC:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],FLLAMCH:[],EqLAMCH:[],EqDFPS:[]};if(n.length>0){for(var o=0;o<n.length;o++){if(n[o].Functionallocation===""||n[o].Functionallocation===undefined){return}var c={Tplnr:n[o].Functionallocation,Txtmi:n[o].Flocdescription,TplkzFlc:n[o].Strucindicator,Tplxt:n[o].StrucIndicatorDesc,EditMask:n[o].EditMask,Hierarchy:n[o].Hierarchy,Fltyp:n[o].Floccategory,Flttx:n[o].FlocCategoryDesc,Swerk:n[o].Maintplant,Plantname:n[o].MaintplantDesc,StorFloc:n[o].Location,Locationdesc:n[o].Locationdesc,Abckzfloc:n[o].Abckz,Abctx:n[o].Abctx,Bukrsfloc:n[o].Bukrs,Butxt:n[o].Butxt,City:n[o].City,KostFloc:n[o].Kostl,KokrFloc:n[o].Kokrs,Contareaname:n[o].Mctxt,PlntFloc:n[o].Werks,Planningplantdes:n[o].Planningplantdes,Ingrp:n[o].Ingrp,Plannergrpdesc:n[o].Innam,Arbplfloc:n[o].Arbpl,Wergwfloc:n[o].WcWerks,Gewrkfloc:n[o].MainArbpl,MainWcPlant:n[o].MainWerks,Tplma:n[o].SupFunctionallocation,Supflocdesc:n[o].SupFlocdescription,BeberFl:n[o].BeberFl,Fing:n[o].Fing,Tele:n[o].Tele,Submtiflo:n[o].ConstrType,Constdesc:n[o].ConstructionDesc,Eqart:n[o].TechnicalObjectTyp,Eartx:n[o].Description,Stattext:n[o].Stattext,StsmFloc:n[o].StsmEqui,Statproftxt:n[o].StsmEquiDesc,UstwFloc:n[o].UstwEqui,UswoFloc:n[o].UswoEqui,UstaFloc:n[o].UstaEqui,Adrnr:n[o].Adrnr,Adrnri:n[o].Adrnri,Deact:n[o].Deact,Modeldesc:n[o].Modeldesc,Modelref:n[o].Modelref,Modelrver:n[o].Modelrver,Modelext:n[o].Modelext,Modelname:n[o].Modelname,Modelver:n[o].Modelver};if(n[o].viewParameter==="create"){c.Type=true}var u=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;if(u&&u.length>0){var d=u[o].DOI;c.Swerki=d[0].instLoc?"H":d[0].maintenance?"D":"";c.Storti=d[1].instLoc?"H":d[1].maintenance?"D":"";c.Beberi=d[2].instLoc?"H":d[2].maintenance?"D":"";c.Ppsidi=d[3].instLoc?"H":d[3].maintenance?"D":"";c.Abckzi=d[4].instLoc?"H":d[4].maintenance?"D":"";c.Bukrsi=d[5].instLoc?"H":d[5].maintenance?"D":"";c.Kostli=d[6].instLoc?"H":d[6].maintenance?"D":"";c.Kokrsi=d[7].instLoc?"H":d[7].maintenance?"D":"";c.Iwerki=d[8].instLoc?"H":d[8].maintenance?"D":"";c.Ingrpi=d[9].instLoc?"H":d[9].maintenance?"D":"";c.Lgwidi=d[10].instLoc?"H":d[10].maintenance?"D":"";c.Adrnri=d[12].instLoc?"H":d[12].maintenance?"D":""}s.FuncLoc.push(c);var f={Funcloc:n[o].Functionallocation,Title:n[o].TitleCode,Name1:n[o].Name1,Name2:n[o].Name2,Name3:n[o].Name3,Name4:n[o].Name4,Sort1:n[o].Sort1,Sort2:n[o].Sort2,NameCo:n[o].NameCo,PostCod1:n[o].PostCod1,City1:n[o].City1,Building:n[o].Building,Floor:n[o].Floor,Roomnum:n[o].Roomnum,Strsuppl1:n[o].Strsuppl1,Strsuppl2:n[o].Strsuppl2,Strsuppl3:n[o].Strsuppl3,Location:n[o].AddrLocation,RPostafl:n[o].RefPosta,Landx:n[o].Landx,TimeZone:n[o].TimeZone,RPostFl:n[o].Region,Regiotxt:n[o].RegionDesc};s.FLAddr.push(f);var p=n[o].intlAddr;if(p){for(var g=0;g<p.length;g++){s.FLAddrI.push(p[g])}}if(n[o].altlbl){if(e.AltLblDerv==="2"&&n[o].altlbl.length>0){for(var S=0;S<n[o].altlbl.length;S++){var m={Funcloc:n[o].Functionallocation,AltAlkey:n[o].altlbl[S].AltAlkey,AltStrno:n[o].altlbl[S].AltStrno,AltTplkz:n[o].altlbl[S].AltTplkz};s.FLALTLBEL.push(m)}}}if(n[o].Floccategory==="L"&&n[o].lam){var h={Funcloc:n[o].Functionallocation,Lrpid:n[o].lam.Lrpid,Strtptatr:n[o].lam.Strtptatr,Endptatr:n[o].lam.Endptatr,Length:n[o].lam.Length,LinUnit:n[o].lam.LinUnit,Startmrkr:n[o].lam.Startmrkr,Endmrkr:n[o].lam.Endmrkr,Mrkdisst:n[o].lam.Mrkdisst,Mrkdisend:n[o].lam.Mrkdisend,MrkrUnit:n[o].lam.MrkrUnit};s.FLLAM.push(h)}var M=n[o].classItems;if(M){if(M.length>0){for(var V=0;V<M.length;V++){var E={Funcloc:n[o].Functionallocation,Classtype:M[V].Classtype,Class:M[V].Class,Clstatus1:M[V].Clstatus1};s.FLClass.push(E)}}}var b=n[o].characteristics;if(b){if(b.length>0){for(var C=0;C<b.length;C++){var L={Funcloc:n[o].Functionallocation,Atnam:b[C].Atnam,Textbez:b[C].Textbez,Atwrt:b[C].Atwrt,Class:b[C].Class};s.FLVal.push(L)}}}var T=n[o].linearChar;if(T){if(T.length>0){var A=$.map(T,function(e){return $.extend(true,{},e)});for(var C=0;C<A.length;C++){delete A[C].linCharEnable;A[C].Funcloc=n[o].Functionallocation;s.FLLAMCH.push(A[C])}}}}}if(l.length>0){for(var F=0;F<l.length;F++){var P={Herst:l[F].Herst,Equnr:l[F].Equnr,Txtmi:l[F].Eqktx,Swerk:l[F].Maintplant,Name1:l[F].MaintplantDesc,TplnEilo:l[F].Tplnr,Flocdescription:l[F].Pltxt,Eqtyp:l[F].EquipmentCatogory,Etytx:l[F].EquipCatgDescription,Eqart:l[F].TechnicalObjectTyp,Eartx:l[F].Description,Typbz:l[F].Typbz,SubmEeqz:l[F].ConstrType,Constdesc:l[F].ConstructionDesc,BukrEilo:l[F].Bukrs,Butxt:l[F].Butxt,HequEeqz:l[F].SuperordinateEquip,SuperordEqDes:l[F].SuperordinateEquipDesc,TidnEeqz:l[F].TechIdNum,KostEilo:l[F].Kostl,KokrEilo:l[F].Kokrs,Contareaname:l[F].Mctxt,StorEilo:l[F].Location,Locationdesc:l[F].Locationdesc,AbckEilo:l[F].Abckz,Abctx:l[F].Abctx,PplaEeqz:l[F].Werks,Planningplantdes:l[F].Planningplantdes,IngrEeqz:l[F].Ingrp,Plannergrpdesc:l[F].Innam,Serge:l[F].Serge,MapaEeqz:l[F].MapaEeqz,Stattext:l[F].Stattext,StsmEqui:l[F].StsmEqui,Statproftxt:l[F].StsmEquiDesc,UstwEqui:l[F].UstwEqui,UswoEqui:l[F].UswoEqui,UstaEqui:l[F].UstaEqui,Deact:l[F].Deact,Answt:l[F].Answt,Ansdt:e._formatDate(l[F].Ansdt),Waers:l[F].Waers,ArbpEilo:l[F].Arbpl,WorkCenterPlant:l[F].WcWerks,ArbpEeqz:l[F].MainArbpl,MainWcPlant:l[F].MainWerks,BebeEilo:l[F].BeberFl,Fing:l[F].Fing,Tele:l[F].Tele,HeqnEeqz:l[F].EquipPosition,Adrnr:l[F].Adrnr,Adrnri:l[F].Adrnri,Funcid:l[F].Funcid,Frcfit:l[F].Frcfit,Frcrmv:l[F].Frcrmv,Modelid:"",Ppeguid:l[F].Ppeguid};var v=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;if(v&&v.length>0){var d=v[F].DOI;P.Swerki=d[0].instLoc?"R":d[0].maintenance?"D":"";P.Storti=d[1].instLoc?"R":d[1].maintenance?"D":"";P.Beberi=d[2].instLoc?"R":d[2].maintenance?"D":"";P.Ppsidi=d[3].instLoc?"R":d[3].maintenance?"D":"";P.Abckzi=d[4].instLoc?"R":d[4].maintenance?"D":"";P.Kostli=d[5].instLoc?"R":d[5].maintenance?"D":"";P.Iwerki=d[6].instLoc?"R":d[6].maintenance?"D":"";P.Ingrpi=d[7].instLoc?"R":d[7].maintenance?"D":"";P.Gewrki=d[8].instLoc?"R":d[8].maintenance?"D":"";P.Adrnri=d[10].instLoc?"R":d[10].maintenance?"D":""}if(l[F].viewParameter==="create"){P.Type=true}s.Equipment.push(P);var D={Equi:l[F].Equnr,PlanvPrt:l[F].PlanvPrt,SteufPrt:l[F].SteufPrt,KtschPrt:l[F].KtschPrt,Ewformprt:l[F].Ewformprt,SteufRef:l[F].SteufRef,KtschRef:l[F].KtschRef,EwformRef:l[F].EwformRef};s.EqPRT.push(D);if(l[F].EquipmentCatogory==="L"&&l[F].lam){var y={Equi:l[F].Equnr,Lrpid:l[F].lam.Lrpid,Strtptatr:l[F].lam.Strtptatr,Endptatr:l[F].lam.Endptatr,Length:l[F].lam.Length,LinUnit:l[F].lam.LinUnit,Startmrkr:l[F].lam.Startmrkr,Endmrkr:l[F].lam.Endmrkr,Mrkdisst:l[F].lam.Mrkdisst,Mrkdisend:l[F].lam.Mrkdisend,MrkrUnit:l[F].lam.MrkrUnit};s.EqLAM.push(y)}var I={Equi:l[F].Equnr,Title:l[F].TitleCode,Name1:l[F].Name1,Name2:l[F].Name2,Name3:l[F].Name3,Name4:l[F].Name4,Sort1:l[F].Sort1,Sort2:l[F].Sort2,NameCo:l[F].NameCo,PostCod1:l[F].PostCod1,City1:l[F].City1,Building:l[F].Building,Floor:l[F].Floor,Roomnum:l[F].Roomnum,Strsuppl1:l[F].Strsuppl1,Strsuppl2:l[F].Strsuppl2,Strsuppl3:l[F].Strsuppl3,Location:l[F].AddrLocation,RefPosta:l[F].RefPosta,Landx:l[F].Landx,TimeZone:l[F].TimeZone,RfePost:l[F].Region,Regiotxt:l[F].RegionDesc};s.EqAddr.push(I);var p=l[F].intlAddr;if(p){for(var g=0;g<p.length;g++){s.EqAddrI.push(p[g])}}if(l[F].dfps){var k={Equi:l[F].Equnr,DeviceId:l[F].dfps.Tailno,Topsiteid:l[F].dfps.Area,Topsitede:l[F].dfps.AreaDesc,AreaPro:l[F].dfps.AreaPrfl,SiteId:l[F].dfps.Site,SiteDesc:l[F].dfps.SiteDesc,SitePro:l[F].dfps.SitePrfl,MpoId:l[F].dfps.MPO,MpoDescr:l[F].dfps.MPODesc,RicId:l[F].dfps.RIC,RicDescr:l[F].dfps.RICDesc,ModelId:l[F].dfps.ModelId,ModelDes:l[F].dfps.ModelIdDesc,Foreignob:r.truetoX(l[F].dfps.ForeignEq),TecState:l[F].dfps.TechSts,DepState:l[F].dfps.OperSts,DfpsRmrk:l[F].dfps.Remark};s.EqDFPS.push(k)}var N=l[F].classItems;if(N){if(N.length>0){for(var q=0;q<N.length;q++){var x={Equi:l[F].Equnr,Classtype:N[q].Classtype,Class:N[q].Class,Clstatus1:N[q].Clstatus1};s.EqClass.push(x)}}}var w=l[F].characteristics;if(w){if(w.length>0){for(var R=0;R<w.length;R++){var B={Equi:l[F].Equnr,Atnam:w[R].Atnam,Textbez:w[R].Textbez,Atwrt:w[R].Atwrt,Class:w[R].Class};s.EqVal.push(B)}}}var T=l[F].linearChar;if(T){if(T.length>0){var A=$.map(T,function(e){return $.extend(true,{},e)});for(var C=0;C<A.length;C++){delete A[C].linCharEnable;A[C].Equi=l[F].Equnr;s.EqLAMCH.push(A[C])}}}var O=sap.ui.getCore().getModel("ainMOP").getData();if(O){for(var g=0;g<O.length;g++){if(P.Equnr===O[g].key){P.Modelid=O[g].AIN.Modelid}}}}}if(i.length>0){for(var W=0;W<i.length;W++){var U={Werks:i[W].plant,Arbpl:i[W].wc,Txtmi:i[W].wcDesc,Verwe:i[W].wcCat,Crveran:i[W].person,Planv:i[W].usg,Vgwts:i[W].stdVal,Crsteus:i[W].ctrlKey};if(i[W].hasOwnProperty("Type")){if(i[W].Type==="X"){U.Type="X"}}s.Workcenter.push(U);if(i[W].cost){for(var z=0;z<i[W].cost.length;z++){var K={Werks:i[W].cost[z].CrKokrs,Arbpl:i[W].wc,CrKostl:i[W].cost[z].CrKostl,Costcentxt:i[W].cost[z].Costcentxt,CrLstar:i[W].cost[z].CrLstar,Forn1:i[W].cost[z].Forn1,ActvttypeTxt:i[W].cost[z].ActvttypeTxt,Frmltxt:i[W].cost[z].Frmltxt};s.WCCost.push(K)}}var H=i[W].classItems;if(H){if(H.length>0){for(var q=0;q<H.length;q++){var _={Arbpl:i[W].wc,Werks:i[W].plant,Classtype:H[q].Classtype,Class:H[q].Class};s.ClassWC.push(_)}}}var Q=i[W].characteristics;if(Q){if(Q.length>0){for(var R=0;R<Q.length;R++){var Z={Arbpl:i[W].wc,Werks:i[W].plant,Atnam:Q[R].Atnam,Textbez:Q[R].Textbez,Atwrt:Q[R].Atwrt,Class:Q[R].Class};s.ValueWC.push(Z)}}}}}this.BusyDialog.open();var j=function(n){e.BusyDialog.close();var i=a.getInstance().getPreviousHash();if(i!==undefined){history.go(-1)}else{e.getRouter().navTo("main",{},true)}if(n.FuncLoc.results.length>0){var s=[];for(var o=0;o<n.FuncLoc.results.length;o++){var c=n.FuncLoc.results[o];var u={intlAddr:[],altlbl:[],classItems:[],characteristics:[],linearChar:[],FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};u.Functionallocation=c.Tplnr;u.Flocdescription=c.Txtmi;u.EditMask=c.EditMask;u.Hierarchy=c.Hierarchy;u.Floccategory=c.Fltyp;u.FlocCategoryDesc=c.Flttx;u.Strucindicator=c.TplkzFlc;u.StrucIndicatorDesc=c.Tplxt;u.SupFunctionallocation=c.Tplma;u.SupFlocdescription=c.Supflocdesc;u.Stattext=c.Stattext;u.StsmEqui=c.StsmFloc;u.StsmEquiDesc=c.Statproftxt;u.UstwEqui=c.UstwFloc;u.UswoEqui=c.UswoFloc;u.UstaEqui=c.UstaFloc;u.TechnicalObjectTyp=c.Eqart;u.Description=c.Eartx;u.Maintplant=c.Swerk;u.MaintplantDesc=c.Plantname;u.Location=c.StorFloc;u.Locationdesc=c.Locationdesc;u.BeberFl=c.BeberFl;u.Fing=c.Fing;u.Tele=c.Tele;u.Arbpl=c.Arbplfloc;u.Ktext=c.Workcenterdesc;u.WcWerks=c.Wergwfloc;u.MainArbpl=c.Gewrkfloc;u.MainKtext=c.MainWcDesc;u.MainWerks=c.MainWcPlant;u.Abckz=c.Abckzfloc;u.Abctx=c.Abctx;u.Bukrs=c.Bukrsfloc;u.Butxt=c.Butxt;u.City=c.City;u.Kostl=c.KostFloc;u.Kokrs=c.KokrFloc;u.Mctxt=c.Contareaname;u.Werks=c.PlntFloc;u.Planningplantdes=c.Planningplantdes;u.Ingrp=c.Ingrp;u.Innam=c.Plannergrpdesc;u.ConstrType=c.Submtiflo;u.ConstructionDesc=c.Constdesc;u.menuAction=c.IsMenu;u.Adrnr=c.Adrnr;u.Adrnri=c.Adrnri;u.Deact=c.Deact;u.Alkey=c.Alkey;u.Altxt=c.Altxt;u.Modeldesc=c.Modeldesc;u.Modelref=c.Modelref;u.Modelrver=c.Modelrver;u.Modelext=c.Modelext;u.Modelname=c.Modelname;u.Modelver=c.Modelver;if(c.Type===true){u.viewParameter="create"}if(c.Type===false){u.viewParameter="change";if(u.Floccategory===""||u.Floccategory===undefined){u.FlocCatEnabled=true}else{u.FlocCatEnabled=false}if(u.Strucindicator===""||u.Strucindicator===undefined){u.StrucIndEnabled=true}else{u.StrucIndEnabled=false}u.FunctionalLocEnabled=false}if(c.Swerk!==""){u.BukrsEnabled=false}else{u.MaintplantEnabled=true;u.BukrsEnabled=true}var d=n.FLLAM.results;if(d){for(var f=0;f<d.length;f++){if(d[f].Funcloc===u.Functionallocation){var p={Funcloc:d[f].Funcloc,Lrpid:d[f].Lrpid,LrpidDesc:d[f].LrpDescr,Strtptatr:d[f].Strtptatr,Endptatr:d[f].Endptatr,Length:d[f].Length,LinUnit:d[f].LinUnit,LinUnitDesc:d[f].Uomtext,Startmrkr:d[f].Startmrkr,Endmrkr:d[f].Endmrkr,Mrkdisst:d[f].Mrkdisst,Mrkdisend:d[f].Mrkdisend,MrkrUnit:d[f].MrkrUnit,LamDer:d[f].LamDer};u.lam=p;break}}}if(n.FLAddr){if(n.FLAddr.results){var g=n.FLAddr.results;if(g){if(g.length>0){for(var S=0;S<g.length;S++){if(u.Functionallocation===g[S].Funcloc){var m=sap.ui.getCore().getModel("flocAddressView");var h=m.getData();var M=true;var V,E;if(h.length>0){for(var b=0;b<h.length;b++){if(u.Functionallocation===h[b].Functionallocation){M=false;E=b;break}}}if(M&&u.SupFunctionallocation!==""&&u.SupFunctionallocation!==undefined){V={Functionallocation:u.Functionallocation,IsEditable:g[S].IsEditable};h.push(V);m.setData(h)}if(!M&&u.SupFunctionallocation!==""&&u.SupFunctionallocation!==undefined){h[E].Functionallocation=u.Functionallocation;h[E].IsEditable=g[S].IsEditable;m.setData(h)}u.Title=g[S].Titletxt;u.TitleCode=g[S].Title;u.Name1=g[S].Name1;u.Name2=g[S].Name2;u.Name3=g[S].Name3;u.Name4=g[S].Name4;u.Sort1=g[S].Sort1;u.Sort2=g[S].Sort2;u.NameCo=g[S].NameCo;u.PostCod1=g[S].PostCod1;u.City1=g[S].City1;u.Building=g[S].Building;u.Floor=g[S].Floor;u.Roomnum=g[S].Roomnum;u.Street=g[S].Street;u.Strsuppl1=g[S].Strsuppl1;u.Strsuppl2=g[S].Strsuppl2;u.Strsuppl3=g[S].Strsuppl3;u.RefPosta=g[S].RPostafl;u.Landx=g[S].Landx;u.TimeZone=g[S].TimeZone;u.AddrLocation=g[S].Location;u.Region=g[S].RPostFl;u.RegionDesc=g[S].Regiotxt}}}else{u.Title=u.Title?u.Title:"";u.TitleCode=u.TitleCode?u.TitleCode:"";u.Name1=u.Name1?u.Name1:"";u.Name2=u.Name2?u.Name2:"";u.Name3=u.Name3?u.Name3:"";u.Name4=u.Name4?u.Name4:"";u.Sort1=u.Sort1?u.Sort1:"";u.Sort2=u.Sort2?u.Sort2:"";u.NameCo=u.NameCo?u.NameCo:"";u.PostCod1=u.PostCod1?u.PostCod1:"";u.City1=u.City1?u.City1:"";u.Building=u.Building?u.Building:"";u.Floor=u.Floor?u.Floor:"";u.Roomnum=u.Roomnum?u.Roomnum:"";u.Strsuppl1=u.Strsuppl1?u.Strsuppl1:"";u.Strsuppl2=u.Strsuppl2?u.Strsuppl2:"";u.Strsuppl3=u.Strsuppl3?u.Strsuppl3:"";u.AddrLocation=u.AddrLocation?u.AddrLocation:"";u.RefPosta=u.RefPosta?u.RefPosta:"";u.Landx=u.Landx?u.Landx:"";u.TimeZone=u.TimeZone?u.TimeZone:"";u.Region=u.Region?u.Region:"";u.RegionDesc=u.RegionDesc?u.RegionDesc:""}}}}var C=n.FLAddrI.results;if(C){for(var L=0;L<C.length;L++){if(C[L].Funcloc===u.Functionallocation){C[L].AdNationEnable=false;C[L].City1iVS="None";C[L].StreetiVS="None";u.intlAddr.push(C[L])}}}var T=n.FLALTLBEL.results;if(T){for(var A=0;A<T.length;A++){if(T[A].Funcloc===u.Functionallocation){var F={Funcloc:T[A].Funcloc,AltAlkey:T[A].AltAlkey,Altxt:T[A].Altxt,AltStrno:T[A].AltStrno,AltTplkz:T[A].AltTplkz,Tplxt:T[A].Tplxt,Name1i:T[A].Editm,Actvs:T[A].Actvs,AltPrkey:T[A].AltPrkey,AltReuse:T[A].AltReuse,enableLblSys:false,enableAltLbl:true,enableStrInd:true,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};u.altlbl.push(F)}}}if(n.FLClass){var P=n.FLClass.results;if(P){if(P.length>0){for(var v=0;v<P.length;v++){if(u.Functionallocation===P[v].Funcloc){P[v].ctEnable=false;P[v].classEnable=false;P[v].ClassTypeDesc=P[v].Artxt;delete P[v].Artxt;P[v].ClassDesc=P[v].Kltxt;delete P[v].Kltxt;delete P[v].Changerequestid;delete P[v].Clint;delete P[v].Service;u.classItems.push(P[v])}}u.charNewButton=true;if(e.class&&e.class.getId().includes("detailFloc")===true){e.class.setModel(new t(u.classItems))}}}}if(n.FLVal){var D=n.FLVal.results;if(D){if(D.length>0){for(var S=0;S<D.length;S++){if(u.Functionallocation===D[S].Funcloc){D[S].cNameEnable=false;D[S].Textbz=D[S].Atwtb;delete D[S].Ataut;delete D[S].Ataw1;delete D[S].Atawe;delete D[S].Atcod;delete D[S].Atflb;delete D[S].Atflv;delete D[S].Atimb;delete D[S].Atsrt;delete D[S].Atvglart;delete D[S].Atzis;delete D[S].Changerequestid;delete D[S].CharName;delete D[S].Charid;delete D[S].Classtype;delete D[S].Service;delete D[S].Valcnt;D[S].slNo=S+1;D[S].flag=D[S].Class+"-"+D[S].slNo;u.characteristics.push(D[S])}}for(var L=0;L<u.characteristics.length;L++){var y=1;for(var A=0;A<u.characteristics.length;A++){if(L===A){continue}if(u.characteristics[A].Atnam===u.characteristics[L].Atnam&&u.characteristics[A].Class===u.characteristics[L].Class){y++}}if(y>1){u.characteristics[L].charDltEnable=true}else{u.characteristics[L].charDltEnable=false}if(u.characteristics[L].Atein===true){u.characteristics[L].charAddEnable=false}}if(e.char&&e.char.getId().includes("detailFloc")===true){e.char.setModel(new t(u.characteristics))}}}}if(n.FLLAMCH){var I=n.FLLAMCH.results;if(I){if(I.length>0){for(var S=0;S<I.length;S++){if(u.Functionallocation===I[S].Funcloc){I[S].linCharEnable=true;u.linearChar.push(I[S])}}}}}s.push(u)}sap.ui.getCore().getModel("AIWFLOC").setData(s);var k=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var o=0;o<n.FuncLoc.results.length;o++){var c=n.FuncLoc.results[o];for(var L=0;L<k.length;L++){if(c.Tplnr===k[L].key){var N=k[L].DOI;if(c.Swerki===""){N[0].maintenance=false;N[0].instLoc=false;N[0].SupFlVal="";N[0].currentVal="";N[0].targetVal=""}else if(c.Swerki==="D"){N[0].maintenance=true;N[0].instLoc=false;N[0].SupFlVal="";N[0].currentVal=c.Swerk;N[0].targetVal=c.Swerk}else{N[0].maintenance=false;N[0].instLoc=true;N[0].SupFlVal=c.Swerk;N[0].currentVal="";N[0].targetVal=c.Swerk}if(c.Storti===""){N[1].maintenance=false;N[1].instLoc=false;N[1].SupFlVal="";N[1].currentVal="";N[1].targetVal=""}else if(c.Storti==="D"){N[1].maintenance=true;N[1].instLoc=false;N[1].SupFlVal="";N[1].currentVal=c.StorFloc;N[1].targetVal=c.StorFloc}else{N[1].maintenance=false;N[1].instLoc=true;N[1].SupFlVal=c.StorFloc;N[1].currentVal="";N[1].targetVal=c.StorFloc}if(c.Beberi===""){N[2].maintenance=false;N[2].instLoc=false;N[2].SupFlVal="";N[2].currentVal="";N[2].targetVal=""}else if(c.Beberi==="D"){N[2].maintenance=true;N[2].instLoc=false;N[2].SupFlVal="";N[2].currentVal=c.BeberFl;N[2].targetVal=c.BeberFl}else{N[2].maintenance=false;N[2].instLoc=true;N[2].SupFlVal=c.BeberFl;N[2].currentVal="";N[2].targetVal=c.BeberFl}if(c.Ppsidi===""){N[3].maintenance=false;N[3].instLoc=false;N[3].SupFlVal="";N[3].currentVal="";N[3].targetVal=""}else if(c.Ppsidi==="D"){N[3].maintenance=true;N[3].instLoc=false;N[3].SupFlVal="";N[3].currentVal=c.Arbplfloc;N[3].targetVal=c.Arbplfloc}else{N[3].maintenance=false;N[3].instLoc=true;N[3].SupFlVal=c.Arbplfloc;N[3].currentVal="";N[3].targetVal=c.Arbplfloc}if(c.Abckzi===""){N[4].maintenance=false;N[4].instLoc=false;N[4].SupFlVal="";N[4].currentVal="";N[4].targetVal=""}else if(c.Abckzi==="D"){N[4].maintenance=true;N[4].instLoc=false;N[4].SupFlVal="";N[4].currentVal=c.Abckzfloc;N[4].targetVal=c.Abckzfloc}else{N[4].maintenance=false;N[4].instLoc=true;N[4].SupFlVal=c.Abckzfloc;N[4].currentVal="";N[4].targetVal=c.Abckzfloc}if(c.Bukrsi===""){N[5].maintenance=false;N[5].instLoc=false;N[5].SupFlVal="";N[5].currentVal="";N[5].targetVal=""}else if(c.Bukrsi==="D"){N[5].maintenance=true;N[5].instLoc=false;N[5].SupFlVal="";N[5].currentVal=c.Bukrsfloc;N[5].targetVal=c.Bukrsfloc}else{N[5].maintenance=false;N[5].instLoc=true;N[5].SupFlVal=c.Bukrsfloc;N[5].currentVal="";N[5].targetVal=c.Bukrsfloc}if(c.Kostli===""){N[6].maintenance=false;N[6].instLoc=false;N[6].SupFlVal="";N[6].currentVal="";N[6].targetVal=""}else if(c.Kostli==="D"){N[6].maintenance=true;N[6].instLoc=false;N[6].SupFlVal="";N[6].currentVal=c.KostFloc;N[6].targetVal=c.KostFloc}else{N[6].maintenance=false;N[6].instLoc=true;N[6].SupFlVal=c.KostFloc;N[6].currentVal="";N[6].targetVal=c.KostFloc}if(c.Kokrsi===""){N[7].maintenance=false;N[7].instLoc=false;N[7].SupFlVal="";N[7].currentVal="";N[7].targetVal=""}else if(c.Kokrsi==="D"){N[7].maintenance=true;N[7].instLoc=false;N[7].SupFlVal="";N[7].currentVal=c.KokrFloc;N[7].targetVal=c.KokrFloc}else{N[7].maintenance=false;N[7].instLoc=true;N[7].SupFlVal=c.KokrFloc;N[7].currentVal="";N[7].targetVal=c.KokrFloc}if(c.Iwerki===""){N[8].maintenance=false;N[8].instLoc=false;N[8].SupFlVal="";N[8].currentVal="";N[8].targetVal=""}else if(c.Iwerki==="D"){N[8].maintenance=true;N[8].instLoc=false;N[8].SupFlVal="";N[8].currentVal=c.PlntFloc;N[8].targetVal=c.PlntFloc}else{N[8].maintenance=false;N[8].instLoc=true;N[8].SupFlVal=c.PlntFloc;N[8].currentVal="";N[8].targetVal=c.PlntFloc}if(c.Ingrpi===""){N[9].maintenance=false;N[9].instLoc=false;N[9].SupFlVal="";N[9].currentVal="";N[9].targetVal=""}else if(c.Ingrpi==="D"){N[9].maintenance=true;N[9].instLoc=false;N[9].SupFlVal="";N[9].currentVal=c.Ingrp;N[9].targetVal=c.Ingrp}else{N[9].maintenance=false;N[9].instLoc=true;N[9].SupFlVal=c.Ingrp;N[9].currentVal="";N[9].targetVal=c.Ingrp}if(c.Lgwidi===""){N[10].maintenance=false;N[10].instLoc=false;N[10].SupFlVal="";N[10].currentVal="";N[10].targetVal=""}else if(c.Lgwidi==="D"){N[10].maintenance=true;N[10].instLoc=false;N[10].SupFlVal="";N[10].currentVal=c.Gewrkfloc;N[10].targetVal=c.Gewrkfloc}else{N[10].maintenance=false;N[10].instLoc=true;N[10].SupFlVal=c.Gewrkfloc;N[10].currentVal="";N[10].targetVal=c.Gewrkfloc}if(c.Adrnri===""){N[12].maintenance=false;N[12].instLoc=false;N[12].SupFlVal="";N[12].currentVal="";N[12].targetVal=""}else if(c.Adrnri==="D"){N[12].maintenance=true;N[12].instLoc=false;N[12].SupFlVal="";N[12].currentVal=c.Adrnr;N[12].targetVal=c.Adrnr}else{N[12].maintenance=false;N[12].instLoc=true;N[12].SupFlVal=c.Adrnr;N[12].currentVal="";N[12].targetVal=c.Adrnr}}}}}if(n.Equipment.results.length>0){var s=[];for(var q=0;q<n.Equipment.results.length;q++){var u=n.Equipment.results[q];var x={intlAddr:[],classItems:[],characteristics:[],linearChar:[],charNewButton:false,attachmentCount:"0",Guids:"",EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",ConstrTypeMaxL:0,charValueMaxL:0,dfps:{Tailno:"",TailnoVS:"None",Area:"",AreaDesc:"",AreaPrfl:"",Site:"",SiteDesc:"",SiteVS:"None",SitePrfl:"",MPO:"",MPODesc:"",RIC:"",RICDesc:"",ModelId:"",ModelIdDesc:"",ModelIdVS:"None",ForeignEq:false,TechSts:"",OperSts:"0001",Remark:"",dfpsCrtEnabled:true,dfpsDltEnabled:false,dfpsEnabled:false,TailnoReq:false}};x.Equnr=u.Equnr;x.Eqktx=u.Txtmi;x.EquipmentCatogory=u.Eqtyp;x.EquipCatgDescription=u.Etytx;x.Maintplant=u.Swerk;x.MaintplantDesc=u.Name1;x.SuperordinateEquip=u.HequEeqz;x.SuperordinateEquipDesc=u.SuperordEqDes;x.Bukrs=u.BukrEilo;x.Butxt=u.Butxt;x.Location=u.StorEilo;x.Locationdesc=u.Locationdesc;x.Abckz=u.AbckEilo;x.Abctx=u.Abctx;x.Kostl=u.KostEilo;x.Kokrs=u.KokrEilo;x.Mctxt=u.Contareaname;x.Answt=u.Answt;x.Ansdt=r.getDateFormat(u.Ansdt);x.Waers=u.Waers;x.Werks=u.PplaEeqz;x.Planningplantdes=u.Planningplantdes;x.Ingrp=u.IngrEeqz;x.Innam=u.Plannergrpdesc;x.Arbpl=u.ArbpEilo;x.Ktext=u.Workcenterdesc;x.WcWerks=u.WorkCenterPlant;x.MainArbpl=u.ArbpEeqz;x.MainKtext=u.MainWcDesc;x.MainWerks=u.MainWcPlant;x.BeberFl=u.BebeEilo;x.Fing=u.Fing;x.Tele=u.Tele;x.Herst=u.Herst;x.TechnicalObjectTyp=u.Eqart;x.Description=u.Eartx;x.Typbz=u.Typbz;x.ConstrType=u.SubmEeqz;x.ConstructionDesc=u.Constdesc;x.TechIdNum=u.TidnEeqz;x.Serge=u.Serge;x.MapaEeqz=u.MapaEeqz;x.EquipPosition=u.HeqnEeqz;x.Stattext=u.Stattext;x.StsmEqui=u.StsmEqui;x.StsmEquiDesc=u.Statproftxt;x.UstwEqui=u.UstwEqui;x.UswoEqui=u.UswoEqui;x.UstaEqui=u.UstaEqui;x.menuAction=u.IsMenu;x.Adrnr=u.Adrnr;x.Adrnri=u.Adrnri;x.Fhmkz=u.Fhmkz;x.Funcid=u.Funcid;x.Frcfit=u.Frcfit;x.Frcrmv=u.Frcrmv;x.Deact=u.Deact;if(n.EqPRT){var w=n.EqPRT.results[q];if(w){x.PlanvPrt=w.PlanvPrt;x.SteufPrt=w.SteufPrt;x.KtschPrt=w.KtschPrt;x.Ewformprt=w.Ewformprt;x.PlanvPrtText=l[q].PlanvPrtText;x.SteufPrtText=l[q].SteufPrtText;x.KtschPrtText=l[q].KtschPrtText;x.EwformprtText=l[q].EwformprtText;x.SteufRef=w.SteufRef;x.KtschRef=w.KtschRef;x.EwformRef=w.EwformRef}else{x.PlanvPrt="";x.SteufPrt="";x.KtschPrt="";x.Ewformprt="";x.PlanvPrtText="";x.SteufPrtText="";x.KtschPrtText="";x.EwformprtText="";x.SteufRef=false;x.KtschRef=false;x.EwformRef=false}}var R=n.EqLAM.results;if(R){for(var f=0;f<R.length;f++){if(R[f].Equi===u.Equnr){var B={Equi:R[f].Equi,Lrpid:R[f].Lrpid,LrpidDesc:R[f].LrpDescr,Strtptatr:R[f].Strtptatr,Endptatr:R[f].Endptatr,Length:R[f].Length,LinUnit:R[f].LinUnit,LinUnitDesc:R[f].Uomtext,Startmrkr:R[f].Startmrkr,Endmrkr:R[f].Endmrkr,Mrkdisst:R[f].Mrkdisst,Mrkdisend:R[f].Mrkdisend,MrkrUnit:R[f].MrkrUnit};x.lam=B;break}}}if(u.Type===true){x.viewParameter="create"}if(u.Type===false){x.viewParameter="change";x.EqunrEnabled=false;if(x.EquipmentCatogory===""||x.EquipmentCatogory===undefined){x.EquipCatEnabled=true}else{x.EquipCatEnabled=false}if(x.Maintplant===""||x.Maintplant===undefined){x.MaintplantEnabled=true}else{x.MaintplantEnabled=false}if(x.Tplnr===""||x.Tplnr===undefined){x.TplnrEnabled=true}else{x.TplnrEnabled=false}}if(u.Swerk!==""){x.BukrsEnabled=false}else{x.BukrsEnabled=true}if(u.Eqtyp!=="P"){x.Tplnr=u.TplnEilo;x.Pltxt=u.Flocdescription;x.TplnrEnabled=true}else{x.Tplnr="";x.Pltxt="";x.TplnrEnabled=false}if(x.SuperordinateEquip!==""&&x.SuperordinateEquip!==undefined){x.TplnrEnabled=false;x.SuperordinateEquipEnabled=true}if(x.SuperordinateEquip===""&&x.Tplnr!==""&&x.Tplnr!==undefined){x.TplnrEnabled=true;x.SuperordinateEquipEnabled=false}if(x.SuperordinateEquip!==""&&x.SuperordinateEquip!==undefined||x.Tplnr!==""&&x.Tplnr!==undefined){x.MaintplantEnabled=false}else{x.MaintplantEnabled=true}if(n.EqAddr){if(n.EqAddr.results){var g=n.EqAddr.results;if(g){if(g.length>0){for(var O=0;O<g.length;O++){if(x.Equnr===g[O].Equi){var W=sap.ui.getCore().getModel("equiAddressView");var U=W.getData();var z=true;var K,H;if(U.length>0){for(var _=0;_<U.length;_++){if(u.Equnr===U[_].Equnr){z=false;H=_;break}}}if(z===true){if(x.SuperordinateEquip!==""&&x.SuperordinateEquip!==undefined||x.Tplnr!==""&&x.Tplnr!==undefined){K={Equnr:u.Equnr,Tplnr:x.Tplnr,IsEditable:g[O].IsEditable};U.push(K);W.setData(U)}}if(z===false){if(x.SuperordinateEquip!==""&&x.SuperordinateEquip!==undefined||x.Tplnr!==""&&x.Tplnr!==undefined){U[H].Equnr=u.Equnr;U[H].Tplnr=u.Tplnr;U[H].IsEditable=g[O].IsEditable;W.setData(U)}}x.IsEditable=g[O].IsEditable;x.Title=g[O].Titletxt?g[O].Titletxt:"";x.TitleCode=g[O].Title?g[O].Title:"";x.Name1=g[O].Name1?g[O].Name1:"";x.Name2=g[O].Name2?g[O].Name2:"";x.Name3=g[O].Name3?g[O].Name3:"";x.Name4=g[O].Name4?g[O].Name4:"";x.Sort1=g[O].Sort1?g[O].Sort1:"";x.Sort2=g[O].Sort2?g[O].Sort2:"";x.NameCo=g[O].NameCo?g[O].NameCo:"";x.PostCod1=g[O].PostCod1?g[O].PostCod1:"";x.City1=g[O].City1?g[O].City1:"";x.Building=g[O].Building?g[O].Building:"";x.Floor=g[O].Floor?g[O].Floor:"";x.Roomnum=g[O].Roomnum?g[O].Roomnum:"";x.AddrLocation=g[O].Location?g[O].Location:"";x.Strsuppl1=g[O].Strsuppl1?g[O].Strsuppl1:"";x.Strsuppl2=g[O].Strsuppl2?g[O].Strsuppl2:"";x.Strsuppl3=g[O].Strsuppl3?g[O].Strsuppl3:"";x.RefPosta=g[O].RefPosta?g[O].RefPosta:"";x.Landx=g[O].Landx?g[O].Landx:"";x.TimeZone=g[O].TimeZone?g[O].TimeZone:"";x.Region=g[O].RfePost?g[O].RfePost:"";x.RegionDesc=g[O].Regiotxt?g[O].Regiotxt:""}}}else{x.Title=x.Title?x.Title:"";x.TitleCode=x.TitleCode?x.TitleCode:"";x.Name1=x.Name1?x.Name1:"";x.Name2=x.Name2?x.Name2:"";x.Name3=x.Name3?x.Name3:"";x.Name4=x.Name4?x.Name4:"";x.Sort1=x.Sort1?x.Sort1:"";x.Sort2=x.Sort2?x.Sort2:"";x.NameCo=x.NameCo?x.NameCo:"";x.PostCod1=x.PostCod1?x.PostCod1:"";x.City1=x.City1?x.City1:"";x.Building=x.Building?x.Building:"";x.Floor=x.Floor?x.Floor:"";x.Roomnum=x.Roomnum?x.Roomnum:"";x.Strsuppl1=x.Strsuppl1?x.Strsuppl1:"";x.Strsuppl2=x.Strsuppl2?x.Strsuppl2:"";x.Strsuppl3=x.Strsuppl3?x.Strsuppl3:"";x.AddrLocation=x.AddrLocation?x.AddrLocation:"";x.RefPosta=x.RefPosta?x.RefPosta:"";x.Landx=x.Landx?x.Landx:"";x.TimeZone=x.TimeZone?x.TimeZone:"";x.Region=x.Region?x.Region:"";x.RegionDesc=x.RegionDesc?x.RegionDesc:""}}}}var C=n.EqAddrI.results;if(C){for(var L=0;L<C.length;L++){if(C[L].Equi===x.Equnr){C[L].AdNationEnable=false;C[L].City1iVS="None";C[L].StreetiVS="None";x.intlAddr.push(C[L])}}}if(n.EqDFPS){if(n.EqDFPS.results){var Q=n.EqDFPS.results;if(Q){if(Q.length>0){for(var Z=0;Z<Q.length;Z++){if(x.Equnr===Q[Z].Equi){x.dfps.Equnr=Q[Z].Equi;x.dfps.MeOwner=Q[Z].MeOwner;x.dfps.MeUser=Q[Z].MeUser;x.dfps.Tailno=Q[Z].DeviceId;x.dfps.Area=Q[Z].Topsiteid;x.dfps.AreaDesc=Q[Z].Topsitede;x.dfps.AreaPrfl=Q[Z].AreaPro;x.dfps.Site=Q[Z].SiteId;x.dfps.SiteDesc=Q[Z].SiteDesc;x.dfps.SitePrfl=Q[Z].SitePro;x.dfps.MPO=Q[Z].MpoId;x.dfps.MPODesc=Q[Z].MpoDescr;x.dfps.RIC=Q[Z].RicId;x.dfps.RICDesc=Q[Z].RicDescr;x.dfps.ModelId=Q[Z].ModelId;x.dfps.ModelIdDesc=Q[Z].ModelDes;x.dfps.ForeignEq=r.XtoTrue(Q[Z].Foreignob);x.dfps.TechSts=Q[Z].TecState;x.dfps.OperSts=Q[Z].DepState;x.dfps.Remark=Q[Z].DfpsRmrk;if(Q[Z].DeviceId!==""){x.dfps.dfpsCrtEnabled=false;x.dfps.dfpsDltEnabled=true;x.dfps.dfpsEnabled=true;x.dfps.TailnoReq=true}}}}}}}if(n.EqClass){var P=n.EqClass.results;if(P){if(P.length>0){for(var j=0;j<P.length;j++){if(x.Equnr===P[j].Equi){P[j].ctEnable=false;P[j].classEnable=false;P[j].ClassTypeDesc=P[j].Artxt;delete P[j].Artxt;P[j].ClassDesc=P[j].Kltxt;delete P[j].Kltxt;delete P[j].Changerequestid;delete P[j].Clint;delete P[j].Service;x.classItems.push(P[j])}}x.charNewButton=true;if(e.class&&e.class.getId().includes("detailEqui")===true){e.class.setModel(new t(x.classItems))}}}}if(n.EqVal){var D=n.EqVal.results;if(D){if(D.length>0){for(var G=0;G<D.length;G++){if(x.Equnr===D[G].Equi){D[G].cNameEnable=false;D[G].Textbz=D[G].Atwtb;delete D[G].Ataut;delete D[G].Ataw1;delete D[G].Atawe;delete D[G].Atcod;delete D[G].Atflb;delete D[G].Atflv;delete D[G].Atimb;delete D[G].Atsrt;delete D[G].Atvglart;delete D[G].Atzis;delete D[G].Changerequestid;delete D[G].CharName;delete D[G].Charid;delete D[G].Classtype;delete D[G].Service;delete D[G].Valcnt;D[G].slNo=G+1;D[G].flag=D[G].Class+"-"+D[G].slNo;x.characteristics.push(D[G])}}for(var L=0;L<x.characteristics.length;L++){var y=1;for(var A=0;A<x.characteristics.length;A++){if(L===A){continue}if(x.characteristics[A].Atnam===x.characteristics[L].Atnam&&x.characteristics[A].Class===x.characteristics[L].Class){y++}}if(y>1){x.characteristics[L].charDltEnable=true}else{x.characteristics[L].charDltEnable=false}if(x.characteristics[L].Atein===true){x.characteristics[L].charAddEnable=false}}if(e.char&&e.char.getId().includes("detailEqui")===true){e.char.setModel(new t(x.characteristics))}}}}if(n.EqLAMCH){var I=n.EqLAMCH.results;if(I){if(I.length>0){for(var S=0;S<I.length;S++){if(x.Equnr===I[S].Equi){I[S].linCharEnable=true;x.linearChar.push(I[S])}}}}}s.push(x)}sap.ui.getCore().getModel("AIWEQUI").setData(s);var $=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var o=0;o<n.Equipment.results.length;o++){var c=n.Equipment.results[o];for(var L=0;L<$.length;L++){if(c.Equnr===$[L].key){var N=$[L].DOI;if(c.Swerki===""){N[0].maintenance=false;N[0].instLoc=false;N[0].SupFlVal="";N[0].currentVal="";N[0].targetVal=""}else if(c.Swerki==="D"){N[0].maintenance=true;N[0].instLoc=false;N[0].SupFlVal="";N[0].currentVal=c.Swerk;N[0].targetVal=c.Swerk}else{N[0].maintenance=false;N[0].instLoc=true;N[0].SupFlVal=c.Swerk;N[0].currentVal="";N[0].targetVal=c.Swerk}if(c.Storti===""){N[1].maintenance=false;N[1].instLoc=false;N[1].SupFlVal="";N[1].currentVal="";N[1].targetVal=""}else if(c.Storti==="D"){N[1].maintenance=true;N[1].instLoc=false;N[1].SupFlVal="";N[1].currentVal=c.StorEilo;N[1].targetVal=c.StorEilo}else{N[1].maintenance=false;N[1].instLoc=true;N[1].SupFlVal=c.StorEilo;N[1].currentVal="";N[1].targetVal=c.StorEilo}if(c.Beberi===""){N[2].maintenance=false;N[2].instLoc=false;N[2].SupFlVal="";N[2].currentVal="";N[2].targetVal=""}else if(c.Beberi==="D"){N[2].maintenance=true;N[2].instLoc=false;N[2].SupFlVal="";N[2].currentVal=c.BebeEilo;N[2].targetVal=c.BebeEilo}else{N[2].maintenance=false;N[2].instLoc=true;N[2].SupFlVal=c.BebeEilo;N[2].currentVal="";N[2].targetVal=c.BebeEilo}if(c.Ppsidi===""){N[3].maintenance=false;N[3].instLoc=false;N[3].SupFlVal="";N[3].currentVal="";N[3].targetVal=""}else if(c.Ppsidi==="D"){N[3].maintenance=true;N[3].instLoc=false;N[3].SupFlVal="";N[3].currentVal=c.ArbpEilo;N[3].targetVal=c.ArbpEilo}else{N[3].maintenance=false;N[3].instLoc=true;N[3].SupFlVal=c.ArbpEilo;N[3].currentVal="";N[3].targetVal=c.ArbpEilo}if(c.Abckzi===""){N[4].maintenance=false;N[4].instLoc=false;N[4].SupFlVal="";N[4].currentVal="";N[4].targetVal=""}else if(c.Abckzi==="D"){N[4].maintenance=true;N[4].instLoc=false;N[4].SupFlVal="";N[4].currentVal=c.AbckEilo;N[4].targetVal=c.AbckEilo}else{N[4].maintenance=false;N[4].instLoc=true;N[4].SupFlVal=c.AbckEilo;N[4].currentVal="";N[4].targetVal=c.AbckEilo}if(c.Kostli===""){N[5].maintenance=false;N[5].instLoc=false;N[5].SupFlVal="";N[5].currentVal="";N[5].targetVal=""}else if(c.Kostli==="D"){N[5].maintenance=true;N[5].instLoc=false;N[5].SupFlVal="";N[5].currentVal=c.KostEilo;N[5].targetVal=c.KostEilo}else{N[5].maintenance=false;N[5].instLoc=true;N[5].SupFlVal=c.KostEilo;N[5].currentVal="";N[5].targetVal=c.KostEilo}if(c.Iwerki===""){N[6].maintenance=false;N[6].instLoc=false;N[6].SupFlVal="";N[6].currentVal="";N[6].targetVal=""}else if(c.Iwerki==="D"){N[6].maintenance=true;N[6].instLoc=false;N[6].SupFlVal="";N[6].currentVal=c.PplaEeqz;N[6].targetVal=c.PplaEeqz}else{N[6].maintenance=false;N[6].instLoc=true;N[6].SupFlVal=c.PplaEeqz;N[6].currentVal="";N[6].targetVal=c.PplaEeqz}if(c.Ingrpi===""){N[7].maintenance=false;N[7].instLoc=false;N[7].SupFlVal="";N[7].currentVal="";N[7].targetVal=""}else if(c.Ingrpi==="D"){N[7].maintenance=true;N[7].instLoc=false;N[7].SupFlVal="";N[7].currentVal=c.IngrEeqz;N[7].targetVal=c.IngrEeqz}else{N[7].maintenance=false;N[7].instLoc=true;N[7].SupFlVal=c.IngrEeqz;N[7].currentVal="";N[7].targetVal=c.IngrEeqz}if(c.Gewrki===""){N[8].maintenance=false;N[8].instLoc=false;N[8].SupFlVal="";N[8].currentVal="";N[8].targetVal=""}else if(c.Gewrki==="D"){N[8].maintenance=true;N[8].instLoc=false;N[8].SupFlVal="";N[8].currentVal=c.ArbpEeqz;N[8].targetVal=c.ArbpEeqz}else{N[8].maintenance=false;N[8].instLoc=true;N[8].SupFlVal=c.ArbpEeqz;N[8].currentVal="";N[8].targetVal=c.ArbpEeqz}if(c.Adrnri===""){N[10].maintenance=false;N[10].instLoc=false;N[10].SupFlVal="";N[10].currentVal="";N[10].targetVal=""}else if(c.Adrnri==="D"){N[10].maintenance=true;N[10].instLoc=false;N[10].SupFlVal="";N[10].currentVal=c.Adrnr;N[10].targetVal=c.Adrnr}else{N[10].maintenance=false;N[10].instLoc=true;N[10].SupFlVal=c.Adrnr;N[10].currentVal="";N[10].targetVal=c.Adrnr}}}}}};var G=function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=t.join("\n");sap.m.MessageBox.show(r,{title:"Error",icon:sap.m.MessageBox.Icon.ERROR,onClose:function(){}})};var J=this.getView().getModel();if(s.FLAddrI.length>0){s.FLAddrI=$.map(s.FLAddrI,function(e){return $.extend(true,{},e)});for(var W=0;W<s.FLAddrI.length>0;W++){delete s.FLAddrI[W].AdNationEnable;delete s.FLAddrI[W].City1iVS;delete s.FLAddrI[W].StreetiVS}}if(s.EqAddrI.length>0){s.EqAddrI=$.map(s.EqAddrI,function(e){return $.extend(true,{},e)});for(var W=0;W<s.EqAddrI.length>0;W++){delete s.EqAddrI[W].AdNationEnable;delete s.EqAddrI[W].City1iVS;delete s.EqAddrI[W].StreetiVS}}J.create("/ChangeRequestSet",s,{success:j,error:G})},getDOIMainFrag:function(){if(!o){o=sap.ui.xmlfragment("ugieamui.mdg.eam.lib.doi.DataOrigin",this)}return o},getDOIElementFrag:function(){if(!s){s=sap.ui.xmlfragment("ugieamui.mdg.eam.lib.doi.DOIElement",this)}return s},onCRDescChange:function(){var e=this.getCrType();this.setCrType(e)},addLinearChar:function(e){var a=this.char.getSelectedItem().getBindingContext().getObject();var r=this.getView().getModel(this.oModelName).getData();var n={Atbez:"",Atwrt:a.Atwrt,Charid:a.Atnam,Classtype:a.Classtype,EndPt:0,EndPtDisp:"",LamLengt:0,LamLengtDisp:"",LamUnit:"",Lamcntr:"",Lamlrpid:"",MrkrDiE:"0",MrkrDiS:"0",MrkrDiU:"",MrkrEd:"",MrkrSt:"",StartPt:0,StartPtDisp:"",Valcnt:"",linCharEnable:true};if(e==="AIWFLOC"){n.Funcloc=r.Functionallocation}else if(e==="AIWEQUI"){n.Equi=r.Equnr}r.linearChar.push(n);this.lnrChData.push(n);this.linearChar.setModel(new t(r.linearChar))},deleteLinearChar:function(e,a){var r=this.getView().getModel(this.oModelName).getData();var n=e.getParameter("listItem").getBindingContextPath();var l=n.substring(n.lastIndexOf("/")+1);var i=e.getParameter("listItem").getBindingContext().getObject();r.linearChar.splice(l,1);this.linearChar.setModel(new t(r.linearChar));for(var s in this.lnrChData){if(this.lnrChData[s].Charid===i.Charid&&this.lnrChData[s].Atwrt===i.Atwrt&&this.lnrChData[s].StartPtDisp===i.StartPtDisp&&this.lnrChData[s].EndPtDisp===i.EndPtDisp){this.lnrChData.splice(s,1)}}},handleCharSelectChange:function(e){var a=this;var r=a.getView().getModel(a.oModelName).getData();var n=this.getView().createId("linearcharFrag");var l=sap.ui.core.Fragment.byId(n,"idBtnAddLinChar");var i=e.getParameter("listItem").getBindingContext().getObject();var s=a.getView().getModel("valueHelp2");var o=[new sap.ui.model.Filter("Class","EQ",i.Class),new sap.ui.model.Filter("ClassType","EQ",i.Classtype),new sap.ui.model.Filter("Atnam","EQ",i.Atnam)];var c="/LamCharCheckSet";s.read(c,{filters:o,success:function(e){if(e.results[0].IsLinear===true){l.setEnabled(true);if(a.lnrChData&&a.lnrChData.length>0){for(var n in a.lnrChData){r.linearChar=[];if(a.lnrChData[n].Charid===i.Atnam&&a.lnrChData[n].Atbez===i.Atwrt){r.linearChar.push(a.lnrChData[n])}}a.linearChar.setModel(new t(r.linearChar))}}else{l.setEnabled(false);r.linearChar=[];a.linearChar.setModel(new t(r.linearChar))}},error:function(){l.setEnabled(false);r.linearChar=[];a.linearChar.setModel(new t(r.linearChar))}})},onLCHStPtChange:function(e){var t=e.getSource();var a=t.getParent().getBindingContext().getObject();var r=a.StartPtDisp;var n=a.EndPtDisp;t.setValueState("None");if(n===""){return}if(n<r){t.setValueState("Error")}else{a.LamLengtDisp=(n-r).toString()}},onLCHEdPtChange:function(e){var t=e.getSource();var a=t.getParent().getBindingContext().getObject();var r=a.StartPtDisp;var n=a.EndPtDisp;t.setValueState("None");if(r===""){return}if(n<r){t.setValueState("Error")}else{a.LamLengtDisp=(n-r).toString()}},onLCHuomVH:function(e){n.UOMVH(e,this)},onLCHuomChange:function(e){n._UOMchange(e,this)}})});