sap.ui.define(["ugiaiwui/mdg/aiw/request/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","ugiaiwui/mdg/aiw/request/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/Dialog","sap/m/BusyDialog","ugiaiwui/mdg/aiw/request/util/ValueHelpRequest","ugiaiwui/mdg/aiw/library/js/ValueHelpProvider","sap/ui/core/library","sap/ui/core/message/Message","ugiaiwui/mdg/aiw/request/util/CRPersoService2","sap/m/TablePersoController"],function(e,t,r,l,n,s,o,i,d,c,p,u,m,h){"use strict";jQuery.sap.require("sap.ui.core.format.DateFormat");var S=sap.ui.core.format.DateFormat.getTimeInstance({pattern:"KK:mm:ss"});var T=p.ValueState;var M=p.MessageType;return e.extend("ugiaiwui.mdg.aiw.request.controller.Main",{formatter:l,onInit:function(){var e=this;this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));this.setMode(this._oComponent.getComponentData().startupParameters.mode[0]);if(this._oComponent.getComponentData().startupParameters.hasOwnProperty("state")){this.setState(this._oComponent.getComponentData().startupParameters.state[0]);if(this._oComponent.getComponentData().startupParameters.hasOwnProperty("isHierarchy")){this.setHierarchy(this._oComponent.getComponentData().startupParameters.isHierarchy[0])}if(this._oComponent.getComponentData().startupParameters.hasOwnProperty("hMode")){this.hMode=this._oComponent.getComponentData().startupParameters.hMode[0]}if(sap.ui.getCore().getModel("mocrRefresh")){sap.ui.getCore().getModel("mocrRefresh").setProperty("/refresh",true)}}var a=new t({isChangeRequest:true,isHeader:false});this.getView().setModel(a,"mode");var r=this._oComponent.getModel();r.setDefaultCountMode(sap.ui.model.odata.CountMode.None);r.setRefreshAfterChange(false);this.getView().setModel(r);var l=this._oComponent.getModel("NewModel");this.getView().setModel(l,"valueHelp");var n=this._oComponent.getModel("NewModel2");this.getView().setModel(n,"valueHelp2");var s=this._oComponent.getModel("ApprovalModel");this.getView().setModel(s,"ApprModel");this._initializeAttachments();var o={WCCount:"",GTLCount:"",ETLCount:"",FTLCount:"",TotalTLCount:"",OLCount:"",MatBomCount:"",EqBomCount:"",FLBomCount:"",WbsBomCount:"",TotalBomCount:"",ONCount:""};var i=new t(o);this.getView().setModel(i,"CountModel");var d={deleteMAT:false,deleteEQ:false,deleteFL:false,deleteWBS:false,deleteON:false,actionEnable:true,tableType:"MultiSelect",submitcancelEnable:false,approverejectEnable:false,"Measuring Point":false,"Maintenance Plan":false,"Work Center":false,"Task List":false,"Object Link":false,"Object Network":false,notes:false,isEnable:false,attach:false,AIWModeVis:true};var c=new t(d);this.getView().setModel(c,"EnableModel");sap.ui.getCore().setModel(c,"EnableModel");this.adjustScreenElements();var p=false;if(this._oComponent.getComponentData().startupParameters.hasOwnProperty("caller")){p=true;var u=this._oComponent.getComponentData().startupParameters.path[0];this.bomPath=u.split("-")[0];this.fragmentName=u.split("-")[1];this.uid=this._oComponent.getComponentData().startupParameters.uid[0];this.case=this._oComponent.getComponentData().startupParameters.case[0]}if(this.getMode()!=="display"&&!p){this.readChangeRequestType()}this.getView().getModel().setProperty("/init",true);this.onFirstObjectInit();this.onNextObjectInit();this.onLastObjectInit();if(this.getMode()==="display"){this.getRouter().getRoute("mainDetail").attachPatternMatched(this._onRouteMatched,this)}else{this.getRouter().getRoute("main").attachPatternMatched(this._onRouteMatched,this)}var g={PRTVisible:false,PRTEnable:false};var f=new t(g);sap.ui.getCore().setModel(f,"PRTVisibleEnableModel");this.AltKeyDerivation();var S=new t({EQ:[],FL:[]});sap.ui.getCore().setModel(S,"dataOriginMOP");this.readDOIList("EQUI");this.readDOIList("FUNCLOC");var T=new t([]);sap.ui.getCore().setModel(T,"ainMOP");var M=sap.ui.getCore().getMessageManager();this.getView().setModel(M.getMessageModel(),"message");M.registerObject(this.getView(),true);this.AIWModelDelete=false;var b={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"000",modelParKey:"",modelParKeyVS:"None",modelEnable:true,crtEnable:true,delEnable:false};var E=new t(b);this.getView().setModel(E,"AIWModel");sap.ui.getCore().setModel(E,"AIWModel");if(!this._oTPC){this._oTPC=new h({table:this.getView().byId("draftRequests"),componentName:"ugiaiwui-mdg-aiw-request",persoService:m}).activate()}this.setPriority();var v=this.getView().getModel("valueHelp2");var C=[new sap.ui.model.Filter("Object","EQ","AIW")];v.read("/DraftSearchSet",{filters:C,success:function(a){var r=a.results;var l=new t(r);e.getView().byId("draftRequests").setModel(l);e.getView().byId("idDraftTab").setText("Drafts("+r.length+")")},error:function(e){}});var x=[];var V=new t({items:x});this.getView().setModel(V,"notes");this.isLam()},onPersoButtonPressed:function(e){this._oTPC.openDialog()},onTablePersoRefresh:function(){m.resetPersData();this._oTPC.refresh()},isLam:function(){var e=this;var a=this.getView().getModel("valueHelp");var r=new t({LamEnbl:false});this.getView().setModel(r,"mLamVis");a.read("/LAM_switchSet('')",{success:function(t,a){e.lamSwitch=t.lam_switch;if(e.lamSwitch==="X"){e.getView().getModel("mLamVis").getData().LamEnbl=true;e.getView().getModel("mLamVis").refresh()}else{e.getView().getModel("mLamVis").getData().LamEnbl=false;e.getView().getModel("mLamVis").refresh()}},error:function(e){}})},onExit:function(){this._oTPC.destroyPersoService();this._oTPC.destroy()},setPriority:function(){var e=this;var t=this.getView().getModel("valueHelp2");var a=[];t.read("/CRPrioritySet",{filters:a,success:function(t){if(t.results.length>0){var a=new sap.ui.model.json.JSONModel(t.results);e._oView.byId("idPriority").setModel(a);e._oView.byId("idPriority").bindItems("/",new sap.ui.core.Item({key:"{UsmdPriority}",text:"{Txtmi}"}))}},error:function(){}})},onGenDataChange:function(){this.setCrType()},onAfterRendering:function(){if(this.getMode()==="display"){}},_onRouteMatched:function(e,a,r){var l;if(e){l=e.getParameter("name")}if(l==="main"||l==="mainDetail"||a==="main"||a==="mainDetail"){if(this.getMode()==="display"){this.itemPath=decodeURIComponent(e.getParameter("arguments").itemPath);this.crType=e.getParameter("arguments").crType;this.cReqNo=e.getParameter("arguments").cReqNo;this.crDesc=decodeURIComponent(e.getParameter("arguments").crDesc);this.getView().setModel(this._oComponent.getModel("crCollection"),"crCollection");var n=new t;if(this._oComponent.getModel("crCollection")){n.setData(this._oComponent.getModel("crCollection").getProperty(this.itemPath));this.getView().setModel(n,"crDetail")}if(!this.getRejectDialog()){this.setRejectDialog(sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.Common.RejectionNote",this));this.getView().addDependent(this.getRejectDialog());this.bindRejectReason()}var s=this.getView().getModel("i18n").getProperty("ChangeRequest")+": "+decodeURIComponent(this.crDesc)+" ("+this.cReqNo+")";this.getView().byId("crId").setText(s);this.decisionDialog=new sap.m.BusyDialog;this.getDecision()}var o={titleName:this.getView().getModel("i18n").getProperty("title")};var i=new t;i.setData(o);this.getView().setModel(i,"applicationModel");var d=sap.ui.getCore().getModel("onFirstLoadFlag").FirstLoadFlag;if(this.mode==="display"&&d){var c=new t([]);sap.ui.getCore().setModel(c,"AIWListMatModel");this.getView().setModel(c,"AIWListMatModel");var p=new t([]);sap.ui.getCore().setModel(p,"AIWListEqModel");this.getView().setModel(p,"AIWListEqModel");var u=new t([]);sap.ui.getCore().setModel(u,"AIWListFLModel");this.getView().setModel(u,"AIWListFLModel");var g=new t([]);sap.ui.getCore().setModel(g,"AIWListWBSModel");this.getView().setModel(g,"AIWListWBSModel");var m=new t([]);sap.ui.getCore().setModel(m,"AIWListONModel");this.getView().setModel(m,"AIWListONModel");this.updateCountOnLoad();sap.ui.getCore().setModel(new t([]),"AIWAPPROVE");this.AIWModelDelete=false;var f={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"000",modelParKey:"",modelParKeyVS:"None",modelEnable:false,crtEnable:false,delEnable:false};var h=new t(f);this.getView().setModel(h,"AIWModel");sap.ui.getCore().setModel(h,"AIWModel");d=false;sap.ui.getCore().setModel({FirstLoadFlag:d},"onFirstLoadFlag")}else{var S=sap.ui.getCore().getModel(this.oModelAIWFLOC);this.getView().getModel(this.oModelAIWFLOC).setData(S.getData());this.onUpdateTitleCount(this.oModelAIWFLOC,S.getData());var T=sap.ui.getCore().getModel(this.oModelAIWEQUI);this.getView().getModel(this.oModelAIWEQUI).setData(T.getData());this.onUpdateTitleCount(this.oModelAIWEQUI,T.getData());var M=sap.ui.getCore().getModel(this.oModelAIWMSPT);this.getView().getModel(this.oModelAIWMSPT).setData(M.getData());this.onUpdateTitleCount(this.oModelAIWMSPT,M.getData());var b=sap.ui.getCore().getModel(this.oModelAIWMPMI);this.getView().getModel(this.oModelAIWMPMI).setData(b.getData());this.onUpdateTitleCount(this.oModelAIWMPMI,b.getData());var c=sap.ui.getCore().getModel("AIWListMatModel");this.getView().getModel("AIWListMatModel").setData(c.getData());this.updateCount("MaterialBom",c.getData());var p=sap.ui.getCore().getModel("AIWListEqModel");this.getView().getModel("AIWListEqModel").setData(p.getData());this.updateCount("EquipmentBom",p.getData());var u=sap.ui.getCore().getModel("AIWListFLModel");this.getView().getModel("AIWListFLModel").setData(u.getData());this.updateCount("FLBom",u.getData());var g=sap.ui.getCore().getModel("AIWListWBSModel");this.getView().getModel("AIWListWBSModel").setData(g.getData());this.updateCount("WbsBom",g.getData());var m=sap.ui.getCore().getModel("AIWListONModel");this.getView().getModel("AIWListONModel").setData(m.getData());this.updateCount("ObjNet",m.getData())}var E=this.getView().getModel("EnableModel");var v=E.getData();if(this.getMode()==="request"){v.actionEnable=true;v.tableType="MultiSelect";v.submitcancelEnable=true;v.approverejectEnable=false;v.notes=false;v.attach=false;this.enableFields();if(this.getState()==="MOCR"){var C=sap.ui.getCore().getModel("mocrRefresh");var x;if(C){x=C.getProperty("/refresh")}if(C===undefined){var n=new t({refresh:true});sap.ui.getCore().setModel(n,"mocrRefresh")}var V=sap.ui.getCore().getModel("mocrRefresh").getProperty("/refresh");if(r!=="clear"&&V){this.readBufferData()}}}else{v.actionEnable=false;v.tableType="None";v.submitcancelEnable=false;v.approverejectEnable=true;v.notes=true;v.attach=true;v.isEnable=true;this.disableFields()}E.setData(v);this.getView().byId("idMessagePopover").setText("0");this.getView().byId("idMessagePopover").setEnabled(false);var P=sap.ui.getCore().getModel("AIWListWCModel");this.getView().getModel("AIWListWCModel").setData(P.getData());this.updateCount("workCenter",P.getData());var I=sap.ui.getCore().getModel("AIWListGTLModel");this.getView().getModel("AIWListGTLModel").setData(I.getData());this.updateCount("generalTL",I.getData());if(this.action==="createGTL"){var L=I.getData();var y=this.getView().getModel("GTLHeaderModel");var D=[];for(var k=0;k<L.length;k++){if(this.gtlPath===k){D.push(L[k].header)}}y.setData(D);this.getView().setModel(y,"GTLHeaderModel")}var F=sap.ui.getCore().getModel("AIWListETLModel");this.getView().getModel("AIWListETLModel").setData(F.getData());this.updateCount("equiTL",F.getData());if(this.action==="createETL"){var A=F.getData();var w=this.getView().getModel("ETLHeaderModel");var q=[];for(var k=0;k<A.length;k++){if(this.etlPath===k){q.push(A[k].header)}}w.setData(q);this.getView().setModel(w,"ETLHeaderModel")}var W=sap.ui.getCore().getModel("AIWListFTLModel");this.getView().getModel("AIWListFTLModel").setData(W.getData());this.updateCount("flocTL",W.getData());if(this.action==="createFTL"){var B=W.getData();var N=this.getView().getModel("FTLHeaderModel");var O=[];for(var k=0;k<B.length;k++){if(this.ftlPath===k){O.push(B[k].header)}}N.setData(O);this.getView().setModel(N,"FTLHeaderModel")}var R=sap.ui.getCore().getModel("AIWListOLModel");this.getView().getModel("AIWListOLModel").setData(R.getData());this.updateCount("objLink",R.getData());var U=sap.ui.getCore().getModel("flocImportFlag");if(U){U=false;sap.ui.getCore().setModel(U,"flocImportFlag");this.readAIWModel("R")}if(this._oComponent.getComponentData().startupParameters.hasOwnProperty("caller")){if(this._oComponent.getComponentData().startupParameters.caller[0]==="Material"&&!sap.ui.getCore().getModel("MatNavModel")){this.bufferRead(this.bomPath,this.uid,this.fragmentName,this.case)}if(this._oComponent.getComponentData().startupParameters.caller[0]==="BOMCH"&&!sap.ui.getCore().getModel("BOMCHNavModel")){this.navigateToBom()}}}else{return}},navigateToBom:function(){var e=this;var a=sap.ui.getCore().getModel("AIWFLOCBackup").getData();var r=$.map(a,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(r),"AIWFLOC");var l=sap.ui.getCore().getModel("AIWEQUIBackup").getData();var n=$.map(l,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(n),"AIWEQUI");var s=sap.ui.getCore().getModel("AIWMSPTBackup").getData();var o=$.map(s,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(o),"AIWMSPT");var i=sap.ui.getCore().getModel("AIWMPMIBackup").getData();var d=$.map(i,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(d),"AIWMPMI");var c=sap.ui.getCore().getModel("AIWListMatModelBackup").getData();var p=$.map(c,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(p),"AIWListMatModel");var u=sap.ui.getCore().getModel("AIWListEqModelBackup").getData();var g=$.map(u,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(g),"AIWListEqModel");var m=sap.ui.getCore().getModel("AIWListFLModelBackup").getData();var f=$.map(m,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(f),"AIWListFLModel");var h=sap.ui.getCore().getModel("AIWListWBSModelBackup").getData();var S=$.map(h,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(S),"AIWListWBSModel");var T=sap.ui.getCore().getModel("AIWListONModelBackup").getData();var M=$.map(T,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(M),"AIWListONModel");var b=sap.ui.getCore().getModel("AIWListWCModelBackup").getData();var E=$.map(b,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(E),"AIWListWCModel");var v=sap.ui.getCore().getModel("AIWListGTLModelBackup").getData();var C=$.map(v,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(C),"AIWListGTLModel");var x=sap.ui.getCore().getModel("AIWListETLModelBackup").getData();var V=$.map(v,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(V),"AIWListETLModel");var P=sap.ui.getCore().getModel("AIWListFTLModelBackup").getData();var I=$.map(P,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(I),"AIWListFTLModel");var L=sap.ui.getCore().getModel("AIWListOLModelBackup").getData();var y=$.map(P,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(y),"AIWListOLModel");var D=sap.ui.getCore().getModel("dataOriginMOPBackup").getData();var k=$.map(D,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(k[0]),"dataOriginMOP");var F=sap.ui.getCore().getModel("EnableModelBackup").getData();var A=$.map(F,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(A[0]),"EnableModel");e.getView().setModel(new t(A[0]),"EnableModel");var w=sap.ui.getCore().getModel("AIWModelBackup").getData();var q=$.map(w,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(q[0]),"AIWModel");e.getView().setModel(new t(q[0]),"AIWModel");var W=sap.ui.getCore().getModel("ainMOPBackup").getData();var B=$.map(W,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(B),"ainMOP");var N=sap.ui.getCore().getModel("tempCrTypeModelBackup").getData();var O=$.map(N,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(O[0]),"tempCrTypeModel");e.crType=O[0].crtype;e.getView().byId("Description").setValue(O[0].desc);e.getView().byId("idPriority").setSelectedKey(O[0].priority);e.getView().byId("idDueDate").setDateValue(O[0].duedate);e.getRouter().navTo("detail",{FragmentName:e.fragmentName,itemPath:e.bomPath,e:" ",p:" ",u:" ",cr:" ",w:" ",mode:e.getMode(),mat:false,uid:e.uid});sap.ui.getCore().setModel("X","BOMCHNavModel")},bufferRead:function(e,a,r,l){var n=this;var s=sap.ui.getCore().getModel("AIWFLOCBackup").getData();var o=$.map(s,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(o),"AIWFLOC");var i=sap.ui.getCore().getModel("AIWEQUIBackup").getData();var d=$.map(i,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(d),"AIWEQUI");var c=sap.ui.getCore().getModel("AIWMSPTBackup").getData();var p=$.map(c,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(p),"AIWMSPT");var u=sap.ui.getCore().getModel("AIWMPMIBackup").getData();var g=$.map(u,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(g),"AIWMPMI");var m=sap.ui.getCore().getModel("AIWListMatModelBackup").getData();var f=$.map(m,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(f),"AIWListMatModel");var h=sap.ui.getCore().getModel("AIWListEqModelBackup").getData();var S=$.map(h,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(S),"AIWListEqModel");var T=sap.ui.getCore().getModel("AIWListFLModelBackup").getData();var M=$.map(T,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(M),"AIWListFLModel");var b=sap.ui.getCore().getModel("AIWListWBSModelBackup").getData();var E=$.map(b,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(E),"AIWListWBSModel");var v=sap.ui.getCore().getModel("AIWListONModelBackup").getData();var C=$.map(v,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(C),"AIWListONModel");var x=sap.ui.getCore().getModel("AIWListWCModelBackup").getData();var V=$.map(x,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(V),"AIWListWCModel");var P=sap.ui.getCore().getModel("AIWListGTLModelBackup").getData();var I=$.map(P,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(I),"AIWListGTLModel");var L=sap.ui.getCore().getModel("AIWListETLModelBackup").getData();var y=$.map(P,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(y),"AIWListETLModel");var D=sap.ui.getCore().getModel("AIWListFTLModelBackup").getData();var k=$.map(D,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(k),"AIWListFTLModel");var F=sap.ui.getCore().getModel("AIWListOLModelBackup").getData();var A=$.map(D,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(A),"AIWListOLModel");var w=sap.ui.getCore().getModel("dataOriginMOPBackup").getData();var q=$.map(w,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(q[0]),"dataOriginMOP");var W=sap.ui.getCore().getModel("EnableModelBackup").getData();var B=$.map(W,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(B[0]),"EnableModel");n.getView().setModel(new t(B[0]),"EnableModel");var N=sap.ui.getCore().getModel("AIWModelBackup").getData();var O=$.map(N,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(O[0]),"AIWModel");n.getView().setModel(new t(O[0]),"AIWModel");var R=sap.ui.getCore().getModel("ainMOPBackup").getData();var U=$.map(R,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(U),"ainMOP");var z=sap.ui.getCore().getModel("tempCrTypeModelBackup").getData();var K=$.map(z,function(e){return $.extend(true,{},e)});sap.ui.getCore().setModel(new t(K[0]),"tempCrTypeModel");n.crType=K[0].crtype;n.getView().byId("Description").setValue(K[0].desc);n.getView().byId("idPriority").setSelectedKey(K[0].priority);n.getView().byId("idDueDate").setDateValue(K[0].duedate);n.getRouter().navTo("detail",{FragmentName:r,itemPath:e,e:" ",p:" ",u:" ",cr:" ",w:" ",mode:n.getMode(),mat:true,uid:a,case:l});sap.ui.getCore().setModel("X","MatNavModel")},onFirstObjectInit:function(){this._oView=this.getView();this.oModelAIWFLOC="AIWFLOC";this.oModelAIWEQUI="AIWEQUI";this.oModelAIWMSPT="AIWMSPT";this.oModelAIWMPMI="AIWMPMI";this.getView().setModel(new t([]),this.oModelAIWFLOC);this.getView().setModel(new t([]),this.oModelAIWEQUI);this.getView().setModel(new t([]),this.oModelAIWMSPT);this.getView().setModel(new t([]),this.oModelAIWMPMI);sap.ui.getCore().setModel(new t([]),this.oModelAIWFLOC);sap.ui.getCore().setModel(new t([]),this.oModelAIWEQUI);sap.ui.getCore().setModel(new t([]),this.oModelAIWMSPT);sap.ui.getCore().setModel(new t([]),this.oModelAIWMPMI);sap.ui.getCore().setModel(new t([]),"AIWAPPROVE");sap.ui.getCore().setModel(new t([]),"onFirstLoadFlag");sap.ui.getCore().setModel(new t([]),"flocAddressView");sap.ui.getCore().setModel(new t([]),"equiAddressView");sap.ui.getCore().setModel(new t([]),"SUP_FLOC_DATA");sap.ui.getCore().setModel(new t([]),"SUP_EQUI_DATA");this.getView().setModel(new t([]),"copyModel");this.resultArr=[];this.submitBtn=false;sap.ui.getCore().setModel(new t([]),"itemCycleModel");this.readEAMCRType();this.getView().setModel(new t([]),"ApproveModel");this.handleApproveModel(true,"MultiSelect",true,false,true,true);var e={attachFlocFlag:true,attachEquiFlag:true,attachMsptFlag:true,attachMpmiFlag:true};sap.ui.getCore().setModel(new t(e),"ClassAttachRequest");var a={deleteFLOC:false,deleteEQUI:false,deleteMSPT:false,deleteMPMI:false};this.getView().setModel(new t(a),"mainView");this.configureMessagePopover()},onNextObjectInit:function(){var e=new t([]);sap.ui.getCore().setModel(e,"AIWListMatModel");this.getView().setModel(e,"AIWListMatModel");var a=new t([]);sap.ui.getCore().setModel(a,"AIWListEqModel");this.getView().setModel(a,"AIWListEqModel");var r=new t([]);sap.ui.getCore().setModel(r,"AIWListFLModel");this.getView().setModel(r,"AIWListFLModel");var l=new t([]);sap.ui.getCore().setModel(l,"AIWListWBSModel");this.getView().setModel(l,"AIWListWBSModel");var n=new t([]);sap.ui.getCore().setModel(n,"AIWListONModel");this.getView().setModel(n,"AIWListONModel");this.BusyDialog=new i;this.readSystem();var s={AiwTblBusy:false};var o=new t;o.setData(s);this.getView().setModel(o,"BusyModel");var d=new sap.ui.model.json.JSONModel({refresh:true});sap.ui.getCore().setModel(d,"refreshModel");var c=true;sap.ui.getCore().setModel({FirstLoadFlag:c},"onFirstLoadFlag")},onLastObjectInit:function(e){this._oView=this.getView();this.BusyDialog=new i;var a=new t([]);sap.ui.getCore().setModel(a,"AIWListWCModel");this.getView().setModel(a,"AIWListWCModel");var r=new t([]);r.getData().addGTLCounter=false;r.getData().addETLCounter=false;r.getData().addFTLCounter=false;this.getView().setModel(r,"aCounterModel");var l=new t([]);this.getView().setModel(l,"GTLHeaderModel");var n=new t([]);this.getView().setModel(n,"ETLHeaderModel");var s=new t([]);this.getView().setModel(s,"FTLHeaderModel");var o=new t([]);o.getData().addCounter=false;sap.ui.getCore().setModel(o,"AIWListGTLModel");this.getView().setModel(o,"AIWListGTLModel");var d=new t([]);d.getData().addCounter=false;sap.ui.getCore().setModel(d,"AIWListETLModel");this.getView().setModel(d,"AIWListETLModel");var c=new t([]);c.getData().addCounter=false;sap.ui.getCore().setModel(c,"AIWListFTLModel");this.getView().setModel(c,"AIWListFTLModel");var p=new t([]);sap.ui.getCore().setModel(p,"AIWListOLModel");this.getView().setModel(p,"AIWListOLModel");if(!e){this._wcFragment=sap.ui.xmlfragment(this.getView().getId(),"ugiaiwui.mdg.aiw.request.DomainParts.WC.WorkCenter",this);this.getView().addDependent(this._wcFragment);this._genTLFragment=sap.ui.xmlfragment(this.getView().getId(),"ugiaiwui.mdg.aiw.request.DomainParts.TL.GeneralTaskList",this);this.getView().addDependent(this._genTLFragment);this._eqTLFragment=sap.ui.xmlfragment(this.getView().getId(),"ugiaiwui.mdg.aiw.request.DomainParts.TL.EquipmentTaskList",this);this.getView().addDependent(this._eqTLFragment);this._flocTLFragment=sap.ui.xmlfragment(this.getView().getId(),"ugiaiwui.mdg.aiw.request.DomainParts.TL.FLOCTaskList",this);this.getView().addDependent(this._flocTLFragment);this._olFragment=sap.ui.xmlfragment(this.getView().getId(),"ugiaiwui.mdg.aiw.request.DomainParts.OL.ObjectLink",this);this.getView().addDependent(this._olFragment)}var u={deleteWC:false,deleteOL:false,deleteGTL:false,deleteETL:false,deleteFTL:false};var g=new t(u);this.getView().setModel(g,"EnableDELModel")},adjustScreenElements:function(){if(this.getMode()==="display"){this.getView().getModel("mode").setProperty("/isChangeRequest",false);this.getView().getModel("mode").setProperty("/isHeader",true);this.getView().byId("_iconTabBar").setSelectedKey("FLOCTab")}else{this.getView().getModel("mode").setProperty("/isChangeRequest",true);this.getView().getModel("mode").setProperty("/isHeader",false);this.getView().byId("_iconTabBar").setSelectedKey("general")}},readChangeRequestType:function(){var e="/AIWCRTypeSet";var t=this;if(this.getMode()!=="display"){var a=this.getView().getModel("valueHelp");a.read(e,{success:function(e,a){if(e.results.length>0){t.crTypeResults=e.results;var r=new sap.m.List({mode:"SingleSelectMaster",itemPress:function(e){l.close();var a=e.getParameters().listItem.getProperty("title");t.setCrType(a);t.fetchReason()}});var l=new sap.m.Dialog({title:t.getView().getModel("i18n").getProperty("crTypeTitle"),content:[r],leftButton:new sap.m.Button({text:t.getView().getModel("i18n").getProperty("cancel"),type:sap.m.ButtonType.Up,press:function(){l.close();window.history.back()}})});var n=new sap.m.StandardListItem({title:"{CRType}",description:"{Description}",active:true,icon:"sap-icon://request",type:"Active"});var s=new sap.ui.model.json.JSONModel;s.setData(e);r.setModel(s);r.bindAggregation("items","/results",n);l.open()}else{var o=!!t.getView().$().closest(".sapUiSizeCompact").length;sap.m.MessageBox.information(t.getView().getModel("i18n").getProperty("CR_CHECK"),{actions:[sap.m.MessageBox.Action.OK],styleClass:o?"sapUiSizeCompact":"",onClose:function(e){window.history.back()}})}}})}},readDOIList:function(e){var t=this.getView().getModel("valueHelp2");var a=this;var r=[new sap.ui.model.Filter("Entity","EQ",e)];t.read("/DOIListSet",{filters:r,success:function(t){var r=new sap.ui.model.json.JSONModel;var l=t.results;var n=[];for(var s=0;s<l.length;s++){var o=new Object;var i=t.results[s].Property;o["SupFlVal"]="";o["instLoc"]=false;o["maintenance"]=false;o["Label"]=t.results[s].Label;o["property"]=t.results[s].Property;o["currentVal"]="";o["doiIcon"]=true;o[t.results[s].Property]="";if(t.results[s].Property==="Maintplant"){o["locEnable"]=false;o["maintEnable"]=false}else{o["locEnable"]=true;o["maintEnable"]=true}n.push(o)}if(e==="EQUI"){a.DOIarrayEQ=n}if(e==="FUNCLOC"){a.DOIarrayFL=n}},error:function(e){}})},AltKeyDerivation:function(){var e="/DefaultValueSet";var t=this;var a=this.getView().getModel("valueHelp");a.read(e,{success:function(e,a){t.AltLblDerv=e.results[0].AltLabel;t.AltKeyDerv=e.results[0].Alkey;t.AltKeyDescDerv=e.results[0].Altxt;t.StrcIndDerv=e.results[0].StrucIndicator;t.StrcIndDescDerv=e.results[0].StrucIndicatorDesc;t.EditMaskDerv=e.results[0].Editm;t.HierDerv=e.results[0].Stufm}})},setState:function(e){this.state=e},getState:function(){return this.state},setHierarchy:function(e){this.isHierarchy=e},getHierarchy:function(){return this.isHierarchy},readHdrDefaults:function(e,t,a){var r=this;var l=this.getView().getModel();var n=[];var s="/ProfileDataSet";var o=[new sap.ui.model.Filter("Profidnetz","EQ","")];l.read(s,{filters:o,success:function(a){n=a.results[0];if(n){if(r.action.indexOf("GTL")>0){var l=r.getView().getModel("GTLHeaderModel");var s=l.getData();if(e==="planningPlant"){s[0][t].tlusg=n.Verwe;s[0][t].Statu=n.Statu;s[0][t].usageDesc=n.Vtext;s[0][t].statusDesc=n.Sttext}if(e==="status"){s[0][t].tlusg=n.Verwe;s[0][t].usageDesc=n.Vtext}if(e==="usage"){s[0][t].Statu=n.Statu;s[0][t].statusDesc=n.Sttext}if(e==="tlDesc"){s[0][t].tlusg=n.Verwe;s[0][t].Statu=n.Statu;s[0][t].usageDesc=n.Vtext;s[0][t].statusDesc=n.Sttext}l.setData(s)}else if(r.action.indexOf("ETL")>0){var o=r.getView().getModel("ETLHeaderModel");var i=o.getData();if(e==="planningPlant"){i[0][t].tlusg=n.Verwe;i[0][t].Statu=n.Statu;i[0][t].usageDesc=n.Vtext;i[0][t].statusDesc=n.Sttext}if(e==="status"){i[0][t].tlusg=n.Verwe;i[0][t].usageDesc=n.Vtext}if(e==="usage"){i[0][t].Statu=n.Statu;i[0][t].statusDesc=n.Sttext}if(e==="tlDesc"){i[0][t].tlusg=n.Verwe;i[0][t].Statu=n.Statu;i[0][t].usageDesc=n.Vtext;i[0][t].statusDesc=n.Sttext}o.setData(i)}else if(r.action.indexOf("FTL")>0){var d=r.getView().getModel("FTLHeaderModel");var c=d.getData();if(e==="planningPlant"){c[0][t].tlusg=n.Verwe;c[0][t].Statu=n.Statu;c[0][t].usageDesc=n.Vtext;c[0][t].statusDesc=n.Sttext}if(e==="status"){c[0][t].tlusg=n.Verwe;c[0][t].usageDesc=n.Vtext}if(e==="usage"){c[0][t].Statu=n.Statu;c[0][t].statusDesc=n.Sttext}if(e==="tlDesc"){c[0][t].tlusg=n.Verwe;c[0][t].Statu=n.Statu;c[0][t].usageDesc=n.Vtext;c[0][t].statusDesc=n.Sttext}d.setData(c)}}},error:function(e){}})},onHeaderDlt:function(e){var t=this;var a,r,l,n,s,o;if(t.action.indexOf("GTL")>0){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2]);var i=this.getView().getModel("AIWListGTLModel");var d=i.getData();var c=d[t.gtlPath];r=c.header[t.sindex].Plnal;if(c.operation){l=c.operation;for(var p=0;p<l.length;p++){if(r===l[p].Plnal){l.splice(p,1)}}}if(c.component){n=c.component;for(var u=0;u<n.length;u++){if(r===n[u].Plnal){n.splice(u,1)}}}if(c.Char){o=c.Char}if(c.Class){s=c.Class;for(var g=0;g<s.length;g++){if(r===s[g].Plnal){if(o){for(var m=o.length-1;m>=0;m--){if(s[g].Class===o[m].Class){o.pop(m)}}}s.splice(g,1)}}}if(c.header){c.header.splice(t.sindex,1)}if(c.lHeader){delete c.lHeader}t.getView().getModel("GTLHeaderModel").refresh();t.getView().setModel(i,"AIWListGTLModel");sap.ui.getCore().setModel(i,"AIWListGTLModel")}else if(t.action.indexOf("ETL")>0){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2]);var f=this.getView().getModel("AIWListETLModel");var h=f.getData();var S=h[t.etlPath];r=S.header[t.sindex].Plnal;if(S.operation){l=S.operation;for(var p=0;p<l.length;p++){if(r===l[p].Plnal){l.splice(p,1)}}}if(S.component){n=S.component;for(var u=0;u<n.length;u++){if(r===n[u].Plnal){n.splice(u,1)}}}if(S.Char){o=S.Char}if(S.Class){s=S.Class;for(var g=0;g<s.length;g++){if(r===s[g].Plnal){if(o){for(var m=o.length-1;m>=0;m--){if(s[g].Class===o[m].Class){o.pop(m)}}}s.splice(g,1)}}}if(S.header){S.header.splice(t.sindex,1)}if(S.lHeader){delete S.lHeader}t.getView().getModel("ETLHeaderModel").refresh();t.getView().setModel(f,"AIWListETLModel");sap.ui.getCore().setModel(f,"AIWListETLModel")}else if(t.action.indexOf("FTL")>0){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2]);var T=this.getView().getModel("AIWListFTLModel");var M=T.getData();var b=M[t.ftlPath];r=b.header[t.sindex].Plnal;if(b.operation){l=b.operation;for(var p=0;p<l.length;p++){if(r===l[p].Plnal){l.splice(p,1)}}}if(b.component){n=b.component;for(var u=0;u<n.length;u++){if(r===n[u].Plnal){n.splice(u,1)}}}if(b.Char){o=b.Char}if(b.Class){s=b.Class;for(var g=0;g<s.length;g++){if(r===s[g].Plnal){if(o){for(var m=o.length-1;m>=0;m--){if(s[g].Class===o[m].Class){o.pop(m)}}}s.splice(g,1)}}}if(b.header){b.header.splice(t.sindex,1)}if(b.lHeader){delete b.lHeader}t.getView().getModel("FTLHeaderModel").refresh();t.getView().setModel(T,"AIWListFTLModel");sap.ui.getCore().setModel(T,"AIWListFTLModel")}},_initializeAttachments:function(){var e=this;this.oAttach=[];this.getView().setModel(new sap.ui.model.json.JSONModel,"json");this.oFileUpload=this.byId("fileupload");this.oFileUpload.setUploadUrl(this._oComponent.getModel().sServiceUrl+"/Attachments");var t={dataitems:[]};e.mockDataModel=new sap.ui.model.json.JSONModel(t);e.oFileUpload.setModel(e.mockDataModel)},onBeforeUploadFile:function(e){var t=this.getXsrfToken();var a=new sap.m.UploadCollectionParameter({name:"x-csrf-token",value:t});var r=this.oFileUpload.getHeaderParameters();if(r[0]===undefined){this.oFileUpload.addHeaderParameter(a)}var l=this.oFileUpload.getHeaderParameters()[0].getValue("x-csrf-token");if(l===""){this.oFileUpload.addHeaderParameter(a)}var n=e.getParameter("mParameters").files[0].name;var s=new sap.m.UploadCollectionParameter({name:"slug",value:encodeURIComponent(n)});var o=new sap.m.UploadCollectionParameter({name:"Content-Type",value:n});this.oFileUpload.removeHeaderParameter(r[1]);this.oFileUpload.addHeaderParameter(s);this.oFileUpload.addHeaderParameter(o)},onUploadFile:function(e){var t,a,r,l,n,s;var o=e.getParameters().getParameters().responseRaw;if((navigator.userAgent.indexOf("Safari")>-1||navigator.userAgent.indexOf("Chrome")>-1)&&window.DOMParser){var i=jQuery.sap.parseXML(o);t=i.querySelectorAll("CreatedBy")[0].textContent;a=i.querySelectorAll("MimeType")[0].textContent;r=i.querySelectorAll("Guid")[0].textContent;l=i.querySelectorAll("id")[0].textContent;s=i.querySelectorAll("FileName")[0].textContent;n=l+"/$value"}else{var d=new DOMParser;var c=d.parseFromString(o,"text/xml");t=c.getElementsByTagName("d:CreatedBy")[0].childNodes[0].nodeValue;a=c.getElementsByTagName("d:MimeType")[0].childNodes[0].nodeValue;r=c.getElementsByTagName("d:Guid")[0].childNodes[0].nodeValue;l=c.getElementsByTagName("id")[0].childNodes[0].nodeValue;n=l+"/$value"}var p=e.getParameters().getParameters().fileName;var u=function(){var e=new Date;var t=e.getDate();var a=e.getMonth()+1;var r=e.getFullYear();if(t<10){t="0"+t}if(a<10){a="0"+a}return r+"-"+a+"-"+t};if(r!==""){var g=this.mockDataModel.getData();var m={mimeType:a,enableEdit:false,enableDelete:true,filename:p,url:n,documentId:r,attributes:[{title:"Uploaded By",text:t},{title:"Uploaded On",text:u(),active:false}]};g.dataitems.unshift(m);this.mockDataModel.setData(g);this.oFileUpload.getBinding("items").refresh(true);this.oFileUpload.rerender();var f={Guid:r};this.oAttach.push(f)}},onFileUploadFailed:function(e){var t=!!this.getView().$().closest(".sapUiSizeCompact").length;sap.m.MessageBox.error(e.getParameters().exception.message,{styleClass:t?"sapUiSizeCompact":""})},onFileDeleted:function(e){var t=e.getParameter("documentId");var a=this.mockDataModel.getData();for(var r=0;r<a.dataitems.length;r++){if(a.dataitems[r].documentId===t){a.dataitems.splice(r,1);break}}for(var r=0;r<this.oAttach.length;r++){if(this.oAttach[r].Guid===t){this.oAttach.splice(r,1);break}}this.mockDataModel.setData(a);this.oFileUpload.getBinding("items").refresh(true);this.oFileUpload.rerender()},uploadTerminated:function(e){var t=this.oFileUpload.getItems();var a=t.length;if(a===1){this.oFileUpload.removeItem(t[0])}else{this.oFileUpload.removeItem(t[0])}this.oFileUpload.rerender();this.oFileUpload.getBinding("items").refresh(true)},getXsrfToken:function(){var e=this;var t=this.getView().getModel().getHeaders()["x-csrf-token"];if(!t){this.getView().getModel().refreshSecurityToken(function(e,a){t=a.headers["x-csrf-token"]},function(){var t=!!this.getView().$().closest(".sapUiSizeCompact").length;sap.m.MessageBox.error(e.getView().getModel("i18n").getProperty("TOKEN_MSG"),{styleClass:t?"sapUiSizeCompact":""})},false)}return t},setMode:function(e){this.mode=e},getMode:function(){return this.mode},fetchReason:function(){var e=this.getView().getModel("valueHelp");var a="/ReasonforReqSet";var r=[new sap.ui.model.Filter("CreqType","EQ",this.getCrType())];var l=[];var n=this;var s=function(e){if(e.results.length>0){var a={CreqType:"",Description:"",Langu:"",Reason:""};l[0]=a;for(var r=0;r<e.results.length;r++){l.push(e.results[r])}}var s=new t;s.setData(l);n.getView().byId("reasonForRequest").setModel(s);n.getView().byId("reasonForRequest").bindItems("/",new sap.ui.core.Item({key:"{Reason}",text:"{Description}"}))};var o=function(e){};this._readData(a,e,s,o,r,{})},setCrType:function(e){if(e){this.crType=e}var a={crtype:this.crType,desc:this.getView().byId("Description").getValue(),priority:this.getView().byId("idPriority").getSelectedKey(),duedate:this.getView().byId("idDueDate").getDateValue()};var r=new t(a);sap.ui.getCore().setModel(r,"tempCrTypeModel")},getCrType:function(){return this.crType},onMulDltTab:function(e){var t=[];var a=[];var r;if(this.action.indexOf("WC")>0){var l=this.getView().getModel("AIWListWCModel");var n=l.getData();for(var s=0;s<this.selectedRowsWC.length;s++){a.push(parseInt(this.selectedRowsWC[s].split("/")[1]))}a.sort(function(e,t){return e-t});this.checkDependantObject(a,"AIWListWCModel")}else if(this.action.indexOf("GTL")>0){var o=this.getView().getModel("AIWListGTLModel");var i=o.getData();if(this.getView().getModel("GTLHeaderModel").getData().length>0){this.getView().getModel("GTLHeaderModel").setData(t)}for(var s=0;s<this.selectedRowsGTL.length;s++){a.push(parseInt(this.selectedRowsGTL[s].split("/")[1]))}a.sort(function(e,t){return e-t});this.checkDependantObject(a,"AIWListGTLModel")}else if(this.action.indexOf("ETL")>0){var d=this.getView().getModel("AIWListETLModel");var c=d.getData();if(this.getView().getModel("ETLHeaderModel").getData().length>0){this.getView().getModel("ETLHeaderModel").setData(t)}for(var s=0;s<this.selectedRowsETL.length;s++){a.push(parseInt(this.selectedRowsETL[s].split("/")[1]))}a.sort(function(e,t){return e-t});this.checkDependantObject(a,"AIWListETLModel")}else if(this.action.indexOf("FTL")>0){var p=this.getView().getModel("AIWListFTLModel");var u=p.getData();if(this.getView().getModel("FTLHeaderModel").getData().length>0){this.getView().getModel("FTLHeaderModel").setData(t)}for(var s=0;s<this.selectedRowsFTL.length;s++){a.push(parseInt(this.selectedRowsFTL[s].split("/")[1]))}a.sort(function(e,t){return e-t});this.checkDependantObject(a,"AIWListFTLModel")}else if(this.action.indexOf("OL")>0){var g=this.getView().getModel("AIWListOLModel");var m=g.getData();for(var s=0;s<this.selectedRowsOL.length;s++){a.push(parseInt(this.selectedRowsOL[s].split("/")[1]))}a.sort();for(var f=a.length-1;f>=0;f--){r=a[f];m.splice(r,1)}sap.ui.getCore().byId(this.tableId).removeSelections();g.setData(m);this.updateCount("objLink",m);this.selectedRowsOL=[];var h=this.getView().getModel("EnableDELModel");var S=h.getData();S.deleteOL=false;h.setData(S)}},onWCRowSelect:function(e){this.updateDeleteEnable("WC",e)},onOLRowSelect:function(e){this.updateDeleteEnable("OL",e)},updateDeleteEnable:function(e,t){var a=this.getView().getModel("EnableDELModel");var r=a.getData();this.tableId=t.getSource().getId();if(e==="WC"&&this.mode!=="display"){this.selectedRowsWC=t.getSource()._aSelectedPaths;if(this.selectedRowsWC.length>0){r.deleteWC=true}else{r.deleteWC=false}}if(e==="GTL"&&this.mode!=="display"){this.selectedRowsGTL=t.getSource()._aSelectedPaths;if(this.selectedRowsGTL.length>0){r.deleteGTL=true}else{r.deleteGTL=false}}if(e==="ETL"&&this.mode!=="display"){this.selectedRowsETL=t.getSource()._aSelectedPaths;if(this.selectedRowsETL.length>0){r.deleteETL=true}else{r.deleteETL=false}}if(e==="FTL"&&this.mode!=="display"){this.selectedRowsFTL=t.getSource()._aSelectedPaths;if(this.selectedRowsFTL.length>0){r.deleteFTL=true}else{r.deleteFTL=false}}if(e==="OL"&&this.mode!=="display"){this.selectedRowsOL=t.getSource()._aSelectedPaths;if(this.selectedRowsOL.length>0){r.deleteOL=true}else{r.deleteOL=false}}a.setData(r)},readLastApprovalData:function(e){var t=this;var a=this.getView().getModel("ApprModel");var r,n=[];if(e==="WCTab"){var s=sap.ui.getCore().getModel("AIWListWCModel").getData();if(s.length>0){return}n=new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo);r=["WCCapa","WCCost","Workcenter","CrAttachments","Notes"]}else if(e==="GTLTab"){var o=sap.ui.getCore().getModel("AIWListGTLModel").getData();if(o.length>0){return}n=new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo);r=["GTClass","GTHdr","GTComp","GTInsp","GTList","GTMPack","GTOprs","GTPRT","GTRel","GTSpack","GTVal","CrAttachments","Notes"]}else if(e==="EqTLTab"){var i=sap.ui.getCore().getModel("AIWListETLModel").getData();if(i.length>0){return}n=new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo);r=["ETClass","ETComp","ETInsp","ETList","ETMPack","ETOprs","ETPRT","ETRel","ETSpack","ETVal","ETHdr","CrAttachments","Notes"]}else if(e==="FLOCTLTab"){var d=sap.ui.getCore().getModel("AIWListFTLModel").getData();if(d.length>0){return}n=new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo);r=["FTHdr","FTClass","FTComp","FTInsp","FTList","FTMPack","FTOprs","FTPRT","FTRel","FTSpack","FTVal","CrAttachments","Notes"]}else if(e==="OLTab"){var c=sap.ui.getCore().getModel("AIWListOLModel").getData();if(c.length>0){return}n=new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo);r=["OLClass","Olink","OLLAM","OLVal","CrAttachments","Notes"]}function p(e,r){var l="/DeriveOLstatusSet('"+e+"')";a.read(l,{success:function(e){if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){c[r-1].usrSts=e.Usta_oln;c[r-1].stProfLblV=true;c[r-1].stsProf=e.Stsm_oln;c[r-1].stsProfV=true;c[r-1].stsProfDesc=e.Statproftxt;c[r-1].stsProfDescV=true;c[r-1].stsObj=e.Ustw_oln;c[r-1].stsObjLblV=true;c[r-1].stsObjV=true;c[r-1].stsWoLblV=true;c[r-1].stsWoNoV=true;c[r-1].stsWoNo=e.Uswo_oln;c[r-1].sysSts=e.Stattext}else{c[r-1].stProfLblV=false;c[r-1].stsProfV=false;c[r-1].stsProfDescV=false;c[r-1].stsObjLblV=false;c[r-1].stsObjV=false;c[r-1].stsWoLblV=false;c[r-1].stsWoNoV=false;c[r-1].usrSts="";c[r-1].stsProf="";c[r-1].stsProfDesc="";c[r-1].stsObj="";c[r-1].stsWoNo="";c[r-1].sysSts=""}if(r>1){r--;p(c[r-1].linkCat,r)}sap.ui.getCore().getModel("AIWListOLModel").setSizeLimit(c.length);sap.ui.getCore().getModel("AIWListOLModel").setData(c);sap.ui.getCore().getModel("AIWListOLModel").refresh()},error:function(e){var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");t.BusyDialog.close();t.invokeMessage(l)}})}function u(a){var r=a.results[0];if(r){if(e==="WCTab"){if(r.Workcenter){var n=r.Workcenter.results[0];if(n){n.wc=n.Arbpl;n.wcDesc=n.Txtmi;n.plant=n.Werks;n.plantDesc=n.Plantdesc;n.wcCat=n.Verwe;n.wcCatDesc=n.Ktext;n.person=n.Crveran;n.personDesc=n.Persresptxt;n.usg=n.Planv;n.usgDesc=n.UsageTxt;n.stdVal=n.Vgwts;n.stdValDesc=n.Vgwtx;n.ctrlKey=n.Crsteus;n.ctrlKeyDesc=n.Steutxt;n.wcValueState="None";n.wcDescValueState="None";n.plantValueState="None";n.wcCatValueState="None";n.personResValueState="None";n.usgValueState="None";n.stdValueState="None";n.cntrlKeyValueState="None";n.wcValueStateTxt="";n.wcDescValueStateTxt="";n.plantValueStateTxt="";n.wcCatValueStateTxt="";n.personResValueStateTxt="";n.usgValueStateTxt="";n.stdValueStateTxt="";n.cntrlKeyValueStateTxt="";n.enable=false;n.cost=[];n.capacity=[]}var c=r.WCCost.results;if(c){if(c.length>0){var u=new sap.ui.model.json.JSONModel;u.setData(c);n.cost=c}}var g=r.WCCapa.results;if(g){if(g.length>0){var m=new sap.ui.model.json.JSONModel;m.setData(g);n.capacity=g}}s.push(n);sap.ui.getCore().getModel("AIWListWCModel").setData(s)}}else if(e==="GTLTab"){if(r.GTList){var f=r.GTList.results[0];var h={validFrm:l.getDateFormat(f.Gdatuv),grp:f.Tlgnhdr,Plnal:f.Tplnal,Ktext:f.Ktext,wc:f.Tarbpl,plant:f.Wcplant,usg:f.Tverwe,Statu:f.Statu,vEquiLbl:false,vEqui:false,vEquiDesc:false,vFlocLbl:false,vFloc:false,vFlocDesc:false,bAddComponent:true,enable:false,header:[],operation:[],component:[],Class:[],Char:[]};var S=r.GTList.results;if(S.length>0){h.header=S;for(var T=0;T<S.length;T++){h.header[T].pPlantDesc=S[T].Iwerktxt;h.header[T].usageDesc=S[T].TlUsgTxt;h.header[T].plGrpDesc=S[T].Plnnrgrptxt;h.header[T].statusDesc=S[T].Statustxt;h.header[T].sysCondDesc=S[T].Anlzux;h.header[T].stratDesc=S[T].Strattxt;h.header[T].Plnal=S[T].Tplnal;h.header[T].Verwe=S[T].Tverwe;h.header[T].plEnable=false;h.header[T].valueStateT="None";h.header[T].valueStatePP="None";h.header[T].valueStateU="None";h.header[T].valueStateS="None";h.header[T].groupCounter=S[T].Plnal;h.header[T].Ktext=S[T].Ktext;h.header[T].profile=S[T].Profident;h.header[T].Ktext=S[T].Werks2gtl;h.header[T].workCenter=S[T].Tarbpl;h.header[T].keydate=S[T].Keydate;h.header[T].plant=S[T].Gplnt2tR;h.header[T].usage=S[T].Tverwe;h.header[T].plannerGrp=S[T].Vagrp2gtl;h.header[T].Statu=S[T].Statu;h.header[T].systemCond=S[T].Anlzu;h.header[T].groupVal=S[T].Tlgnhdr;h.header[T].groupCounterDesc=S[T].Ktext;h.header[T].workCenterDesc=S[T].Wcdescription;h.header[T].assembly=S[T].Istru;h.header[T].deletion=S[T].Delkz;h.header[T].TlUsgTxt=S[T].TlUsgTxt;h.header[T].Plnnrgrptxt=S[T].Plnnrgrptxt;h.header[T].Statustxt=S[T].Statustxt;h.header[T].Anlzux=S[T].Anlzux;h.header[T].Istrux=S[T].Istrux;h.header[T].insPtDesc=S[T].Slwbeztxt;h.header[T].insPt=S[T].Slwbez;h.header[T].extNum=S[T].Extnumtxt}}var M=r.GTOprs.results;if(M.length>0){h.operation=M;for(var b=0;b<M.length;b++){h.operation[b].calcKeyDesc="";h.operation[b].actTypDesc="";h.operation[b].flag=M[b].Plnal+"-"+M[b].Vornr;h.operation[b].Arbpl=M[b].TlArbpl;h.operation[b].Plnal=M[b].Tplnal;h.operation[b].opState="None";h.operation[b].opDescState="None";h.operation[b].wcState="None";h.operation[b].plantState="None";h.operation[b].ctrlKeyState="None";h.operation[b].operation=M[b].Gvornr2op;h.operation[b].subOp=M[b].Uvorn;h.operation[b].workCenter=M[b].TlArbpl;h.operation[b].plant=M[b].Werks2gop;h.operation[b].controlKey=M[b].Steus2gop;h.operation[b].shortText=M[b].Ltxa1;h.operation[b].work=M[b].Arbei;h.operation[b].unitForWork=M[b].Arbeh;h.operation[b].number=M[b].Anzzl;h.operation[b].calcKey=M[b].Indet;h.operation[b].normDuration=M[b].Dauno;h.operation[b].uomDuration=M[b].Daune;h.operation[b].workPerc=M[b].Prznt.toString();h.operation[b].exeFactor=M[b].Aufkt;h.operation[b].actType=M[b].Larnt2gop;h.operation[b].stdTextKey=M[b].Ktsch;h.operation[b].assembly=M[b].Tistru;h.operation[b].noOfTime=M[b].Loanz;h.operation[b].sutability=M[b].Qualf2gop;h.operation[b].wageGroup=M[b].Logrp2gop;h.operation[b].wageType=M[b].Loart;h.operation[b].sysCondition=M[b].Tanlzu;h.operation[b].orderQty=M[b].Bmvrg;h.operation[b].ordQtyUnit=M[b].Bmeih;h.operation[b].netPrice=M[b].Opreis;h.operation[b].currency=M[b].Owaers;h.operation[b].priceUnit=M[b].Opeinh;h.operation[b].planDelTime=M[b].Plifz;h.operation[b].costElement=M[b].Sakto2gop;h.operation[b].materialGrp=M[b].Omatkl;h.operation[b].puchGroup=M[b].Oekgrp;h.operation[b].vendor=M[b].Lifnr;h.operation[b].purchOrg=M[b].Ekorg;h.operation[b].shortTerm=M[b].Sortl;h.operation[b].purchInfo=M[b].Infnr;h.operation[b].fieldKey=M[b].Slwid;h.operation[b].purchDoc=M[b].Ebeln;h.operation[b].purchDocItem=M[b].Ebelp2gop;h.operation[b].userFld=M[b].Slwid;h.operation[b].capCat=M[b].Qlkapar;h.operation[b].capCatDesc=M[b].Kapartxt;h.operation[b].quantity1_=M[b].Use04;h.operation[b].quantity1=M[b].Usr04;h.operation[b].quantity2=M[b].Usr05;h.operation[b].quantity2_=M[b].Use05;h.operation[b].value3=M[b].Usr06;h.operation[b].value4=M[b].Usr07;h.operation[b].value3_=M[b].Use06;h.operation[b].value4_=M[b].Use07;h.operation[b].text1=M[b].Usr00;h.operation[b].text2=M[b].Usr01;h.operation[b].text3=M[b].Usr03;h.operation[b].text4=M[b].Usr04;h.operation[b].date1=M[b].Usr08;h.operation[b].date2=M[b].Usr09;h.operation[b].indicator1=M[b].Usr10;h.operation[b].indicator2=M[b].Usr11;h.operation[b].Usrtxtname1=M[b].Usrtxtname1;h.operation[b].Usrtxtflg1=M[b].Usrtxtflg1;h.operation[b].Usrtxtname2=M[b].Usrtxtname2;h.operation[b].Usrtxtflg2=M[b].Usrtxtflg2;h.operation[b].Usrtxtname3=M[b].Usrtxtname3;h.operation[b].Usrtxtflg3=M[b].Usrtxtflg3;h.operation[b].Usrtxtname4=M[b].Usrtxtname4;h.operation[b].Usrtxtflg4=M[b].Usrtxtflg4;h.operation[b].Usrqtyname1=M[b].Usrqtyname1;h.operation[b].Usrqtyflg1=M[b].Usrqtyflg1;h.operation[b].Usrqtyname2=M[b].Usrqtyname2;h.operation[b].Usrqtyflg2=M[b].Usrqtyflg2;h.operation[b].Usrvalname1=M[b].Usrvalname1;h.operation[b].Usrvalflg1=M[b].Usrvalflg1;h.operation[b].Usrvalname2=M[b].Usrvalname2;h.operation[b].Usrvalflg2=M[b].Usrvalflg2;h.operation[b].Usrdatename1=M[b].Usrdatename1;h.operation[b].Usrdatflg1=M[b].Usrdatflg1;h.operation[b].Usrdatename2=M[b].Usrdatename2;h.operation[b].Usrdatflg2=M[b].Usrdatflg2;h.operation[b].Usrindname1=M[b].Usrindname1;h.operation[b].Usrindflag1=M[b].Usrindflag1;h.operation[b].Usrindname2=M[b].Usrindname2;h.operation[b].Usrindflag2=M[b].Usrindflag2;h.operation[b].qual=M[b].Qlotype;h.operation[b].search=M[b].Qsearchtm;h.operation[b].groupCounter=M[b].Plnal}}var E=r.GTComp.results;if(E.length>0){h.component=E;for(var v=0;v<E.length;v++){h.component[v].matDesc=E[v].Maktx;h.component[v].slNo=v+1;h.component[v].flag=E[v].Plnal+"-"+E[v].Vornr+"-"+E[v].slNo;h.component[v].hFlag=E[v].Plnal+"-"+E[v].Vornr;h.component[v].group=E[v].Tlgnhdr;h.component[v].groupCounter=E[v].Plnal;h.component[v].activity=E[v].Vorn2gcmp;h.component[v].component=E[v].Idnrk;h.component[v].compDesc=E[v].Maktx;h.component[v].compQty=E[v].Menge;h.component[v].compUnit=E[v].MeinsGcp;h.component[v].backFlush=E[v].RgekzGcp;h.component[v].resv=E[v].Disp;h.component[v].resvDesc=E[v].Disptxt;h.component[v].storageLoc=E[v].Lgortgcmp;h.component[v].costElement=E[v].Saktogcmp;h.component[v].bom=E[v].Stlnrgcmp;h.component[v].bomCat=E[v].Stltygcmp;h.component[v].bomCatDesc=E[v].Stltygcmptxt;h.component[v].itCat=E[v].Postp;h.component[v].assembly=E[v].Istru;h.component[v].sortStr=E[v].Sortf;h.component[v].itemNo=E[v].Posnr;h.component[v].plantMaint=E[v].Sanin;h.component[v].relSales=E[v].Rvrel;h.component[v].relCost=E[v].Sanka;h.component[v].pmAssembly=E[v].Stkkz;h.component[v].spare=E[v].Erskz;h.component[v].matProv=E[v].Beikz;h.component[v].isPlant=E[v].Pswrk;h.component[v].bulkMat=E[v].Schgt;h.component[v].plant=E[v].Werksgcmp;h.component[v].purchGrp=E[v].Ekgrp;h.component[v].price=E[v].Preis;h.component[v].currency=E[v].Waers;h.component[v].prUnit=E[v].Peinh;h.component[v].delTimeD=E[v].Lifzt;h.component[v].matGrp=E[v].Matkl;h.component[v].qtyFix=E[v].Fmeng;h.component[v].altBom=E[v].Stlal}t.cmpData=E}var C=r.GTClass.results;if(C){if(C.length>0){for(var x=0;x<C.length;x++){C[x].ctEnable=false;C[x].classEnable=false;C[x].ClassTypeDesc=C[x].Artxt;delete C[x].Artxt;delete C[x].Changerequestid;delete C[x].Clint;delete C[x].Service;C[x].slNo=x+1;C[x].flag=C[x].Plnal+"-"+C[x].slNo}t.cData=C;h.Class=C}}var V=r.GTVal.results;if(V){if(V.length>0){for(var P=0;P<V.length;P++){V[P].cNameEnable=false;delete V[P].Ataut;delete V[P].Ataw1;delete V[P].Atawe;delete V[P].Atcod;delete V[P].Atflb;delete V[P].Atflv;delete V[P].Atimb;delete V[P].Atsrt;delete V[P].Atvglart;delete V[P].Atzis;delete V[P].Changerequestid;delete V[P].CharName;delete V[P].Charid;delete V[P].Classtype;delete V[P].Service;delete V[P].Valcnt;V[P].slNo=P+1;V[P].flag=V[P].Plnal+"-"+V[P].Class+"-"+V[P].slNo}t.chData=V;h.Char=V}}o.push(h);sap.ui.getCore().getModel("AIWListGTLModel").setData(o)}}else if(e==="EqTLTab"){if(r.ETList.results.length>0){var f=r.ETList.results[0];var I={validFrm:l.getDateFormat(f.Edatuv),grp:f.Tleqhdr,Plnal:f.Tplnal,Ktext:f.Ktext,wc:f.Tarbpl,plant:f.Wcplant,usg:f.Tverwe,Statu:f.Statu,vEquiLbl:true,vEqui:true,vEquiDesc:true,equipment:f.Eq2tl,equipmentDesc:f.Etxt2tlR,vFlocLbl:false,vFloc:false,vFlocDesc:false,bAddComponent:true,enable:false,equiEnb:false,header:[],operation:[],component:[],Class:[],Char:[]};var S=r.ETList.results;if(S.length>0){I.header=S;for(var T=0;T<S.length;T++){I.header[T].pPlantDesc=S[T].Iwerktxt;I.header[T].usageDesc=S[T].TlUsgTxt;I.header[T].plGrpDesc=S[T].Plnnrgrptxt;I.header[T].statusDesc=S[T].Statustxt;I.header[T].sysCondDesc=S[T].Anlzux;I.header[T].stratDesc=S[T].Strattxt;I.header[T].Plnal=S[T].Tplnal;I.header[T].Verwe=S[T].Tverwe;I.header[T].plEnable=false;I.header[T].Ktext=S.Eqktx;I.header[T].valueStateT="None";I.header[T].valueStatePP="None";I.header[T].valueStateU="None";I.header[T].valueStateS="None";I.header[T].groupCounter=S[T].Plnal;I.header[T].profile=S[T].Profident;I.header[T].Ktext=S[T].Eqktx;I.header[T].keydate=S[T].Keydate;I.header[T].Ktext=S[T].Werks2etl;I.header[T].workCenter=S[T].Tarbpl;I.header[T].plant=S[T].Eplnt2tR;I.header[T].usage=S[T].Tverwe;I.header[T].plannerGrp=S[T].Vagrp2etl;I.header[T].Statu=S[T].Statu;I.header[T].systemCond=S[T].Anlzu;I.header[T].groupVal=S[T].Tleqhdr;I.header[T].groupCounterDesc=S[T].Eqktx;I.header[T].workCenterDesc=S[T].Wcdescription;I.header[T].assembly=S[T].Istru;I.header[T].equipment=S[T].Eq2tl;I.header[T].equipmentDesc=S[T].Eqktx;I.header[T].deletion=S[T].Delkz;I.header[T].TlUsgTxt=S[T].TlUsgTxt;I.header[T].Plnnrgrptxt=S[T].Plnnrgrptxt;I.header[T].Statustxt=S[T].Statustxt;I.header[T].Anlzux=S[T].Anlzux;I.header[T].Istrux=S[T].Istrux}}var M=r.ETOprs.results;if(M.length>0){I.operation=M;for(var b=0;b<M.length;b++){I.operation[b].calcKeyDesc="";I.operation[b].actTypDesc="";I.operation[b].flag=M[b].Plnal+"-"+M[b].Vornr;I.operation[b].Arbpl=M[b].TlArbpl;I.operation[b].Plnal=M[b].Tplnal;I.operation[b].opState="None";I.operation[b].opDescState="None";I.operation[b].wcState="None";I.operation[b].plantState="None";I.operation[b].ctrlKeyState="None";I.operation[b].operation=M[b].Evornr2op;I.operation[b].groupCounter=M[b].Plnal;I.operation[b].subOp=M[b].Uvorn;I.operation[b].workCenter=M[b].TlArbpl;I.operation[b].plant=M[b].Werks2eop;I.operation[b].controlKey=M[b].Steus2eop;I.operation[b].shortText=M[b].Ltxa1;I.operation[b].work=M[b].Arbei;I.operation[b].unitForWork=M[b].Arbeh;I.operation[b].number=M[b].Anzzl;I.operation[b].calcKey=M[b].Indet;I.operation[b].normDuration=M[b].Dauno;I.operation[b].uomDuration=M[b].Daune;I.operation[b].workPerc=M[b].Prznt.toString();I.operation[b].exeFactor=M[b].Aufkt;I.operation[b].actType=M[b].Larnt2eop;I.operation[b].stdTextKey=M[b].Ktsch;I.operation[b].assembly=M[b].Tistru;I.operation[b].noOfTime=M[b].Loanz;I.operation[b].sutability=M[b].Qualf2eop;I.operation[b].wageGroup=M[b].Logrp2eop;I.operation[b].wageType=M[b].Loart;I.operation[b].sysCondition=M[b].Tanlzu;I.operation[b].orderQty=M[b].Bmvrg;I.operation[b].ordQtyUnit=M[b].Bmeih;I.operation[b].netPrice=M[b].Opreis;I.operation[b].currency=M[b].Owaers;I.operation[b].priceUnit=M[b].Opeinh;I.operation[b].planDelTime=M[b].Plifz;I.operation[b].costElement=M[b].Sakto2eop;I.operation[b].materialGrp=M[b].Omatkl;I.operation[b].puchGroup=M[b].Oekgrp;I.operation[b].vendor=M[b].Lifnr;I.operation[b].purchOrg=M[b].Ekorg;I.operation[b].shortTerm=M[b].Sortl;I.operation[b].purchInfo=M[b].Infnr;I.operation[b].fieldKey=M[b].Slwid;I.operation[b].purchDoc=M[b].Ebeln;I.operation[b].purchDocItem=M[b].Ebelp2eop;I.operation[b].userFld=M[b].Slwid;I.operation[b].capCat=M[b].Qlkapar;I.operation[b].capCatDesc=M[b].Kapartxt;I.operation[b].quantity1_=M[b].Use04;I.operation[b].quantity1=M[b].Usr04;I.operation[b].quantity2=M[b].Usr05;I.operation[b].quantity2_=M[b].Use05;I.operation[b].value3=M[b].Usr06;I.operation[b].value4=M[b].Usr07;I.operation[b].value3_=M[b].Use06;I.operation[b].value4_=M[b].Use07;I.operation[b].text1=M[b].Usr00;I.operation[b].text2=M[b].Usr01;I.operation[b].text3=M[b].Usr03;I.operation[b].text4=M[b].Usr04;I.operation[b].date1=M[b].Usr08;I.operation[b].date2=M[b].Usr09;I.operation[b].indicator1=M[b].Usr10;I.operation[b].indicator2=M[b].Usr11;I.operation[b].Usrtxtname1=M[b].Usrtxtname1;I.operation[b].Usrtxtflg1=M[b].Usrtxtflg1;I.operation[b].Usrtxtname2=M[b].Usrtxtname2;I.operation[b].Usrtxtflg2=M[b].Usrtxtflg2;I.operation[b].Usrtxtname3=M[b].Usrtxtname3;I.operation[b].Usrtxtflg3=M[b].Usrtxtflg3;I.operation[b].Usrtxtname4=M[b].Usrtxtname4;I.operation[b].Usrtxtflg4=M[b].Usrtxtflg4;I.operation[b].Usrqtyname1=M[b].Usrqtyname1;I.operation[b].Usrqtyflg1=M[b].Usrqtyflg1;I.operation[b].Usrqtyname2=M[b].Usrqtyname2;I.operation[b].Usrqtyflg2=M[b].Usrqtyflg2;I.operation[b].Usrvalname1=M[b].Usrvalname1;I.operation[b].Usrvalflg1=M[b].Usrvalflg1;I.operation[b].Usrvalname2=M[b].Usrvalname2;I.operation[b].Usrvalflg2=M[b].Usrvalflg2;I.operation[b].Usrdatename1=M[b].Usrdatename1;I.operation[b].Usrdatflg1=M[b].Usrdatflg1;I.operation[b].Usrdatename2=M[b].Usrdatename2;I.operation[b].Usrdatflg2=M[b].Usrdatflg2;I.operation[b].Usrindname1=M[b].Usrindname1;I.operation[b].Usrindflag1=M[b].Usrindflag1;I.operation[b].Usrindname2=M[b].Usrindname2;I.operation[b].Usrindflag2=M[b].Usrindflag2;I.operation[b].qual=M[b].Qlotype;I.operation[b].search=M[b].Qsearchtm}t.oData=I.operation}}E=r.ETComp.results;if(E.length>0){I.component=E;for(var L=0;L<E.length;L++){I.component[L].matDesc=E[L].Maktx;I.component[L].slNo=L+1;I.component[L].flag=E[L].Plnal+"-"+E[L].Vornr+"-"+E[L].slNo;I.component[L].hFlag=E[L].Plnal+"-"+E[L].Vornr;I.component[L].group=E[L].Tleqhdr;I.component[L].groupCounter=E[L].Plnal;I.component[L].activity=E[L].Vorn2ecmp;I.component[L].component=E[L].Idnrk;I.component[L].compDesc=E[L].Maktx;I.component[L].compQty=E[L].Menge;I.component[L].compUnit=E[L].MeinsEcp;I.component[L].backFlush=E[L].RgekzEcp;I.component[L].resv=E[L].Disp;I.component[L].resvDesc=E[L].Disptxt;I.component[L].storageLoc=E[L].Lgortecmp;I.component[L].costElement=E[L].Saktoecmp;I.component[L].bom=E[L].Stlnrecmp;I.component[L].bomCat=E[L].Stltyecmp;I.component[L].bomCatDesc=E[L].Stltyecmptxt;I.component[L].itCat=E[L].Postp;I.component[L].assembly=E[L].Istru;I.component[L].sortStr=E[L].Sortf;I.component[L].itemNo=E[L].Posnr;I.component[L].plantMaint=E[L].Sanin;I.component[L].relSales=E[L].Rvrel;I.component[L].relCost=E[L].Sanka;I.component[L].pmAssembly=E[L].Stkkz;I.component[L].spare=E[L].Erskz;I.component[L].matProv=E[L].Beikz;I.component[L].isPlant=E[L].Pswrk;I.component[L].bulkMat=E[L].Schgt;I.component[L].plant=E[L].Werksecmp;I.component[L].purchGrp=E[L].Ekgrp;I.component[L].price=E[L].Preis;I.component[L].currency=E[L].Waers;I.component[L].prUnit=E[L].Peinh;I.component[L].delTimeD=E[L].Lifzt;I.component[L].matGrp=E[L].Matkl;I.component[L].qtyFix=E[L].Fmeng;I.component[L].altBom=E[L].Stlal}t.cmpData=E}var C=r.ETClass.results;if(C){if(C.length>0){for(var x=0;x<C.length;x++){C[x].ctEnable=false;C[x].classEnable=false;C[x].ClassTypeDesc=C[x].Artxt;delete C[x].Artxt;delete C[x].Changerequestid;delete C[x].Clint;delete C[x].Service;C[x].slNo=x+1;C[x].flag=C[x].Plnal+"-"+C[x].slNo}t.cData=C;I.Class=C}}var V=r.ETVal.results;if(V){if(V.length>0){for(var P=0;P<V.length;P++){V[P].cNameEnable=false;delete V[P].Ataut;delete V[P].Ataw1;delete V[P].Atawe;delete V[P].Atcod;delete V[P].Atflb;delete V[P].Atflv;delete V[P].Atimb;delete V[P].Atsrt;delete V[P].Atvglart;delete V[P].Atzis;delete V[P].Changerequestid;delete V[P].CharName;delete V[P].Charid;delete V[P].Classtype;delete V[P].Service;delete V[P].Valcnt;V[P].slNo=P+1;V[P].flag=V[P].Plnal+"-"+V[P].Class+"-"+V[P].slNo}t.chData=V;I.Char=V}}i.push(I);sap.ui.getCore().getModel("AIWListETLModel").setData(i)}else if(e==="FLOCTLTab"){if(r.FTList.results.length>0){var f=r.FTList.results[0];var y={validFrm:l.getDateFormat(f.Fdatuv),grp:f.Tlflhdr,Plnal:f.Tplnal,Ktext:f.Ktext,wc:f.Tarbpl,plant:f.Wcplant,usg:f.Tverwe,Statu:f.Statu,vEquiLbl:false,vEqui:false,vEquiDesc:false,floc:f.Fl2tl,flocDesc:f.Ftxt2tlR,vFlocLbl:true,vFloc:true,vFlocDesc:true,bAddComponent:true,enable:false,header:[],operation:[],component:[],Class:[],Char:[]};var S=r.FTList.results;if(S.length>0){y.header=S;for(var T=0;T<S.length;T++){y.header[T].pPlantDesc=S[T].Iwerktxt;y.header[T].usageDesc=S[T].TlUsgTxt;y.header[T].plGrpDesc=S[T].Plnnrgrptxt;y.header[T].statusDesc=S[T].Statustxt;y.header[T].sysCondDesc=S[T].Anlzux;y.header[T].stratDesc=S[T].Strattxt;y.header[T].Plnal=S[T].Tplnal;y.header[T].Verwe=S[T].Tverwe;y.header[T].plEnable=false;y.header[T].Ktext=S.Pltxt;y.header[T].valueStateT="None";y.header[T].valueStatePP="None";y.header[T].valueStateU="None";y.header[T].valueStateS="None";y.header[T].groupCounter=S[T].Plnal;y.header[T].Ktext=S[T].Pltxt;y.header[T].profile=S[T].Profident;y.header[T].keydate=S[T].Keydate;y.header[T].Ktext=S[T].Werks2ftl;y.header[T].workCenter=S[T].Tarbpl;y.header[T].plant=S[T].Fplnt2tR;y.header[T].usage=S[T].Tverwe;y.header[T].plannerGrp=S[T].Vagrp2ftl;y.header[T].Statu=S[T].Statu;y.header[T].systemCond=S[T].Anlzu;y.header[T].groupVal=S[T].Tlflhdr;y.header[T].groupCounterDesc=S[T].Pltxt;y.header[T].workCenterDesc=S[T].Wcdescription;y.header[T].assembly=S[T].Istru;y.header[T].floc=S[T].Fl2tl;y.header[T].flocDesc=S[T].Pltxt;y.header[T].deletion=S[T].Delkz;y.header[T].TlUsgTxt=S[T].TlUsgTxt;y.header[T].Plnnrgrptxt=S[T].Plnnrgrptxt;y.header[T].Statustxt=S[T].Statustxt;y.header[T].Anlzux=S[T].Anlzux;y.header[T].Istrux=S[T].Istrux}var D=new sap.ui.model.json.JSONModel;D.setData(y.header)}var M=r.FTOprs.results;if(M.length>0){y.operation=M;for(var b=0;b<M.length;b++){y.operation[b].calcKeyDesc="";y.operation[b].actTypDesc="";y.operation[b].flag=M[b].Plnal+"-"+M[b].Vornr;y.operation[b].Arbpl=M[b].TlArbpl;y.operation[b].Plnal=M[b].Tplnal;y.operation[b].opState="None";y.operation[b].opDescState="None";y.operation[b].wcState="None";y.operation[b].plantState="None";y.operation[b].ctrlKeyState="None";y.operation[b].groupCounter=M[b].Plnal;y.operation[b].operation=M[b].Fvornr2op;y.operation[b].subOp=M[b].Uvorn;y.operation[b].workCenter=M[b].TlArbpl;y.operation[b].plant=M[b].Werks2fop;y.operation[b].controlKey=M[b].Steus2fop;y.operation[b].shortText=M[b].Ltxa1;y.operation[b].work=M[b].Arbei;y.operation[b].unitForWork=M[b].Arbeh;y.operation[b].number=M[b].Anzzl;y.operation[b].calcKey=M[b].Indet;y.operation[b].normDuration=M[b].Dauno;y.operation[b].uomDuration=M[b].Daune;y.operation[b].workPerc=M[b].Prznt.toString();y.operation[b].exeFactor=M[b].Aufkt;y.operation[b].actType=M[b].Larnt2fop;y.operation[b].stdTextKey=M[b].Ktsch;y.operation[b].assembly=M[b].Tistru;y.operation[b].noOfTime=M[b].Loanz;y.operation[b].sutability=M[b].Qualf2fop;y.operation[b].wageGroup=M[b].Logrp2fop;y.operation[b].wageType=M[b].Loart;y.operation[b].sysCondition=M[b].Tanlzu;y.operation[b].orderQty=M[b].Bmvrg;y.operation[b].ordQtyUnit=M[b].Bmeih;y.operation[b].netPrice=M[b].Opreis;y.operation[b].currency=M[b].Owaers;y.operation[b].priceUnit=M[b].Opeinh;y.operation[b].planDelTime=M[b].Plifz;y.operation[b].costElement=M[b].Sakto2fop;y.operation[b].materialGrp=M[b].Omatkl;y.operation[b].puchGroup=M[b].Oekgrp;y.operation[b].vendor=M[b].Lifnr;y.operation[b].purchOrg=M[b].Ekorg;y.operation[b].shortTerm=M[b].Sortl;y.operation[b].purchInfo=M[b].Infnr;y.operation[b].fieldKey=M[b].Slwid;y.operation[b].purchDoc=M[b].Ebeln;y.operation[b].purchDocItem=M[b].Ebelp2fop;y.operation[b].userFld=M[b].Slwid;y.operation[b].capCat=M[b].Qlkapar;y.operation[b].capCatDesc=M[b].Kapartxt;y.operation[b].quantity1_=M[b].Use04;y.operation[b].quantity1=M[b].Usr04;y.operation[b].quantity2=M[b].Usr05;y.operation[b].quantity2_=M[b].Use05;y.operation[b].value3=M[b].Usr06;y.operation[b].value4=M[b].Usr07;y.operation[b].value3_=M[b].Use06;y.operation[b].value4_=M[b].Use07;y.operation[b].text1=M[b].Usr00;y.operation[b].text2=M[b].Usr01;y.operation[b].text3=M[b].Usr03;y.operation[b].text4=M[b].Usr04;y.operation[b].date1=M[b].Usr08;y.operation[b].date2=M[b].Usr09;y.operation[b].indicator1=M[b].Usr10;y.operation[b].indicator2=M[b].Usr11;y.operation[b].Usrtxtname1=M[b].Usrtxtname1;y.operation[b].Usrtxtflg1=M[b].Usrtxtflg1;y.operation[b].Usrtxtname2=M[b].Usrtxtname2;y.operation[b].Usrtxtflg2=M[b].Usrtxtflg2;y.operation[b].Usrtxtname3=M[b].Usrtxtname3;y.operation[b].Usrtxtflg3=M[b].Usrtxtflg3;y.operation[b].Usrtxtname4=M[b].Usrtxtname4;y.operation[b].Usrtxtflg4=M[b].Usrtxtflg4;y.operation[b].Usrqtyname1=M[b].Usrqtyname1;y.operation[b].Usrqtyflg1=M[b].Usrqtyflg1;y.operation[b].Usrqtyname2=M[b].Usrqtyname2;y.operation[b].Usrqtyflg2=M[b].Usrqtyflg2;y.operation[b].Usrvalname1=M[b].Usrvalname1;y.operation[b].Usrvalflg1=M[b].Usrvalflg1;y.operation[b].Usrvalname2=M[b].Usrvalname2;y.operation[b].Usrvalflg2=M[b].Usrvalflg2;y.operation[b].Usrdatename1=M[b].Usrdatename1;y.operation[b].Usrdatflg1=M[b].Usrdatflg1;y.operation[b].Usrdatename2=M[b].Usrdatename2;y.operation[b].Usrdatflg2=M[b].Usrdatflg2;y.operation[b].Usrindname1=M[b].Usrindname1;y.operation[b].Usrindflag1=M[b].Usrindflag1;y.operation[b].Usrindname2=M[b].Usrindname2;y.operation[b].Usrindflag2=M[b].Usrindflag2;y.operation[b].qual=M[b].Qlotype;y.operation[b].search=M[b].Qsearchtm}t.oData=y.operation;var k=new sap.ui.model.json.JSONModel;k.setData(y.operation)}E=r.FTComp.results;if(E.length>0){y.component=E;for(var F=0;F<E.length;F++){y.component[F].matDesc=E[F].Maktx;y.component[F].slNo=L+1;y.component[F].flag=E[F].Plnal+"-"+E[F].Vornr+"-"+E[F].slNo;y.component[F].hFlag=E[F].Plnal+"-"+E[F].Vornr;y.component[F].group=E[F].Tlflhdr;y.component[F].groupCounter=E[F].Plnal;y.component[F].activity=E[F].Vorn2fcmp;y.component[F].component=E[F].Idnrk;y.component[F].compDesc=E[F].Maktx;y.component[F].compQty=E[F].Menge;y.component[F].compUnit=E[F].MeinsFcp;y.component[F].backFlush=E[F].RgekzFcp;y.component[F].resv=E[F].Disp;y.component[F].resvDesc=E[F].Disptxt;y.component[F].storageLoc=E[F].Lgortfcmp;y.component[F].costElement=E[F].Saktofcmp;y.component[F].bom=E[F].Stlnrfcmp;y.component[F].bomCat=E[F].Stltyfcmp;y.component[F].bomCatDesc=E[F].Stltyfcmptxt;y.component[F].itCat=E[F].Postp;y.component[F].assembly=E[F].Istru;y.component[F].sortStr=E[F].Sortf;y.component[F].itemNo=E[F].Posnr;y.component[F].plantMaint=E[F].Sanin;y.component[F].relSales=E[F].Rvrel;y.component[F].relCost=E[F].Sanka;y.component[F].pmAssembly=E[F].Stkkz;y.component[F].spare=E[F].Erskz;y.component[F].matProv=E[F].Beikz;y.component[F].isPlant=E[F].Pswrk;y.component[F].bulkMat=E[F].Schgt;y.component[F].plant=E[F].Werksfcmp;y.component[F].purchGrp=E[F].Ekgrp;y.component[F].price=E[F].Preis;y.component[F].currency=E[F].Waers;y.component[F].prUnit=E[F].Peinh;y.component[F].delTimeD=E[F].Lifzt;y.component[F].matGrp=E[F].Matkl;y.component[F].qtyFix=E[F].Fmeng;y.component[F].altBom=E[F].Stlal}t.cmpData=E}var C=r.FTClass.results;if(C){if(C.length>0){for(var x=0;x<C.length;x++){C[x].ctEnable=false;C[x].classEnable=false;C[x].ClassTypeDesc=C[x].Artxt;delete C[x].Artxt;delete C[x].Changerequestid;delete C[x].Clint;delete C[x].Service;C[x].slNo=x+1;C[x].flag=C[x].Plnal+"-"+C[x].slNo}t.cData=C;y.Class=C}}var V=r.FTVal.results;if(V){if(V.length>0){for(var P=0;P<V.length;P++){V[P].cNameEnable=false;delete V[P].Ataut;delete V[P].Ataw1;delete V[P].Atawe;delete V[P].Atcod;delete V[P].Atflb;delete V[P].Atflv;delete V[P].Atimb;delete V[P].Atsrt;delete V[P].Atvglart;delete V[P].Atzis;delete V[P].Changerequestid;delete V[P].CharName;delete V[P].Charid;delete V[P].Classtype;delete V[P].Service;delete V[P].Valcnt;V[P].slNo=P+1;V[P].flag=V[P].Plnal+"-"+V[P].Class+"-"+V[P].slNo}t.chData=V;y.Char=V}}d.push(y);sap.ui.getCore().getModel("AIWListFTLModel").setData(d)}}else if(e==="OLTab"){if(r.Olink){var A=r.Olink.results[0];t.olData=A;if(A!==null){t.linkCat=A.Netyp;t.objCat=A.Kantyp;t.olData.link=A.Objlink;t.olData.linkCat=A.Netyp;t.olData.linkCatDesc=A.Netyptxt;t.olData.objCat=A.Kantyp;t.olData.objCatDesc=A.Kantyptxt;t.olData.linkDesc=A.Kanxt;t.olData.netId=A.Netid;t.olData.netIdDesc=A.Netidtxt;t.olData.linkNum=A.Lfdknr;t.olData.autGrp=A.Begru;t.olData.autGrpDesc=A.Begtx;t.olData.validFrm=l.getDateFormat(A.Datva);t.olData.timeFrm=l.getTime(A.Zeitva);t.olData.validTo=l.getDateFormat(A.Datvb);t.olData.timeTo=l.getTime(A.Zeitvb);t.olData.medium=A.Mediu;t.olData.mediumDesc=A.Medkxt;t.olData.linkFrmFlEn=false;t.olData.linkToFlEn=false;t.olData.linkObjFlEn=false;t.olData.linkFromEQEn=false;t.olData.linkToEQEn=false;t.olData.linkObjEqEn=false;t.olData.linkCatEn=false;t.olData.linkCatVS="None";t.olData.objCatEn=false;t.olData.objCatVS="None";t.olData.linkFEqLblRQ=true;t.olData.linkToEqLblRQ=true;t.olData.linkFrmEq="";t.olData.linkFrmEqDesc="";t.olData.linkToEq="";t.olData.linkToEqDesc="";t.olData.linkObjEq="";t.olData.linkObjEqDesc="";t.olData.linkFrmflLblV=false;t.olData.linkFrmFlV=false;t.olData.linkFrmFlDescV=false;t.olData.linkToFlLblV=false;t.olData.linkToFlV=false;t.olData.linkToFlDescV=false;t.olData.linkObjFlLblV=false;t.olData.linkObjFlV=false;t.olData.linkObjFlDescV=false;t.olData.linkFrmEqLblV=true;t.olData.linkFrmEqV=true;t.olData.linkFrmEqDescV=true;t.olData.linkToEqLblV=true;t.olData.linkToEQV=true;t.olData.linkToEqDescV=true;t.olData.linkObjEqLblV=true;t.olData.linkObjEqV=true;t.olData.linkObjEqDescV=true;t.olData.enable=false;t.olData.LAM=[];t.olData.Class=[];t.olData.Char=[];if(t.objCat==="E"){t.olData.linkCatEn=false;t.olData.linkFrmFlEn=false;t.olData.linkToFlEn=false;t.olData.linkObjFlEn=false;t.olData.linkFEqLblRQ=true;t.olData.linkToEqLblRQ=true;t.olData.linkFrmflLblV=false;t.olData.linkFrmFlV=false;t.olData.linkFrmFlDescV=false;t.olData.linkToFlLblV=false;t.olData.linkToFlV=false;t.olData.linkToFlDescV=false;t.olData.linkObjFlLblV=false;t.olData.linkObjFlV=false;t.olData.linkObjFlDescV=false;t.olData.linkCatVS="None";t.olData.objCatEn=false;t.olData.objCatVS="None";t.olData.linkFEqLblRQ=true;t.olData.linkToEqLblRQ=true;t.olData.linkFrmEq=A.Eqvon;t.olData.linkFrmEqDesc=A.Eqtxtf;t.olData.linkToEq=A.Eqnach;t.olData.linkToEqDesc=A.Eqtxtt;t.olData.linkObjEq=A.Eqkant;t.olData.linkObjEqDesc=A.Eqtxtl;t.olData.linkFrmflLblV=false;t.olData.linkFrmFlV=false;t.olData.linkFrmFlDescV=false;t.olData.linkToFlLblV=false;t.olData.linkToFlV=false;t.olData.linkToFlDescV=false;t.olData.linkObjFlLblV=false;t.olData.linkObjFlV=false;t.olData.linkObjFlDescV=false;t.olData.linkFrmEqLblV=true;t.olData.linkFrmEqV=true;t.olData.linkFrmEqDescV=true;t.olData.linkToEqLblV=true;t.olData.linkToEQV=true;t.olData.linkToEqDescV=true;t.olData.linkObjEqLblV=true;t.olData.linkObjEqV=true;t.olData.linkObjEqDescV=true;p(t.linkCat)}else if(t.objCat==="T"){t.olData.linkCatEn=false;t.olData.linkFromEQEn=false;t.olData.linkToEQEn=false;t.olData.linkObjEqEn=false;t.olData.linkFrmflLblRQ=true;t.olData.linkToFlLblRQ=true;t.olData.linkFrmEqLblV=false;t.olData.linkFrmEqV=false;t.olData.linkFrmEqDescV=false;t.olData.linkToEqLblV=false;t.olData.linkToEQV=false;t.olData.linkToEqDescV=false;t.olData.linkObjEqLblV=false;t.olData.linkObjEqV=false;t.olData.linkObjEqDescV=false;t.olData.linkCatVS="None";t.olData.objCatEn=false;t.olData.objCatVS="None";t.olData.linkFrmflLblRQ=true;t.olData.linkToFlLblRQ=true;t.olData.linkFrmFl=A.Tpvon;t.olData.linkFrmFlDesc=A.Fltxtf;t.olData.linkToFl=A.Tpnach;t.olData.linkToFlDesc=A.Fltxtt;t.olData.linkObjFl=A.Tpkant;t.olData.linkObjFlDesc=A.Fltxtl;t.olData.linkFrmflLblV=true;t.olData.linkFrmFlV=true;t.olData.linkFrmFlDescV=true;t.olData.linkToFlLblV=true;t.olData.linkToFlV=true;t.olData.linkToFlDescV=true;t.olData.linkObjFlLblV=true;t.olData.linkObjFlV=true;t.olData.linkObjFlDescV=true;t.olData.linkFrmEqLblV=false;t.olData.linkFrmEqV=false;t.olData.linkFrmEqDescV=false;t.olData.linkToEqLblV=false;t.olData.linkToEQV=false;t.olData.linkToEqDescV=false;t.olData.linkObjEqLblV=false;t.olData.linkObjEqV=false;t.olData.linkObjEqDescV=false;p(t.linkCat)}if(A.Bezarp==="2"){t.olData.twoWayRel=true;t.olData.oneWayRel=false}else if(A.Bezarp==="1"){t.olData.oneWayRel=true;t.olData.twoWayRel=false}if(A.Bezarl==="2"){t.olData.twoWayUsd=true;t.olData.oneWayUsd=false;t.olData.relNotUsd=false}else if(A.Bezarl==="1"){t.olData.oneWayUsd=true;t.olData.relNotUsd=false;t.olData.twoWayUsd=false}else if(A.Bezarl==="0"){t.olData.relNotUsd=true;t.olData.oneWayUsd=false;t.olData.twoWayUsd=false}var w=r.OLLAM.results;var q=new sap.ui.model.json.JSONModel;q.setData(w);t.olData.LAM=w;var C=r.OLClass.results;if(C){if(C.length>0){for(var T=0;T<C.length;T++){C[T].ctEnable=false;C[T].classEnable=false;C[T].ClassTypeDesc=C[T].Artxt;delete C[T].Artxt;delete C[T].Changerequestid;delete C[T].Clint;delete C[T].Service}t.olData.Class=C}}var V=r.OLVal.results;if(V){if(V.length>0){for(var P=0;P<V.length;P++){V[P].cNameEnable=false;delete V[P].Ataut;delete V[P].Ataw1;delete V[P].Atawe;delete V[P].Atcod;delete V[P].Atflb;delete V[P].Atflv;delete V[P].Atimb;delete V[P].Atsrt;delete V[P].Atvglart;delete V[P].Atzis;delete V[P].Changerequestid;delete V[P].CharName;delete V[P].Charid;delete V[P].Classtype;delete V[P].Service;delete V[P].Valcnt;V[P].slNo=P+1;V[P].flag=V[P].Class+"-"+V[P].slNo}t.olData.Char=V}}}}}}t.BusyDialog.close()}function g(e){var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");t.BusyDialog.close();t.invokeMessage(l)}this.BusyDialog.open();a.read("/ChangeRequestSet",{filters:n,urlParameters:{$expand:r},success:u,error:g})},onMainIconTabBarSelect:function(e){var t=e.getParameter("item").getKey();var a=e.getParameter("item").getAggregation("content");var r="";if(this.mode==="display"){switch(t){case"WCTab":this.readApprovalData("WCTab");break;case"TLTab":var l=this.getView().createId("tlMain");var n=sap.ui.core.Fragment.byId(l,"_iconTabBarTL").getSelectedKey();if(n&&!r){r=a[0].getSelectedKey()}if(r==="GTLTab"){this.readApprovalData("GTLTab");this.action="ApproveGTL"}else if(r==="EqTLTab"){this.readApprovalData("EqTLTab");this.action="ApproveETL"}else if(r==="FLOCTLTab"){this.readApprovalData("FLOCTLTab");this.action="ApproveFTL"}break;case"OLTab":this.readApprovalData("OLTab");break}}else{switch(t){case"WCTab":this.action="createWC";break;case"TLTab":r=a[0].getSelectedKey();if(r==="GTLTab"){this.action="createGTL"}else if(r==="EqTLTab"){this.action="createETL"}else if(r==="FLOCTLTab"){this.action="createFTL"}break;case"OLTab":this.action="createOL";this.readObjCat();this.readLinkCat();break}}},onTLIconTabBarSelect:function(e){var t=e.getParameter("item").getKey();if(this.mode==="display"){switch(t){case"GTLTab":this.action="ApproveGTL";break;case"EqTLTab":this.action="ApproveETL";break;case"FLOCTLTab":this.action="ApproveFTL";break}}else{switch(t){case"GTLTab":this.action="createGTL";break;case"EqTLTab":this.action="createETL";break;case"FLOCTLTab":this.action="createFTL";break}}},handleDelete:function(e){var t,a;if(this.action==="createWC"){t=e.getSource().getBindingContext("AIWListWCModel").getPath();this.getView().getModel("AIWListWCModel").getData().splice(parseInt(t.substring(1)),1);a=e.getSource().getModel("AIWListWCModel");this.updateCount("workCenter",a.getData())}else if(this.action==="createGTL"){t=e.getSource().getBindingContext("AIWListGTLModel").getPath();this.getView().getModel("AIWListGTLModel").getData().splice(parseInt(t.substring(1)),1);a=e.getSource().getModel("AIWListGTLModel");this.updateCount("generalTL",a.getData())}else if(this.action==="createETL"){t=e.getSource().getBindingContext("AIWListETLModel").getPath();this.getView().getModel("AIWListETLModel").getData().splice(parseInt(t.substring(1)),1);a=e.getSource().getModel("AIWListETLModel");this.updateCount("equiTL",a.getData())}else if(this.action==="createFTL"){t=e.getSource().getBindingContext("AIWListFTLModel").getPath();this.getView().getModel("AIWListFTLModel").getData().splice(parseInt(t.substring(1)),1);a=e.getSource().getModel("AIWListFTLModel");this.updateCount("flocTL",a.getData())}else if(this.action==="createOL"){t=e.getSource().getBindingContext("AIWListOLModel").getPath();this.getView().getModel("AIWListOLModel").getData().splice(parseInt(t.substring(1)),1);a=e.getSource().getModel("AIWListOLModel");this.updateCount("objLink",a.getData())}var r=a.getProperty("/");a.setProperty("/",r)},onCopyWCPress:function(e){var t=this;var a=true;if(this.action==="copyWC"){var r=this._copyWCFragment.getModel("copyWCModel");var l=r.getData();if(l.copyWCSource===""){a=false;l.sWCValueState="Error"}if(l.copyWCTarget===""){a=false;l.tWCValueState="Error"}if(l.copyPlantSource===""){a=false;l.sPlantValueState="Error"}if(l.copyPlantTarget===""){a=false;l.tPlantValueState="Error"}if(!a){r.setData(l);return}var n=false;var s;var o=sap.ui.getCore().getModel("AIWListWCModel");var i=o.getData();if(i.length>0){for(var d=0;d<i.length;d++){if(i[d].wc===l.copyWCTarget&&i[d].plant===l.copyPlantTarget){var c="Work Center "+l.copyWCTarget+"/"+l.copyPlantTarget+" already locked in this CR";sap.m.MessageToast.show(c,{duration:5e3,animationDuration:5e3});n=true;break}if(i[d].wc===l.copyWCSource&&i[d].plant===l.copyPlantSource){i[d].wcEnable=false;i[d].plEnable=false;i[d].wcatEnable=false;i[d].Type="X";s=i[d]}}}if(!n){if(!s){this.readWCDetails(l.copyWCSource,l.copyPlantSource,l)}else{i.push(s);var p=$.map(i,function(e){return $.extend(true,{},e)});p[p.length-1].wc=l.copyWCTarget;p[p.length-1].plant=l.copyPlantTarget;o.setData(p);t.updateCount("workCenter",i);sap.ui.getCore().getModel("AIWListWCModel").refresh();t.onCopyWCClose()}}}},onCopyWCClose:function(){this.action="createWC";this._copyWCFragment.close()},readWCDetails:function(e,t,a){var r=this;var l=this.getView().getModel();var n=sap.ui.getCore().getModel("AIWListWCModel").getData();var s=new sap.ui.model.Filter("Arbpl","EQ",e);var o=new sap.ui.model.Filter("Werks","EQ",t);this.BusyDialog.open();l.read("/ChangeRequestSet",{filters:[s,o],urlParameters:{$expand:"Workcenter,WCCapa,WCCost,ValueWC,ClassWC"},success:function(e){r.BusyDialog.close();if(e.results.length>0){var t=e.results[0].Message;r.lockMsg="";if(t!==""){r.lockMsg=true;sap.m.MessageToast.show(t,{duration:15e3,animationDuration:15e3})}var l=e.results[0].Workcenter.results[0];if(l){var s={mode:"create",wc:a.copyWCTarget,wcDesc:l.Txtmi,plant:a.copyPlantTarget,plantDesc:l.Plantdesc,wcCat:l.Verwe,wcCatDesc:l.Ktext,person:l.Crveran,personDesc:l.Persresptxt,usg:l.Planv,usgDesc:l.UsageTxt,stdVal:l.Vgwts,stdValDesc:l.Vgwtx,ctrlKey:l.Crsteus,ctrlKeyDesc:l.Steutxt,wcEnable:false,plEnable:false,wcatEnable:false,Type:"X",wcValueState:"None",wcDescValueState:"None",plantValueState:"None",wcCatValueState:"None",personResValueState:"None",usgValueState:"None",stdValueState:"None",cntrlKeyValueState:"None",wcValueStateTxt:"",wcDescValueStateTxt:"",plantValueStateTxt:"",wcCatValueStateTxt:"",personResValueStateTxt:"",usgValueStateTxt:"",stdValueStateTxt:"",cntrlKeyValueStateTxt:"",cost:[],capacity:[],classItems:[],characteristics:[]};var o=e.results[0].WCCost.results;if(o){if(o.length>0){var i=new sap.ui.model.json.JSONModel;i.setData(o);s.cost=o}}var d=e.results[0].ClassWC.results;if(d){if(d.length>0){for(var c=0;c<d.length;c++){d[c].ctEnable=false;d[c].classEnable=false;d[c].ClassTypeDesc=d[c].Artxt;delete d[c].Artxt;d[c].ClassDesc=d[c].Kltxt;delete d[c].Kltxt;delete d[c].Changerequestid;delete d[c].Clint;delete d[c].Service;d[c].classDelEnable=true}s.classItems=d}}var p=e.results[0].ValueWC.results;if(p){if(p.length>0){for(var u=0;u<p.length;u++){p[u].cNameEnable=false;p[u].Textbz=p[u].Atwtb;delete p[u].Ataut;delete p[u].Ataw1;delete p[u].Atawe;delete p[u].Atcod;delete p[u].Atflb;delete p[u].Atflv;delete p[u].Atimb;delete p[u].Atsrt;delete p[u].Atvglart;delete p[u].Atzis;delete p[u].Changerequestid;delete p[u].CharName;delete p[u].Charid;delete p[u].Classtype;delete p[u].Service;delete p[u].Valcnt;p[u].slNo=u+1;p[u].flag=p[u].Class+"-"+p[u].slNo}s.characteristics=p;for(var g=0;g<s.characteristics.length;g++){var m=1;for(var f=0;f<s.characteristics.length;f++){if(g===f){continue}if(s.characteristics[f].Atnam===s.characteristics[g].Atnam&&s.characteristics[f].Class===s.characteristics[g].Class){m++}}if(m>1){s.characteristics[g].charDltEnable=true}else{s.characteristics[g].charDltEnable=false}if(s.characteristics[g].Atein===true){s.characteristics[g].charAddEnable=false}}}}n.push(s);sap.ui.getCore().getModel("AIWListWCModel").setData(n);r.updateCount("workCenter",n);sap.ui.getCore().getModel("AIWListWCModel").refresh()}}},error:function(e){r.BusyDialog.close();var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.invokeMessage(l)}});r.action="createWC";r.onCopyWCClose()},onCopyTLPress:function(e){var t=this;var a=true;var r=this._copyTLFragment.getModel("copyTLModel");var l=r.getData();if(l.noObj===""||l.sNoObj==="Error"){a=false;l.sNoObj="Error"}if(this.action==="copyGTL"){if(l.genTLGrp===""||l.sGtlValueState==="Error"){a=false;l.sGtlValueState="Error"}}else if(this.action==="copyETL"){if(l.eqTLGrp===""||l.sEtlValueState==="Error"){a=false;l.sEtlValueState="Error"}}else if(this.action==="copyFTL"){if(l.flocTLGrp===""||l.sFtlValueState==="Error"){a=false;l.sFtlValueState="Error"}}if(!a){r.setData(l);return}var n=false;var s,o,i,d;if(this.action==="copyGTL"){if(l.genTLGrp!==""){s=sap.ui.getCore().getModel("AIWListGTLModel").getData();if(s.length>0){for(var c=0;c<s.length;c++){if(s[c].grp===l.genTLGrp){d=s[c];break}}if(!d){this.readTaskListDetails(l,l.noObj)}else{this.readCreateTempKeyT("CreateTaskList",d,l.noObj)}}else{this.readTaskListDetails(l,l.noObj)}}}else if(this.action==="copyETL"){if(l.eqTLGrp!==""){o=sap.ui.getCore().getModel("AIWListETLModel").getData();if(o.length>0){for(var c=0;c<o.length;c++){if(o[c].grp===l.eqTLGrp){d=o[c];break}}if(!d){this.readTaskListDetails(l,l.noObj)}else{this.readCreateTempKeyT("CreateTaskList",d,l.noObj)}}else{this.readTaskListDetails(l,l.noObj)}}}else if(this.action==="copyFTL"){if(l.flocTLGrp!==""){i=sap.ui.getCore().getModel("AIWListFTLModel").getData();if(i.length>0){for(var c=0;c<i.length;c++){if(i[c].grp===l.flocTLGrp){d=i[c];break}}if(!d){this.readTaskListDetails(l,l.noObj)}else{this.readCreateTempKeyT("CreateTaskList",d,l.noObj)}}else{this.readTaskListDetails(l,l.noObj)}}}},readTaskListDetails:function(e,t){var a=this;var r=this.getView().getModel();var n;var s=sap.ui.getCore().getModel("AIWListGTLModel").getData();var o=sap.ui.getCore().getModel("AIWListETLModel").getData();var i=sap.ui.getCore().getModel("AIWListFTLModel").getData();var d=this.getView().createId("tlMain");var c=sap.ui.core.Fragment.byId(d,"_iconTabBarTL").getSelectedKey();var n="/ChangeRequestSet";var p="";if(this.action==="copyGTL"){p=[new sap.ui.model.Filter("Plnnr","EQ",e.genTLGrp),new sap.ui.model.Filter("Plnty","EQ","A"),new sap.ui.model.Filter("CopyCreate","EQ",true)];var u=["GTClass","GTComp","GTInsp","GTList","GTMPack","GTMpackRead","GTOprs","GTPRT","GTRel","GTSpack","GTVal"]}else if(this.action==="copyETL"){p=[new sap.ui.model.Filter("Plnnr","EQ",e.eqTLGrp),new sap.ui.model.Filter("Plnty","EQ","E"),new sap.ui.model.Filter("CopyCreate","EQ",true)];var u=["ETClass","ETComp","ETInsp","ETList","ETMPack","ETMpackRead","ETOprs","ETPRT","ETRel","ETSpack","ETVal"]}else if(this.action==="copyFTL"){p=[new sap.ui.model.Filter("Plnnr","EQ",e.flocTLGrp),new sap.ui.model.Filter("Plnty","EQ","T"),new sap.ui.model.Filter("CopyCreate","EQ",true)];var u=["FTClass","FTComp","FTInsp","FTList","FTMPack","FTMpackRead","FTOprs","FTPRT","FTRel","FTSpack","FTVal"]}this.BusyDialog.open();r.read(n,{filters:p,urlParameters:{$expand:u},success:function(e){if(e.results.length>0){var r=e.results[0];var n=e.results[0].Message;a.lockMsg="";var s,o,i,d,c,p;if(a.action.indexOf("GTL")>0){if(r.GTList.results.length>0){var u={mode:"create",validFrm:l.getDateFormat(r.Gdatuv),grp:e.results[0].Plnnr,header:[],operation:[],component:[],Class:[],Char:[],modeflag:"Crt",typeFlag:"G",MaintPckg:[],KDenable:true};var g=r.GTList.results;if(g.length>0){u.header=g;for(var m=0;m<g.length;m++){u.header[m].PPenable=true;u.header[m].pPlantDesc=g[m].Iwerktxt;u.header[m].usageDesc=g[m].TlUsgTxt;u.header[m].plGrpDesc=g[m].Plnnrgrptxt;u.header[m].statusDesc=g[m].Statustxt;u.header[m].sysCondDesc=g[m].Anlzux;u.header[m].stratDesc=g[m].Strattxt;u.header[m].Plnal=g[m].Tplnal;u.header[m].Verwe=g[m].Tverwe;u.header[m].plEnable=false;u.header[m].valueStateT="None";u.header[m].valueStatePP="None";u.header[m].valueStateU="None";u.header[m].valueStateS="None";u.header[m].tlusg=g[m].Tverwe;u.header[m].Iwerk=g[m].Werks;u.header[m].wc=g[m].Tarbpl;u.header[m].plant=g[m].Wcplant;u.header[m].grp=g[m].Tlgnhdr;u.header[m].Ktext=g[m].Ktext;u.header[m].assmbly=g[m].Istru;u.header[m].assmblyDesc=g[m].Istrux;u.header[m].insPt=g[m].Slwbez;u.header[m].insPtDesc=g[m].Slwbeztxt;u.header[m].vEquiLbl=false;u.header[m].vEqui=false;u.header[m].vEquiDesc=false;u.header[m].vFlocLbl=false;u.header[m].vFloc=false;u.header[m].vFlocDesc=false;u.header[m].bAddComponent=true}var f=new sap.ui.model.json.JSONModel;f.setData(g)}var h=r.GTOprs.results;if(h.length>0){u.operation=h;var S=r.GTRel.results;var T=r.GTSpack.results;var M=r.GTMPack.results;var b=r.GTMpackRead.results;var E=r.GTPRT.results;var v=r.GTInsp.results;for(var C=0;C<h.length;C++){u.operation[C].calcKeyDesc="";u.operation[C].actTypDesc="";u.operation[C].flag=h[C].Tplnal+"-"+h[C].Vornr;u.operation[C].Arbpl=h[C].TlArbpl;u.operation[C].Plnal=h[C].Tplnal;u.operation[C].opState="None";u.operation[C].opDescState="None";u.operation[C].wcState="None";u.operation[C].plantState="None";u.operation[C].ctrlKeyState="None";u.operation[C].Werks=h[C].Werks2gop;u.operation[C].Steus=h[C].Steus2gop;u.operation[C].workPerc=h[C].Prznt.toString();u.operation[C].orderQty=h[C].Bmvrg;u.operation[C].ordQtyUnit=h[C].Bmeih;u.operation[C].netPrice=h[C].Opreis;u.operation[C].currency=h[C].Owaers;u.operation[C].priceUnit=h[C].Opeinh;u.operation[C].costElement=h[C].Sakto2gop;u.operation[C].materialGrp=h[C].Omatkl;u.operation[C].puchGroup=h[C].Oekgrp;u.operation[C].purchOrg=h[C].Ekorg;u.operation[C].Uvorn=h[C].Uvorn;u.operation[C].UvornEnable=false;u.operation[C].equi=h[C].EqunrGop;u.operation[C].floc=h[C].TplnrGop;u.operation[C].OprRel=[];u.operation[C].SrvPckgOvrw=[];u.operation[C].PRT=[];u.operation[C].InspChar=[];if(S.length>0){for(var x in S){if(u.grp===S[x].Tlgnhdr&&u.operation[C].Plnal===S[x].Tplnal&&u.operation[C].Vornr===S[x].Vorn2){var V={Plnal:S[x].Tplnal,Vornr:S[x].Vorn2,OperationOR:S[x].Vornrgrel,Offset:S[x].Dauer,OUn:S[x].Zeinh,RelType:S[x].Aobar,PO:S[x].Gprznt,OI:S[x].Provg,ID:S[x].Gkalid,WrkCtrOR:S[x].Arbplgrel,PlantOR:S[x].Werksgrel,OperationORVS:"None",OffsetVS:"None",OUnVS:"None",RelTypeVS:"None",POVS:"None",OIVS:"None",IDVS:"None",WrkCtrORVS:"None",PlantORVS:"None"};u.operation[C].OprRel.push(V)}}}if(T.length>0){for(var x in T){if(u.grp===T[x].Tlgnhdr&&u.operation[C].Plnal===T[x].Tplnal&&u.operation[C].Vornr===T[x].Vornrr){var P={Plnal:T[x].Tplnal,Vornr:T[x].Vornrr,LineNum:T[x].SrvLine,DelIndSP:l.statusSel(T[x].Del),ActNum:T[x].Srvpos,ShrtTxt:T[x].Ktext1,Qty:T[x].Mengegspk,BUomSP:T[x].Meinsgspk,GrossPrc:T[x].Tbtwr,CurKey:T[x].Waersgspk,Work:T[x].IntWork,UnitOfWork:T[x].Iwein,ActNumVS:"None",ShrtTxtVS:"None",QtyVS:"None",BUomSPVS:"None",GrossPrcVS:"None",CurKeyVS:"None",WorkVS:"None",UnitOfWorkVS:"None",DelIndSPEnabled:false,SPEnabled:true};u.operation[C].SrvPckgOvrw.push(P)}}}if(E.length>0){for(var x in E){if(u.grp===E[x].Tlgnhdr&&u.operation[C].Plnal===E[x].Tplnal&&u.operation[C].Vornr===E[x].Vornrgprt){var I={Plnal:E[x].Tplnal,Vornr:E[x].Vornrgprt,ItmNum:E[x].Psnfh,ItmCat:E[x].Fhmar,Plant:E[x].Fhwrk,Mat:E[x].Matnrgprt,MatDesc:"",Equi:E[x].EqunrGpt,EquiDesc:"",Mspt:E[x].Eqpnt,MsptDesc:"",doc:E[x].Dokargprt,docDesc:"",docType:E[x].Doknrgprt,docTypeDesc:"",docPart:E[x].Doktlgprt,docVersion:E[x].Dokvrgprt,Othr:E[x].Fhmnr,OthrDesc:"",Qty:E[x].Mgvgw,UOM:E[x].Mgeinh,QtyFrmla:E[x].Mgform,PRTCtrl:E[x].Steuf,PRTCtrlDesc:E[x].Stftxt,StdUsgVal:E[x].Ewvgw,StdUsgUOM:E[x].Eweinh,UsgValFrmla:E[x].Ewform,PRTVS:"None",PlantVS:"None",QtyVS:"None",UOMVS:"None",QtyFrmlaVS:"None",PRTCtrlVS:"None",StdUsgValVS:"None",StdUsgUOMVS:"None",UsgValFrmlaVS:"None"};if(I.ItmCat==="M"){I.PRT=I.Mat;I.title="Material";I.matEnable=true;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=false;I.Plant=u.operation[C].Werks}else if(I.ItmCat==="E"){I.PRT=I.Equi;I.title="Equipment";I.matEnable=false;I.eqEnable=true;I.msptEnable=false;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="P"){I.PRT=I.Mspt;I.title="Measuring Point";I.matEnable=false;I.eqEnable=false;I.msptEnable=true;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="D"){I.PRT=I.doc+"-"+I.docType+"-"+I.docPart+"-"+I.docVersion;I.title="Document";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=true;I.othEnable=false;I.docType="";I.docTypeDesc="";I.docPart="";I.docVersion=""}else if(I.ItmCat==="O"){I.PRT=I.Othr;I.title="Others";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=true}u.operation[C].PRT.push(I)}}}if(v.length>0){for(var x in v){if(u.grp===v[x].Tlgnhdr&&u.operation[C].Plnal===v[x].Tplnal&&u.operation[C].Vornr===v[x].Vornrgins){var L={Plnal:v[x].Tplnal,Vornr:v[x].Vornrgins,InspChar:v[x].Merknr,PrstInd:v[x].Vste2gins,QuanChar:l.statusSel(v[x].Quantitat),QualChar:l.statusSel(v[x].QpmkRef),MastInspChar:v[x].Verw2gins,Plant:v[x].Uzae2tlgn,Version:v[x].Ver2tlgni,ShrtTxt:v[x].Kurztext,InspMthd:v[x].Pmth2gins,InspMthdPlnt:v[x].Qwe2tlgni,TolKey:v[x].Toleranzs,VrsnInspMthd:v[x].Pmtversio,SampProc:v[x].Stichprve,SampUOM:v[x].Probemgeh,BaseSampQty:v[x].Pruefeinh.toString(),CodeGrp:v[x].Auswmenge,MastInspCharVS:"None",PlantVS:"None",VersionVS:"None",InspMthdVS:"None",InspMthdPlntVS:"None",SampProcVS:"None"};u.operation[C].InspChar.push(L)}}}var y=[];if(b.length>0){for(var D in b){if(u.grp===b[D].Tlgnhdr&&u.operation[C].Plnal===b[D].Tplnal){y.push(b[D])}}}var k=[];if(M.length>0){for(var x in M){if(u.grp===M[x].Tlgnhdr&&u.operation[C].Plnal===M[x].Tplnal&&u.operation[C].Vornr===M[x].Vorn2gmpk){k.push(M[x])}}}var F={};if(y.length>0){F={Plnal:y[0].Tplnal,Vornr:u.operation[C].Vornr,Strat:y[0].Startgmpk,SOp:"",Ltxa1:u.operation[C].Ltxa1,flag:y[0].Tplnal+"-"+u.operation[C].Vornr,MPArr:[]};for(var A in y){var w=y[A];F[w.Paketgmpk]=false}}if(k.length>0){for(var q in k){k[q].Vornr=k[q].Vorn2gmpk;k[q].Strat=k[q].Startgmpk;k[q].Paket=k[q].Paketgmpk;var W=k[q];if(k[q].IsSelected==="X"){F[W.Paketgmpk]=true}}F.MPArr=k}u.MaintPckg.push(F)}var B=new sap.ui.model.json.JSONModel;B.setData(h)}var N=r.GTComp.results;if(N.length>0){u.component=N;for(var O=0;O<N.length;O++){u.component[O].matDesc=N[O].Maktx;u.component[O].slNo=O+1;u.component[O].Plnal=N[O].Tplnal;u.component[O].flag=N[O].Tplnal+"-"+N[O].Vornr+"-"+u.component[O].slNo;u.component[O].hFlag=N[O].Tplnal+"-"+N[O].Vornr;u.component[O].bom=N[O].Stlnrgcmp;u.component[O].bomCat=N[O].Stltygcmp;u.component[O].bomCatDesc=N[O].Stltygcmptxt;u.component[O].altBom=N[O].Stlal}a.cmpData=N;o=new sap.ui.model.json.JSONModel;o.setData(N)}i=r.GTClass.results;if(i){if(i.length>0){for(var m=0;m<i.length;m++){i[m].ctEnable=false;i[m].classEnable=false;i[m].ClassTypeDesc=i[m].Artxt;delete i[m].Artxt;i[m].ClassDesc=i[m].Kltxt;delete i[m].Kltxt;delete i[m].Changerequestid;delete i[m].Clint;delete i[m].Service;i[m].classDelEnable=true;i[m].slNo=G+1;i[m].Plnal=i[m].Tplnal;i[m].flag=i[m].Tplnal+"-"+i[m].slNo}a.cData=i;c=new sap.ui.model.json.JSONModel;c.setData(i);u.Class=i}}d=r.GTVal.results;if(d){if(d.length>0){for(var R=0;R<d.length;R++){d[R].cNameEnable=false;delete d[R].Ataut;delete d[R].Ataw1;delete d[R].Atawe;delete d[R].Atcod;delete d[R].Atflb;delete d[R].Atflv;delete d[R].Atimb;delete d[R].Atsrt;delete d[R].Atvglart;delete d[R].Atzis;delete d[R].Changerequestid;delete d[R].CharName;delete d[R].Charid;delete d[R].Classtype;delete d[R].Service;delete d[R].Valcnt;d[R].slNo=R+1;d[R].Plnal=d[R].Tplnal;d[R].flag=d[R].Tplnal+"-"+d[R].Class+"-"+d[R].slNo}for(var q=0;q<d.length;q++){var U=1;for(var z=0;z<d.length;z++){if(q===z){continue}if(d[z].Atnam===d[q].Atnam&&d[z].Class===d[q].Class){U++}}if(U>1){d[q].charDltEnable=true}else{d[q].charDltEnable=false}if(d[q].Atein===true){d[q].charAddEnable=false}}a.chData=d;p=new sap.ui.model.json.JSONModel;p.setData(d);u.Char=d}}a.readCreateTempKeyT("copyGTL",u,t)}}else if(a.action.indexOf("ETL")>0){if(r.ETList.results.length>0){var g=r.ETList.results[0];var K={mode:"create",validFrm:l.getDateFormat(r.Datuv),grp:e.results[0].Plnnr,equipment:"",equipmentDesc:"",header:[],operation:[],component:[],Class:[],Char:[],modeflag:"Crt",typeFlag:"E",MaintPckg:[],KDenable:true};var g=r.ETList.results;if(g.length>0){K.header=g;for(var m=0;m<g.length;m++){K.header[m].Iwerk="";K.header[m].pPlantDesc=g[m].Iwerktxt;K.header[m].usageDesc=g[m].TlUsgTxt;K.header[m].plGrpDesc=g[m].Plnnrgrptxt;K.header[m].statusDesc=g[m].Statustxt;K.header[m].sysCondDesc=g[m].Anlzux;K.header[m].stratDesc=g[m].Strattxt;K.header[m].Plnal=g[m].Tplnal;K.header[m].Verwe=g[m].Tverwe;K.header[m].plEnable=false;K.header[m].valueStateT="None";K.header[m].valueStatePP="None";K.header[m].valueStateU="None";K.header[m].valueStateS="None";K.header[m].equipment=g[m].Eq2tl;K.header[m].equipmentDesc=g[m].Eqktx;K.header[m].tlusg=g[m].Tverwe;K.header[m].wc=g[m].Tarbpl;K.header[m].plant=g[m].Wcplant;K.header[m].grp=g[m].Tlgnhdr;K.header[m].Ktext=g[m].Ktext;K.header[m].assmbly=g[m].Istru;K.header[m].assmblyDesc=g[m].Istrux;K.header[m].insPt=g[m].Slwbez;K.header[m].insPtDesc=g[m].Slwbeztxt;K.header[m].vEquiLbl=true;K.header[m].vEqui=true;K.header[m].vEquiDesc=true;K.header[m].vFlocLbl=false;K.header[m].vFloc=false;K.header[m].vFlocDesc=false;K.header[m].bAddComponent=true}var f=new sap.ui.model.json.JSONModel;f.setData(K.header)}var h=r.ETOprs.results;if(h.length>0){K.operation=h;var S=r.ETRel.results;var T=r.ETSpack.results;var M=r.ETMPack.results;var b=r.ETMpackRead.results;var E=r.ETPRT.results;var v=r.ETInsp.results;for(var C=0;C<h.length;C++){K.operation[C].calcKeyDesc="";K.operation[C].actTypDesc="";K.operation[C].flag=h[C].Tplnal+"-"+h[C].Vornr;K.operation[C].Arbpl=h[C].TlArbpl;K.operation[C].Plnal=h[C].Tplnal;K.operation[C].opState="None";K.operation[C].opDescState="None";K.operation[C].wcState="None";K.operation[C].plantState="None";K.operation[C].ctrlKeyState="None";K.operation[C].Werks=h[C].Werks2eop;K.operation[C].Steus=h[C].Steus2eop;K.operation[C].workPerc=h[C].Prznt.toString();K.operation[C].orderQty=h[C].Bmvrg;K.operation[C].ordQtyUnit=h[C].Bmeih;K.operation[C].netPrice=h[C].Opreis;K.operation[C].currency=h[C].Owaers;K.operation[C].priceUnit=h[C].Opeinh;K.operation[C].costElement=h[C].Sakto2eop;K.operation[C].materialGrp=h[C].Omatkl;K.operation[C].puchGroup=h[C].Oekgrp;K.operation[C].purchOrg=h[C].Ekorg;K.operation[C].Uvorn=h[C].Uvorn;K.operation[C].UvornEnable=false;K.operation[C].equi=h[C].EqunrEop;K.operation[C].floc=h[C].TplnrEop;K.operation[C].OprRel=[];K.operation[C].SrvPckgOvrw=[];K.operation[C].PRT=[];K.operation[C].InspChar=[];if(S.length>0){for(var x in S){if(K.grp===S[x].Tleqhdr&&K.operation[C].Plnal===S[x].Tplnal&&K.operation[C].Vornr===S[x].Vorn2){var V={Plnal:S[x].Tplnal,Vornr:S[x].Vorn2,OperationOR:S[x].Vornrerel,Offset:S[x].Dauer,OUn:S[x].Zeinh,RelType:S[x].Aobar,PO:S[x].Eprznt,OI:S[x].Provg,ID:S[x].Ekalid,WrkCtrOR:S[x].Arbplerel,PlantOR:S[x].Werkserel,OperationORVS:"None",OffsetVS:"None",OUnVS:"None",RelTypeVS:"None",POVS:"None",OIVS:"None",IDVS:"None",WrkCtrORVS:"None",PlantORVS:"None"};K.operation[C].OprRel.push(V)}}}if(T.length>0){for(var x in T){if(K.grp===T[x].Tleqhdr&&K.operation[C].Plnal===T[x].Tplnal&&K.operation[C].Vornr===T[x].Vornrr){var P={Plnal:T[x].Tplnal,Vornr:T[x].Vornrr,LineNum:T[x].SrvLine,DelIndSP:l.statusSel(T[x].Del),ActNum:T[x].Srvpos,ShrtTxt:T[x].Ktext1,Qty:T[x].Mengeespk,BUomSP:T[x].Meinsespk,GrossPrc:T[x].Tbtwr,CurKey:T[x].Waersespk,Work:T[x].IntWork,UnitOfWork:T[x].Iwein,ActNumVS:"None",ShrtTxtVS:"None",QtyVS:"None",BUomSPVS:"None",GrossPrcVS:"None",CurKeyVS:"None",WorkVS:"None",UnitOfWorkVS:"None",DelIndSPEnabled:false};K.operation[C].SrvPckgOvrw.push(P)}}}if(E.length>0){for(var x in E){if(K.grp===E[x].Tleqhdr&&K.operation[C].Plnal===E[x].Tplnal&&K.operation[C].Vornr===E[x].Vornreprt){var I={Plnal:E[x].Tplnal,Vornr:E[x].Vornreprt,ItmNum:E[x].Psnfh,ItmCat:E[x].Fhmar,Plant:E[x].Fhwrk,Mat:E[x].Matnreprt,MatDesc:"",Equi:E[x].EqunrEpt,EquiDesc:"",Mspt:E[x].Eqpnt,MsptDesc:"",doc:E[x].Dokareprt,docDesc:"",docType:E[x].Doknreprt,docTypeDesc:"",docPart:E[x].Doktleprt,docVersion:E[x].Dokvreprt,Othr:E[x].Fhmnr,OthrDesc:"",Qty:E[x].Mgvgw,UOM:E[x].Mgeinh,QtyFrmla:E[x].Mgform,PRTCtrl:E[x].Steuf,PRTCtrlDesc:E[x].Stftxt,StdUsgVal:E[x].Ewvgw,StdUsgUOM:E[x].Eweinh,UsgValFrmla:E[x].Ewform,PRTVS:"None",PlantVS:"None",QtyVS:"None",UOMVS:"None",QtyFrmlaVS:"None",PRTCtrlVS:"None",StdUsgValVS:"None",StdUsgUOMVS:"None",UsgValFrmlaVS:"None"};if(I.ItmCat==="M"){I.PRT=I.Mat;I.title="Material";I.matEnable=true;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=false;I.Plant=K.operation[C].Werks}else if(I.ItmCat==="E"){I.PRT=I.Equi;I.title="Equipment";I.matEnable=false;I.eqEnable=true;I.msptEnable=false;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="P"){I.PRT=I.Mspt;I.title="Measuring Point";I.matEnable=false;I.eqEnable=false;I.msptEnable=true;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="D"){I.PRT=I.doc+"-"+I.docType+"-"+I.docPart+"-"+I.docVersion;I.title="Document";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=true;I.othEnable=false;I.docType="";I.docTypeDesc="";I.docPart="";I.docVersion=""}else if(I.ItmCat==="O"){I.PRT=I.Othr;I.title="Others";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=true}K.operation[C].PRT.push(I)}}}if(v.length>0){for(var x in v){if(K.grp===v[x].Tleqhdr&&K.operation[C].Plnal===v[x].Tplnal&&K.operation[C].Vornr===v[x].Vornreins){var L={Plnal:v[x].Tplnal,Vornr:v[x].Vornreins,InspChar:v[x].Merknr,PrstInd:v[x].Vste2eins,QuanChar:l.statusSel(v[x].Quantitat),QualChar:l.statusSel(v[x].QpmkRef),MastInspChar:v[x].Verw2eins,Plant:v[x].Uzae2tlen,Version:v[x].Ver2tleqi,ShrtTxt:v[x].Kurztext,InspMthd:v[x].Pmth2eins,InspMthdPlnt:v[x].Qwe2tleqi,TolKey:v[x].Toleranzs,VrsnInspMthd:v[x].Pmtversio,SampProc:v[x].Stichprve,SampUOM:v[x].Probemgeh,BaseSampQty:v[x].Pruefeinh.toString(),CodeGrp:v[x].Auswmenge,MastInspCharVS:"None",PlantVS:"None",VersionVS:"None",InspMthdVS:"None",InspMthdPlntVS:"None",SampProcVS:"None"};K.operation[C].InspChar.push(L)}}}var y=[];if(b.length>0){for(var D in b){if(K.grp===b[D].Tleqhdr&&K.operation[C].Plnal===b[D].Tplnal){y.push(b[D])}}}var k=[];if(M.length>0){for(var x in M){if(K.grp===M[x].Tleqhdr&&K.operation[C].Plnal===M[x].Tplnal&&K.operation[C].Vornr===M[x].Vorn2empk){k.push(M[x])}}}var F={};if(y.length>0){F={Plnal:y[0].Tplnal,Vornr:K.operation[C].Vornr,Strat:y[0].Startempk,SOp:"",Ltxa1:K.operation[C].Ltxa1,flag:y[0].Tplnal+"-"+K.operation[C].Vornr,MPArr:[]};for(var A in y){var w=y[A];F[w.Paketempk]=false}}if(k.length>0){for(var q in k){k[q].Vornr=k[q].Vorn2empk;k[q].Strat=k[q].Startempk;k[q].Paket=k[q].Paketempk;var W=k[q];if(k[q].IsSelected==="X"){F[W.Paketempk]=true}}F.MPArr=k}K.MaintPckg.push(F)}a.oData=K.operation;var B=new sap.ui.model.json.JSONModel;B.setData(K.operation)}}N=r.ETComp.results;if(N.length>0){K.component=N;for(var H=0;H<N.length;H++){K.component[H].matDesc=N[H].Maktx;K.component[H].slNo=H+1;K.component[H].Plnal=N[H].Tplnal;K.component[H].flag=N[H].Tplnal+"-"+N[H].Vornr+"-"+K.component[H].slNo;K.component[H].hFlag=N[H].Tplnal+"-"+N[H].Vornr;K.component[H].bom=N[H].Stlnrecmp;K.component[H].bomCat=N[H].Stltyecmp;K.component[H].bomCatDesc=N[H].Stltyecmptxt;K.component[H].altBom=N[H].Stlal}a.cmpData=N;o=new sap.ui.model.json.JSONModel;o.setData(N)}i=r.ETClass.results;if(i){if(i.length>0){for(var G=0;G<i.length;G++){i[m].ctEnable=false;i[m].classEnable=false;i[m].ClassTypeDesc=i[m].Artxt;delete i[m].Artxt;i[m].ClassDesc=i[m].Kltxt;delete i[m].Kltxt;delete i[m].Changerequestid;delete i[m].Clint;delete i[m].Service;i[m].classDelEnable=true;i[m].slNo=G+1;i[m].Plnal=i[m].Tplnal;i[m].flag=i[m].Tplnal+"-"+i[m].slNo}a.cData=i;c=new sap.ui.model.json.JSONModel;c.setData(i);K.Class=i}}d=r.ETVal.results;if(d){if(d.length>0){for(var R=0;R<d.length;R++){d[R].cNameEnable=false;delete d[R].Ataut;delete d[R].Ataw1;delete d[R].Atawe;delete d[R].Atcod;delete d[R].Atflb;delete d[R].Atflv;delete d[R].Atimb;delete d[R].Atsrt;delete d[R].Atvglart;delete d[R].Atzis;delete d[R].Changerequestid;delete d[R].CharName;delete d[R].Charid;delete d[R].Classtype;delete d[R].Service;delete d[R].Valcnt;d[R].slNo=R+1;d[R].Plnal=d[R].Tplnal;d[R].flag=d[R].Tplnal+"-"+d[R].Class+"-"+d[R].slNo}for(var q=0;q<d.length;q++){var U=1;for(var z=0;z<d.length;z++){if(q===z){continue}if(d[z].Atnam===d[q].Atnam&&d[z].Class===d[q].Class){U++}}if(U>1){d[q].charDltEnable=true}else{d[q].charDltEnable=false}if(d[q].Atein===true){d[q].charAddEnable=false}}a.chData=d;p=new sap.ui.model.json.JSONModel;p.setData(d);K.Char=d}}a.readCreateTempKeyT("copyETL",K,t)}else if(a.action.indexOf("FTL")>0){if(r.FTList.results.length>0){var g=r.FTList.results[0];var j={mode:"create",validFrm:l.getDateFormat(r.Datuv),grp:e.results[0].Plnnr,floc:"",flocDesc:"",modeflag:"Crt",typeFlag:"F",header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[],KDenable:true};var g=r.FTList.results;if(g.length>0){j.header=g;for(var m=0;m<g.length;m++){j.header[m].Iwerk="";j.header[m].pPlantDesc=g[m].Iwerktxt;j.header[m].usageDesc=g[m].TlUsgTxt;j.header[m].plGrpDesc=g[m].Plnnrgrptxt;j.header[m].statusDesc=g[m].Statustxt;j.header[m].sysCondDesc=g[m].Anlzux;j.header[m].stratDesc=g[m].Strattxt;j.header[m].Plnal=g[m].Tplnal;j.header[m].Verwe=g[m].Tverwe;j.header[m].plEnable=false;j.header[m].valueStateT="None";j.header[m].valueStatePP="None";j.header[m].valueStateU="None";j.header[m].valueStateS="None";j.header[m].floc=g[m].Fl2tl;j.header[m].flocDesc=g[m].Pltxt;j.header[m].tlusg=g[m].Tverwe;j.header[m].wc=g[m].Tarbpl;j.header[m].plant=g[m].Wcplant;j.header[m].grp=g[m].Tlgnhdr;j.header[m].Ktext=g[m].Ktext;j.header[m].assmbly=g[m].Istru;j.header[m].assmblyDesc=g[m].Istrux;j.header[m].insPt=g[m].Slwbez;j.header[m].insPtDesc=g[m].Slwbeztxt;j.header[m].vEquiLbl=false;j.header[m].vEqui=false;j.header[m].vEquiDesc=false;j.header[m].vFlocLbl=true;j.header[m].vFloc=true;j.header[m].vFlocDesc=true;j.header[m].bAddComponent=true}var f=new sap.ui.model.json.JSONModel;f.setData(j.header)}var h=r.FTOprs.results;if(h.length>0){j.operation=h;var S=r.FTRel.results;var T=r.FTSpack.results;var M=r.FTMPack.results;var b=r.FTMpackRead.results;var E=r.FTPRT.results;var v=r.FTInsp.results;for(var C=0;C<h.length;C++){j.operation[C].calcKeyDesc="";j.operation[C].actTypDesc="";j.operation[C].flag=h[C].Tplnal+"-"+h[C].Vornr;j.operation[C].Arbpl=h[C].TlArbpl;j.operation[C].Plnal=h[C].Tplnal;j.operation[C].opState="None";j.operation[C].opDescState="None";j.operation[C].wcState="None";j.operation[C].plantState="None";j.operation[C].ctrlKeyState="None";j.operation[C].Werks=h[C].Werks2fop;j.operation[C].Steus=h[C].Steus2fop;j.operation[C].workPerc=h[C].Prznt.toString();j.operation[C].orderQty=h[C].Bmvrg;j.operation[C].ordQtyUnit=h[C].Bmeih;j.operation[C].netPrice=h[C].Opreis;j.operation[C].currency=h[C].Owaers;j.operation[C].priceUnit=h[C].Opeinh;j.operation[C].costElement=h[C].Sakto2fop;j.operation[C].materialGrp=h[C].Omatkl;j.operation[C].puchGroup=h[C].Oekgrp;j.operation[C].purchOrg=h[C].Ekorg;j.operation[C].Uvorn=h[C].Uvorn;j.operation[C].UvornEnable=false;j.operation[C].equi=h[C].EqunrFop;j.operation[C].floc=h[C].TplnrFop;j.operation[C].OprRel=[];j.operation[C].SrvPckgOvrw=[];j.operation[C].PRT=[];j.operation[C].InspChar=[];if(S.length>0){for(var x in S){if(j.grp===S[x].Tlflhdr&&j.operation[C].Plnal===S[x].Tplnal&&j.operation[C].Vornr===S[x].Vorn2){var V={Plnal:S[x].Tplnal,Vornr:S[x].Vorn2,OperationOR:S[x].Vornrfrel,Offset:S[x].Dauer,OUn:S[x].Zeinh,RelType:S[x].Aobar,PO:S[x].Fprznt,OI:S[x].Provg,ID:S[x].Fkalid,WrkCtrOR:S[x].Arbplfrel,PlantOR:S[x].Werksfrel,OperationORVS:"None",OffsetVS:"None",OUnVS:"None",RelTypeVS:"None",POVS:"None",OIVS:"None",IDVS:"None",WrkCtrORVS:"None",PlantORVS:"None"};j.operation[C].OprRel.push(V)}}}if(T.length>0){for(var x in T){if(j.grp===T[x].Tlflhdr&&j.operation[C].Plnal===T[x].Tplnal&&j.operation[C].Vornr===T[x].Vornrr){var P={Plnal:T[x].Tplnal,Vornr:T[x].Vornrr,LineNum:T[x].SrvLine,DelIndSP:l.statusSel(T[x].Del),ActNum:T[x].Srvpos,ShrtTxt:T[x].Ktext1,Qty:T[x].Mengefspk,BUomSP:T[x].Meinsfspk,GrossPrc:T[x].Tbtwr,CurKey:T[x].Waersfspk,Work:T[x].IntWork,UnitOfWork:T[x].Iwein,ActNumVS:"None",ShrtTxtVS:"None",QtyVS:"None",BUomSPVS:"None",GrossPrcVS:"None",CurKeyVS:"None",WorkVS:"None",UnitOfWorkVS:"None",DelIndSPEnabled:false};j.operation[C].SrvPckgOvrw.push(P)}}}if(E.length>0){for(var x in E){if(j.grp===E[x].Tlflhdr&&j.operation[C].Plnal===E[x].Tplnal&&j.operation[C].Vornr===E[x].Vornrfprt){var I={Plnal:E[x].Tplnal,Vornr:E[x].Vornrfprt,ItmNum:E[x].Psnfh,ItmCat:E[x].Fhmar,Plant:E[x].Fhwrk,Mat:E[x].Matnrfprt,MatDesc:"",Equi:E[x].EqunrFpt,EquiDesc:"",Mspt:E[x].Eqpnt,MsptDesc:"",doc:E[x].Dokarfprt,docDesc:"",docType:E[x].Doknrfprt,docTypeDesc:"",docPart:E[x].Doktlfprt,docVersion:E[x].Dokvrfprt,Othr:E[x].Fhmnr,OthrDesc:"",Qty:E[x].Mgvgw,UOM:E[x].Mgeinh,QtyFrmla:E[x].Mgform,PRTCtrl:E[x].Steuf,PRTCtrlDesc:E[x].Stftxt,StdUsgVal:E[x].Ewvgw,StdUsgUOM:E[x].Eweinh,UsgValFrmla:E[x].Ewform,PRTVS:"None",PlantVS:"None",QtyVS:"None",UOMVS:"None",QtyFrmlaVS:"None",PRTCtrlVS:"None",StdUsgValVS:"None",StdUsgUOMVS:"None",UsgValFrmlaVS:"None"};if(I.ItmCat==="M"){I.PRT=I.Mat;I.title="Material";I.matEnable=true;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=false;I.Plant=j.operation[C].Werks}else if(I.ItmCat==="E"){I.PRT=I.Equi;I.title="Equipment";I.matEnable=false;I.eqEnable=true;I.msptEnable=false;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="P"){I.PRT=I.Mspt;I.title="Measuring Point";I.matEnable=false;I.eqEnable=false;I.msptEnable=true;I.docEnable=false;I.othEnable=false}else if(I.ItmCat==="D"){I.PRT=I.doc+"-"+I.docType+"-"+I.docPart+"-"+I.docVersion;I.title="Document";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=true;I.othEnable=false;I.docType="";I.docTypeDesc="";I.docPart="";I.docVersion=""}else if(I.ItmCat==="O"){I.PRT=I.Othr;I.title="Others";I.matEnable=false;I.eqEnable=false;I.msptEnable=false;I.docEnable=false;I.othEnable=true}j.operation[C].PRT.push(I)}}}if(v.length>0){for(var x in v){if(j.grp===v[x].Tlflhdr&&j.operation[C].Plnal===v[x].Tplnal&&j.operation[C].Vornr===v[x].Vornrfins){var L={Plnal:v[x].Tplnal,Vornr:v[x].Vornrfins,InspChar:v[x].Merknr,PrstInd:v[x].Vste2fins,QuanChar:l.statusSel(v[x].Quantitat),QualChar:l.statusSel(v[x].QpmkRef),MastInspChar:v[x].Verw2fins,Plant:v[x].Uzae2tlfn,Version:v[x].Ver2tlfli,ShrtTxt:v[x].Kurztext,InspMthd:v[x].Pmth2fins,InspMthdPlnt:v[x].Qwe2tlfli,TolKey:v[x].Toleranzs,VrsnInspMthd:v[x].Pmtversio,SampProc:v[x].Stichprve,SampUOM:v[x].Probemgeh,BaseSampQty:v[x].Pruefeinh.toString(),CodeGrp:v[x].Auswmenge,MastInspCharVS:"None",PlantVS:"None",VersionVS:"None",InspMthdVS:"None",InspMthdPlntVS:"None",SampProcVS:"None"};j.operation[C].InspChar.push(L)}}}var y=[];if(b.length>0){for(var D in b){if(j.grp===b[D].Tlflhdr&&j.operation[C].Plnal===b[D].Tplnal){y.push(b[D])}}}var k=[];if(M.length>0){for(var x in M){if(j.grp===M[x].Tlflhdr&&j.operation[C].Plnal===M[x].Tplnal&&j.operation[C].Vornr===M[x].Vorn2fmpk){k.push(M[x])}}}var F={};if(y.length>0){F={Plnal:y[0].Tplnal,Vornr:j.operation[C].Vornr,Strat:y[0].Startfmpk,SOp:"",Ltxa1:j.operation[C].Ltxa1,flag:y[0].Tplnal+"-"+j.operation[C].Vornr,MPArr:[]};for(var A in y){var w=y[A];F[w.Paketfmpk]=false}}if(k.length>0){for(var q in k){k[q].Vornr=k[q].Vorn2fmpk;k[q].Strat=k[q].Startfmpk;k[q].Paket=k[q].Paketfmpk;var W=k[q];if(k[q].IsSelected==="X"){F[W.Paketfmpk]=true}}F.MPArr=k}j.MaintPckg.push(F)}a.oData=j.operation;var B=new sap.ui.model.json.JSONModel;B.setData(j.operation)}N=r.FTComp.results;if(N.length>0){j.component=N;for(var A=0;A<N.length;A++){j.component[A].matDesc=N[A].Maktx;j.component[A].slNo=H+1;j.component[A].Plnal=N[A].Tplnal;j.component[A].flag=N[A].Tplnal+"-"+N[A].Vornr+"-"+j.component[A].slNo;j.component[A].hFlag=N[A].Tplnal+"-"+N[A].Vornr;j.component[A].bom=N[A].Stlnrfcmp;j.component[A].bomCat=N[A].Stltyfcmp;j.component[A].bomCatDesc=N[A].Stltyfcmptxt;j.component[A].altBom=N[A].Stlal}a.cmpData=N;o=new sap.ui.model.json.JSONModel;o.setData(j.component)}i=r.FTClass.results;if(i){if(i.length>0){for(var G=0;G<i.length;G++){i[m].ctEnable=false;i[m].classEnable=false;i[m].ClassTypeDesc=i[m].Artxt;delete i[m].Artxt;i[m].ClassDesc=i[m].Kltxt;delete i[m].Kltxt;delete i[m].Changerequestid;delete i[m].Clint;delete i[m].Service;i[m].classDelEnable=true;i[m].slNo=G+1;i[m].Plnal=i[m].Tplnal;i[m].flag=i[m].Tplnal+"-"+i[m].slNo}a.cData=i;c=new sap.ui.model.json.JSONModel;c.setData(i);j.Class=i}}d=r.FTVal.results;if(d){if(d.length>0){for(var R=0;R<d.length;R++){d[R].cNameEnable=false;delete d[R].Ataut;delete d[R].Ataw1;delete d[R].Atawe;delete d[R].Atcod;delete d[R].Atflb;delete d[R].Atflv;delete d[R].Atimb;delete d[R].Atsrt;delete d[R].Atvglart;delete d[R].Atzis;delete d[R].Changerequestid;delete d[R].CharName;delete d[R].Charid;delete d[R].Classtype;delete d[R].Service;delete d[R].Valcnt;d[R].slNo=R+1;d[R].Plnal=d[R].Tplnal;d[R].flag=d[R].Tplnal+"-"+d[R].Class+"-"+d[R].slNo}for(var q=0;q<d.length;q++){var U=1;for(var z=0;z<d.length;z++){if(q===z){continue}if(d[z].Atnam===d[q].Atnam&&d[z].Class===d[q].Class){U++}}if(U>1){d[q].charDltEnable=true}else{d[q].charDltEnable=false}if(d[q].Atein===true){d[q].charAddEnable=false}}a.chData=d;p=new sap.ui.model.json.JSONModel;p.setData(d);j.Char=d}}a.readCreateTempKeyT("copyFTL",j,t)}}}a.BusyDialog.close()},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){t[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=t.join("\n");a.BusyDialog.close();a.invokeMessage(l)}});a.onCopyTLClose()},onCopyTLClose:function(){this._copyTLFragment.close()},onCopyOLPress:function(e){var t=this;var a=true;var r=this._copyOLFragment.getModel("copyOLModel");var l=r.getData();if(l.noObj===""||l.sNoObj==="Error"){a=false;l.sNoObj="Error"}if(l.sLink===""||l.sLinkValueState==="Error"){a=false;l.sLinkValueState="Error"}if(!a){r.setData(l);return}var n=sap.ui.getCore().getModel("AIWListOLModel").getData();var s;if(n.length>0){for(var o=0;o<n.length;o++){if(n[o].link===l.sLink){s=n[o]}}}if(!s){this.readLinkData(l.sLink,l,l.noObj)}else{this.readCreateTempKeyT("CopyObjectLink",s,l.noObj)}},readLinkData:function(e,t,a){var r=this;var n=this.getView().getModel();var s=sap.ui.getCore().getModel("AIWListOLModel").getData();var o=[new sap.ui.model.Filter("Objlink","EQ",e)];var i=["OLClass","OLVal","Olink","OLLAM"];function d(e){var t="/DeriveOLstatusSet(Netyp='"+e+"',Lvorm=false)";n.read(t,{success:function(e){if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){r.olData.usrSts=e.Usta_oln;r.olData.stProfLblV=true;r.olData.stsProf=e.Stsm_oln;r.olData.stsProfV=true;r.olData.stsProfDesc=e.Statproftxt;r.olData.stsProfDescV=true;r.olData.stsObj=e.Ustw_oln;r.olData.stsObjLblV=true;r.olData.stsObjV=true;r.olData.stsWoLblV=true;r.olData.stsWoNoV=true;r.olData.stsWoNo=e.Uswo_oln;r.olData.sysSts=e.Stattext}else{r.olData.stProfLblV=false;r.olData.stsProfV=false;r.olData.stsProfDescV=false;r.olData.stsObjLblV=false;r.olData.stsObjV=false;r.olData.stsWoLblV=false;r.olData.stsWoNoV=false;r.olData.usrSts="";r.olData.stsProf="";r.olData.stsProfDesc="";r.olData.stsObj="";r.olData.stsWoNo="";r.olData.sysSts=""}r.readCreateTempKeyT("CopyObjectLink",r.olData,a);r.BusyDialog.close()},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.invokeMessage(l);r.BusyDialog.close()}});r.action="createOL";r.onCopyOLClose()}this.BusyDialog.open();n.read("/ChangeRequestSet",{filters:o,urlParameters:{$expand:i},success:function(e){if(e.results.length>0){var t=e.results[0].Message;r.lockMsg="";var a=e.results[0];var n=a.Olink.results[0];if(n!==null&&n!==undefined){r.linkCat=n.Netyp;r.objCat=n.Kantyp;r.olData={mode:"create",link:n.Objlink,linkCat:n.Netyp,linkCatDesc:n.Netyptxt,objCat:n.Kantyp,objCatDesc:n.Kantyptxt,linkDesc:n.Kanxt,netId:n.Netid,netIdDesc:n.Netidtxt,linkNum:n.Lfdknr!==""?n.Lfdknr:"1",autGrp:n.Begru,autGrpDesc:n.Begtx,validFrm:l.getDateFormat(n.Datva),timeFrm:l.getTime(n.Zeitva),validTo:l.getDateFormat(n.Datvb),timeTo:l.getTime(n.Zeitvb),medium:n.Mediu,mediumDesc:n.Medkxt,linkFrmFlEn:true,linkToFlEn:true,linkObjFlEn:true,linkFromEQEn:true,linkToEQEn:true,linkObjEqEn:true,linkCatEn:true,linkCatVS:"None",objCatEn:true,objCatVS:"None",linkFEqLblRQ:true,linkToEqLblRQ:true,linkFrmEq:"",linkFrmEqDesc:"",linkToEq:"",linkToEqDesc:"",linkObjEq:"",linkObjEqDesc:"",linkFrmflLblV:false,linkFrmFlV:false,linkFrmFlDescV:false,linkToFlLblV:false,linkToFlV:false,linkToFlDescV:false,linkObjFlLblV:false,linkObjFlV:false,linkObjFlDescV:false,linkFrmEqLblV:true,linkFrmEqV:true,linkFrmEqDescV:true,linkToEqLblV:true,linkToEQV:true,linkToEqDescV:true,linkObjEqLblV:true,linkObjEqV:true,linkObjEqDescV:true,usrSts:"",stProfLblV:true,stsProf:"",stsProfV:true,stsProfDesc:"",stsProfDescV:true,stsObj:"",stsObjLblV:true,stsObjV:true,stsWoLblV:true,stsWoNoV:true,stsWoNo:"",LAM:[],Class:[],Char:[]};if(r.objCat==="E"){r.olData.linkCatEn=true;r.olData.linkFrmFlEn=false;r.olData.linkToFlEn=false;r.olData.linkObjFlEn=false;r.olData.linkFEqLblRQ=true;r.olData.linkToEqLblRQ=true;r.olData.linkFrmflLblV=false;r.olData.linkFrmFlV=false;r.olData.linkFrmFlDescV=false;r.olData.linkToFlLblV=false;r.olData.linkToFlV=false;r.olData.linkToFlDescV=false;r.olData.linkObjFlLblV=false;r.olData.linkObjFlV=false;r.olData.linkObjFlDescV=false;r.olData.linkCatVS="None";r.olData.objCatEn=true;r.olData.objCatVS="None";r.olData.linkFEqLblRQ=true;r.olData.linkToEqLblRQ=true;r.olData.linkFrmEq=n.Eqvon;r.olData.linkFrmEqDesc=n.Eqtxtf;r.olData.linkToEq=n.Eqnach;r.olData.linkToEqDesc=n.Eqtxtt;r.olData.linkObjEq=n.Eqkant;r.olData.linkObjEqDesc=n.Eqtxtl;r.olData.linkFrmflLblV=false;r.olData.linkFrmFlV=false;r.olData.linkFrmFlDescV=false;r.olData.linkToFlLblV=false;r.olData.linkToFlV=false;r.olData.linkToFlDescV=false;r.olData.linkObjFlLblV=false;r.olData.linkObjFlV=false;r.olData.linkObjFlDescV=false;r.olData.linkFrmEqLblV=true;r.olData.linkFrmEqV=true;r.olData.linkFrmEqDescV=true;r.olData.linkToEqLblV=true;r.olData.linkToEQV=true;r.olData.linkToEqDescV=true;r.olData.linkObjEqLblV=true;r.olData.linkObjEqV=true;r.olData.linkObjEqDescV=true;d(r.linkCat)}else if(r.objCat==="T"){r.olData.linkCatEn=true;r.olData.linkFromEQEn=false;r.olData.linkToEQEn=false;r.olData.linkObjEqEn=false;r.olData.linkFrmflLblRQ=true;r.olData.linkToFlLblRQ=true;r.olData.linkFrmEqLblV=false;r.olData.linkFrmEqV=false;r.olData.linkFrmEqDescV=false;r.olData.linkToEqLblV=false;r.olData.linkToEQV=false;r.olData.linkToEqDescV=false;r.olData.linkObjEqLblV=false;r.olData.linkObjEqV=false;r.olData.linkObjEqDescV=false;r.olData.linkCatVS="None";r.olData.objCatEn=true;r.olData.objCatVS="None";r.olData.linkFrmflLblRQ=true;r.olData.linkToFlLblRQ=true;r.olData.linkFrmFl=n.Tpvon;r.olData.linkFrmFlDesc=n.Fltxtf;r.olData.linkToFl=n.Tpnach;r.olData.linkToFlDesc=n.Fltxtt;r.olData.linkObjFl=n.Tpkant;r.olData.linkObjFlDesc=n.Fltxtl;r.olData.linkFrmflLblV=true;r.olData.linkFrmFlV=true;r.olData.linkFrmFlDescV=true;r.olData.linkToFlLblV=true;r.olData.linkToFlV=true;r.olData.linkToFlDescV=true;r.olData.linkObjFlLblV=true;r.olData.linkObjFlV=true;r.olData.linkObjFlDescV=true;r.olData.linkFrmEqLblV=false;r.olData.linkFrmEqV=false;r.olData.linkFrmEqDescV=false;r.olData.linkToEqLblV=false;r.olData.linkToEQV=false;r.olData.linkToEqDescV=false;r.olData.linkObjEqLblV=false;r.olData.linkObjEqV=false;r.olData.linkObjEqDescV=false;d(r.linkCat)}if(n.Bezarp==="2"){r.olData.twoWayRel=true;r.olData.oneWayRel=false}else if(n.Bezarp==="1"){r.olData.oneWayRel=true;r.olData.twoWayRel=false}if(n.Bezarl==="2"){r.olData.twoWayUsd=true;r.olData.oneWayUsd=false;r.olData.relNotUsd=false}else if(n.Bezarl==="1"){r.olData.oneWayUsd=true;r.olData.twoWayUsd=false;r.olData.relNotUsd=false}else if(n.Bezarl==="0"){r.olData.relNotUsd=true;r.olData.twoWayUsd=false;r.olData.oneWayUsd=false}var s=a.OLLAM.results;if(s){var o=new sap.ui.model.json.JSONModel;o.setData(s);r.olData.LAM=s}var i=a.OLClass.results;if(i){if(i.length>0){for(var c=0;c<i.length;c++){i[c].ctEnable=false;i[c].classEnable=false;i[c].ClassTypeDesc=i[c].ClassDesc;delete i[c].ClassDesc;delete i[c].Changerequestid;delete i[c].Clint;delete i[c].Service;i[c].classDelEnable=true}var p=new sap.ui.model.json.JSONModel;p.setData(i);r.olData.Class=i}}var u=a.OLVal.results;if(u){if(u.length>0){for(var g=0;g<u.length;g++){u[g].cNameEnable=false;delete u[g].Ataut;delete u[g].Ataw1;delete u[g].Atawe;delete u[g].Atcod;delete u[g].Atflb;delete u[g].Atflv;delete u[g].Atimb;delete u[g].Atsrt;delete u[g].Atvglart;delete u[g].Atzis;delete u[g].Changerequestid;delete u[g].CharName;delete u[g].Charid;delete u[g].Classtype;delete u[g].Service;delete u[g].Valcnt;u[g].slNo=g+1;u[g].flag=u[g].Class+"-"+u[g].slNo}var m=new sap.ui.model.json.JSONModel;m.setData(u);r.chData=u;r.olData.Char=u}for(var f=0;f<r.olData.Char.length;f++){var h=1;for(var S=0;S<r.olData.Char.length;S++){if(f===S){continue}if(r.olData.Char[S].Atnam===r.olData.Char[f].Atnam&&r.olData.Char[S].Class===r.olData.Char[f].Class){h++}}if(h>1){r.olData.Char[f].charDltEnable=true}else{r.olData.Char[f].charDltEnable=false}if(r.olData.Char[f].Atein===true){r.olData.Char[f].charAddEnable=false}}}}else{var t=r.getResourceBundle().getText("OL_EXIST_ERR");sap.m.MessageToast.show(t,{duration:5e3,animationDuration:5e3})}}r.BusyDialog.close()},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.BusyDialog.close();r.invokeMessage(l)}})},onCopyOLClose:function(){this.action="createOL";this._copyOLFragment.close()},CreatRow:function(e,t){var a=new sap.m.DatePicker;var r=a._oMaxDate;var n=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"MM/dd/yyyy"});var s=n.format(r);var o=r.getHours();var i=r.getMinutes();var d=r.getSeconds();var c=o+":"+i+":"+d;var p={grp:t,validFrm:l.currentDate(),header:[],mode:"create",Class:[],Char:[]};var u={link:t,linkCat:"",objCat:"",linkDesc:"",netId:"",sysStaus:"",userStatus:"",linkFrmEq:"",linkToEq:"",linkObjEq:"",linkFrmFloc:"",linkToFloc:"",linkObjFloc:"",linkNum:"1",autGrp:"",autGrpDesc:"",validFrm:l.currentDate(),timeFrm:l.getCurrentTime(),validTo:s,timeTo:c,medium:"",mediumDesc:"",twoWayRel:true,twoWayUsd:true,linkCatEn:true,objCatEn:true,linkFromEQEn:true,linkToEQEn:true,linkObjEqEn:true,linkFrmFlEn:true,linkToFlEn:true,linkObjFlEn:true,aEnModel:true,mode:"create",Class:[],Char:[]};if(e==="CreateWorkCenter"){var g=sap.ui.getCore().getModel("AIWListWCModel");var m=g.getData();var f={wc:"",wcDesc:"",plant:"",plantDesc:"",wcCat:"",wcCatDesc:"",person:"",personDesc:"",usg:"",usgDesc:"",stdVal:"",stdValDesc:"",ctrlKey:"",ctrlKeyDesc:"",wcValueState:"None",wcDescValueState:"None",plantValueState:"None",wcCatValueState:"None",personResValueState:"None",usgValueState:"None",stdValueState:"None",cntrlKeyValueState:"None",wcValueStateTxt:"",wcDescValueStateTxt:"",plantValueStateTxt:"",wcCatValueStateTxt:"",personResValueStateTxt:"",usgValueStateTxt:"",stdValueStateTxt:"",cntrlKeyValueStateTxt:"",mode:"create",Type:"X",wcEnable:true,plEnable:true,wcatEnable:true,classItems:[],characteristics:[],cost:[],capacity:[]};m.push(f);g.setData(m);this.getView().setModel(g,"AIWListWCModel");this.updateCount("workCenter",m)}else if(e==="CreateTaskList"){if(this.action.indexOf("GTL")>0){p.modeflag="Crt";p.typeFlag="G";p.PPenable=true;p.Grpenable=true;p.KDenable=true;var h=sap.ui.getCore().getModel("AIWListGTLModel");var S=h.getData();S.push(p);h.setData(S);h.setSizeLimit(S.length);this.getView().setModel(h,"AIWListGTLModel");this.updateCount("generalTL",S)}else if(this.action.indexOf("ETL")>0){p.equipment="";p.equipmentDesc="";p.equipmentVS="None";p.modeflag="Crt";p.typeFlag="E";p.Grpenable=true;p.KDenable=true;var T=sap.ui.getCore().getModel("AIWListETLModel");var M=T.getData();M.push(p);T.setData(M);T.setSizeLimit(M.length);this.getView().setModel(T,"AIWListETLModel");this.updateCount("equiTL",M)}else if(this.action.indexOf("FTL")>0){p.floc="";p.flocDesc="";p.flocVS="None";p.modeflag="Crt";p.typeFlag="F";p.Grpenable=true;p.KDenable=true;var b=sap.ui.getCore().getModel("AIWListFTLModel");var E=b.getData();E.push(p);b.setData(E);b.setSizeLimit(E.length);this.getView().setModel(b,"AIWListFTLModel");this.updateCount("flocTL",E)}}else if(e==="CreateObjectLink"){var v=sap.ui.getCore().getModel("AIWListOLModel");var C=v.getData();C.push(u);v.setData(C);v.setSizeLimit(C.length);this.getView().setModel(v,"AIWListOLModel");this.updateCount("objLink",C)}},onTLBasicSelect:function(e){var t=e.getSource().getSelectedContextPaths();var a=this.getView().getModel("aCounterModel");var r=this.getView().createId("tlMain");var l=sap.ui.core.Fragment.byId(r,"_iconTabBarTL").getSelectedKey();if(l==="GTLTab"){this.action="createGTL"}else if(l==="EqTLTab"){this.action="createETL"}else if(l==="FLOCTLTab"){this.action="createFTL"}if(this.action.indexOf("GTL")>0){var n=this.getView().getModel("AIWListGTLModel").getData();if(this.mode==="display"){a.getData().addGTLCounter=false;if(t.length!==1){this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var o=this.getView().getModel("GTLHeaderModel");o.setData(s);this.getView().setModel(o,"GTLHeaderModel")}else{this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var i=e.getSource().getSelectedContextPaths()[0];this.gtlPath=parseInt(i.substring(1));var o=this.getView().getModel("GTLHeaderModel");var d=[];for(var c=0;c<n.length;c++){if(this.gtlPath===c){if(n[c].header.length>0){for(var p=0;p<n[c].header.length;p++){n[c].header[p].enable=false}d.push(n[c].header)}}}o.setData(d);this.getView().setModel(o,"GTLHeaderModel");this.updateDeleteEnable("GTL",e)}}else{if(t.length!==1){a.getData().addGTLCounter=false;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var o=this.getView().getModel("GTLHeaderModel");o.setData(s);this.getView().setModel(o,"GTLHeaderModel");this.updateDeleteEnable("GTL",e)}else{a.getData().addGTLCounter=true;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var i=e.getSource().getSelectedContextPaths()[0];this.gtlPath=parseInt(i.substring(1));var o=this.getView().getModel("GTLHeaderModel");var d=[];for(var c=0;c<n.length;c++){if(this.gtlPath===c){if(n[c].header.length>0){d.push(n[c].header)}}}o.setData(d);this.getView().setModel(o,"GTLHeaderModel");this.updateDeleteEnable("GTL",e)}}}else if(this.action.indexOf("ETL")>0){var u=this.getView().getModel("AIWListETLModel").getData();if(this.mode==="display"){a.getData().addETLCounter=false;if(t.length!==1){this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var g=this.getView().getModel("ETLHeaderModel");g.setData(s);this.getView().setModel(g,"ETLHeaderModel")}else{this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var i=e.getSource().getSelectedContextPaths()[0];this.etlPath=parseInt(i.substring(1));var g=this.getView().getModel("ETLHeaderModel");var m=[];for(var c=0;c<u.length;c++){if(this.etlPath===c){if(u[c].header.length>0){for(var p=0;p<u[c].header.length;p++){u[c].header[p].enable=false}m.push(u[c].header)}}}g.setData(m);this.getView().setModel(g,"ETLHeaderModel");this.updateDeleteEnable("ETL",e)}}else{if(t.length!==1){a.getData().addETLCounter=false;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var g=this.getView().getModel("ETLHeaderModel");g.setData(s);this.getView().setModel(g,"ETLHeaderModel");this.updateDeleteEnable("ETL",e)}else{var i=e.getSource().getSelectedContextPaths()[0];this.etlPath=parseInt(i.substring(1));if(u[this.etlPath].equipment!==""&&u[this.etlPath].equipmentVS!=="Error"){a.getData().addETLCounter=true;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var g=this.getView().getModel("ETLHeaderModel");var m=[];for(var c=0;c<u.length;c++){if(this.etlPath===c){if(u[c].header.length>0){m.push(u[c].header)}}}g.setData(m);this.getView().setModel(g,"ETLHeaderModel")}else{u[this.etlPath].equipmentVS="Error";this.getView().getModel("AIWListETLModel").refresh()}this.updateDeleteEnable("ETL",e)}}}else if(this.action.indexOf("FTL")>0){var f=this.getView().getModel("AIWListFTLModel").getData();if(this.mode==="display"){a.getData().addFTLCounter=false;if(t.length!==1){this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var h=this.getView().getModel("FTLHeaderModel");h.setData(s);this.getView().setModel(h,"FTLHeaderModel")}else{this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var i=e.getSource().getSelectedContextPaths()[0];this.ftlPath=parseInt(i.substring(1));var h=this.getView().getModel("FTLHeaderModel");var S=[];for(var c=0;c<f.length;c++){if(this.ftlPath===c){if(f[c].header.length>0){for(var p=0;p<f[c].header.length;p++){f[c].header[p].enable=false}S.push(f[c].header)}}}h.setData(S);this.getView().setModel(h,"FTLHeaderModel");this.updateDeleteEnable("FTL",e)}}else{if(t.length!==1){a.getData().addFTLCounter=false;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var s=[];var h=this.getView().getModel("FTLHeaderModel");h.setData(s);this.getView().setModel(h,"FTLHeaderModel");this.updateDeleteEnable("FTL",e)}else{var i=e.getSource().getSelectedContextPaths()[0];this.ftlPath=parseInt(i.substring(1));if(f[this.ftlPath].floc!==""&&f[this.ftlPath].flocVS!=="Error"){a.getData().addFTLCounter=true;this.getView().setModel(a,"aCounterModel");this.getView().getModel("aCounterModel").refresh();var h=this.getView().getModel("FTLHeaderModel");var S=[];for(var c=0;c<f.length;c++){if(this.ftlPath===c){if(f[c].header.length>0){S.push(f[c].header)}}}h.setData(S);this.getView().setModel(h,"FTLHeaderModel")}else{f[this.ftlPath].flocVS="Error";this.getView().getModel("AIWListFTLModel").refresh()}this.updateDeleteEnable("FTL",e)}}}},onCopyOLChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l;var n=e.getSource().getId();if(a!==""){if(a===undefined)return;var s=a.toUpperCase();var o=[new sap.ui.model.Filter("Kante","EQ",s)];r.read("/ObjLinkSet",{filters:o,success:function(e){if(e.results.length>0){sap.ui.getCore().byId(n).setValue(e.results[0].Kante);sap.ui.getCore().byId(n).setValueState("None");sap.ui.getCore().byId(n).setValueStateText("")}else{sap.ui.getCore().byId(n).setValueState("Error")}},error:function(e){sap.ui.getCore().byId(n).setValueState("Error")}})}},onCopyTLChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l;var n;var s=e.getSource().getId();if(a!==""){if(a===undefined)return;var o=a.toUpperCase();if(this.action==="copyGTL"){n=[new sap.ui.model.Filter("Plnty","EQ","A"),new sap.ui.model.Filter("Plnnr","EQ",o)]}else if(this.action==="copyETL"){n=[new sap.ui.model.Filter("Plnty","EQ","E"),new sap.ui.model.Filter("Plnnr","EQ",o)]}else if(this.action==="copyFTL"){n=[new sap.ui.model.Filter("Plnty","EQ","T"),new sap.ui.model.Filter("Plnnr","EQ",o)]}r.read("/TLGroupVhSet",{filters:n,success:function(e){if(e.results.length>0){sap.ui.getCore().byId(s).setValue(e.results[0].Plnnr);sap.ui.getCore().byId(s).setValueState("None");sap.ui.getCore().byId(s).setValueStateText("")}else{sap.ui.getCore().byId(s).setValueState("Error")}},error:function(e){sap.ui.getCore().byId(s).setValueState("Error")}})}},readLinkCat:function(){var e=this;var a=this.getView().getModel("valueHelp");var r=new t([]);a.read("/LinkCatValueHelpSet",{success:function(t){var a=[];for(var l=0;l<t.results.length;l++){a.push(t.results[l])}r.setData(a);e.getView().setModel(r,"linkCatModel");sap.ui.getCore().setModel(r,"linkCatModel")},error:function(t){var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");e.invokeMessage(l)}})},readObjCat:function(){var e=this;var a=this.getView().getModel("valueHelp");var r=new t([]);a.read("/LinkobjcatSet",{success:function(t){var a=[];for(var l=0;l<t.results.length;l++){a.push(t.results[l])}r.setData(a);e.getView().setModel(r,"objCatModel");sap.ui.getCore().setModel(r,"objCatModel")},error:function(t){var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");e.invokeMessage(l)}})},onItemPress:function(e){var t;if(this.mode==="display"){var a=this.getView().byId("_iconTabBar").getSelectedKey();if(a==="WCTab"){var r=" ";var l=" ";t=e.getSource().getBindingContext("AIWListWCModel").sPath;var n=this.getView().getModel("AIWListWCModel").getData();if(n.length>0){if(n[t.substr(1)].wc!==""){r=n[t.substr(1)].wc}if(n[t.substr(1)].plant!==""){l=n[t.substr(1)].plant}}this.getRouter().navTo("wcDetail",{itemPath:encodeURIComponent(t),action:"approveWC",wc:r,status:" ",plant:l,mode:this.mode})}else if(a==="TLTab"){var s=this.getView().createId("tlMain");var o=sap.ui.core.Fragment.byId(s,"_iconTabBarTL").getSelectedKey();if(o==="GTLTab"){var i=e.getSource().getBindingContext("GTLHeaderModel").sPath;t="/"+this.gtlPath+i.substr(2,4);this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:"approveGTL",group:" ",tlType:"A",status:" ",mode:this.mode})}else if(o==="EqTLTab"){var i=e.getSource().getBindingContext("ETLHeaderModel").sPath;t="/"+this.etlPath+i.substr(2,4);this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:"approveETL",group:" ",tlType:"E",status:" ",mode:this.mode})}else if(o==="FLOCTLTab"){var i=e.getSource().getBindingContext("FTLHeaderModel").sPath;t="/"+this.ftlPath+i.substr(2,4);this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:"approveFTL",group:" ",tlType:"T",status:" ",mode:this.mode})}}else if(a==="OLTab"){t=e.getSource().getBindingContext("AIWListOLModel").sPath;this.getRouter().navTo("olDetail",{itemPath:encodeURIComponent(t),action:" ",link:" ",status:" ",mode:this.mode})}}else{if(this.action.indexOf("WC")!==-1){var r=" ";var l=" ";t=e.getSource().getBindingContext("AIWListWCModel").sPath;var n=this.getView().getModel("AIWListWCModel").getData();if(n.length>0){if(n[t.substr(1)].wc!==""){r=n[t.substr(1)].wc}if(n[t.substr(1)].plant!==""){l=n[t.substr(1)].plant}}var d="createWC";this.getRouter().navTo("wcDetail",{itemPath:encodeURIComponent(t),action:d,wc:r,status:" ",plant:l,mode:this.mode})}else if(this.action.indexOf("GTL")!==-1){var c=sap.ui.getCore().getModel("AIWListGTLModel");var p=c.getData();sap.ui.getCore().setModel(c,"AIWListGTLModel");var i=e.getSource().getBindingContext("GTLHeaderModel").sPath;t="/"+this.gtlPath+i.substr(2,4);var d="createGTL";var u=p[this.gtlPath].grp;this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:d,group:" ",tlType:"A",status:" ",mode:this.mode})}else if(this.action.indexOf("ETL")!==-1){var g=sap.ui.getCore().getModel("AIWListETLModel");var m=g.getData();sap.ui.getCore().setModel(g,"AIWListETLModel");var i=e.getSource().getBindingContext("ETLHeaderModel").sPath;t="/"+this.etlPath+i.substr(2,4);var d="createETL";var u=m[this.etlPath].grp;this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:d,group:u,tlType:"E",status:" ",mode:this.mode})}else if(this.action.indexOf("FTL")!==-1){var f=sap.ui.getCore().getModel("AIWListFTLModel");var h=f.getData();sap.ui.getCore().setModel(f,"AIWListFTLModel");var i=e.getSource().getBindingContext("FTLHeaderModel").sPath;t="/"+this.ftlPath+i.substr(2,4);var u=h[this.ftlPath].grp;var d="createFTL";this.getRouter().navTo("tlDetail",{itemPath:encodeURIComponent(t),action:d,group:u,tlType:"T",status:" ",mode:this.mode})}else if(this.action.indexOf("OL")!==-1){t=e.getSource().getBindingContext("AIWListOLModel").sPath;var d="createOL";this.getRouter().navTo("olDetail",{itemPath:encodeURIComponent(t),action:d,link:" ",status:" ",mode:this.mode})}}},readStatusProfOL:function(e,t){var a=this;var r=sap.ui.getCore().getModel("AIWListOLModel");var l=this.getView().getModel();var n="/DeriveOLstatusSet(Netyp='"+e+"',Lvorm=false)";l.read(n,{success:function(e){if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){t[a.sindex].usrSts=e.Usta_oln;t[a.sindex].stProfLblV=true;t[a.sindex].stsProf=e.Stsm_oln;t[a.sindex].stsProfV=true;t[a.sindex].stsProfDesc=e.Statproftxt;t[a.sindex].stsProfDescV=true;t[a.sindex].stsObj=e.Ustw_oln;t[a.sindex].stsObjLblV=true;t[a.sindex].stsObjV=true;t[a.sindex].stsWoLblV=true;t[a.sindex].stsWoNoV=true;t[a.sindex].stsWoNo=e.Uswo_oln;t[a.sindex].sysSts=e.Stattext}else{t[a.sindex].stProfLblV=false;t[a.sindex].stsProfV=false;t[a.sindex].stsProfDescV=false;t[a.sindex].stsObjLblV=false;t[a.sindex].stsObjV=false;t[a.sindex].stsWoLblV=false;t[a.sindex].stsWoNoV=false;t[a.sindex].usrSts="";t[a.sindex].stsProf="";t[a.sindex].stsProfDesc="";t[a.sindex].stsObj="";t[a.sindex].stsWoNo=""}r.setData(t)},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){t[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=t.join("\n");a.invokeMessage(l)}})},invokeMessage:function(e){this.createMessagePopover([{title:e,type:"Error"}],false)},handleWCTLOLValidation:function(e,t,a,r,l){var e=sap.ui.getCore().getModel("AIWListWCModel").getData();var t=sap.ui.getCore().getModel("AIWListGTLModel").getData();var a=sap.ui.getCore().getModel("AIWListETLModel").getData();var r=sap.ui.getCore().getModel("AIWListFTLModel").getData();var l=sap.ui.getCore().getModel("AIWListOLModel").getData();var n="";var s=this;if(e.length>0||t.length>0||a.length>0||r.length>0||l.length>0){for(var o=0;o<e.length;o++){if(e[o].wc===""||e[o].wcValueState==="Error"){s.errorFlag=false;e[o].wcValueState="Error";n=this.getResourceBundle().getText("emptyWC")}if(e[o].plant===""||e[o].plantValueState==="Error"){s.errorFlag=false;e[o].plantValueState="Error";n=this.getResourceBundle().getText("emptyWC")}}if(n!==""){this.MessageList.push({type:"Error",title:n});n=""}for(var o=0;o<t.length;o++){for(var i=0;i<t[o].header.length;i++){if(t[o].header[i].Iwerk===""||t[o].header[i].planningPlantValueState==="Error"){s.errorFlag=false;t[o].header[i].planningPlantValueState="Error";n=this.getResourceBundle().getText("emptyGTL")}if(t[o].header[i].Statu===""||t[o].header[i].statusVS==="Error"){s.errorFlag=false;t[o].header[i].statusVS="Error";n=this.getResourceBundle().getText("emptyGTL")}if(t[o].header[i].Ktext===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyGTL")}}}if(n!==""){this.MessageList.push({type:"Error",title:n});n=""}for(var o=0;o<a.length;o++){if(a[o].equipment===""||a[o].equipmentVS==="Error"){s.errorFlag=false;a[o].equipmentVS="Error";n=this.getResourceBundle().getText("emptyETL")}for(var i=0;i<a[o].header.length;i++){if(a[o].header[i].Iwerk===""||a[o].header[i].planningPlantValueState==="Error"){s.errorFlag=false;a[o].header[i].planningPlantValueState="Error";n=this.getResourceBundle().getText("emptyETL")}if(a[o].header[i].Statu===""||a[o].header[i].statusVS==="Error"){s.errorFlag=false;a[o].header[i].statusVS="Error";n=this.getResourceBundle().getText("emptyETL")}if(a[o].header[i].Ktext===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyETL")}}}if(n!==""){this.MessageList.push({type:"Error",title:n});n=""}for(var o=0;o<r.length;o++){if(r[o].floc===""||r[o].flocVS==="Error"){s.errorFlag=false;r[o].flocVS="Error";n=this.getResourceBundle().getText("emptyFTL")}for(var i=0;i<r[o].header.length;i++){if(r[o].header[i].Statu===""||r[o].header[i].statusVS==="Error"){s.errorFlag=false;r[o].header[i].statusVS="Error";n=this.getResourceBundle().getText("emptyFTL")}if(r[o].header[i].Iwerk===""||r[o].header[i].planningPlantValueState==="Error"){s.errorFlag=false;r[o].header[i].planningPlantValueState="Error";n=this.getResourceBundle().getText("emptyFTL")}if(r[o].header[i].Ktext===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyFTL")}}}if(n!==""){this.MessageList.push({type:"Error",title:n});n=""}for(var o=0;o<l.length;o++){if(l[o].linkCat===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyOL")}if(l[o].objCat===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyOL")}if(l[o].linkDesc===""){s.errorFlag=false;n=this.getResourceBundle().getText("emptyOL");l[o].linkDescVS="Error";sap.ui.getCore().getModel("AIWListOLModel").refresh()}}if(n!==""){this.MessageList.push({type:"Error",title:n});n=""}}if(!s.errorFlag){sap.ui.getCore().getModel("AIWListWCModel").refresh();sap.ui.getCore().getModel("AIWListGTLModel").refresh();sap.ui.getCore().getModel("AIWListETLModel").refresh();sap.ui.getCore().getModel("AIWListFTLModel").refresh();sap.ui.getCore().getModel("AIWListOLModel").refresh();if(this.getView().getModel("GTLHeaderModel")!==undefined){this.getView().getModel("GTLHeaderModel").refresh()}if(this.getView().getModel("ETLHeaderModel")!==undefined){this.getView().getModel("ETLHeaderModel").refresh()}if(this.getView().getModel("FTLHeaderModel")!==undefined){this.getView().getModel("FTLHeaderModel").refresh()}}},dataIsEmpty:function(){var e="";this.errorFlag=true;var t=sap.ui.getCore().getModel(this.oModelAIWFLOC).getData();var a=sap.ui.getCore().getModel(this.oModelAIWEQUI).getData();var r=sap.ui.getCore().getModel(this.oModelAIWMSPT).getData();var l=sap.ui.getCore().getModel(this.oModelAIWMPMI).getData();var n=sap.ui.getCore().getModel("AIWListMatModel").getData();var s=sap.ui.getCore().getModel("AIWListEqModel").getData();var o=sap.ui.getCore().getModel("AIWListFLModel").getData();var i=sap.ui.getCore().getModel("AIWListWBSModel").getData();var d=sap.ui.getCore().getModel("AIWListONModel").getData();var c=sap.ui.getCore().getModel("AIWListWCModel").getData();var p=sap.ui.getCore().getModel("AIWListGTLModel").getData();var u=sap.ui.getCore().getModel("AIWListETLModel").getData();var g=sap.ui.getCore().getModel("AIWListFTLModel").getData();var m=sap.ui.getCore().getModel("AIWListOLModel").getData();if(t.length===0&&a.length===0&&r.length===0&&l.length===0&&n.length===0&&s.length===0&&o.length===0&&i.length===0&&d.length===0&&c.length===0&&p.length===0&&u.length===0&&g.length===0&&m.length===0){e=this.getResourceBundle().getText("objErrorTxt");this.errorFlag=false;this.MessageList.push({type:"Error",title:e});sap.ui.getCore().getModel("AIWListMatModel").refresh();sap.ui.getCore().getModel("AIWListEqModel").refresh();sap.ui.getCore().getModel("AIWListFLModel").refresh();sap.ui.getCore().getModel("AIWListWBSModel").refresh();sap.ui.getCore().getModel("AIWListONModel").refresh();sap.ui.getCore().getModel("AIWListWCModel").refresh();sap.ui.getCore().getModel("AIWListGTLModel").refresh();sap.ui.getCore().getModel("AIWListETLModel").refresh();sap.ui.getCore().getModel("AIWListFTLModel").refresh();sap.ui.getCore().getModel("AIWListOLModel").refresh();sap.ui.getCore().getModel(this.oModelAIWFLOC).refresh();sap.ui.getCore().getModel(this.oModelAIWEQUI).refresh();sap.ui.getCore().getModel(this.oModelAIWMSPT).refresh();sap.ui.getCore().getModel(this.oModelAIWMPMI).refresh()}var f=this.getView().byId("Description");var h=this.getResourceBundle().getText("descError");if(f.getValue()===""){this.errorFlag=false;this.MessageList.push({type:"Error",title:h})}},onSave:function(e){var t=this;var a=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();var r=sap.ui.getCore().getModel(t.oModelAIWEQUI).getData();var n=sap.ui.getCore().getModel(t.oModelAIWMSPT).getData();var s=sap.ui.getCore().getModel(t.oModelAIWMPMI).getData();var o=sap.ui.getCore().getModel("AIWListMatModel").getData();var i=sap.ui.getCore().getModel("AIWListEqModel").getData();var d=sap.ui.getCore().getModel("AIWListFLModel").getData();var c=sap.ui.getCore().getModel("AIWListWBSModel").getData();var p=sap.ui.getCore().getModel("AIWListONModel").getData();var u=sap.ui.getCore().getModel("AIWListWCModel").getData();var g=sap.ui.getCore().getModel("AIWListGTLModel").getData();var m=sap.ui.getCore().getModel("AIWListETLModel").getData();var f=sap.ui.getCore().getModel("AIWListFTLModel").getData();var h=sap.ui.getCore().getModel("AIWListOLModel").getData();var S={ChangeRequestType:this.getCrType(),CrDescription:this.getView().byId("Description").getValue(),Duedate:t._formatDate(this.getView().byId("idDueDate").getDateValue()),Priority:this.getView().byId("idPriority").getSelectedKey(),Notes:this.getView().getModel("notes").getData().items,Reason:this.getView().byId("reasonForRequest").getSelectedKey(),Guids:this.oAttach,IsDraft:"X",Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqDFPS:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],ClassWC:[],ValueWC:[],GTList:[],GTOprs:[],GTComp:[],GTMPack:[],GTRel:[],GTSpack:[],GTPRT:[],GTInsp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETMPack:[],ETRel:[],ETSpack:[],ETPRT:[],ETInsp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTMPack:[],FTRel:[],FTSpack:[],FTPRT:[],FTInsp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],FLLAMCH:[],EqLAMCH:[]};if(this.oAttach.length===0||this.oAttach===undefined){delete S.Guids}if(a.length>0){var T=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var M=0;M<a.length;M++){var b={Tplnr:a[M].Functionallocation,Txtmi:a[M].Flocdescription,TplkzFlc:a[M].Strucindicator,Tplxt:a[M].StrucIndicatorDesc,EditMask:a[M].EditMask,Hierarchy:a[M].Hierarchy,Fltyp:a[M].Floccategory,Flttx:a[M].FlocCategoryDesc,Swerk:a[M].Maintplant,Plantname:a[M].MaintplantDesc,StorFloc:a[M].Location,Locationdesc:a[M].Locationdesc,Abckzfloc:a[M].Abckz,Abctx:a[M].Abctx,Bukrsfloc:a[M].Bukrs,Butxt:a[M].Butxt,City:a[M].City,KostFloc:a[M].Kostl,KokrFloc:a[M].Kokrs,Contareaname:a[M].Mctxt,PlntFloc:a[M].Werks,Planningplantdes:a[M].Planningplantdes,Ingrp:a[M].Ingrp,Plannergrpdesc:a[M].Innam,Arbplfloc:a[M].Arbpl,Wergwfloc:a[M].WcWerks,Gewrkfloc:a[M].MainArbpl,MainWcPlant:a[M].MainWerks,Tplma:a[M].SupFunctionallocation,Supflocdesc:a[M].SupFlocdescription,BeberFl:a[M].BeberFl,Fing:a[M].Fing,Tele:a[M].Tele,Submtiflo:a[M].ConstrType,Constdesc:a[M].ConstructionDesc,Eqart:a[M].TechnicalObjectTyp,Eartx:a[M].Description,Stattext:a[M].Stattext,StsmFloc:a[M].StsmEqui,Statproftxt:a[M].StsmEquiDesc,UstwFloc:a[M].UstwEqui,UswoFloc:a[M].UswoEqui,UstaFloc:a[M].UstaEqui,Adrnr:a[M].Adrnr,Adrnri:a[M].Adrnri,Deact:a[M].Deact,Type:a[M].viewParameter==="create"?true:false,Modeldesc:a[M].Modeldesc,Modelref:a[M].Modelref,Modelrver:a[M].Modelrver,Modelext:a[M].Modelext,Modelname:a[M].Modelname,Modelver:a[M].Modelver};if(T&&T.length>0){var E=T[M].DOI;b.Swerki=E[0].instLoc?"H":E[0].maintenance?"D":"";b.Storti=E[1].instLoc?"H":E[1].maintenance?"D":"";b.Beberi=E[2].instLoc?"H":E[2].maintenance?"D":"";b.Ppsidi=E[3].instLoc?"H":E[3].maintenance?"D":"";b.Abckzi=E[4].instLoc?"H":E[4].maintenance?"D":"";b.Bukrsi=E[5].instLoc?"H":E[5].maintenance?"D":"";b.Kostli=E[6].instLoc?"H":E[6].maintenance?"D":"";b.Kokrsi=E[7].instLoc?"H":E[7].maintenance?"D":"";b.Iwerki=E[8].instLoc?"H":E[8].maintenance?"D":"";b.Ingrpi=E[9].instLoc?"H":E[9].maintenance?"D":"";b.Lgwidi=E[10].instLoc?"H":E[10].maintenance?"D":"";b.Adrnri=E[12].instLoc?"H":E[12].maintenance?"D":""}S.FuncLoc.push(b);var v={Funcloc:a[M].Functionallocation,Title:a[M].TitleCode,Name1:a[M].Name1,Name2:a[M].Name2,Name3:a[M].Name3,Name4:a[M].Name4,Sort1:a[M].Sort1,Sort2:a[M].Sort2,NameCo:a[M].NameCo,PostCod1:a[M].PostCod1,City1:a[M].City1,Building:a[M].Building,Floor:a[M].Floor,Roomnum:a[M].Roomnum,Strsuppl1:a[M].Strsuppl1,Strsuppl2:a[M].Strsuppl2,Strsuppl3:a[M].Strsuppl3,Location:a[M].AddrLocation,RPostafl:a[M].RefPosta,Landx:a[M].Landx,TimeZone:a[M].TimeZone,RPostFl:a[M].Region,Regiotxt:a[M].RegionDesc};S.FLAddr.push(v);var C=a[M].intlAddr;if(C){for(var x=0;x<C.length;x++){S.FLAddrI.push(C[x])}}if(t.AltLblDerv==="2"&&a[M].altlbl){for(var V=0;V<a[M].altlbl.length;V++){var P={Funcloc:a[M].Functionallocation,AltAlkey:a[M].altlbl[V].AltAlkey,AltStrno:a[M].altlbl[V].AltStrno,AltTplkz:a[M].altlbl[V].AltTplkz};S.FLALTLBEL.push(P)}}if(a[M].Floccategory==="L"&&a[M].lam){var I={Funcloc:a[M].Functionallocation,Lrpid:a[M].lam.Lrpid,Strtptatr:a[M].lam.Strtptatr,Endptatr:a[M].lam.Endptatr,Length:a[M].lam.Length,LinUnit:a[M].lam.LinUnit,Startmrkr:a[M].lam.Startmrkr,Endmrkr:a[M].lam.Endmrkr,Mrkdisst:a[M].lam.Mrkdisst,Mrkdisend:a[M].lam.Mrkdisend,MrkrUnit:a[M].lam.MrkrUnit};S.FLLAM.push(I)}var L=a[M].classItems;if(L){if(L.length>0){for(var y=0;y<L.length;y++){var D={Funcloc:a[M].Functionallocation,Classtype:L[y].Classtype,Class:L[y].Class,Clstatus1:L[y].Clstatus1};S.FLClass.push(D)}}}var k=a[M].characteristics;if(k){if(k.length>0){for(var F=0;F<k.length;F++){var A={Funcloc:a[M].Functionallocation,Atnam:k[F].Atnam,Textbez:k[F].Textbez,Atwrt:k[F].Atwrt,Class:k[F].Class};S.FLVal.push(A)}}}var w=a[M].linearChar;if(w){if(w.length>0){var q=$.map(w,function(e){return $.extend(true,{},e)});for(var F=0;F<q.length;F++){delete q[F].linCharEnable;q[F].Funcloc=a[M].Functionallocation;S.FLLAMCH.push(q[F])}}}}}if(r.length>0){for(var W=0;W<r.length;W++){var B=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;var N={Herst:r[W].Herst,Equnr:r[W].Equnr,Txtmi:r[W].Eqktx,Swerk:r[W].Maintplant,Name1:r[W].MaintplantDesc,TplnEilo:r[W].Tplnr,Flocdescription:r[W].Pltxt,Eqtyp:r[W].EquipmentCatogory,Etytx:r[W].EquipCatgDescription,Eqart:r[W].TechnicalObjectTyp,Eartx:r[W].Description,Typbz:r[W].Typbz,SubmEeqz:r[W].ConstrType,Constdesc:r[W].ConstructionDesc,BukrEilo:r[W].Bukrs,Butxt:r[W].Butxt,HequEeqz:r[W].SuperordinateEquip,SuperordEqDes:r[W].SuperordinateEquipDesc,TidnEeqz:r[W].TechIdNum,KostEilo:r[W].Kostl,KokrEilo:r[W].Kokrs,Contareaname:r[W].Mctxt,StorEilo:r[W].Location,Locationdesc:r[W].Locationdesc,AbckEilo:r[W].Abckz,Abctx:r[W].Abctx,PplaEeqz:r[W].Werks,Planningplantdes:r[W].Planningplantdes,IngrEeqz:r[W].Ingrp,Plannergrpdesc:r[W].Innam,Serge:r[W].Serge,MapaEeqz:r[W].MapaEeqz,Stattext:r[W].Stattext,StsmEqui:r[W].StsmEqui,Statproftxt:r[W].StsmEquiDesc,UstwEqui:r[W].UstwEqui,UswoEqui:r[W].UswoEqui,UstaEqui:r[W].UstaEqui,Deact:r[W].Deact,Answt:r[W].Answt,Ansdt:t._formatDate(r[W].Ansdt),Waers:r[W].Waers,ArbpEilo:r[W].Arbpl,WorkCenterPlant:r[W].WcWerks,ArbpEeqz:r[W].MainArbpl,MainWcPlant:r[W].MainWerks,BebeEilo:r[W].BeberFl,Fing:r[W].Fing,Tele:r[W].Tele,HeqnEeqz:r[W].EquipPosition,Adrnr:r[W].Adrnr,Adrnri:r[W].Adrnri,Funcid:r[W].Funcid,Frcfit:r[W].Frcfit,Frcrmv:r[W].Frcrmv,Modelid:"",Type:r[W].viewParameter==="create"?true:false};if(B&&B.length>0){var E=B[W].DOI;N.Swerki=E[0].instLoc?"R":E[0].maintenance?"D":"";N.Storti=E[1].instLoc?"R":E[1].maintenance?"D":"";N.Beberi=E[2].instLoc?"R":E[2].maintenance?"D":"";N.Ppsidi=E[3].instLoc?"R":E[3].maintenance?"D":"";N.Abckzi=E[4].instLoc?"R":E[4].maintenance?"D":"";N.Kostli=E[5].instLoc?"R":E[5].maintenance?"D":"";N.Iwerki=E[6].instLoc?"R":E[6].maintenance?"D":"";N.Ingrpi=E[7].instLoc?"R":E[7].maintenance?"D":"";N.Gewrki=E[8].instLoc?"R":E[8].maintenance?"D":"";N.Adrnri=E[10].instLoc?"R":E[10].maintenance?"D":""}S.Equipment.push(N);var O={Equi:r[W].Equnr,PlanvPrt:r[W].PlanvPrt,SteufPrt:r[W].SteufPrt,KtschPrt:r[W].KtschPrt,Ewformprt:r[W].Ewformprt,SteufRef:r[W].SteufRef,KtschRef:r[W].KtschRef,EwformRef:r[W].EwformRef};S.EqPRT.push(O);if(r[W].EquipmentCatogory==="L"&&r[W].lam){var R={Equi:r[W].Equnr,Lrpid:r[W].lam.Lrpid,Strtptatr:r[W].lam.Strtptatr,Endptatr:r[W].lam.Endptatr,Length:r[W].lam.Length,LinUnit:r[W].lam.LinUnit,Startmrkr:r[W].lam.Startmrkr,Endmrkr:r[W].lam.Endmrkr,Mrkdisst:r[W].lam.Mrkdisst,Mrkdisend:r[W].lam.Mrkdisend,MrkrUnit:r[W].lam.MrkrUnit};S.EqLAM.push(R)}var U={Equi:r[W].Equnr,Title:r[W].TitleCode,Name1:r[W].Name1,Name2:r[W].Name2,Name3:r[W].Name3,Name4:r[W].Name4,Sort1:r[W].Sort1,Sort2:r[W].Sort2,NameCo:r[W].NameCo,PostCod1:r[W].PostCod1,City1:r[W].City1,Building:r[W].Building,Floor:r[W].Floor,Roomnum:r[W].Roomnum,Strsuppl1:r[W].Strsuppl1,Strsuppl2:r[W].Strsuppl2,Strsuppl3:r[W].Strsuppl3,Location:r[W].AddrLocation,RefPosta:r[W].RefPosta,Landx:r[W].Landx,TimeZone:r[W].TimeZone,RfePost:r[W].Region,Regiotxt:r[W].RegionDesc};S.EqAddr.push(U);var C=r[W].intlAddr;if(C){for(var x=0;x<C.length;x++){S.EqAddrI.push(C[x])}}if(r[W].dfps){var z={Equi:r[W].Equnr,DeviceId:r[W].dfps.Tailno,Topsiteid:r[W].dfps.Area,Topsitede:r[W].dfps.AreaDesc,AreaPro:r[W].dfps.AreaPrfl,SiteId:r[W].dfps.Site,SiteDesc:r[W].dfps.SiteDesc,SitePro:r[W].dfps.SitePrfl,MpoId:r[W].dfps.MPO,MpoDescr:r[W].dfps.MPODesc,RicId:r[W].dfps.RIC,RicDescr:r[W].dfps.RICDesc,ModelId:r[W].dfps.ModelId,ModelDes:r[W].dfps.ModelIdDesc,Foreignob:l.truetoX(r[W].dfps.ForeignEq),TecState:r[W].dfps.TechSts,DepState:r[W].dfps.OperSts,DfpsRmrk:r[W].dfps.Remark};S.EqDFPS.push(z)}var K=r[W].classItems;if(K){if(K.length>0){for(var H=0;H<K.length;H++){var G={Equi:r[W].Equnr,Classtype:K[H].Classtype,Class:K[H].Class,Clstatus1:K[H].Clstatus1};S.EqClass.push(G)}}}var j=r[W].characteristics;if(j){if(j.length>0){for(var Q=0;Q<j.length;Q++){var _={Equi:r[W].Equnr,Atnam:j[Q].Atnam,Textbez:j[Q].Textbez,Atwrt:j[Q].Atwrt,Class:j[Q].Class};S.EqVal.push(_)}}}var w=r[W].linearChar;if(w){if(w.length>0){var q=$.map(w,function(e){return $.extend(true,{},e)});for(var F=0;F<q.length;F++){delete q[F].linCharEnable;q[F].Equi=r[W].Equnr;S.EqLAMCH.push(q[F])}}}var J=sap.ui.getCore().getModel("ainMOP").getData();if(J){for(var x=0;x<J.length;x++){if(N.Equnr===J[x].key){N.Modelid=J[x].AIN.Modelid}}}}}if(n.length>0){for(var Z=0;Z<n.length;Z++){var X={Point:n[Z].Mspoint,Equnr:n[Z].Equnr,Eqktx:n[Z].Eqktx,Tplnr:n[Z].Tplnr,Floctxt:n[Z].Pltxt,Mptyp:n[Z].Mptyp,Mpttx:n[Z].Mpttx,Codgr:n[Z].Codgr,Codgrtxt:n[Z].Codgrtxt,ObtypMs:n[Z].ObtypMs,Objtypetxt:n[Z].Txt,AtnamMs:n[Z].AtnamMs,Atbez:n[Z].Atbez,Indct:n[Z].Indct,Cdsuf:n[Z].Cdsuf,Cjumc:n[Z].Cjumc,Desir:n[Z].Desir,Pyeac:n[Z].Pyeac,Mrmin:n[Z].Mrmin,Mrmax:n[Z].Mrmax,Pttxt:n[Z].Pttxt,Psort:n[Z].Psort,Inact:n[Z].Inact,Mseh6:n[Z].Mseh6,Msehl:n[Z].Msehl,Decim:n[Z].Decim.toString(),Locas:n[Z].Locas,Maktx:n[Z].Maktx,Begru:n[Z].Begru,Begtx:n[Z].Begtx,Expon:n[Z].Expon,Mrngu:n[Z].Mrngu,Dstxt:n[Z].Dstxt,Indrv:n[Z].Indrv,Indtr:n[Z].readTransfSel,Trans:n[Z].readTransf,Type:n[Z].viewParameter==="create"?true:false};S.MSPoint.push(X);if(n[Z].Mptyp==="L"&&n[Z].lam){var Y={Mspoint:n[Z].Mspoint,Lrpid:n[Z].lam.Lrpid,Strtptatr:n[Z].lam.Strtptatr,Endptatr:n[Z].lam.Endptatr,Length:n[Z].lam.Length,LinUnit:n[Z].lam.LinUnit,Startmrkr:n[Z].lam.Startmrkr,Endmrkr:n[Z].lam.Endmrkr,Mrkdisst:n[Z].lam.Mrkdisst,Mrkdisend:n[Z].lam.Mrkdisend,MrkrUnit:n[Z].lam.MrkrUnit};S.MSLAM.push(Y)}var ee=n[Z].classItems;if(ee){if(ee.length>0){for(var te=0;te<ee.length;te++){var ae={Mspoint:n[Z].Mspoint,Classtype:ee[te].Classtype,Class:ee[te].Class,Clstatus1:ee[te].Clstatus1};S.MSClass.push(ae)}}}var re=n[Z].characteristics;if(re){if(re.length>0){for(var le=0;le<re.length;le++){var ne={Mspoint:n[Z].Mspoint,Atnam:re[le].Atnam,Textbez:re[le].Textbez,Atwrt:re[le].Atwrt,Class:re[le].Class};S.MSVal.push(ne)}}}}}if(s.length>0){for(var se=0;se<s.length;se++){var oe={Warpl:s[se].Warpl,Abrho:s[se].Abrho,Hunit:s[se].Hunit,Mptyp:s[se].Mptyp,Wptxt:s[se].Wptxt,Stich:s[se].Stich.toString(),Fabkl:s[se].Fabkl,FabklDesc:s[se].FabklDesc,Sfakt:s[se].Sfakt,Andor:t.parseValue(s[se].Andor),Mehrfach:t.parseValue(s[se].Mehrfach),Strat:s[se].Strat,StratDesc:s[se].StratDesc,Wset:s[se].Wset,Startdate:t._formatDate(s[se].Stadt),Unitc:s[se].Unitc,Szaeh:s[se].Szaeh,PointStp:s[se].Mpcycleno,Vspos:s[se].Vspos,Topos:s[se].Topos,Vsneg:s[se].Vsneg,Toneg:s[se].Toneg,Horiz:s[se].Horiz,CallConf:s[se].CallConf,PlanSort:s[se].PlanSort,Begru:s[se].Begru,InactMp:s[se].Deact};S.MPLAN.push(oe);var ie=s[se].itemModel;if(ie){for(var de=0;de<ie.length;de++){var ce={Mplan:s[se].Warpl,Qmart:ie[de].Qmart,Qmartx:ie[de].nTypeTxt,PlntMi:ie[de].Werks,Planningplantdes:ie[de].Planningplantdes,IngrpMi:ie[de].Ingrp,Plannergrpdesc:ie[de].Innam,Pstxt:ie[de].Pstxt,WergwMi:ie[de].WergwMi,ArbpMi:ie[de].ArbpMi,Auart:ie[de].Auart,Ordertypedesc:ie[de].oTypeTxt,Bautl:ie[de].AsmblyOb,Cycleseq:ie[de].Cycleseq,Equnr:ie[de].Equnr,Equipdesc:ie[de].Eqktx,TplnrMi:ie[de].Tplnr,Flocdesc:ie[de].Pltxt,Mitemnumb:ie[de].Mitemnumb,PlnnrMi:ie[de].PlnnrMi,PlntyMi:ie[de].PlntyMi,PlnalMi:ie[de].PlnalMi,SwerkMil:ie[de].SwerkMil,StortMil:ie[de].StortMil,MsgrpIl:ie[de].MsgrpIl,BeberMil:ie[de].BeberMil,Fing:ie[de].Fing,ArbplIl:ie[de].ArbplIl,AbckzIl:ie[de].AbckzIl,EqfnrIl:ie[de].EqfnrIl,BukrsMil:ie[de].BukrsMil,Butxt:ie[de].Butxt,City:ie[de].City,Anln1Mil:ie[de].Anln1Mil,Anln2Mil:ie[de].Anln2Mil,GsberIl:ie[de].GsberIl,KostlMil:ie[de].KostlMil,KokrsMil:ie[de].KokrsMil,Posid:ie[de].Posid,AufnrIl:ie[de].AufnrIl};S.MPItem.push(ce);if(ie[de].lam){var Y={Mplan:s[se].Warpl,Mitemnumb:ie[de].lam.Mitemnumb,Lrpid:ie[de].lam.Lrpid,Strtptatr:ie[de].lam.Strtptatr,Endptatr:ie[de].lam.Endptatr,Length:ie[de].lam.Length,LinUnit:ie[de].lam.LinUnit,Startmrkr:ie[de].lam.Startmrkr,Endmrkr:ie[de].lam.Endmrkr,Mrkdisst:ie[de].lam.Mrkdisst,Mrkdisend:ie[de].lam.Mrkdisend,MrkrUnit:ie[de].lam.MrkrUnit};S.MPLAM.push(Y)}}}var pe=s[se].cycleModel;if(pe){for(var ue=0;ue<pe.length;ue++){var ge={Mplan:s[se].Warpl,Point:pe[ue].Point,PointTxt:pe[ue].Psort,Offset:pe[ue].Offset,Ofsetunit:pe[ue].Ofsetunit,PakText:pe[ue].PakText,Zeieh:pe[ue].Zeieh,Zykl1:pe[ue].Zykl1,Cycleseqi:pe[ue].Cycleseqi,Mpcycleno:pe[ue].Mpcycleno};S.MPCycle.push(ge)}}var me=s[se].ObjListItems;if(me){for(var x=0;x<me.length;x++){var fe={AsmblyOb:me[x].AsmblyOb,EquiObj:me[x].EquiObj,FlocObj:me[x].FlocObj,MatnrObj:me[x].MatnrObj,Mitemnumb:me[x].Mitemnumb,Mplan:me[x].Warpl};S.MPOBList.push(fe)}}var ee=s[se].classItems;if(ee){if(ee.length>0){for(var te=0;te<ee.length;te++){var ae={Mplan:s[se].Warpl,Classtype:ee[te].Classtype,Class:ee[te].Class,Clstatus1:ee[te].Clstatus1};S.ClassMpl.push(ae)}}}var re=s[se].characteristics;if(re){if(re.length>0){for(var le=0;le<re.length;le++){var ne={Mplan:s[se].Warpl,Atnam:re[le].Atnam,Textbez:re[le].Textbez,Atwrt:re[le].Atwrt,Class:re[le].Class};S.ValuaMpl.push(ne)}}}}}if(o.length>0){for(var le=0;le<o.length;le++){var he={Matnr:o[le].Matnr,Stalt:o[le].Stalt,Stlan:o[le].Stlan,Werks:o[le].Werks,Pmbomtech:o[le].Pmbomtech?o[le].Pmbomtech:"",PmbomtechTxt:o[le].PmbomtechTxt?o[le].PmbomtechTxt:"",Bomstatus:o[le].Bomstatus,Lngtxt:o[le].Lngtxt,Txtmi:o[le].Lngtxt,Stktx:o[le].Stktx,Validfrom:this._formatDate(o[le].Validfrom),Baseqty:o[le].BaseQty,Baseuom:o[le].BaseUom,Validtoda:this._formatDate(o[le].Validtoda)};S.MRBHeader.push(he);if(o[le].matItem){for(var Z=0;Z<o[le].matItem.length;Z++){var Se={Matnr:o[le].Matnr,Stlan:o[le].Stlan,Werks:o[le].Werks,Bomitmpos:o[le].matItem[Z].Bomitmpos,Itemcat:o[le].matItem[Z].Itemcat,Itemcomp:o[le].matItem[Z].Itemcomp,Compdesc:"",Itmqty:o[le].matItem[Z].Itmqty,Itmuom:o[le].matItem[Z].Itmuom,Recurallo:o[le].matItem[Z].Recurallo,Erskz:o[le].matItem[Z].Erskz,Rvrel:o[le].matItem[Z].Rvrel==="0"?"":o[le].matItem[Z].Rvrel,Sanfe:o[le].matItem[Z].Sanfe,Sanin:o[le].matItem[Z].Sanin,Sanko:o[le].matItem[Z].Sanko,Itmcmpdesc:o[le].matItem[Z].Itmcmpdesc,Costgrelv:o[le].matItem[Z].Costgrelv==="0"?"":o[le].matItem[Z].Costgrelv};if(o[le].bomType==="Change"){Se.Bomitmnod=o[le].matItem[Z].Bomitmnod}if(o[le].matItem[Z].Itemcat==="N"){Se.Ekorg=o[le].matItem[Z].Ekorg;Se.Ekotx=o[le].matItem[Z].Ekotx;Se.Ekgrp=o[le].matItem[Z].Ekgrp;Se.Eknam=o[le].matItem[Z].Eknam;Se.Preis=o[le].matItem[Z].Preis;Se.Waers=o[le].matItem[Z].Waers;Se.Peinh=o[le].matItem[Z].Peinh;Se.Matkl=o[le].matItem[Z].Matkl;Se.Wgbez=o[le].matItem[Z].Wgbez;Se.Potx1=o[le].matItem[Z].Potx1}else if(o[le].matItem[Z].Itemcat==="D"){Se.Bomdocitm=o[le].matItem[Z].Bomdocitm;Se.Bomitmdkr=o[le].matItem[Z].Bomitmdkr;Se.BomitmdkrTxt=o[le].matItem[Z].BomitmdkrTxt;Se.Bomitmdtl=o[le].matItem[Z].Bomitmdtl;Se.Bomitmdvr=o[le].matItem[Z].Bomitmdvr}else if(o[le].matItem[Z].Itemcat==="R"){Se.Roms1=o[le].matItem[Z].Roms1;Se.Romei=o[le].matItem[Z].Romei;Se.Roms2=o[le].matItem[Z].Roms2;Se.Roms3=o[le].matItem[Z].Roms3;Se.Rform=o[le].matItem[Z].Rform;Se.Roanz=o[le].matItem[Z].Roanz;Se.Romen=o[le].matItem[Z].Romen;Se.Rokme=o[le].matItem[Z].Rokme}else if(o[le].matItem[Z].Itemcat==="T"){Se.Potx1=o[le].matItem[Z].Potx1}S.MRBItem.push(Se)}}if(o[le].matSubItem.length){for(var se=0;se<o[le].matSubItem.length;se++){var Te={Matnr:o[le].Matnr,Stlan:o[le].Stlan,Werks:o[le].Werks,Posnr:o[le].matSubItem[se].Posnr,Bomitmnod:o[le].matSubItem[se].Bomitmnod,Bomsubno:o[le].matSubItem[se].Bomsubno,Ebort:o[le].matSubItem[se].Ebort,Upmng:o[le].matSubItem[se].Upmng,Uptxt:o[le].matSubItem[se].Uptxt};S.MRBSBIT.push(Te)}}}}if(i.length>0){for(var le=0;le<i.length;le++){var Me={Eqnrbom:i[le].Eqnrbom,Stlan:i[le].Stlan,Werks:i[le].Werks,Bomstatus:i[le].Bomstatus,Lngtxt:i[le].Lngtxt,Txtmi:i[le].Lngtxt,Stktx:i[le].Stktx,Validfrom:this._formatDate(i[le].Validfrom),Baseqty:i[le].BaseQty,Baseuom:i[le].BaseUom,Validtoda:this._formatDate(i[le].Validtoda)};S.EBHeader.push(Me);if(i[le].eqItem){for(var Z=0;Z<i[le].eqItem.length;Z++){var be={Eqnrbom:i[le].Eqnrbom,Stlan:i[le].Stlan,Werks:i[le].Werks,Bomitmpos:i[le].eqItem[Z].Bomitmpos,Itemcat:i[le].eqItem[Z].Itemcat,Itemcomp:i[le].eqItem[Z].Itemcomp,Compdesc:"",Itmqty:i[le].eqItem[Z].Itmqty,Itmuom:i[le].eqItem[Z].Itmuom,Recurallo:i[le].eqItem[Z].Recurallo,Erskz:i[le].eqItem[Z].Erskz,Rvrel:i[le].eqItem[Z].Rvrel==="0"?"":i[le].eqItem[Z].Rvrel,Sanfe:i[le].eqItem[Z].Sanfe,Sanin:i[le].eqItem[Z].Sanin,Sanko:i[le].eqItem[Z].Sanko,Itmcmpdesc:i[le].eqItem[Z].Itmcmpdesc,Costgrelv:i[le].eqItem[Z].Costgrelv==="0"?"":i[le].eqItem[Z].Costgrelv};if(i[le].bomType==="Change"){be.Bomitmnod=i[le].eqItem[Z].Bomitmnod}if(i[le].eqItem[Z].Itemcat==="N"){be.Ekorg=i[le].eqItem[Z].Ekorg;be.Ekotx=i[le].eqItem[Z].Ekotx;be.Ekgrp=i[le].eqItem[Z].Ekgrp;be.Eknam=i[le].eqItem[Z].Eknam;be.Preis=i[le].eqItem[Z].Preis;be.Waers=i[le].eqItem[Z].Waers;be.Peinh=i[le].eqItem[Z].Peinh;be.Matkl=i[le].eqItem[Z].Matkl;be.Wgbez=i[le].eqItem[Z].Wgbez;be.Potx1=i[le].eqItem[Z].Potx1}else if(i[le].eqItem[Z].Itemcat==="D"){be.Bomdocitm=i[le].eqItem[Z].Bomdocitm;be.Bomitmdkr=i[le].eqItem[Z].Bomitmdkr;be.BomitmdkrTxt=i[le].eqItem[Z].BomitmdkrTxt;be.Bomitmdtl=i[le].eqItem[Z].Bomitmdtl;be.Bomitmdvr=i[le].eqItem[Z].Bomitmdvr}else if(i[le].eqItem[Z].Itemcat==="R"){be.Roms1=i[le].eqItem[Z].Roms1;be.Romei=i[le].eqItem[Z].Romei;be.Roms2=i[le].eqItem[Z].Roms2;be.Roms3=i[le].eqItem[Z].Roms3;be.Rform=i[le].eqItem[Z].Rform;be.Roanz=i[le].eqItem[Z].Roanz;be.Romen=i[le].eqItem[Z].Romen;be.Rokme=i[le].eqItem[Z].Rokme}else if(i[le].eqItem[Z].Itemcat==="T"){be.Potx1=i[le].eqItem[Z].Potx1}S.EBItem.push(be)}}if(i[le].eqSubItem){for(var se=0;se<i[le].eqSubItem.length;se++){var Ee={Eqnrbom:i[le].Eqnrbom,Stlan:i[le].Stlan,Werks:i[le].Werks,Posnr:i[le].eqSubItem[se].Posnr,Bomitmnod:i[le].eqSubItem[se].Bomitmnod,Bomsubno:i[le].eqSubItem[se].Bomsubno,Ebort:i[le].eqSubItem[se].Ebort,Upmng:i[le].eqSubItem[se].Upmng,Uptxt:i[le].eqSubItem[se].Uptxt};S.EBSBIT.push(Ee)}}}}if(d.length>0){for(var le=0;le<d.length;le++){var ve={Tplnrbom:d[le].Tplnrbom,Stlan:d[le].Stlan,Werks:d[le].Werks,Bomstatus:d[le].Bomstatus,Lngtxt:d[le].Lngtxt,Txtmi:d[le].Lngtxt,Stktx:d[le].Stktx,Validfrom:this._formatDate(d[le].Validfrom),Baseqty:d[le].BaseQty,Baseuom:d[le].BaseUom,Validtoda:this._formatDate(d[le].Validtoda)};S.FBHeader.push(ve);if(d[le].flItem){for(var Z=0;Z<d[le].flItem.length;Z++){var Ce={Tplnrbom:d[le].Tplnrbom,Stlan:d[le].Stlan,Werks:d[le].Werks,Bomitmpos:d[le].flItem[Z].Bomitmpos,Itemcat:d[le].flItem[Z].Itemcat,Itemcomp:d[le].flItem[Z].Itemcomp,Compdesc:"",Itmqty:d[le].flItem[Z].Itmqty,Itmuom:d[le].flItem[Z].Itmuom,Recurallo:d[le].flItem[Z].Recurallo,Erskz:d[le].flItem[Z].Erskz,Rvrel:d[le].flItem[Z].Rvrel==="0"?"":d[le].flItem[Z].Rvrel,Sanfe:d[le].flItem[Z].Sanfe,Sanin:d[le].flItem[Z].Sanin,Sanko:d[le].flItem[Z].Sanko,Itmcmpdesc:d[le].flItem[Z].Itmcmpdesc,Costgrelv:d[le].flItem[Z].Costgrelv==="0"?"":d[le].flItem[Z].Costgrelv};if(d[le].bomType==="Change"){Ce.Bomitmnod=d[le].flItem[Z].Bomitmnod}if(d[le].flItem[Z].Itemcat==="N"){Ce.Ekorg=d[le].flItem[Z].Ekorg;Ce.Ekotx=d[le].flItem[Z].Ekotx;Ce.Ekgrp=d[le].flItem[Z].Ekgrp;Ce.Eknam=d[le].flItem[Z].Eknam;Ce.Preis=d[le].flItem[Z].Preis;Ce.Waers=d[le].flItem[Z].Waers;Ce.Peinh=d[le].flItem[Z].Peinh;Ce.Matkl=d[le].flItem[Z].Matkl;Ce.Wgbez=d[le].flItem[Z].Wgbez;Ce.Potx1=d[le].flItem[Z].Potx1}else if(d[le].flItem[Z].Itemcat==="D"){Ce.Bomdocitm=d[le].flItem[Z].Bomdocitm;Ce.Bomitmdkr=d[le].flItem[Z].Bomitmdkr;Ce.BomitmdkrTxt=d[le].flItem[Z].BomitmdkrTxt;Ce.Bomitmdtl=d[le].flItem[Z].Bomitmdtl;Ce.Bomitmdvr=d[le].flItem[Z].Bomitmdvr}else if(d[le].flItem[Z].Itemcat==="R"){Ce.Roms1=d[le].flItem[Z].Roms1;Ce.Romei=d[le].flItem[Z].Romei;Ce.Roms2=d[le].flItem[Z].Roms2;Ce.Roms3=d[le].flItem[Z].Roms3;Ce.Rform=d[le].flItem[Z].Rform;Ce.Roanz=d[le].flItem[Z].Roanz;Ce.Romen=d[le].flItem[Z].Romen;Ce.Rokme=d[le].flItem[Z].Rokme}else if(d[le].flItem[Z].Itemcat==="T"){Ce.Potx1=d[le].flItem[Z].Potx1}S.FBItem.push(Ce)}}if(d[le].flSubItem){for(var se=0;se<d[le].flSubItem.length;se++){var xe={Tplnrbom:d[le].Tplnrbom,Stlan:d[le].Stlan,Werks:d[le].Werks,Posnr:d[le].flSubItem[se].Posnr,Bomitmnod:d[le].flSubItem[se].Bomitmnod,Bomsubno:d[le].flSubItem[se].Bomsubno,Ebort:d[le].flSubItem[se].Ebort,Upmng:d[le].flSubItem[se].Upmng,Uptxt:d[le].flSubItem[se].Uptxt};S.FBSBIT.push(xe)}}}}if(c.length>0){for(var le=0;le<c.length;le++){var Ve={WbsExt:c[le].WbsExt,MatnrWbs:c[le].Matnr,Stlan:c[le].Stlan,Werks:c[le].Werks,Bomstatus:c[le].Bomstatus,Lngtxt:c[le].Lngtxt,Txtmi:c[le].Lngtxt,Stktx:c[le].Stktx,Validfrom:this._formatDate(c[le].Validfrom),Baseqty:c[le].BaseQty,Baseuom:c[le].BaseUom,Validtoda:this._formatDate(c[le].Validtoda)};S.WBHeader.push(Ve);if(c[le].wbsItem){for(var Z=0;Z<c[le].wbsItem.length;Z++){var Pe={WbsExt:c[le].WbsExt,MatnrWbs:c[le].Matnr,Stlan:c[le].Stlan,Werks:c[le].Werks,Bomitmpos:c[le].wbsItem[Z].Bomitmpos,Itemcat:c[le].wbsItem[Z].Itemcat,Itemcomp:c[le].wbsItem[Z].Itemcomp,Compdesc:"",Itmqty:c[le].wbsItem[Z].Itmqty,Itmuom:c[le].wbsItem[Z].Itmuom,Recurallo:c[le].wbsItem[Z].Recurallo,Erskz:c[le].wbsItem[Z].Erskz,Rvrel:c[le].wbsItem[Z].Rvrel==="0"?"":c[le].wbsItem[Z].Rvrel,Sanfe:c[le].wbsItem[Z].Sanfe,Sanin:c[le].wbsItem[Z].Sanin,Sanko:c[le].wbsItem[Z].Sanko,Itmcmpdesc:c[le].wbsItem[Z].Itmcmpdesc,Costgrelv:c[le].wbsItem[Z].Costgrelv==="0"?"":c[le].wbsItem[Z].Costgrelv};if(c[le].bomType==="Change"){Pe.Bomitmnod=c[le].wbsItem[Z].Bomitmnod}if(c[le].wbsItem[Z].Itemcat==="N"){Pe.Ekorg=c[le].wbsItem[Z].Ekorg;Pe.Ekotx=c[le].wbsItem[Z].Ekotx;Pe.Ekgrp=c[le].wbsItem[Z].Ekgrp;Pe.Eknam=c[le].wbsItem[Z].Eknam;Pe.Preis=c[le].wbsItem[Z].Preis;Pe.Waers=c[le].wbsItem[Z].Waers;Pe.Peinh=c[le].wbsItem[Z].Peinh;Pe.Matkl=c[le].wbsItem[Z].Matkl;Pe.Wgbez=c[le].wbsItem[Z].Wgbez;Pe.Potx1=c[le].wbsItem[Z].Potx1}else if(c[le].wbsItem[Z].Itemcat==="D"){Pe.Bomdocitm=c[le].wbsItem[Z].Bomdocitm;Pe.Bomitmdkr=c[le].wbsItem[Z].Bomitmdkr;Pe.BomitmdkrTxt=c[le].wbsItem[Z].BomitmdkrTxt;Pe.Bomitmdtl=c[le].wbsItem[Z].Bomitmdtl;Pe.Bomitmdvr=c[le].wbsItem[Z].Bomitmdvr}else if(c[le].wbsItem[Z].Itemcat==="R"){Pe.Roms1=c[le].wbsItem[Z].Roms1;Pe.Romei=c[le].wbsItem[Z].Romei;Pe.Roms2=c[le].wbsItem[Z].Roms2;Pe.Roms3=c[le].wbsItem[Z].Roms3;Pe.Rform=c[le].wbsItem[Z].Rform;Pe.Roanz=c[le].wbsItem[Z].Roanz;Pe.Romen=c[le].wbsItem[Z].Romen;Pe.Rokme=c[le].wbsItem[Z].Rokme}else if(c[le].wbsItem[Z].Itemcat==="T"){Pe.Potx1=c[le].wbsItem[Z].Potx1}S.WBItem.push(Pe)}}if(c[le].wbsSubItem){for(var se=0;se<c[le].wbsSubItem.length;se++){var Ie={WbsExt:c[le].WbsExt,MatnrWbs:c[le].Matnr,Stlan:c[le].Stlan,Werks:c[le].Werks,Posnr:c[le].wbsSubItem[se].Posnr,Bomitmnod:c[le].wbsSubItem[se].Bomitmnod,Bomsubno:c[le].wbsSubItem[se].Bomsubno,Ebort:c[le].wbsSubItem[se].Ebort,Upmng:c[le].wbsSubItem[se].Upmng,Uptxt:c[le].wbsSubItem[se].Uptxt};S.WBSBIT.push(Ie)}}}}if(p.length>0){for(var le=0;le<p.length;le++){var Le={Objnetwrk:p[le].Objnetwrk,Netgrp:p[le].Netgrp,Netwtyp:p[le].Netwtyp,Netxt:p[le].Netxt,Ntobjtyp:p[le].Ntobjtyp};S.ONetwork.push(Le);if(p[le].lam){var ye={Objnetwrk:p[le].Objnetwrk,Lrpid:p[le].lam.Lrpid,Strtptatr:p[le].lam.Strtptatr,Endptatr:p[le].lam.Endptatr,Length:p[le].lam.Length,LinUnit:p[le].lam.LinUnit,Startmrkr:p[le].lam.Startmrkr,Endmrkr:p[le].lam.Endmrkr,Mrkdisst:p[le].lam.Mrkdisst,Mrkdisend:p[le].lam.Mrkdisend,MrkrUnit:p[le].lam.MrkrUnit};S.ONLAM.push(ye)}}}if(u.length>0){for(var le=0;le<u.length;le++){var he={Werks:u[le].plant,Arbpl:u[le].wc,Txtmi:u[le].wcDesc,Verwe:u[le].wcCat,Crveran:u[le].person,Planv:u[le].usg,Vgwts:u[le].stdVal,Crsteus:u[le].ctrlKey};if(u[le].hasOwnProperty("Type")){if(u[le].Type==="X"){he.Type="X"}}S.Workcenter.push(he);if(u[le].cost){for(var Z=0;Z<u[le].cost.length;Z++){var De={Werks:u[le].cost[Z].CrKokrs,Arbpl:u[le].wc,CrKostl:u[le].cost[Z].CrKostl,Costcentxt:u[le].cost[Z].Costcentxt,CrLstar:u[le].cost[Z].CrLstar,Forn1:u[le].cost[Z].Forn1,ActvttypeTxt:u[le].cost[Z].ActvttypeTxt,Frmltxt:u[le].cost[Z].Frmltxt,Begda:l._formatDate(u[le].cost[Z].Begda),Endda:l._formatDate(u[le].cost[Z].Endda)};S.WCCost.push(De)}}var ke=u[le].classItems;if(ke){if(ke.length>0){for(var H=0;H<ke.length;H++){var Fe={Arbpl:u[le].wc,Werks:u[le].plant,Classtype:ke[H].Classtype,Class:ke[H].Class};S.ClassWC.push(Fe)}}}var Ae=u[le].characteristics;if(Ae){if(Ae.length>0){for(var Q=0;Q<Ae.length;Q++){var we={Arbpl:u[le].wc,Werks:u[le].plant,Atnam:Ae[Q].Atnam,Textbez:Ae[Q].Textbez,Atwrt:Ae[Q].Atwrt,Class:Ae[Q].Class};S.ValueWC.push(we)}}}}}if(g.length>0){for(var le=0;le<g.length;le++){if(g[le].header){for(var Z=0;Z<g[le].header.length;Z++){if(g[le].header[Z].Iwerk!==""){g[le].header[Z].Werks=g[le].header[Z].Iwerk}var qe={Werks:g[le].header[Z].Werks,Wcplant:g[le].header[Z].plant,Statu:g[le].header[Z].Statu,Tverwe:g[le].header[Z].tlusg,Ktext:g[le].header[Z].Ktext,Tarbpl:g[le].header[Z].wc,Vagrp:g[le].header[Z].Vagrp,Anlzu:g[le].header[Z].Anlzu,Tplnal:g[le].header[Z].Plnal.toString(),Tlgnhdr:g[le].grp,Strat:g[le].header[Z].Strat,Datuv:this._formatDate(g[le].validFrm)};S.GTList.push(qe)}}if(g[le].operation){for(var se=0;se<g[le].operation.length;se++){var We={Tlgnhdr:g[le].grp,Vornr:g[le].operation[se].Vornr,TlArbpl:g[le].operation[se].Arbpl,Werks2gop:g[le].operation[se].Werks,Steus2gop:g[le].operation[se].Steus,Ltxa1:g[le].operation[se].Ltxa1,Arbei:g[le].operation[se].Arbei,Dauno:g[le].operation[se].Dauno,Arbeh:g[le].operation[se].Arbeh,Anzzl:g[le].operation[se].Anzzl,Daune:g[le].operation[se].Daune,Indet:g[le].operation[se].Indet,Tplnal:g[le].operation[se].Plnal.toString(),Uvorn:g[le].operation[se].Uvorn,Larnt2gop:g[le].operation[se].Larnt,Prznt:g[le].operation[se].workPerc===""?0:parseFloat(g[le].operation[se].workPerc),Bmvrg:g[le].operation[se].orderQty,Bmeih:g[le].operation[se].ordQtyUnit,Opreis:g[le].operation[se].netPrice===""?"0.000":parseFloat(g[le].operation[se].netPrice).toFixed(3).toString(),Owaers:g[le].operation[se].currency,Opeinh:g[le].operation[se].priceUnit===""?"0.000":parseFloat(g[le].operation[se].priceUnit).toFixed(3).toString(),Sakto2gop:g[le].operation[se].costElement,Omatkl:g[le].operation[se].materialGrp,Oekgrp:g[le].operation[se].puchGroup,Ekorg:g[le].operation[se].purchOrg,EqunrGop:g[le].operation[se].equi,TplnrGop:g[le].operation[se].floc};S.GTOprs.push(We);for(var x=0;x<g[le].operation[se].OprRel.length;x++){var Be=g[le].operation[se].OprRel[x];var Ne={Tlgnhdr:g[le].grp,Tplnal:Be.Plnal,Vorn2:Be.Vornr,Vornrgrel:Be.OperationOR,Dauer:Be.Offset,Zeinh:Be.OUn,Aobar:Be.RelType,Gprznt:Be.PO,Provg:Be.OI,Gkalid:Be.ID,Arbplgrel:Be.WrkCtrOR,Werksgrel:Be.PlantOR};S.GTRel.push(Ne)}for(var x=0;x<g[le].operation[se].SrvPckgOvrw.length;x++){var Be=g[le].operation[se].SrvPckgOvrw[x];var Oe={Tlgnhdr:g[le].grp,Tplnal:Be.Plnal,Vornrr:Be.Vornr,SrvLine:Be.LineNum,Del:l.truetoX(Be.DelIndSP),Srvpos:Be.ActNum,Ktext1:Be.ShrtTxt,Mengegspk:Be.Qty,Meinsgspk:Be.BUomSP,Tbtwr:Be.GrossPrc,Waersgspk:Be.CurKey,IntWork:Be.Work,Iwein:Be.UnitOfWork};S.GTSpack.push(Oe)}for(var x=0;x<g[le].operation[se].PRT.length;x++){var Be=g[le].operation[se].PRT[x];var Re={Tlgnhdr:g[le].grp,Tplnal:Be.Plnal,Vornrgprt:Be.Vornr,Psnfh:Be.ItmNum,Fhmar:Be.ItmCat,Matnrgprt:Be.Mat,EqunrGpt:Be.Equi,Eqpnt:Be.Mspt,Doknrgprt:Be.doc,Dokargprt:Be.docType,Doktlgprt:Be.docPart,Dokvrgprt:Be.docVersion,Fhmnr:Be.Othr,Fhwrk:Be.Plant,Mgvgw:Be.Qty,Mgeinh:Be.UOM,Mgform:Be.QtyFrmla,Steuf:Be.PRTCtrl,Stftxt:Be.PRTCtrlDesc,Ewvgw:Be.StdUsgVal,Eweinh:Be.StdUsgUOM,Ewform:Be.UsgValFrmla};S.GTPRT.push(Re)}for(var x=0;x<g[le].operation[se].InspChar.length;x++){var Be=g[le].operation[se].InspChar[x];var Ue={Tlgnhdr:g[le].grp,Tplnal:Be.Plnal,Vornrgins:Be.Vornr,Merknr:Be.InspChar,Vste2gins:Be.PrstInd,Quantitat:l.truetoX(Be.QuanChar),QpmkRef:l.truetoX(Be.QualChar),Verw2gins:Be.MastInspChar,Uzae2tlgn:Be.Plant,Mkv2tlgni:Be.Version,Kurztext:Be.ShrtTxt,Pmth2gins:Be.InspMthd,Qwe2tlgni:Be.InspMthdPlnt,Toleranzs:Be.TolKey,Ver2tlgni:Be.VrsnInspMthd,Stichprve:Be.SampProc,Probemgeh:Be.SampUOM,Pruefeinh:Be.BaseSampQty===""?"0.00":parseFloat(Be.BaseSampQty).toFixed(2),Auswmenge:Be.CodeGrp};S.GTInsp.push(Ue)}}}if(g[le].MaintPckg&&g[le].MaintPckg.length>0){for(var x=0;x<g[le].MaintPckg.length;x++){if(g[le].MaintPckg[x].MPArr&&g[le].MaintPckg[x].MPArr.length>0){for(var V=0;V<g[le].MaintPckg[x].MPArr.length;V++){var ze=g[le].MaintPckg[x].MPArr[V];var Ke={Ktex1:ze.Ktex1,Ktxhi:ze.Ktxhi,Kzyk1:ze.Kzyk1,Paketgmpk:ze.Paket,Startgmpk:ze.Strat,Tlgnhdr:g[le].grp,Tplnal:ze.Plnal.toString(),Vorn2gmpk:ze.Vornr}}S.GTMPack.push(Ke)}}}if(g[le].component){for(var de=0;de<g[le].component.length;de++){var He={Tlgnhdr:g[le].grp,Idnrk:g[le].component[de].Idnrk,Menge:g[le].component[de].Menge,MeinsGcp:g[le].component[de].MeinsGcp,Vornr:g[le].component[de].Vornr,Postp:g[le].component[de].Postp,Tplnal:g[le].component[de].Plnal.toString()};S.GTComp.push(He)}}if(g[le].Class){for(var ue=0;ue<g[le].Class.length;ue++){var Ge={Tlgnhdr:g[le].grp,Classtype:g[le].Class[ue].Classtype,Class:g[le].Class[ue].Class,Clstatus1:g[le].Class[ue].Clstatus1,Tplnal:g[le].Class[ue].Plnal.toString()};S.GTClass.push(Ge)}}if(g[le].Char){for(var je=0;je<g[le].Char.length;je++){for(var se=0;se<g[le].Class.length;se++){if(g[le].Class[se].Class===g[le].Char[je].Class){g[le].Char[je].Plnal=g[le].Class[se].Plnal}}var Qe={Tlgnhdr:g[le].grp,Atnam:g[le].Char[je].Atnam,Textbez:g[le].Char[je].Textbez,Atwrt:g[le].Char[je].Atwrt,Class:g[le].Char[je].Class,Tplnal:g[le].Char[je].Plnal.toString()};S.GTVal.push(Qe)}}}}if(m.length>0){for(var le=0;le<m.length;le++){if(m[le].header){for(var Z=0;Z<m[le].header.length;Z++){if(m[le].header[Z].Iwerk!==""){m[le].header[Z].Werks=m[le].header[Z].Iwerk}var _e={Werks:m[le].header[Z].Werks,Wcplant:m[le].header[Z].plant,Statu:m[le].header[Z].Statu,Tverwe:m[le].header[Z].tlusg,Ktext:m[le].header[Z].Ktext,Tarbpl:m[le].header[Z].wc,Vagrp:m[le].header[Z].Vagrp,Anlzu:m[le].header[Z].Anlzu,Tplnal:m[le].header[Z].Plnal.toString(),Tleqhdr:m[le].grp,Strat:m[le].header[Z].Strat,Eq2tl:m[le].header[Z].equipment,Datuv:this._formatDate(m[le].validFrm)};S.ETList.push(_e)}}if(m[le].operation){for(var se=0;se<m[le].operation.length;se++){var Je={Tleqhdr:m[le].grp,Vornr:m[le].operation[se].Vornr,TlArbpl:m[le].operation[se].Arbpl,Werks2eop:m[le].operation[se].Werks,Steus2eop:m[le].operation[se].Steus,Ltxa1:m[le].operation[se].Ltxa1,Arbei:m[le].operation[se].Arbei,Dauno:m[le].operation[se].Dauno,Arbeh:m[le].operation[se].Arbeh,Anzzl:m[le].operation[se].Anzzl,Daune:m[le].operation[se].Daune,Indet:m[le].operation[se].Indet,Tplnal:m[le].operation[se].Plnal.toString(),Uvorn:m[le].operation[se].Uvorn,Larnt2eop:m[le].operation[se].Larnt,Prznt:m[le].operation[se].workPerc===""?0:parseFloat(m[le].operation[se].workPerc),Bmvrg:m[le].operation[se].orderQty,Bmeih:m[le].operation[se].ordQtyUnit,Opreis:m[le].operation[se].netPrice===""?"0.000":parseFloat(m[le].operation[se].netPrice).toFixed(3).toString(),Owaers:m[le].operation[se].currency,Opeinh:m[le].operation[se].priceUnit===""?"0.000":parseFloat(m[le].operation[se].priceUnit).toFixed(3).toString(),Sakto2eop:m[le].operation[se].costElement,Omatkl:m[le].operation[se].materialGrp,Oekgrp:m[le].operation[se].puchGroup,Ekorg:m[le].operation[se].purchOrg,EqunrEop:m[le].operation[se].equi,TplnrEop:m[le].operation[se].floc};S.ETOprs.push(Je);for(var x=0;x<m[le].operation[se].OprRel.length;x++){var Be=m[le].operation[se].OprRel[x];var Ne={Tleqhdr:m[le].grp,Tplnal:Be.Plnal,Vorn2:Be.Vornr,Vornrerel:Be.OperationOR,Dauer:Be.Offset,Zeinh:Be.OUn,Aobar:Be.RelType,Eprznt:Be.PO,Provg:Be.OI,Ekalid:Be.ID,Arbplerel:Be.WrkCtrOR,Werkserel:Be.PlantOR};S.ETRel.push(Ne)}for(var x=0;x<m[le].operation[se].SrvPckgOvrw.length;x++){var Be=m[le].operation[se].SrvPckgOvrw[x];var Oe={Tleqhdr:m[le].grp,Tplnal:Be.Plnal,Vornrr:Be.Vornr,SrvLine:Be.LineNum,Del:l.truetoX(Be.DelIndSP),Srvpos:Be.ActNum,Ktext1:Be.ShrtTxt,Mengeespk:Be.Qty,Meinsespk:Be.BUomSP,Tbtwr:Be.GrossPrc,Waersespk:Be.CurKey,IntWork:Be.Work,Iwein:Be.UnitOfWork};S.ETSpack.push(Oe)}for(var x=0;x<m[le].operation[se].PRT.length;x++){var Be=m[le].operation[se].PRT[x];var Re={Tleqhdr:m[le].grp,Tplnal:Be.Plnal,Vornreprt:Be.Vornr,Psnfh:Be.ItmNum,Fhmar:Be.ItmCat,Matnreprt:Be.Mat,EqunrEpt:Be.Equi,Eqpnt:Be.Mspt,Doknreprt:Be.doc,Dokareprt:Be.docType,Doktleprt:Be.docPart,Dokvreprt:Be.docVersion,Fhmnr:Be.Othr,Fhwrk:Be.Plant,Mgvgw:Be.Qty,Mgeinh:Be.UOM,Mgform:Be.QtyFrmla,Steuf:Be.PRTCtrl,Stftxt:Be.PRTCtrlDesc,Ewvgw:Be.StdUsgVal,Eweinh:Be.StdUsgUOM,Ewform:Be.UsgValFrmla};S.ETPRT.push(Re)}for(var x=0;x<m[le].operation[se].InspChar.length;x++){var Be=m[le].operation[se].InspChar[x];var Ue={Tleqhdr:m[le].grp,Tplnal:Be.Plnal,Vornreins:Be.Vornr,Merknr:Be.InspChar,Vste2eins:Be.PrstInd,Quantitat:l.truetoX(Be.QuanChar),QpmkRef:l.truetoX(Be.QualChar),Verw2eins:Be.MastInspChar,Uzae2tlen:Be.Plant,Mkv2tleni:Be.Version,Kurztext:Be.ShrtTxt,Pmth2eins:Be.InspMthd,Qwe2tleqi:Be.InspMthdPlnt,Toleranzs:Be.TolKey,Ver2tleqi:Be.VrsnInspMthd,Stichprve:Be.SampProc,Probemgeh:Be.SampUOM,Pruefeinh:Be.BaseSampQty===""?"0.00":parseFloat(Be.BaseSampQty).toFixed(2),Auswmenge:Be.CodeGrp};S.ETInsp.push(Ue)}}}if(m[le].MaintPckg&&m[le].MaintPckg.length>0){for(var x=0;x<m[le].MaintPckg.length;x++){if(m[le].MaintPckg[x].MPArr&&m[le].MaintPckg[x].MPArr.length>0){for(var V=0;V<m[le].MaintPckg[x].MPArr.length;V++){var ze=m[le].MaintPckg[x].MPArr[V];var Ke={Ktex1:ze.Ktex1,Ktxhi:ze.Ktxhi,Kzyk1:ze.Kzyk1,Paketempk:ze.Paket,Startempk:ze.Strat,Tleqhdr:AIWLisETLData[le].grp,Tplnal:ze.Plnal.toString(),Vorn2empk:ze.Vornr}}S.ETMPack.push(Ke)}}}if(m[le].component){for(var de=0;de<m[le].component.length;de++){var $e={Tleqhdr:m[le].grp,Idnrk:m[le].component[de].Idnrk,Menge:m[le].component[de].Menge,MeinsEcp:m[le].component[de].MeinsGcp,Vornr:m[le].component[de].Vornr,Postp:m[le].component[de].Postp,Tplnal:m[le].component[de].Plnal.toString()};S.ETComp.push($e)}}if(m[le].Class){for(var ue=0;ue<m[le].Class.length;ue++){var Ze={Tleqhdr:m[le].grp,Classtype:m[le].Class[ue].Classtype,Class:m[le].Class[ue].Class,Clstatus1:m[le].Class[ue].Clstatus1,Tplnal:m[le].Class[ue].Plnal.toString()};S.ETClass.push(Ze)}}if(m[le].Char){for(var je=0;je<m[le].Char.length;je++){for(var se=0;se<m[le].Class.length;se++){if(m[le].Class[se].Class===m[le].Char[je].Class){m[le].Char[je].Plnal=m[le].Class[se].Plnal}}var Xe={Tleqhdr:m[le].grp,Atnam:m[le].Char[je].Atnam,Textbez:m[le].Char[je].Textbez,Atwrt:m[le].Char[je].Atwrt,Class:m[le].Char[je].Class,Tplnal:m[le].Char[je].Plnal.toString()};S.ETVal.push(Xe)}}}}if(f.length>0){for(var le=0;le<f.length;le++){if(f[le].header){for(var Z=0;Z<f[le].header.length;Z++){if(f[le].header[Z].Iwerk!==""){f[le].header[Z].Werks=f[le].header[Z].Iwerk}var Ye={Werks:f[le].header[Z].Werks,Wcplant:f[le].header[Z].plant,Statu:f[le].header[Z].Statu,Tverwe:f[le].header[Z].tlusg,Ktext:f[le].header[Z].Ktext,Tarbpl:f[le].header[Z].wc,Vagrp:f[le].header[Z].Vagrp,Anlzu:f[le].header[Z].Anlzu,Tplnal:f[le].header[Z].Plnal.toString(),Tlflhdr:f[le].grp,Strat:f[le].header[Z].Strat,Fl2tl:f[le].header[Z].floc,Datuv:this._formatDate(f[le].validFrm)};S.FTList.push(Ye)}}if(f[le].operation){for(var se=0;se<f[le].operation.length;se++){var et={Tlflhdr:f[le].grp,Vornr:f[le].operation[se].Vornr,TlArbpl:f[le].operation[se].Arbpl,Werks2fop:f[le].operation[se].Werks,Steus2fop:f[le].operation[se].Steus,Ltxa1:f[le].operation[se].Ltxa1,Arbei:f[le].operation[se].Arbei,Dauno:f[le].operation[se].Dauno,Arbeh:f[le].operation[se].Arbeh,Anzzl:f[le].operation[se].Anzzl,Daune:f[le].operation[se].Daune,Indet:f[le].operation[se].Indet,Tplnal:f[le].operation[se].Plnal.toString(),Uvorn:f[le].operation[se].Uvorn,Larnt2fop:f[le].operation[se].Larnt,Prznt:f[le].operation[se].workPerc===""?0:parseFloat(f[le].operation[se].workPerc),Bmvrg:f[le].operation[se].orderQty,Bmeih:f[le].operation[se].ordQtyUnit,Opreis:f[le].operation[se].netPrice===""?"0.000":parseFloat(f[le].operation[se].netPrice).toFixed(3).toString(),Owaers:f[le].operation[se].currency,Opeinh:f[le].operation[se].priceUnit===""?"0.000":parseFloat(f[le].operation[se].priceUnit).toFixed(3).toString(),Sakto2fop:f[le].operation[se].costElement,Omatkl:f[le].operation[se].materialGrp,Oekgrp:f[le].operation[se].puchGroup,Ekorg:f[le].operation[se].purchOrg,EqunrFop:f[le].operation[se].equi,TplnrFop:f[le].operation[se].floc};S.FTOprs.push(et);for(var x=0;x<f[le].operation[se].OprRel.length;x++){var Be=f[le].operation[se].OprRel[x];var Ne={Tlflhdr:f[le].grp,Tplnal:Be.Plnal,Vorn2:Be.Vornr,Vornrfrel:Be.OperationOR,Dauer:Be.Offset,Zeinh:Be.OUn,Aobar:Be.RelType,Fprznt:Be.PO,Provg:Be.OI,Fkalid:Be.ID,Arbplfrel:Be.WrkCtrOR,Werksfrel:Be.PlantOR};S.FTRel.push(Ne)}for(var x=0;x<f[le].operation[se].SrvPckgOvrw.length;x++){var Be=f[le].operation[se].SrvPckgOvrw[x];var Oe={Tlflhdr:f[le].grp,Tplnal:Be.Plnal,Vornrr:Be.Vornr,SrvLine:Be.LineNum,Del:l.truetoX(Be.DelIndSP),Srvpos:Be.ActNum,Ktext1:Be.ShrtTxt,Mengefspk:Be.Qty,Meinsfspk:Be.BUomSP,Tbtwr:Be.GrossPrc,Waersfspk:Be.CurKey,IntWork:Be.Work,Iwein:Be.UnitOfWork};S.FTSpack.push(Oe)}for(var x=0;x<f[le].operation[se].PRT.length;x++){var Be=f[le].operation[se].PRT[x];var Re={Tlflhdr:f[le].grp,Tplnal:Be.Plnal,Vornrfprt:Be.Vornr,Psnfh:Be.ItmNum,Fhmar:Be.ItmCat,Matnrfprt:Be.Mat,EqunrFpt:Be.Equi,Eqpnt:Be.Mspt,Doknrfprt:Be.doc,Dokarfprt:Be.docType,Doktlfprt:Be.docPart,Dokvrfprt:Be.docVersion,Fhmnr:Be.Othr,Fhwrk:Be.Plant,Mgvgw:Be.Qty,Mgeinh:Be.UOM,Mgform:Be.QtyFrmla,Steuf:Be.PRTCtrl,Stftxt:Be.PRTCtrlDesc,Ewvgw:Be.StdUsgVal,Eweinh:Be.StdUsgUOM,Ewform:Be.UsgValFrmla};S.FTPRT.push(Re)}for(var x=0;x<f[le].operation[se].InspChar.length;x++){var Be=f[le].operation[se].InspChar[x];var Ue={Tlflhdr:f[le].grp,Tplnal:Be.Plnal,Vornrfins:Be.Vornr,Merknr:Be.InspChar,Vste2eins:Be.PrstInd,Quantitat:l.truetoX(Be.QuanChar),QpmkRef:l.truetoX(Be.QualChar),Verw2fins:Be.MastInspChar,Uzae2tlfn:Be.Plant,Mkv2tlfni:Be.Version,Kurztext:Be.ShrtTxt,Pmth2fins:Be.InspMthd,Qwe2tlfli:Be.InspMthdPlnt,Toleranzs:Be.TolKey,Ver2tlfli:Be.VrsnInspMthd,Stichprve:Be.SampProc,Probemgeh:Be.SampUOM,Pruefeinh:Be.BaseSampQty===""?"0.00":parseFloat(Be.BaseSampQty).toFixed(2),Auswmenge:Be.CodeGrp};S.FTInsp.push(Ue)}}}if(f[le].MaintPckg&&f[le].MaintPckg.length>0){for(var x=0;x<f[le].MaintPckg.length;x++){if(f[le].MaintPckg[x].MPArr&&f[le].MaintPckg[x].MPArr.length>0){for(var V=0;V<f[le].MaintPckg[x].MPArr.length;V++){var ze=f[le].MaintPckg[x].MPArr[V];var Ke={Ktex1:ze.Ktex1,Ktxhi:ze.Ktxhi,Kzyk1:ze.Kzyk1,Paketfmpk:ze.Paket,Startfmpk:ze.Strat,Tlflhdr:f[le].grp,Tplnal:ze.Plnal.toString(),Vorn2fmpk:ze.Vornr}}S.FTMPack.push(Ke)}}}if(f[le].component){for(var de=0;de<f[le].component.length;de++){var tt={Tlflhdr:f[le].grp,Idnrk:f[le].component[de].Idnrk,Menge:f[le].component[de].Menge,MeinsFcp:f[le].component[de].MeinsGcp,Vornr:f[le].component[de].Vornr,Postp:f[le].component[de].Postp,Tplnal:f[le].component[de].Plnal.toString()};S.FTComp.push(tt)}}if(f[le].Class){for(var ue=0;ue<f[le].Class.length;ue++){var at={Tlflhdr:f[le].grp,Classtype:f[le].Class[ue].Classtype,Class:f[le].Class[ue].Class,Clstatus1:f[le].Class[ue].Clstatus1,Tplnal:f[le].Class[ue].Plnal.toString()};S.FTClass.push(at)}}if(f[le].Char){for(var je=0;je<f[le].Char.length;je++){for(var se=0;se<f[le].Class.length;se++){if(f[le].Class[se].Class===f[le].Char[je].Class){f[le].Char[je].Plnal=f[le].Class[se].Plnal}}var rt={Tlflhdr:f[le].grp,Atnam:f[le].Char[je].Atnam,Textbez:f[le].Char[je].Textbez,Atwrt:f[le].Char[je].Atwrt,Class:f[le].Char[je].Class,Tplnal:f[le].Char[je].Plnal.toString()};S.FTVal.push(rt)}}}}if(h.length>0){for(var le=0;le<h.length;le++){var lt={Begru:h[le].autGrp,Objlink:h[le].link,Kanxt:h[le].linkDesc,Eqkant:h[le].linkObjEq,Tpkant:h[le].linkObjFl,Netyp:h[le].linkCat,Eqvon:h[le].linkFrmEq,Tpvon:h[le].linkFrmFl,Eqnach:h[le].linkToEq,Tpnach:h[le].linkToFl,Mediu:h[le].medium,Lfdknr:h[le].linkNum,Kantyp:h[le].objCat,Netid:h[le].netId,Bezarp:h[le].Bezarp,Bezarl:h[le].Bezarl,Datva:l._formatDate(h[le].validFrm),Zeitva:l._timeConvert(h[le].timeFrm),Datvb:l._formatDate(h[le].validTo),Zeitvb:l._timeConvert(h[le].timeTo),Stattext:h[le].Stattext,StsmOl:h[le].StsmOl,UstwOl:h[le].UstwOl,UswoOl:h[le].UswoOl,UstaOl:h[le].UstaOl};S.Olink.push(lt);if(h[le].Class){for(var Z=0;Z<h[le].Class.length;Z++){var nt={Objlink:h[le].Class[Z].Objlink,Classtype:h[le].Class[Z].Classtype,Class:h[le].Class[Z].Class,Clstatus1:h[le].Class[Z].Clstatus1};S.OLClass.push(nt)}}if(h[le].Char){for(var se=0;se<h[le].Char.length;se++){var st={Objlink:h[le].Char[se].Objlink,Atnam:h[le].Char[se].Atnam,Textbez:h[le].Char[se].Textbez,Atwrt:h[le].Char[se].Atwrt,Class:h[le].Char[se].Class};S.OLVal.push(st)}}}}this.BusyDialog.open();var ot=this.getView().getModel();var te={"X-Requested-With":"xmlHTTPrequest"};ot.setHeaders(te);if(S.FLAddrI.length>0){S.FLAddrI=$.map(S.FLAddrI,function(e){return $.extend(true,{},e)});for(var le=0;le<S.FLAddrI.length>0;le++){delete S.FLAddrI[le].AdNationEnable;delete S.FLAddrI[le].City1iVS;delete S.FLAddrI[le].StreetiVS}}if(S.EqAddrI.length>0){S.EqAddrI=$.map(S.EqAddrI,function(e){return $.extend(true,{},e)});for(var le=0;le<S.EqAddrI.length>0;le++){delete S.EqAddrI[le].AdNationEnable;delete S.EqAddrI[le].City1iVS;delete S.EqAddrI[le].StreetiVS}}ot.create("/ChangeRequestSet",S,{success:function(e){var a=e;t.BusyDialog.close();t.getView().byId("idMessagePopover").setEnabled(false);t.clearData();var r=[];for(var n=0;n<a.Messages.results.length;n++){r.push({type:l.getMessageType(a.Messages.results[n].Type),title:a.Messages.results[n].Message})}t.createMessagePopover(r,false)},error:function(e){t.BusyDialog.close();var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}t.createMessagePopover(l,false)}})},onSubmit:function(e){var t=this;var a=e.getSource().getId();var r=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();var n=sap.ui.getCore().getModel(t.oModelAIWEQUI).getData();var s=sap.ui.getCore().getModel(t.oModelAIWMSPT).getData();var o=sap.ui.getCore().getModel(t.oModelAIWMPMI).getData();this.MessageList=[];this.dataIsEmpty();t.handleValidation(e,r,n,s,o);var i=sap.ui.getCore().getModel("AIWListMatModel").getData();var d=sap.ui.getCore().getModel("AIWListEqModel").getData();var c=sap.ui.getCore().getModel("AIWListFLModel").getData();var p=sap.ui.getCore().getModel("AIWListWBSModel").getData();var u=sap.ui.getCore().getModel("AIWListONModel").getData();this.handleBOMONValidation(i,d,c,p,u);var g=sap.ui.getCore().getModel("AIWListWCModel").getData();var m=sap.ui.getCore().getModel("AIWListGTLModel").getData();var f=sap.ui.getCore().getModel("AIWListETLModel").getData();var h=sap.ui.getCore().getModel("AIWListFTLModel").getData();var S=sap.ui.getCore().getModel("AIWListOLModel").getData();this.handleWCTLOLValidation(g,m,f,h,S);if(this.MessageList.length>0){this.createMessagePopover(this.MessageList)}if(!t.errorFlag){return}var T={ChangeRequestType:this.getCrType(),CrDescription:this.getView().byId("Description").getValue(),Duedate:t._formatDate(this.getView().byId("idDueDate").getDateValue()),Priority:this.getView().byId("idPriority").getSelectedKey(),Notes:this.getView().getModel("notes").getData().items,Reason:this.getView().byId("reasonForRequest").getSelectedKey(),Guids:this.oAttach,IsDraft:"",Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqDFPS:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],ClassWC:[],ValueWC:[],GTList:[],GTOprs:[],GTComp:[],GTMPack:[],GTRel:[],GTSpack:[],GTPRT:[],GTInsp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETMPack:[],ETRel:[],ETSpack:[],ETPRT:[],ETInsp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTMPack:[],FTRel:[],FTSpack:[],FTPRT:[],FTInsp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],FLLAMCH:[],EqLAMCH:[]};if(a.indexOf("idBtnCheck")>-1){T.IsDraft="C"}if(this.oAttach.length===0||this.oAttach===undefined){delete T.Guids}if(r.length>0){var M=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var b=0;b<r.length;b++){var E={Tplnr:r[b].Functionallocation,Txtmi:r[b].Flocdescription,TplkzFlc:r[b].Strucindicator,Tplxt:r[b].StrucIndicatorDesc,EditMask:r[b].EditMask,Hierarchy:r[b].Hierarchy,Fltyp:r[b].Floccategory,Flttx:r[b].FlocCategoryDesc,Swerk:r[b].Maintplant,Plantname:r[b].MaintplantDesc,StorFloc:r[b].Location,Locationdesc:r[b].Locationdesc,Abckzfloc:r[b].Abckz,Abctx:r[b].Abctx,Bukrsfloc:r[b].Bukrs,Butxt:r[b].Butxt,City:r[b].City,KostFloc:r[b].Kostl,KokrFloc:r[b].Kokrs,Contareaname:r[b].Mctxt,PlntFloc:r[b].Werks,Planningplantdes:r[b].Planningplantdes,Ingrp:r[b].Ingrp,Plannergrpdesc:r[b].Innam,Arbplfloc:r[b].Arbpl,Wergwfloc:r[b].WcWerks,Gewrkfloc:r[b].MainArbpl,MainWcPlant:r[b].MainWerks,Tplma:r[b].SupFunctionallocation,Supflocdesc:r[b].SupFlocdescription,BeberFl:r[b].BeberFl,Fing:r[b].Fing,Tele:r[b].Tele,Submtiflo:r[b].ConstrType,Constdesc:r[b].ConstructionDesc,Eqart:r[b].TechnicalObjectTyp,Eartx:r[b].Description,Stattext:r[b].Stattext,StsmFloc:r[b].StsmEqui,Statproftxt:r[b].StsmEquiDesc,UstwFloc:r[b].UstwEqui,UswoFloc:r[b].UswoEqui,UstaFloc:r[b].UstaEqui,Adrnr:r[b].Adrnr,Adrnri:r[b].Adrnri,Deact:r[b].Deact,Type:r[b].viewParameter==="create"?true:false,Modeldesc:r[b].Modeldesc,Modelref:r[b].Modelref,Modelrver:r[b].Modelrver,Modelext:r[b].Modelext,Modelname:r[b].Modelname,Modelver:r[b].Modelver};if(M&&M.length>0){var v=M[b].DOI;E.Swerki=v[0].instLoc?"H":v[0].maintenance?"D":"";E.Storti=v[1].instLoc?"H":v[1].maintenance?"D":"";E.Beberi=v[2].instLoc?"H":v[2].maintenance?"D":"";E.Ppsidi=v[3].instLoc?"H":v[3].maintenance?"D":"";E.Abckzi=v[4].instLoc?"H":v[4].maintenance?"D":"";E.Bukrsi=v[5].instLoc?"H":v[5].maintenance?"D":"";E.Kostli=v[6].instLoc?"H":v[6].maintenance?"D":"";E.Kokrsi=v[7].instLoc?"H":v[7].maintenance?"D":"";E.Iwerki=v[8].instLoc?"H":v[8].maintenance?"D":"";E.Ingrpi=v[9].instLoc?"H":v[9].maintenance?"D":"";E.Lgwidi=v[10].instLoc?"H":v[10].maintenance?"D":"";E.Adrnri=v[12].instLoc?"H":v[12].maintenance?"D":""}T.FuncLoc.push(E);var C={Funcloc:r[b].Functionallocation,Title:r[b].TitleCode,Name1:r[b].Name1,Name2:r[b].Name2,Name3:r[b].Name3,Name4:r[b].Name4,Sort1:r[b].Sort1,Sort2:r[b].Sort2,NameCo:r[b].NameCo,PostCod1:r[b].PostCod1,City1:r[b].City1,Building:r[b].Building,Floor:r[b].Floor,Roomnum:r[b].Roomnum,Strsuppl1:r[b].Strsuppl1,Strsuppl2:r[b].Strsuppl2,Strsuppl3:r[b].Strsuppl3,Location:r[b].AddrLocation,RPostafl:r[b].RefPosta,Landx:r[b].Landx,TimeZone:r[b].TimeZone,RPostFl:r[b].Region,Regiotxt:r[b].RegionDesc};T.FLAddr.push(C);var x=r[b].intlAddr;if(x){for(var V=0;V<x.length;V++){T.FLAddrI.push(x[V])}}if(t.AltLblDerv==="2"&&r[b].altlbl){for(var P=0;P<r[b].altlbl.length;P++){var I={Funcloc:r[b].Functionallocation,AltAlkey:r[b].altlbl[P].AltAlkey,AltStrno:r[b].altlbl[P].AltStrno,AltTplkz:r[b].altlbl[P].AltTplkz};T.FLALTLBEL.push(I)}}if(r[b].Floccategory==="L"&&r[b].lam){var L={Funcloc:r[b].Functionallocation,Lrpid:r[b].lam.Lrpid,Strtptatr:r[b].lam.Strtptatr,Endptatr:r[b].lam.Endptatr,Length:r[b].lam.Length,LinUnit:r[b].lam.LinUnit,Startmrkr:r[b].lam.Startmrkr,Endmrkr:r[b].lam.Endmrkr,Mrkdisst:r[b].lam.Mrkdisst,Mrkdisend:r[b].lam.Mrkdisend,MrkrUnit:r[b].lam.MrkrUnit};T.FLLAM.push(L)}var y=r[b].classItems;if(y){if(y.length>0){for(var D=0;D<y.length;D++){var k={Funcloc:r[b].Functionallocation,Classtype:y[D].Classtype,Class:y[D].Class,Clstatus1:y[D].Clstatus1};T.FLClass.push(k)}}}var F=r[b].characteristics;if(F){if(F.length>0){for(var A=0;A<F.length;A++){var w={Funcloc:r[b].Functionallocation,Atnam:F[A].Atnam,Textbez:F[A].Textbez,Atwrt:F[A].Atwrt,Class:F[A].Class};T.FLVal.push(w)}}}var q=r[b].linearChar;if(q){if(q.length>0){var W=$.map(q,function(e){return $.extend(true,{},e)});for(var A=0;A<W.length;A++){delete W[A].linCharEnable;W[A].Funcloc=r[b].Functionallocation;T.FLLAMCH.push(W[A])}}}}}if(n.length>0){var B=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var N=0;N<n.length;N++){var O={Herst:n[N].Herst,Equnr:n[N].Equnr,Txtmi:n[N].Eqktx,Swerk:n[N].Maintplant,Name1:n[N].MaintplantDesc,TplnEilo:n[N].Tplnr,Flocdescription:n[N].Pltxt,Eqtyp:n[N].EquipmentCatogory,Etytx:n[N].EquipCatgDescription,Eqart:n[N].TechnicalObjectTyp,Eartx:n[N].Description,Typbz:n[N].Typbz,SubmEeqz:n[N].ConstrType,Constdesc:n[N].ConstructionDesc,BukrEilo:n[N].Bukrs,Butxt:n[N].Butxt,HequEeqz:n[N].SuperordinateEquip,SuperordEqDes:n[N].SuperordinateEquipDesc,TidnEeqz:n[N].TechIdNum,KostEilo:n[N].Kostl,KokrEilo:n[N].Kokrs,Contareaname:n[N].Mctxt,StorEilo:n[N].Location,Locationdesc:n[N].Locationdesc,AbckEilo:n[N].Abckz,Abctx:n[N].Abctx,PplaEeqz:n[N].Werks,Planningplantdes:n[N].Planningplantdes,IngrEeqz:n[N].Ingrp,Plannergrpdesc:n[N].Innam,Serge:n[N].Serge,MapaEeqz:n[N].MapaEeqz,Stattext:n[N].Stattext,StsmEqui:n[N].StsmEqui,Statproftxt:n[N].StsmEquiDesc,UstwEqui:n[N].UstwEqui,UswoEqui:n[N].UswoEqui,UstaEqui:n[N].UstaEqui,Deact:n[N].Deact,Answt:n[N].Answt,Ansdt:t._formatDate(n[N].Ansdt),Waers:n[N].Waers,ArbpEilo:n[N].Arbpl,WorkCenterPlant:n[N].WcWerks,ArbpEeqz:n[N].MainArbpl,MainWcPlant:n[N].MainWerks,BebeEilo:n[N].BeberFl,Fing:n[N].Fing,Tele:n[N].Tele,HeqnEeqz:n[N].EquipPosition,Adrnr:n[N].Adrnr,Adrnri:n[N].Adrnri,Funcid:n[N].Funcid,Frcfit:n[N].Frcfit,Frcrmv:n[N].Frcrmv,Modelid:"",Type:n[N].viewParameter==="create"?true:false,Ppeguid:n[N].Ppeguid};if(B&&B.length>0){var v=B[N].DOI;O.Swerki=v[0].instLoc?"R":v[0].maintenance?"D":"";O.Storti=v[1].instLoc?"R":v[1].maintenance?"D":"";O.Beberi=v[2].instLoc?"R":v[2].maintenance?"D":"";O.Ppsidi=v[3].instLoc?"R":v[3].maintenance?"D":"";O.Abckzi=v[4].instLoc?"R":v[4].maintenance?"D":"";O.Kostli=v[5].instLoc?"R":v[5].maintenance?"D":"";O.Iwerki=v[6].instLoc?"R":v[6].maintenance?"D":"";O.Ingrpi=v[7].instLoc?"R":v[7].maintenance?"D":"";O.Gewrki=v[8].instLoc?"R":v[8].maintenance?"D":"";O.Adrnri=v[10].instLoc?"R":v[10].maintenance?"D":""}T.Equipment.push(O);var R={Equi:n[N].Equnr,PlanvPrt:n[N].PlanvPrt,SteufPrt:n[N].SteufPrt,KtschPrt:n[N].KtschPrt,Ewformprt:n[N].Ewformprt,SteufRef:n[N].SteufRef,KtschRef:n[N].KtschRef,EwformRef:n[N].EwformRef};T.EqPRT.push(R);if(n[N].EquipmentCatogory==="L"&&n[N].lam){var U={Equi:n[N].Equnr,Lrpid:n[N].lam.Lrpid,Strtptatr:n[N].lam.Strtptatr,Endptatr:n[N].lam.Endptatr,Length:n[N].lam.Length,LinUnit:n[N].lam.LinUnit,Startmrkr:n[N].lam.Startmrkr,Endmrkr:n[N].lam.Endmrkr,Mrkdisst:n[N].lam.Mrkdisst,Mrkdisend:n[N].lam.Mrkdisend,MrkrUnit:n[N].lam.MrkrUnit};T.EqLAM.push(U)}var z={Equi:n[N].Equnr,Title:n[N].TitleCode,Name1:n[N].Name1,Name2:n[N].Name2,Name3:n[N].Name3,Name4:n[N].Name4,Sort1:n[N].Sort1,Sort2:n[N].Sort2,NameCo:n[N].NameCo,PostCod1:n[N].PostCod1,City1:n[N].City1,Building:n[N].Building,Floor:n[N].Floor,Roomnum:n[N].Roomnum,Strsuppl1:n[N].Strsuppl1,Strsuppl2:n[N].Strsuppl2,Strsuppl3:n[N].Strsuppl3,Location:n[N].AddrLocation,RefPosta:n[N].RefPosta,Landx:n[N].Landx,TimeZone:n[N].TimeZone,RfePost:n[N].Region,Regiotxt:n[N].RegionDesc};T.EqAddr.push(z);var K=n[N].intlAddr;if(K){for(var V=0;V<K.length;V++){T.EqAddrI.push(K[V])}}if(n[N].dfps){var H={Equi:n[N].Equnr,DeviceId:n[N].dfps.Tailno,Topsiteid:n[N].dfps.Area,Topsitede:n[N].dfps.AreaDesc,AreaPro:n[N].dfps.AreaPrfl,SiteId:n[N].dfps.Site,SiteDesc:n[N].dfps.SiteDesc,SitePro:n[N].dfps.SitePrfl,MpoId:n[N].dfps.MPO,MpoDescr:n[N].dfps.MPODesc,RicId:n[N].dfps.RIC,RicDescr:n[N].dfps.RICDesc,ModelId:n[N].dfps.ModelId,ModelDes:n[N].dfps.ModelIdDesc,Foreignob:l.truetoX(n[N].dfps.ForeignEq),TecState:n[N].dfps.TechSts,DepState:n[N].dfps.OperSts,DfpsRmrk:n[N].dfps.Remark};T.EqDFPS.push(H)}var G=n[N].classItems;if(G){if(G.length>0){for(var j=0;j<G.length;j++){var Q={Equi:n[N].Equnr,Classtype:G[j].Classtype,Class:G[j].Class,Clstatus1:G[j].Clstatus1};T.EqClass.push(Q)}}}var _=n[N].characteristics;if(_){if(_.length>0){for(var J=0;J<_.length;J++){var Z={Equi:n[N].Equnr,Atnam:_[J].Atnam,Textbez:_[J].Textbez,Atwrt:_[J].Atwrt,Class:_[J].Class};T.EqVal.push(Z)}}}var q=n[N].linearChar;if(q){if(q.length>0){var W=$.map(q,function(e){return $.extend(true,{},e)});for(var A=0;A<W.length;A++){delete W[A].linCharEnable;W[A].Equi=n[N].Equnr;T.EqLAMCH.push(W[A])}}}var X=sap.ui.getCore().getModel("ainMOP").getData();for(var V=0;V<X.length;V++){if(O.Equnr===X[V].key){O.Modelid=X[V].AIN.Modelid}}}}if(s.length>0){for(var Y=0;Y<s.length;Y++){var ee={Point:s[Y].Mspoint,Equnr:s[Y].Equnr,Eqktx:s[Y].Eqktx,Tplnr:s[Y].Tplnr,Floctxt:s[Y].Pltxt,Mptyp:s[Y].Mptyp,Mpttx:s[Y].Mpttx,Codgr:s[Y].Codgr,Codgrtxt:s[Y].Codgrtxt,ObtypMs:s[Y].ObtypMs,Objtypetxt:s[Y].Txt,AtnamMs:s[Y].AtnamMs,Atbez:s[Y].Atbez,Indct:s[Y].Indct,Cdsuf:s[Y].Cdsuf,Cjumc:s[Y].Cjumc,Desir:s[Y].Desir,Pyeac:s[Y].Pyeac,Mrmin:s[Y].Mrmin,Mrmax:s[Y].Mrmax,Pttxt:s[Y].Pttxt,Psort:s[Y].Psort,Inact:s[Y].Inact,Mseh6:s[Y].Mseh6,Msehl:s[Y].Msehl,Decim:s[Y].Decim.toString(),Locas:s[Y].Locas,Maktx:s[Y].Maktx,Begru:s[Y].Begru,Begtx:s[Y].Begtx,Expon:s[Y].Expon,Mrngu:s[Y].Mrngu,Dstxt:s[Y].Dstxt,Indrv:s[Y].Indrv,Indtr:s[Y].readTransfSel,Trans:s[Y].readTransf,Type:s[Y].viewParameter==="create"?true:false};T.MSPoint.push(ee);if(s[Y].Mptyp==="L"&&s[Y].lam){var te={Mspoint:s[Y].Mspoint,Lrpid:s[Y].lam.Lrpid,Strtptatr:s[Y].lam.Strtptatr,Endptatr:s[Y].lam.Endptatr,Length:s[Y].lam.Length,LinUnit:s[Y].lam.LinUnit,Startmrkr:s[Y].lam.Startmrkr,Endmrkr:s[Y].lam.Endmrkr,Mrkdisst:s[Y].lam.Mrkdisst,Mrkdisend:s[Y].lam.Mrkdisend,MrkrUnit:s[Y].lam.MrkrUnit};T.MSLAM.push(te)}var ae=s[Y].classItems;if(ae){if(ae.length>0){for(var re=0;re<ae.length;re++){var le={Mspoint:s[Y].Mspoint,Classtype:ae[re].Classtype,Class:ae[re].Class,Clstatus1:ae[re].Clstatus1};T.MSClass.push(le)}}}var ne=s[Y].characteristics;if(ne){if(ne.length>0){for(var se=0;se<ne.length;se++){var oe={Mspoint:s[Y].Mspoint,Atnam:ne[se].Atnam,Textbez:ne[se].Textbez,Atwrt:ne[se].Atwrt,Class:ne[se].Class};T.MSVal.push(oe)}}}}}if(o.length>0){for(var ie=0;ie<o.length;ie++){var de={Warpl:o[ie].Warpl,Abrho:o[ie].Abrho,Hunit:o[ie].Hunit,Mptyp:o[ie].Mptyp,Wptxt:o[ie].Wptxt,Stich:o[ie].Stich.toString(),Fabkl:o[ie].Fabkl,FabklDesc:o[ie].FabklDesc,Sfakt:o[ie].Sfakt,Andor:t.parseValue(o[ie].Andor),Mehrfach:t.parseValue(o[ie].Mehrfach),Strat:o[ie].Strat,StratDesc:o[ie].StratDesc,Wset:o[ie].Wset,Startdate:t._formatDate(o[ie].Stadt),Unitc:o[ie].Unitc,Szaeh:o[ie].Szaeh,PointStp:o[ie].Mpcycleno,Vspos:o[ie].Vspos,Topos:o[ie].Topos,Vsneg:o[ie].Vsneg,Toneg:o[ie].Toneg,Horiz:o[ie].Horiz,CallConf:o[ie].CallConf,PlanSort:o[ie].PlanSort,Begru:o[ie].Begru,InactMp:o[ie].Deact};T.MPLAN.push(de);var ce=o[ie].itemModel;if(ce){for(var pe=0;pe<ce.length;pe++){var ue={Mplan:o[ie].Warpl,Qmart:ce[pe].Qmart,Qmartx:ce[pe].nTypeTxt,PlntMi:ce[pe].Werks,Planningplantdes:ce[pe].Planningplantdes,IngrpMi:ce[pe].Ingrp,Plannergrpdesc:ce[pe].Innam,Pstxt:ce[pe].Pstxt,WergwMi:ce[pe].WergwMi,ArbpMi:ce[pe].ArbpMi,Auart:ce[pe].Auart,Ordertypedesc:ce[pe].oTypeTxt,Bautl:ce[pe].AsmblyOb,Cycleseq:ce[pe].Cycleseq,Equnr:ce[pe].Equnr,Equipdesc:ce[pe].Eqktx,TplnrMi:ce[pe].Tplnr,Flocdesc:ce[pe].Pltxt,Mitemnumb:ce[pe].Mitemnumb,PlnnrMi:ce[pe].PlnnrMi,PlntyMi:ce[pe].PlntyMi,PlnalMi:ce[pe].PlnalMi,SwerkMil:ce[pe].SwerkMil,StortMil:ce[pe].StortMil,MsgrpIl:ce[pe].MsgrpIl,BeberMil:ce[pe].BeberMil,Fing:ce[pe].Fing,ArbplIl:ce[pe].ArbplIl,AbckzIl:ce[pe].AbckzIl,EqfnrIl:ce[pe].EqfnrIl,BukrsMil:ce[pe].BukrsMil,Butxt:ce[pe].Butxt,City:ce[pe].City,Anln1Mil:ce[pe].Anln1Mil,Anln2Mil:ce[pe].Anln2Mil,GsberIl:ce[pe].GsberIl,KostlMil:ce[pe].KostlMil,KokrsMil:ce[pe].KokrsMil,Posid:ce[pe].Posid,AufnrIl:ce[pe].AufnrIl};T.MPItem.push(ue);if(ce[pe].lam){var te={Mplan:o[ie].Warpl,Mitemnumb:ce[pe].lam.Mitemnumb,Lrpid:ce[pe].lam.Lrpid,Strtptatr:ce[pe].lam.Strtptatr,Endptatr:ce[pe].lam.Endptatr,Length:ce[pe].lam.Length,LinUnit:ce[pe].lam.LinUnit,Startmrkr:ce[pe].lam.Startmrkr,Endmrkr:ce[pe].lam.Endmrkr,Mrkdisst:ce[pe].lam.Mrkdisst,Mrkdisend:ce[pe].lam.Mrkdisend,MrkrUnit:ce[pe].lam.MrkrUnit};T.MPLAM.push(te)}}}var ge=o[ie].cycleModel;if(ge){for(var me=0;me<ge.length;me++){var fe={Mplan:o[ie].Warpl,Point:ge[me].Point,PointTxt:ge[me].Psort,Offset:ge[me].Offset,Ofsetunit:ge[me].Ofsetunit,PakText:ge[me].PakText,Zeieh:ge[me].Zeieh,Zykl1:ge[me].Zykl1,Cycleseqi:ge[me].Cycleseqi,Mpcycleno:ge[me].Mpcycleno};T.MPCycle.push(fe)}}var he=o[ie].ObjListItems;if(he){for(var V=0;V<he.length;V++){var Se={AsmblyOb:he[V].AsmblyOb,EquiObj:he[V].EquiObj,FlocObj:he[V].FlocObj,MatnrObj:he[V].MatnrObj,Mitemnumb:he[V].Mitemnumb,Mplan:he[V].Warpl};T.MPOBList.push(Se)}}var ae=o[ie].classItems;if(ae){if(ae.length>0){for(var re=0;re<ae.length;re++){var le={Mplan:o[ie].Warpl,Classtype:ae[re].Classtype,Class:ae[re].Class,Clstatus1:ae[re].Clstatus1};T.ClassMpl.push(le)}}}var ne=o[ie].characteristics;if(ne){if(ne.length>0){for(var se=0;se<ne.length;se++){var oe={Mplan:o[ie].Warpl,Atnam:ne[se].Atnam,Textbez:ne[se].Textbez,Atwrt:ne[se].Atwrt,Class:ne[se].Class};T.ValuaMpl.push(oe)}}}}}if(i.length>0){for(var se=0;se<i.length;se++){var Te={Matnr:i[se].Matnr,Stlan:i[se].Stlan,Werks:i[se].Werks,Stalt:i[se].Stalt,Pmbomtech:i[se].Pmbomtech?i[se].Pmbomtech:"",PmbomtechTxt:i[se].PmbomtechTxt?i[se].PmbomtechTxt:"",Bomstatus:i[se].Bomstatus,Lngtxt:i[se].Lngtxt,Txtmi:i[se].Lngtxt,Stktx:i[se].Stktx,Validfrom:this._formatDate(i[se].Validfrom),Baseqty:i[se].BaseQty,Baseuom:i[se].BaseUom,Validtoda:this._formatDate(i[se].Validtoda)};T.MRBHeader.push(Te);if(i[se].matItem){for(var Y=0;Y<i[se].matItem.length;Y++){var Me={Matnr:i[se].Matnr,Stlan:i[se].Stlan,Werks:i[se].Werks,Bomitmpos:i[se].matItem[Y].Bomitmpos,Itemcat:i[se].matItem[Y].Itemcat,Itemcomp:i[se].matItem[Y].Itemcomp,Compdesc:"",Itmqty:i[se].matItem[Y].Itmqty,Itmuom:i[se].matItem[Y].Itmuom,Recurallo:i[se].matItem[Y].Recurallo,Erskz:i[se].matItem[Y].Erskz,Rvrel:i[se].matItem[Y].Rvrel==="0"?"":i[se].matItem[Y].Rvrel,Sanfe:i[se].matItem[Y].Sanfe,Sanin:i[se].matItem[Y].Sanin,Sanko:i[se].matItem[Y].Sanko,Itmcmpdesc:i[se].matItem[Y].Itmcmpdesc,Costgrelv:i[se].matItem[Y].Costgrelv==="0"?"":i[se].matItem[Y].Costgrelv};if(i[se].bomType==="Change"){Me.Bomitmnod=i[se].matItem[Y].Bomitmnod}if(i[se].matItem[Y].Itemcat==="N"){Me.Ekorg=i[se].matItem[Y].Ekorg;Me.Ekotx=i[se].matItem[Y].Ekotx;Me.Ekgrp=i[se].matItem[Y].Ekgrp;Me.Eknam=i[se].matItem[Y].Eknam;Me.Preis=i[se].matItem[Y].Preis;Me.Waers=i[se].matItem[Y].Waers;Me.Peinh=i[se].matItem[Y].Peinh;Me.Matkl=i[se].matItem[Y].Matkl;Me.Wgbez=i[se].matItem[Y].Wgbez;Me.Potx1=i[se].matItem[Y].Potx1}else if(i[se].matItem[Y].Itemcat==="D"){Me.Bomdocitm=i[se].matItem[Y].Bomdocitm;Me.Bomitmdkr=i[se].matItem[Y].Bomitmdkr;Me.BomitmdkrTxt=i[se].matItem[Y].BomitmdkrTxt;Me.Bomitmdtl=i[se].matItem[Y].Bomitmdtl;Me.Bomitmdvr=i[se].matItem[Y].Bomitmdvr}else if(i[se].matItem[Y].Itemcat==="R"){Me.Roms1=i[se].matItem[Y].Roms1;Me.Romei=i[se].matItem[Y].Romei;Me.Roms2=i[se].matItem[Y].Roms2;Me.Roms3=i[se].matItem[Y].Roms3;Me.Rform=i[se].matItem[Y].Rform;Me.Roanz=i[se].matItem[Y].Roanz;Me.Romen=i[se].matItem[Y].Romen;Me.Rokme=i[se].matItem[Y].Rokme}else if(i[se].matItem[Y].Itemcat==="T"){Me.Potx1=i[se].matItem[Y].Potx1}T.MRBItem.push(Me)}}if(i[se].matSubItem){for(var ie=0;ie<i[se].matSubItem.length;ie++){var be={Matnr:i[se].Matnr,Stlan:i[se].Stlan,Werks:i[se].Werks,Posnr:i[se].matSubItem[ie].Posnr,Bomitmnod:i[se].matSubItem[ie].Bomitmnod,Bomsubno:i[se].matSubItem[ie].Bomsubno,Ebort:i[se].matSubItem[ie].Ebort,Upmng:i[se].matSubItem[ie].Upmng,Uptxt:i[se].matSubItem[ie].Uptxt};T.MRBSBIT.push(be)}}}}if(d.length>0){for(var se=0;se<d.length;se++){var Ee={Eqnrbom:d[se].Eqnrbom,Stlan:d[se].Stlan,Werks:d[se].Werks,Bomstatus:d[se].Bomstatus,Lngtxt:d[se].Lngtxt,Txtmi:d[se].Lngtxt,Stktx:d[se].Stktx,Validfrom:this._formatDate(d[se].Validfrom),Baseqty:d[se].BaseQty,Baseuom:d[se].BaseUom,Validtoda:this._formatDate(d[se].Validtoda)};T.EBHeader.push(Ee);if(d[se].eqItem){for(var Y=0;Y<d[se].eqItem.length;Y++){var ve={Eqnrbom:d[se].Eqnrbom,Stlan:d[se].Stlan,Werks:d[se].Werks,Bomitmpos:d[se].eqItem[Y].Bomitmpos,Itemcat:d[se].eqItem[Y].Itemcat,Itemcomp:d[se].eqItem[Y].Itemcomp,Compdesc:"",Itmqty:d[se].eqItem[Y].Itmqty,Itmuom:d[se].eqItem[Y].Itmuom,Recurallo:d[se].eqItem[Y].Recurallo,Erskz:d[se].eqItem[Y].Erskz,Rvrel:d[se].eqItem[Y].Rvrel==="0"?"":d[se].eqItem[Y].Rvrel,Sanfe:d[se].eqItem[Y].Sanfe,Sanin:d[se].eqItem[Y].Sanin,Sanko:d[se].eqItem[Y].Sanko,Itmcmpdesc:d[se].eqItem[Y].Itmcmpdesc,Costgrelv:d[se].eqItem[Y].Costgrelv==="0"?"":d[se].eqItem[Y].Costgrelv};if(d[se].bomType==="Change"){ve.Bomitmnod=d[se].eqItem[Y].Bomitmnod}if(d[se].eqItem[Y].Itemcat==="N"){ve.Ekorg=d[se].eqItem[Y].Ekorg;ve.Ekotx=d[se].eqItem[Y].Ekotx;ve.Ekgrp=d[se].eqItem[Y].Ekgrp;ve.Eknam=d[se].eqItem[Y].Eknam;ve.Preis=d[se].eqItem[Y].Preis;ve.Waers=d[se].eqItem[Y].Waers;ve.Peinh=d[se].eqItem[Y].Peinh;ve.Matkl=d[se].eqItem[Y].Matkl;ve.Wgbez=d[se].eqItem[Y].Wgbez;ve.Potx1=d[se].eqItem[Y].Potx1}else if(d[se].eqItem[Y].Itemcat==="D"){ve.Bomdocitm=d[se].eqItem[Y].Bomdocitm;ve.Bomitmdkr=d[se].eqItem[Y].Bomitmdkr;ve.BomitmdkrTxt=d[se].eqItem[Y].BomitmdkrTxt;ve.Bomitmdtl=d[se].eqItem[Y].Bomitmdtl;ve.Bomitmdvr=d[se].eqItem[Y].Bomitmdvr}else if(d[se].eqItem[Y].Itemcat==="R"){ve.Roms1=d[se].eqItem[Y].Roms1;ve.Romei=d[se].eqItem[Y].Romei;ve.Roms2=d[se].eqItem[Y].Roms2;ve.Roms3=d[se].eqItem[Y].Roms3;ve.Rform=d[se].eqItem[Y].Rform;ve.Roanz=d[se].eqItem[Y].Roanz;ve.Romen=d[se].eqItem[Y].Romen;ve.Rokme=d[se].eqItem[Y].Rokme}else if(d[se].eqItem[Y].Itemcat==="T"){ve.Potx1=d[se].eqItem[Y].Potx1}T.EBItem.push(ve)}}if(d[se].eqSubItem){for(var ie=0;ie<d[se].eqSubItem.length;ie++){var Ce={Eqnrbom:d[se].Eqnrbom,Stlan:d[se].Stlan,Werks:d[se].Werks,Posnr:d[se].eqSubItem[ie].Posnr,Bomitmnod:d[se].eqSubItem[ie].Bomitmnod,Bomsubno:d[se].eqSubItem[ie].Bomsubno,Ebort:d[se].eqSubItem[ie].Ebort,Upmng:d[se].eqSubItem[ie].Upmng,Uptxt:d[se].eqSubItem[ie].Uptxt};T.EBSBIT.push(Ce)}}}}if(c.length>0){for(var se=0;se<c.length;se++){var xe={Tplnrbom:c[se].Tplnrbom,Stlan:c[se].Stlan,Werks:c[se].Werks,Bomstatus:c[se].Bomstatus,Lngtxt:c[se].Lngtxt,Txtmi:c[se].Lngtxt,Stktx:c[se].Stktx,Validfrom:this._formatDate(c[se].Validfrom),Baseqty:c[se].BaseQty,Baseuom:c[se].BaseUom,Validtoda:this._formatDate(c[se].Validtoda)};T.FBHeader.push(xe);if(c[se].flItem){for(var Y=0;Y<c[se].flItem.length;Y++){var Ve={Tplnrbom:c[se].Tplnrbom,Stlan:c[se].Stlan,Werks:c[se].Werks,Bomitmpos:c[se].flItem[Y].Bomitmpos,Itemcat:c[se].flItem[Y].Itemcat,Itemcomp:c[se].flItem[Y].Itemcomp,Compdesc:"",Itmqty:c[se].flItem[Y].Itmqty,Itmuom:c[se].flItem[Y].Itmuom,Recurallo:c[se].flItem[Y].Recurallo,Erskz:c[se].flItem[Y].Erskz,Rvrel:c[se].flItem[Y].Rvrel==="0"?"":c[se].flItem[Y].Rvrel,Sanfe:c[se].flItem[Y].Sanfe,Sanin:c[se].flItem[Y].Sanin,Sanko:c[se].flItem[Y].Sanko,Itmcmpdesc:c[se].flItem[Y].Itmcmpdesc,Costgrelv:c[se].flItem[Y].Costgrelv==="0"?"":c[se].flItem[Y].Costgrelv};if(c[se].bomType==="Change"){Ve.Bomitmnod=c[se].flItem[Y].Bomitmnod}if(c[se].flItem[Y].Itemcat==="N"){Ve.Ekorg=c[se].flItem[Y].Ekorg;Ve.Ekotx=c[se].flItem[Y].Ekotx;Ve.Ekgrp=c[se].flItem[Y].Ekgrp;Ve.Eknam=c[se].flItem[Y].Eknam;Ve.Preis=c[se].flItem[Y].Preis;Ve.Waers=c[se].flItem[Y].Waers;Ve.Peinh=c[se].flItem[Y].Peinh;Ve.Matkl=c[se].flItem[Y].Matkl;Ve.Wgbez=c[se].flItem[Y].Wgbez;Ve.Potx1=c[se].flItem[Y].Potx1}else if(c[se].flItem[Y].Itemcat==="D"){Ve.Bomdocitm=c[se].flItem[Y].Bomdocitm;Ve.Bomitmdkr=c[se].flItem[Y].Bomitmdkr;Ve.BomitmdkrTxt=c[se].flItem[Y].BomitmdkrTxt;Ve.Bomitmdtl=c[se].flItem[Y].Bomitmdtl;Ve.Bomitmdvr=c[se].flItem[Y].Bomitmdvr}else if(c[se].flItem[Y].Itemcat==="R"){Ve.Roms1=c[se].flItem[Y].Roms1;Ve.Romei=c[se].flItem[Y].Romei;Ve.Roms2=c[se].flItem[Y].Roms2;Ve.Roms3=c[se].flItem[Y].Roms3;Ve.Rform=c[se].flItem[Y].Rform;Ve.Roanz=c[se].flItem[Y].Roanz;Ve.Romen=c[se].flItem[Y].Romen;Ve.Rokme=c[se].flItem[Y].Rokme}else if(c[se].flItem[Y].Itemcat==="T"){Ve.Potx1=c[se].flItem[Y].Potx1}T.FBItem.push(Ve)}}if(c[se].flSubItem){for(var ie=0;ie<c[se].flSubItem.length;ie++){var Pe={Tplnrbom:c[se].Tplnrbom,Stlan:c[se].Stlan,Werks:c[se].Werks,Posnr:c[se].flSubItem[ie].Posnr,Bomitmnod:c[se].flSubItem[ie].Bomitmnod,Bomsubno:c[se].flSubItem[ie].Bomsubno,Ebort:c[se].flSubItem[ie].Ebort,Upmng:c[se].flSubItem[ie].Upmng,Uptxt:c[se].flSubItem[ie].Uptxt};T.FBSBIT.push(Pe)}}}}if(p.length>0){for(var se=0;se<p.length;se++){var Ie={WbsExt:p[se].WbsExt,MatnrWbs:p[se].Matnr,Stlan:p[se].Stlan,Werks:p[se].Werks,Bomstatus:p[se].Bomstatus,Lngtxt:p[se].Lngtxt,Txtmi:p[se].Lngtxt,Stktx:p[se].Stktx,Validfrom:this._formatDate(p[se].Validfrom),Baseqty:p[se].BaseQty,Baseuom:p[se].BaseUom,Validtoda:this._formatDate(p[se].Validtoda)};T.WBHeader.push(Ie);if(p[se].wbsItem){for(var Y=0;Y<p[se].wbsItem.length;Y++){var Le={WbsExt:p[se].WbsExt,MatnrWbs:p[se].Matnr,Stlan:p[se].Stlan,Werks:p[se].Werks,Bomitmpos:p[se].wbsItem[Y].Bomitmpos,Itemcat:p[se].wbsItem[Y].Itemcat,Itemcomp:p[se].wbsItem[Y].Itemcomp,Compdesc:"",Itmqty:p[se].wbsItem[Y].Itmqty,Itmuom:p[se].wbsItem[Y].Itmuom,Recurallo:p[se].wbsItem[Y].Recurallo,Erskz:p[se].wbsItem[Y].Erskz,Rvrel:p[se].wbsItem[Y].Rvrel==="0"?"":p[se].wbsItem[Y].Rvrel,Sanfe:p[se].wbsItem[Y].Sanfe,Sanin:p[se].wbsItem[Y].Sanin,Sanko:p[se].wbsItem[Y].Sanko,Itmcmpdesc:p[se].wbsItem[Y].Itmcmpdesc,Costgrelv:p[se].wbsItem[Y].Costgrelv==="0"?"":p[se].wbsItem[Y].Costgrelv};if(p[se].bomType==="Change"){Le.Bomitmnod=p[se].wbsItem[Y].Bomitmnod}if(p[se].wbsItem[Y].Itemcat==="N"){Le.Ekorg=p[se].wbsItem[Y].Ekorg;Le.Ekotx=p[se].wbsItem[Y].Ekotx;Le.Ekgrp=p[se].wbsItem[Y].Ekgrp;Le.Eknam=p[se].wbsItem[Y].Eknam;Le.Preis=p[se].wbsItem[Y].Preis;Le.Waers=p[se].wbsItem[Y].Waers;Le.Peinh=p[se].wbsItem[Y].Peinh;Le.Matkl=p[se].wbsItem[Y].Matkl;Le.Wgbez=p[se].wbsItem[Y].Wgbez;Le.Potx1=p[se].wbsItem[Y].Potx1}else if(p[se].wbsItem[Y].Itemcat==="D"){Le.Bomdocitm=p[se].wbsItem[Y].Bomdocitm;Le.Bomitmdkr=p[se].wbsItem[Y].Bomitmdkr;Le.BomitmdkrTxt=p[se].wbsItem[Y].BomitmdkrTxt;Le.Bomitmdtl=p[se].wbsItem[Y].Bomitmdtl;Le.Bomitmdvr=p[se].wbsItem[Y].Bomitmdvr}else if(p[se].wbsItem[Y].Itemcat==="R"){Le.Roms1=p[se].wbsItem[Y].Roms1;Le.Romei=p[se].wbsItem[Y].Romei;Le.Roms2=p[se].wbsItem[Y].Roms2;Le.Roms3=p[se].wbsItem[Y].Roms3;Le.Rform=p[se].wbsItem[Y].Rform;Le.Roanz=p[se].wbsItem[Y].Roanz;Le.Romen=p[se].wbsItem[Y].Romen;Le.Rokme=p[se].wbsItem[Y].Rokme}else if(p[se].wbsItem[Y].Itemcat==="T"){Le.Potx1=p[se].wbsItem[Y].Potx1}T.WBItem.push(Le)}}if(p[se].wbsSubItem){for(var ie=0;ie<p[se].wbsSubItem.length;ie++){var ye={WbsExt:p[se].WbsExt,MatnrWbs:p[se].Matnr,Stlan:p[se].Stlan,Werks:p[se].Werks,Posnr:p[se].wbsSubItem[ie].Posnr,Bomitmnod:p[se].wbsSubItem[ie].Bomitmnod,Bomsubno:p[se].wbsSubItem[ie].Bomsubno,Ebort:p[se].wbsSubItem[ie].Ebort,Upmng:p[se].wbsSubItem[ie].Upmng,Uptxt:p[se].wbsSubItem[ie].Uptxt};T.WBSBIT.push(ye)}}}}if(u.length>0){for(var se=0;se<u.length;se++){var De={Objnetwrk:u[se].Objnetwrk,Netgrp:u[se].Netgrp,Netwtyp:u[se].Netwtyp,Netxt:u[se].Netxt,Ntobjtyp:u[se].Ntobjtyp};T.ONetwork.push(De);if(u[se].lam){var ke={Objnetwrk:u[se].Objnetwrk,Lrpid:u[se].lam.Lrpid,Strtptatr:u[se].lam.Strtptatr,Endptatr:u[se].lam.Endptatr,Length:u[se].lam.Length,LinUnit:u[se].lam.LinUnit,Startmrkr:u[se].lam.Startmrkr,Endmrkr:u[se].lam.Endmrkr,Mrkdisst:u[se].lam.Mrkdisst,Mrkdisend:u[se].lam.Mrkdisend,MrkrUnit:u[se].lam.MrkrUnit};T.ONLAM.push(ke)}}}if(g.length>0){for(var se=0;se<g.length;se++){var Te={Werks:g[se].plant,Arbpl:g[se].wc,Txtmi:g[se].wcDesc,Verwe:g[se].wcCat,Crveran:g[se].person,Planv:g[se].usg,Vgwts:g[se].stdVal,Crsteus:g[se].ctrlKey};if(g[se].hasOwnProperty("Type")){if(g[se].Type==="X"){Te.Type="X"}}T.Workcenter.push(Te);if(g[se].cost){for(var Y=0;Y<g[se].cost.length;Y++){var Fe={Werks:g[se].cost[Y].CrKokrs,Arbpl:g[se].wc,CrKostl:g[se].cost[Y].CrKostl,Costcentxt:g[se].cost[Y].Costcentxt,CrLstar:g[se].cost[Y].CrLstar,Forn1:g[se].cost[Y].Forn1,ActvttypeTxt:g[se].cost[Y].ActvttypeTxt,Frmltxt:g[se].cost[Y].Frmltxt,Begda:l._formatDate(g[se].cost[Y].Begda),Endda:l._formatDate(g[se].cost[Y].Endda)};T.WCCost.push(Fe)}}var Ae=g[se].classItems;if(Ae){if(Ae.length>0){for(var j=0;j<Ae.length;j++){var we={Arbpl:g[se].wc,Werks:g[se].plant,Classtype:Ae[j].Classtype,Class:Ae[j].Class};T.ClassWC.push(we)}}}var qe=g[se].characteristics;if(qe){if(qe.length>0){for(var J=0;J<qe.length;J++){var We={Arbpl:g[se].wc,Werks:g[se].plant,Atnam:qe[J].Atnam,Textbez:qe[J].Textbez,Atwrt:qe[J].Atwrt,Class:qe[J].Class};T.ValueWC.push(We)}}}}}if(m.length>0){for(var se=0;se<m.length;se++){if(m[se].header){for(var Y=0;Y<m[se].header.length;Y++){if(m[se].header[Y].Iwerk!==""){m[se].header[Y].Werks=m[se].header[Y].Iwerk}var Be={Werks:m[se].header[Y].Werks,Wcplant:m[se].header[Y].plant,Statu:m[se].header[Y].Statu,Tverwe:m[se].header[Y].tlusg,Ktext:m[se].header[Y].Ktext,Tarbpl:m[se].header[Y].wc,Vagrp:m[se].header[Y].Vagrp,Anlzu:m[se].header[Y].Anlzu,Tplnal:m[se].header[Y].Plnal.toString(),Tlgnhdr:m[se].grp,Strat:m[se].header[Y].Strat,Datuv:this._formatDate(m[se].validFrm)};T.GTList.push(Be)}}if(m[se].operation){for(var ie=0;ie<m[se].operation.length;ie++){var Ne={Tlgnhdr:m[se].grp,Vornr:m[se].operation[ie].Vornr,TlArbpl:m[se].operation[ie].Arbpl,Werks2gop:m[se].operation[ie].Werks,Steus2gop:m[se].operation[ie].Steus,Ltxa1:m[se].operation[ie].Ltxa1,Arbei:m[se].operation[ie].Arbei,Dauno:m[se].operation[ie].Dauno,Arbeh:m[se].operation[ie].Arbeh,Anzzl:m[se].operation[ie].Anzzl,Daune:m[se].operation[ie].Daune,Indet:m[se].operation[ie].Indet,Tplnal:m[se].operation[ie].Plnal.toString(),Uvorn:m[se].operation[ie].Uvorn,Larnt2gop:m[se].operation[ie].Larnt,Prznt:m[se].operation[ie].workPerc===""?0:parseFloat(m[se].operation[ie].workPerc),Bmvrg:m[se].operation[ie].orderQty,Bmeih:m[se].operation[ie].ordQtyUnit,Opreis:m[se].operation[ie].netPrice===""?"0.000":parseFloat(m[se].operation[ie].netPrice).toFixed(3).toString(),Owaers:m[se].operation[ie].currency,Opeinh:m[se].operation[ie].priceUnit===""?"0.000":parseFloat(m[se].operation[ie].priceUnit).toFixed(3).toString(),Sakto2gop:m[se].operation[ie].costElement,Omatkl:m[se].operation[ie].materialGrp,Oekgrp:m[se].operation[ie].puchGroup,Ekorg:m[se].operation[ie].purchOrg,EqunrGop:m[se].operation[ie].equi,TplnrGop:m[se].operation[ie].floc};T.GTOprs.push(Ne);for(var V=0;V<m[se].operation[ie].OprRel.length;V++){var Oe=m[se].operation[ie].OprRel[V];var Re={Tlgnhdr:m[se].grp,Tplnal:Oe.Plnal.toString(),Vorn2:Oe.Vornr,Vornrgrel:Oe.OperationOR,Dauer:Oe.Offset,Zeinh:Oe.OUn,Aobar:Oe.RelType,Gprznt:Oe.PO,Provg:Oe.OI,Gkalid:Oe.ID,Arbplgrel:Oe.WrkCtrOR,Werksgrel:Oe.PlantOR};T.GTRel.push(Re)}for(var V=0;V<m[se].operation[ie].SrvPckgOvrw.length;V++){var Oe=m[se].operation[ie].SrvPckgOvrw[V];var Ue={Tlgnhdr:m[se].grp,Tplnal:Oe.Plnal.toString(),Vornrr:Oe.Vornr,SrvLine:Oe.LineNum,Del:l.truetoX(Oe.DelIndSP),Srvpos:Oe.ActNum,Ktext1:Oe.ShrtTxt,Mengegspk:Oe.Qty,Meinsgspk:Oe.BUomSP,Tbtwr:Oe.GrossPrc,Waersgspk:Oe.CurKey,IntWork:Oe.Work,Iwein:Oe.UnitOfWork};T.GTSpack.push(Ue)}for(var V=0;V<m[se].operation[ie].PRT.length;V++){var Oe=m[se].operation[ie].PRT[V];var ze={Tlgnhdr:m[se].grp,Tplnal:Oe.Plnal.toString(),Vornrgprt:Oe.Vornr,Psnfh:Oe.ItmNum,Fhmar:Oe.ItmCat,Matnrgprt:Oe.Mat,EqunrGpt:Oe.Equi,Eqpnt:Oe.Mspt,Doknrgprt:Oe.doc,Dokargprt:Oe.docType,Doktlgprt:Oe.docPart,Dokvrgprt:Oe.docVersion,Fhmnr:Oe.Othr,Fhwrk:Oe.Plant,Mgvgw:Oe.Qty,Mgeinh:Oe.UOM,Mgform:Oe.QtyFrmla,Steuf:Oe.PRTCtrl,Stftxt:Oe.PRTCtrlDesc,Ewvgw:Oe.StdUsgVal,Eweinh:Oe.StdUsgUOM,Ewform:Oe.UsgValFrmla};T.GTPRT.push(ze)}for(var V=0;V<m[se].operation[ie].InspChar.length;V++){var Oe=m[se].operation[ie].InspChar[V];var Ke={Tlgnhdr:m[se].grp,Tplnal:Oe.Plnal.toString(),Vornrgins:Oe.Vornr,Merknr:Oe.InspChar,Vste2gins:Oe.PrstInd,Quantitat:l.truetoX(Oe.QuanChar),QpmkRef:l.truetoX(Oe.QualChar),Verw2gins:Oe.MastInspChar,Uzae2tlgn:Oe.Plant,Mkv2tlgni:Oe.Version,Kurztext:Oe.ShrtTxt,Pmth2gins:Oe.InspMthd,Qwe2tlgni:Oe.InspMthdPlnt,Toleranzs:Oe.TolKey,Ver2tlgni:Oe.VrsnInspMthd,Stichprve:Oe.SampProc,Probemgeh:Oe.SampUOM,Pruefeinh:Oe.BaseSampQty===""?"0.00":parseFloat(Oe.BaseSampQty).toFixed(2),Auswmenge:Oe.CodeGrp};T.GTInsp.push(Ke)}}}if(m[se].MaintPckg&&m[se].MaintPckg.length>0){for(var V=0;V<m[se].MaintPckg.length;V++){if(m[se].MaintPckg[V].MPArr&&m[se].MaintPckg[V].MPArr.length>0){for(var P=0;P<m[se].MaintPckg[V].MPArr.length;P++){var He=m[se].MaintPckg[V].MPArr[P];var Ge={Ktex1:He.Ktex1,Ktxhi:He.Ktxhi,Kzyk1:He.Kzyk1,Paketgmpk:He.Paket,Startgmpk:He.Strat,Tlgnhdr:m[se].grp,Tplnal:He.Plnal.toString(),Vorn2gmpk:He.Vornr}}T.GTMPack.push(Ge)}}}if(m[se].component){for(var pe=0;pe<m[se].component.length;pe++){var je={Tlgnhdr:m[se].grp,Idnrk:m[se].component[pe].Idnrk,Menge:m[se].component[pe].Menge,MeinsGcp:m[se].component[pe].MeinsGcp,Vornr:m[se].component[pe].Vornr,Postp:m[se].component[pe].Postp,Tplnal:m[se].component[pe].Plnal.toString()};T.GTComp.push(je)}}if(m[se].Class){for(var me=0;me<m[se].Class.length;me++){var Qe={Tlgnhdr:m[se].grp,Classtype:m[se].Class[me].Classtype,Class:m[se].Class[me].Class,Clstatus1:m[se].Class[me].Clstatus1,Tplnal:m[se].Class[me].Plnal.toString()};T.GTClass.push(Qe)}}if(m[se].Char){for(var _e=0;_e<m[se].Char.length;_e++){var Je={Tlgnhdr:m[se].grp,Atnam:m[se].Char[_e].Atnam,Textbez:m[se].Char[_e].Textbez,Atwrt:m[se].Char[_e].Atwrt,Class:m[se].Char[_e].Class,Tplnal:m[se].Char[_e].Plnal.toString()};T.GTVal.push(Je)}}}}if(f.length>0){for(var se=0;se<f.length;se++){if(f[se].header){for(var Y=0;Y<f[se].header.length;Y++){if(f[se].header[Y].Iwerk!==""){f[se].header[Y].Werks=f[se].header[Y].Iwerk}var $e={Werks:f[se].header[Y].Werks,Wcplant:f[se].header[Y].plant,Statu:f[se].header[Y].Statu,Tverwe:f[se].header[Y].tlusg,Ktext:f[se].header[Y].Ktext,Tarbpl:f[se].header[Y].wc,Vagrp:f[se].header[Y].Vagrp,Anlzu:f[se].header[Y].Anlzu,Tplnal:f[se].header[Y].Plnal.toString(),Tleqhdr:f[se].grp,Strat:f[se].header[Y].Strat,Eq2tl:f[se].header[Y].equipment,Datuv:this._formatDate(f[se].validFrm)};T.ETList.push($e)}}if(f[se].operation){for(var ie=0;ie<f[se].operation.length;ie++){var Ze={Tleqhdr:f[se].grp,Vornr:f[se].operation[ie].Vornr,TlArbpl:f[se].operation[ie].Arbpl,Werks2eop:f[se].operation[ie].Werks,Steus2eop:f[se].operation[ie].Steus,Ltxa1:f[se].operation[ie].Ltxa1,Arbei:f[se].operation[ie].Arbei,Dauno:f[se].operation[ie].Dauno,Arbeh:f[se].operation[ie].Arbeh,Anzzl:f[se].operation[ie].Anzzl,Daune:f[se].operation[ie].Daune,Indet:f[se].operation[ie].Indet,Tplnal:f[se].operation[ie].Plnal.toString(),Uvorn:f[se].operation[ie].Uvorn,Larnt2eop:f[se].operation[ie].Larnt,Prznt:f[se].operation[ie].workPerc===""?0:parseFloat(f[se].operation[ie].workPerc),Bmvrg:f[se].operation[ie].orderQty,Bmeih:f[se].operation[ie].ordQtyUnit,Opreis:f[se].operation[ie].netPrice===""?"0.000":parseFloat(f[se].operation[ie].netPrice).toFixed(3).toString(),Owaers:f[se].operation[ie].currency,Opeinh:f[se].operation[ie].priceUnit===""?"0.000":parseFloat(f[se].operation[ie].priceUnit).toFixed(3).toString(),Sakto2eop:f[se].operation[ie].costElement,Omatkl:f[se].operation[ie].materialGrp,Oekgrp:f[se].operation[ie].puchGroup,Ekorg:f[se].operation[ie].purchOrg,EqunrEop:f[se].operation[ie].equi,TplnrEop:f[se].operation[ie].floc};T.ETOprs.push(Ze);for(var V=0;V<f[se].operation[ie].OprRel.length;V++){var Oe=f[se].operation[ie].OprRel[V];var Re={Tleqhdr:f[se].grp,Tplnal:Oe.Plnal.toString(),Vorn2:Oe.Vornr,Vornrerel:Oe.OperationOR,Dauer:Oe.Offset,Zeinh:Oe.OUn,Aobar:Oe.RelType,Eprznt:Oe.PO,Provg:Oe.OI,Ekalid:Oe.ID,Arbplerel:Oe.WrkCtrOR,Werkserel:Oe.PlantOR};T.ETRel.push(Re)}for(var V=0;V<f[se].operation[ie].SrvPckgOvrw.length;V++){var Oe=f[se].operation[ie].SrvPckgOvrw[V];var Ue={Tleqhdr:f[se].grp,Tplnal:Oe.Plnal.toString(),Vornrr:Oe.Vornr,SrvLine:Oe.LineNum,Del:l.truetoX(Oe.DelIndSP),Srvpos:Oe.ActNum,Ktext1:Oe.ShrtTxt,Mengeespk:Oe.Qty,Meinsespk:Oe.BUomSP,Tbtwr:Oe.GrossPrc,Waersespk:Oe.CurKey,IntWork:Oe.Work,Iwein:Oe.UnitOfWork};T.ETSpack.push(Ue)}for(var V=0;V<f[se].operation[ie].PRT.length;V++){var Oe=f[se].operation[ie].PRT[V];var ze={Tleqhdr:f[se].grp,Tplnal:Oe.Plnal.toString(),Vornreprt:Oe.Vornr,Psnfh:Oe.ItmNum,Fhmar:Oe.ItmCat,Matnreprt:Oe.Mat,EqunrEpt:Oe.Equi,Eqpnt:Oe.Mspt,Doknreprt:Oe.doc,Dokareprt:Oe.docType,Doktleprt:Oe.docPart,Dokvreprt:Oe.docVersion,Fhmnr:Oe.Othr,Fhwrk:Oe.Plant,Mgvgw:Oe.Qty,Mgeinh:Oe.UOM,Mgform:Oe.QtyFrmla,Steuf:Oe.PRTCtrl,Stftxt:Oe.PRTCtrlDesc,Ewvgw:Oe.StdUsgVal,Eweinh:Oe.StdUsgUOM,Ewform:Oe.UsgValFrmla};T.ETPRT.push(ze)}for(var V=0;V<f[se].operation[ie].InspChar.length;V++){var Oe=f[se].operation[ie].InspChar[V];var Ke={Tleqhdr:f[se].grp,Tplnal:Oe.Plnal.toString(),Vornreins:Oe.Vornr,Merknr:Oe.InspChar,Vste2eins:Oe.PrstInd,Quantitat:l.truetoX(Oe.QuanChar),QpmkRef:l.truetoX(Oe.QualChar),Verw2eins:Oe.MastInspChar,Uzae2tlen:Oe.Plant,Mkv2tleni:Oe.Version,Kurztext:Oe.ShrtTxt,Pmth2eins:Oe.InspMthd,Qwe2tleqi:Oe.InspMthdPlnt,Toleranzs:Oe.TolKey,Ver2tleqi:Oe.VrsnInspMthd,Stichprve:Oe.SampProc,Probemgeh:Oe.SampUOM,Pruefeinh:Oe.BaseSampQty===""?"0.00":parseFloat(Oe.BaseSampQty).toFixed(2),Auswmenge:Oe.CodeGrp};T.ETInsp.push(Ke)}}}if(f[se].MaintPckg&&f[se].MaintPckg.length>0){for(var V=0;V<f[se].MaintPckg.length;V++){if(f[se].MaintPckg[V].MPArr&&f[se].MaintPckg[V].MPArr.length>0){for(var P=0;P<f[se].MaintPckg[V].MPArr.length;P++){var He=f[se].MaintPckg[V].MPArr[P];var Ge={Ktex1:He.Ktex1,Ktxhi:He.Ktxhi,Kzyk1:He.Kzyk1,Paketempk:He.Paket,Startempk:He.Strat,Tleqhdr:f[se].grp,Tplnal:He.Plnal.toString(),Vorn2empk:He.Vornr}}T.ETMPack.push(Ge)}}}if(f[se].component){for(var pe=0;pe<f[se].component.length;pe++){var Xe={Tleqhdr:f[se].grp,Idnrk:f[se].component[pe].Idnrk,Menge:f[se].component[pe].Menge,MeinsEcp:f[se].component[pe].MeinsGcp,Vornr:f[se].component[pe].Vornr,Postp:f[se].component[pe].Postp,Tplnal:f[se].component[pe].Plnal.toString()};T.ETComp.push(Xe)}}if(f[se].Class){for(var me=0;me<f[se].Class.length;me++){var Ye={Tleqhdr:f[se].grp,Classtype:f[se].Class[me].Classtype,Class:f[se].Class[me].Class,Clstatus1:f[se].Class[me].Clstatus1,Tplnal:f[se].Class[me].Plnal.toString()};T.ETClass.push(Ye)}}if(f[se].Char){for(var _e=0;_e<f[se].Char.length;_e++){var et={Tleqhdr:f[se].grp,Atnam:f[se].Char[_e].Atnam,Textbez:f[se].Char[_e].Textbez,Atwrt:f[se].Char[_e].Atwrt,Class:f[se].Char[_e].Class,Tplnal:f[se].Char[_e].Plnal.toString()};T.ETVal.push(et)}}}}if(h.length>0){for(var se=0;se<h.length;se++){if(h[se].header){for(var Y=0;Y<h[se].header.length;Y++){if(h[se].header[Y].Iwerk!==""){h[se].header[Y].Werks=h[se].header[Y].Iwerk}var tt={Werks:h[se].header[Y].Werks,Wcplant:h[se].header[Y].plant,Statu:h[se].header[Y].Statu,Tverwe:h[se].header[Y].tlusg,Ktext:h[se].header[Y].Ktext,Tarbpl:h[se].header[Y].wc,Vagrp:h[se].header[Y].Vagrp,Anlzu:h[se].header[Y].Anlzu,Tplnal:h[se].header[Y].Plnal.toString(),Tlflhdr:h[se].grp,Strat:h[se].header[Y].Strat,Fl2tl:h[se].header[Y].floc,Datuv:this._formatDate(f[se].validFrm)};T.FTList.push(tt)}}if(h[se].operation){for(var ie=0;ie<h[se].operation.length;ie++){var at={Tlflhdr:h[se].grp,Vornr:h[se].operation[ie].Vornr,TlArbpl:h[se].operation[ie].Arbpl,Werks2fop:h[se].operation[ie].Werks,Steus2fop:h[se].operation[ie].Steus,Ltxa1:h[se].operation[ie].Ltxa1,Arbei:h[se].operation[ie].Arbei,Dauno:h[se].operation[ie].Dauno,Arbeh:h[se].operation[ie].Arbeh,Anzzl:h[se].operation[ie].Anzzl,Daune:h[se].operation[ie].Daune,Indet:h[se].operation[ie].Indet,Tplnal:h[se].operation[ie].Plnal.toString(),Uvorn:h[se].operation[ie].Uvorn,Larnt2fop:h[se].operation[ie].Larnt,Prznt:h[se].operation[ie].workPerc===""?0:parseFloat(h[se].operation[ie].workPerc),Bmvrg:h[se].operation[ie].orderQty,Bmeih:h[se].operation[ie].ordQtyUnit,Opreis:h[se].operation[ie].netPrice===""?"0.000":parseFloat(h[se].operation[ie].netPrice).toFixed(3).toString(),Owaers:h[se].operation[ie].currency,Opeinh:h[se].operation[ie].priceUnit===""?"0.000":parseFloat(h[se].operation[ie].priceUnit).toFixed(3).toString(),Sakto2fop:h[se].operation[ie].costElement,Omatkl:h[se].operation[ie].materialGrp,Oekgrp:h[se].operation[ie].puchGroup,Ekorg:h[se].operation[ie].purchOrg,EqunrFop:h[se].operation[ie].equi,TplnrFop:h[se].operation[ie].floc};T.FTOprs.push(at);for(var V=0;V<h[se].operation[ie].OprRel.length;V++){var Oe=h[se].operation[ie].OprRel[V];var Re={Tlflhdr:h[se].grp,Tplnal:Oe.Plnal.toString(),Vorn2:Oe.Vornr,Vornrfrel:Oe.OperationOR,Dauer:Oe.Offset,Zeinh:Oe.OUn,Aobar:Oe.RelType,Fprznt:Oe.PO,Provg:Oe.OI,Fkalid:Oe.ID,Arbplfrel:Oe.WrkCtrOR,Werksfrel:Oe.PlantOR};T.FTRel.push(Re)}for(var V=0;V<h[se].operation[ie].SrvPckgOvrw.length;V++){var Oe=h[se].operation[ie].SrvPckgOvrw[V];var Ue={Tlflhdr:h[se].grp,Tplnal:Oe.Plnal.toString(),Vornrr:Oe.Vornr,SrvLine:Oe.LineNum,Del:l.truetoX(Oe.DelIndSP),Srvpos:Oe.ActNum,Ktext1:Oe.ShrtTxt,Mengefspk:Oe.Qty,Meinsfspk:Oe.BUomSP,Tbtwr:Oe.GrossPrc,Waersfspk:Oe.CurKey,IntWork:Oe.Work,Iwein:Oe.UnitOfWork};T.FTSpack.push(Ue)}for(var V=0;V<h[se].operation[ie].PRT.length;V++){var Oe=h[se].operation[ie].PRT[V];var ze={Tlflhdr:h[se].grp,Tplnal:Oe.Plnal.toString(),Vornrfprt:Oe.Vornr,Psnfh:Oe.ItmNum,Fhmar:Oe.ItmCat,Matnrfprt:Oe.Mat,EqunrFpt:Oe.Equi,Eqpnt:Oe.Mspt,Doknrfprt:Oe.doc,Dokarfprt:Oe.docType,Doktlfprt:Oe.docPart,Dokvrfprt:Oe.docVersion,Fhmnr:Oe.Othr,Fhwrk:Oe.Plant,Mgvgw:Oe.Qty,Mgeinh:Oe.UOM,Mgform:Oe.QtyFrmla,Steuf:Oe.PRTCtrl,Stftxt:Oe.PRTCtrlDesc,Ewvgw:Oe.StdUsgVal,Eweinh:Oe.StdUsgUOM,Ewform:Oe.UsgValFrmla};T.FTPRT.push(ze)}for(var V=0;V<h[se].operation[ie].InspChar.length;V++){var Oe=h[se].operation[ie].InspChar[V];var Ke={Tlflhdr:h[se].grp,Tplnal:Oe.Plnal.toString(),Vornrfins:Oe.Vornr,Merknr:Oe.InspChar,Vste2eins:Oe.PrstInd,Quantitat:l.truetoX(Oe.QuanChar),QpmkRef:l.truetoX(Oe.QualChar),Verw2fins:Oe.MastInspChar,Uzae2tlfn:Oe.Plant,Mkv2tleni:Oe.Version,Kurztext:Oe.ShrtTxt,Pmth2fins:Oe.InspMthd,Qwe2tlfli:Oe.InspMthdPlnt,Toleranzs:Oe.TolKey,Ver2tlfli:Oe.VrsnInspMthd,Stichprve:Oe.SampProc,Probemgeh:Oe.SampUOM,Pruefeinh:Oe.BaseSampQty===""?"0.00":parseFloat(Oe.BaseSampQty).toFixed(2),Auswmenge:Oe.CodeGrp};T.FTInsp.push(Ke)}}}if(h[se].MaintPckg&&h[se].MaintPckg.length>0){for(var V=0;V<h[se].MaintPckg.length;V++){if(h[se].MaintPckg[V].MPArr&&h[se].MaintPckg[V].MPArr.length>0){for(var P=0;P<h[se].MaintPckg[V].MPArr.length;P++){var He=h[se].MaintPckg[V].MPArr[P];var Ge={Ktex1:He.Ktex1,Ktxhi:He.Ktxhi,Kzyk1:He.Kzyk1,Paketfmpk:He.Paket,Startfmpk:He.Strat,Tlflhdr:h[se].grp,Tplnal:He.Plnal.toString(),Vorn2fmpk:He.Vornr}}T.FTMPack.push(Ge)}}}if(h[se].component){for(var pe=0;pe<h[se].component.length;pe++){var rt={Tlflhdr:h[se].grp,Idnrk:h[se].component[pe].Idnrk,Menge:h[se].component[pe].Menge,MeinsFcp:h[se].component[pe].MeinsGcp,Vornr:h[se].component[pe].Vornr,Postp:h[se].component[pe].Postp,Tplnal:h[se].component[pe].Plnal.toString()};T.FTComp.push(rt)}}if(h[se].Class){for(var me=0;me<h[se].Class.length;me++){var lt={Tlflhdr:h[se].grp,Classtype:h[se].Class[me].Classtype,Class:h[se].Class[me].Class,Clstatus1:h[se].Class[me].Clstatus1,Tplnal:h[se].Class[me].Plnal.toString()};T.FTClass.push(lt)}}if(h[se].Char){for(var _e=0;_e<h[se].Char.length;_e++){var nt={Tlflhdr:h[se].grp,Atnam:h[se].Char[_e].Atnam,Textbez:h[se].Char[_e].Textbez,Atwrt:h[se].Char[_e].Atwrt,Class:h[se].Char[_e].Class,Tplnal:h[se].Char[_e].Plnal.toString()};T.FTVal.push(nt)}}}}if(S.length>0){for(var se=0;se<S.length;se++){var st={Begru:S[se].autGrp,Objlink:S[se].link,Kanxt:S[se].linkDesc,Eqkant:S[se].linkObjEq,Tpkant:S[se].linkObjFl,Netyp:S[se].linkCat,Eqvon:S[se].linkFrmEq,Tpvon:S[se].linkFrmFl,Eqnach:S[se].linkToEq,Tpnach:S[se].linkToFl,Mediu:S[se].medium,Lfdknr:S[se].linkNum,Kantyp:S[se].objCat,Netid:S[se].netId,Bezarp:S[se].Bezarp,Bezarl:S[se].Bezarl,Datva:l._formatDate(S[se].validFrm),Zeitva:l._timeConvert(S[se].timeFrm),Datvb:l._formatDate(S[se].validTo),Zeitvb:l._timeConvert(S[se].timeTo),Stattext:S[se].Stattext,StsmOl:S[se].StsmOl,UstwOl:S[se].UstwOl,UswoOl:S[se].UswoOl,UstaOl:S[se].UstaOl};T.Olink.push(st);if(S[se].Class){for(var Y=0;Y<S[se].Class.length;Y++){var ot={Objlink:S[se].Class[Y].Objlink,Classtype:S[se].Class[Y].Classtype,Class:S[se].Class[Y].Class,Clstatus1:S[se].Class[Y].Clstatus1};T.OLClass.push(ot)}}if(S[se].Char){for(var ie=0;ie<S[se].Char.length;ie++){var it={Objlink:S[se].Char[ie].Objlink,Atnam:S[se].Char[ie].Atnam,Textbez:S[se].Char[ie].Textbez,Atwrt:S[se].Char[ie].Atwrt,Class:S[se].Char[ie].Class};T.OLVal.push(it)}}}}this.BusyDialog.open();var dt=this.getView().getModel();var re={"X-Requested-With":"xmlHTTPrequest"};dt.setHeaders(re);if(T.FLAddrI.length>0){T.FLAddrI=$.map(T.FLAddrI,function(e){return $.extend(true,{},e)});for(var se=0;se<T.FLAddrI.length>0;se++){delete T.FLAddrI[se].AdNationEnable;delete T.FLAddrI[se].City1iVS;delete T.FLAddrI[se].StreetiVS}}if(T.EqAddrI.length>0){T.EqAddrI=$.map(T.EqAddrI,function(e){return $.extend(true,{},e)});for(var se=0;se<T.EqAddrI.length>0;se++){delete T.EqAddrI[se].AdNationEnable;delete T.EqAddrI[se].City1iVS;delete T.EqAddrI[se].StreetiVS}}dt.create("/ChangeRequestSet",T,{success:function(e){var a=e;t.BusyDialog.close();if(a.IsDraft==="C"){var r=[];for(var n=0;n<a.Messages.results.length;n++){r.push({type:l.getMessageType(a.Messages.results[n].Type),title:a.Messages.results[n].Message})}t.createMessagePopover(r,false)}else if(a.Messages.results.length>0){var r=[];for(var n=0;n<a.Messages.results.length;n++){r.push({type:l.getMessageType(a.Messages.results[n].Type),title:a.Messages.results[n].Message})}t.createMessagePopover(r,false)}else if(a.ChangeRequestId!=="0"){t.clearData();t.getView().byId("idMessagePopover").setEnabled(false);sap.m.MessageToast.show(a.Message,{duration:6e3});t.oMessagePopover.close()}},error:function(e){t.BusyDialog.close();var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}t.createMessagePopover(l,false)}})},getTime:function(e){var t=S.format(new Date(e));return t},getDecision:function(e){var t=this;this.dModel=null;var a=this.getView().getModel("ApprovalModel");var r=[new sap.ui.model.Filter("Crequest","EQ",this.cReqNo)];a.read("/ActionSet",{filters:r,success:function(e,a){t.dModel=e.results;if(e.results.length>0){for(var r=0;r<e.results.length;r++){t.getView().getModel("EnableModel").setProperty("/isEnable",true);t.getView().getModel("EnableModel").setProperty("/approverejectEnable",true);if(e.results[r].ActionCode==="04"){this.ractionCode=e.results[r].ActionCode;t.getView().byId("reject").setText(t.getView().getModel("i18n").getProperty("reject"))}else if(e.results[r].ActionCode==="10"){this.ractionCode=e.results[r].ActionCode;t.getView().byId("reject").setText(t.getView().getModel("i18n").getProperty("sendForRevision"))}else{this.actionCode=e.results[r].ActionCode;t.getView().byId("approve").setText(e.results[r].BtnText)}}}else{t.getView().getModel("EnableModel").setProperty("/isEnable",false)}t.decisionDialog.close()}.bind(this),error:function(e){t.decisionDialog.close();t.getView().getModel("EnableModel").setProperty("/isEnable",false);t.getView().getModel("EnableModel").setProperty("/isActivateEnable",false);var a=[];if(JSON.parse(e.response.body).error.innererror.errordetails===undefined||JSON.parse(e.response.body).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.response.body).error.message.value}else{for(var r=0;r<JSON.parse(e.response.body).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.response.body).error.innererror.errordetails[r].message}}var l=a.join("\n");sap.m.MessageBox.error(l,{onClose:function(e){if(e==="OK"){window.history.back()}}})}.bind(this)})},onApprovePress:function(){var e=this;var t=this.getView().getModel("crCollection");var a=t.getProperty(this.itemPath).ChangedAt.ms;e.ChangedAt=this.getTime(a);var r={ActionCode:this.actionCode,ChangeRequestID:e.cReqNo,Model:t.getProperty(this.itemPath).Model,Note:"",CreatedBy:t.getProperty(this.itemPath).CreatedBy,ObjectDescription:encodeURIComponent(e.crDesc),ChangedAt:t.getProperty(this.itemPath).CRChangedAt,RejectionReasonCode:""};e.decisionDialog.open();var l="/ExecuteCRSet";var n=e.getView().getModel("ApprovalModel");var s=function(t){var a=t.Message;sap.m.MessageToast.show(a,{duration:6e3});e.decisionDialog.close();window.history.back()}.bind(this);var o=function(t){e.decisionDialog.close();var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}e.createMessagePopover(l,false)};n.create(l,r,{success:s,error:o})},onRejectPress:function(){this.getRejectDialog().open()},onActivatePress:function(){var e=this;var t=this.getView().getModel("crCollection");var a=t.getProperty(this.itemPath).ChangedAt.ms;e.ChangedAt=this.getTime(a);var r={ActionCode:this.actionCode,ChangeRequestID:e.cReqNo,Model:t.getProperty(this.itemPath).Model,Note:"",CreatedBy:t.getProperty(this.itemPath).CreatedBy,ObjectDescription:encodeURIComponent(e.crDesc),ChangedAt:t.getProperty(this.itemPath).CRChangedAt,RejectionReasonCode:""};var l="/ExecuteCRSet";var n=e.getView().getModel("ApprovalModel");var s=function(e){var t=e.Message;sap.m.MessageBox.show(t,{title:"Success",icon:sap.m.MessageBox.Icon.SUCCESS,onClose:function(){window.history.back()}})};var o=function(t){var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}e.createMessagePopover(l,false)};n.create(l,r,{success:s,error:o})},onRevisionPress:function(){var e=this;var t=sap.ui.getCore().byId("rejectNote").getValue();var a=sap.ui.getCore().byId("rejectReason").getValue();var r=this.getView().getModel("crCollection");var l=r.getProperty(this.itemPath).ChangedAt.ms;e.ChangedAt=this.getTime(l);var n={ActionCode:this.ractionCode,ChangeRequestID:e.cReqNo,Model:r.getProperty(this.itemPath).Model,Note:t,CreatedBy:r.getProperty(this.itemPath).CreatedBy,ObjectDescription:encodeURIComponent(e.crDesc),ChangedAt:r.getProperty(this.itemPath).CRChangedAt,RejectionReasonCode:a};var s="/ExecuteCRSet";var o=e.getView().getModel("ApprovalModel");var i=function(e){var t=e.Message;sap.m.MessageToast.show(t);window.history.back()};var d=function(t){var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}e.createMessagePopover(l,false)};o.create(s,n,{success:i,error:d})},onWcVH:function(e){var t=this;if(this.action==="createWC"){var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel")}if(this.action==="copyWC"||this.action==="changeWC"){this.sourceId=e.getSource().getId()}var n;if(n===undefined){var s=new sap.m.TableSelectDialog({title:this.getView().getModel("i18n").getProperty("WORK_CENTER"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"Work Center Category"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Plant"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Work Center"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Description"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Language"})]})],items:{path:"/WorkCenterVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]})},confirm:function(e){if(t.action==="createWC"||t.action==="changeWC"){r[t.sindex].wcValueState="None";r[t.sindex].wcValueStateTxt="";r[t.sindex].wcEnable=false;r[t.sindex].wc=e.getParameter("selectedItem").getCells()[2].getText();r[t.sindex].wcDesc=e.getParameter("selectedItem").getCells()[3].getText();l.setData(r);t.getView().setModel(l,"AIWListWCModel")}if(t.action==="copyWC"||t.action==="changeWC"){var a=t.sourceId;sap.ui.getCore().byId(a).setValue(e.getParameter("selectedItem").getCells()[2].getText());sap.ui.getCore().byId(a).setValueState("None")}},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Arbpl",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Ktext",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/WorkCenterVHSet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){var a=t.getView().getModel("AIWListWCModel").getData();if(a.length>0){for(var r=0;r<a.length;r++){var l={Verwe:a[r].wcCat,Werks:a[r].plant,Arbpl:a[r].wc,Ktext:a[r].wcDesc,Spras:e.results[0].Spras};e.results.unshift(l)}}n=e;var o=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]});var i=new sap.ui.model.json.JSONModel;i.setData(e);s.setModel(i);s.bindAggregation("items","/results",o)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onPlantVH:function(e){var t=this;var a,r,l;if(t.action==="createWC"||t.action==="changeWC"){a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1])}if(t.action==="copyWC"||t.action==="changeWC"){this.sourceId=e.getSource().getId()}var n;if(n===undefined||n==={}){var s=new sap.m.TableSelectDialog({title:this.getView().getModel("i18n").getProperty("PLANT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Plant"})]}),new sap.m.Column({header:[new sap.m.Text({text:"Search Term 1"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Search Term 2"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Postal Code"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"City"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Name2"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Name"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Company Name"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Addess Version"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Description"})]})],items:{path:"/PlantVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Plant}"}),new sap.m.Text({text:"{SearchTerm1}"}),new sap.m.Text({text:"{SearchTerm2}"}),new sap.m.Text({text:"{PostalCode}"}),new sap.m.Text({text:"{City}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name}"}),new sap.m.Text({text:"{CompanyName}"}),new sap.m.Text({text:"{AddrVersion}"}),new sap.m.Text({text:"{PlantName}"})]})},confirm:function(e){if(t.action==="createWC"||t.action==="changeWC"){l=t.getView().getModel("AIWListWCModel");r=l.getData();r[t.sindex].plantValueState="None";r[t.sindex].plantValueStateTxt="";r[t.sindex].plant=e.getParameter("selectedItem").getCells()[0].getText();r[t.sindex].plantDesc=e.getParameter("selectedItem").getCells()[9].getText();r[t.sindex].plEnable=false;l.setData(r);t.getView().setModel(l,"AIWListWCModel")}if(t.action==="copyWC"||t.action==="copyGTL"||t.action==="copyETL"||t.action==="copyFTL"){var a=t.sourceId;sap.ui.getCore().byId(a).setValue(e.getParameter("selectedItem").getCells()[0].getText());sap.ui.getCore().byId(a).setValueState("None");sap.ui.getCore().byId(a).setValueStateText("")}},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Plant",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("PlantName",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/PlantVHSet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){n=e;var a=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Plant}"}),new sap.m.Text({text:"{SearchTerm1}"}),new sap.m.Text({text:"{SearchTerm2}"}),new sap.m.Text({text:"{PostalCode}"}),new sap.m.Text({text:"{City}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name}"}),new sap.m.Text({text:"{CompanyName}"}),new sap.m.Text({text:"{AddrVersion}"}),new sap.m.Text({text:"{PlantName}"})]});var r=new sap.ui.model.json.JSONModel;r.setData(e);s.setModel(r);s.bindAggregation("items","/results",a)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Plant}"}),new sap.m.Text({text:"{SearchTerm1}"}),new sap.m.Text({text:"{SearchTerm2}"}),new sap.m.Text({text:"{PostalCode}"}),new sap.m.Text({text:"{City}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name}"}),new sap.m.Text({text:"{CompanyName}"}),new sap.m.Text({text:"{AddrVersion}"}),new sap.m.Text({text:"{PlantName}"})]});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onTLPlantVH:function(e){var t=this;var a,r,l,n,s,o,i;if(t.action==="createGTL"||t.action==="changeGTL"){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(t.action==="createETL"||t.action==="changeETL"){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(t.action==="createFTL"||t.action==="changeFTL"){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}var d={title:this.getView().getModel("i18n").getProperty("PLANT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>SEARCHTERM1}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SEARCHTERM2}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>POST_CODE}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>CITY}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>Name2}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>Name1}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>COMP_NAME}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>ADDR_VERSION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>PLANT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESC_TXT}"})]})],items:{path:"/PlantVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{SearchTerm1}"}),new sap.m.Text({text:"{SearchTerm2}"}),new sap.m.Text({text:"{PostalCode}"}),new sap.m.Text({text:"{City}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name}"}),new sap.m.Text({text:"{CompanyName}"}),new sap.m.Text({text:"{AddrVersion}"}),new sap.m.Text({text:"{Plant}"}),new sap.m.Text({text:"{PlantName}"})]})},confirm:function(e){if(t.action==="createGTL"||t.action==="changeGTL"){s=t.getView().getModel("GTLHeaderModel");r=s.getData();r[0][t.sindex].plantValueState="None";r[0][t.sindex].plantValueStateTxt="";r[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[8].getText();r[0][t.sindex].plantDesc=e.getParameter("selectedItem").getCells()[9].getText();s.setData(r);t.getView().setModel(s,"GTLHeaderModel")}else if(t.action==="createETL"||t.action==="changeETL"){o=t.getView().getModel("ETLHeaderModel");l=o.getData();l[0][t.sindex].plantValueState="None";l[0][t.sindex].plantValueStateTxt="";l[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[8].getText();l[0][t.sindex].plantDesc=e.getParameter("selectedItem").getCells()[9].getText();o.setData(l);t.getView().setModel(o,"ETLHeaderModel")}else if(t.action==="createFTL"||t.action==="changeFTL"){i=t.getView().getModel("FTLHeaderModel");n=i.getData();n[0][t.sindex].plantValueState="None";n[0][t.sindex].plantValueStateTxt="";n[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[8].getText();n[0][t.sindex].plantDesc=e.getParameter("selectedItem").getCells()[9].getText();i.setData(n);t.getView().setModel(i,"FTLHeaderModel")}}};var p="/PlantVHSet";var u=this.getView().getModel("valueHelp");var g=[];var m=[new sap.m.Text({text:"{SearchTerm1}"}),new sap.m.Text({text:"{SearchTerm2}"}),new sap.m.Text({text:"{PostalCode}"}),new sap.m.Text({text:"{City}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name}"}),new sap.m.Text({text:"{CompanyName}"}),new sap.m.Text({text:"{AddrVersion}"}),new sap.m.Text({text:"{Plant}"}),new sap.m.Text({text:"{PlantName}"})];var f=c.getValueHelp(u,p,m,g,d,"Werks","Arbpl");f.open();f.setModel(t.getView().getModel("i18n"),"i18n")},onWcCatVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel");var n;if(n===undefined){var s=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("WORK_CENTER_CAT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/WorkCentCatVHSet",template:new sap.m.StandardListItem({title:"{Verwe}",description:"{Ktext}"})},confirm:function(e){r[t.sindex].wcCatValueState="None";r[t.sindex].wcCatValueStateTxt="";r[t.sindex].wcCat=e.getParameters().selectedItem.getProperty("title");r[t.sindex].wcCatDesc=e.getParameters().selectedItem.getProperty("description");r[t.sindex].wcatEnable=false;l.setData(r);t.getView().setModel(l,"AIWListWCModel")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Verwe",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Ktext",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/WorkCentCatVHSet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){n=e;var a=new sap.m.StandardListItem({title:"{Verwe}",description:"{Ktext}",active:true});var r=new sap.ui.model.json.JSONModel;r.setData(e);s.setModel(r);s.setGrowingThreshold(e.results.length);s.bindAggregation("items","/results",a)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.StandardListItem({title:"{Verwe}",description:"{Ktext}",active:true});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onWCUsageVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel");var n;if(n===undefined){var s=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("USAGE"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/WCUsageVHSet",template:new sap.m.StandardListItem({title:"{PLANV}",description:"{TXT}"})},confirm:function(e){r[t.sindex].usgValueState="None";r[t.sindex].usgValueStateTxt="";r[t.sindex].usg=e.getParameters().selectedItem.getProperty("title");r[t.sindex].usgDesc=e.getParameters().selectedItem.getProperty("description");l.setData(r);t.getView().setModel(l,"AIWListWCModel")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("PLANV",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("TXT",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/WCUsageVHSet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){n=e;var a=new sap.m.StandardListItem({title:"{PLANV}",description:"{TXT}",active:true});var r=new sap.ui.model.json.JSONModel;r.setData(e);s.setModel(r);s.setGrowingThreshold(e.results.length);s.bindAggregation("items","/results",a)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.StandardListItem({title:"{PLANV}",description:"{TXT}",active:true});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onStdValVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel");var n;if(n===undefined){var s=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("STD_VALUE_KEY"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/StandardValueKeySet",template:new sap.m.StandardListItem({title:"{Vgwts}",description:"{Txt}"})},confirm:function(e){r[t.sindex].stdValueState="None";r[t.sindex].stdValueStateTxt="";r[t.sindex].stdVal=e.getParameters().selectedItem.getProperty("title");r[t.sindex].stdValDesc=e.getParameters().selectedItem.getProperty("description");l.setData(r);t.getView().setModel(l,"AIWListWCModel")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Vgwts",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Txt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/StandardValueKeySet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){n=e;var a=new sap.m.StandardListItem({title:"{Vgwts}",description:"{Txt}",active:true});var r=new sap.ui.model.json.JSONModel;r.setData(e);s.setModel(r);s.setGrowingThreshold(e.results.length);s.bindAggregation("items","/results",a)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.StandardListItem({title:"{Vgwts}",description:"{Txt}",active:true});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onPerRespVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel");var n=r[t.sindex].plant;var s=new sap.ui.model.Filter("Werks","EQ",n);var o;if(o===undefined){var i=new sap.m.TableSelectDialog({title:this.getView().getModel("i18n").getProperty("PERSON_RESP"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"Plant"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Person Responsible"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Name"})]})],items:{path:"/PersonRespVHSet",filters:s,template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Veran}"}),new sap.m.Text({text:"{Ktext}"})]})},confirm:function(e){r[t.sindex].personResValueState="None";r[t.sindex].personResValueStateTxt="";r[t.sindex].person=e.getParameter("selectedItem").getCells()[1].getText();r[t.sindex].personDesc=e.getParameter("selectedItem").getCells()[2].getText();l.setData(r);t.getView().setModel(l,"AIWListWCModel")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Veran",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Ktext",sap.ui.model.FilterOperator.Contains,t)],false)])}});var d="/PersonRespVHSet";var c=this.getView().getModel("valueHelp");c.read(d,{filters:[s],success:function(e){if(e.results.length>0){o=e;var a=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Veran}"}),new sap.m.Text({text:"{Ktext}"})]});var r=new sap.ui.model.json.JSONModel;r.setData(e);i.setModel(r);i.setGrowingThreshold(e.results.length);i.bindAggregation("items","/results",a)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var p=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Veran}"}),new sap.m.Text({text:"{Ktext}"})]});var u=new sap.ui.model.json.JSONModel;u.setData(o);i.setModel(u);i.setGrowingThreshold(o.results.length);i.bindAggregation("items","/results",p);var g=i.getItems();for(var m=0;m<g.length;m++){g[m].setVisible(true)}}i.open()},onCtrlKeyVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListWCModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListWCModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListWCModel");var n;if(n===undefined||n==={}){var s=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("CTRL_KEY"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/ControlKeySet",template:new sap.m.StandardListItem({title:"{Steus}",description:"{Txt}"})},confirm:function(e){r[t.sindex].cntrlKeyValueState="None";r[t.sindex].cntrlKeyValueStateTxt="";r[t.sindex].ctrlKey=e.getParameters().selectedItem.getProperty("title");r[t.sindex].ctrlKeyDesc=e.getParameters().selectedItem.getProperty("description");l.setData(r);t.getView().setModel(l,"AIWListWCModel")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Steus",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Txt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/ControlKeySet";var i=this.getView().getModel("valueHelp");i.read(o,{success:function(e){if(e.results.length>0){n=e;var a=new sap.m.StandardListItem({title:"{Steus}",description:"{Txt}",active:true});var r=new sap.ui.model.json.JSONModel;r.setData(e);s.setModel(r);s.setGrowingThreshold(e.results.length);s.bindAggregation("items","/results",a)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.m.StandardListItem({title:"{Steus}",description:"{Txt}",active:true});var c=new sap.ui.model.json.JSONModel;c.setData(n);s.setModel(c);s.setGrowingThreshold(n.results.length);s.bindAggregation("items","/results",d);var p=s.getItems();for(var u=0;u<p.length;u++){p[u].setVisible(true)}}s.open()},onTLVH:function(e){var t=this;this.sourceId=e.getSource().getId();var a="";if(this.action==="copyGTL"){var r=new sap.ui.model.Filter("Plnty","EQ","A");a=this.getView().getModel("i18n").getProperty("copyGTLHeader")}else if(this.action==="copyETL"){var r=new sap.ui.model.Filter("Plnty","EQ","E");a=this.getView().getModel("i18n").getProperty("copyETLHeader")}else if(this.action==="copyFTL"){var r=new sap.ui.model.Filter("Plnty","EQ","T");a=this.getView().getModel("i18n").getProperty("copyFTLHeader")}var n;if(n===undefined){var s=new sap.m.TableSelectDialog({title:a,noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"Task List Type"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Group"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Group Counter"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Valid From"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Description"})]})],items:{path:"/TLGroupVhSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Plnty}"}),new sap.m.Text({text:"{Plnnr}"}),new sap.m.Text({text:"{Plnal}"}),new sap.m.Text({text:{parts:[{path:"Datuv"}],formatter:t.formatter.dateFormat}}),new sap.m.Text({text:"{Ktext}"})]})},confirm:function(e){var a=t.sourceId;sap.ui.getCore().byId(a).setValue(e.getParameter("selectedItem").getCells()[1].getText());sap.ui.getCore().byId(a).setValueState("None")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Plnnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Ktext",sap.ui.model.FilterOperator.Contains,t)],false)])}});var o="/TLGroupVhSet";var i=this.getView().getModel("valueHelp");i.read(o,{filters:[r],success:function(e){if(e.results.length>0){if(t._copyTLFragment){var a,r;if(t.action==="copyGTL"){a=t.getView().getModel("AIWListGTLModel").getData();r="A"}else if(t.action==="copyETL"){a=t.getView().getModel("AIWListETLModel").getData();r="E"}else if(t.action==="copyFTL"){a=t.getView().getModel("AIWListFTLModel").getData();r="F"}if(a.length>0){for(var o=0;o<a.length;o++){if(a[o].header.length>0){for(var i=0;i<a[o].header.length;i++){var d={Plnty:r,Plnnr:a[o].grp,Plnal:a[o].header[i].Plnal,Datuv:l.currentDate(),Ktext:a[o].Ktext};e.results.unshift(d)}}}}}n=e;var c=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Plnty}"}),new sap.m.Text({text:"{Plnnr}"}),new sap.m.Text({text:"{Plnal}"}),new sap.m.Text({text:{parts:[{path:"Datuv"}],formatter:t.formatter.dateFormat}}),new sap.m.Text({text:"{Ktext}"})]});var p=new sap.ui.model.json.JSONModel;p.setData(e);s.setModel(p);s.bindAggregation("items","/results",c)}else{s.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var d=new sap.ui.model.json.JSONModel;d.setData(n);s.setModel(d);s.setTitle(a);s.setGrowingThreshold(n.results.length);var c=s.getItems();for(var p=0;p<c.length;p++){c[p].setVisible(true)}}s.open()},onPplantVH:function(e){var t=this;var a,r,l,n,s,o,i;if(this.action==="createGTL"){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createETL"){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createFTL"){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}var d={title:this.getView().getModel("i18n").getProperty("PLAN_PLANT_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/PlanningPlantSet",template:new sap.m.StandardListItem({title:"{Werks}",description:"{Name1}"})},confirm:function(e){if(t.action==="createGTL"){s=t.getView().getModel("GTLHeaderModel");r=s.getData();r[0][t.sindex].planningPlantValueState="None";r[0][t.sindex].Iwerk=e.getParameters().selectedItem.getProperty("title");r[0][t.sindex].pPlantDesc=e.getParameters().selectedItem.getProperty("description");r[0][t.sindex].planningPlantValueStateTxt="";s.setData(r);t.readHdrDefaults("planningPlant",t.sindex,r)}else if(t.action==="createETL"){o=t.getView().getModel("ETLHeaderModel");l=o.getData();l[0][t.sindex].planningPlantValueState="None";l[0][t.sindex].Iwerk=e.getParameters().selectedItem.getProperty("title");l[0][t.sindex].pPlantDesc=e.getParameters().selectedItem.getProperty("description");l[0][t.sindex].planningPlantValueStateTxt="";o.setData(l);t.readHdrDefaults("planningPlant",t.sindex,l)}else if(t.action==="createFTL"){i=t.getView().getModel("FTLHeaderModel");n=i.getData();n[0][t.sindex].planningPlantValueState="None";n[0][t.sindex].Iwerk=e.getParameters().selectedItem.getProperty("title");n[0][t.sindex].pPlantDesc=e.getParameters().selectedItem.getProperty("description");n[0][t.sindex].planningPlantValueStateTxt="";i.setData(n);t.readHdrDefaults("planningPlant",t.sindex,n)}}};var p="/PlanningPlantSet";var u=this.getView().getModel("valueHelp");var g=c.getSelectDialog(u,p,[],d,"Werks","Name1");g.open()},onTLUsageVH:function(e){var t=this;var a,r,l,n,s,o,i;if(this.action==="createGTL"){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createETL"){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createFTL"){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}var d={title:this.getView().getModel("i18n").getProperty("USAGE"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/UsageVHSet",template:new sap.m.StandardListItem({title:"{VERWE}",description:"{TXT}"})},confirm:function(e){if(t.action==="createGTL"){s=t.getView().getModel("GTLHeaderModel");r=s.getData();r[0][t.sindex].usgValueState="None";r[0][t.sindex].usgValueStateTxt="";r[0][t.sindex].tlusg=e.getParameters().selectedItem.getProperty("title");r[0][t.sindex].usageDesc=e.getParameters().selectedItem.getProperty("description");s.setData(r);t.readHdrDefaults("usage",t.sindex,r)}else if(t.action==="createETL"){o=t.getView().getModel("ETLHeaderModel");l=o.getData();l[0][t.sindex].usgValueState="None";l[0][t.sindex].usgValueStateTxt="";l[0][t.sindex].tlusg=e.getParameters().selectedItem.getProperty("title");l[0][t.sindex].usageDesc=e.getParameters().selectedItem.getProperty("description");o.setData(l);t.readHdrDefaults("usage",t.sindex,l)}else if(t.action==="createFTL"){i=t.getView().getModel("FTLHeaderModel");n=i.getData();n[0][t.sindex].usgValueState="None";n[0][t.sindex].usgValueStateTxt="";n[0][t.sindex].tlusg=e.getParameters().selectedItem.getProperty("title");n[0][t.sindex].usageDesc=e.getParameters().selectedItem.getProperty("description");i.setData(n);t.readHdrDefaults("usage",t.sindex,n)}}};var p="/UsageVHSet";var u=this.getView().getModel("valueHelp");var g=c.getSelectDialog(u,p,[],d,"VERWE","TXT");g.open()},onStatusVH:function(e){var t=this;var a,r,l,n,s,o,i;if(this.action==="createGTL"){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createETL"){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createFTL"){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}var d={title:this.getView().getModel("i18n").getProperty("STATUS"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/StatusVHSet",template:new sap.m.StandardListItem({title:"{PLNST}",description:"{TXT}"})},confirm:function(e){if(t.action==="createGTL"){s=t.getView().getModel("GTLHeaderModel");r=s.getData();r[0][t.sindex].statusVS="None";r[0][t.sindex].Statu=e.getParameters().selectedItem.getProperty("title");r[0][t.sindex].statusDesc=e.getParameters().selectedItem.getProperty("description");r[0][t.sindex].statusVST="";s.setData(r);t.readHdrDefaults("status",t.sindex,r)}else if(t.action==="createETL"){o=t.getView().getModel("ETLHeaderModel");l=o.getData();l[0][t.sindex].statusVS="None";l[0][t.sindex].Statu=e.getParameters().selectedItem.getProperty("title");l[0][t.sindex].statusDesc=e.getParameters().selectedItem.getProperty("description");l[0][t.sindex].statusVST="";o.setData(l);t.readHdrDefaults("status",t.sindex,l)}else if(t.action==="createFTL"){i=t.getView().getModel("FTLHeaderModel");n=i.getData();n[0][t.sindex].statusVS="None";n[0][t.sindex].Statu=e.getParameters().selectedItem.getProperty("title");n[0][t.sindex].statusDesc=e.getParameters().selectedItem.getProperty("description");n[0][t.sindex].statusVST="";i.setData(n);t.readHdrDefaults("status",t.sindex,n)}}};var p="/StatusVHSet";var u=this.getView().getModel("valueHelp");var g=c.getSelectDialog(u,p,[],d,"PLNST","TXT");g.open()},onEquipVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListOLModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListOLModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListOLModel");var n;var s=e.getSource().mBindingInfos.value.binding;if(s!==undefined&&s!==null){n=s.sPath}else{n=e.getSource().mBindingInfos.value.parts[0].path}var o;if(o===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("EQUIPMENT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/EquipmentNumberSet",template:new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}"})},confirm:function(e){if(n==="linkFrmEq"){r[t.sindex].linkFrmEqVS="None";r[t.sindex].linkFrmEqVST="";r[t.sindex].linkFrmEq=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkFrmEqDesc=e.getParameters().selectedItem.getProperty("description")}else if(n==="linkToEq"){r[t.sindex].linkToEqVS="None";r[t.sindex].linkToEqVST="";r[t.sindex].linkToEq=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkToEqDesc=e.getParameters().selectedItem.getProperty("description")}else if(n==="linkObjEq"){r[t.sindex].linkObjEqVS="None";r[t.sindex].linkObjEqVST="";r[t.sindex].linkObjEq=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkObjEqDesc=e.getParameters().selectedItem.getProperty("description")}l.setData(r)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Equnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Eqktx",sap.ui.model.FilterOperator.Contains,t)],false)])}});var d="/EquipmentNumberSet";var c=this.getView().getModel("valueHelp");c.read(d,{success:function(e,a){if(e.results.length>0){var r=sap.ui.getCore().getModel("AIWEQUI").getData();if(r.length>0){for(var l=0;l<r.length;l++){if(r[l].Equnr){var n={Equnr:r[l].Equnr,Eqktx:r[l].Eqktx};e.results.unshift(n)}}}o=e;var s=new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}",active:true});var d=new sap.ui.model.json.JSONModel;d.setData(e);i.setModel(d);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var p=new sap.ui.model.json.JSONModel;p.setData(o);i.setModel(p);var u=i.getItems();for(var g=0;g<u.length;g++){u[g].setVisible(true)}}i.open()},onFlocInOLVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListOLModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListOLModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListOLModel");var n;var s=e.getSource().mBindingInfos.value.binding;if(s!==undefined&&s!==null){n=s.sPath}else{n=e.getSource().mBindingInfos.value.parts[0].path}var o;if(o===undefined){var i=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("FLOC"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/FunctionLocationSet",template:new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}"})},confirm:function(e){if(n==="linkFrmFl"){r[t.sindex].linkFrmFlVS="None";r[t.sindex].linkFrmFlVST="";r[t.sindex].linkFrmFl=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkFrmFlDesc=e.getParameters().selectedItem.getProperty("description")}else if(n==="linkToFl"){r[t.sindex].linkToFlVS="None";r[t.sindex].linkToFlVST="";r[t.sindex].linkToFl=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkToFlDesc=e.getParameters().selectedItem.getProperty("description")}else if(n==="linkObjFl"){r[t.sindex].linkObjFlVS="None";r[t.sindex].linkObjFlVST="";r[t.sindex].linkObjFl=e.getParameters().selectedItem.getProperty("title");r[t.sindex].linkObjFlDesc=e.getParameters().selectedItem.getProperty("description")}l.setData(r)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Tplnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Pltxt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var d="/FunctionLocationSet";var c=this.getView().getModel("valueHelp");c.read(d,{success:function(e,a){if(e.results.length>0){var r=sap.ui.getCore().getModel("AIWFLOC").getData();if(r.length>0){for(var l=0;l<r.length;l++){if(r[l].Functionallocation){var n={Tplnr:r[l].Functionallocation,Pltxt:r[l].Flocdescription};e.results.unshift(n)}}}o=e;var s=new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}",active:true});var d=new sap.ui.model.json.JSONModel;d.setData(e);i.setModel(d);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var p=new sap.ui.model.json.JSONModel;p.setData(o);i.setModel(p);var u=i.getItems();for(var g=0;g<u.length;g++){u[g].setVisible(true)}}i.open()},onLinkVH:function(e){var t=this;var a=e.getSource().getId();var r;if(r===undefined){var l=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("xtxt.LINK"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/ObjLinkSet",template:new sap.m.StandardListItem({title:"{Kante}",description:"{Kanxt}"})},confirm:function(e){sap.ui.getCore().byId(a).setValue(e.getParameters().selectedItem.getProperty("title"));sap.ui.getCore().byId(a).setValueState("None");sap.ui.getCore().byId(a).setValueStateText("")},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Kante",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Kanxt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var n="/ObjLinkSet";var s=this.getView().getModel("valueHelp");s.read(n,{success:function(e,a){if(e.results.length>0){if(t._copyOLFragment){var n=t.getView().getModel("AIWListOLModel").getData();if(n.length>0){for(var s=0;s<n.length;s++){var o={Kante:n[s].link,Kanxt:n[s].linkDesc};e.results.unshift(o)}}}r=e;var i=new sap.m.StandardListItem({title:"{Kante}",description:"{Kanxt}",active:true});var d=new sap.ui.model.json.JSONModel;d.setData(e);l.setModel(d);l.bindAggregation("items","/results",i)}else{l.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}},error:function(e){var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");t.invokeMessage(l)}})}else{var o=new sap.ui.model.json.JSONModel;o.setData(r);l.setModel(o);var i=l.getItems();for(var d=0;d<i.length;d++){i[d].setVisible(true)}}l.open()},onChange:function(e){var t=e.getSource().getValue();var a;var r=e.getSource().mBindingInfos.value.binding;if(r!==undefined&&r!==null){a=r.sPath}else{a=e.getSource().mBindingInfos.value.parts[0].path}if(this.action==="copyWC"||this.action==="changeWC"){a=a.substring(1)}switch(a){case"wc":this._workCenter(t,e);break;case"plant":this._plant(t,e);break;case"wcCat":this._workCenterCategory(t,e);break;case"person":this._personResponsible(t,e);break;case"usg":this._usage(t,e);break;case"tlusg":this._usage(t,e);break;case"stdVal":this._standardValueKey(t,e);break;case"ctrlKey":this._controlKey(t,e);break;case"copyWCSource":this._workCenter(t,e);break;case"copyPlantSource":this._plant(t,e);break;case"copyWCTarget":this._workCenter(t,e);break;case"copyPlantTarget":this._plant(t,e);break;case"Iwerk":this._planPlant(t,e);break;case"Statu":this._status(t,e);break;case"linkFrmEq":this._equipment(t,e);break;case"linkToEq":this._equipment(t,e);break;case"linkObjEq":this._equipment(t,e);break;case"linkFrmFl":this._floc(t,e);break;case"linkToFl":this._floc(t,e);break;case"linkObjFl":this._floc(t,e);break}},_plant:function(e,t){var a=e.toUpperCase();var r=this;if(this.action==="createWC"){var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel")}else if(this.action==="createGTL"){var l=t.getSource().getBindingContext("GTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var o=t.getSource().getBindingContext("GTLHeaderModel").getModel().getData();var i=this.getView().getModel("GTLHeaderModel")}else if(this.action==="createETL"){var l=t.getSource().getBindingContext("ETLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var d=t.getSource().getBindingContext("ETLHeaderModel").getModel().getData();var c=this.getView().getModel("ETLHeaderModel")}else if(this.action==="createFTL"){var l=t.getSource().getBindingContext("FTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var p=t.getSource().getBindingContext("FTLHeaderModel").getModel().getData();var u=this.getView().getModel("FTLHeaderModel")}if(this.action==="copyWC"||this.action==="changeWC"){this.sourceId=t.getSource().getId()}var g=a.replace(/^[ ]+|[ ]+$/g,"");if(g!==""){var m="/PlantVHSet";var f=new sap.ui.model.Filter("Plant","EQ",a);var h=this.getView().getModel("valueHelp");h.read(m,{filters:[f],success:function(e){if(e.results.length>0){if(r.action==="createWC"){n[r.sindex].plant=g;n[r.sindex].plantDesc=e.results[0].PlantName;n[r.sindex].plEnable=false;s.setData(n)}else if(r.action==="createGTL"){o[0][r.sindex].plant=g;o[0][r.sindex].plantDesc=e.results[0].PlantName;i.setData(o)}else if(r.action==="createETL"){d[0][r.sindex].plant=g;d[0][r.sindex].plantDesc=e.results[0].PlantName;c.setData(d)}else if(r.action==="createFTL"){p[0][r.sindex].plant=g;p[0][r.sindex].plantDesc=e.results[0].PlantName;u.setData(p)}if(r.action==="copyWC"){sap.ui.getCore().byId(r.sourceId).setValue(g);sap.ui.getCore().byId(r.sourceId).setValueState("None")}}else{if(r.action==="createWC"){n[r.sindex].plantValueState="Error";n[r.sindex].plEnable=true;n[r.sindex].plantValueStateTxt="Invalid Entry";s.setData(n)}else if(r.action==="createGTL"){o[0][r.sindex].plantValueState="Error";o[0][r.sindex].plantValueStateTxt="Invalid Entry";i.setData(o)}else if(r.action==="createETL"){d[0][r.sindex].plantValueState="Error";d[0][r.sindex].plantValueStateTxt="Invalid Entry";c.setData(d)}else if(r.action==="createFTL"){p[0][r.sindex].plantValueState="Error";p[0][r.sindex].plantValueStateTxt="Invalid Entry";u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText("Invalid Entry")}}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(r.action==="createWC"){n[r.sindex].plEnable=true;n[r.sindex].plantValueState="Error";n[r.sindex].plantValueStateTxt=a;s.setData(n)}else if(r.action==="createGTL"){o[0][r.sindex].plantValueState="Error";o[0][r.sindex].plantValueStateTxt=a;i.setData(o)}else if(r.action==="createETL"){d[0][r.sindex].plantValueState="Error";d[0][r.sindex].plantValueStateTxt=a;c.setData(d)}else if(r.action==="createFTL"){p[0][r.sindex].plantValueState="Error";p[0][r.sindex].plantValueStateTxt=a;u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText(a)}}})}else{if(r.action==="createWC"){n[r.sindex].plant=g;s.setData(n)}else if(r.action==="createGTL"){o[0][r.sindex].plant=g;i.setData(o)}else if(r.action==="createETL"){d[0][r.sindex].plant=g;c.setData(d)}else if(r.action==="createFTL"){p[0][r.sindex].plant=g;u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(g)}}},_workCenter:function(e,t){var a=e.toUpperCase();var r=this;if(this.action==="createWC"){var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel")}else if(this.action==="createGTL"){var l=t.getSource().getBindingContext("GTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var o=t.getSource().getBindingContext("GTLHeaderModel").getModel().getData();var i=this.getView().getModel("GTLHeaderModel")}else if(this.action==="createETL"){var l=t.getSource().getBindingContext("ETLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var d=t.getSource().getBindingContext("ETLHeaderModel").getModel().getData();var c=this.getView().getModel("ETLHeaderModel")}else if(this.action==="createFTL"){var l=t.getSource().getBindingContext("FTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var p=t.getSource().getBindingContext("FTLHeaderModel").getModel().getData();var u=this.getView().getModel("FTLHeaderModel")}if(this.action==="copyWC"||this.action==="changeWC"){this.sourceId=t.getSource().getId()}var g=a.replace(/^[ ]+|[ ]+$/g,"");if(g!==""){var m="/WorkCenterVHSet";var f=new sap.ui.model.Filter("Arbpl","EQ",a);var h=this.getView().getModel("valueHelp");var S=false;var T=sap.ui.getCore().getModel("AIWListWCModel").getData();if(T.length>0){for(var M=0;M<T.length;M++){if(T[M].wc===a){if(r.action==="createWC"){n[r.sindex].wc=g.toUpperCase();n[r.sindex].wcDesc=T[M].Ktext;n[r.sindex].wcEnable=false;s.setData(n);S=true}else if(r.action==="createGTL"){o[0][r.sindex].wc=g;o[0][r.sindex].wcDesc=T[M].Ktext;o[0][r.sindex].plant=T[M].plant;i.setData(o);S=true;r.WCPPCheck()}else if(r.action==="createETL"){d[0][r.sindex].wc=g;d[0][r.sindex].wcDesc=T[M].Ktext;d[0][r.sindex].plant=T[M].plant;c.setData(d);S=true;r.WCPPCheck()}else if(r.action==="createFTL"){p[0][r.sindex].wc=g;p[0][r.sindex].wcDesc=T[M].Ktext;p[0][r.sindex].plant=T[M].plant;u.setData(p);S=true;r.WCPPCheck()}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(g);sap.ui.getCore().byId(r.sourceId).setValueState("None");S=true}}}}if(S===true){return}else{h.read(m,{filters:[f],success:function(e){if(e.results.length>0){if(r.action==="createWC"){n[r.sindex].wc=g.toUpperCase();n[r.sindex].wcDesc=e.results[0].Ktext;n[r.sindex].wcEnable=false;s.setData(n)}else if(r.action==="createGTL"){o[r.gtlPath][r.sindex].wc=g;o[r.gtlPath][r.sindex].wcDesc=e.results[0].Ktext;o[r.gtlPath][r.sindex].plant=e.results[0].Werks;i.setData(o);r.WCPPCheck()}else if(r.action==="createETL"){d[r.etlPath][r.sindex].wc=g;d[r.etlPath][r.sindex].wcDesc=e.results[0].Ktext;d[r.etlPath][r.sindex].plant=e.results[0].Werks;c.setData(d);r.WCPPCheck()}else if(r.action==="createFTL"){p[r.ftlPath][r.sindex].wc=g;p[r.ftlPath][r.sindex].wcDesc=e.results[0].Ktext;p[r.ftlPath][r.sindex].plant=e.results[0].Werks;u.setData(p);r.WCPPCheck()}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(g);sap.ui.getCore().byId(r.sourceId).setValueState("None")}}else{if(r.action==="createWC"){n[r.sindex].wcEnable=false;n[r.sindex].wc=g.toUpperCase();s.setData(n)}else if(r.action==="createGTL"){o[r.gtlPath][r.sindex].wcValueState="Error";o[r.gtlPath][r.sindex].wcValueStateTxt="Invalid Entry";i.setData(o)}else if(r.action==="createETL"){d[r.etlPath][r.sindex].wcValueState="Error";d[r.etlPath][r.sindex].wcValueStateTxt="Invalid Entry";c.setData(d)}else if(r.action==="createFTL"){p[r.ftlPath][r.sindex].wcValueState="Error";p[r.ftlPath][r.sindex].wcValueStateTxt="Invalid Entry";u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText("Invalid Entry")}}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(r.action==="createWC"){n[r.sindex].wcValueState="Error";n[r.sindex].wcValueStateTxt=a;n[r.sindex].wcEnable=true;s.setData(n)}else if(r.action==="createGTL"){o[r.gtlPath][r.sindex].wcValueState="Error";o[r.gtlPath][r.sindex].wcValueStateTxt=a;i.setData(o)}else if(r.action==="createETL"){d[r.etlPath][r.sindex].wcValueState="Error";d[r.etlPath][r.sindex].wcValueStateTxt=a;c.setData(d)}else if(r.action==="createFTL"){p[r.ftlPath][r.sindex].wcValueState="Error";p[r.ftlPath][r.sindex].wcValueStateTxt=a;u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText(a)}}})}}else{if(r.action==="createWC"){n[r.sindex].setValue(g);s.setData(n)}else if(r.action==="createGTL"){o[r.gtlPath][r.sindex].setValue(g);i.setData(o)}else if(r.action==="createETL"){d[r.etlPath][r.sindex].setValue(g);c.setData(d)}else if(r.action==="createFTL"){p[r.ftlPath][r.sindex].setValue(g);u.setData(p)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(g)}}},_workCenterCategory:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel");var o=a.replace(/^[ ]+|[ ]+$/g,"");if(o!==""){var i="/WorkCentCatVHSet";var d=new sap.ui.model.Filter("Verwe","EQ",a);var c=this.getView().getModel("valueHelp");c.read(i,{filters:[d],success:function(e){if(e.results.length>0){n[r.sindex].wcCat=o;n[r.sindex].wcCatDesc=e.results[0].Ktext;n[r.sindex].wcatEnable=false;s.setData(n)}else{n[r.sindex].wcCatValueState="Error";n[r.sindex].wcatEnable=true;n[r.sindex].wcCatValueStateTxt="Invalid Entry";s.setData(n)}},error:function(e){n[r.sindex].wcCatValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;n[r.sindex].wcCatValueStateTxt=a;n[r.sindex].wcatEnable=true;s.setData(n)}})}else{n[r.sindex].wcCat=o;s.setData(n)}},_personResponsible:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel");var o=n[r.sindex].plant;var i=a.replace(/^[ ]+|[ ]+$/g,"");if(i!==""){var d="/PersonRespVHSet";var c=[new sap.ui.model.Filter("Werks","EQ",o),new sap.ui.model.Filter("Veran","EQ",a)];var p=this.getView().getModel("valueHelp");p.read(d,{filters:c,success:function(e){if(e.results.length>0){n[r.sindex].person=i;n[r.sindex].personDesc=e.results[0].Ktext;s.setData(n)}else{n[r.sindex].personResValueState="Error";n[r.sindex].personResValueStateTxt="Invalid Entry";s.setData(n)}},error:function(e){n[r.sindex].personResValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;n[r.sindex].personResValueStateTxt=a;s.setData(n)}})}else{n[r.sindex].person=i;s.setData(n)}},_usage:function(e,t){var a=e.toUpperCase();var r=this;var l="",n="",s;if(this.action==="createWC"){s=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(s.split("/")[1]);var o=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var i=sap.ui.getCore().getModel("AIWListWCModel");l="/WCUsageVHSet";n=new sap.ui.model.Filter("PLANV","EQ",a)}else if(this.action==="createGTL"){s=t.getSource().getBindingContext("GTLHeaderModel").getPath();r.sindex=parseInt(s.split("/")[2]);var d=t.getSource().getBindingContext("GTLHeaderModel").getModel().getData();var c=this.getView().getModel("GTLHeaderModel");l="/UsageVHSet";n=new sap.ui.model.Filter("VERWE","EQ",a)}else if(this.action==="createETL"){s=t.getSource().getBindingContext("ETLHeaderModel").getPath();r.sindex=parseInt(s.split("/")[2]);var p=t.getSource().getBindingContext("ETLHeaderModel").getModel().getData();var u=this.getView().getModel("ETLHeaderModel");l="/UsageVHSet";n=new sap.ui.model.Filter("VERWE","EQ",a)}else if(this.action==="createFTL"){s=t.getSource().getBindingContext("FTLHeaderModel").getPath();r.sindex=parseInt(s.split("/")[2]);var g=t.getSource().getBindingContext("FTLHeaderModel").getModel().getData();var m=this.getView().getModel("FTLHeaderModel");l="/UsageVHSet";n=new sap.ui.model.Filter("VERWE","EQ",a)}var f=a.replace(/^[ ]+|[ ]+$/g,"");if(f!==""){var h=this.getView().getModel("valueHelp");h.read(l,{filters:[n],success:function(e){if(e.results.length>0){if(r.action==="createWC"){o[r.sindex].usg=f;o[r.sindex].usgDesc=e.results[0].TXT;i.setData(o)}else if(r.action==="createGTL"){d[0][r.sindex].tlusg=f;d[0][r.sindex].usageDesc=e.results[0].TXT;c.setData(d);r.readHdrDefaults("usage",r.sindex,d)}else if(r.action==="createETL"){p[0][r.sindex].tlusg=f;p[0][r.sindex].usageDesc=e.results[0].TXT;u.setData(p);r.readHdrDefaults("usage",r.sindex,p)}else if(r.action==="createFTL"){g[0][r.sindex].tlusg=f;g[0][r.sindex].usageDesc=e.results[0].TXT;m.setData(g);r.readHdrDefaults("usage",r.sindex,g)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(f);sap.ui.getCore().byId(r.sourceId).setValueState("None")}}else{if(r.action==="createWC"){o[r.sindex].usgValueState="Error";o[r.sindex].usgValueStateTxt="Invalid Entry";i.setData(o)}else if(r.action==="createGTL"){d[r.gtlPath][r.sindex].usgValueState="Error";d[r.gtlPath][r.sindex].usgValueStateTxt="Invalid Entry";c.setData(d)}else if(r.action==="createETL"){p[r.etlPath][r.sindex].usgValueState="Error";p[r.etlPath][r.sindex].usgValueStateTxt="Invalid Entry";u.setData(p)}else if(r.action==="createFTL"){g[r.ftlPath][r.sindex].usgValueState="Error";g[r.ftlPath][r.sindex].usgValueStateTxt="Invalid Entry";m.setData(g)}}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(r.action==="createWC"){o[r.sindex].usgValueState="Error";o[r.sindex].usgValueStateTxt=a;i.setData(o)}else if(r.action==="createGTL"){d[r.gtlPath][r.sindex].usgValueState="Error";d[r.gtlPath][r.sindex].usgValueStateTxt=a;c.setData(d)}else if(r.action==="createETL"){p[r.etlPath][r.sindex].usgValueState="Error";p[r.etlPath][r.sindex].usgValueStateTxt=a;u.setData(p)}else if(r.action==="createFTL"){g[r.ftlPath][r.sindex].usgValueState="Error";g[r.ftlPath][r.sindex].usgValueStateTxt=a;m.setData(g)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText(a)}}})}else{if(r.action==="createWC"){o[r.sindex].usg=f;i.setData(o)}else if(r.action==="createGTL"){d[r.gtlPath][r.sindex].tlusg=f;d[r.gtlPath][r.sindex].usageDesc="";c.setData(d)}else if(r.action==="createETL"){p[r.etlPath][r.sindex].tlusg=f;p[r.etlPath][r.sindex].usageDesc="";u.setData(p)}else if(r.action==="createFTL"){g[r.ftlPath][r.sindex].tlusg=f;g[r.ftlPath][r.sindex].usageDesc="";m.setData(g)}if(r.action==="copyWC"||r.action==="changeWC"){sap.ui.getCore().byId(r.sourceId).setValue(f)}}},_standardValueKey:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel");var o=a.replace(/^[ ]+|[ ]+$/g,"");if(o!==""){var i="/StandardValueKeySet";var d=new sap.ui.model.Filter("Vgwts","EQ",a);var c=this.getView().getModel("valueHelp");c.read(i,{filters:[d],success:function(e){if(e.results.length>0){n[r.sindex].stdVal=o;n[r.sindex].stdValDesc=e.results[0].Txt;s.setData(n)}else{n[r.sindex].stdValueState="Error";n[r.sindex].stdValueStateTxt="Invalid Entry";s.setData(n)}},error:function(e){n[r.sindex].stdValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;n[r.sindex].stdValueStateTxt=a;s.setData(n)}})}else{n[r.sindex].stdVal=o;s.setData(n)}},_controlKey:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListWCModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListWCModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListWCModel");var o=a.replace(/^[ ]+|[ ]+$/g,"");if(o!==""){var i="/ControlKeySet";var d=new sap.ui.model.Filter("Steus","EQ",a);var c=this.getView().getModel("valueHelp");c.read(i,{filters:[d],success:function(e){if(e.results.length>0){n[r.sindex].ctrlKey=o;n[r.sindex].ctrlKeyDesc=e.results[0].Txt;s.setData(n)}else{n[r.sindex].cntrlKeyValueState="Error";n[r.sindex].cntrlKeyValueStateTxt="Invalid Entry";s.setData(n)}},error:function(e){n[r.sindex].cntrlKeyValueState="Error";var t=JSON.parse(e.responseText);var a=t.error.message.value;n[r.sindex].cntrlKeyValueStateTxt=a;s.setData(n)}})}else{n[r.sindex].ctrlKey=o;s.setData(n)}},_equipment:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListOLModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListOLModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListOLModel");var o=a.replace(/^[ ]+|[ ]+$/g,"");var i;var d=t.getSource().mBindingInfos.value.binding;if(d!==undefined&&d!==null){i=d.sPath}else{i=t.getSource().mBindingInfos.value.parts[0].path}if(o!==""){var c="/EquipmentNumberSet";var p=[new sap.ui.model.Filter("Equnr","EQ",a)];var u=this.getView().getModel("valueHelp");var g=false;var m=sap.ui.getCore().getModel("AIWEQUI").getData();if(m.length>0){for(var f=0;f<m.length;f++){if(m[f].Equnr===a){if(i==="linkFrmEq"){n[r.sindex].linkFrmEqVS="None";n[r.sindex].linkFrmEqVST="";n[r.sindex].linkFrmEq=o;n[r.sindex].linkFrmEqDesc=m[f].Eqktx;g=true}else if(i==="linkToEq"){n[r.sindex].linkToEqVS="None";n[r.sindex].linkToEqVST="";n[r.sindex].linkToEq=o;n[r.sindex].linkToEqDesc=m[f].Eqktx;g=true}else if(i==="linkObjEq"){n[r.sindex].linkObjEqVS="None";n[r.sindex].linkObjEqVST="";n[r.sindex].linkObjEq=o;n[r.sindex].linkObjEqDesc=m[f].Eqktx;g=true}s.setData(n)}}}if(g===true){return}else{u.read(c,{filters:p,success:function(e){if(e.results.length>0){if(i==="linkFrmEq"){n[r.sindex].linkFrmEqVS="None";n[r.sindex].linkFrmEqVST="";n[r.sindex].linkFrmEq=o;n[r.sindex].linkFrmEqDesc=e.results[0].Eqktx}else if(i==="linkToEq"){n[r.sindex].linkToEqVS="None";n[r.sindex].linkToEqVST="";n[r.sindex].linkToEq=o;n[r.sindex].linkToEqDesc=e.results[0].Eqktx}else if(i==="linkObjEq"){n[r.sindex].linkObjEqVS="None";n[r.sindex].linkObjEqVST="";n[r.sindex].linkObjEq=o;n[r.sindex].linkObjEqDesc=e.results[0].Eqktx}s.setData(n)}else{if(i==="linkFrmEq"){n[r.sindex].linkFrmEqVS="Error";n[r.sindex].linkFrmEqVST="Invalid Entry"}else if(i==="linkToEq"){n[r.sindex].linkToEqVS="Error";n[r.sindex].linkToEqVST="Invalid Entry"}else if(i==="linkObjEq"){n[r.sindex].linkObjEqVS="Error";n[r.sindex].linkObjEqVST="Invalid Entry"}s.setData(n)}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(i==="linkFrmEq"){n[r.sindex].linkFrmEqVS="Error";n[r.sindex].linkFrmEqVST=a}else if(i==="linkToEq"){n[r.sindex].linkToEqVS="Error";n[r.sindex].linkToEqVST=a}else if(i==="linkObjEq"){n[r.sindex].linkObjEqVS="Error";n[r.sindex].linkObjEqVST=a}s.setData(n)}})}}else{if(i==="linkFrmEq"){n[r.sindex].linkFrmEq=o}else if(i==="linkToEq"){n[r.sindex].linkToEq=o}else if(i==="linkObjEq"){n[r.sindex].linkObjEq=o}s.setData(n)}},_floc:function(e,t){var a=e.toUpperCase();var r=this;var l=t.getSource().getBindingContext("AIWListOLModel").getPath();r.sindex=parseInt(l.split("/")[1]);var n=t.getSource().getBindingContext("AIWListOLModel").getModel().getData();var s=sap.ui.getCore().getModel("AIWListOLModel");var o=a.replace(/^[ ]+|[ ]+$/g,"");var i;var d=t.getSource().mBindingInfos.value.binding;if(d!==undefined&&d!==null){i=d.sPath}else{i=t.getSource().mBindingInfos.value.parts[0].path}if(o!==""){var c="/FunctionLocationSet";var p=[new sap.ui.model.Filter("Tplnr","EQ",a)];var u=this.getView().getModel("valueHelp");var g=false;var m=sap.ui.getCore().getModel("AIWFLOC").getData();if(m.length>0){for(var f=0;f<m.length;f++){if(m[f].Functionallocation===a){if(i==="linkFrmFl"){n[r.sindex].linkFrmFlVS="None";n[r.sindex].linkFrmFlVST="";n[r.sindex].linkFrmFl=o;n[r.sindex].linkFrmFlDesc=m[f].Flocdescription;g=true}else if(i==="linkToFl"){n[r.sindex].linkToFlVS="None";n[r.sindex].linkToFlVST="";n[r.sindex].linkToFl=o;n[r.sindex].linkToFlDesc=m[f].Flocdescription;g=true}else if(i==="linkObjFl"){n[r.sindex].linkObjFlVS="None";n[r.sindex].linkObjFlVST="";n[r.sindex].linkObjFl=o;n[r.sindex].linkObjFlDesc=m[f].Flocdescription;g=true}s.setData(n)}}}if(g===true){return}else{u.read(c,{filters:p,success:function(e){if(e.results.length>0){if(i==="linkFrmFl"){n[r.sindex].linkFrmFlVS="None";n[r.sindex].linkFrmFlVST="";n[r.sindex].linkFrmFl=o;n[r.sindex].linkFrmFlDesc=e.results[0].Pltxt}else if(i==="linkToFl"){n[r.sindex].linkToFlVS="None";n[r.sindex].linkToFlVST="";n[r.sindex].linkToFl=o;n[r.sindex].linkToFlDesc=e.results[0].Pltxt}else if(i==="linkObjFl"){n[r.sindex].linkObjFlVS="None";n[r.sindex].linkObjFlVST="";n[r.sindex].linkObjFl=o;n[r.sindex].linkObjFlDesc=e.results[0].Pltxt}s.setData(n)}else{if(i==="linkFrmFl"){n[r.sindex].linkFrmFlVS="Error";n[r.sindex].linkFrmFlVST="Invalid Entry"}else if(i==="linkToFl"){n[r.sindex].linkToFlVS="Error";n[r.sindex].linkToFlVST="Invalid Entry"}else if(i==="linkObjFl"){n[r.sindex].linkObjFlVS="Error";n[r.sindex].linkObjFlVST="Invalid Entry"}s.setData(n)}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(i==="linkFrmFl"){n[r.sindex].linkFrmFlVS="Error";n[r.sindex].linkFrmFlVST=a}else if(i==="linkToFl"){n[r.sindex].linkToFlVS="Error";n[r.sindex].linkToFlVST=a}else if(i==="linkObjFl"){n[r.sindex].linkObjFlVS="Error";n[r.sindex].linkObjFlVST=a}s.setData(n)}})}}else{if(i==="linkFrmFl"){n[r.sindex].linkFrmFl=o}else if(i==="linkToFl"){n[r.sindex].linkToFl=o}else if(i==="linkObjFl"){n[r.sindex].linkObjFl=o}s.setData(n)}},_planPlant:function(e,t){var a=e.toUpperCase();var r=this;var l;if(this.action==="createGTL"){l=t.getSource().getBindingContext("GTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var n=t.getSource().getBindingContext("GTLHeaderModel").getModel().getData();var s=this.getView().getModel("GTLHeaderModel")}else if(this.action==="createETL"){l=t.getSource().getBindingContext("ETLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var o=t.getSource().getBindingContext("ETLHeaderModel").getModel().getData();var i=this.getView().getModel("ETLHeaderModel")}else if(this.action==="createFTL"){l=t.getSource().getBindingContext("FTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var d=t.getSource().getBindingContext("FTLHeaderModel").getModel().getData();var c=this.getView().getModel("FTLHeaderModel")}if(this.action==="copyGTL"||this.action==="copyETL"||this.action==="copyFTL"){this.sourceId=t.getSource().getId()}var p=a.replace(/^[ ]+|[ ]+$/g,"");if(p!==""){var u="/PlanningPlantSet";var g=new sap.ui.model.Filter("Werks","EQ",a);var m=this.getView().getModel("valueHelp");m.read(u,{filters:[g],success:function(e){if(e.results.length>0){if(r.action==="createGTL"){n[0][r.sindex].Iwerk=p;n[0][r.sindex].pPlantDesc=e.results[0].Name1;s.setData(n);r.readHdrDefaults("planningPlant",r.sindex,n)}else if(r.action==="createETL"){o[0][r.sindex].Iwerk=p;o[0][r.sindex].pPlantDesc=e.results[0].Name1;i.setData(o);r.readHdrDefaults("planningPlant",r.sindex,o)}else if(r.action==="createFTL"){d[0][r.sindex].Iwerk=p;d[0][r.sindex].pPlantDesc=e.results[0].Name1;c.setData(d);r.readHdrDefaults("planningPlant",r.sindex,d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValue(p);sap.ui.getCore().byId(r.sourceId).setValueState("None")}}else{if(r.action==="createGTL"){n[r.gtlPath][r.sindex].planningPlantValueState="Error";n[r.gtlPath][r.sindex].planningPlantValueStateTxt="Invalid Entry";s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].planningPlantValueState="Error";o[r.etlPath][r.sindex].planningPlantValueStateTxt="Invalid Entry";i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].planningPlantValueState="Error";d[r.ftlPath][r.sindex].planningPlantValueStateTxt="Invalid Entry";c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText("Invalid Entry")}}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(r.action==="createGTL"){n[r.gtlPath][r.sindex].planningPlantValueState="Error";n[r.gtlPath][r.sindex].planningPlantValueStateTxt=a;s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].planningPlantValueState="Error";o[r.etlPath][r.sindex].planningPlantValueStateTxt=a;i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].planningPlantValueState="Error";d[r.ftlPath][r.sindex].planningPlantValueStateTxt=a;c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText(a)}}})}else{if(r.action==="createGTL"){n[r.gtlPath][r.sindex].Iwerk=p;n[r.gtlPath][r.sindex].pPlantDesc="";s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].Iwerk=p;o[r.etlPath][r.sindex].pPlantDesc="";i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].Iwerk=p;d[r.ftlPath][r.sindex].pPlantDesc="";c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValue(p)}}},_status:function(e,t){var a=e.toUpperCase();var r=this;var l;if(this.action==="createGTL"){l=t.getSource().getBindingContext("GTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var n=t.getSource().getBindingContext("GTLHeaderModel").getModel().getData();var s=this.getView().getModel("GTLHeaderModel")}else if(this.action==="createETL"){l=t.getSource().getBindingContext("ETLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var o=t.getSource().getBindingContext("ETLHeaderModel").getModel().getData();var i=this.getView().getModel("ETLHeaderModel")}else if(this.action==="createFTL"){l=t.getSource().getBindingContext("FTLHeaderModel").getPath();r.sindex=parseInt(l.split("/")[2]);var d=t.getSource().getBindingContext("FTLHeaderModel").getModel().getData();var c=this.getView().getModel("FTLHeaderModel")}if(this.action==="copyGTL"||this.action==="copyETL"||this.action==="copyFTL"){this.sourceId=t.getSource().getId()}var p=a.replace(/^[ ]+|[ ]+$/g,"");if(p!==""){var u="/StatusVHSet";var g=new sap.ui.model.Filter("PLNST","EQ",a);var m=this.getView().getModel("valueHelp");m.read(u,{filters:[g],success:function(e){if(e.results.length>0){if(r.action==="createGTL"){n[0][r.sindex].Statu=p;n[0][r.sindex].statusDesc=e.results[0].TXT;s.setData(n);r.readHdrDefaults("status",r.sindex,n)}else if(r.action==="createETL"){o[0][r.sindex].Statu=p;o[0][r.sindex].statusDesc=e.results[0].TXT;i.setData(o);r.readHdrDefaults("status",r.sindex,o)}else if(r.action==="createFTL"){d[0][r.sindex].Statu=p;d[0][r.sindex].statusDesc=e.results[0].TXT;c.setData(d);r.readHdrDefaults("status",r.sindex,d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValue(p);sap.ui.getCore().byId(r.sourceId).setValueState("None")}}else{if(r.action==="createGTL"){n[r.gtlPath][r.sindex].statusVS="Error";n[r.gtlPath][r.sindex].statusVST="Invalid Entry";s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].statusVS="Error";o[r.etlPath][r.sindex].statusVST="Invalid Entry";i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].statusVS="Error";d[r.ftlPath][r.sindex].statusVST="Invalid Entry";c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText("Invalid Entry")}}},error:function(e){var t=JSON.parse(e.responseText);var a=t.error.message.value;if(r.action==="createGTL"){n[r.gtlPath][r.sindex].statusVS="Error";n[r.gtlPath][r.sindex].statusVST=a;s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].statusVS="Error";o[r.etlPath][r.sindex].statusVST=a;i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].statusVS="Error";d[r.ftlPath][r.sindex].statusVST=a;c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValueState("Error");sap.ui.getCore().byId(r.sourceId).setValueStateText(a)}}})}else{if(r.action==="createGTL"){n[r.gtlPath][r.sindex].Statu=p;n[r.gtlPath][r.sindex].statusDesc="";s.setData(n)}else if(r.action==="createETL"){o[r.etlPath][r.sindex].Statu=p;o[r.etlPath][r.sindex].statusDesc="";i.setData(o)}else if(r.action==="createFTL"){d[r.ftlPath][r.sindex].Statu=p;d[r.ftlPath][r.sindex].statusDesc="";c.setData(d)}else if(r.action==="copyGTL"||r.action==="copyETL"||r.action==="copyFTL"){sap.ui.getCore().byId(r.sourceId).setValue(p)}}},onLinkCatChange:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListOLModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListOLModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListOLModel");var n=this.getView().getModel("linkCatModel");var s=n.getData();if(r[t.sindex].linkCat!==""){for(var o=0;o<s.length;o++){if(s[o].NETYP===r[t.sindex].linkCat){r[t.sindex].linkCatEn=false;r[t.sindex].linkCatDesc=s[o].TYPTX}}this.readStatusProfOL(r[t.sindex].linkCat,r)}else{r[t.sindex].linkCatEn=true}l.setData(r)},onObjCatChange:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListOLModel").getPath();t.sindex=parseInt(a.split("/")[1]);var r=e.getSource().getBindingContext("AIWListOLModel").getModel().getData();var l=sap.ui.getCore().getModel("AIWListOLModel");var n=this.getView().getModel("objCatModel");var s=n.getData();for(var o=0;o<s.length;o++){if(s[o].Kantyp===r[t.sindex].objCat){r[t.sindex].objCatEn=false;r[t.sindex].objCatDesc=s[o].Kantyp_txt}}if(r[t.sindex].objCat==="E"){r[t.sindex].linkFrmFlEn=false;r[t.sindex].linkToFlEn=false;r[t.sindex].linkObjFlEn=false;r[t.sindex].linkFromEQEn=true;r[t.sindex].linkToEQEn=true;r[t.sindex].linkObjEqEn=true;r[t.sindex].linkFrmFl="";r[t.sindex].linkToFl="";r[t.sindex].linkObjFl="";r[t.sindex].linkFrmflLblV=false;r[t.sindex].linkFrmFlV=false;r[t.sindex].linkFrmFlDescV=false;r[t.sindex].linkToFlLblV=false;r[t.sindex].linkToFlV=false;r[t.sindex].linkToFlDescV=false;r[t.sindex].linkObjFlLblV=false;r[t.sindex].linkObjFlV=false;r[t.sindex].linkObjFlDescV=false;r[t.sindex].linkFrmEqLblV=true;r[t.sindex].linkFrmEqV=true;r[t.sindex].linkFrmEqDescV=true;r[t.sindex].linkToEqLblV=true;r[t.sindex].linkToEQV=true;r[t.sindex].linkToEqDescV=true;r[t.sindex].linkObjEqLblV=true;r[t.sindex].linkObjEqV=true;r[t.sindex].linkObjEqDescV=true}else if(r[t.sindex].objCat==="T"){r[t.sindex].linkFromEQEn=false;r[t.sindex].linkToEQEn=false;r[t.sindex].linkObjEqEn=false;r[t.sindex].linkFrmFlEn=true;r[t.sindex].linkToFlEn=true;r[t.sindex].linkObjFlEn=true;r[t.sindex].linkFrmEq="";r[t.sindex].linkToEq="";r[t.sindex].linkObjEq="";r[t.sindex].linkFrmEqLblV=false;r[t.sindex].linkFrmEqV=false;r[t.sindex].linkFrmEqDescV=false;r[t.sindex].linkToEqLblV=false;r[t.sindex].linkToEQV=false;r[t.sindex].linkToEqDescV=false;r[t.sindex].linkObjEqLblV=false;r[t.sindex].linkObjEqV=false;r[t.sindex].linkObjEqDescV=false;r[t.sindex].linkFrmflLblV=true;r[t.sindex].linkFrmFlV=true;r[t.sindex].linkFrmFlDescV=true;r[t.sindex].linkToFlLblV=true;r[t.sindex].linkToFlV=true;r[t.sindex].linkToFlDescV=true;r[t.sindex].linkObjFlLblV=true;r[t.sindex].linkObjFlV=true;r[t.sindex].linkObjFlDescV=true}else if(r[t.sindex].objCat===""){r[t.sindex].linkCatEn=true}l.setData(r)},onTableUpdateFinished:function(){var e=this;var t=sap.ui.getCore().getModel("EAMCRModel");if(e.copyEquiTempKey){e.readCreateTempKey(t.getProperty("/12").CRType,"Equipment",null,e.noOfCopyObjects)}if(e.copyMsptTempKey){e.readCreateTempKey(t.getProperty("/8").CRType,"MeasuringPoint",null,e.noOfCopyObjects)}if(e.copyMpmiTempKey){e.readCreateTempKey(t.getProperty("/7").CRType,"MaintenancePlan",null,e.noOfCopyObjects)}},readEAMCRType:function(){var e=this;var a=new sap.m.BusyDialog;a.open();var r="/EAMCRTypeSet";var l=e.getView().getModel("valueHelp");var n=function(e){var r=[];for(var l=0;l<e.results.length;l++){var n={CRType:e.results[l].CRType,Obtab:e.results[l].Obtab,Action:e.results[l].Action,ObjLabel:e.results[l].ObjLabel,CRDescription:e.results[l].CRDescription};r.push(n)}var s=new t;s.setData(r);sap.ui.getCore().setModel(s,"EAMCRModel");a.close()};var s=function(t){var r=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){r[0]=JSON.parse(t.responseText).error.message.value}else{for(var l=0;l<JSON.parse(t.responseText).error.innererror.errordetails.length;l++){r[l]=JSON.parse(t.responseText).error.innererror.errordetails[l].message}}var n=r.join("\n");a.close();e.invokeMessage(n)};e._readData(r,l,n,s)},readCreateTempKeyT:function(e,t,a){var r=this;var l=sap.ui.getCore().getModel("EAMCRModel");var n=l.getData();var s=this.getView().createId("tlMain");var o=sap.ui.core.Fragment.byId(s,"_iconTabBarTL").getSelectedKey();var i="";if(o==="GTLTab"){for(var d=0;d<n.length;d++){if(n[d].Obtab==="PLKO"&&n[d].ObjLabel.indexOf("General Task List")>-1){i=n[d].CRType;break}}}if(o==="EqTLTab"){for(var d=0;d<n.length;d++){if(n[d].Obtab==="PLKO"&&n[d].ObjLabel.indexOf("Equipment Task List")>-1){i=n[d].CRType;break}}}if(o==="FLOCTLTab"){for(var d=0;d<n.length;d++){if(n[d].Obtab==="PLKO"&&n[d].ObjLabel.indexOf("Functional Location Task List")>-1){i=n[d].CRType;break}}}if(this.action.indexOf("OL")>0){for(var d=0;d<n.length;d++){if(n[d].Obtab==="INET"){i=n[d].CRType;break}}}var c="/TempKeySet";var p=r.getView().getModel("valueHelp");var u=[new sap.ui.model.Filter("CRType","EQ",i),new sap.ui.model.Filter("ObjNo","EQ",a)];function g(a){r.BusyDialog.close();var l=a.results;if(r.action.indexOf("GTL")>0){if(t){if(o==="GTLTab"){for(var n=0;n<l.length;n++){var s=sap.ui.getCore().getModel("AIWListGTLModel");var i=s.getData();i.push(t);var d=$.map(i,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;s.setData(d);s.setSizeLimit(d.length);r.getView().setModel(s,"AIWListGTLModel");r.updateCount("generalTL",i)}r._copyTLFragment.close()}else if(o==="EqTLTab"){for(var n=0;n<l.length;n++){var c=sap.ui.getCore().getModel("AIWListETLModel");var p=c.getData();p.push(t);var d=$.map(p,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;c.setData(d);c.setSizeLimit(d.length);r.getView().setModel(c,"AIWListETLModel");r.updateCount("equiTL",p)}r._copyTLFragment.close()}else if(o==="FLOCTLTab"){for(var n=0;n<l.length;n++){var u=sap.ui.getCore().getModel("AIWListFTLModel");var g=u.getData();g.push(t);var d=$.map(g,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;u.setData(d);u.setSizeLimit(d.length);r.getView().setModel(u,"AIWListFTLModel");r.updateCount("flocTL",g)}r._copyTLFragment.close()}}else{for(var n=0;n<l.length;n++){r.CreatRow(e,l[n].Key)}}}if(r.action.indexOf("ETL")>0){if(t){if(o==="GTLTab"){for(var n=0;n<l.length;n++){var s=sap.ui.getCore().getModel("AIWListGTLModel");var i=s.getData();i.push(t);var d=$.map(i,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;s.setData(d);s.setSizeLimit(d.length);r.getView().setModel(s,"AIWListGTLModel");r.updateCount("generalTL",i)}r._copyTLFragment.close()}else if(o==="EqTLTab"){for(var n=0;n<l.length;n++){var c=sap.ui.getCore().getModel("AIWListETLModel");var p=c.getData();p.push(t);var d=$.map(p,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;d[d.length-1].equipment="";d[d.length-1].equipmentDesc="";if(d[d.length-1].header){d[d.length-1].header.forEach(function(e){e.equipment="";e.equipmentDesc="";e.Iwerk="";e.pPlantDesc=""})}c.setData(d);c.setSizeLimit(d.length);r.getView().setModel(c,"AIWListETLModel");r.updateCount("equiTL",p)}r._copyTLFragment.close()}else if(o==="FLOCTLTab"){for(var n=0;n<l.length;n++){var u=sap.ui.getCore().getModel("AIWListFTLModel");var g=u.getData();g.push(t);var d=$.map(g,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;u.setData(d);u.setSizeLimit(d.length);r.getView().setModel(u,"AIWListFTLModel");r.updateCount("flocTL",g)}r._copyTLFragment.close()}}else{for(var n=0;n<l.length;n++){r.CreatRow(e,l[n].Key)}}}if(r.action.indexOf("FTL")>0){if(t){if(o==="GTLTab"){for(var n=0;n<l.length;n++){var s=sap.ui.getCore().getModel("AIWListGTLModel");var i=s.getData();i.push(t);var d=$.map(i,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;s.setData(d);s.setSizeLimit(d.length);r.getView().setModel(s,"AIWListGTLModel");r.updateCount("generalTL",i)}r._copyTLFragment.close()}else if(o==="EqTLTab"){for(var n=0;n<l.length;n++){var c=sap.ui.getCore().getModel("AIWListETLModel");var p=c.getData();p.push(t);var d=$.map(p,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;c.setData(d);c.setSizeLimit(d.length);r.getView().setModel(c,"AIWListETLModel");r.updateCount("equiTL",p)}r._copyTLFragment.close()}else if(o==="FLOCTLTab"){for(var n=0;n<l.length;n++){var u=sap.ui.getCore().getModel("AIWListFTLModel");var g=u.getData();g.push(t);var d=$.map(g,function(e){return $.extend(true,{},e)});d[d.length-1].grp=l[n].Key;d[d.length-1].floc="";d[d.length-1].flocDesc="";if(d[d.length-1].header){d[d.length-1].header.forEach(function(e){e.floc="";e.flocDesc="";e.Iwerk="";e.pPlantDesc=""})}u.setData(d);u.setSizeLimit(d.length);r.getView().setModel(u,"AIWListFTLModel");r.updateCount("flocTL",g)}r._copyTLFragment.close()}}else{for(var n=0;n<l.length;n++){r.CreatRow(e,l[n].Key)}}}if(r.action.indexOf("OL")>0){if(t){for(var n=0;n<l.length;n++){var m=sap.ui.getCore().getModel("AIWListOLModel");var f=m.getData();f.push(t);var d=$.map(f,function(e){return $.extend(true,{},e)});d[d.length-1].link=l[n].Key;m.setSizeLimit(d.length);m.setData(d);r.getView().setModel(m,"AIWListOLModel");r.updateCount("objLink",f)}r._copyOLFragment.close()}else{for(var n=0;n<l.length;n++){r.CreatRow(e,l[n].Key)}}}}function m(e){r.BusyDialog.close();var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.invokeMessage(l)}r.BusyDialog.open();p.read(c,{filters:u,success:g,error:m})},readCreateTempKey:function(e,a,r,l,s,o){var i=this;var d=[];var c="/TempKeySet";var p=[new n("CRType","EQ",e),new n("ObjNo","EQ",l)];var u=i.getView().getModel("valueHelp");var g=i.getView().getModel("mainView");var m=g.getData();m.tableBusy=true;g.setData(m);var f=function(e){i.BusyDialog.close();for(var n=0;n<l;n++){d.push(e.results[n].Key)}if(r==="create"){i.onCreateRowPress(a,d[0])}if(r==="stagging_copy"){var c,p,u;if(s){c=i.getView().getModel(a);if(a==="AIWEQUI"){for(var f=0;f<l;f++){p=c.getData();p.push(s);u=$.map(p,function(e){return $.extend(true,{},e)});u[u.length-1].Equnr=d[f];u[u.length-1].UstaEqui=i.stagingEqUserSts;u[u.length-1].UswoEqui=i.stagingEqStsWOnumber;u[u.length-1].viewParameter="create";u[u.length-1].EqunrEnabled=true;u[u.length-1].EquipCatEnabled=true;u[u.length-1].MaintplantEnabled=true;u[u.length-1].BukrsEnabled=true;var h=sap.ui.getCore().getModel("equiAddressView");var S=h.getData();var T=true;var M;if(S.length>0){for(var b=0;b<S.length;b++){if(d[f]===S[b].Equnr){T=false;break}}}if(T){M={Equnr:d[f],IsEditable:u[u.length-1].IsEditable};S.push(M);h.setData(S)}c.setData(u);sap.ui.getCore().setModel(new t(c.getData()),a);i.onUpdateTitleCount(a,c.getData());var E=$.map(i.DOIarrayEQ,function(e){return $.extend(true,{},e)});sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.push({key:u[u.length-1].Equnr,DOI:E})}}if(a==="AIWMSPT"){for(var v=0;v<l;v++){p=c.getData();p.push(s);u=$.map(p,function(e){return $.extend(true,{},e)});u[u.length-1].Mspoint=d[v];u[u.length-1].viewParameter="create";u[u.length-1].MspointEnabled=true;u[u.length-1].ObtypMsEnabled=true;if(u[u.length-1].Equnr===""||u[u.length-1].Equnr===undefined){u[u.length-1].EqunrEnabled=false}else{u[u.length-1].EqunrEnabled=true}if(u[u.length-1].Tplnr===""||u[u.length-1].Tplnr===undefined){u[u.length-1].TplnrEnabled=false}else{u[u.length-1].TplnrEnabled=true}u[u.length-1].MptypEnabled=true;u[u.length-1].AtnamMsEnabled=true;c.setData(u);sap.ui.getCore().setModel(new t(c.getData()),a);i.onUpdateTitleCount(a,c.getData())}}if(a==="AIWMPMI"){if(o==="HEADER"){i.CopyTempArray=d;i.CopyNoOfObject=l;i.readCreateTempKey("MPITEM",a,"stagging_copy",s.itemModel.length*l,s,"MPITEM")}if(o==="MPITEM"){for(var C=0;C<i.CopyNoOfObject;C++){p=c.getData();p.push(s);u=$.map(p,function(e){return $.extend(true,{},e)});var x=u[u.length-1].ObjListItems;for(var V=0;V<x.length;V++){if(x[V].Warpl===u[u.length-1].Warpl){x[V].Warpl=i.CopyTempArray[C]}}u[u.length-1].Warpl=i.CopyTempArray[C];u[u.length-1].menuAction="copy";u[u.length-1].viewParameter="create";u[u.length-1].WarplEnabled=true;u[u.length-1].HorizVisible=false;if(u[u.length-1].Mptyp===""||u[u.length-1].Mptyp===undefined||u[u.length-1].Mptyp===" "){u[u.length-1].MptypEnabled=true}else{u[u.length-1].MptypEnabled=false}if(u[u.length-1].cycleType===1&&(u[u.length-1].Strat===""||u[u.length-1].Strat===undefined||u[u.length-1].Strat===" ")){u[u.length-1].StratEnabled=true}else{u[u.length-1].StratEnabled=false}if(u[u.length-1].cycleType===2&&(u[u.length-1].Mehrfach===false||u[u.length-1].Mehrfach===""||u[u.length-1].Mehrfach===undefined||u[u.length-1].Mehrfach===" ")){u[u.length-1].MehrfachEnabled=true}else{u[u.length-1].MehrfachEnabled=false}if(u[u.length-1].cycleType===2&&(u[u.length-1].Wset===""||u[u.length-1].Wset===undefined||u[u.length-1].Wset===" ")){u[u.length-1].WsetEnabled=true}else{u[u.length-1].WsetEnabled=false}var P=u[u.length-1].cycleModel.length;for(var I=0;I<P;I++){u[u.length-1].cycleModel[I].Zykl1Enabled=false;u[u.length-1].cycleModel[I].ZeiehEnabled=false;u[u.length-1].cycleModel[I].PakTextEnabled=false;u[u.length-1].cycleModel[I].OffsetEnabled=false;u[u.length-1].cycleModel[I].PointEnabled=false;u[u.length-1].cycleModel[I].CycleseqiEnabled=false}var L=u[u.length-1].itemModel.length;var x=u[u.length-1].ObjListItems;for(var y=0;y<L;y++){for(var V=0;V<x.length;V++){if(x[V].Warpl===u[u.length-1].Warpl&&x[V].Mitemnumb===u[u.length-1].itemModel[y].Mitemnumb){x[V].Mitemnumb=d[y]}}u[u.length-1].itemModel[y].Mitemnumb=d[y]}for(var D=0;D<L;D++){d.shift()}c.setData(u);sap.ui.getCore().setModel(new t(c.getData()),a);i.cycleIndicatorSelected(u.length-1);i.onUpdateTitleCount(a,c.getData())}i.CopyNoOfObject=0;i.CopyTempArray=[]}}}}if(r==="active_copy"){if(s){i.CopyTempArray=d;c=i.getView().getModel(a);if(a==="AIWEQUI"){for(var k=0;k<l;k++){i.readEquipmentData(s.Equnr)}}if(a==="AIWMSPT"){for(var F=0;F<l;F++){i.readMeasuringPointData(s.Mspoint)}}if(a==="AIWMPMI"){if(o==="HEADER"){for(var A=0;A<l;A++){i.readMaintenancePlanData(s.Warpl)}i.CopyTempArray=d;i.CopyNoOfObject=l}if(o==="MPITEM"){for(var w=0;w<parseInt(i.CopyNoOfObject);w++){p=c.getData();var q=s[w].itemModel.length;var x=s[w].ObjListItems;for(var W=0;W<q;W++){for(var V=0;V<x.length;V++){if(x[V].Warpl===s[w].Warpl&&x[V].Mitemnumb===s[w].itemModel[W].Mitemnumb){x[V].Mitemnumb=d[W]}}s[w].itemModel[W].Mitemnumb=d[W]}for(var B=0;B<q;B++){d.shift()}p.push(s[w]);c.setData(p);sap.ui.getCore().setModel(new t(c.getData()),a)}}}}}m.tableBusy=false;g.setData(m)};var h=function(){i.BusyDialog.close();m.tableBusy=false;g.setData(m)};i.BusyDialog.open();i._readData(c,u,f,h,p)},setRejectDialog:function(e){this.rejectDialog=e},getRejectDialog:function(){return this.rejectDialog},onRejectClose:function(){this.getRejectDialog().close();this._reject()},_reject:function(){var e=this;var t=sap.ui.getCore().byId("rejectNote").getValue();var a=sap.ui.getCore().byId("rejectReason").getValue();var r=this.getView().getModel("crCollection");var l=r.getProperty(this.itemPath).ChangedAt.ms;e.ChangedAt=this.getTime(l);var n={ActionCode:this.ractionCode,ChangeRequestID:e.cReqNo,Model:r.getProperty(this.itemPath).Model,Note:t,CreatedBy:r.getProperty(this.itemPath).CreatedBy,ObjectDescription:encodeURIComponent(e.crDesc),ChangedAt:r.getProperty(this.itemPath).CRChangedAt,RejectionReasonCode:a};this.decisionDialog.open();var s="/ExecuteCRSet";var o=e.getView().getModel("ApprovalModel");var i=function(t){var a=t.Message;sap.m.MessageToast.show(a,{duration:6e3});e.decisionDialog.close();window.history.back()};var d=function(t){e.decisionDialog.close();var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var r=0;r<JSON.parse(t.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(t.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}e.createMessagePopover(l,false)};o.create(s,n,{success:i,error:d})},onRejectCancel:function(){this.getRejectDialog().close()},onTextEnter:function(){var e=sap.ui.getCore().byId("rejectReason").getValue();var t=sap.ui.getCore().byId("rejectNote").getValue();var a=sap.ui.getCore().byId("rejectOk");if(e===""||t===""){a.setEnabled(false)}else{a.setEnabled(true)}},onReasonChange:function(e){var t=sap.ui.getCore().byId("rejectReason").getValue();var a=sap.ui.getCore().byId("rejectNote").getValue();var r=sap.ui.getCore().byId("rejectOk");if(t===""||a===""){r.setEnabled(false)}else{r.setEnabled(true)}},onOpenPopover:function(e){if(this._oPopover!==""&&this._oPopover!==undefined){this._oPopover.destroy();this._oPopover=""}if(!this._oPopover){this._oPopover=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.Common.CRdetails",this);this.getView().addDependent(this._oPopover)}var t=e.getSource();jQuery.sap.delayedCall(0,this,function(){this._oPopover.openBy(t)})},bindRejectReason:function(e,t){var a=this.getView().getModel("valueHelp");a.setDefaultCountMode(sap.ui.model.odata.CountMode.None);sap.ui.getCore().byId("rejectReason").setModel(a);var r=[new sap.ui.model.Filter("CreqType","EQ",this.crType)];sap.ui.getCore().byId("rejectReason").bindAggregation("items",{path:"/RejectReasonSet",template:new sap.ui.core.ListItem({text:"{ReasonRej}",additionalText:"{Description}"}),filters:r,sorter:[]})},getFragmentModelName:function(e){var t,a;if(this._copyFragmentFlag){if(e.getSource().getId().indexOf("dialog")!==-1){a=e.getSource().getProperty("title")}else{a=e.getSource().getParent().getProperty("title")}}else{if(e.getSource().getId().indexOf("dialog")!==-1){a=e.getSource().getTitle()}else{a=e.getSource().getParent().getParent().getParent().getParent().getText()}}if(a.indexOf("FLOC")!==-1||a.indexOf("Functional")!==-1){t=this.oModelAIWFLOC}if(a.indexOf("EQUI")!==-1||a.indexOf("Equipment")!==-1){t=this.oModelAIWEQUI}if(a.indexOf("MSPT")!==-1||a.indexOf("Measuring")!==-1){t=this.oModelAIWMSPT}if(a.indexOf("MPMI")!==-1||a.indexOf("Maintenance")!==-1){t=this.oModelAIWMPMI}return t},onMenuAction:function(e){var t=e.getParameter("item").getKey();var a=sap.ui.getCore().getModel("EAMCRModel");var r="";switch(t){case"createFloc":this._copyFragmentFlag=false;this.onCreateRowPress("AIWFLOC");break;case"copyFloc":this.openCopyFragment("CopyFunctionalLocation");break;case"changeFloc":this._copyFragmentFlag=false;this.getRouter().navTo("search",{action:"changeFloc"});break;case"createEqui":this._copyFragmentFlag=false;r=this.getObTab(this.oModelAIWEQUI,"type");this.readCreateTempKey(r,this.oModelAIWEQUI,"create",1);break;case"copyEqui":this.openCopyFragment("CopyEquipment");break;case"changeEqui":this._copyFragmentFlag=false;this.getRouter().navTo("search",{action:"changeEqui"});break;case"createMspt":this._copyFragmentFlag=false;r=this.getObTab(this.oModelAIWMSPT,"type");this.readCreateTempKey(r,this.oModelAIWMSPT,"create",1);break;case"copyMspt":this.openCopyFragment("CopyMeasuringPoint");break;case"changeMspt":this._copyFragmentFlag=false;this.getRouter().navTo("search",{action:"changeMspt"});break;case"createMpmi":r=this.getObTab(this.oModelAIWMPMI,"type");this.readCreateTempKey(r,this.oModelAIWMPMI,"create",1);break;case"copyMpmi":this.openCopyFragment("CopyMaintenancePlan");break;case"changeMpmi":this.getRouter().navTo("search",{action:"changeMpmi"});break;case"createMbom":this.action="createMbom";this.CreateBomRow("CreateMaterialBom");break;case"copyMbom":this.action="copyMbom";this.openCopyFragment("CopyMaterialBom");break;case"changeMbom":this.getRouter().navTo("search",{action:"changeMbom"});break;case"createEbom":this.action="createEbom";this.CreateBomRow("CreateEquipmentBom");break;case"changeEbom":this.getRouter().navTo("search",{action:"changeEbom"});break;case"copyEbom":this.action="copyEbom";this.openCopyFragment("CopyEquipmentBom");break;case"copyMtoEbom":this.action="copyMtoEbom";this.openCopyFragment("CopyMaterialtoEquipmentBom");break;case"createFlbom":this.action="createFlbom";this.CreateBomRow("CreateFLBom");break;case"changeFlbom":this.getRouter().navTo("search",{action:"changeFlbom"});break;case"copyFlbom":this.action="copyFlbom";this.openCopyFragment("CopyFlocBom");break;case"copyMtoFlbom":this.action="copyMtoFlbom";this.openCopyFragment("CopyMaterialtoFlocBom");break;case"createWbsbom":this.action="createWbsbom";this.CreateBomRow("createWbsbom");break;case"changeWbsbom":this.getRouter().navTo("search",{action:"changeWbsbom"});break;case"copyWbsbom":this.action="copyWbsbom";this.openCopyFragment("CopyWBSBom");break;case"copyMtoWbsbom":this.action="copyMtoWbsbom";this.openCopyFragment("CopyMaterialtoWBSBom");break;case"createOn":this.action="createOn";this.CreateBomRow("createObjNet");break;case"changeOn":this.action="changeOn";this.getRouter().navTo("search",{action:"changeOn"});break;case"copyOn":this.action="copyOn";this.openCopyOnFragment();break;case"createWC":this.action="createWC";this.CreatRow("CreateWorkCenter");break;case"copyWC":this.action="copyWC";this.openCopyFragment("CopyWorkCenter");break;case"changeWC":this.action="changeWC";this.getRouter().navTo("search",{action:this.action});break;case"approveWC":this.action="approveWC";this.mode="display";break;case"createGTL":this.action="createGTL";this.readCreateTempKeyT("CreateTaskList",null,0);break;case"copyGTL":this.action="copyGTL";this.openCopyFragment("CopyTaskList");break;case"changeGTL":this.action="changeGTL";this.getRouter().navTo("search",{action:this.action});break;case"approveGTL":this.action="approveGTL";break;case"createETL":this.action="createETL";this.readCreateTempKeyT("CreateTaskList",null,0);break;case"copyETL":this.action="copyETL";this.openCopyFragment("CopyTaskList");break;case"changeETL":this.action="changeETL";this.getRouter().navTo("search",{action:this.action});break;case"approveETL":this.action="approveETL";break;case"createFTL":this.action="createFTL";this.readCreateTempKeyT("CreateTaskList",null,0);break;case"copyFTL":this.action="copyFTL";this.openCopyFragment("CopyTaskList");break;case"changeFTL":this.action="changeFTL";this.getRouter().navTo("search",{action:this.action});break;case"approveFTL":this.action="approveFTL";break;case"createOL":this.action="createOL";this.enableFields();this.readCreateTempKeyT("CreateObjectLink",null,0);break;case"copyOL":this.action="copyOL";this.enableFields();this.openCopyFragment("CopyObjectLink");break;case"changeOL":this.action="changeOL";this.enableFields();this.getRouter().navTo("search",{action:this.action});break;case"approveOL":this.action="approveOL";this.disableFields("OL");this.mode="display";break}},onAddCounter:function(){var e;var t=this;var a={Ktext:"",Iwerk:"",wc:"",wcDesc:"",plant:"",plantDesc:"",usg:"",Statu:"",statusDesc:"",Plnnr:"",Werks:"",Verwe:"",usageDesc:"",KapArbpl:"",Vagrp:"",plGrpDesc:"",Anlzu:"",sysCondDesc:"",pPlantDesc:"",Strat:"",stratDesc:"",valueStatePP:"None",valueStateS:"None",valueStateU:"None",valueStateT:"None",plEnable:true,planningPlantValueState:"None",statusVS:"None",plantValueState:"None",usgValueState:"None",planningPlantValueStateTxt:"",statusVST:"",plantValueStateTxt:"",usgValueStateTxt:"",vEquiLbl:false,vEqui:false,vEquiDesc:false,equipment:"",equipmentDesc:"",floc:"",flocDesc:"",vFlocLbl:false,vFloc:false,vFlocDesc:false,rbGen:true,rbEqui:true,rbFloc:true,bAddHeader:false,bAddOperation:false,bAddComponent:false,bAddOprRel:false,enable:true};if(this.action==="createGTL"){var r=sap.ui.getCore().getModel("AIWListGTLModel");var l=r.getData();if(l.length>0){for(var n=0;n<l.length;n++){if(this.gtlPath===n){if(l[n].header.length>0){var s=l[n].header[l[n].header.length-1].Plnal;e=parseInt(s)+1}else{e=1}}}}else{e=1}}else if(this.action==="createETL"){var o=sap.ui.getCore().getModel("AIWListETLModel");var i=o.getData();if(i.length>0){for(var n=0;n<i.length;n++){if(this.etlPath===n){if(i[n].header.length>0){var s=i[n].header[i[n].header.length-1].Plnal;e=parseInt(s)+1}else{e=1}a.equipment=i[n].equipment;a.equipmentDesc=i[n].equipmentDesc}}}else{e=1}}else if(this.action==="createFTL"){var d=sap.ui.getCore().getModel("AIWListFTLModel");var c=d.getData();if(c.length>0){for(var n=0;n<c.length;n++){if(this.ftlPath===n){if(c[n].header.length>0){var s=c[n].header[c[n].header.length-1].Plnal;e=parseInt(s)+1}else{e=1}}a.floc=c[n].floc;a.flocDesc=c[n].floc}}else{e=1}}a.Plnal=e;if(this.action==="createGTL"){var r=sap.ui.getCore().getModel("AIWListGTLModel");var l=r.getData();var p=this.getView().getModel("GTLHeaderModel");var u=[];for(var n=0;n<l.length;n++){if(this.gtlPath===n){l[n].header.push(a);u.push(l[n].header);t.readHdrDefaults("tlDesc",u[0].length-1,u)}}r.setData(l);this.getView().getModel("AIWListGTLModel").refresh();this.getView().setModel(r,"AIWListGTLModel");p.setData(u);this.getView().setModel(p,"GTLHeaderModel")}else if(this.action==="createETL"){var o=sap.ui.getCore().getModel("AIWListETLModel");var i=o.getData();var g=this.getView().getModel("ETLHeaderModel");var m=[];for(var n=0;n<i.length;n++){if(this.etlPath===n){i[n].header.push(a);m.push(i[n].header);t.readHdrDefaults("tlDesc",m[0].length-1,m)}}o.setData(i);this.getView().getModel("AIWListETLModel").refresh();this.getView().setModel(o,"AIWListETLModel");g.setData(m);this.getView().setModel(g,"ETLHeaderModel");this.DeriveEquiFlocData(i[this.etlPath].equipment,"E")}else if(this.action==="createFTL"){var d=sap.ui.getCore().getModel("AIWListFTLModel");var c=d.getData();var f=this.getView().getModel("FTLHeaderModel");var h=[];for(var n=0;n<c.length;n++){if(this.ftlPath===n){c[n].header.push(a);h.push(c[n].header);t.readHdrDefaults("tlDesc",h[0].length-1,h)}}d.setData(c);this.getView().getModel("AIWListFTLModel").refresh();this.getView().setModel(d,"AIWListFTLModel");f.setData(h);this.getView().setModel(f,"FTLHeaderModel");this.DeriveEquiFlocData(c[this.ftlPath].floc,"F")}},onCreateRowPress:function(e,t){var a=this;var r={};if(e==="AIWFLOC"){r={Adrnr:"",Adrnri:"",viewParameter:"create",Functionallocation:"",Flocdescription:"",Strucindicator:a.StrcIndDerv===undefined?"":a.StrcIndDerv,StrucIndicatorDesc:a.StrcIndDescDerv===undefined?"":a.StrcIndDescDerv,EditMask:a.EditMaskDerv===undefined?"":a.EditMaskDerv,Hierarchy:a.HierDerv===undefined?"":a.HierDerv,Alkey:a.AltKeyDerv===undefined?"":a.AltKeyDerv,Altxt:a.AltKeyDescDerv===undefined?"":a.AltKeyDescDerv,Floccategory:"",FlocCategoryDesc:"",Maintplant:"",MaintplantDesc:"",Location:"",Locationdesc:"",Abckz:"",Abctx:"",Bukrs:"",Butxt:"",City:"",Kostl:"",Mctxt:"",Kokrs:"",Werks:"",Planningplantdes:"",Ingrp:"",Innam:"",MainArbpl:"",MainKtext:"",MainWerks:"",Arbpl:"",Ktext:"",WcWerks:"",SupFunctionallocation:"",SupFlocdescription:"",TechnicalObjectTyp:"",Description:"",BeberFl:"",Fing:"",Tele:"",ConstrType:"",ConstructionDesc:"",AcsnodeIppe:"",DescIppe:"",VariantIppe:"",AltIppe:"",Stattext:"",StsmEqui:"",StsmEquiDesc:"",UstwEqui:"",UswoEqui:"",UstaEqui:"",Deact:false,DeactEnable:true,lam:{Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"},classItems:[],characteristics:[],linearChar:[],charNewButton:false,linearCharAddEnable:true,attachmentCount:"0",Guids:"",Title:"",TitleCode:"",Name1:"",Name2:"",Name3:"",Name4:"",AddrLocation:"",Sort1:"",Sort2:"",NameCo:"",PostCod1:"",City1:"",Building:"",Floor:"",Roomnum:"",Street:"",Strsuppl1:"",Strsuppl2:"",Strsuppl3:"",RefPosta:"",Landx:"",Langucode:"",LanguP:"",TimeZone:"",Region:"",RegionDesc:"",intlAddr:[],altlbl:[],Lvorm:false,FunctionallocationVS:"Error",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",BukrsEnabled:true,TplnrEnabled:true,MaintplantEnabled:true,Modeldesc:"",Modelref:"",Modelrver:"",Modelext:"",Modelname:"",Modelver:""};this.handleCreatePress(this,r,this.oModelAIWFLOC);this.handleDoiCreate(r.Functionallocation,"FL");return}else if(e==="AIWEQUI"){r={Adrnr:"",Adrnri:"",viewParameter:"create",Equnr:t,Eqktx:"",EquipmentCatogory:"",EquipCatgDescription:"",Maintplant:"",MaintplantDesc:"",Tplnr:"",Pltxt:"",SuperordinateEquip:"",SuperordinateEquipDesc:"",Bukrs:"",Butxt:"",Location:"",Locationdesc:"",Abckz:"",Abctx:"",Kostl:"",Kokrs:"",Mctxt:"",Answt:"0.000",Ansdt:null,Waers:"",Werks:"",Planningplantdes:"",Ingrp:"",Innam:"",Arbpl:"",Ktext:"",WcWerks:"",MainArbpl:"",MainKtext:"",MainWerks:"",BeberFl:"",Herst:"",TechnicalObjectTyp:"",Description:"",Typbz:"",ConstrType:"",ConstructionDesc:"",TechIdNum:"",Serge:"",MapaEeqz:"",EquipPosition:"",PlanvPrt:"",SteufPrt:"",KtschPrt:"",Ewformprt:"",SteufRef:false,KtschRef:false,EwformRef:false,Deact:false,DeactEnable:true,Funcid:"",Frcfit:"",Frcrmv:"",Ppeguid:null,lam:{Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"},Title:"",TitleCode:"",Name1:"",Name2:"",Name3:"",Name4:"",AddrLocation:"",Sort1:"",Sort2:"",NameCo:"",PostCod1:"",City1:"",Building:"",Floor:"",Roomnum:"",Street:"",Strsuppl1:"",Strsuppl2:"",Strsuppl3:"",RefPosta:"",Landx:"",Langucode:"",LanguP:"",TimeZone:"",Region:"",RegionDesc:"",intlAddr:[],classItems:[],characteristics:[],linearChar:[],linearCharAddEnable:false,charNewButton:false,attachmentCount:"0",Guids:"",Stattext:"",StsmEqui:"",StsmEquiDesc:"",UstwEqui:"",UswoEqui:"",UstaEqui:"",EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",ConstrTypeMaxL:0,charValueMaxL:0,BukrsEnabled:true,TplnrEnabled:true,dfps:{Tailno:"",TailnoVS:"None",Area:"",AreaDesc:"",AreaPrfl:"",Site:"",SiteDesc:"",SiteVS:"None",SitePrfl:"",MPO:"",MPODesc:"",RIC:"",RICDesc:"",ModelId:"",ModelIdDesc:"",ModelIdVS:"None",ForeignEq:false,TechSts:"",OperSts:"0001",Remark:"",dfpsCrtEnabled:true,dfpsDltEnabled:false,dfpsEnabled:false,TailnoReq:false}};this.handleCreatePress(this,r,this.oModelAIWEQUI);this.handleDoiCreate(r.Equnr,"EQ");return}else if(e==="AIWMSPT"){r={viewParameter:"create",Mspoint:t,Pttxt:"",ObtypMs:"IEQ",Txt:"Equipment",Mptyp:"",Mpttx:"",Equnr:"",Eqktx:"",Tplnr:"",Pltxt:"",Indct:false,AtnamMs:"",Atbez:"",Codgr:"",Codgrtxt:"",Cjumc:"",Cdsuf:false,Pyeac:"",Desir:"",Mrmax:"",Mrmin:"",Decim:"0",lam:{Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"},classItems:[],characteristics:[],charNewButton:false,attachmentCount:"0",Guids:"",PttxtVS:"None",PttxtVST:"",ObtypMsVS:"None",ObtypMsVST:"",MptypVS:"None",MptypVST:"",AtnamMsVS:"None",AtnamMsVST:"",EqunrVS:"None",EqunrVST:"",TplnrVS:"None",TplnrVST:"",CodgrVS:"None",CodgrVST:"",Deact:false,DeactEnable:true,EqunrEnabled:true,TplnrEnabled:false,EqunrLblVis:true,EqunrInpVis:true,EqktxInpVis:true,TplnrLblVis:false,TplnrInpVis:false,PltxtInpVis:false,valCodeStuffSel:false,countEnable:false,tEnable:true};this.handleCreatePress(this,r,this.oModelAIWMSPT);return}else if(e==="AIWMPMI"){r={menuAction:"create",viewParameter:"create",Warpl:t,Wptxt:"",Mptyp:"",Txt:"",CycleType:"",Strat:"",StratDesc:"",Mehrfach:false,Wset:"",Ktext:"",Sfakt:"0",Abrho:"000",Hunit:"",Stadt:l.currentDate(),StadtLBLText:this.getView().getModel("i18n").getProperty("CYCLE_START_TXT"),Fabkl:"",FabklDesc:"",Stich:4,Szaeh:"",Unitc:"",Mpcycleno:"",Andor:"",Deact:false,DeactEnable:true,ButtonNewItemEnabled:true,ButtonAssignItemEnabled:true,ButtonNewCycleEnabled:false,CycleSetSeqVis:true,ScheIndRbTime:true,ScheIndRbTimeKeyDate:false,ScheIndRbTimeFactCal:false,ScheIndRbPerformance:false,cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,OROP:false,AndOP:false,MaintenanceCycleMode:"Delete",MaintenanceItemMode:"Delete",MptypEnabled:true,cycleIndSingleEnabled:true,cycleIndStrategyEnabled:true,cycleIndMultCntrEnabled:true,ScheIndRbTimeEnabled:true,ScheIndRbTimeKeyDateEnabled:true,ScheIndRbTimeFactCalEnabled:true,ScheIndRbPerformanceEnabled:true,FabklEnabled:false,FabklLBLReq:false,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,cycleModel:[],itemModel:[],ObjListItems:[],attachmentCount:"0",Guids:"",WarplVS:"None",WarplVST:"",WptxtVS:"None",WptxtVST:"",StratVS:"None",StratVST:"",WsetVS:"None",WsetVST:"",StadtVS:"None",StadtVST:"",StichVS:"None",StichVST:"",HunitVS:"None",HunitVST:"",classItems:[],characteristics:[],charNewButton:false};this.handleCreatePress(this,r,this.oModelAIWMPMI);return}},handleDoiCreate:function(e,t){var a=this;var r=sap.ui.getCore().getModel("dataOriginMOP");var l=r.getData();if(t==="EQ"){var n=$.map(a.DOIarrayEQ,function(e){return $.extend(true,{},e)});var s={key:e,DOI:n};l.EQ.push(s);r.setData(l)}if(t==="FL"){var o=$.map(a.DOIarrayFL,function(e){return $.extend(true,{},e)});var s={key:e,DOI:o};l.FL.push(s);r.setData(l)}},handleCreatePress:function(e,t,a){var r,l;r=e.getView().getModel(a);l=r.getData();l.push(t);r.setData(l);if(e.mode!=="display"){e.onUpdateTitleCount(a,l)}e.getView().setModel(r,a);sap.ui.getCore().setModel(r,a)},onUpdateTitleCount:function(e,t){if(this.mode!=="display"){var a=this.getView().getModel("mainView").getData();var r=0;if(t){r=t.length}if(e===this.oModelAIWFLOC){a.functionalLocationMain=r}if(e===this.oModelAIWEQUI){a.equipmentMain=r}if(e===this.oModelAIWMSPT){a.measuringPointMain=r}if(e===this.oModelAIWMPMI){a.maintenancePlanMain=r}this.getView().getModel("mainView").setData(a)}},openCopyFragment:function(e){this._copyFragment=undefined;this._copyFragmentFlag=true;var a=this.getView().getModel("i18n");if(e==="CopyFunctionalLocation"||e==="CopyEquipment"||e==="CopyMeasuringPoint"||e==="CopyMaintenancePlan"){var r={header:"",noOfObjects:1,Tplnr:"",Equnr:"",Mspoint:"",Warpl:"",functionalLocVis:true,equipmentVis:true,measuringPointVis:true,maintenancePlanVis:true};if(e==="CopyFunctionalLocation"){this.oCopyModelName=this.oModelAIWFLOC;r.header=a.getProperty("copyFlocs");r.equipmentVis=false;r.measuringPointVis=false;r.maintenancePlanVis=false}if(e==="CopyEquipment"){this.oCopyModelName=this.oModelAIWEQUI;r.header=a.getProperty("copyEquis");r.functionalLocVis=false;r.measuringPointVis=false;r.maintenancePlanVis=false}if(e==="CopyMeasuringPoint"){this.oCopyModelName=this.oModelAIWMSPT;r.header=a.getProperty("copyMspts");r.functionalLocVis=false;r.equipmentVis=false;r.maintenancePlanVis=false}if(e==="CopyMaintenancePlan"){this.oCopyModelName=this.oModelAIWMPMI;r.header=a.getProperty("copyMpmis");r.functionalLocVis=false;r.equipmentVis=false;r.measuringPointVis=false}var l=new t(r);this._copyFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.Common.CopyFragment",this);this._copyFragment.setModel(l,"copyModel");this.getView().addDependent(this._copyFragment);this._copyFragment.open()}else if(e==="CopyMaterialBom"||e==="CopyEquipmentBom"||e==="CopyMaterialtoEquipmentBom"||e==="CopyFlocBom"||e==="CopyMaterialtoFlocBom"||e==="CopyWBSBom"||e==="CopyMaterialtoWBSBom"){var n={header:"",sourceHeader:"",targetHeader:"",copyMaterialSource:"",copyEquipmentSource:"",copyFlocSource:"",copyWBSSource:"",copyPlantSource:"",copyUsageSource:"",copyAltBomSource:"",copyMaterialTarget:"",copyEquipmentTarget:"",copyFlocTarget:"",copyWBSTarget:"",copyPlantTarget:"",copyUsageTarget:"",copyAltBomTarget:"",copyMaterialSourceDesc:"",copyEquipmentSourceDesc:"",copyFlocSourceDesc:"",copyWBSSourceDesc:"",copyPlantSourceDesc:"",copyUsageSourceDesc:"",copyMaterialTargetDesc:"",copyEquipmentTargetDesc:"",copyFlocTargetDesc:"",copyWBSTargetDesc:"",copyPlantTargetDesc:"",copyUsageTargetDesc:"",srcMatVisible:true,srcEquiVisible:true,srcFlocVisible:true,srcWBSVisible:true,srcAltBomVisible:true,tarMatVisible:true,tarEquiVisible:true,tarFlocVisible:true,tarWBSVisible:true,tarAltBomVisible:true,srcMatValueState:"None",srcEquiValueState:"None",srcFlocValueState:"None",srcWBSValueState:"None",srcPlantValueState:"None",srcUsageValueState:"None",srcAltBomValueState:"None",tarMatValueState:"None",tarEquiValueState:"None",tarFlocValueState:"None",tarWBSValueState:"None",tarPlantValueState:"None",tarUsageValueState:"None",tarAltBomValueState:"None"};if(e==="CopyMaterialBom"){n.srcEquiVisible=false;n.srcFlocVisible=false;n.srcWBSVisible=false;n.tarEquiVisible=false;n.tarFlocVisible=false;n.tarWBSVisible=false;n.header=a.getProperty("copyMbomTitle");n.sourceHeader=a.getProperty("SourceMbom");n.targetHeader=a.getProperty("targetMbom")}if(e==="CopyEquipmentBom"){n.srcMatVisible=false;n.srcFlocVisible=false;n.srcWBSVisible=false;n.tarMatVisible=false;n.tarFlocVisible=false;n.tarWBSVisible=false;n.srcAltBomVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyEbomTitle");n.sourceHeader=a.getProperty("SourceEbom");n.targetHeader=a.getProperty("targetEbom")}if(e==="CopyMaterialtoEquipmentBom"){n.srcEquiVisible=false;n.srcFlocVisible=false;n.srcWBSVisible=false;n.tarMatVisible=false;n.tarFlocVisible=false;n.tarWBSVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyMROBomTitle");n.sourceHeader=a.getProperty("SourceMbom");n.targetHeader=a.getProperty("targetEbom")}if(e==="CopyFlocBom"){n.srcMatVisible=false;n.srcEquiVisible=false;n.srcWBSVisible=false;n.tarMatVisible=false;n.tarEquiVisible=false;n.tarWBSVisible=false;n.srcAltBomVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyFlbomTitle");n.sourceHeader=a.getProperty("SourceFlbom");n.targetHeader=a.getProperty("targetFlom")}if(e==="CopyMaterialtoFlocBom"){n.srcEquiVisible=false;n.srcFlocVisible=false;n.srcWBSVisible=false;n.tarMatVisible=false;n.tarEquiVisible=false;n.tarWBSVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyMROBomTitle");n.sourceHeader=a.getProperty("SourceMbom");n.targetHeader=a.getProperty("targetFlom")}if(e==="CopyWBSBom"){n.srcEquiVisible=false;n.srcFlocVisible=false;n.tarEquiVisible=false;n.tarFlocVisible=false;n.srcAltBomVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyWbsbomTitle");n.sourceHeader=a.getProperty("SourceWbsbom");n.targetHeader=a.getProperty("targetWbsbom")}if(e==="CopyMaterialtoWBSBom"){n.srcEquiVisible=false;n.srcFlocVisible=false;n.srcWBSVisible=false;n.tarEquiVisible=false;n.tarFlocVisible=false;n.tarAltBomVisible=false;n.header=a.getProperty("copyMROBomTitle");n.sourceHeader=a.getProperty("SourceMbom");n.targetHeader=a.getProperty("targetWbsbom")}var l=new t(n);if(!this._copyFragment){this._copyFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.BOM.CopyBomGeneral",this);this.getView().addDependent(this._copyFragment)}this._copyFragment.setModel(l,"copyModel");this._copyFragment.open()}else if(e.indexOf("WorkCenter")>0||e.indexOf("TaskList")>0||e.indexOf("ObjectLink")>0){var s={copyWCSource:"",copyPlantSource:"",copyWCTarget:"",copyPlantTarget:"",copyHeader:"",Type:"",sWCValueState:"None",sPlantValueState:"None",tWCValueState:"None",tPlantValueState:"None",sWCValueStateTxt:"",sPlantValueStateTxt:"",tWCValueStateTxt:"",tPlantValueStateTxt:""};var o={noObj:"1",genTLGrp:"",eqTLGrp:"",flocTLGrp:"",copyHeader:"",genTLGrpVisible:true,eqTLGrpVisible:true,flocTLGrpVisible:true};var i={noObj:"1",sLink:"",copyHeader:""};if(e==="CopyWorkCenter"){s.copyHeader=a.getProperty("copyWCTitle");var d=new t(s);if(!this._copyWCFragment){this._copyWCFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.WC.CopyWorkCenter",this);this.getView().addDependent(this._copyWCFragment)}this._copyWCFragment.setModel(d,"copyWCModel");sap.ui.getCore().setModel(d,"copyWCModel");this._copyWCFragment.open()}else if(e==="CopyTaskList"){if(this.action==="copyGTL"){o.copyHeader=a.getProperty("copyGTLTitle");o.eqTLGrpVisible=false;o.flocTLGrpVisible=false}else if(this.action==="copyETL"){o.copyHeader=a.getProperty("copyETLTitle");o.genTLGrpVisible=false;o.flocTLGrpVisible=false}else if(this.action==="copyFTL"){o.copyHeader=a.getProperty("copyFTLTitle");o.eqTLGrpVisible=false;o.genTLGrpVisible=false}var c=new t(o);if(!this._copyTLFragment){this._copyTLFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.TL.CopyTaskList",this);this.getView().addDependent(this._copyTLFragment)}this._copyTLFragment.setModel(c,"copyTLModel");sap.ui.getCore().setModel(c,"copyTLModel");this._copyTLFragment.open()}else if(e==="CopyObjectLink"){i.copyHeader=a.getProperty("copyOL");var p=new t(i);if(!this._copyOLFragment){this._copyOLFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.OL.CopyObjectLink",this);this.getView().addDependent(this._copyOLFragment)}this._copyOLFragment.setModel(p,"copyOLModel");sap.ui.getCore().setModel(p,"copyOLModel");this._copyOLFragment.open()}}},onNoOfObjectChange:function(e){var t=e.getSource().getModel("copyModel").getData().noOfObjects;e.getSource().getModel("copyModel").getData().noOfObjects=t},onCopyValueChange:function(e){var t=e.getSource().getBindingInfo("value").binding.sPath;var a=e.getSource().getValue();if(a===""||a===undefined){e.getSource().setValue("")}else{e.getSource().setValue(a.toUpperCase());this._copyValueChange(t,a,e)}},_copyValueChange:function(e,t,a){var r=t;var l=r.replace(/^[ ]+|[ ]+$/g,"");var n,s;if(l!==""){if(e==="Tplnr"){n="/FunctionLocationSet";s=[new sap.ui.model.Filter("Tplnr","EQ",r)]}if(e==="Equnr"){n="/EquipmentNumberSet";s=[new sap.ui.model.Filter("Equnr","EQ",r)]}if(e==="Mspoint"){n="/MSPT_FL_VHSet";s=[new sap.ui.model.Filter("Obtyp","EQ",r)]}if(e==="Warpl"){n="/MPlanVHSet";s=[new sap.ui.model.Filter("Warpl","EQ",r)]}var o=this.getView().getModel("valueHelp");var i=function(e){if(e.results.length>0){a.getSource().setValue(l)}else{a.setValueState("Error")}};var d=function(e){var t=JSON.parse(e.responseText);var r=t.error.message.value;a.setValueState("Error");a.setValueStateText(r)};this._readData(n,o,i,d,s)}},copyValueHelpSelect:function(e){var t=e.getSource().getBindingInfo("value").binding.sPath;if(t.indexOf("/Tplnr")!==-1){d.valueHelpFunCopyFloc(this._copyFragment.getModel("copyModel").getData(),this)}if(t.indexOf("/Equnr")!==-1){d.valueHelpFunCopyEqui(this._copyFragment.getModel("copyModel").getData(),this)}if(t.indexOf("/Mspoint")!==-1){d.valueHelpFunMeasPoint(this._copyFragment.getModel("copyModel").getData(),this)}if(t.indexOf("/Warpl")!==-1){d.valueHelpFunMaintPlan(this._copyFragment.getModel("copyModel").getData(),this)}},getUserStatus:function(e,a,r,l,n){var s;var o=a.getView().getModel();var i=this.getView().getModel(l);var d=i.getData()[r];var c=this.getView().getModel(l);var p=i.getData();if(l==="AIWEQUI"){s="/DeriveSTProfileSet(Eqtyp='"+e+"',Lvorm=false,Deact="+d.Deact+",Fltyp='')"}if(l==="AIWFLOC"){s="/DeriveSTProfileSet(Eqtyp='',Lvorm=false,Deact="+d.Deact+",Fltyp='"+e+"')"}o.read(s,{success:function(e){if(l==="AIWEQUI"){a.stagingEqUserSts=e.JTxt30;a.stagingEqStsWOnumber=e.Dscstatwoutnum}if(l==="AIWFLOC"){p=i.getData();p.push(n);var r=$.map(p,function(e){return $.extend(true,{},e)});r[r.length-1].Functionallocation="";r[r.length-1].SupFunctionallocation="";r[r.length-1].SupFlocdescription="";r[r.length-1].FunctionallocationVS="Error";r[r.length-1].viewParameter="create";r[r.length-1].FunctionalLocEnabled=true;r[r.length-1].FlocCatEnabled=true;r[r.length-1].StrucIndEnabled=true;r[r.length-1].MaintplantEnabled=true;r[r.length-1].BukrsEnabled=true;r[r.length-1].altlbl=[];r[r.length-1].UstaEqui=e.JTxt30;r[r.length-1].UswoEqui=e.Dscstatwoutnum;c.setData(r);sap.ui.getCore().setModel(new t(r),a.oModelAIWFLOC);n=null;a.onUpdateTitleCount(a.oModelAIWFLOC,r);var s=$.map(a.DOIarrayFL,function(e){return $.extend(true,{},e)});sap.ui.getCore().getModel("dataOriginMOP").getData().FL.push({key:r[r.length-1].Functionallocation,DOI:s})}},error:function(){}})},handleConfirmPress:function(e){var t=this;var a=this.getFragmentModelName(e);var r=false;var l=this._copyFragment.getModel("copyModel").getData();var n=l.noOfObjects;this.noOfCopyObjects=l.noOfObjects;if(l.noOfObjects===""||l.noOfObjects===undefined){l.noOfObjectsVS="Error";r=true}if(a===this.oModelAIWFLOC){if(l.Tplnr===""||l.Tplnr===undefined){l.TplnrVS="Error";r=true}}if(a===this.oModelAIWEQUI){if(l.Equnr===""||l.Equnr===undefined){l.EqunrVS="Error";r=true}}if(a===this.oModelAIWMSPT){if(l.Mspoint===""||l.Mspoint===undefined){l.MspointVS="Error";r=true}}if(a===this.oModelAIWMPMI){if(l.Warpl===""||l.Warpl===undefined){l.WarplVS="Error";r=true}}if(r){this._copyFragment.getModel("copyModel").setData(l);return}var s,o,i;var d=sap.ui.getCore().getModel("EAMCRModel");for(var c=0;c<n;c++){if(a===this.oModelAIWFLOC){o=this.getView().getModel(this.oModelAIWFLOC);i=o.getData();for(var p=0;p<i.length;p++){if(l.Tplnr===i[p].Functionallocation){s=i[p];break}}if(s){this.getUserStatus(s.Floccategory,this,p,this.oModelAIWFLOC,s)}else{this.readFunctionalLocData(l.Tplnr)}}}if(a===this.oModelAIWEQUI){o=this.getView().getModel(this.oModelAIWEQUI);i=o.getData();for(var u=0;u<i.length;u++){if(l.Equnr===i[u].Equnr){s=i[u];break}}if(s){this.getUserStatus(s.EquipmentCatogory,this,u,this.oModelAIWEQUI);this.readCreateTempKey(d.getProperty("/12").CRType,this.oModelAIWEQUI,"stagging_copy",n,s);s=null}else{this.readCreateTempKey(d.getProperty("/12").CRType,this.oModelAIWEQUI,"active_copy",n,l)}}if(a===this.oModelAIWMSPT){o=this.getView().getModel(this.oModelAIWMSPT);i=o.getData();for(var g=0;g<i.length;g++){if(l.Mspoint===i[g].Mspoint){s=i[g];break}}if(s){this.readCreateTempKey(d.getProperty("/8").CRType,this.oModelAIWMSPT,"stagging_copy",n,s);s=null}else{this.readCreateTempKey(d.getProperty("/8").CRType,this.oModelAIWMSPT,"active_copy",n,l)}}if(a===this.oModelAIWMPMI){o=this.getView().getModel(this.oModelAIWMPMI);i=o.getData();for(var m=0;m<i.length;m++){if(l.Warpl===i[m].Warpl){s=i[m];break}}if(s){this.readCreateTempKey(d.getProperty("/7").CRType,this.oModelAIWMPMI,"stagging_copy",n,s,"HEADER");s=null}else{this.readCreateTempKey(d.getProperty("/7").CRType,this.oModelAIWMPMI,"active_copy",n,l,"HEADER")}}this.handleCancelPress()},handleCancelPress:function(){this._copyFragment.close();this._copyFragment.destroy();this._copyFragment=undefined;this._copyFragmentFlag=false},handleValueState:function(e,t,a,r,l){var n=a.getSource().getBindingContext(l).getProperty(r);var s=n[e];if(s===""||s===undefined){this.doneFlag=false;n[t]="Error"}},handleValidation:function(e,t,a,r,l){var n=this;if(t.length>0){for(var s=0;s<t.length;s++){n.handleSubmitValueState("Functionallocation","FunctionallocationVS",t[s],n.getResourceBundle().getText("functionalLocationMand"));n.handleSubmitValueState("Flocdescription","FlocdescriptionVS",t[s],n.getResourceBundle().getText("flocDescMand"));n.handleSubmitValueState("Strucindicator","StrucindicatorVS",t[s],n.getResourceBundle().getText("flocStrIndMand",[t[s].Functionallocation]));n.handleSubmitValueState("Floccategory","FloccategoryVS",t[s],n.getResourceBundle().getText("flocCatMand",[t[s].Functionallocation]));if(t[s].Title!==""&&t[s].Title!==undefined||t[s].TitleCode!==""&&t[s].TitleCode!==undefined||t[s].Name1!==""&&t[s].Name1!==undefined||t[s].Name2!==""&&t[s].Name2!==undefined||t[s].Name3!==""&&t[s].Name3!==undefined||t[s].Name4!==""&&t[s].Name4!==undefined||t[s].Sort1!==""&&t[s].Sort1!==undefined||t[s].Sort2!==""&&t[s].Sort2!==undefined||t[s].NameCo!==""&&t[s].NameCo!==undefined||t[s].PostCod1!==""&&t[s].PostCod1!==undefined||t[s].City1!==""&&t[s].City1!==undefined||t[s].Building!==""&&t[s].Building!==undefined||t[s].Floor!==""&&t[s].Floor!==undefined||t[s].Roomnum!==""&&t[s].Roomnum!==undefined||t[s].AddrLocation!==""&&t[s].AddrLocation!==undefined||t[s].Strsuppl1!==""&&t[s].Strsuppl1!==undefined||t[s].Strsuppl2!==""&&t[s].Strsuppl2!==undefined||t[s].Strsuppl3!==""&&t[s].Strsuppl3!==undefined||t[s].TimeZone!==""&&t[s].TimeZone!==undefined||t[s].RefPosta!==""&&t[s].RefPosta!==undefined||t[s].Region!==""&&t[s].Region!==undefined){n.handleSubmitValueState("RefPosta","RefPostaVS",t[s],n.getResourceBundle().getText("flocCountryMand",[t[s].Functionallocation]))}}n.getView().getModel(n.oModelAIWFLOC).setData(t)}if(a.length>0){for(var o=0;o<a.length;o++){n.handleSubmitValueState("Equnr","EqunrVS",a[o],n.getResourceBundle().getText("equiMand"));n.handleSubmitValueState("Eqktx","EqktxVS",a[o],n.getResourceBundle().getText("equiDescMand"));n.handleSubmitValueState("EquipmentCatogory","EquipmentCatogoryVS",a[o],n.getResourceBundle().getText("equiCatMand",[a[o].Equnr]));if(a[o].Title!==""&&a[o].Title!==undefined||a[o].TitleCode!==""&&a[o].TitleCode!==undefined||a[o].Name1!==""&&a[o].Name1!==undefined||a[o].Name2!==""&&a[o].Name2!==undefined||a[o].Name3!==""&&a[o].Name3!==undefined||a[o].Name4!==""&&a[o].Name4!==undefined||a[o].Sort1!==""&&a[o].Sort1!==undefined||a[o].Sort2!==""&&a[o].Sort2!==undefined||a[o].NameCo!==""&&a[o].NameCo!==undefined||a[o].PostCod1!==""&&a[o].PostCod1!==undefined||a[o].City1!==""&&a[o].City1!==undefined||a[o].Building!==""&&a[o].Building!==undefined||a[o].Floor!==""&&a[o].Floor!==undefined||a[o].Roomnum!==""&&a[o].Roomnum!==undefined||a[o].AddrLocation!==""&&a[o].AddrLocation!==undefined||a[o].Strsuppl1!==""&&a[o].Strsuppl1!==undefined||a[o].Strsuppl2!==""&&a[o].Strsuppl2!==undefined||a[o].Strsuppl3!==""&&a[o].Strsuppl3!==undefined||a[o].TimeZone!==""&&a[o].TimeZone!==undefined||a[o].RefPosta!==""&&a[o].RefPosta!==undefined||a[o].Region!==""&&a[o].Region!==undefined){n.handleSubmitValueState("RefPosta","RefPostaVS",a[o],n.getResourceBundle().getText("equiCountryMand",[a[o].Equnr]))}}n.getView().getModel(n.oModelAIWEQUI).setData(a)}if(r.length>0){for(var i=0;i<r.length;i++){n.handleSubmitValueState("Pttxt","PttxtVS",r[i],n.getResourceBundle().getText("msptDescMand"));n.handleSubmitValueState("ObtypMs","ObtypMsVS",r[i],n.getResourceBundle().getText("msptCatTypeMand"));n.handleSubmitValueState("Mptyp","MptypVS",r[i],n.getResourceBundle().getText("msptCatMand"));var d=r[i].EqunrInpVis;if(d){n.handleSubmitValueState("Equnr","EqunrVS",r[i],n.getResourceBundle().getText("msptEquiMand"))}var c=r[i].TplnrInpVis;if(c){n.handleSubmitValueState("Tplnr","TplnrVS",r[i],n.getResourceBundle().getText("msptFlocMand"))}if(r[i].Indct===true&&(r[i].AtnamMs===""||r[i].AtnamMs===undefined)){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("MCOUNTER_CHAR_ERR")})}if(r[i].Cdsuf===true&&(r[i].Codgr===""||r[i].Codgr===undefined)){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("VCODE_ERR")})}if(r[i].AtnamMs===""||r[i].AtnamMs===undefined||(r[i].Codgr===""||r[i].Codgr===undefined)){var p=false;if(r[i].AtnamMs===""||r[i].AtnamMs===undefined){}else{p=true}if(r[i].Codgr===""||r[i].Codgr===undefined){}else{p=true}if(!p){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("msptCharCodeMand")})}}var u=r[i].tEnable;if(u){var g=parseInt(r[i].Desir);var m=parseInt(r[i].Mrmax);if(g>m){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("msptTargetExdMand")})}}}n.getView().getModel(n.oModelAIWMSPT).setData(r)}if(l.length>0){for(var f=0;f<l.length;f++){n.handleSubmitValueState("Warpl","WarplVS",l[f],n.getResourceBundle().getText("mpmiMand"));n.handleSubmitValueState("Wptxt","WptxtVS",l[f],n.getResourceBundle().getText("mpmiDescMand",[l[f].Warpl]));n.handleSubmitValueState("Mptyp","MptypVS",l[f],n.getResourceBundle().getText("mpmiCatMand",[l[f].Warpl]));var h=l[f].cycleType;if(h===""||h===undefined){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("mpmiCycleType",[l[f].Warpl])})}var S=l[f].ButtonNewCycleEnabled;if(S&&h===0){var T=l[f].cycleModel;if(T.length<=0){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("mpmiCycleMand",[l[f].Warpl])})}}var M=l[f].itemModel;if(M.length<=0){n.errorFlag=false;n.MessageList.push({type:"Error",title:n.getResourceBundle().getText("mpmiItemMand",[l[f].Warpl])})}}n.getView().getModel(n.oModelAIWMPMI).setData(l)}},onPress:function(e){var t=e.getSource().getParent().getParent().getParent().getText();var a,r,l,n,s;if(t.indexOf("FLOC")!==-1){r=this.oModelAIWFLOC;a=e.getSource().getBindingContext(r).getPath();l=e.getSource().getBindingContext(r).getProperty(a);if(this.mode==="display"){n="Approve"}else{this.handleValueState("Functionallocation","FunctionallocationVS",e,a,r);this.handleValueState("Flocdescription","FlocdescriptionVS",e,a,r);this.handleValueState("Strucindicator","StrucindicatorVS",e,a,r);this.handleValueState("Floccategory","FloccategoryVS",e,a,r);if(l.Title!==""&&l.Title!==undefined||l.TitleCode!==""&&l.TitleCode!==undefined||l.Name1!==""&&l.Name1!==undefined||l.Name2!==""&&l.Name2!==undefined||l.Name3!==""&&l.Name3!==undefined||l.Name4!==""&&l.Name4!==undefined||l.Sort1!==""&&l.Sort1!==undefined||l.Sort2!==""&&l.Sort2!==undefined||l.NameCo!==""&&l.NameCo!==undefined||l.PostCod1!==""&&l.PostCod1!==undefined||l.City1!==""&&l.City1!==undefined||l.Building!==""&&l.Building!==undefined||l.Floor!==""&&l.Floor!==undefined||l.Roomnum!==""&&l.Roomnum!==undefined||l.AddrLocation!==""&&l.AddrLocation!==undefined||l.Strsuppl1!==""&&l.Strsuppl1!==undefined||l.Strsuppl2!==""&&l.Strsuppl2!==undefined||l.Strsuppl3!==""&&l.Strsuppl3!==undefined||l.TimeZone!==""&&l.TimeZone!==undefined||l.RefPosta!==""&&l.RefPosta!==undefined||l.Region!==""&&l.Region!==undefined){this.handleValueState("RefPosta","RefPostaVS",e,a,r);if(l.RefPostaVS!=="Error"){s=this.getView().getModel(r).getProperty(a);s.RefPostaLblReq=true;s.RefPostaVS="None";this.getView().getModel(r).setProperty(a,s)}}n="CreateFloc"}this.getRouter().navTo("detailFloc",{Path:encodeURIComponent(a),ViewName:n,Floc:" ",CrStatus:" "})}if(t.indexOf("EQUI")!==-1){r=this.oModelAIWEQUI;a=e.getSource().getBindingContext(r).getPath();l=e.getSource().getBindingContext(r).getProperty(a);if(this.mode==="display"){n="Approve"}else{this.handleValueState("Equnr","EqunrVS",e,a,r);this.handleValueState("Eqktx","Eqktx\tVS",e,a,r);this.handleValueState("EquipmentCatogory","EquipmentCatogoryVS",e,a,r);if(l.Title!==""&&l.Title!==undefined||l.TitleCode!==""&&l.TitleCode!==undefined||l.Name1!==""&&l.Name1!==undefined||l.Name2!==""&&l.Name2!==undefined||l.Name3!==""&&l.Name3!==undefined||l.Name4!==""&&l.Name4!==undefined||l.Sort1!==""&&l.Sort1!==undefined||l.Sort2!==""&&l.Sort2!==undefined||l.NameCo!==""&&l.NameCo!==undefined||l.PostCod1!==""&&l.PostCod1!==undefined||l.City1!==""&&l.City1!==undefined||l.Building!==""&&l.Building!==undefined||l.Floor!==""&&l.Floor!==undefined||l.Roomnum!==""&&l.Roomnum!==undefined||l.AddrLocation!==""&&l.AddrLocation!==undefined||l.Strsuppl1!==""&&l.Strsuppl1!==undefined||l.Strsuppl2!==""&&l.Strsuppl2!==undefined||l.Strsuppl3!==""&&l.Strsuppl3!==undefined||l.TimeZone!==""&&l.TimeZone!==undefined||l.RefPosta!==""&&l.RefPosta!==undefined||l.Region!==""&&l.Region!==undefined){this.handleValueState("RefPosta","RefPostaVS",e,a,r);if(l.RefPostaVS!=="Error"){s=this.getView().getModel(r).getProperty(a);s.RefPostaLblReq=true;s.RefPostaVS="None";this.getView().getModel(r).setProperty(a,s)}}n="CreateEqui"}this.getRouter().navTo("detailEqui",{Path:encodeURIComponent(a),ViewName:n,Equi:" ",CrStatus:" "})}if(t.indexOf("MSPT")!==-1){r=this.oModelAIWMSPT;a=e.getSource().getBindingContext(this.oModelAIWMSPT).getPath();l=e.getSource().getBindingContext(r).getProperty(a);if(this.mode==="display"){n="Approve"}else{this.handleValueState("Pttxt","PttxtVS",e,a,r);this.handleValueState("ObtypMs","ObtypMsVS",e,a,r);this.handleValueState("Mptyp","MptypVS",e,a,r);var o=l.EqunrInpVis;if(o){this.handleValueState("Equnr","EqunrVS",e,a,r)}var i=l.TplnrInpVis;if(i){this.handleValueState("Tplnr","TplnrVS",e,a,r)}n="CreateMspt"}this.getRouter().navTo("detailMspt",{Path:encodeURIComponent(a),ViewName:n,Mspt:" ",CrStatus:" "})}if(t.indexOf("MPMI")!==-1){r=this.oModelAIWMPMI;a=e.getSource().getBindingContext(r).getPath();l=e.getSource().getBindingContext(r).getProperty(a);if(this.mode==="display"){n="Approve"}else{this.handleValueState("Warpl","WarplVS",e,a,r);this.handleValueState("Wptxt","WptxtVS",e,a,r);this.handleValueState("Mptyp","MptypVS",e,a,r);n="CreateMpmi"}this.getRouter().navTo("detailMpmi",{Path:encodeURIComponent(a),ViewName:n,Mplan:" ",CrStatus:" "})}},onMainTableRowSelect:function(e){var t=e.getSource().getParent().getParent().getParent().getSelectedKey();var a=this.getView().getModel("mainView");var r=a.getData();this.tableId=e.getSource().getId();if(t.indexOf("FLOCTab")!==-1){this.selectedRowsFLOC=e.getSource()._aSelectedPaths;if(this.selectedRowsFLOC.length>0){r.deleteFLOC=true}else{r.deleteFLOC=false}}if(t.indexOf("EQUITab")!==-1){this.selectedRowsEQUI=e.getSource()._aSelectedPaths;if(this.selectedRowsEQUI.length>0){r.deleteEQUI=true}else{r.deleteEQUI=false}}if(t.indexOf("MSPTTab")!==-1){this.selectedRowsMSPT=e.getSource()._aSelectedPaths;if(this.selectedRowsMSPT.length>0){r.deleteMSPT=true}else{r.deleteMSPT=false}}if(t.indexOf("MPMITab")!==-1){this.selectedRowsMPMI=e.getSource()._aSelectedPaths;if(this.selectedRowsMPMI.length>0){r.deleteMPMI=true}else{r.deleteMPMI=false}}a.setData(r)},onRemoveMainTablePress:function(e){var t=this.getFragmentModelName(e);var a=this.getView().getModel("mainView");var r=a.getData();var l=[];var n;if(t===this.oModelAIWFLOC){var s=sap.ui.getCore().getModel(this.oModelAIWFLOC);var o=s.getData();l=[];for(var i=0;i<this.selectedRowsFLOC.length;i++){l.push(parseInt(this.selectedRowsFLOC[i].split("/")[1]))}l.sort(function(e,t){return e-t});this.checkDependantObject(l,t)}if(t===this.oModelAIWEQUI){var d=sap.ui.getCore().getModel(this.oModelAIWEQUI);var c=d.getData();l=[];for(var p=0;p<this.selectedRowsEQUI.length;p++){l.push(parseInt(this.selectedRowsEQUI[p].split("/")[1]))}l.sort(function(e,t){return e-t});this.checkDependantObject(l,t)}if(t===this.oModelAIWMSPT){var u=this.getView().getModel(this.oModelAIWMSPT);var g=u.getData();l=[];for(var m=0;m<this.selectedRowsMSPT.length;m++){l.push(parseInt(this.selectedRowsMSPT[m].split("/")[1]))}l.sort(function(e,t){return e-t});this.checkDependantObject(l,t)}if(t===this.oModelAIWMPMI){var f=this.getView().getModel(this.oModelAIWMPMI);var h=f.getData();l=[];for(var S=0;S<this.selectedRowsMPMI.length;S++){l.push(parseInt(this.selectedRowsMPMI[S].split("/")[1]))}l.sort(function(e,t){return e-t});for(var T=l.length-1;T>=0;T--){n=l[T];n=parseInt(n);h.splice(n,1)}sap.ui.getCore().byId(this.tableId).removeSelections();sap.ui.getCore().byId(this.tableId).getModel(this.oModelAIWMPMI).refresh();this.getView().getModel(this.oModelAIWMPMI).refresh();f.setData(h);this.onUpdateTitleCount(t,h);this.selectedRowsMPMI=[];r.deleteMPMI=false}a.setData(r)},checkDependantObject:function(e,t){var a=this;var r=sap.ui.getCore().getModel(a.oModelAIWFLOC).getData();var n=sap.ui.getCore().getModel(a.oModelAIWEQUI).getData();var s=sap.ui.getCore().getModel(a.oModelAIWMSPT).getData();var o=sap.ui.getCore().getModel(a.oModelAIWMPMI).getData();var i=sap.ui.getCore().getModel("AIWListMatModel").getData();var d=sap.ui.getCore().getModel("AIWListEqModel").getData();var c=sap.ui.getCore().getModel("AIWListFLModel").getData();var p=sap.ui.getCore().getModel("AIWListWBSModel").getData();var u=sap.ui.getCore().getModel("AIWListONModel").getData();var g=sap.ui.getCore().getModel("AIWListWCModel").getData();var m=sap.ui.getCore().getModel("AIWListGTLModel").getData();var f=sap.ui.getCore().getModel("AIWListETLModel").getData();var h=sap.ui.getCore().getModel("AIWListFTLModel").getData();var S=sap.ui.getCore().getModel("AIWListOLModel").getData();var T={ChangeRequestType:this.getCrType(),CrDescription:this.getView().byId("Description").getValue(),Reason:this.getView().byId("reasonForRequest").getSelectedKey(),Guids:this.oAttach,Action:"MDG_REMOVE",IsDraft:"C",RemoveMsg:"",Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqDFPS:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],ClassWC:[],ValueWC:[],GTList:[],GTOprs:[],GTComp:[],GTMPack:[],GTRel:[],GTSpack:[],GTPRT:[],GTInsp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETMPack:[],ETRel:[],ETSpack:[],ETPRT:[],ETInsp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTMPack:[],FTRel:[],FTSpack:[],FTPRT:[],FTInsp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[]};if(this.oAttach.length===0||this.oAttach===undefined){delete T.Guids}if(r.length>0){for(var M=0;M<r.length;M++){var b={Tplnr:r[M].Functionallocation,Txtmi:r[M].Flocdescription,TplkzFlc:r[M].Strucindicator,Tplxt:r[M].StrucIndicatorDesc,EditMask:r[M].EditMask,Hierarchy:r[M].Hierarchy,Fltyp:r[M].Floccategory,Flttx:r[M].FlocCategoryDesc,Swerk:r[M].Maintplant,Plantname:r[M].MaintplantDesc,StorFloc:r[M].Location,Locationdesc:r[M].Locationdesc,Abckzfloc:r[M].Abckz,Abctx:r[M].Abctx,Bukrsfloc:r[M].Bukrs,Butxt:r[M].Butxt,City:r[M].City,KostFloc:r[M].Kostl,KokrFloc:r[M].Kokrs,Contareaname:r[M].Mctxt,PlntFloc:r[M].Werks,Planningplantdes:r[M].Planningplantdes,Ingrp:r[M].Ingrp,Plannergrpdesc:r[M].Innam,Arbplfloc:r[M].Arbpl,Wergwfloc:r[M].WcWerks,Gewrkfloc:r[M].MainArbpl,MainWcPlant:r[M].MainWerks,Tplma:r[M].SupFunctionallocation,Supflocdesc:r[M].SupFlocdescription,BeberFl:r[M].BeberFl,Fing:r[M].Fing,Tele:r[M].Tele,Submtiflo:r[M].ConstrType,Constdesc:r[M].ConstructionDesc,Eqart:r[M].TechnicalObjectTyp,Eartx:r[M].Description,Stattext:r[M].Stattext,StsmFloc:r[M].StsmEqui,Statproftxt:r[M].StsmEquiDesc,UstwFloc:r[M].UstwEqui,UswoFloc:r[M].UswoEqui,UstaFloc:r[M].UstaEqui,Adrnri:r[M].Adrnri,Deact:r[M].Deact,Type:r[M].viewParameter==="create"?true:false,Modeldesc:r[M].Modeldesc,Modelref:r[M].Modelref,Modelrver:r[M].Modelrver,Modelext:r[M].Modelext,Modelname:r[M].Modelname,Modelver:r[M].Modelver};T.FuncLoc.push(b);var E={Funcloc:r[M].Functionallocation,Title:r[M].TitleCode,Name1:r[M].Name1,Name2:r[M].Name2,Name3:r[M].Name3,Name4:r[M].Name4,Sort1:r[M].Sort1,Sort2:r[M].Sort2,NameCo:r[M].NameCo,PostCod1:r[M].PostCod1,City1:r[M].City1,Building:r[M].Building,Floor:r[M].Floor,Roomnum:r[M].Roomnum,Strsuppl1:r[M].Strsuppl1,Strsuppl2:r[M].Strsuppl2,Strsuppl3:r[M].Strsuppl3,Location:r[M].AddrLocation,RPostafl:r[M].RefPosta,Landx:r[M].Landx,TimeZone:r[M].TimeZone,RPostFl:r[M].Region,Regiotxt:r[M].RegionDesc};T.FLAddr.push(E);var v=r[M].intlAddr;if(v){for(var C=0;C<v.length;C++){T.FLAddrI.push(v[C])}}if(a.AltLblDerv==="2"&&r[M].altlbl){for(var x=0;x<r[M].altlbl.length;x++){var V={Funcloc:r[M].Functionallocation,AltAlkey:r[M].altlbl[x].AltAlkey,AltStrno:r[M].altlbl[x].AltStrno,AltTplkz:r[M].altlbl[x].AltTplkz};T.FLALTLBEL.push(V)}}if(r[M].Floccategory==="L"&&r[M].lam){var P={Funcloc:r[M].Functionallocation,Lrpid:r[M].lam.Lrpid,Strtptatr:r[M].lam.Strtptatr,Endptatr:r[M].lam.Endptatr,Length:r[M].lam.Length,LinUnit:r[M].lam.LinUnit,Startmrkr:r[M].lam.Startmrkr,Endmrkr:r[M].lam.Endmrkr,Mrkdisst:r[M].lam.Mrkdisst,Mrkdisend:r[M].lam.Mrkdisend,MrkrUnit:r[M].lam.MrkrUnit};T.FLLAM.push(P)}var I=r[M].classItems;if(I){if(I.length>0){for(var L=0;L<I.length;L++){var y={Funcloc:r[M].Functionallocation,Classtype:I[L].Classtype,Class:I[L].Class,Clstatus1:I[L].Clstatus1};T.FLClass.push(y)}}}var D=r[M].characteristics;if(D){if(D.length>0){for(var k=0;k<D.length;k++){var F={Funcloc:r[M].Functionallocation,Atnam:D[k].Atnam,Textbez:D[k].Textbez,Atwrt:D[k].Atwrt,Class:D[k].Class};T.FLVal.push(F)}}}}}if(n.length>0){for(var A=0;A<n.length;A++){var w={Herst:n[A].Herst,Equnr:n[A].Equnr,Txtmi:n[A].Eqktx,Swerk:n[A].Maintplant,Name1:n[A].MaintplantDesc,TplnEilo:n[A].Tplnr,Flocdescription:n[A].Pltxt,Eqtyp:n[A].EquipmentCatogory,Etytx:n[A].EquipCatgDescription,Eqart:n[A].TechnicalObjectTyp,Eartx:n[A].Description,Typbz:n[A].Typbz,SubmEeqz:n[A].ConstrType,Constdesc:n[A].ConstructionDesc,BukrEilo:n[A].Bukrs,Butxt:n[A].Butxt,HequEeqz:n[A].SuperordinateEquip,SuperordEqDes:n[A].SuperordinateEquipDesc,TidnEeqz:n[A].TechIdNum,KostEilo:n[A].Kostl,KokrEilo:n[A].Kokrs,Contareaname:n[A].Mctxt,StorEilo:n[A].Location,Locationdesc:n[A].Locationdesc,AbckEilo:n[A].Abckz,Abctx:n[A].Abctx,PplaEeqz:n[A].Werks,Planningplantdes:n[A].Planningplantdes,IngrEeqz:n[A].Ingrp,Plannergrpdesc:n[A].Innam,Serge:n[A].Serge,MapaEeqz:n[A].MapaEeqz,Stattext:n[A].Stattext,StsmEqui:n[A].StsmEqui,Statproftxt:n[A].StsmEquiDesc,UstwEqui:n[A].UstwEqui,UswoEqui:n[A].UswoEqui,UstaEqui:n[A].UstaEqui,Deact:n[A].Deact,Answt:n[A].Answt,Ansdt:a._formatDate(n[A].Ansdt),Waers:n[A].Waers,ArbpEilo:n[A].Arbpl,WorkCenterPlant:n[A].WcWerks,ArbpEeqz:n[A].MainArbpl,MainWcPlant:n[A].MainWerks,BebeEilo:n[A].BeberFl,Fing:n[A].Fing,Tele:n[A].Tele,HeqnEeqz:n[A].EquipPosition,Adrnri:n[A].Adrnri,Funcid:n[A].Funcid,Frcfit:n[A].Frcfit,Frcrmv:n[A].Frcrmv,Modelid:"",Ppeguid:n[A].Ppeguid};T.Equipment.push(w);var q={Equi:n[A].Equnr,PlanvPrt:n[A].PlanvPrt,SteufPrt:n[A].SteufPrt,KtschPrt:n[A].KtschPrt,Ewformprt:n[A].Ewformprt,SteufRef:n[A].SteufRef,KtschRef:n[A].KtschRef,EwformRef:n[A].EwformRef};T.EqPRT.push(q);if(n[A].EquipmentCatogory==="L"&&n[A].lam){var W={Equi:n[A].Equnr,Lrpid:n[A].lam.Lrpid,Strtptatr:n[A].lam.Strtptatr,Endptatr:n[A].lam.Endptatr,Length:n[A].lam.Length,LinUnit:n[A].lam.LinUnit,Startmrkr:n[A].lam.Startmrkr,Endmrkr:n[A].lam.Endmrkr,Mrkdisst:n[A].lam.Mrkdisst,Mrkdisend:n[A].lam.Mrkdisend,MrkrUnit:n[A].lam.MrkrUnit};T.EqLAM.push(W)}var B={Equi:n[A].Equnr,Title:n[A].TitleCode,Name1:n[A].Name1,Name2:n[A].Name2,Name3:n[A].Name3,Name4:n[A].Name4,Sort1:n[A].Sort1,Sort2:n[A].Sort2,NameCo:n[A].NameCo,PostCod1:n[A].PostCod1,City1:n[A].City1,Building:n[A].Building,Floor:n[A].Floor,Roomnum:n[A].Roomnum,Strsuppl1:n[A].Strsuppl1,Strsuppl2:n[A].Strsuppl2,Strsuppl3:n[A].Strsuppl3,Location:n[A].AddrLocation,RefPosta:n[A].RefPosta,Landx:n[A].Landx,TimeZone:n[A].TimeZone,RfePost:n[A].Region,Regiotxt:n[A].RegionDesc};T.EqAddr.push(B);var N=n[A].intlAddr;if(N){for(var C=0;C<N.length;C++){T.EqAddrI.push(N[C])}}if(n[A].dfps){var O={Equi:n[A].Equnr,DeviceId:n[A].dfps.Tailno,Topsiteid:n[A].dfps.Area,Topsitede:n[A].dfps.AreaDesc,AreaPro:n[A].dfps.AreaPrfl,SiteId:n[A].dfps.Site,SiteDesc:n[A].dfps.SiteDesc,SitePro:n[A].dfps.SitePrfl,MpoId:n[A].dfps.MPO,MpoDescr:n[A].dfps.MPODesc,RicId:n[A].dfps.RIC,RicDescr:n[A].dfps.RICDesc,ModelId:n[A].dfps.ModelId,ModelDes:n[A].dfps.ModelIdDesc,Foreignob:l.truetoX(n[A].dfps.ForeignEq),TecState:n[A].dfps.TechSts,DepState:n[A].dfps.OperSts,DfpsRmrk:n[A].dfps.Remark};T.EqDFPS.push(O)}var R=n[A].classItems;if(R){if(R.length>0){for(var U=0;U<R.length;U++){var z={Equi:n[A].Equnr,Classtype:R[U].Classtype,Class:R[U].Class,Clstatus1:R[U].Clstatus1};T.EqClass.push(z)}}}var K=n[A].characteristics;if(K){if(K.length>0){for(var H=0;H<K.length;H++){var G={Equi:n[A].Equnr,Atnam:K[H].Atnam,Textbez:K[H].Textbez,Atwrt:K[H].Atwrt,Class:K[H].Class};T.EqVal.push(G)}}}var j=sap.ui.getCore().getModel("ainMOP").getData();for(var C=0;C<j.length;C++){if(w.Equnr===j[C].key){w.Modelid=j[C].AIN.Modelid}}}}if(s.length>0){for(var Q=0;Q<s.length;Q++){var _={Point:s[Q].Mspoint,Equnr:s[Q].Equnr,Eqktx:s[Q].Eqktx,Tplnr:s[Q].Tplnr,Floctxt:s[Q].Pltxt,Mptyp:s[Q].Mptyp,Mpttx:s[Q].Mpttx,Codgr:s[Q].Codgr,Codgrtxt:s[Q].Codgrtxt,ObtypMs:s[Q].ObtypMs,Objtypetxt:s[Q].Txt,AtnamMs:s[Q].AtnamMs,Atbez:s[Q].Atbez,Indct:s[Q].Indct,Cdsuf:s[Q].Cdsuf,Cjumc:s[Q].Cjumc,Desir:s[Q].Desir,Pyeac:s[Q].Pyeac,Mrmin:s[Q].Mrmin,Mrmax:s[Q].Mrmax,Pttxt:s[Q].Pttxt,Psort:s[Q].Psort,Inact:s[Q].Inact,Mseh6:s[Q].Mseh6,Msehl:s[Q].Msehl,Decim:s[Q].Decim.toString(),Locas:s[Q].Locas,Maktx:s[Q].Maktx,Begru:s[Q].Begru,Begtx:s[Q].Begtx,Expon:s[Q].Expon,Mrngu:s[Q].Mrngu,Dstxt:s[Q].Dstxt,Indrv:s[Q].Indrv,Indtr:s[Q].readTransfSel,Trans:s[Q].readTransf};T.MSPoint.push(_);if(s[Q].Mptyp==="L"&&s[Q].lam){var J={Mspoint:s[Q].Mspoint,Lrpid:s[Q].lam.Lrpid,Strtptatr:s[Q].lam.Strtptatr,Endptatr:s[Q].lam.Endptatr,Length:s[Q].lam.Length,LinUnit:s[Q].lam.LinUnit,Startmrkr:s[Q].lam.Startmrkr,Endmrkr:s[Q].lam.Endmrkr,Mrkdisst:s[Q].lam.Mrkdisst,Mrkdisend:s[Q].lam.Mrkdisend,MrkrUnit:s[Q].lam.MrkrUnit};T.MSLAM.push(J)}var Z=s[Q].classItems;if(Z){if(Z.length>0){for(var X=0;X<Z.length;X++){var Y={Mspoint:s[Q].Mspoint,Classtype:Z[X].Classtype,Class:Z[X].Class,Clstatus1:Z[X].Clstatus1};T.MSClass.push(Y)}}}var ee=s[Q].characteristics;if(ee){if(ee.length>0){for(var te=0;te<ee.length;te++){var ae={Mspoint:s[Q].Mspoint,Atnam:ee[te].Atnam,Textbez:ee[te].Textbez,Atwrt:ee[te].Atwrt,Class:ee[te].Class};T.MSVal.push(ae)}}}}}if(o.length>0){for(var re=0;re<o.length;re++){var le={Warpl:o[re].Warpl,Abrho:o[re].Abrho,Hunit:o[re].Hunit,Mptyp:o[re].Mptyp,Wptxt:o[re].Wptxt,Stich:o[re].Stich.toString(),Fabkl:o[re].Fabkl,FabklDesc:o[re].FabklDesc,Sfakt:o[re].Sfakt,Andor:a.parseValue(o[re].Andor),Mehrfach:a.parseValue(o[re].Mehrfach),Strat:o[re].Strat,StratDesc:o[re].StratDesc,Wset:o[re].Wset,Startdate:a._formatDate(o[re].Stadt),Unitc:o[re].Unitc,Szaeh:o[re].Szaeh,PointStp:o[re].Mpcycleno,Vspos:o[re].Vspos,Topos:o[re].Topos,Vsneg:o[re].Vsneg,Toneg:o[re].Toneg,Horiz:o[re].Horiz,CallConf:o[re].CallConf,PlanSort:o[re].PlanSort,Begru:o[re].Begru,InactMp:o[re].Deact};T.MPLAN.push(le);var ne=o[re].itemModel;if(ne){for(var se=0;se<ne.length;se++){var oe={Mplan:o[re].Warpl,Qmart:ne[se].Qmart,Qmartx:ne[se].nTypeTxt,PlntMi:ne[se].Werks,Planningplantdes:ne[se].Planningplantdes,IngrpMi:ne[se].Ingrp,Plannergrpdesc:ne[se].Innam,Pstxt:ne[se].Pstxt,WergwMi:ne[se].WergwMi,ArbpMi:ne[se].ArbpMi,Auart:ne[se].Auart,Ordertypedesc:ne[se].oTypeTxt,Bautl:ne[se].AsmblyOb,Cycleseq:ne[se].Cycleseq,Equnr:ne[se].Equnr,Equipdesc:ne[se].Eqktx,TplnrMi:ne[se].Tplnr,Flocdesc:ne[se].Pltxt,Mitemnumb:ne[se].Mitemnumb,PlnnrMi:ne[se].PlnnrMi,PlntyMi:ne[se].PlntyMi,PlnalMi:ne[se].PlnalMi,SwerkMil:ne[se].SwerkMil,StortMil:ne[se].StortMil,MsgrpIl:ne[se].MsgrpIl,BeberMil:ne[se].BeberMil,Fing:ne[se].Fing,ArbplIl:ne[se].ArbplIl,AbckzIl:ne[se].AbckzIl,EqfnrIl:ne[se].EqfnrIl,BukrsMil:ne[se].BukrsMil,Butxt:ne[se].Butxt,City:ne[se].City,Anln1Mil:ne[se].Anln1Mil,Anln2Mil:ne[se].Anln2Mil,GsberIl:ne[se].GsberIl,KostlMil:ne[se].KostlMil,KokrsMil:ne[se].KokrsMil,Posid:ne[se].Posid,AufnrIl:ne[se].AufnrIl};T.MPItem.push(oe);if(ne[se].lam){var J={Mplan:o[re].Warpl,Mitemnumb:ne[se].lam.Mitemnumb,Lrpid:ne[se].lam.Lrpid,Strtptatr:ne[se].lam.Strtptatr,Endptatr:ne[se].lam.Endptatr,Length:ne[se].lam.Length,LinUnit:ne[se].lam.LinUnit,Startmrkr:ne[se].lam.Startmrkr,Endmrkr:ne[se].lam.Endmrkr,Mrkdisst:ne[se].lam.Mrkdisst,Mrkdisend:ne[se].lam.Mrkdisend,MrkrUnit:ne[se].lam.MrkrUnit};T.MPLAM.push(J)}}}var ie=o[re].cycleModel;if(ie){for(var de=0;de<ie.length;de++){var ce={Mplan:o[re].Warpl,Point:ie[de].Point,PointTxt:ie[de].Psort,Offset:ie[de].Offset,Ofsetunit:ie[de].Ofsetunit,PakText:ie[de].PakText,Zeieh:ie[de].Zeieh,Zykl1:ie[de].Zykl1,Cycleseqi:ie[de].Cycleseqi,Mpcycleno:ie[de].Mpcycleno};T.MPCycle.push(ce)}}var pe=o[re].ObjListItems;if(pe){for(var C=0;C<pe.length;C++){var ue={AsmblyOb:pe[C].AsmblyOb,EquiObj:pe[C].EquiObj,FlocObj:pe[C].FlocObj,MatnrObj:pe[C].MatnrObj,Mitemnumb:pe[C].Mitemnumb,Mplan:pe[C].Warpl};T.MPOBList.push(ue)}}var Z=o[re].classItems;if(Z){if(Z.length>0){for(var X=0;X<Z.length;X++){var Y={Mplan:o[re].Warpl,Classtype:Z[X].Classtype,Class:Z[X].Class,Clstatus1:Z[X].Clstatus1};T.ClassMpl.push(Y)}}}var ee=o[re].characteristics;if(ee){if(ee.length>0){for(var te=0;te<ee.length;te++){var ae={Mplan:o[re].Warpl,Atnam:ee[te].Atnam,Textbez:ee[te].Textbez,Atwrt:ee[te].Atwrt,Class:ee[te].Class};T.ValuaMpl.push(ae)}}}}}if(i.length>0){for(var te=0;te<i.length;te++){var ge={Matnr:i[te].Matnr,Stalt:i[te].Stalt,Stlan:i[te].Stlan,Werks:i[te].Werks,Pmbomtech:i[te].Pmbomtech?i[te].Pmbomtech:"",PmbomtechTxt:i[te].PmbomtechTxt?i[te].PmbomtechTxt:"",Bomstatus:i[te].Bomstatus,Lngtxt:i[te].Lngtxt,Txtmi:i[te].Lngtxt,Validfrom:this._formatDate(i[te].Validfrom),Baseqty:i[te].BaseQty,Baseuom:i[te].BaseUom,Validtoda:this._formatDate(i[te].Validtoda)};T.MRBHeader.push(ge);if(i[te].matItem){for(var Q=0;Q<i[te].matItem.length;Q++){var me={Matnr:i[te].Matnr,Stlan:i[te].Stlan,Werks:i[te].Werks,Bomitmpos:i[te].matItem[Q].Bomitmpos,Itemcat:i[te].matItem[Q].Itemcat,Itemcomp:i[te].matItem[Q].Itemcomp,Compdesc:"",Itmqty:i[te].matItem[Q].Itmqty,Itmuom:i[te].matItem[Q].Itmuom,Recurallo:i[te].matItem[Q].Recurallo,Erskz:i[te].matItem[Q].Erskz,Rvrel:i[te].matItem[Q].Rvrel==="0"?"":i[te].matItem[Q].Rvrel,Sanfe:i[te].matItem[Q].Sanfe,Sanin:i[te].matItem[Q].Sanin,Sanko:i[te].matItem[Q].Sanko,Itmcmpdesc:i[te].matItem[Q].Itmcmpdesc,Costgrelv:i[te].matItem[Q].Costgrelv==="0"?"":i[te].matItem[Q].Costgrelv};if(i[te].bomType==="Change"){me.Bomitmnod=i[te].matItem[Q].Bomitmnod}if(i[te].matItem[Q].Itemcat==="N"){me.Ekorg=i[te].matItem[Q].Ekorg;me.Ekotx=i[te].matItem[Q].Ekotx;me.Ekgrp=i[te].matItem[Q].Ekgrp;me.Eknam=i[te].matItem[Q].Eknam;me.Preis=i[te].matItem[Q].Preis;me.Waers=i[te].matItem[Q].Waers;me.Peinh=i[te].matItem[Q].Peinh;me.Matkl=i[te].matItem[Q].Matkl;me.Wgbez=i[te].matItem[Q].Wgbez;me.Potx1=i[te].matItem[Q].Potx1}else if(i[te].matItem[Q].Itemcat==="D"){me.Bomdocitm=i[te].matItem[Q].Bomdocitm;me.Bomitmdkr=i[te].matItem[Q].Bomitmdkr;me.BomitmdkrTxt=i[te].matItem[Q].BomitmdkrTxt;me.Bomitmdtl=i[te].matItem[Q].Bomitmdtl;me.Bomitmdvr=i[te].matItem[Q].Bomitmdvr}else if(i[te].matItem[Q].Itemcat==="R"){me.Roms1=i[te].matItem[Q].Roms1;me.Romei=i[te].matItem[Q].Romei;me.Roms2=i[te].matItem[Q].Roms2;me.Roms3=i[te].matItem[Q].Roms3;me.Rform=i[te].matItem[Q].Rform;me.Roanz=i[te].matItem[Q].Roanz;me.Romen=i[te].matItem[Q].Romen;me.Rokme=i[te].matItem[Q].Rokme}else if(i[te].matItem[Q].Itemcat==="T"){me.Potx1=i[te].matItem[Q].Potx1}T.MRBItem.push(me)}}if(i[te].matSubItem){for(var re=0;re<i[te].matSubItem.length;re++){var fe={Matnr:i[te].Matnr,Stlan:i[te].Stlan,Werks:i[te].Werks,Posnr:i[te].matSubItem[re].Posnr,Bomitmnod:i[te].matSubItem[re].Bomitmnod,Bomsubno:i[te].matSubItem[re].Bomsubno,Ebort:i[te].matSubItem[re].Ebort,Upmng:i[te].matSubItem[re].Upmng,Uptxt:i[te].matSubItem[re].Uptxt};T.MRBSBIT.push(fe)}}}}if(d.length>0){for(var te=0;te<d.length;te++){var he={Eqnrbom:d[te].Eqnrbom,Stlan:d[te].Stlan,Werks:d[te].Werks,Bomstatus:d[te].Bomstatus,Lngtxt:d[te].Lngtxt,Txtmi:d[te].Lngtxt,Validfrom:this._formatDate(d[te].Validfrom),Baseqty:d[te].BaseQty,Baseuom:d[te].BaseUom,Validtoda:this._formatDate(d[te].Validtoda)};T.EBHeader.push(he);if(d[te].eqItem){for(var Q=0;Q<d[te].eqItem.length;Q++){var Se={Eqnrbom:d[te].Eqnrbom,Stlan:d[te].Stlan,Werks:d[te].Werks,Bomitmpos:d[te].eqItem[Q].Bomitmpos,Itemcat:d[te].eqItem[Q].Itemcat,Itemcomp:d[te].eqItem[Q].Itemcomp,Compdesc:"",Itmqty:d[te].eqItem[Q].Itmqty,Itmuom:d[te].eqItem[Q].Itmuom,Recurallo:d[te].eqItem[Q].Recurallo,Erskz:d[te].eqItem[Q].Erskz,Rvrel:d[te].eqItem[Q].Rvrel==="0"?"":d[te].eqItem[Q].Rvrel,Sanfe:d[te].eqItem[Q].Sanfe,Sanin:d[te].eqItem[Q].Sanin,Sanko:d[te].eqItem[Q].Sanko,Itmcmpdesc:d[te].eqItem[Q].Itmcmpdesc,Costgrelv:d[te].eqItem[Q].Costgrelv==="0"?"":d[te].eqItem[Q].Costgrelv};if(d[te].bomType==="Change"){Se.Bomitmnod=d[te].eqItem[Q].Bomitmnod}if(d[te].eqItem[Q].Itemcat==="N"){Se.Ekorg=d[te].eqItem[Q].Ekorg;Se.Ekotx=d[te].eqItem[Q].Ekotx;Se.Ekgrp=d[te].eqItem[Q].Ekgrp;Se.Eknam=d[te].eqItem[Q].Eknam;Se.Preis=d[te].eqItem[Q].Preis;Se.Waers=d[te].eqItem[Q].Waers;Se.Peinh=d[te].eqItem[Q].Peinh;Se.Matkl=d[te].eqItem[Q].Matkl;Se.Wgbez=d[te].eqItem[Q].Wgbez;Se.Potx1=d[te].eqItem[Q].Potx1}else if(d[te].eqItem[Q].Itemcat==="D"){Se.Bomdocitm=d[te].eqItem[Q].Bomdocitm;Se.Bomitmdkr=d[te].eqItem[Q].Bomitmdkr;Se.BomitmdkrTxt=d[te].eqItem[Q].BomitmdkrTxt;Se.Bomitmdtl=d[te].eqItem[Q].Bomitmdtl;Se.Bomitmdvr=d[te].eqItem[Q].Bomitmdvr}else if(d[te].eqItem[Q].Itemcat==="R"){Se.Roms1=d[te].eqItem[Q].Roms1;Se.Romei=d[te].eqItem[Q].Romei;Se.Roms2=d[te].eqItem[Q].Roms2;Se.Roms3=d[te].eqItem[Q].Roms3;Se.Rform=d[te].eqItem[Q].Rform;Se.Roanz=d[te].eqItem[Q].Roanz;Se.Romen=d[te].eqItem[Q].Romen;Se.Rokme=d[te].eqItem[Q].Rokme}else if(d[te].eqItem[Q].Itemcat==="T"){Se.Potx1=d[te].eqItem[Q].Potx1}T.EBItem.push(Se)}}if(d[te].eqSubItem){for(var re=0;re<d[te].eqSubItem.length;re++){var Te={Eqnrbom:d[te].Eqnrbom,Stlan:d[te].Stlan,Werks:d[te].Werks,Posnr:d[te].eqSubItem[re].Posnr,Bomitmnod:d[te].eqSubItem[re].Bomitmnod,Bomsubno:d[te].eqSubItem[re].Bomsubno,Ebort:d[te].eqSubItem[re].Ebort,Upmng:d[te].eqSubItem[re].Upmng,Uptxt:d[te].eqSubItem[re].Uptxt};T.EBSBIT.push(Te)}}}}if(c.length>0){for(var te=0;te<c.length;te++){var Me={Tplnrbom:c[te].Tplnrbom,Stlan:c[te].Stlan,Werks:c[te].Werks,Bomstatus:c[te].Bomstatus,Lngtxt:c[te].Lngtxt,Txtmi:c[te].Lngtxt,Validfrom:this._formatDate(c[te].Validfrom),Baseqty:c[te].BaseQty,Baseuom:c[te].BaseUom,Validtoda:this._formatDate(c[te].Validtoda)};T.FBHeader.push(Me);if(c[te].flItem){for(var Q=0;Q<c[te].flItem.length;Q++){var be={Tplnrbom:c[te].Tplnrbom,Stlan:c[te].Stlan,Werks:c[te].Werks,Bomitmpos:c[te].flItem[Q].Bomitmpos,Itemcat:c[te].flItem[Q].Itemcat,Itemcomp:c[te].flItem[Q].Itemcomp,Compdesc:"",Itmqty:c[te].flItem[Q].Itmqty,Itmuom:c[te].flItem[Q].Itmuom,Recurallo:c[te].flItem[Q].Recurallo,Erskz:c[te].flItem[Q].Erskz,Rvrel:c[te].flItem[Q].Rvrel==="0"?"":c[te].flItem[Q].Rvrel,Sanfe:c[te].flItem[Q].Sanfe,Sanin:c[te].flItem[Q].Sanin,Sanko:c[te].flItem[Q].Sanko,Itmcmpdesc:c[te].flItem[Q].Itmcmpdesc,Costgrelv:c[te].flItem[Q].Costgrelv==="0"?"":c[te].flItem[Q].Costgrelv};if(c[te].bomType==="Change"){be.Bomitmnod=c[te].flItem[Q].Bomitmnod}if(c[te].flItem[Q].Itemcat==="N"){be.Ekorg=c[te].flItem[Q].Ekorg;be.Ekotx=c[te].flItem[Q].Ekotx;be.Ekgrp=c[te].flItem[Q].Ekgrp;be.Eknam=c[te].flItem[Q].Eknam;be.Preis=c[te].flItem[Q].Preis;be.Waers=c[te].flItem[Q].Waers;be.Peinh=c[te].flItem[Q].Peinh;be.Matkl=c[te].flItem[Q].Matkl;be.Wgbez=c[te].flItem[Q].Wgbez;be.Potx1=c[te].flItem[Q].Potx1}else if(c[te].flItem[Q].Itemcat==="D"){be.Bomdocitm=c[te].flItem[Q].Bomdocitm;be.Bomitmdkr=c[te].flItem[Q].Bomitmdkr;be.BomitmdkrTxt=c[te].flItem[Q].BomitmdkrTxt;be.Bomitmdtl=c[te].flItem[Q].Bomitmdtl;be.Bomitmdvr=c[te].flItem[Q].Bomitmdvr}else if(c[te].flItem[Q].Itemcat==="R"){be.Roms1=c[te].flItem[Q].Roms1;be.Romei=c[te].flItem[Q].Romei;be.Roms2=c[te].flItem[Q].Roms2;be.Roms3=c[te].flItem[Q].Roms3;be.Rform=c[te].flItem[Q].Rform;be.Roanz=c[te].flItem[Q].Roanz;be.Romen=c[te].flItem[Q].Romen;be.Rokme=c[te].flItem[Q].Rokme}else if(c[te].flItem[Q].Itemcat==="T"){be.Potx1=c[te].flItem[Q].Potx1}T.FBItem.push(be)}}if(c[te].flSubItem){for(var re=0;re<c[te].flSubItem.length;re++){var Ee={Tplnrbom:c[te].Tplnrbom,Stlan:c[te].Stlan,Werks:c[te].Werks,Posnr:c[te].flSubItem[re].Posnr,Bomitmnod:c[te].flSubItem[re].Bomitmnod,Bomsubno:c[te].flSubItem[re].Bomsubno,Ebort:c[te].flSubItem[re].Ebort,Upmng:c[te].flSubItem[re].Upmng,Uptxt:c[te].flSubItem[re].Uptxt};T.FBSBIT.push(Ee)}}}}if(p.length>0){for(var te=0;te<p.length;te++){var ve={WbsExt:p[te].WbsExt,MatnrWbs:p[te].Matnr,Stlan:p[te].Stlan,Werks:p[te].Werks,Bomstatus:p[te].Bomstatus,Lngtxt:p[te].Lngtxt,Txtmi:p[te].Lngtxt,Validfrom:this._formatDate(p[te].Validfrom),Baseqty:p[te].BaseQty,Baseuom:p[te].BaseUom,Validtoda:this._formatDate(p[te].Validtoda)};T.WBHeader.push(ve);if(p[te].wbsItem){for(var Q=0;Q<p[te].wbsItem.length;Q++){var Ce={WbsExt:p[te].WbsExt,MatnrWbs:p[te].Matnr,Stlan:p[te].Stlan,Werks:p[te].Werks,Bomitmpos:p[te].wbsItem[Q].Bomitmpos,Itemcat:p[te].wbsItem[Q].Itemcat,Itemcomp:p[te].wbsItem[Q].Itemcomp,Compdesc:"",Itmqty:p[te].wbsItem[Q].Itmqty,Itmuom:p[te].wbsItem[Q].Itmuom,Recurallo:p[te].wbsItem[Q].Recurallo,Erskz:p[te].wbsItem[Q].Erskz,Rvrel:p[te].wbsItem[Q].Rvrel==="0"?"":p[te].wbsItem[Q].Rvrel,Sanfe:p[te].wbsItem[Q].Sanfe,Sanin:p[te].wbsItem[Q].Sanin,Sanko:p[te].wbsItem[Q].Sanko,Itmcmpdesc:p[te].wbsItem[Q].Itmcmpdesc,Costgrelv:p[te].wbsItem[Q].Costgrelv==="0"?"":p[te].wbsItem[Q].Costgrelv};if(p[te].bomType==="Change"){Ce.Bomitmnod=p[te].wbsItem[Q].Bomitmnod}if(p[te].wbsItem[Q].Itemcat==="N"){Ce.Ekorg=p[te].wbsItem[Q].Ekorg;Ce.Ekotx=p[te].wbsItem[Q].Ekotx;Ce.Ekgrp=p[te].wbsItem[Q].Ekgrp;Ce.Eknam=p[te].wbsItem[Q].Eknam;Ce.Preis=p[te].wbsItem[Q].Preis;Ce.Waers=p[te].wbsItem[Q].Waers;Ce.Peinh=p[te].wbsItem[Q].Peinh;Ce.Matkl=p[te].wbsItem[Q].Matkl;Ce.Wgbez=p[te].wbsItem[Q].Wgbez;Ce.Potx1=p[te].wbsItem[Q].Potx1}else if(p[te].wbsItem[Q].Itemcat==="D"){Ce.Bomdocitm=p[te].wbsItem[Q].Bomdocitm;Ce.Bomitmdkr=p[te].wbsItem[Q].Bomitmdkr;Ce.BomitmdkrTxt=p[te].wbsItem[Q].BomitmdkrTxt;Ce.Bomitmdtl=p[te].wbsItem[Q].Bomitmdtl;Ce.Bomitmdvr=p[te].wbsItem[Q].Bomitmdvr}else if(p[te].wbsItem[Q].Itemcat==="R"){Ce.Roms1=p[te].wbsItem[Q].Roms1;Ce.Romei=p[te].wbsItem[Q].Romei;Ce.Roms2=p[te].wbsItem[Q].Roms2;Ce.Roms3=p[te].wbsItem[Q].Roms3;Ce.Rform=p[te].wbsItem[Q].Rform;Ce.Roanz=p[te].wbsItem[Q].Roanz;Ce.Romen=p[te].wbsItem[Q].Romen;Ce.Rokme=p[te].wbsItem[Q].Rokme}else if(p[te].wbsItem[Q].Itemcat==="T"){Ce.Potx1=p[te].wbsItem[Q].Potx1}T.WBItem.push(Ce)}}if(p[te].wbsSubItem){for(var re=0;re<p[te].wbsSubItem.length;re++){var xe={WbsExt:p[te].WbsExt,MatnrWbs:p[te].Matnr,Stlan:p[te].Stlan,Werks:p[te].Werks,Posnr:p[te].wbsSubItem[re].Posnr,Bomitmnod:p[te].wbsSubItem[re].Bomitmnod,Bomsubno:p[te].wbsSubItem[re].Bomsubno,Ebort:p[te].wbsSubItem[re].Ebort,Upmng:p[te].wbsSubItem[re].Upmng,Uptxt:p[te].wbsSubItem[re].Uptxt};T.WBSBIT.push(xe)}}}}if(u.length>0){for(var te=0;te<u.length;te++){var Ve={Objnetwrk:u[te].Objnetwrk,Netgrp:u[te].Netgrp,Netwtyp:u[te].Netwtyp,Netxt:u[te].Netxt,Ntobjtyp:u[te].Ntobjtyp};T.ONetwork.push(Ve);if(u[te].lam){var Pe={Objnetwrk:u[te].Objnetwrk,Lrpid:u[te].lam.Lrpid,Strtptatr:u[te].lam.Strtptatr,Endptatr:u[te].lam.Endptatr,Length:u[te].lam.Length,LinUnit:u[te].lam.LinUnit,Startmrkr:u[te].lam.Startmrkr,Endmrkr:u[te].lam.Endmrkr,Mrkdisst:u[te].lam.Mrkdisst,Mrkdisend:u[te].lam.Mrkdisend,MrkrUnit:u[te].lam.MrkrUnit};T.ONLAM.push(Pe)}}}if(g.length>0){for(var te=0;te<g.length;te++){var ge={Werks:g[te].plant,Arbpl:g[te].wc,Txtmi:g[te].wcDesc,Verwe:g[te].wcCat,Crveran:g[te].person,Planv:g[te].usg,Vgwts:g[te].stdVal,Crsteus:g[te].ctrlKey};if(g[te].hasOwnProperty("Type")){if(g[te].Type==="X"){ge.Type="X"}}T.Workcenter.push(ge);if(g[te].cost){for(var Q=0;Q<g[te].cost.length;Q++){var Ie={Werks:g[te].cost[Q].CrKokrs,Arbpl:g[te].wc,CrKostl:g[te].cost[Q].CrKostl,Costcentxt:g[te].cost[Q].Costcentxt,CrLstar:g[te].cost[Q].CrLstar,Forn1:g[te].cost[Q].Forn1,ActvttypeTxt:g[te].cost[Q].ActvttypeTxt,Frmltxt:g[te].cost[Q].Frmltxt};T.WCCost.push(Ie)}}var Le=g[te].classItems;if(Le){if(Le.length>0){for(var U=0;U<Le.length;U++){var ye={Arbpl:g[te].wc,Werks:g[te].plant,Classtype:Le[U].Classtype,Class:Le[U].Class};T.ClassWC.push(ye)}}}var De=g[te].characteristics;if(De){if(De.length>0){for(var H=0;H<De.length;H++){var ke={Arbpl:g[te].wc,Werks:g[te].plant,Atnam:De[H].Atnam,Textbez:De[H].Textbez,Atwrt:De[H].Atwrt,Class:De[H].Class};T.ValueWC.push(ke)}}}}}if(m.length>0){for(var te=0;te<m.length;te++){if(m[te].header){for(var Q=0;Q<m[te].header.length;Q++){if(m[te].header[Q].Iwerk!==""){m[te].header[Q].Werks=m[te].header[Q].Iwerk}var Fe={Werks:m[te].header[Q].Werks,Wcplant:m[te].header[Q].plant,Statu:m[te].header[Q].Statu,Tverwe:m[te].header[Q].tlusg,Ktext:m[te].header[Q].Ktext,Tarbpl:m[te].header[Q].wc,Vagrp:m[te].header[Q].Vagrp,Anlzu:m[te].header[Q].Anlzu,Tplnal:m[te].header[Q].Plnal.toString(),Tlgnhdr:m[te].grp,Strat:m[te].header[Q].Strat,Datuv:this._formatDate(m[te].validFrm)};T.GTList.push(Fe)}}if(m[te].operation){for(var re=0;re<m[te].operation.length;re++){var Ae={Tlgnhdr:m[te].grp,Vornr:m[te].operation[re].Vornr,TlArbpl:m[te].operation[re].Arbpl,Werks2gop:m[te].operation[re].Werks,Steus2gop:m[te].operation[re].Steus,Ltxa1:m[te].operation[re].Ltxa1,Arbei:m[te].operation[re].Arbei,Dauno:m[te].operation[re].Dauno,Arbeh:m[te].operation[re].Arbeh,Anzzl:m[te].operation[re].Anzzl,Daune:m[te].operation[re].Daune,Indet:m[te].operation[re].Indet,Tplnal:m[te].operation[re].Plnal.toString(),Uvorn:m[te].operation[re].Uvorn,Larnt2gop:m[te].operation[re].Larnt,Prznt:m[te].operation[re].workPerc===""?0:parseFloat(m[te].operation[re].workPerc),Bmvrg:m[te].operation[re].orderQty,Bmeih:m[te].operation[re].ordQtyUnit,Opreis:m[te].operation[re].netPrice===""?"0.000":parseFloat(m[te].operation[re].netPrice).toFixed(3).toString(),Owaers:m[te].operation[re].currency,Opeinh:m[te].operation[re].priceUnit===""?"0.000":parseFloat(m[te].operation[re].priceUnit).toFixed(3).toString(),Sakto2gop:m[te].operation[re].costElement,Omatkl:m[te].operation[re].materialGrp,Oekgrp:m[te].operation[re].puchGroup,Ekorg:m[te].operation[re].purchOrg,EqunrGop:m[te].operation[re].equi,TplnrGop:m[te].operation[re].floc};T.GTOprs.push(Ae);for(var C=0;C<m[te].operation[re].OprRel.length;C++){var we=m[te].operation[re].OprRel[C];var qe={Tlgnhdr:m[te].grp,Tplnal:we.Plnal.toString(),Vorn2:we.Vornr,Vornrgrel:we.OperationOR,Dauer:we.Offset,Zeinh:we.OUn,Aobar:we.RelType,Gprznt:we.PO,Provg:we.OI,Gkalid:we.ID,Arbplgrel:we.WrkCtrOR,Werksgrel:we.PlantOR};T.GTRel.push(qe)}for(var C=0;C<m[te].operation[re].SrvPckgOvrw.length;C++){var we=m[te].operation[re].SrvPckgOvrw[C];var We={Tlgnhdr:m[te].grp,Tplnal:we.Plnal.toString(),Vornrr:we.Vornr,SrvLine:we.LineNum,Del:l.truetoX(we.DelIndSP),Srvpos:we.ActNum,Ktext1:we.ShrtTxt,Mengegspk:we.Qty,Meinsgspk:we.BUomSP,Tbtwr:we.GrossPrc,Waersgspk:we.CurKey,IntWork:we.Work,Iwein:we.UnitOfWork};T.GTSpack.push(We)}for(var C=0;C<m[te].operation[re].PRT.length;C++){var we=m[te].operation[re].PRT[C];var Be={Tlgnhdr:m[te].grp,Tplnal:we.Plnal.toString(),Vornrgprt:we.Vornr,Psnfh:we.ItmNum,Fhmar:we.ItmCat,Matnrgprt:we.Mat,EqunrGpt:we.Equi,Eqpnt:we.Mspt,Doknrgprt:we.doc,Dokargprt:we.docType,Doktlgprt:we.docPart,Dokvrgprt:we.docVersion,Fhmnr:we.Othr,Fhwrk:we.Plant,Mgvgw:we.Qty,Mgeinh:we.UOM,Mgform:we.QtyFrmla,Steuf:we.PRTCtrl,Stftxt:we.PRTCtrlDesc,Ewvgw:we.StdUsgVal,Eweinh:we.StdUsgUOM,Ewform:we.UsgValFrmla};T.GTPRT.push(Be)}for(var C=0;C<m[te].operation[re].InspChar.length;C++){var we=m[te].operation[re].InspChar[C];var Ne={Tlgnhdr:m[te].grp,Tplnal:we.Plnal.toString(),Vornrgins:we.Vornr,Merknr:we.InspChar,Vste2gins:we.PrstInd,Quantitat:l.truetoX(we.QuanChar),QpmkRef:l.truetoX(we.QualChar),Verw2gins:we.MastInspChar,Uzae2tlgn:we.Plant,Mkv2tlgni:we.Version,Kurztext:we.ShrtTxt,Pmth2gins:we.InspMthd,Qwe2tlgni:we.InspMthdPlnt,Toleranzs:we.TolKey,Ver2tlgni:we.VrsnInspMthd,Stichprve:we.SampProc,Probemgeh:we.SampUOM,Pruefeinh:we.BaseSampQty===""?"0.00":parseFloat(we.BaseSampQty).toFixed(2),Auswmenge:we.CodeGrp};T.GTInsp.push(Ne)}}}if(m[te].MaintPckg&&m[te].MaintPckg.length>0){for(var C=0;C<m[te].MaintPckg.length;C++){if(m[te].MaintPckg[C].MPArr&&m[te].MaintPckg[C].MPArr.length>0){for(var x=0;x<m[te].MaintPckg[C].MPArr.length;x++){var Oe=m[te].MaintPckg[C].MPArr[x];var Re={Ktex1:Oe.Ktex1,Ktxhi:Oe.Ktxhi,Kzyk1:Oe.Kzyk1,Paketgmpk:Oe.Paket,Startgmpk:Oe.Strat,Tlgnhdr:m[te].grp,Tplnal:Oe.Plnal.toString(),Vorn2gmpk:Oe.Vornr}}T.GTMPack.push(Re)}}}if(m[te].component){for(var se=0;se<m[te].component.length;se++){var Ue={Tlgnhdr:m[te].grp,Idnrk:m[te].component[se].Idnrk,Menge:m[te].component[se].Menge,MeinsGcp:m[te].component[se].MeinsGcp,Vornr:m[te].component[se].Vornr,Postp:m[te].component[se].Postp,Tplnal:m[te].component[se].Plnal.toString()};T.GTComp.push(Ue)}}if(m[te].Class){for(var de=0;de<m[te].Class.length;de++){var ze={Tlgnhdr:m[te].grp,Classtype:m[te].Class[de].Classtype,Class:m[te].Class[de].Class,Clstatus1:m[te].Class[de].Clstatus1,Tplnal:m[te].Class[de].Plnal.toString()};T.GTClass.push(ze)}}if(m[te].Char){for(var Ke=0;Ke<m[te].Char.length;Ke++){var He={Tlgnhdr:m[te].grp,Atnam:m[te].Char[Ke].Atnam,Textbez:m[te].Char[Ke].Textbez,Atwrt:m[te].Char[Ke].Atwrt,Class:m[te].Char[Ke].Class,Tplnal:m[te].Char[Ke].Plnal.toString()};T.GTVal.push(He)}}}}if(f.length>0){for(var te=0;te<f.length;te++){if(f[te].header){for(var Q=0;Q<f[te].header.length;Q++){if(f[te].header[Q].Iwerk!==""){f[te].header[Q].Werks=f[te].header[Q].Iwerk}var Ge={Werks:f[te].header[Q].Werks,Wcplant:f[te].header[Q].plant,Statu:f[te].header[Q].Statu,Tverwe:f[te].header[Q].tlusg,Ktext:f[te].header[Q].Ktext,Tarbpl:f[te].header[Q].wc,Vagrp:f[te].header[Q].Vagrp,Anlzu:f[te].header[Q].Anlzu,Tplnal:f[te].header[Q].Plnal.toString(),Tleqhdr:f[te].grp,Strat:f[te].header[Q].Strat,Eq2tl:f[te].header[Q].equipment,Datuv:this._formatDate(f[te].validFrm)};T.ETList.push(Ge)}}if(f[te].operation){for(var re=0;re<f[te].operation.length;re++){var je={Tleqhdr:f[te].grp,Vornr:f[te].operation[re].Vornr,TlArbpl:f[te].operation[re].Arbpl,Werks2eop:f[te].operation[re].Werks,Steus2eop:f[te].operation[re].Steus,Ltxa1:f[te].operation[re].Ltxa1,Arbei:f[te].operation[re].Arbei,Dauno:f[te].operation[re].Dauno,Arbeh:f[te].operation[re].Arbeh,Anzzl:f[te].operation[re].Anzzl,Daune:f[te].operation[re].Daune,Indet:f[te].operation[re].Indet,Tplnal:f[te].operation[re].Plnal.toString(),Uvorn:f[te].operation[re].Uvorn,Larnt2eop:f[te].operation[re].Larnt,Prznt:f[te].operation[re].workPerc===""?0:parseFloat(f[te].operation[re].workPerc),Bmvrg:f[te].operation[re].orderQty,Bmeih:f[te].operation[re].ordQtyUnit,Opreis:f[te].operation[re].netPrice===""?"0.000":parseFloat(f[te].operation[re].netPrice).toFixed(3).toString(),Owaers:f[te].operation[re].currency,Opeinh:f[te].operation[re].priceUnit===""?"0.000":parseFloat(f[te].operation[re].priceUnit).toFixed(3).toString(),Sakto2eop:f[te].operation[re].costElement,Omatkl:f[te].operation[re].materialGrp,Oekgrp:f[te].operation[re].puchGroup,Ekorg:f[te].operation[re].purchOrg,EqunrEop:f[te].operation[re].equi,TplnrEop:f[te].operation[re].floc};T.ETOprs.push(je);for(var C=0;C<f[te].operation[re].OprRel.length;C++){var we=f[te].operation[re].OprRel[C];var qe={Tleqhdr:f[te].grp,Tplnal:we.Plnal.toString(),Vorn2:we.Vornr,Vornrerel:we.OperationOR,Dauer:we.Offset,Zeinh:we.OUn,Aobar:we.RelType,Eprznt:we.PO,Provg:we.OI,Ekalid:we.ID,Arbplerel:we.WrkCtrOR,Werkserel:we.PlantOR};T.ETRel.push(qe)}for(var C=0;C<f[te].operation[re].SrvPckgOvrw.length;C++){var we=f[te].operation[re].SrvPckgOvrw[C];var We={Tleqhdr:f[te].grp,Tplnal:we.Plnal.toString(),Vornrr:we.Vornr,SrvLine:we.LineNum,Del:l.truetoX(we.DelIndSP),Srvpos:we.ActNum,Ktext1:we.ShrtTxt,Mengeespk:we.Qty,Meinsespk:we.BUomSP,Tbtwr:we.GrossPrc,Waersespk:we.CurKey,IntWork:we.Work,Iwein:we.UnitOfWork};T.ETSpack.push(We)}for(var C=0;C<f[te].operation[re].PRT.length;C++){var we=f[te].operation[re].PRT[C];var Be={Tleqhdr:f[te].grp,Tplnal:we.Plnal.toString(),Vornreprt:we.Vornr,Psnfh:we.ItmNum,Fhmar:we.ItmCat,Matnreprt:we.Mat,EqunrEpt:we.Equi,Eqpnt:we.Mspt,Doknreprt:we.doc,Dokareprt:we.docType,Doktleprt:we.docPart,Dokvreprt:we.docVersion,Fhmnr:we.Othr,Fhwrk:we.Plant,Mgvgw:we.Qty,Mgeinh:we.UOM,Mgform:we.QtyFrmla,Steuf:we.PRTCtrl,Stftxt:we.PRTCtrlDesc,Ewvgw:we.StdUsgVal,Eweinh:we.StdUsgUOM,Ewform:we.UsgValFrmla};T.ETPRT.push(Be)}for(var C=0;C<f[te].operation[re].InspChar.length;C++){var we=f[te].operation[re].InspChar[C];var Ne={Tleqhdr:f[te].grp,Tplnal:we.Plnal.toString(),Vornreins:we.Vornr,Merknr:we.InspChar,Vste2eins:we.PrstInd,Quantitat:l.truetoX(we.QuanChar),QpmkRef:l.truetoX(we.QualChar),Verw2eins:we.MastInspChar,Uzae2tlen:we.Plant,Mkv2tleni:we.Version,Kurztext:we.ShrtTxt,Pmth2eins:we.InspMthd,Qwe2tleqi:we.InspMthdPlnt,Toleranzs:we.TolKey,Ver2tleqi:we.VrsnInspMthd,Stichprve:we.SampProc,Probemgeh:we.SampUOM,Pruefeinh:we.BaseSampQty===""?"0.00":parseFloat(we.BaseSampQty).toFixed(2),Auswmenge:we.CodeGrp};T.ETInsp.push(Ne)}}}if(f[te].MaintPckg&&f[te].MaintPckg.length>0){for(var C=0;C<f[te].MaintPckg.length;C++){if(f[te].MaintPckg[C].MPArr&&f[te].MaintPckg[C].MPArr.length>0){for(var x=0;x<f[te].MaintPckg[C].MPArr.length;x++){var Oe=f[te].MaintPckg[C].MPArr[x];var Re={Ktex1:Oe.Ktex1,Ktxhi:Oe.Ktxhi,Kzyk1:Oe.Kzyk1,Paketempk:Oe.Paket,Startempk:Oe.Strat,Tleqhdr:f[te].grp,Tplnal:Oe.Plnal.toString(),Vorn2empk:Oe.Vornr}}T.ETMPack.push(Re)}}}if(f[te].component){for(var se=0;se<f[te].component.length;se++){var Qe={Tleqhdr:f[te].grp,Idnrk:f[te].component[se].Idnrk,Menge:f[te].component[se].Menge,MeinsEcp:f[te].component[se].MeinsGcp,Vornr:f[te].component[se].Vornr,Postp:f[te].component[se].Postp,Tplnal:f[te].component[se].Plnal.toString()};T.ETComp.push(Qe)}}if(f[te].Class){for(var de=0;de<f[te].Class.length;de++){var _e={Tleqhdr:f[te].grp,Classtype:f[te].Class[de].Classtype,Class:f[te].Class[de].Class,Clstatus1:f[te].Class[de].Clstatus1,Tplnal:f[te].Class[de].Plnal.toString()};T.ETClass.push(_e)}}if(f[te].Char){for(var Ke=0;Ke<f[te].Char.length;Ke++){var Je={Tleqhdr:f[te].grp,Atnam:f[te].Char[Ke].Atnam,Textbez:f[te].Char[Ke].Textbez,Atwrt:f[te].Char[Ke].Atwrt,Class:f[te].Char[Ke].Class,Tplnal:f[te].Char[Ke].Plnal.toString()};T.ETVal.push(Je)}}}}if(h.length>0){for(var te=0;te<h.length;te++){if(h[te].header){for(var Q=0;Q<h[te].header.length;Q++){if(h[te].header[Q].Iwerk!==""){h[te].header[Q].Werks=h[te].header[Q].Iwerk}var $e={Werks:h[te].header[Q].Werks,Wcplant:h[te].header[Q].plant,Statu:h[te].header[Q].Statu,Tverwe:h[te].header[Q].tlusg,Ktext:h[te].header[Q].Ktext,Tarbpl:h[te].header[Q].wc,Vagrp:h[te].header[Q].Vagrp,Anlzu:h[te].header[Q].Anlzu,Tplnal:h[te].header[Q].Plnal.toString(),Tlflhdr:h[te].grp,Strat:h[te].header[Q].Strat,Fl2tl:h[te].header[Q].floc,Datuv:this._formatDate(f[te].validFrm)};T.FTList.push($e)}}if(h[te].operation){for(var re=0;re<h[te].operation.length;re++){var Ze={Tlflhdr:h[te].grp,Vornr:h[te].operation[re].Vornr,TlArbpl:h[te].operation[re].Arbpl,Werks2fop:h[te].operation[re].Werks,Steus2fop:h[te].operation[re].Steus,Ltxa1:h[te].operation[re].Ltxa1,Arbei:h[te].operation[re].Arbei,Dauno:h[te].operation[re].Dauno,Arbeh:h[te].operation[re].Arbeh,Anzzl:h[te].operation[re].Anzzl,Daune:h[te].operation[re].Daune,Indet:h[te].operation[re].Indet,Tplnal:h[te].operation[re].Plnal.toString(),Uvorn:h[te].operation[re].Uvorn,Larnt2fop:h[te].operation[re].Larnt,Prznt:h[te].operation[re].workPerc===""?0:parseFloat(h[te].operation[re].workPerc),Bmvrg:h[te].operation[re].orderQty,Bmeih:h[te].operation[re].ordQtyUnit,Opreis:h[te].operation[re].netPrice===""?"0.000":parseFloat(h[te].operation[re].netPrice).toFixed(3).toString(),Owaers:h[te].operation[re].currency,Opeinh:h[te].operation[re].priceUnit===""?"0.000":parseFloat(h[te].operation[re].priceUnit).toFixed(3).toString(),Sakto2fop:h[te].operation[re].costElement,Omatkl:h[te].operation[re].materialGrp,Oekgrp:h[te].operation[re].puchGroup,Ekorg:h[te].operation[re].purchOrg,EqunrFop:h[te].operation[re].equi,TplnrFop:h[te].operation[re].floc};T.FTOprs.push(Ze);for(var C=0;C<h[te].operation[re].OprRel.length;C++){var we=h[te].operation[re].OprRel[C];var qe={Tlflhdr:h[te].grp,Tplnal:we.Plnal.toString(),Vorn2:we.Vornr,Vornrfrel:we.OperationOR,Dauer:we.Offset,Zeinh:we.OUn,Aobar:we.RelType,Fprznt:we.PO,Provg:we.OI,Fkalid:we.ID,Arbplfrel:we.WrkCtrOR,Werksfrel:we.PlantOR};T.FTRel.push(qe)}for(var C=0;C<h[te].operation[re].SrvPckgOvrw.length;C++){var we=h[te].operation[re].SrvPckgOvrw[C];var We={Tlflhdr:h[te].grp,Tplnal:we.Plnal.toString(),Vornrr:we.Vornr,SrvLine:we.LineNum,Del:l.truetoX(we.DelIndSP),Srvpos:we.ActNum,Ktext1:we.ShrtTxt,Mengefspk:we.Qty,Meinsfspk:we.BUomSP,Tbtwr:we.GrossPrc,Waersfspk:we.CurKey,IntWork:we.Work,Iwein:we.UnitOfWork};T.FTSpack.push(We)}for(var C=0;C<h[te].operation[re].PRT.length;C++){var we=h[te].operation[re].PRT[C];var Be={Tlflhdr:h[te].grp,Tplnal:we.Plnal.toString(),Vornrfprt:we.Vornr,Psnfh:we.ItmNum,Fhmar:we.ItmCat,Matnrfprt:we.Mat,EqunrFpt:we.Equi,Eqpnt:we.Mspt,Doknrfprt:we.doc,Dokarfprt:we.docType,Doktlfprt:we.docPart,Dokvrfprt:we.docVersion,Fhmnr:we.Othr,Fhwrk:we.Plant,Mgvgw:we.Qty,Mgeinh:we.UOM,Mgform:we.QtyFrmla,Steuf:we.PRTCtrl,Stftxt:we.PRTCtrlDesc,Ewvgw:we.StdUsgVal,Eweinh:we.StdUsgUOM,Ewform:we.UsgValFrmla};T.FTPRT.push(Be)}for(var C=0;C<h[te].operation[re].InspChar.length;C++){var we=h[te].operation[re].InspChar[C];var Ne={Tlflhdr:h[te].grp,Tplnal:we.Plnal.toString(),Vornrfins:we.Vornr,Merknr:we.InspChar,Vste2eins:we.PrstInd,Quantitat:l.truetoX(we.QuanChar),QpmkRef:l.truetoX(we.QualChar),Verw2fins:we.MastInspChar,Uzae2tlfn:we.Plant,Mkv2tleni:we.Version,Kurztext:we.ShrtTxt,Pmth2fins:we.InspMthd,Qwe2tlfli:we.InspMthdPlnt,Toleranzs:we.TolKey,Ver2tlfli:we.VrsnInspMthd,Stichprve:we.SampProc,Probemgeh:we.SampUOM,Pruefeinh:we.BaseSampQty===""?"0.00":parseFloat(we.BaseSampQty).toFixed(2),Auswmenge:we.CodeGrp};T.FTInsp.push(Ne)}}}if(h[te].MaintPckg&&h[te].MaintPckg.length>0){for(var C=0;C<h[te].MaintPckg.length;C++){if(h[te].MaintPckg[C].MPArr&&h[te].MaintPckg[C].MPArr.length>0){for(var x=0;x<h[te].MaintPckg[C].MPArr.length;x++){var Oe=h[te].MaintPckg[C].MPArr[x];var Re={Ktex1:Oe.Ktex1,Ktxhi:Oe.Ktxhi,Kzyk1:Oe.Kzyk1,Paketfmpk:Oe.Paket,Startfmpk:Oe.Strat,Tlflhdr:h[te].grp,Tplnal:Oe.Plnal.toString(),Vorn2fmpk:Oe.Vornr}}T.FTMPack.push(Re)}}}if(h[te].component){for(var se=0;se<h[te].component.length;se++){var Xe={Tlflhdr:h[te].grp,Idnrk:h[te].component[se].Idnrk,Menge:h[te].component[se].Menge,MeinsFcp:h[te].component[se].MeinsGcp,Vornr:h[te].component[se].Vornr,Postp:h[te].component[se].Postp,Tplnal:h[te].component[se].Plnal.toString()};T.FTComp.push(Xe)}}if(h[te].Class){for(var de=0;de<h[te].Class.length;de++){var Ye={Tlflhdr:h[te].grp,Classtype:h[te].Class[de].Classtype,Class:h[te].Class[de].Class,Clstatus1:h[te].Class[de].Clstatus1,Tplnal:h[te].Class[de].Plnal.toString()};T.FTClass.push(Ye)}}if(h[te].Char){for(var Ke=0;Ke<h[te].Char.length;Ke++){var et={Tlflhdr:h[te].grp,Atnam:h[te].Char[Ke].Atnam,Textbez:h[te].Char[Ke].Textbez,Atwrt:h[te].Char[Ke].Atwrt,Class:h[te].Char[Ke].Class,Tplnal:h[te].Char[Ke].Plnal.toString()};T.FTVal.push(et)}}}}if(S.length>0){for(var te=0;te<S.length;te++){var tt={Begru:S[te].autGrp,Objlink:S[te].link,Kanxt:S[te].linkDesc,Eqkant:S[te].linkObjEq,Tpkant:S[te].linkObjFl,Netyp:S[te].linkCat,Eqvon:S[te].linkFrmEq,Tpvon:S[te].linkFrmFl,Eqnach:S[te].linkToEq,Tpnach:S[te].linkToFl,Mediu:S[te].medium,Lfdknr:S[te].linkNum,Kantyp:S[te].objCat,Netid:S[te].netId,Bezarp:S[te].Bezarp,Bezarl:S[te].Bezarl,Datva:l._formatDate(S[te].validFrm),Zeitva:l._timeConvert(S[te].timeFrm),Datvb:l._formatDate(S[te].validTo),Zeitvb:l._timeConvert(S[te].timeTo),Stattext:S[te].Stattext,StsmOl:S[te].StsmOl,UstwOl:S[te].UstwOl,UswoOl:S[te].UswoOl,UstaOl:S[te].UstaOl};T.Olink.push(tt);if(S[te].Class){for(var Q=0;Q<S[te].Class.length;Q++){var at={Objlink:S[te].Class[Q].Objlink,Classtype:S[te].Class[Q].Classtype,Class:S[te].Class[Q].Class,Clstatus1:S[te].Class[Q].Clstatus1};T.OLClass.push(at)}}if(S[te].Char){for(var re=0;re<S[te].Char.length;re++){var rt={Objlink:S[te].Char[re].Objlink,Atnam:S[te].Char[re].Atnam,Textbez:S[te].Char[re].Textbez,Atwrt:S[te].Char[re].Atwrt,Class:S[te].Char[re].Class};T.OLVal.push(rt)}}}}var lt=this.getView().getModel();var X={"X-Requested-With":"xmlHTTPrequest"};lt.setHeaders(X);if(T.FLAddrI.length>0){T.FLAddrI=$.map(T.FLAddrI,function(e){return $.extend(true,{},e)});for(var te=0;te<T.FLAddrI.length>0;te++){delete T.FLAddrI[te].AdNationEnable;delete T.FLAddrI[te].City1iVS;delete T.FLAddrI[te].StreetiVS}}if(T.EqAddrI.length>0){T.EqAddrI=$.map(T.EqAddrI,function(e){return $.extend(true,{},e)});for(var te=0;te<T.EqAddrI.length>0;te++){delete T.EqAddrI[te].AdNationEnable;delete T.EqAddrI[te].City1iVS;delete T.EqAddrI[te].StreetiVS}}T.SelectedObject=[];if(t===this.oModelAIWFLOC){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Tplnr:r[nt].Functionallocation};T.SelectedObject.push(st)}}if(t===this.oModelAIWEQUI){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Equnr:n[nt].Equnr};T.SelectedObject.push(st)}}if(t===this.oModelAIWMSPT){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Mspoint:s[nt].Mspoint};T.SelectedObject.push(st)}}if(t==="AIWListWCModel"){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Workcntr:g[nt].wc,Werks:g[nt].plant};T.SelectedObject.push(st)}}if(t==="AIWListGTLModel"){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Tlgnhdr:m[nt].grp};T.SelectedObject.push(st)}}if(t==="AIWListETLModel"){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Tleqhdr:f[nt].grp};T.SelectedObject.push(st)}}if(t==="AIWListFTLModel"){for(var te=e.length-1;te>=0;te--){var nt=e[te];nt=parseInt(nt);var st={Tlflhdr:h[nt].grp};T.SelectedObject.push(st)}}a.BusyDialog.open();lt.create("/ChangeRequestSet",T,{success:function(r){a.BusyDialog.close();if(r.RemoveMsg!==""){var l=!!a.getView().$().closest(".sapUiSizeCompact").length;sap.m.MessageBox.information(r.RemoveMsg,{actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:l?"sapUiSizeCompact":"",onClose:function(r){if(r==="OK"){a.proceedDelete(e,t)}}})}else{a.proceedDelete(e,t)}},error:function(e){a.BusyDialog.close();var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){t[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<t.length;n++){l.push({type:"Error",title:t[n]})}a.createMessagePopover(l,false)}})},proceedDelete:function(e,t){if(t===this.oModelAIWFLOC){var a=this.getView().getModel("mainView");var r=a.getData();var l=sap.ui.getCore().getModel(this.oModelAIWFLOC);var n=l.getData();for(var s=e.length-1;s>=0;s--){var o=e[s];o=parseInt(o);var i=sap.ui.getCore().getModel("flocAddressView");var d=i.getData();if(o<=d.length){for(var c=0;c<d.length;c++){if(n[o].Functionallocation===d[c].Functionallocation){d.splice(c,1);i.setData(d);break}}}var p=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;if(n[o].Functionallocation===""){sap.ui.getCore().getModel("dataOriginMOP").getData().FL.splice(o,1)}else{for(var u=0;u<p.length;u++){if(p[u].key===n[o].Functionallocation){sap.ui.getCore().getModel("dataOriginMOP").getData().FL.splice(u,1)}}}n.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();sap.ui.getCore().byId(this.tableId).getModel(this.oModelAIWFLOC).refresh();this.getView().getModel(this.oModelAIWFLOC).refresh();l.setData(n);this.onUpdateTitleCount(t,n);this.selectedRowsFLOC=[];r.deleteFLOC=false}if(t===this.oModelAIWEQUI){var a=this.getView().getModel("mainView");var r=a.getData();var g=sap.ui.getCore().getModel(this.oModelAIWEQUI);var m=g.getData();for(var f=e.length-1;f>=0;f--){var o=e[f];o=parseInt(o);var h=sap.ui.getCore().getModel("equiAddressView");var S=h.getData();if(o<=S.length){for(var T=0;T<S.length;T++){if(m[o].Equnr===S[T].Equnr){S.splice(T,1);h.setData(S);break}}}var M=sap.ui.getCore().getModel("ainMOP").getData();for(var b=0;b<M.length;b++){if(M[b].key===m[o].Equnr){sap.ui.getCore().getModel("ainMOP").getData().splice(b,1);break}}sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.splice(o,1);m.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();sap.ui.getCore().byId(this.tableId).getModel(this.oModelAIWEQUI).refresh();this.getView().getModel(this.oModelAIWEQUI).refresh();g.setData(m);this.onUpdateTitleCount(t,m);this.selectedRowsEQUI=[];r.deleteEQUI=false}if(t===this.oModelAIWMSPT){var a=this.getView().getModel("mainView");var r=a.getData();var E=this.getView().getModel(this.oModelAIWMSPT);var v=E.getData();for(var C=e.length-1;C>=0;C--){var o=e[C];o=parseInt(o);v.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();sap.ui.getCore().byId(this.tableId).getModel(this.oModelAIWMSPT).refresh();this.getView().getModel(this.oModelAIWMSPT).refresh();E.setData(v);this.onUpdateTitleCount(t,v);this.selectedRowsMSPT=[];r.deleteMSPT=false}if(t==="AIWListWCModel"){var x=this.getView().getModel("AIWListWCModel");var V=x.getData();for(var s=e.length-1;s>=0;s--){o=e[s];V.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();x.setData(V);this.updateCount("workCenter",V);this.selectedRowsWC=[];var P=this.getView().getModel("EnableDELModel");var I=P.getData();I.deleteWC=false;P.setData(I)}if(t==="AIWListGTLModel"){var L=this.getView().getModel("AIWListGTLModel");var y=L.getData();for(var s=e.length-1;s>=0;s--){var o=e[s];y.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();L.setData(y);this.updateCount("generalTL",y);this.selectedRowsGTL=[];var P=this.getView().getModel("EnableDELModel");var I=P.getData();I.deleteGTL=false;P.setData(I);var D=this.getView().getModel("aCounterModel");var k=D.getData();k.addGTLCounter=false;D.setData(k)}if(t==="AIWListETLModel"){var F=this.getView().getModel("AIWListETLModel");var A=F.getData();for(var s=e.length-1;s>=0;s--){var o=e[s];A.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();F.setData(A);this.updateCount("equiTL",A);this.selectedRowsETL=[];var P=this.getView().getModel("EnableDELModel");var I=P.getData();I.deleteETL=false;P.setData(I);var D=this.getView().getModel("aCounterModel");var k=D.getData();k.addETLCounter=false;D.setData(k)}if(t==="AIWListFTLModel"){var w=this.getView().getModel("AIWListFTLModel");var q=w.getData();for(var s=e.length-1;s>=0;s--){var o=e[s];q.splice(o,1)}sap.ui.getCore().byId(this.tableId).removeSelections();w.setData(q);this.updateCount("flocTL",q);this.selectedRowsFTL=[];var P=this.getView().getModel("EnableDELModel");var I=P.getData();I.deleteFTL=false;P.setData(I);var D=this.getView().getModel("aCounterModel");var k=D.getData();k.addFTLCounter=false;D.setData(k)}},onDeletePress:function(e){var t=this.getFragmentModelName(e);this.handleDeletePress(e.getSource(),t);if(sap.ui.getCore().getModel("AIWAPPROVE")){var a=sap.ui.getCore().getModel("AIWAPPROVE");var r=a.getProperty("/");r.splice(this.indexApprove,1);a.setProperty("/",r);sap.ui.getCore().setModel(a,"AIWAPPROVE")}},handleDeletePress:function(e,t){var a,r,l,n;a=e.getBindingContext(t).getPath();a=a.substring(a.lastIndexOf("/")+1);r=parseInt(a.substr(-1),10);n=e.getModel(t);l=n.getProperty("/");l.splice(r,1);n.setProperty("/",l);this.indexApprove=r;this.getView().setModel(n,t);this.onUpdateTitleCount(t,this.getView().getModel(t).getData())},StructureIndicatorChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Strucindicator;if(l===""||l===undefined){r.Strucindicator="";r.StrucIndicatorDesc="";r.EditMask="";r.Hierarchy="";r.Location="";r.Locationdesc="";r.Abckz="";r.Abctx="";r.Bukrs="";r.Butxt="";r.City="";r.Kostl="";r.Mctxt="";r.Kokrs="";r.Werks="";r.Planningplantdes="";r.Ingrp="";r.Innam="";r.MainArbpl="";r.MainKtext="";r.MainWerks=""}e.getSource().setValueState("None")},onStrChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=e.getSource().getValue();if(l===""||l===undefined){e.getSource().setValue("")}else{var n=r.Functionallocation;if(n===""||n===undefined){e.getSource().setValue("");this.invokeMessage(this.getResourceBundle().getText("functionalLocationMand"))}else{r.Strucindicator=l.toUpperCase();this._strIndicator(r,a,t)}}},_strIndicator:function(e,t,a){var r=this;var l=e.Strucindicator;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/StrucIndicatorValueHelpSet";var o=[new sap.ui.model.Filter("StrucIndicator","EQ",l)];var i=r.getView().getModel("valueHelp");var d=function(t){if(t.results.length>0){e.Strucindicator=n;e.StrucIndicatorDesc=t.results[0].StrucIndicatorDesc;e.EditMask=t.results[0].EditMask;e.Hierarchy=t.results[0].Hierarchy;r.getModel(a).refresh();r.readSupFlocDetails(e.Functionallocation)}else{e.Strucindicator="";e.StrucIndicatorDesc="";e.EditMask="";e.Hierarchy="";e.StrucindicatorVS="Error";e.StrucindicatorVST="Invalid Entry";r.getModel(a).refresh()}};var c=function(t){var l=JSON.parse(t.responseText);var n=l.error.message.value;e.StrucindicatorVS="Error";e.StrucindicatorVST=n;r.getModel(a).refresh()};r._readData(s,i,d,c,o)}else{e.Strucindicator=n;r.getModel(a).refresh()}},onStrIndVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);this.strIndVH(r,a,t)},strIndVH:function(e,t,a){var r=this;var l={title:this.getView().getModel("i18n").getProperty("STR_IND"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STR_IND}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>STR_IND_DESC}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>EDIT_MASK}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>HIER_LEVELS}"})]})],items:{path:"/StrucIndicatorValueHelpSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{StrucIndicator}"}),new sap.m.Text({text:"{StrucIndicatorDesc}"}),new sap.m.Text({text:"{EditMask}"}),new sap.m.Text({text:"{Hierarchy}"})]})},confirm:function(t){if(e.Functionallocation===""||e.Functionallocation===undefined){e.Strucindicator="";r.getView().getModel(a).refresh();r.invokeMessage(r.getResourceBundle().getText("functionalLocationMand"))}else{e.StrucindicatorVS="None";e.StrucindicatorVST="";e.Strucindicator=t.getParameter("selectedItem").getCells()[0].getText();e.StrucIndicatorDesc=t.getParameter("selectedItem").getCells()[1].getText();e.EditMask=t.getParameter("selectedItem").getCells()[2].getText();e.Hierarchy=t.getParameter("selectedItem").getCells()[3].getText();r.getView().getModel(a).refresh();r.readSupFlocDetails(e.Functionallocation)}}};var n="/StrucIndicatorValueHelpSet";var s=r.getView().getModel("valueHelp");var o=[];var i=[new sap.m.Text({text:"{StrucIndicator}"}),new sap.m.Text({text:"{StrucIndicator}"}),new sap.m.Text({text:"{EditMask}"}),new sap.m.Text({text:"{Hierarchy}"})];var d=c.getValueHelp(s,n,i,o,l,"StrucIndicator","StrucIndicator");d.open();d.setModel(this.getView().getModel("i18n"),"i18n")},flocCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Floccategory;if(l===""||l===undefined){r.Floccategory="";r.FlocCategoryDesc=""}e.getSource().setValueState("None")},onFlocCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Floccategory;if(l===""||l===undefined){r.Floccategory="";r.FlocCategoryDesc=""}else{r.Floccategory=l.toUpperCase();this._flocCategory(r,a,t)}},_flocCategory:function(e,t,a){var r=this;var l=e.Floccategory;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/FLocCatgValueHelpSet";var o=[new sap.ui.model.Filter("FlocCategory","EQ",l)];var i=r.getView().getModel("valueHelp");var d=function(s){if(s.results.length>0){e.Floccategory=n;e.FlocCategoryDesc=s.results[0].FlocCategoryDesc;if(e.Floccategory==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}r.readStatusProf(l,t,a)}else{e.Floccategory="";e.FlocCategoryDesc="";e.FloccategoryVS="Error";e.FloccategoryVST="Invalid Entry";r.getModel(a).refresh()}};var c=function(t){var l=JSON.parse(t.responseText);var n=l.error.message.value;e.FloccategoryVS="Error";e.FloccategoryVST=n;r.getModel(a).refresh()};r._readData(s,i,d,c,o)}else{e.Floccategory=n;r.getModel(a).refresh()}},onFlocCatVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);this.flocCatVH(r,a,t)},flocCatVH:function(e,t,a){var r=this;var l;if(l===undefined){var n=new sap.m.SelectDialog({title:this.getView().getModel("i18n").getProperty("FUNLOC_CAT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/FLocCatgValueHelpSet",template:new sap.m.StandardListItem({title:"{FlocCategory}",description:"{FlocCategoryDesc}"})},confirm:function(l){e.Floccategory=l.getParameters().selectedItem.getProperty("title");e.FlocCategoryDesc=l.getParameters().selectedItem.getProperty("description");e.FloccategoryVS="None";e.FloccategoryVST="";if(e.Floccategory==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}r.readStatusProf(e.Floccategory,t,a)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("FlocCategory",s.Contains,t),new sap.ui.model.Filter("FlocCategoryDesc",s.Contains,t)],false)])}});var o="/FLocCatgValueHelpSet";var i=r.getView().getModel("valueHelp");var d=function(e){if(e.results.length>0){l=e;var t=new sap.m.StandardListItem({title:"{FlocCategory}",description:"{FlocCategoryDesc}",active:true});var a=new sap.ui.model.json.JSONModel;a.setData(e);n.setModel(a);n.bindAggregation("items","/results",t)}else{n.setNoDataText(r.getView().getModel("i18n").getProperty("NO_DATA"))}};var c=function(){};r._readData(o,i,d,c)}else{var p=new sap.ui.model.json.JSONModel;p.setData(l);n.setModel(p);var u=n.getItems();for(var g=0;g<u.length;g++){u[g].setVisible(true)}}n.open()},SupflocChange:function(e){e.getSource().setValueState("None")},onSupFlocChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.SupFunctionallocation;if(l){r.SupFunctionallocation=l.toUpperCase();var n=false;var s=sap.ui.getCore().getModel(t);var o=s.getData();for(var i=0;i<o.length;i++){if(r.SupFunctionallocation===o[i].Functionallocation){r.SupFlocdescription=o[i].Flocdescription;n=true;break}}if(n&&r.Strucindicator){s.setProperty(a,r);this.readSupFlocDetails(r.Functionallocation,"SUP",a)}else{this._supFunctionalLocation(r,a,t)}}else{r.SupFunctionallocation="";r.SupFlocdescription="";if(sap.ui.getCore().getModel("SUP_FLOC_DATA")){var d=sap.ui.getCore().getModel("SUP_FLOC_DATA");var c=d.getData();var p;if(c.length>0){for(var u=0;u<c.length;u++){if(r.Functionallocation===c[u].Functionallocation){p=u;break}}var g=sap.ui.getCore().getModel("SUP_FLOC_DATA").getProperty("/"+p);if(g){r.Title="";r.TitleCode="";r.Name1="";r.Name2="";r.Name3="";r.Name4="";r.Sort1="";r.Sort2="";r.NameCo="";r.PostCod1="";r.City1="";r.Building="";r.Floor="";r.Roomnum="";r.Strsuppl1="";r.Strsuppl2="";r.Strsuppl3="";r.AddrLocation="";r.RefPosta="";r.Landx="";r.TimeZone="";r.Region="";r.RegionDesc="";r.RefPostaLblReq=false;var m=sap.ui.getCore().getModel("flocAddressView");var f=m.getData();for(var h=0;h<f.length;h++){if(r.Functionallocation===f[h].Functionallocation){f.splice(h,1);m.setData(f);break}}c.splice(p,1);d.setData(c)}}}var S=[];sap.ui.getCore().getModel("dataOriginMOP").getData().FL.forEach(function(e){if(e.key===r.Functionallocation){S=e.DOI}});S.forEach(function(e){if(e.maintenance===false){e.instLoc=false;e.SupFlVal=""}})}},_supFunctionalLocation:function(e,t,a){var r=this;var l=e.SupFunctionallocation;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/ChangeRequestSet";var o=[new sap.ui.model.Filter("Tplnr","EQ",""),new sap.ui.model.Filter("Tplma","EQ",l),new sap.ui.model.Filter("Tplkz","EQ",e.Strucindicator)];var i=["FLAddr","FLClass","FLEmail","FLFax","FLLAM","FLLAMCH","FLMltxt","FLPermit","FLPrtnr","FLTele","FLUrl","FLVal","FuncLoc"];var d={$expand:i};var c=r.getView().getModel();r.BusyDialog.open();var p=function(l){r.BusyDialog.close();if(l.results.length>0){var s=l.results[0].FuncLoc.results[0];e.SupFunctionallocation=n;r.SupFunctionallocation=n;e.SupFlocdescription=s.Supflocdesc;r.getModel(a).refresh();r.readSupFlocDetails(e.Functionallocation,"SUP",t)}else{e.SupFunctionallocation=r.SupFunctionallocation;e.SupFunctionallocationVS="Error";e.SupFunctionallocationVST="Invalid Entry";r.getModel(a).refresh()}};var u=function(t){r.BusyDialog.close();var l=JSON.parse(t.responseText);var n=l.error.message.value;e.SupFunctionallocationVS="Error";e.SupFunctionallocationVST=n;r.getModel(a).refresh()};r._readData(s,c,p,u,o,d)}else{e.SupFunctionallocation=r.SupFunctionallocation;r.getModel(a).refresh()}},onSupFlocVH:function(e){var t=this;var a;if(a===undefined){var r=e.getSource();var l=t.getView().getModel("AIWFLOC");var n=sap.ui.getCore().getModel("AIWFLOC");var s;var o=new sap.m.SelectDialog({title:t.getView().getModel("i18n").getProperty("FLOC_TXT"),noDataText:t.getView().getModel("i18n").getProperty("LOAD")+"...",growingThreshold:5e3,items:{path:"/FunctionLocationSet",template:new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}"})},confirm:function(e){var a=r.getBindingContext("AIWFLOC").getPath();s=l.getProperty(a);r.setValue(e.getParameters().selectedItem.getProperty("title"));s.SupFlocdescription=e.getParameters().selectedItem.getProperty("description");r.setValueState("None");r.setValueStateText("");l.setProperty(a,s);n.setProperty(a,s);t.readSupFlocDetails(s.Functionallocation,"SUP",a)},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Tplnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Pltxt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var i="/FunctionLocationSet";var d=t.getView().getModel("valueHelp");var c=function(e){if(e.results.length>0){var r=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();if(r.length>0){for(var l=0;l<r.length;l++){if(r[l].Functionallocation){var n={Tplnr:r[l].Functionallocation,Pltxt:r[l].Flocdescription};e.results.unshift(n)}}}a=e;var s=new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}",active:true});var i=new sap.ui.model.json.JSONModel;i.setData(e);o.setModel(i);o.bindAggregation("items","/results",s)}else{o.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}};var p=function(){};t._readData(i,d,c,p)}else{var u=new sap.ui.model.json.JSONModel;u.setData(a);o.setModel(u);var g=o.getItems();for(var m=0;m<g.length;m++){g[m].setVisible(true)}}o.open()},readSupFlocDetails:function(e,a,r){var n=this;var s="/ChangeRequestSet";var o=n.getView().getModel();var i=n.getView().getModel("mainView");var d=i.getData();var c=n.getView().getModel(n.oModelAIWFLOC);var p=sap.ui.getCore().getModel(n.oModelAIWFLOC);var u=[];var g={ChangeRequestType:"AIWEAM0P",CrDescription:"",Reason:"01",DeriveData:true,FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],FLLAMCH:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],Messages:[],FLDOI:[]};var m=sap.ui.getCore().getModel(n.oModelAIWFLOC).getData();if(m.length>0){for(var f=0;f<m.length;f++){if(m[f].Functionallocation===""||m[f].Functionallocation===undefined){for(var h=0;h<m.length;h++){sap.ui.getCore().getModel("dataOriginMOP").getData().FL[h].key=m[h].Functionallocation}}var S={Tplnr:m[f].Functionallocation,Txtmi:m[f].Flocdescription,TplkzFlc:m[f].Strucindicator,Tplxt:m[f].StrucIndicatorDesc,EditMask:m[f].EditMask,Hierarchy:m[f].Hierarchy,Fltyp:m[f].Floccategory,Flttx:m[f].FlocCategoryDesc,Swerk:m[f].Maintplant,Plantname:m[f].MaintplantDesc,StorFloc:m[f].Location,Locationdesc:m[f].Locationdesc,Abckzfloc:m[f].Abckz,Abctx:m[f].Abctx,Bukrsfloc:m[f].Bukrs,Butxt:m[f].Butxt,City:m[f].City,KostFloc:m[f].Kostl,KokrFloc:m[f].Kokrs,Contareaname:m[f].Mctxt,PlntFloc:m[f].Werks,Planningplantdes:m[f].Planningplantdes,Ingrp:m[f].Ingrp,Plannergrpdesc:m[f].Innam,Arbplfloc:m[f].Arbpl,Workcenterdesc:m[f].Ktext,Wergwfloc:m[f].WcWerks,Gewrkfloc:m[f].MainArbpl,MainWcDesc:m[f].MainKtext,MainWcPlant:m[f].MainWerks,Tplma:m[f].SupFunctionallocation,Supflocdesc:m[f].SupFlocdescription,BeberFl:m[f].BeberFl,Fing:m[f].Fing,Tele:m[f].Tele,Submtiflo:m[f].ConstrType,Constdesc:m[f].ConstructionDesc,Eqart:m[f].TechnicalObjectTyp,Eartx:m[f].Description,Stattext:m[f].Stattext,StsmFloc:m[f].StsmEqui,Statproftxt:m[f].StsmEquiDesc,UstwFloc:m[f].UstwEqui,UswoFloc:m[f].UswoEqui,UstaFloc:m[f].UstaEqui,IsMenu:m[f].menuAction,Adrnr:m[f].Adrnr,Adrnri:m[f].Adrnri,Deact:m[f].Deact,Alkey:m[f].Alkey,Modeldesc:m[f].Modeldesc,Modelref:m[f].Modelref,Modelrver:m[f].Modelrver,Modelext:m[f].Modelext,Modelname:m[f].Modelname,Modelver:m[f].Modelver};var T=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;if(T&&T.length>0){var M=T[f].DOI;S.Swerki=M[0].instLoc?"H":M[0].maintenance?"D":"";S.Storti=M[1].instLoc?"H":M[1].maintenance?"D":"";S.Beberi=M[2].instLoc?"H":M[2].maintenance?"D":"";S.Ppsidi=M[3].instLoc?"H":M[3].maintenance?"D":"";S.Abckzi=M[4].instLoc?"H":M[4].maintenance?"D":"";S.Bukrsi=M[5].instLoc?"H":M[5].maintenance?"D":"";S.Kostli=M[6].instLoc?"H":M[6].maintenance?"D":"";S.Kokrsi=M[7].instLoc?"H":M[7].maintenance?"D":"";S.Iwerki=M[8].instLoc?"H":M[8].maintenance?"D":"";S.Ingrpi=M[9].instLoc?"H":M[9].maintenance?"D":"";S.Lgwidi=M[10].instLoc?"H":M[10].maintenance?"D":"";S.Adrnri=M[12].instLoc?"H":M[12].maintenance?"D":""}if(a!==undefined&&S.Tplnr===e){S.IsDOI=true}else if(S.Tplnr===e&&e.indexOf("-")>-1){S.IsDOI=true;a="SUP";var b=e.lastIndexOf("-");var E=e.substring(0,b);S.Tplma=E}if(m[f].viewParameter==="create"){S.Type=true}g.FuncLoc.push(S);if(m[f].Title!==""&&m[f].Title!==undefined||m[f].TitleCode!==""&&m[f].TitleCode!==undefined||m[f].Name1!==""&&m[f].Name1!==undefined||m[f].Name2!==""&&m[f].Name2!==undefined||m[f].Name3!==""&&m[f].Name3!==undefined||m[f].Name4!==""&&m[f].Name4!==undefined||m[f].Sort1!==""&&m[f].Sort1!==undefined||m[f].Sort2!==""&&m[f].Sort2!==undefined||m[f].NameCo!==""&&m[f].NameCo!==undefined||m[f].PostCod1!==""&&m[f].PostCod1!==undefined||m[f].City1!==""&&m[f].City1!==undefined||m[f].Building!==""&&m[f].Building!==undefined||m[f].Floor!==""&&m[f].Floor!==undefined||m[f].Roomnum!==""&&m[f].Roomnum!==undefined||m[f].AddrLocation!==""&&m[f].AddrLocation!==undefined||m[f].Strsuppl1!==""&&m[f].Strsuppl1!==undefined||m[f].Strsuppl2!==""&&m[f].Strsuppl2!==undefined||m[f].Strsuppl3!==""&&m[f].Strsuppl3!==undefined||m[f].TimeZone!==""&&m[f].TimeZone!==undefined||m[f].RefPosta!==""&&m[f].RefPosta!==undefined||m[f].Region!==""&&m[f].Region!==undefined){var v={Funcloc:m[f].Functionallocation,Title:m[f].TitleCode,Name1:m[f].Name1,Name2:m[f].Name2,Name3:m[f].Name3,Name4:m[f].Name4,Sort1:m[f].Sort1,Sort2:m[f].Sort2,NameCo:m[f].NameCo,PostCod1:m[f].PostCod1,City1:m[f].City1,Building:m[f].Building,Floor:m[f].Floor,Roomnum:m[f].Roomnum,Strsuppl1:m[f].Strsuppl1,Strsuppl2:m[f].Strsuppl2,Strsuppl3:m[f].Strsuppl3,Location:m[f].AddrLocation,RPostafl:m[f].RefPosta,Landx:m[f].Landx,TimeZone:m[f].TimeZone,RPostFl:m[f].Region,Regiotxt:m[f].RegionDesc};g.FLAddr.push(v)}var C=m[f].intlAddr;if(C.length>0){for(var x=0;x<C.length;x++){C[x].Funcloc=m[f].Functionallocation;g.FLAddrI.push(C[x])}}if(n.AltLblDerv==="2"&&m[f].altlbl.length>0){for(var V=0;V<m[f].altlbl.length;V++){var P={Funcloc:m[f].Functionallocation,AltAlkey:m[f].altlbl[V].AltAlkey,AltStrno:m[f].altlbl[V].AltStrno,AltTplkz:m[f].altlbl[V].AltTplkz};g.FLALTLBEL.push(P)}}if(m[f].lam){var I={Funcloc:m[f].Functionallocation,Lrpid:m[f].lam.Lrpid,Strtptatr:m[f].lam.Strtptatr,Endptatr:m[f].lam.Endptatr,Length:m[f].lam.Length,LinUnit:m[f].lam.LinUnit,Startmrkr:m[f].lam.Startmrkr,Endmrkr:m[f].lam.Endmrkr,Mrkdisst:m[f].lam.Mrkdisst,Mrkdisend:m[f].lam.Mrkdisend,MrkrUnit:m[f].lam.MrkrUnit,LamDer:m[f].lam.LamDer};g.FLLAM.push(I)}var L=m[f].classItems;if(L){if(L.length>0){for(var y=0;y<L.length;y++){var D={Funcloc:m[f].Functionallocation,Classtype:L[y].Classtype,Class:L[y].Class,Clstatus1:L[y].Clstatus1,Artxt:L[y].ClassTypeDesc};g.FLClass.push(D)}}}var k=m[f].characteristics;if(k){if(k.length>0){for(var F=0;F<k.length;F++){var A={Funcloc:m[f].Functionallocation,Atnam:k[F].Atnam,Textbez:k[F].Textbez,Atwrt:k[F].Atwrt,Class:k[F].Class};g.FLVal.push(A)}}}var w=m[f].linearChar;if(w){if(w.length>0){var q=$.map(w,function(e){return $.extend(true,{},e)});for(var F=0;F<q.length;F++){delete q[F].linCharEnable;q[F].Funcloc=m[f].Functionallocation;g.FLLAMCH.push(q[F])}}}sap.ui.getCore().getModel("dataOriginMOP").getData().FL[f].key=m[f].Functionallocation}}var W=function(r){d.tableBusy=false;if(r.Messages.results.length>0){var s=[];for(var o=0;o<r.Messages.results.length;o++){s.push({type:l.getMessageType(r.Messages.results[o].Type),title:r.Messages.results[o].Message})}n.createMessagePopover(s,false);d.tableBusy=false;i.setData(d);return}if(r.FuncLoc.results.length>0){if(r.FuncLoc.results.length>0){for(var g=0;g<r.FuncLoc.results.length;g++){var m=r.FuncLoc.results[g];var f={intlAddr:[],altlbl:[],classItems:[],characteristics:[],linearChar:[],FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};f.Functionallocation=m.Tplnr;f.Flocdescription=m.Txtmi;f.EditMask=m.EditMask;f.Hierarchy=m.Hierarchy;f.Floccategory=m.Fltyp;f.FlocCategoryDesc=m.Flttx;f.Strucindicator=m.TplkzFlc;f.StrucIndicatorDesc=m.Tplxt;f.SupFunctionallocation=m.Tplma;f.SupFlocdescription=m.Supflocdesc;f.Stattext=m.Stattext;f.StsmEqui=m.StsmFloc;f.StsmEquiDesc=m.Statproftxt;f.UstwEqui=m.UstwFloc;f.UswoEqui=m.UswoFloc;f.UstaEqui=m.UstaFloc;f.TechnicalObjectTyp=m.Eqart;f.Description=m.Eartx;f.Maintplant=m.Swerk;f.MaintplantDesc=m.Plantname;f.Location=m.StorFloc;f.Locationdesc=m.Locationdesc;f.BeberFl=m.BeberFl;f.Fing=m.Fing;f.Tele=m.Tele;f.Arbpl=m.Arbplfloc;f.Ktext=m.Workcenterdesc;f.WcWerks=m.Wergwfloc;f.MainArbpl=m.Gewrkfloc;f.MainKtext=m.MainWcDesc;f.MainWerks=m.MainWcPlant;f.Abckz=m.Abckzfloc;f.Abctx=m.Abctx;f.Bukrs=m.Bukrsfloc;f.Butxt=m.Butxt;f.City=m.City;f.Kostl=m.KostFloc;f.Kokrs=m.KokrFloc;f.Mctxt=m.Contareaname;f.Werks=m.PlntFloc;f.Planningplantdes=m.Planningplantdes;f.Ingrp=m.Ingrp;f.Innam=m.Plannergrpdesc;f.ConstrType=m.Submtiflo;f.ConstructionDesc=m.Constdesc;f.menuAction=m.IsMenu;f.Adrnr=m.Adrnr;f.Adrnri=m.Adrnri;f.Deact=m.Deact;f.Alkey=m.Alkey;f.Altxt=m.Altxt;f.Modeldesc=m.Modeldesc;f.Modelref=m.Modelref;f.Modelrver=m.Modelrver;f.Modelext=m.Modelext;f.Modelname=m.Modelname;f.Modelver=m.Modelver;if(m.Type===true){f.viewParameter="create"}if(m.Type===false){f.viewParameter="change";if(f.Floccategory===""||f.Floccategory===undefined){f.FlocCatEnabled=true}else{f.FlocCatEnabled=false}if(f.Strucindicator===""||f.Strucindicator===undefined){f.StrucIndEnabled=true}else{f.StrucIndEnabled=false}f.FunctionalLocEnabled=false}if(m.Swerk!==""){f.BukrsEnabled=false}else{f.MaintplantEnabled=true;f.BukrsEnabled=true}if(r.FLLAM.results.length>0){var h=r.FLLAM.results;for(var S=0;S<h.length;S++){if(h[S].Funcloc===f.Functionallocation){var T={Funcloc:h[S].Funcloc,Lrpid:h[S].Lrpid,LrpidDesc:h[S].LrpDescr,Strtptatr:h[S].Strtptatr,Endptatr:h[S].Endptatr,Length:h[S].Length,LinUnit:h[S].LinUnit,LinUnitDesc:h[S].Uomtext,Startmrkr:h[S].Startmrkr,Endmrkr:h[S].Endmrkr,Mrkdisst:h[S].Mrkdisst,Mrkdisend:h[S].Mrkdisend,MrkrUnit:h[S].MrkrUnit,LamDer:h[S].LamDer};f.lam=T;break}}}if(r.FLAddr){if(r.FLAddr.results){var M=r.FLAddr.results;if(M){if(M.length>0){for(var b=0;b<M.length;b++){if(f.Functionallocation===M[b].Funcloc){var E=sap.ui.getCore().getModel("flocAddressView");var v=E.getData();var C=true;var x,V;if(v.length>0){for(var P=0;P<v.length;P++){if(f.Functionallocation===v[P].Functionallocation){C=false;V=P;break}}}if(C&&f.SupFunctionallocation!==""&&f.SupFunctionallocation!==undefined){x={Functionallocation:f.Functionallocation,IsEditable:M[b].IsEditable};v.push(x);E.setData(v)}if(!C&&f.SupFunctionallocation!==""&&f.SupFunctionallocation!==undefined){v[V].Functionallocation=f.Functionallocation;v[V].IsEditable=M[b].IsEditable;E.setData(v)}f.Title=M[b].Titletxt;f.TitleCode=M[b].Title;f.Name1=M[b].Name1;f.Name2=M[b].Name2;f.Name3=M[b].Name3;f.Name4=M[b].Name4;f.Sort1=M[b].Sort1;f.Sort2=M[b].Sort2;f.NameCo=M[b].NameCo;f.PostCod1=M[b].PostCod1;f.City1=M[b].City1;f.Building=M[b].Building;f.Floor=M[b].Floor;f.Roomnum=M[b].Roomnum;f.Street=M[b].Street;f.Strsuppl1=M[b].Strsuppl1;f.Strsuppl2=M[b].Strsuppl2;f.Strsuppl3=M[b].Strsuppl3;f.RefPosta=M[b].RPostafl;f.Landx=M[b].Landx;f.TimeZone=M[b].TimeZone;f.AddrLocation=M[b].Location;f.Region=M[b].RPostFl;f.RegionDesc=M[b].Regiotxt}}}else{f.Title=f.Title?f.Title:"";f.TitleCode=f.TitleCode?f.TitleCode:"";f.Name1=f.Name1?f.Name1:"";f.Name2=f.Name2?f.Name2:"";f.Name3=f.Name3?f.Name3:"";f.Name4=f.Name4?f.Name4:"";f.Sort1=f.Sort1?f.Sort1:"";f.Sort2=f.Sort2?f.Sort2:"";f.NameCo=f.NameCo?f.NameCo:"";f.PostCod1=f.PostCod1?f.PostCod1:"";f.City1=f.City1?f.City1:"";f.Building=f.Building?f.Building:"";f.Floor=f.Floor?f.Floor:"";f.Roomnum=f.Roomnum?f.Roomnum:"";f.Strsuppl1=f.Strsuppl1?f.Strsuppl1:"";f.Strsuppl2=f.Strsuppl2?f.Strsuppl2:"";f.Strsuppl3=f.Strsuppl3?f.Strsuppl3:"";f.AddrLocation=f.AddrLocation?f.AddrLocation:"";f.RefPosta=f.RefPosta?f.RefPosta:"";f.Landx=f.Landx?f.Landx:"";f.TimeZone=f.TimeZone?f.TimeZone:"";f.Region=f.Region?f.Region:"";f.RegionDesc=f.RegionDesc?f.RegionDesc:""}}}}var I=r.FLAddrI.results;if(I.length>0){for(var L=0;L<I.length;L++){if(I[L].Funcloc===f.Functionallocation){I[L].AdNationEnable=false;I[L].City1iVS="None";I[L].StreetiVS="None";f.intlAddr.push(I[L])}}}var y=r.FLALTLBEL.results;if(y.length>0){for(var D=0;D<y.length;D++){if(y[D].Funcloc===f.Functionallocation){var k={Funcloc:y[D].Funcloc,AltAlkey:y[D].AltAlkey,Altxt:y[D].Altxt,AltStrno:y[D].AltStrno,AltTplkz:y[D].AltTplkz,Tplxt:y[D].Tplxt,Name1i:y[D].Editm,Actvs:y[D].Actvs,AltPrkey:y[D].AltPrkey,AltReuse:y[D].AltReuse,enableLblSys:false,enableAltLbl:true,enableStrInd:true,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};f.altlbl.push(k)}}}if(r.FLClass){var F=r.FLClass.results;if(F){if(F.length>0){for(var A=0;A<F.length;A++){if(f.Functionallocation===F[A].Funcloc){F[A].ctEnable=false;F[A].classEnable=false;F[A].ClassTypeDesc=F[A].Artxt;delete F[A].Artxt;F[A].ClassDesc=F[A].Kltxt;delete F[A].Kltxt;delete F[A].Changerequestid;delete F[A].Clint;delete F[A].Service;f.classItems.push(F[A])}}if(f.Functionallocation===""){var w=[];f.classItems=f.classItems.filter(function(e){if(w.indexOf(e.Classtype+e.Class+e.Funcloc)===-1){w.push(e.Classtype+e.Class+e.Funcloc);return true}return false})}f.charNewButton=true;if(n.class&&n.class.getId().includes("detailFloc")===true){n.class.setModel(new t(f.classItems))}}}}if(r.FLVal){var q=r.FLVal.results;if(q){if(q.length>0){for(var b=0;b<q.length;b++){if(f.Functionallocation===q[b].Funcloc){q[b].cNameEnable=false;q[b].Textbz=q[b].Atwtb;delete q[b].Ataut;delete q[b].Ataw1;delete q[b].Atawe;delete q[b].Atcod;delete q[b].Atflb;delete q[b].Atflv;delete q[b].Atimb;delete q[b].Atsrt;delete q[b].Atvglart;delete q[b].Atzis;delete q[b].Changerequestid;delete q[b].CharName;delete q[b].Charid;delete q[b].Classtype;delete q[b].Service;delete q[b].Valcnt;q[b].slNo=b+1;q[b].flag=q[b].Class+"-"+q[b].slNo;f.characteristics.push(q[b])}}if(f.Functionallocation===""){var w=[];f.characteristics=f.characteristics.filter(function(e){if(w.indexOf(e.Class+e.Atnam+e.Atwrt)===-1){w.push(e.Class+e.Atnam+e.Atwrt);return true}return false})}for(var L=0;L<f.characteristics.length;L++){var W=1;for(var D=0;D<f.characteristics.length;D++){if(L===D){continue}if(f.characteristics[D].Atnam===f.characteristics[L].Atnam&&f.characteristics[D].Class===f.characteristics[L].Class){W++}}if(W>1){f.characteristics[L].charDltEnable=true}else{f.characteristics[L].charDltEnable=false}if(f.characteristics[L].Atein===true){f.characteristics[L].charAddEnable=false}}if(n.char&&n.char.getId().includes("detailFloc")===true){n.char.setModel(new t(f.characteristics))}}}}if(r.FLLAMCH){var B=r.FLLAMCH.results;if(B){if(B.length>0){for(var b=0;b<B.length;b++){if(f.Functionallocation===B[b].Funcloc){B[b].linCharEnable=true;f.linearChar.push(B[b])}}if(f.Functionallocation===""){var w=[];f.linearChar=f.linearChar.filter(function(e){if(w.indexOf(e.Charid+e.Atwrt)===-1){w.push(e.Charid+e.Atwrt);return true}return false})}}}}if(f.UstaEqui){d.visible=true}else{d.visible=false}i.setData(d);u.push(f)}c.setData(u);p.setData(u);sap.ui.getCore().getModel("dataOriginMOP").getData().FL.sort(function(e,t){var a=e.key;var r=t.key;if(a<r){return-1}if(a>r){return 1}return 0});for(var N=0;N<p.getData().length;N++){if(e===p.getData()[N].Functionallocation){var O=new t;var R=p.getProperty("/"+N);if(R.Title!==""&&R.Title!==undefined||R.TitleCode!==""&&R.TitleCode!==undefined||R.Name1!==""&&R.Name1!==undefined||R.Name2!==""&&R.Name2!==undefined||R.Name3!==""&&R.Name3!==undefined||R.Name4!==""&&R.Name4!==undefined||R.Sort1!==""&&R.Sort1!==undefined||R.Sort2!==""&&R.Sort2!==undefined||R.NameCo!==""&&R.NameCo!==undefined||R.PostCod1!==""&&R.PostCod1!==undefined||R.City1!==""&&R.City1!==undefined||R.Building!==""&&R.Building!==undefined||R.Floor!==""&&R.Floor!==undefined||R.Roomnum!==""&&R.Roomnum!==undefined||R.AddrLocation!==""&&R.AddrLocation!==undefined||R.Strsuppl1!==""&&R.Strsuppl1!==undefined||R.Strsuppl2!==""&&R.Strsuppl2!==undefined||R.Strsuppl3!==""&&R.Strsuppl3!==undefined||R.TimeZone!==""&&R.TimeZone!==undefined||R.RefPosta!==""&&R.RefPosta!==undefined||R.Region!==""&&R.Region!==undefined){R.RefPostaLblReq=true}O.setData(R);var U=[O.getData()];var z=$.map(U,function(e){return $.extend(true,{},e)});var K=sap.ui.getCore().getModel("SUP_FLOC_DATA");var H=K.getData();var G=true;for(var j=0;j<H.length;j++){if(R.Functionallocation===H[j].Functionallocation){G=false}}if(G&&R.SupFunctionallocation!==""&&R.SupFunctionallocation!==undefined){H.push(z[0]);K.setData(H)}d.tableBusy=false;i.setData(d);if(a!==undefined){var Q=[];sap.ui.getCore().getModel("dataOriginMOP").getData().FL.forEach(function(t){if(t.key===e){Q=t.DOI}});var _=r.FLDOI.results;for(var J=0;J<_.length;J++){_[J].instLoc=true;if(_[J].hasOwnProperty("maintenance")){if(!_[J].maintenance){_[J].targetVal=_[J].SupFlVal}}else{_[J].maintenance=Q[J].maintenance;if(_[J].maintenance){_[J].instLoc=false}else{_[J].instLoc=true}_[J].currentVal=Q[J].currentVal}if(_[J].Property==="Maintplant"||_[J].Property==="PlntFloc"){_[J].locEnable=false;_[J].maintEnable=false}else{_[J].locEnable=true;_[J].maintEnable=true}_[J].targetVal=_[J].SupFlVal}sap.ui.getCore().getModel("dataOriginMOP").getData().FL.forEach(function(t){if(t.key===e){t.DOI=_}})}break}}var Z=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var g=0;g<r.FuncLoc.results.length;g++){var m=r.FuncLoc.results[g];for(var L=0;L<Z.length;L++){if(m.Tplnr===Z[L].key){var X=Z[L].DOI;if(m.Swerki===""){X[0].maintenance=false;X[0].instLoc=false;X[0].SupFlVal="";X[0].currentVal="";X[0].targetVal=""}else if(m.Swerki==="D"){X[0].maintenance=true;X[0].instLoc=false;X[0].SupFlVal="";X[0].currentVal=m.Swerk;X[0].targetVal=m.Swerk}else{X[0].maintenance=false;X[0].instLoc=true;X[0].SupFlVal=m.Swerk;X[0].currentVal="";X[0].targetVal=m.Swerk}if(m.Storti===""){X[1].maintenance=false;X[1].instLoc=false;X[1].SupFlVal="";X[1].currentVal="";X[1].targetVal=""}else if(m.Storti==="D"){X[1].maintenance=true;X[1].instLoc=false;X[1].SupFlVal="";X[1].currentVal=m.StorFloc;X[1].targetVal=m.StorFloc}else{X[1].maintenance=false;X[1].instLoc=true;X[1].SupFlVal=m.StorFloc;X[1].currentVal="";X[1].targetVal=m.StorFloc}if(m.Beberi===""){X[2].maintenance=false;X[2].instLoc=false;X[2].SupFlVal="";X[2].currentVal="";X[2].targetVal=""}else if(m.Beberi==="D"){X[2].maintenance=true;X[2].instLoc=false;X[2].SupFlVal="";X[2].currentVal=m.BeberFl;X[2].targetVal=m.BeberFl}else{X[2].maintenance=false;X[2].instLoc=true;X[2].SupFlVal=m.BeberFl;X[2].currentVal="";X[2].targetVal=m.BeberFl}if(m.Ppsidi===""){X[3].maintenance=false;X[3].instLoc=false;X[3].SupFlVal="";X[3].currentVal="";X[3].targetVal=""}else if(m.Ppsidi==="D"){X[3].maintenance=true;X[3].instLoc=false;X[3].SupFlVal="";X[3].currentVal=m.Arbplfloc;X[3].targetVal=m.Arbplfloc}else{X[3].maintenance=false;X[3].instLoc=true;X[3].SupFlVal=m.Arbplfloc;X[3].currentVal="";X[3].targetVal=m.Arbplfloc}if(m.Abckzi===""){X[4].maintenance=false;X[4].instLoc=false;X[4].SupFlVal="";X[4].currentVal="";X[4].targetVal=""}else if(m.Abckzi==="D"){X[4].maintenance=true;X[4].instLoc=false;X[4].SupFlVal="";X[4].currentVal=m.Abckzfloc;X[4].targetVal=m.Abckzfloc}else{X[4].maintenance=false;X[4].instLoc=true;X[4].SupFlVal=m.Abckzfloc;X[4].currentVal="";X[4].targetVal=m.Abckzfloc}if(m.Bukrsi===""){X[5].maintenance=false;X[5].instLoc=false;X[5].SupFlVal="";X[5].currentVal="";X[5].targetVal=""}else if(m.Bukrsi==="D"){X[5].maintenance=true;X[5].instLoc=false;X[5].SupFlVal="";X[5].currentVal=m.Bukrsfloc;X[5].targetVal=m.Bukrsfloc}else{X[5].maintenance=false;X[5].instLoc=true;X[5].SupFlVal=m.Bukrsfloc;X[5].currentVal="";X[5].targetVal=m.Bukrsfloc}if(m.Kostli===""){X[6].maintenance=false;X[6].instLoc=false;X[6].SupFlVal="";X[6].currentVal="";X[6].targetVal=""}else if(m.Kostli==="D"){X[6].maintenance=true;X[6].instLoc=false;X[6].SupFlVal="";X[6].currentVal=m.KostFloc;X[6].targetVal=m.KostFloc}else{X[6].maintenance=false;X[6].instLoc=true;X[6].SupFlVal=m.KostFloc;X[6].currentVal="";X[6].targetVal=m.KostFloc}if(m.Kokrsi===""){X[7].maintenance=false;X[7].instLoc=false;X[7].SupFlVal="";X[7].currentVal="";X[7].targetVal=""}else if(m.Kokrsi==="D"){X[7].maintenance=true;X[7].instLoc=false;X[7].SupFlVal="";X[7].currentVal=m.KokrFloc;X[7].targetVal=m.KokrFloc}else{X[7].maintenance=false;X[7].instLoc=true;X[7].SupFlVal=m.KokrFloc;X[7].currentVal="";X[7].targetVal=m.KokrFloc}if(m.Iwerki===""){X[8].maintenance=false;X[8].instLoc=false;X[8].SupFlVal="";X[8].currentVal="";X[8].targetVal=""}else if(m.Iwerki==="D"){X[8].maintenance=true;X[8].instLoc=false;X[8].SupFlVal="";X[8].currentVal=m.PlntFloc;X[8].targetVal=m.PlntFloc}else{X[8].maintenance=false;X[8].instLoc=true;X[8].SupFlVal=m.PlntFloc;X[8].currentVal="";X[8].targetVal=m.PlntFloc}if(m.Ingrpi===""){X[9].maintenance=false;X[9].instLoc=false;X[9].SupFlVal="";X[9].currentVal="";X[9].targetVal=""}else if(m.Ingrpi==="D"){X[9].maintenance=true;X[9].instLoc=false;X[9].SupFlVal="";X[9].currentVal=m.Ingrp;X[9].targetVal=m.Ingrp}else{X[9].maintenance=false;X[9].instLoc=true;X[9].SupFlVal=m.Ingrp;X[9].currentVal="";X[9].targetVal=m.Ingrp}if(m.Lgwidi===""){X[10].maintenance=false;X[10].instLoc=false;X[10].SupFlVal="";X[10].currentVal="";X[10].targetVal=""}else if(m.Lgwidi==="D"){X[10].maintenance=true;X[10].instLoc=false;X[10].SupFlVal="";X[10].currentVal=m.Gewrkfloc;X[10].targetVal=m.Gewrkfloc}else{X[10].maintenance=false;X[10].instLoc=true;X[10].SupFlVal=m.Gewrkfloc;X[10].currentVal="";X[10].targetVal=m.Gewrkfloc}if(m.Adrnri===""){X[12].maintenance=false;X[12].instLoc=false;X[12].SupFlVal="";X[12].currentVal="";X[12].targetVal=""}else if(m.Adrnri==="D"){X[12].maintenance=true;X[12].instLoc=false;X[12].SupFlVal="";X[12].currentVal=m.Adrnr;X[12].targetVal=m.Adrnr}else{X[12].maintenance=false;X[12].instLoc=true;X[12].SupFlVal=m.Adrnr;X[12].currentVal="";X[12].targetVal=m.Adrnr}}}}}}i.setData(d)};var B=function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=t.join("\n");d.tableBusy=false;i.setData(d);n.invokeMessage(r)};d.tableBusy=true;i.setData(d);if(g.FLAddrI.length>0){g.FLAddrI=$.map(g.FLAddrI,function(e){return $.extend(true,{},e)});for(var N=0;N<g.FLAddrI.length>0;N++){delete g.FLAddrI[N].AdNationEnable;delete g.FLAddrI[N].City1iVS;delete g.FLAddrI[N].StreetiVS}}o.create(s,g,{success:W,error:B})},equipmentChangeBom:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();if(this.action==="createEbom"){var s=e.getSource().getBindingContext("AIWListEqModel").getPath();this.sindex=parseInt(s.split("/")[1])}if(this.action==="copyEbom"||this.action==="copyMtoEbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var o=sap.ui.getCore().getModel("AIWEQUI").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(a===o[i].Equnr){if(t.action==="createEbom"){n[t.sindex].Eqnrbom=o[i].Equnr;n[t.sindex].EquiDesc=o[i].Eqktx;n[t.sindex].equipValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Eqnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){var d=t._copyFragment.getModel("copyModel");var c=d.getData();var p=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(p==="/copyEquipmentSource"){c.copyEquipmentSource=o[i].Equnr;c.copyEquipmentSourceDesc=o[i].Eqktx}else if(p==="/copyEquipmentTarget"){c.copyEquipmentTarget=o[i].Equnr;c.copyEquipmentTargetDesc=o[i].Eqktx}d.setData(c);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}return}}}var u=a.toUpperCase();var g=[new sap.ui.model.Filter("Equnr","EQ",u)];r.read("/EquipmentNumberSet",{filters:g,success:function(e){if(e.results.length>0){if(t.action==="createEbom"){n[t.sindex].Eqnrbom=e.results[0].Equnr;n[t.sindex].EquiDesc=e.results[0].Eqktx;n[t.sindex].equipValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Eqnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var s=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(s==="/copyEquipmentSource"){r.copyEquipmentSource=e.results[0].Equnr;r.copyEquipmentSourceDesc=e.results[0].Eqktx}else if(s==="/copyEquipmentTarget"){r.copyEquipmentTarget=e.results[0].Equnr;r.copyEquipmentTargetDesc=e.results[0].Eqktx}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},equipmentChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Equnr;if(l===""||l===undefined){r.Equnr=""}e.getSource().setValueState("None")},onEquipmentChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Equnr;var n;if(l===""||l===undefined){r.Equnr=""}else{r.Equnr=l.toUpperCase();var s=0;var o=sap.ui.getCore().getModel("AIWEQUI").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(o[i].Equnr===l){n=o[i].Eqktx;s++;break}}}if(s>1){r[i].EqunrVS="Error";var d="Key "+l+" for Equipment already exists";g.createMessagePopover([{title:d,type:"Error"}],false);g.getModel(t).refresh()}else{this._Equiment(r,t,a)}}},_Equiment:function(e,t,a){var r=this;var l=e.Equnr;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/EquipmentNumberSet";var o=[new sap.ui.model.Filter("Equnr","EQ",l)];var i=this.getView().getModel("valueHelp");var d=function(l){if(l.results.length<=0){r.Equnr=n;e.Equnr=n;e.EqunrVS="None";sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).key=e.Equnr;sap.ui.getCore().getModel("equiAddressView").getProperty(a).Equnr=e.Equnr}else{if(t.indexOf("MSPT")>-1){e.Equnr=n;e.EqunrVS="None";r.getModel(t).refresh();r.fetchData();return}e.EqunrVS="Error";var s="Key "+l.results[0].Equnr+" for Equipment already exists";r.createMessagePopover([{title:s,type:"Error"}],false)}r.getModel(t).refresh()};var c=function(a){var l=JSON.parse(a.responseText);var n=l.error.message.value;e.EqunrVS="Error";e.EqunrVST=n;r.getModel(t).refresh()};r._readData(s,i,d,c,o)}else{e.Equnr=r.Equnr;r.getModel(t).refresh()}},onEquiVH:function(e){var t=this;var a;if(a===undefined){var r=t.getFragmentModelName(e);var l=e.getSource();var n=t.getView().getModel(r);var s;var o=new sap.m.SelectDialog({title:t.getView().getModel("i18n").getProperty("EQUIP_TXT"),noDataText:t.getView().getModel("i18n").getProperty("LOAD")+"...",growingThreshold:5e3,items:{path:"/EquipmentNumberSet",template:new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}"})},confirm:function(e){var a=l.getBindingContext(r).getPath();s=n.getProperty(a);l.setValue(e.getParameters().selectedItem.getProperty("title"));s.Eqktx=e.getParameters().selectedItem.getProperty("description");l.setValueState("None");l.setValueStateText("");n.setProperty(a,s);t.fetchData()},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Equnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Eqktx",sap.ui.model.FilterOperator.Contains,t)],false)])}});var i="/EquipmentNumberSet";var d=t.getView().getModel("valueHelp");var c=function(e){if(e.results.length>0){if(r===t.oModelAIWMSPT){var l=t.getView().getModel("AIWEQUI").getData();if(l.length>0){for(var n=0;n<l.length;n++){if(l[n].Equnr){var s={Equnr:l[n].Equnr,Eqktx:l[n].Eqktx};e.results.unshift(s)}}}}a=e;var i=new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}",active:true});var d=new sap.ui.model.json.JSONModel;d.setData(e);o.setModel(d);o.bindAggregation("items","/results",i)}else{o.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}};var p=function(){};t._readData(i,d,c,p)}else{var u=new sap.ui.model.json.JSONModel;u.setData(a);o.setModel(u);var g=o.getItems();for(var m=0;m<g.length;m++){g[m].setVisible(true)}}o.open()},equipCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.EquipmentCatogory;if(l===""||l===undefined){r.EquipmentCatogory="";r.EquipCatgDescription=""}e.getSource().setValueState("None")},onEquipCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.EquipmentCatogory;if(l===""||l===undefined){r.EquipmentCatogory="";r.EquipCatgDescription="";r.UstaEqui="";r.StsmEqui="";r.StsmEquiDesc="";r.UstwEqui="";r.UswoEqui=""}else{r.EquipmentCatogory=l.toUpperCase();this._equipmentCategory(r,a,t)}},_equipmentCategory:function(e,t,a){var r=this;var l=e.EquipmentCatogory;var n=l.replace(/^[ ]+|[ ]+$/g,"");var s=sap.ui.getCore().getModel("PRTVisibleEnableModel");var o=s.getData();if(n!==""){var i="/EquipCatgValueHelps";var d=[new sap.ui.model.Filter("EquipmentCatogory","EQ",l)];var c=r.getView().getModel("valueHelp");var p=function(s){if(s.results.length>0){e.EquipmentCatogory=n;e.EquipCatgDescription=s.results[0].EquipCatgDescription;r.EquipmentCatogory=n;if(e.EquipmentCatogory==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}r.readStatusProf(l,t,a);var o=s.results[0].Fhmkz;if(o){e.Fhmkz=true}else{e.Fhmkz=false;e.PlanvPrt="";e.SteufPrt="";e.KtschPrt="";e.Ewformprt="";e.SteufRef=false;e.KtschRef=false;e.EwformRef=false}r.getModel(a).refresh()}else{e.EquipmentCatogoryVS="Error";e.EquipmentCatogoryVST="Invaid Entry";r.getModel(a).refresh()}};var u=function(t){var l=JSON.parse(t.responseText);var n=l.error.message.value;e.EquipmentCatogoryVS="Error";e.EquipmentCatogoryVST=n;r.getModel(a).refresh()};r._readData(i,c,p,u,d)}else{e.EquipmentCatogory=r.EquipmentCatogory;r.getModel(a).refresh()}},onEquipCatVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);this.equipCatVH(r,a,t)},equipCatVH:function(e,t,a){var r=this;var l=sap.ui.getCore().getModel("PRTVisibleEnableModel");var n=l.getData();var s={title:this.getView().getModel("i18n").getProperty("xtxt.EQUIP_CAT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/EquipCatgValueHelps",template:new sap.m.StandardListItem({title:"{EquipmentCatogory}",description:"{EquipCatgDescription}"})},confirm:function(l){e.EquipmentCatogoryVS="None";e.EquipmentCatogoryVST="";e.EquipmentCatogory=l.getParameters().selectedItem.getProperty("title");e.EquipCatgDescription=l.getParameters().selectedItem.getProperty("description");if(e.EquipmentCatogory==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}var n=l.getParameter("selectedItem").getBindingContext().sPath;n=n+"/Fhmkz";var s=l.getParameter("selectedItem").getModel().getProperty(n);if(s){e.Fhmkz=true}else{e.Fhmkz=false;e.PlanvPrt="";e.SteufPrt="";e.KtschPrt="";e.Ewformprt="";e.SteufRef=false;e.KtschRef=false;e.EwformRef=false}r.getModel(a).refresh();r.readStatusProf(e.EquipmentCatogory,t,a)}};var o="/EquipCatgValueHelps";var i=this.getView().getModel("valueHelp");var d=c.getSelectDialog(i,o,[],s,"EquipmentCatogory","EquipCatgDescription");d.open()},readStatusProf:function(e,t,a){var r=this;var l=r.getModel(a).getProperty(t);var n;if(a===r.oModelAIWEQUI){n="/DeriveSTProfileSet(Eqtyp='"+e+"',Lvorm=false,Deact="+l.Deact+",Fltyp='')"}if(a===r.oModelAIWFLOC){n="/DeriveSTProfileSet(Eqtyp='',Deact="+l.Deact+",Fltyp='"+e+"',Lvorm=false)"}var s=r.getView().getModel();var o=r.getView().getModel("mainView");var i=o.getData();i.tableBusy=true;o.setData(i);var d=function(e){if(e.DescStsma!==""&&(e.Dscstatwithnum!==""||e.Dscstatwoutnum!=="")){l.UstaEqui=e.JTxt30;l.StsmEqui=e.Stsma;l.StsmEquiDesc=e.DescStsma;l.UstwEqui=e.Dscstatwithnum;l.UswoEqui=e.Dscstatwoutnum;r.userWithSts=e.Dscstatwithnum;r.userWithoutSts=e.Dscstatwoutnum;i.visible=true}else{l.StsmEqui="";l.StsmEquiDesc="";l.UstwEqui="";l.UswoEqui="";l.UstaEqui="";i.visible=false}i.tableBusy=false;o.setData(i);r.getModel(a).refresh()};var c=function(){i.tableBusy=false;o.setData(i)};r._readData(n,s,d,c)},maintPlantChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Maintplant;if(l===""||l===undefined){r.Maintplant="";r.MaintplantDesc="";r.BukrsEnabled=true;var n=[];if(t==="AIWEQUI"){n=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).DOI;var s=e.getSource().getName();n.forEach(function(e){if(e.property===s){e.maintenance=true;e.currentVal=""}if(e.property==="PplaEeqz"){e.maintenance=true;e.currentVal=""}})}if(t==="AIWFLOC"){sap.ui.getCore().getModel("dataOriginMOP").getData().FL.forEach(function(e){if(e.key=r.Functionallocation){n=e.DOI}});var s=e.getSource().getName();n.forEach(function(e){if(e.property===s){e.maintenance=true;e.currentVal=""}if(e.property==="PlntFloc"){e.maintenance=true;e.currentVal=""}})}}e.getSource().setValueState("None")},onMaintPlantChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Maintplant;if(l===""||l===undefined){r.Maintplant="";r.MaintplantDesc="";r.BukrsEnabled=true}else{r.Maintplant=l.toUpperCase();this._maintenancePlant(r,a,t,e.getSource())}},_maintenancePlant:function(e,t,a,r){var l=this;var n=e.Maintplant;var s=n.replace(/^[ ]+|[ ]+$/g,"");var o=[];if(a==="AIWEQUI"){o=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+t).DOI}var i=r.getName();if(s!==""){var d="/MaintPlantVHSet";var c=[new sap.ui.model.Filter("Werks","EQ",n)];var p=l.getView().getModel("valueHelp");var u=function(t){if(t.results.length>0){e.MaintplantDesc=t.results[0].Name1;e.Bukrs=t.results[0].Bukrs;e.Butxt=t.results[0].Butxt;e.Werks=t.results[0].IWerk;e.Planningplantdes=t.results[0].IName1;e.Kokrs=s;e.BukrsEnabled=false;e.Maintplant=s;l.Maintplant=s;if(a===l.oModelAIWFLOC){e.City=t.results[0].City1}l.getModel(a).refresh();o.forEach(function(t){if(t.property===i){t.maintenance=true;t.currentVal=s}if(t.property==="PplaEeqz"){t.maintenance=true;t.currentVal=e.Werks}});l.BusyDialog.close()}else{e.MaintplantVS="Error";e.MaintplantVST="Invalid Entry";e.Maintplant="";e.MaintplantDesc="";l.getModel(a).refresh()}};var g=function(t){l.BusyDialog.close();var r=JSON.parse(t.responseText);var n=r.error.message.value;e.MaintplantVS="Error";e.MaintplantVST=n;l.getModel(a).refresh()};l.BusyDialog.open();l._readData(d,p,u,g,c)}else{e.Maintplant=l.Maintplant;l.getModel(a).refresh()}},onMaintPlantVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);this.maintPlantVH(r,a,t,e.getSource())},maintPlantVH:function(e,t,r,l){var n=this;var s=[];if(r==="AIWEQUI"){s=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+t).DOI}var o=l.getName();var i={title:this.getView().getModel("i18n").getProperty("MAINT_PLANT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>PLANT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SEARCHTERM2}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SEARCHTERM1}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>POST_CODE}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>CITY}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>Name2}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>Name1}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>ADDR_VERSION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>COMPCODE}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>COMPCODE_DESC}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>PL_PLANT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>PLPLANT_DESC}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",visible:false,header:[new sap.m.Text({text:"{i18n>CC_PLANT}"})]})],items:{path:"/MaintPlantVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Sort2}"}),new sap.m.Text({text:"{Sort1}"}),new sap.m.Text({text:"{PostCode1}"}),new sap.m.Text({text:"{City1}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name1}"}),new sap.m.Text({text:"{Nation}"}),new sap.m.Text({text:"{Bukrs}"}),new sap.m.Text({text:"{Butxt}"}),new sap.m.Text({text:"{IWerk}"}),new sap.m.Text({text:"{IName1}"}),new sap.m.Text({text:"{Kokrs}"})]})},confirm:function(t){e.MaintplantVS="None";e.MaintplantVST="";e.Maintplant=t.getParameter("selectedItem").getCells()[0].getText();e.MaintplantDesc=t.getParameter("selectedItem").getCells()[6].getText();e.Bukrs=t.getParameter("selectedItem").getCells()[8].getText();e.Butxt=t.getParameter("selectedItem").getCells()[9].getText();e.Werks=t.getParameter("selectedItem").getCells()[10].getText();e.Planningplantdes=t.getParameter("selectedItem").getCells()[11].getText();e.Kokrs=t.getParameter("selectedItem").getCells()[0].getText();e.BukrsEnabled=false;if(r===n.oModelAIWFLOC){e.City=t.getParameter("selectedItem").getCells()[4].getText()}n.getModel(r).refresh();s.forEach(function(e){if(e.property===o){e.maintenance=true;e.currentVal=a}if(e.property==="PplaEeqz"){e.maintenance=true;e.currentVal=f.Werks}})}};var d="/MaintPlantVHSet";var p=[];var u=n.getView().getModel("valueHelp");var g=[new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Sort2}"}),new sap.m.Text({text:"{Sort1}"}),new sap.m.Text({text:"{PostCode1}"}),new sap.m.Text({text:"{City1}"}),new sap.m.Text({text:"{Name2}"}),new sap.m.Text({text:"{Name1}"}),new sap.m.Text({text:"{Nation}"}),new sap.m.Text({text:"{Bukrs}"}),new sap.m.Text({text:"{Butxt}"}),new sap.m.Text({text:"{IWerk}"}),new sap.m.Text({text:"{IName1}"}),new sap.m.Text({text:"{Kokrs}"})];var m=c.getValueHelp(u,d,g,p,i,"Werks","Name1");m.open();m.setModel(this.getView().getModel("i18n"),"i18n")},flocChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);if(t===this.oModelAIWEQUI){this.EquiTplnr=r.Tplnr;e.getSource().setValueState("None")}if(t===this.oModelAIWMSPT){var l=r.Tplnr;if(l===""||l===undefined){r.Tplnr="";r.Pltxt=""}e.getSource().setValueState("None")}},onFlocChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Tplnr;if(l===""||l===undefined){if(t==="AIWEQUI"){r.SuperordinateEquip="";r.SuperordinateEquipDesc="";r.SuperordinateEquipEnabled=true;r.Stattext="AVLB";r.Location="";r.Locationdesc="";r.Abckz="";r.Abctx="";r.BeberFl="";r.Fing="";r.Tele="";r.Kostl="";r.Kokrs="";r.Ingrp="";r.Innam="";r.MainArbpl="";r.MainWerks="";r.MainKtext="";r.MainKtext="";r.MainKtext="";r.MaintplantEnabled=true;r.Tplnr="";r.Pltxt="";var n=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).DOI;n.forEach(function(e){if(e.maintenance===false){e.instLoc=false;e.SupFlVal=""}});if(sap.ui.getCore().getModel("SUP_EQUI_DATA")){var s=sap.ui.getCore().getModel("SUP_EQUI_DATA");var o=s.getData();var i;if(o.length>0){for(var d=0;d<o.length;d++){if(this.EquiTplnr===o[d].Tplnr){i=d;break}}}var c=sap.ui.getCore().getModel("SUP_EQUI_DATA").getData()[i];if(c){r.BeberFl=r.BeberFl===c.BeberFl?"":r.BeberFl;r.Fing=r.Fing===c.Fing?"":r.Fing;r.Tele=r.Tele===c.Tele?"":r.Tele;r.Location=r.Location===c.Location?"":r.Location;r.Locationdesc=r.Locationdesc===c.Locationdesc?"":r.Locationdesc;r.Arbpl=r.Arbpl===c.Arbpl?"":r.Arbpl;r.Ktext=r.Ktext===c.Ktext?"":r.Ktext;r.WcWerks=r.WcWerks===c.WcWerks?"":r.WcWerks;r.Abckz=r.Abckz===c.Abckz?"":r.Abckz;r.Abctx=r.Abctx===c.Abctx?"":r.Abctx;r.MainArbpl=r.MainArbpl===c.MainArbpl?"":r.MainArbpl;r.MainKtext=r.MainKtext===c.MainKtext?"":r.MainKtext;r.MainWerks=r.MainWerks===c.MainWerks?"":r.MainWerks;r.Kostl=r.Kostl===c.Kostl?"":r.Kostl;r.Mctxt=r.Mctxt===c.Mctxt?"":r.Mctxt;r.Ingrp=r.Ingrp===c.Ingrp?"":r.Ingrp;r.Innam=r.Innam===c.Innam?"":r.Innam;if(r.Maintplant!==""){r.SuperordinateEquipEnabled=true;r.MaintplantEnabled=true;r.BukrsEnabled=false;r.Bukrs=r.Bukrs;r.Butxt=r.Butxt;r.Kokrs=r.Kokrs;r.Werks=r.Werks;r.Planningplantdes=r.Planningplantdes}else{r.BukrsEnabled=true;r.Bukrs=r.Bukrs===c.Bukrs?"":r.Bukrs;r.Butxt=r.Butxt===c.Butxt?"":r.Butxt;r.Kokrs=r.Kokrs===c.Kokrs?"":r.Kokrs;r.Werks=r.Werks===c.Werks?"":r.Werks;r.Planningplantdes=r.Planningplantdes===c.Planningplantdes?"":r.Planningplantdes}r.Title="";r.TitleCode="";r.Name1="";r.Name2="";r.Name3="";r.Name4="";r.Sort1="";r.Sort2="";r.NameCo="";r.PostCod1="";r.City1="";r.Building="";r.Floor="";r.Roomnum="";r.Strsuppl1="";r.Strsuppl2="";r.Strsuppl3="";r.AddrLocation="";r.RefPosta="";r.Landx="";r.TimeZone="";r.Region="";r.RegionDesc="";r.RefPostaLblReq=false;var p=sap.ui.getCore().getModel("equiAddressView");var u=p.getData();for(var g=0;g<u.length;g++){if(r.Tplnr===u[g].Tplnr){u.splice(g,1);p.setData(u);break}}o.splice(i,1);s.setData(o)}}}r.Tplnr="";r.Pltxt="";r.Stattext="AVLB"}else{r.Tplnr=l.toUpperCase();var m=false;var f=sap.ui.getCore().getModel("AIWFLOC");var h=f.getData();for(var S=0;S<h.length;S++){if(r.Tplnr===h[S].Functionallocation){r.Pltxt=h[S].Flocdescription;m=true;break}}if(m){sap.ui.getCore().getModel(t).setProperty(a,r);this.currentEquipment=r.Equnr;this.fetchData(t,a,r)}else{this._functionalLocation(r,a,t)}}},_functionalLocation:function(e,t,a){var r=this;var l=e.Tplnr;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/FunctionLocationSet";var o=[new sap.ui.model.Filter("Tplnr","EQ",l)];var i=r.getView().getModel("valueHelp");r.BusyDialog.open();var d=function(l){r.BusyDialog.close();if(l.results.length>0){e.Pltxt=l.results[0].Pltxt;e.Tplnr=n;r.Tplnr=n;r.getModel(a).refresh();if(a===r.oModelAIWEQUI){r.currentEquipment=e.Equnr;r.fetchData(a,t,e)}if(a==="AIWMSPT"){r.fetchData()}}else{e.Pltxt="";e.TplnrVS="Error";e.TplnrVST="Invalid Entry";r.getModel(a).refresh()}};var c=function(t){r.BusyDialog.close();var l=JSON.parse(t.responseText);var n=l.error.message.value;e.TplnrVS="Error";e.TplnrVST=n;r.getModel(a).refresh()};r._readData(s,i,d,c,o)}else{e.Tplnr=r.Tplnr;r.getModel(a).refresh()}},onFlocVH:function(e){var t=this;var a;if(a===undefined){var r=t.getFragmentModelName(e);var l=e.getSource();var n=t.getView().getModel(r);var s=sap.ui.getCore().getModel(r);var o;var i=new sap.m.SelectDialog({title:t.getView().getModel("i18n").getProperty("FLOC_TXT"),noDataText:t.getView().getModel("i18n").getProperty("LOAD")+"...",growingThreshold:5e3,items:{path:"/FunctionLocationSet",template:new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}"})},confirm:function(e){var a=l.getBindingContext(r).getPath();o=n.getProperty(a);l.setValue(e.getParameters().selectedItem.getProperty("title"));o.Pltxt=e.getParameters().selectedItem.getProperty("description");l.setValueState("None");l.setValueStateText("");n.setProperty(a,o);s.setProperty(a,o);if(r==="AIWEQUI"){t.currentEquipment=o.Equnr;t.fetchData(r,a,o);return}t.fetchData()},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Tplnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Pltxt",sap.ui.model.FilterOperator.Contains,t)],false)])}});var d="/FunctionLocationSet";var c=t.getView().getModel("valueHelp");var p=function(e){if(e.results.length>0){var r=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();if(r.length>0){for(var l=0;l<r.length;l++){if(r[l].Functionallocation){var n={Tplnr:r[l].Functionallocation,Pltxt:r[l].Flocdescription};e.results.unshift(n)}}}a=e;var s=new sap.m.StandardListItem({title:"{Tplnr}",description:"{Pltxt}",active:true});var o=new sap.ui.model.json.JSONModel;o.setData(e);i.setModel(o);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}};var u=function(){};t._readData(d,c,p,u)}else{var g=new sap.ui.model.json.JSONModel;g.setData(a);i.setModel(g);var m=i.getItems();for(var f=0;f<m.length;f++){m[f].setVisible(true)}}i.open()},superOrdEqChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.SuperordinateEquip;if(l===""||l===undefined){r.SuperordinateEquip="";r.SuperordinateEquipDesc="";this.readSystemStatus(a,t)}e.getSource().setValueState("None")},onSuperOrdEqChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.SuperordinateEquip;if(l===""||l===undefined){if(sap.ui.getCore().getModel("SUP_EQUI_DATA")){var n=sap.ui.getCore().getModel("SUP_EQUI_DATA");var s=n.getData();var o;if(s.length>0){for(var i=0;i<s.length;i++){if(r.Equnr===s[i].Equnr){o=i;break}}}var d=sap.ui.getCore().getModel("SUP_EQUI_DATA").getData()[o];if(d){r.Tplnr=r.Tplnr===d.Tplnr?"":r.Tplnr;r.Pltxt=r.Pltxt===d.Pltxt?"":r.Pltxt;r.BeberFl=r.BeberFl===d.BeberFl?"":r.BeberFl;r.Fing=r.Fing===d.Fing?"":r.Fing;r.Tele=r.Tele===d.Tele?"":r.Tele;r.Location=r.Location===d.Location?"":r.Location;r.Locationdesc=r.Locationdesc===d.Locationdesc?"":r.Locationdesc;r.Arbpl=r.Arbpl===d.Arbpl?"":r.Arbpl;r.Ktext=r.Ktext===d.Ktext?"":r.Ktext;r.WcWerks=r.WcWerks===d.WcWerks?"":r.WcWerks;r.Abckz=r.Abckz===d.Abckz?"":r.Abckz;r.Abctx=r.Abctx===d.Abctx?"":r.Abctx;r.MainArbpl=r.MainArbpl===d.MainArbpl?"":r.MainArbpl;r.MainKtext=r.MainKtext===d.MainKtext?"":r.MainKtext;r.MainWerks=r.MainWerks===d.MainWerks?"":r.MainWerks;r.Kostl=r.Kostl===d.Kostl?"":r.Kostl;r.Mctxt=r.Mctxt===d.Mctxt?"":r.Mctxt;r.Ingrp=r.Ingrp===d.Ingrp?"":r.Ingrp;r.Innam=r.Innam===d.Innam?"":r.Innam;if(r.Maintplant!==""){r.TplnrEnabled=true;r.MaintplantEnabled=true;r.BukrsEnabled=false;r.Bukrs=r.Bukrs;r.Butxt=r.Butxt;r.Kokrs=r.Kokrs;r.Werks=r.Werks;r.Planningplantdes=r.Planningplantdes}else{r.BukrsEnabled=true;r.Bukrs=r.Bukrs===d.Bukrs?"":r.Bukrs;r.Butxt=r.Butxt===d.Butxt?"":r.Butxt;r.Kokrs=r.Kokrs===d.Kokrs?"":r.Kokrs;r.Werks=r.Werks===d.Werks?"":r.Werks;r.Planningplantdes=r.Planningplantdes===d.Planningplantdes?"":r.Planningplantdes}r.Title="";r.TitleCode="";r.Name1="";r.Name2="";r.Name3="";r.Name4="";r.Sort1="";r.Sort2="";r.NameCo="";r.PostCod1="";r.City1="";r.Building="";r.Floor="";r.Roomnum="";r.Strsuppl1="";r.Strsuppl2="";r.Strsuppl3="";r.AddrLocation="";r.RefPosta="";r.Landx="";r.TimeZone="";r.Region="";r.RegionDesc="";r.RefPostaLblReq=false;var c=sap.ui.getCore().getModel("equiAddressView");var p=c.getData();for(var u=0;u<p.length;u++){if(r.Equnr===p[u].Equnr){p.splice(u,1);c.setData(p);break}}s.splice(o,1);n.setData(s)}}r.SuperordinateEquip="";r.SuperordinateEquipDesc="";r.Stattext="AVLB";r.Location="";r.Locationdesc="";r.Abckz="";r.Abctx="";r.BeberFl="";r.Fing="";r.Tele="";r.Kostl="";r.Kokrs="";r.Ingrp="";r.Innam="";r.MainArbpl="";r.MainWerks="";r.MainKtext="";r.MainKtext="";r.MainKtext="";r.MaintplantEnabled=true;r.Tplnr="";r.Pltxt="";var g=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).DOI;g.forEach(function(e){if(e.maintenance===false){e.instLoc=false;e.SupFlVal=""}})}else{r.SuperordinateEquip=l.toUpperCase();var m=false;var f=sap.ui.getCore().getModel(t);var h=f.getData();for(var S=0;S<h.length;S++){if(r.SuperordinateEquip===h[S].Equnr){r.SuperordinateEquipDesc=h[S].Eqktx;m=true;break}}if(m){f.setProperty(a,r);this.currentEquipment=r.Equnr;this.fetchData(t,a,r)}else{this._superOrdEqui(r,a,t)}}},_superOrdEqui:function(e,t,a){var r=this;var l=e.SuperordinateEquip;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/EquipmentNumberSet";var o=[new sap.ui.model.Filter("Equnr","EQ",l)];var i=r.getView().getModel("valueHelp");r.BusyDialog.open();var d=function(l){r.BusyDialog.close();if(l.results.length>0){r.currentEquipment=e.Equnr;e.SuperordinateEquipDesc=l.results[0].Eqktx;e.SuperordinateEquip=n;r.SuperordinateEquip=n;r.fetchData(a,t,e)}else{e.SuperordinateEquipDesc="";e.SuperordinateEquipVS="Error";e.SuperordinateEquipVST="Invalid Entry";r.getModel(a).refresh()}};var c=function(t){r.BusyDialog.close();var l=JSON.parse(t.responseText);var n=l.error.message.value;e.SuperordinateEquipVS="Error";e.SuperordinateEquipVST=n;r.getModel(a).refresh()};r._readData(s,i,d,c,o)}else{e.SuperordinateEquip=r.SuperordinateEquip;r.getModel(a).refresh()}},onSuperOrdEqVH:function(e){var t=this;var a;if(a===undefined){var r=t.getFragmentModelName(e);var l=e.getSource();var n=t.getView().getModel(r);var s=sap.ui.getCore().getModel(r);var o;var i=new sap.m.SelectDialog({title:t.getView().getModel("i18n").getProperty("EQUIP_TXT"),noDataText:t.getView().getModel("i18n").getProperty("LOAD")+"...",growingThreshold:5e3,items:{path:"/EquipmentNumberSet",template:new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}"})},confirm:function(e){var a=l.getBindingContext(r).getPath();o=n.getProperty(a);l.setValue(e.getParameters().selectedItem.getProperty("title"));o.SuperordinateEquipDesc=e.getParameters().selectedItem.getProperty("description");l.setValueState("None");l.setValueStateText("");n.setProperty(a,o);s.setProperty(a,o);t.currentSuperiorEqui=o.Equnr;t.fetchData()},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Equnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Eqktx",sap.ui.model.FilterOperator.Contains,t)],false)])}});var d="/EquipmentNumberSet";var c=t.getView().getModel("valueHelp");var p=function(e){if(e.results.length>0){var r=t.getView().getModel("AIWEQUI").getData();if(r.length>0){for(var l=0;l<r.length;l++){if(r[l].Equnr){var n={Equnr:r[l].Equnr,Eqktx:r[l].Eqktx};e.results.unshift(n)}}}a=e;var s=new sap.m.StandardListItem({title:"{Equnr}",description:"{Eqktx}",active:true});var o=new sap.ui.model.json.JSONModel;o.setData(e);i.setModel(o);i.bindAggregation("items","/results",s)}else{i.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}};var u=function(){};t._readData(d,c,p,u)}else{var g=new sap.ui.model.json.JSONModel;g.setData(a);i.setModel(g);var m=i.getItems();for(var f=0;f<m.length;f++){m[f].setVisible(true)}}i.open()},handleClose:function(e){var t=this;var a;var r=e.getParameter("selectedItem");if(r){if(t.inputId.indexOf("EQUI_FunctionalLoc")!==-1){e.getSource().getBinding("items").filter([]);a=t.getModel(t.oModelAIWEQUI).getProperty(t.sEquiIndex);a.Tplnr=e.getParameter("selectedItem").getProperty("title");a.Pltxt=e.getParameter("selectedItem").getProperty("description");t.getModel(t.oModelAIWEQUI).refresh();t.fetchData()}if(t.inputId.indexOf("MSPT_FunctionalLoc")!==-1){a=t.getModel(t.oModelAIWMSPT).getProperty(t.sEquiIndex);a.Tplnr=e.getParameter("selectedItem").getProperty("title");a.Pltxt=e.getParameter("selectedItem").getProperty("description");t.getModel(t.oModelAIWMSPT).refresh()}if(t.inputId.indexOf("SuperiorFloc")!==-1){e.getSource().getBinding("items").filter([]);a=t.getModel(t.oModelAIWFLOC).getProperty(t.sFlocIndex);a.SupFunctionallocation=e.getParameter("selectedItem").getProperty("title");a.SupFlocdescription=e.getParameter("selectedItem").getProperty("description");t.getModel(t.oModelAIWFLOC).refresh();t.readSupFlocDetails()}if(t.inputId.indexOf("SuperordEqui")!==-1){a=t.getModel(t.oModelAIWEQUI).getProperty(t.sEquiIndex);a.SuperordinateEquipVS="None";a.SuperordinateEquip=e.getParameter("selectedItem").getProperty("title");a.SuperordinateEquipDesc=e.getParameter("selectedItem").getProperty("title");t.getModel(t.oModelAIWEQUI).refresh();t.fetchData()}if(t.inputId.indexOf("EQUI_Equipment")!==-1){a=t.getModel(t.oModelAIWEQUI).getProperty(t.sEquiIndex);a.Equnr=e.getParameter("selectedItem").getProperty("title");a.Eqktx=e.getParameter("selectedItem").getProperty("description");a.EqunrVS="None";a.EqunrVST="";t.getModel(t.oModelAIWEQUI).refresh()}if(t.inputId.indexOf("COPY_Equipment")!==-1){a=t._copyFragment.getModel("copyModel").getData();a.Equnr=e.getParameter("selectedItem").getProperty("title");a.EqunrVS="None";a.EqunrVST="";t._copyFragment.getModel("copyModel").refresh()}if(t.inputId.indexOf("COPY_FunctionalLoc")!==-1){a=t._copyFragment.getModel("copyModel").getData();a.Tplnr=e.getParameter("selectedItem").getProperty("title");a.TplnrVS="None";a.TplnrVST="";t._copyFragment.getModel("copyModel").refresh()}if(t.inputId.indexOf("MSPT_Equipment")!==-1){a=t.getModel(t.oModelAIWMSPT).getProperty(t.sEquiIndex);a.Equnr=e.getParameter("selectedItem").getProperty("title");a.Eqktx=e.getParameter("selectedItem").getProperty("description");a.EqunrVS="None";a.EqunrVST="";t.getModel(t.oModelAIWMSPT).refresh()}}},fetchData:function(e,a,r){var n=this;var s="/ChangeRequestSet";var o=n.getView().getModel();var i=[];var d={};var c="";if(e){if(e==="AIWEQUI"){c=r.Equnr}}var p={ChangeRequestType:"AIWEAM0P",CrDescription:"",Reason:"01",DeriveData:true,FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPOBList:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],Messages:[],Equi_DOI:[],FLDOI:[],EqDFPS:[]};var u=n.getView().getModel(n.oModelAIWFLOC);var g=n.getView().getModel(n.oModelAIWEQUI);var m=n.getView().getModel(n.oModelAIWMSPT);var f=n.getView().getModel(n.oModelAIWMPMI);var h=sap.ui.getCore().getModel(n.oModelAIWEQUI).getData();var S=sap.ui.getCore().getModel(n.oModelAIWFLOC).getData();var T=sap.ui.getCore().getModel(n.oModelAIWMSPT).getData();var M=sap.ui.getCore().getModel(n.oModelAIWMPMI).getData();if(S.length>0){for(var b=0;b<S.length;b++){var E={Tplnr:S[b].Functionallocation,Txtmi:S[b].Flocdescription,TplkzFlc:S[b].Strucindicator,Tplxt:S[b].StrucIndicatorDesc,EditMask:S[b].EditMask,Hierarchy:S[b].Hierarchy,Fltyp:S[b].Floccategory,Flttx:S[b].FlocCategoryDesc,Swerk:S[b].Maintplant,Plantname:S[b].MaintplantDesc,StorFloc:S[b].Location,Locationdesc:S[b].Locationdesc,Abckzfloc:S[b].Abckz,Abctx:S[b].Abctx,Bukrsfloc:S[b].Bukrs,Butxt:S[b].Butxt,City:S[b].City,KostFloc:S[b].Kostl,KokrFloc:S[b].Kokrs,Contareaname:S[b].Mctxt,PlntFloc:S[b].Werks,Planningplantdes:S[b].Planningplantdes,Ingrp:S[b].Ingrp,Plannergrpdesc:S[b].Innam,Arbplfloc:S[b].Arbpl,Workcenterdesc:S[b].Ktext,Wergwfloc:S[b].WcWerks,Gewrkfloc:S[b].MainArbpl,MainWcDesc:S[b].MainKtext,MainWcPlant:S[b].MainWerks,Tplma:S[b].SupFunctionallocation,Supflocdesc:S[b].SupFlocdescription,BeberFl:S[b].BeberFl,Fing:S[b].Fing,Tele:S[b].Tele,Submtiflo:S[b].ConstrType,Constdesc:S[b].ConstructionDesc,Eqart:S[b].TechnicalObjectTyp,Eartx:S[b].Description,Stattext:S[b].Stattext,StsmFloc:S[b].StsmEqui,Statproftxt:S[b].StsmEquiDesc,UstwFloc:S[b].UstwEqui,UswoFloc:S[b].UswoEqui,UstaFloc:S[b].UstaEqui,IsMenu:S[b].menuAction,Adrnr:S[b].Adrnr,Adrnri:S[b].Adrnri};var v=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;if(v&&v.length>0){var C=v[b].DOI;E.Swerki=C[0].instLoc?"H":C[0].maintenance?"D":"";E.Storti=C[1].instLoc?"H":C[1].maintenance?"D":"";E.Beberi=C[2].instLoc?"H":C[2].maintenance?"D":"";E.Ppsidi=C[3].instLoc?"H":C[3].maintenance?"D":"";E.Abckzi=C[4].instLoc?"H":C[4].maintenance?"D":"";E.Bukrsi=C[5].instLoc?"H":C[5].maintenance?"D":"";E.Kostli=C[6].instLoc?"H":C[6].maintenance?"D":"";E.Kokrsi=C[7].instLoc?"H":C[7].maintenance?"D":"";E.Iwerki=C[8].instLoc?"H":C[8].maintenance?"D":"";E.Ingrpi=C[9].instLoc?"H":C[9].maintenance?"D":"";E.Lgwidi=C[10].instLoc?"H":C[10].maintenance?"D":"";E.Adrnri=C[12].instLoc?"H":C[12].maintenance?"D":""}if(S[b].viewParameter==="create"){E.Type=true}p.FuncLoc.push(E);if(S[b].Title!==""&&S[b].Title!==undefined||S[b].TitleCode!==""&&S[b].TitleCode!==undefined||S[b].Name1!==""&&S[b].Name1!==undefined||S[b].Name2!==""&&S[b].Name2!==undefined||S[b].Name3!==""&&S[b].Name3!==undefined||S[b].Name4!==""&&S[b].Name4!==undefined||S[b].Sort1!==""&&S[b].Sort1!==undefined||S[b].Sort2!==""&&S[b].Sort2!==undefined||S[b].NameCo!==""&&S[b].NameCo!==undefined||S[b].PostCod1!==""&&S[b].PostCod1!==undefined||S[b].City1!==""&&S[b].City1!==undefined||S[b].Building!==""&&S[b].Building!==undefined||S[b].Floor!==""&&S[b].Floor!==undefined||S[b].Roomnum!==""&&S[b].Roomnum!==undefined||S[b].AddrLocation!==""&&S[b].AddrLocation!==undefined||S[b].Strsuppl1!==""&&S[b].Strsuppl1!==undefined||S[b].Strsuppl2!==""&&S[b].Strsuppl2!==undefined||S[b].Strsuppl3!==""&&S[b].Strsuppl3!==undefined||S[b].TimeZone!==""&&S[b].TimeZone!==undefined||S[b].RefPosta!==""&&S[b].RefPosta!==undefined||S[b].Region!==""&&S[b].Region!==undefined){var x={Funcloc:S[b].Functionallocation,Title:S[b].TitleCode,Name1:S[b].Name1,Name2:S[b].Name2,Name3:S[b].Name3,Name4:S[b].Name4,Sort1:S[b].Sort1,Sort2:S[b].Sort2,NameCo:S[b].NameCo,PostCod1:S[b].PostCod1,City1:S[b].City1,Building:S[b].Building,Floor:S[b].Floor,Roomnum:S[b].Roomnum,Strsuppl1:S[b].Strsuppl1,Strsuppl2:S[b].Strsuppl2,Strsuppl3:S[b].Strsuppl3,Location:S[b].AddrLocation,RPostafl:S[b].RefPosta,Landx:S[b].Landx,TimeZone:S[b].TimeZone,RPostFl:S[b].Region,Regiotxt:S[b].RegionDesc};p.FLAddr.push(x)}var V=S[b].intlAddr;if(V.length>0){for(var P=0;P<V.length;P++){p.FLAddrI.push(V[P])}}if(n.AltLblDerv==="2"&&S[b].altlbl.length>0){for(var I=0;I<S[b].altlbl.length;I++){var L={Funcloc:S[b].Functionallocation,AltAlkey:S[b].altlbl[I].AltAlkey,AltStrno:S[b].altlbl[I].AltStrno,AltTplkz:S[b].altlbl[I].AltTplkz};p.FLALTLBEL.push(L)}}if(S[b].lam){var y={Funcloc:S[b].Functionallocation,Lrpid:S[b].lam.Lrpid,Strtptatr:S[b].lam.Strtptatr,Endptatr:S[b].lam.Endptatr,Length:S[b].lam.Length,LinUnit:S[b].lam.LinUnit,Startmrkr:S[b].lam.Startmrkr,Endmrkr:S[b].lam.Endmrkr,Mrkdisst:S[b].lam.Mrkdisst,Mrkdisend:S[b].lam.Mrkdisend,MrkrUnit:S[b].lam.MrkrUnit,LamDer:S[b].lam.LamDer};p.FLLAM.push(y)}var D=S[b].classItems;if(D){if(D.length>0){for(var k=0;k<D.length;k++){var F={Funcloc:S[b].Functionallocation,Classtype:D[k].Classtype,Class:D[k].Class,Clstatus1:D[k].Clstatus1,Artxt:D[k].ClassTypeDesc};p.FLClass.push(F)}}}var A=S[b].characteristics;if(A){if(A.length>0){for(var w=0;w<A.length;w++){var q={Funcloc:S[b].Functionallocation,Atnam:A[w].Atnam,Textbez:A[w].Textbez,Atwrt:A[w].Atwrt,Class:A[w].Class};p.FLVal.push(q)}}}}}if(h.length>0){for(var W=0;W<h.length;W++){var B={Herst:h[W].Herst,Equnr:h[W].Equnr,Txtmi:h[W].Eqktx,Swerk:h[W].Maintplant,Name1:h[W].MaintplantDesc,TplnEilo:h[W].Tplnr,Flocdescription:h[W].Pltxt,Eqtyp:h[W].EquipmentCatogory,Etytx:h[W].EquipCatgDescription,Eqart:h[W].TechnicalObjectTyp,Eartx:h[W].Description,Typbz:h[W].Typbz,SubmEeqz:h[W].ConstrType,Constdesc:h[W].ConstructionDesc,BukrEilo:h[W].Bukrs,Butxt:h[W].Butxt,HequEeqz:h[W].SuperordinateEquip,SuperordEqDes:h[W].SuperordinateEquipDesc,TidnEeqz:h[W].TechIdNum,KostEilo:h[W].Kostl,KokrEilo:h[W].Kokrs,Contareaname:h[W].Mctxt,StorEilo:h[W].Location,Locationdesc:h[W].Locationdesc,AbckEilo:h[W].Abckz,Abctx:h[W].Abctx,PplaEeqz:h[W].Werks,Planningplantdes:h[W].Planningplantdes,IngrEeqz:h[W].Ingrp,Plannergrpdesc:h[W].Innam,Serge:h[W].Serge,MapaEeqz:h[W].MapaEeqz,Stattext:h[W].Stattext,StsmEqui:h[W].StsmEqui,Statproftxt:h[W].StsmEquiDesc,UstwEqui:h[W].UstwEqui,UswoEqui:h[W].UswoEqui,UstaEqui:h[W].UstaEqui,Answt:h[W].Answt,Ansdt:n._formatDate(h[W].Ansdt),Waers:h[W].Waers,ArbpEilo:h[W].Arbpl,Workcenterdesc:h[W].Ktext,WorkCenterPlant:h[W].WcWerks,ArbpEeqz:h[W].MainArbpl,MainWcDesc:h[W].MainKtext,MainWcPlant:h[W].MainWerks,BebeEilo:h[W].BeberFl,Fing:h[W].Fing,Tele:h[W].Tele,HeqnEeqz:h[W].EquipPosition,IsMenu:h[W].menuAction,Adrnr:h[W].Adrnr,Adrnri:h[W].Adrnri,Fhmkz:h[W].Fhmkz,Funcid:h[W].Funcid,Frcfit:h[W].Frcfit,Frcrmv:h[W].Frcrmv};var N=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;if(N&&N.length>0){var C=N[W].DOI;B.Swerki=C[0].instLoc?"R":C[0].maintenance?"D":"";B.Storti=C[1].instLoc?"R":C[1].maintenance?"D":"";B.Beberi=C[2].instLoc?"R":C[2].maintenance?"D":"";B.Ppsidi=C[3].instLoc?"R":C[3].maintenance?"D":"";B.Abckzi=C[4].instLoc?"R":C[4].maintenance?"D":"";B.Kostli=C[5].instLoc?"R":C[5].maintenance?"D":"";B.Iwerki=C[6].instLoc?"R":C[6].maintenance?"D":"";B.Ingrpi=C[7].instLoc?"R":C[7].maintenance?"D":"";B.Gewrki=C[8].instLoc?"R":C[8].maintenance?"D":"";B.Adrnri=C[10].instLoc?"R":C[10].maintenance?"D":""}if(e&&h[W].Equnr===c){B.IsDOI=true;this.tempEquiIndx=W}if(h[W].viewParameter==="create"){B.Type=true}p.Equipment.push(B);if(h[W].Title!==""&&h[W].Title!==undefined||h[W].TitleCode!==""&&h[W].TitleCode!==undefined||h[W].Name1!==""&&h[W].Name1!==undefined||h[W].Name2!==""&&h[W].Name2!==undefined||h[W].Name3!==""&&h[W].Name3!==undefined||h[W].Name4!==""&&h[W].Name4!==undefined||h[W].Sort1!==""&&h[W].Sort1!==undefined||h[W].Sort2!==""&&h[W].Sort2!==undefined||h[W].NameCo!==""&&h[W].NameCo!==undefined||h[W].PostCod1!==""&&h[W].PostCod1!==undefined||h[W].City1!==""&&h[W].City1!==undefined||h[W].Building!==""&&h[W].Building!==undefined||h[W].Floor!==""&&h[W].Floor!==undefined||h[W].Roomnum!==""&&h[W].Roomnum!==undefined||h[W].AddrLocation!==""&&h[W].AddrLocation!==undefined||h[W].Strsuppl1!==""&&h[W].Strsuppl1!==undefined||h[W].Strsuppl2!==""&&h[W].Strsuppl2!==undefined||h[W].Strsuppl3!==""&&h[W].Strsuppl3!==undefined||h[W].TimeZone!==""&&h[W].TimeZone!==undefined||h[W].RefPosta!==""&&h[W].RefPosta!==undefined||h[W].Region!==""&&h[W].Region!==undefined){var O={Equi:h[W].Equnr,Title:h[W].TitleCode,Name1:h[W].Name1,Name2:h[W].Name2,Name3:h[W].Name3,Name4:h[W].Name4,Sort1:h[W].Sort1,Sort2:h[W].Sort2,NameCo:h[W].NameCo,PostCod1:h[W].PostCod1,City1:h[W].City1,Building:h[W].Building,Floor:h[W].Floor,Roomnum:h[W].Roomnum,Strsuppl1:h[W].Strsuppl1,Strsuppl2:h[W].Strsuppl2,Strsuppl3:h[W].Strsuppl3,Location:h[W].AddrLocation,RefPosta:h[W].RefPosta,Landx:h[W].Landx,TimeZone:h[W].TimeZone,RfePost:h[W].Region,Regiotxt:h[W].RegionDesc};p.EqAddr.push(O)}var V=h[W].intlAddr;if(V.length>0){for(var P=0;P<V.length;P++){p.EqAddrI.push(V[P])}}var R={Equi:h[W].Equnr,PlanvPrt:h[W].PlanvPrt,SteufPrt:h[W].SteufPrt,KtschPrt:h[W].KtschPrt,Ewformprt:h[W].Ewformprt,SteufRef:h[W].SteufRef,KtschRef:h[W].KtschRef,EwformRef:h[W].EwformRef};p.EqPRT.push(R);if(h[W].lam){var U={Equi:h[W].Equnr,Lrpid:h[W].lam.Lrpid,Strtptatr:h[W].lam.Strtptatr,Endptatr:h[W].lam.Endptatr,Length:h[W].lam.Length,LinUnit:h[W].lam.LinUnit,Startmrkr:h[W].lam.Startmrkr,Endmrkr:h[W].lam.Endmrkr,Mrkdisst:h[W].lam.Mrkdisst,Mrkdisend:h[W].lam.Mrkdisend,MrkrUnit:h[W].lam.MrkrUnit,LamDer:h[W].lam.LamDer};p.EqLAM.push(U)}if(h[W].dfps){var z={Equi:h[W].Equnr,DeviceId:h[W].dfps.Tailno,Topsiteid:h[W].dfps.Area,Topsitede:h[W].dfps.AreaDesc,AreaPro:h[W].dfps.AreaPrfl,SiteId:h[W].dfps.Site,SiteDesc:h[W].dfps.SiteDesc,SitePro:h[W].dfps.SitePrfl,MpoId:h[W].dfps.MPO,MpoDescr:h[W].dfps.MPODesc,RicId:h[W].dfps.RIC,RicDescr:h[W].dfps.RICDesc,ModelId:h[W].dfps.ModelId,ModelDes:h[W].dfps.ModelIdDesc,Foreignob:l.truetoX(h[W].dfps.ForeignEq),TecState:h[W].dfps.TechSts,DepState:h[W].dfps.OperSts,DfpsRmrk:h[W].dfps.Remark};p.EqDFPS.push(z)}var K=h[W].classItems;if(K){if(K.length>0){for(var H=0;H<K.length;H++){var G={Equi:h[W].Equnr,Classtype:K[H].Classtype,Class:K[H].Class,Clstatus1:K[H].Clstatus1,Artxt:K[H].ClassTypeDesc};p.EqClass.push(G)}}}var j=h[W].characteristics;if(j){if(j.length>0){for(var Q=0;Q<j.length;Q++){var _={Equi:h[W].Equnr,Atnam:j[Q].Atnam,Textbez:j[Q].Textbez,Atwrt:j[Q].Atwrt,Class:j[Q].Class};p.EqVal.push(_)}}}}}if(T.length>0){for(var J=0;J<T.length;J++){var Z={Point:T[J].Mspoint,Equnr:T[J].Equnr,Eqktx:T[J].Eqktx,Tplnr:T[J].Tplnr,Floctxt:T[J].Pltxt,Mptyp:T[J].Mptyp,Mpttx:T[J].Mpttx,Codgr:T[J].Codgr,Codgrtxt:T[J].Codgrtxt,ObtypMs:T[J].ObtypMs,Objtypetxt:T[J].Txt,AtnamMs:T[J].AtnamMs,Atbez:T[J].Atbez,Mseh6:T[J].Mseh6,Msehl:T[J].Msehl,Indct:T[J].Indct,Cdsuf:T[J].Cdsuf,Cjumc:T[J].Cjumc,Desir:T[J].Desir,Pyeac:T[J].Pyeac,Mrmin:T[J].Mrmin,Mrmax:T[J].Mrmax,Pttxt:T[J].Pttxt,Psort:T[J].Psort,Inact:T[J].Inact,Decim:T[J].Decim.toString(),Locas:T[J].Locas,Maktx:T[J].Maktx,Begru:T[J].Begru,Begtx:T[J].Begtx,Expon:T[J].Expon,Mrngu:T[J].Mrngu,Dstxt:T[J].Dstxt,Indrv:T[J].Indrv,IsMenu:T[J].menuAction};if(T[J].viewParameter==="create"){Z.Type=true}p.MSPoint.push(Z);if(T[J].lam){var X={Mspoint:T[J].Mspoint,Lrpid:T[J].lam.Lrpid,Strtptatr:T[J].lam.Strtptatr,Endptatr:T[J].lam.Endptatr,Length:T[J].lam.Length,LinUnit:T[J].lam.LinUnit,Startmrkr:T[J].lam.Startmrkr,Endmrkr:T[J].lam.Endmrkr,Mrkdisst:T[J].lam.Mrkdisst,Mrkdisend:T[J].lam.Mrkdisend,MrkrUnit:T[J].lam.MrkrUnit,LamDer:T[J].lam.LamDer};p.MSLAM.push(X)}var Y=T[J].classItems;if(Y){if(Y.length>0){for(var ee=0;ee<Y.length;ee++){var te={Mspoint:T[J].Mspoint,Classtype:Y[ee].Classtype,Class:Y[ee].Class,Clstatus1:Y[ee].Clstatus1,Artxt:Y[ee].ClassTypeDesc};p.MSClass.push(te)}}}var ae=T[J].characteristics;if(ae){if(ae.length>0){for(var re=0;re<ae.length;re++){var le={Mspoint:T[J].Mspoint,Atnam:ae[re].Atnam,Textbez:ae[re].Textbez,Atwrt:ae[re].Atwrt,Class:ae[re].Class};p.MSVal.push(le)}}}}}if(M.length>0){for(var ne=0;ne<M.length;ne++){var se={Warpl:M[ne].Warpl,Abrho:M[ne].Abrho,Hunit:M[ne].Hunit,Mptyp:M[ne].Mptyp,Wptxt:M[ne].Wptxt,Stich:M[ne].Stich.toString(),Fabkl:M[ne].Fabkl,FabklDesc:M[ne].FabklDesc,Sfakt:M[ne].Sfakt,Andor:n.parseValue(M[ne].Andor),Mehrfach:n.parseValue(M[ne].Mehrfach),Strat:M[ne].Strat,StratDesc:M[ne].StratDesc,Wset:M[ne].Wset,Startdate:n._formatDate(M[ne].Stadt),Unitc:M[ne].Unitc,Szaeh:M[ne].Szaeh,PointStp:M[ne].Mpcycleno,Vspos:M[ne].Vspos,Topos:M[ne].Topos,Vsneg:M[ne].Vsneg,Toneg:M[ne].Toneg,Horiz:M[ne].Horiz,CallConf:M[ne].CallConf,PlanSort:M[ne].PlanSort,Begru:M[ne].Begru,IsMenu:M[ne].menuAction};if(M[ne].viewParameter==="create"){se.Type=true}p.MPLAN.push(se);var oe=M[ne].itemModel;if(oe){for(var ie=0;ie<oe.length;ie++){var de={Mplan:M[ne].Warpl,Qmart:oe[ie].Qmart,Qmartx:oe[ie].nTypeTxt,PlntMi:oe[ie].Werks,Planningplantdes:oe[ie].Planningplantdes,IngrpMi:oe[ie].Ingrp,Plannergrpdesc:oe[ie].Innam,Pstxt:oe[ie].Pstxt,WergwMi:oe[ie].WergwMi,ArbpMi:oe[ie].ArbpMi,Auart:oe[ie].Auart,Ordertypedesc:oe[ie].oTypeTxt,Bautl:oe[ie].AsmblyOb,Cycleseq:oe[ie].Cycleseq,Equnr:oe[ie].Equnr,Equipdesc:oe[ie].Eqktx,TplnrMi:oe[ie].Tplnr,Flocdesc:oe[ie].Pltxt,Mitemnumb:oe[ie].Mitemnumb,PlnnrMi:oe[ie].PlnnrMi,PlntyMi:oe[ie].PlntyMi,PlnalMi:oe[ie].PlnalMi};if(M[ne].viewParameter==="create"){de.Type=true}p.MPItem.push(de);if(oe[ie].lam){var ce={Mplan:M[ne].Warpl,Mitemnumb:oe[ie].lam.Mitemnumb,Lrpid:oe[ie].lam.Lrpid,Mspoint:oe[ie].Mspoint,Strtptatr:oe[ie].lam.Strtptatr,Endptatr:oe[ie].lam.Endptatr,Length:oe[ie].lam.Length,LinUnit:oe[ie].lam.LinUnit,Startmrkr:oe[ie].lam.Startmrkr,Endmrkr:oe[ie].lam.Endmrkr,Mrkdisst:oe[ie].lam.Mrkdisst,Mrkdisend:oe[ie].lam.Mrkdisend,MrkrUnit:oe[ie].lam.MrkrUnit,LamDer:oe[ie].lam.LamDer};p.MPLAM.push(ce)}}}var pe=M[ne].ObjListItems;if(pe){for(var P=0;P<pe.length;P++){var ue={AsmblyOb:pe[P].AsmblyOb,EquiObj:pe[P].EquiObj,FlocObj:pe[P].FlocObj,MatnrObj:pe[P].MatnrObj,Mitemnumb:pe[P].Mitemnumb,Mplan:pe[P].Warpl};p.MPOBList.push(ue)}}var ge=M[ne].cycleModel;if(ge){for(var me=0;me<ge.length;me++){var fe={Mplan:M[ne].Warpl,Point:ge[me].Point,PointTxt:ge[me].Psort,Offset:ge[me].Offset,Ofsetunit:ge[me].Ofsetunit,PakText:ge[me].PakText,Zeieh:ge[me].Zeieh,Zykl1:ge[me].Zykl1,Cycleseqi:ge[me].Cycleseqi,Mpcycleno:ge[me].Mpcycleno};p.MPCycle.push(fe)}}}}var he=n.getView().getModel("mainView");var Se=he.getData();Se.tableBusy=true;he.setData(Se);var Te=function(r){if(r.Messages.results.length>0){var s=[];for(var o=0;o<r.Messages.results.length;o++){s.push({type:l.getMessageType(r.Messages.results[o].Type),title:r.Messages.results[o].Message})}n.createMessagePopover(s,false);Se.tableBusy=false;he.setData(Se);if(e==="AIWEQUI"){if(h[n.tempEquiIndx].Maintplant===""){h[n.tempEquiIndx].Tplnr="";h[n.tempEquiIndx].Pltxt="";h[n.tempEquiIndx].SuperordinateEquip="";h[n.tempEquiIndx].SuperordinateEquipDesc="";sap.ui.getCore().getModel(n.oModelAIWEQUI).refresh();n.getView().getModel(n.oModelAIWEQUI).refresh()}}return}if(r.FuncLoc){if(r.FuncLoc.results.length>0){i=[];if(r.FuncLoc.results.length>0){for(var c=0;c<r.FuncLoc.results.length;c++){var p=r.FuncLoc.results[c];var S={intlAddr:[],altlbl:[],classItems:[],characteristics:[],FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};S.Functionallocation=p.Tplnr;S.Flocdescription=p.Txtmi;S.EditMask=p.EditMask;S.Hierarchy=p.Hierarchy;S.Floccategory=p.Fltyp;S.FlocCategoryDesc=p.Flttx;S.Strucindicator=p.TplkzFlc;S.StrucIndicatorDesc=p.Tplxt;S.SupFunctionallocation=p.Tplma;S.SupFlocdescription=p.Supflocdesc;S.Stattext=p.Stattext;S.StsmEqui=p.StsmFloc;S.StsmEquiDesc=p.Statproftxt;S.UstwEqui=p.UstwFloc;S.UswoEqui=p.UswoFloc;S.UstaEqui=p.UstaFloc;S.TechnicalObjectTyp=p.Eqart;S.Description=p.Eartx;S.Maintplant=p.Swerk;S.MaintplantDesc=p.Plantname;S.Location=p.StorFloc;S.Locationdesc=p.Locationdesc;S.BeberFl=p.BeberFl;S.Fing=p.Fing;S.Tele=p.Tele;S.Arbpl=p.Arbplfloc;S.Ktext=p.Workcenterdesc;S.WcWerks=p.Wergwfloc;S.MainArbpl=p.Gewrkfloc;S.MainKtext=p.MainWcDesc;S.MainWerks=p.MainWcPlant;S.Abckz=p.Abckzfloc;S.Abctx=p.Abctx;S.Bukrs=p.Bukrsfloc;S.Butxt=p.Butxt;S.City=p.City;S.Kostl=p.KostFloc;S.Kokrs=p.KokrFloc;S.Mctxt=p.Contareaname;S.Werks=p.PlntFloc;S.Planningplantdes=p.Planningplantdes;S.Ingrp=p.Ingrp;S.Innam=p.Plannergrpdesc;S.ConstrType=p.Submtiflo;S.ConstructionDesc=p.Constdesc;S.menuAction=p.IsMenu;S.Adrnr=p.Adrnr;S.Adrnri=p.Adrnri;if(p.Type===true){S.viewParameter="create"}if(p.Type===false){S.viewParameter="change";if(S.Floccategory===""||S.Floccategory===undefined){S.FlocCatEnabled=true}else{S.FlocCatEnabled=false}if(S.Strucindicator===""||S.Strucindicator===undefined){S.StrucIndEnabled=true}else{S.StrucIndEnabled=false}S.FunctionalLocEnabled=false}if(p.Swerk!==""){S.BukrsEnabled=false}else{S.MaintplantEnabled=true;S.BukrsEnabled=true}if(r.FLLAM.results.length>0){var T=r.FLLAM.results;for(var M=0;M<T.length;M++){if(T[M].Funcloc===S.Functionallocation){var b={Funcloc:T[M].Funcloc,Lrpid:T[M].Lrpid,LrpidDesc:T[M].LrpDescr,Strtptatr:T[M].Strtptatr,Endptatr:T[M].Endptatr,Length:T[M].Length,LinUnit:T[M].LinUnit,LinUnitDesc:T[M].Uomtext,Startmrkr:T[M].Startmrkr,Endmrkr:T[M].Endmrkr,Mrkdisst:T[M].Mrkdisst,Mrkdisend:T[M].Mrkdisend,MrkrUnit:T[M].MrkrUnit,LamDer:T[M].LamDer};S.lam=b;break}}}if(r.FLAddr){if(r.FLAddr.results){var E=r.FLAddr.results;if(E){if(E.length>0){for(var v=0;v<E.length;v++){if(S.Functionallocation===E[v].Funcloc){var C=sap.ui.getCore().getModel("flocAddressView");var x=C.getData();var V=true;var P,I;if(x.length>0){for(var L=0;L<x.length;L++){if(S.Functionallocation===x[L].Functionallocation){V=false;I=L;break}}}if(V&&S.SupFunctionallocation!==""&&S.SupFunctionallocation!==undefined){P={Functionallocation:S.Functionallocation,IsEditable:E[v].IsEditable};x.push(P);C.setData(x)}if(!V&&S.SupFunctionallocation!==""&&S.SupFunctionallocation!==undefined){x[I].Functionallocation=S.Functionallocation;x[I].IsEditable=S.IsEditable;C.setData(x)}S.Title=E[v].Titletxt?E[v].Titletxt:"";S.TitleCode=E[v].Title?E[v].Title:"";S.Name1=E[v].Name1?E[v].Name1:"";S.Name2=E[v].Name2?E[v].Name2:"";S.Name3=E[v].Name3?E[v].Name3:"";S.Name4=E[v].Name4?E[v].Name4:"";S.Sort1=E[v].Sort1?E[v].Sort1:"";S.Sort2=E[v].Sort2?E[v].Sort2:"";S.NameCo=E[v].NameCo?E[v].NameCo:"";S.PostCod1=E[v].PostCod1?E[v].PostCod1:"";S.City1=E[v].City1?E[v].City1:"";S.Building=E[v].Building?E[v].Building:"";S.Floor=E[v].Floor?E[v].Floor:"";S.Roomnum=E[v].Roomnum?E[v].Roomnum:"";S.Strsuppl1=E[v].Strsuppl1?E[v].Strsuppl1:"";S.Strsuppl2=E[v].Strsuppl2?E[v].Strsuppl2:"";S.Strsuppl3=E[v].Strsuppl3?E[v].Strsuppl3:"";S.AddrLocation=E[v].Location?E[v].Location:"";S.RefPosta=E[v].RPostafl?E[v].RPostafl:"";S.Landx=E[v].Landx?E[v].Landx:"";S.TimeZone=E[v].TimeZone?E[v].TimeZone:"";S.Region=E[v].RPostFl?E[v].RPostFl:"";S.RegionDesc=E[v].Regiotxt?E[v].Regiotxt:""}}}else{S.Title=S.Title?S.Title:"";S.TitleCode=S.TitleCode?S.TitleCode:"";S.Name1=S.Name1?S.Name1:"";S.Name2=S.Name2?S.Name2:"";S.Name3=S.Name3?S.Name3:"";S.Name4=S.Name4?S.Name4:"";S.Sort1=S.Sort1?S.Sort1:"";S.Sort2=S.Sort2?S.Sort2:"";S.NameCo=S.NameCo?S.NameCo:"";S.PostCod1=S.PostCod1?S.PostCod1:"";S.City1=S.City1?S.City1:"";S.Building=S.Building?S.Building:"";S.Floor=S.Floor?S.Floor:"";S.Roomnum=S.Roomnum?S.Roomnum:"";S.Strsuppl1=S.Strsuppl1?S.Strsuppl1:"";S.Strsuppl2=S.Strsuppl2?S.Strsuppl2:"";S.Strsuppl3=S.Strsuppl3?S.Strsuppl3:"";S.AddrLocation=S.AddrLocation?S.AddrLocation:"";S.RefPosta=S.RefPosta?S.RefPosta:"";S.Landx=S.Landx?S.Landx:"";S.TimeZone=S.TimeZone?S.TimeZone:"";S.Region=S.Region?S.Region:"";S.RegionDesc=S.RegionDesc?S.RegionDesc:""}}}}var y=r.FLAddrI.results;if(y.length>0){for(var D=0;D<y.length;D++){if(y[D].Funcloc===S.Functionallocation){y[D].AdNationEnable=false;y[D].City1iVS="None";y[D].StreetiVS="None";S.intlAddr.push(y[D])}}}var k=r.FLALTLBEL.results;if(k.length>0){for(var F=0;F<k.length;F++){if(k[F].Funcloc===S.Functionallocation){var A={Funcloc:k[F].Funcloc,AltAlkey:k[F].AltAlkey,Altxt:k[F].Altxt,AltStrno:k[F].AltStrno,AltTplkz:k[F].AltTplkz,Tplxt:k[F].Tplxt,Name1i:k[F].Editm,Actvs:k[F].Actvs,AltPrkey:k[F].AltPrkey,AltReuse:k[F].AltReuse,enableLblSys:false,enableAltLbl:true,enableStrInd:true,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};S.altlbl.push(A)}}}if(r.FLClass){var w=r.FLClass.results;if(w){if(w.length>0){for(var q=0;q<w.length;q++){if(S.Functionallocation===w[q].Funcloc){w[q].ctEnable=false;w[q].classEnable=false;w[q].ClassTypeDesc=w[q].Artxt;delete w[q].Artxt;w[q].ClassDesc=w[q].Kltxt;delete w[q].Kltxt;delete w[q].Changerequestid;delete w[q].Clint;delete w[q].Service;S.classItems.push(w[q])}}S.charNewButton=true;if(n.class&&n.class.getId().includes("detailFloc")===true){n.class.setModel(new t(S.classItems))}}}}if(r.FLVal){var W=r.FLVal.results;if(W){if(W.length>0){for(var B=0;B<W.length;B++){if(S.Functionallocation===W[B].Funcloc){W[B].cNameEnable=false;W[B].Textbz=W[B].Atwtb;delete W[B].Ataut;delete W[B].Ataw1;delete W[B].Atawe;delete W[B].Atcod;delete W[B].Atflb;delete W[B].Atflv;delete W[B].Atimb;delete W[B].Atsrt;delete W[B].Atvglart;delete W[B].Atzis;delete W[B].Changerequestid;delete W[B].CharName;delete W[B].Charid;delete W[B].Classtype;delete W[B].Service;delete W[B].Valcnt;W[B].slNo=B+1;W[B].flag=W[B].Class+"-"+W[B].slNo;S.characteristics.push(W[B])}}for(var D=0;D<S.characteristics.length;D++){var N=1;for(var F=0;F<S.characteristics.length;F++){if(D===F){continue}if(S.characteristics[F].Atnam===S.characteristics[D].Atnam&&S.characteristics[F].Class===S.characteristics[D].Class){N++}}if(N>1){S.characteristics[D].charDltEnable=true}else{S.characteristics[D].charDltEnable=false}if(S.characteristics[D].Atein===true){S.characteristics[D].charAddEnable=false}}if(n.char&&n.char.getId().includes("detailFloc")===true){n.char.setModel(new t(S.characteristics))}}}}if(S.UstaEqui){Se.visible=true}else{Se.visible=false}he.setData(he);i.push(S)}u.setData(i)}}}if(r.Equipment){if(r.Equipment.results.length>0){i=[];for(var O=0;O<r.Equipment.results.length;O++){var S=r.Equipment.results[O];d={intlAddr:[],classItems:[],characteristics:[],charNewButton:false,attachmentCount:"0",Guids:"",EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",ConstrTypeMaxL:0,charValueMaxL:0,dfps:{Tailno:"",TailnoVS:"None",Area:"",AreaDesc:"",AreaPrfl:"",Site:"",SiteDesc:"",SiteVS:"None",SitePrfl:"",MPO:"",MPODesc:"",RIC:"",RICDesc:"",ModelId:"",ModelIdDesc:"",ModelIdVS:"None",ForeignEq:false,TechSts:"",OperSts:"0001",Remark:"",dfpsCrtEnabled:true,dfpsDltEnabled:false,dfpsEnabled:false,TailnoReq:false}};d.Equnr=S.Equnr;d.Eqktx=S.Txtmi;d.EquipmentCatogory=S.Eqtyp;d.EquipCatgDescription=S.Etytx;d.Maintplant=S.Swerk;d.MaintplantDesc=S.Name1;d.SuperordinateEquip=S.HequEeqz;d.SuperordinateEquipDesc=S.SuperordEqDes;d.Bukrs=S.BukrEilo;d.Butxt=S.Butxt;d.Location=S.StorEilo;d.Locationdesc=S.Locationdesc;d.Abckz=S.AbckEilo;d.Abctx=S.Abctx;d.Kostl=S.KostEilo;d.Kokrs=S.KokrEilo;d.Mctxt=S.Contareaname;d.Answt=S.Answt;d.Ansdt=l.getDateFormat(S.Ansdt);d.Waers=S.Waers;d.Werks=S.PplaEeqz;d.Planningplantdes=S.Planningplantdes;d.Ingrp=S.IngrEeqz;d.Innam=S.Plannergrpdesc;d.Arbpl=S.ArbpEilo;d.Ktext=S.Workcenterdesc;d.WcWerks=S.WorkCenterPlant;d.MainArbpl=S.ArbpEeqz;d.MainKtext=S.MainWcDesc;d.MainWerks=S.MainWcPlant;d.BeberFl=S.BebeEilo;d.Fing=S.Fing;d.Tele=S.Tele;d.Herst=S.Herst;d.TechnicalObjectTyp=S.Eqart;d.Description=S.Eartx;d.Typbz=S.Typbz;d.ConstrType=S.SubmEeqz;d.ConstructionDesc=S.Constdesc;d.TechIdNum=S.TidnEeqz;d.Serge=S.Serge;d.MapaEeqz=S.MapaEeqz;d.EquipPosition=S.HeqnEeqz;d.Stattext=S.Stattext;d.StsmEqui=S.StsmEqui;d.StsmEquiDesc=S.Statproftxt;d.UstwEqui=S.UstwEqui;d.UswoEqui=S.UswoEqui;d.UstaEqui=S.UstaEqui;d.menuAction=S.IsMenu;d.Adrnr=S.Adrnr;d.Adrnri=S.Adrnri;d.Fhmkz=S.Fhmkz;d.Funcid=S.Funcid;d.Frcfit=S.Frcfit;d.Frcrmv=S.Frcrmv;if(r.EqPRT){var R=r.EqPRT.results[O];if(R){d.PlanvPrt=R.PlanvPrt;d.SteufPrt=R.SteufPrt;d.KtschPrt=R.KtschPrt;d.Ewformprt=R.Ewformprt;d.PlanvPrtText=h[O].PlanvPrtText;d.SteufPrtText=h[O].SteufPrtText;d.KtschPrtText=h[O].KtschPrtText;d.EwformprtText=h[O].EwformprtText;d.SteufRef=R.SteufRef;d.KtschRef=R.KtschRef;d.EwformRef=R.EwformRef}else{d.PlanvPrt="";d.SteufPrt="";d.KtschPrt="";d.Ewformprt="";d.PlanvPrtText="";d.SteufPrtText="";d.KtschPrtText="";d.EwformprtText="";d.SteufRef=false;d.KtschRef=false;d.EwformRef=false}}if(r.EqLAM.results.length>0){var U=r.EqLAM.results;for(var M=0;M<U.length;M++){if(U[M].Equi===S.Equnr){var z={Equi:U[M].Equi,Lrpid:U[M].Lrpid,LrpidDesc:U[M].LrpDescr,Strtptatr:U[M].Strtptatr,Endptatr:U[M].Endptatr,Length:U[M].Length,LinUnit:U[M].LinUnit,LinUnitDesc:U[M].Uomtext,Startmrkr:U[M].Startmrkr,Endmrkr:U[M].Endmrkr,Mrkdisst:U[M].Mrkdisst,Mrkdisend:U[M].Mrkdisend,MrkrUnit:U[M].MrkrUnit,LamDer:U[M].LamDer};d.lam=z;break}}}if(S.Type===true){d.viewParameter="create"}if(S.Type===false){d.viewParameter="change";d.EqunrEnabled=false;if(d.EquipmentCatogory===""||d.EquipmentCatogory===undefined){d.EquipCatEnabled=true}else{d.EquipCatEnabled=false}if(d.Maintplant===""||d.Maintplant===undefined){d.MaintplantEnabled=true}else{d.MaintplantEnabled=false}if(d.Tplnr===""||d.Tplnr===undefined){d.TplnrEnabled=true}else{d.TplnrEnabled=false}}if(S.Swerk!==""){d.BukrsEnabled=false}else{d.BukrsEnabled=true}if(S.Eqtyp!=="P"){d.Tplnr=S.TplnEilo;d.Pltxt=S.Flocdescription;d.TplnrEnabled=true}else{d.Tplnr="";d.Pltxt="";d.TplnrEnabled=false}if(d.SuperordinateEquip!==""&&d.SuperordinateEquip!==undefined){d.TplnrEnabled=false;d.SuperordinateEquipEnabled=true}else if(d.Tplnr!==""&&d.Tplnr!==undefined){d.TplnrEnabled=true;d.SuperordinateEquipEnabled=false}if(d.SuperordinateEquip!==""&&d.SuperordinateEquip!==undefined||d.Tplnr!==""&&d.Tplnr!==undefined){d.MaintplantEnabled=true}else{d.MaintplantEnabled=true}if(r.EqAddr){if(r.EqAddr.results){var E=r.EqAddr.results;if(E){if(E.length>0){for(var K=0;K<E.length;K++){if(d.Equnr===E[K].Equi){var H=sap.ui.getCore().getModel("equiAddressView");var G=H.getData();var j=true;var Q,_;if(G.length>0){for(var J=0;J<G.length;J++){if(S.Equnr===G[J].Equnr){j=false;_=J;break}}}if(j===true){if(d.SuperordinateEquip!==""&&d.SuperordinateEquip!==undefined||d.Tplnr!==""&&d.Tplnr!==undefined){Q={Equnr:S.Equnr,Tplnr:d.Tplnr,IsEditable:E[K].IsEditable};G.push(Q);H.setData(G)}}if(j===false){if(d.SuperordinateEquip!==""&&d.SuperordinateEquip!==undefined||d.Tplnr!==""&&d.Tplnr!==undefined){G[_].Equnr=S.Equnr;G[_].Tplnr=S.Tplnr;G[_].IsEditable=S.IsEditable;H.setData(G)}}d.Title=E[K].Titletxt?E[K].Titletxt:"";d.TitleCode=E[K].Title?E[K].Title:"";d.Name1=E[K].Name1?E[K].Name1:"";d.Name2=E[K].Name2?E[K].Name2:"";d.Name3=E[K].Name3?E[K].Name3:"";d.Name4=E[K].Name4?E[K].Name4:"";d.Sort1=E[K].Sort1?E[K].Sort1:"";d.Sort2=E[K].Sort2?E[K].Sort2:"";d.NameCo=E[K].NameCo?E[K].NameCo:"";d.PostCod1=E[K].PostCod1?E[K].PostCod1:"";d.City1=E[K].City1?E[K].City1:"";d.Building=E[K].Building?E[K].Building:"";d.Floor=E[K].Floor?E[K].Floor:"";d.Roomnum=E[K].Roomnum?E[K].Roomnum:"";d.AddrLocation=E[K].Location?E[K].Location:"";d.Strsuppl1=E[K].Strsuppl1?E[K].Strsuppl1:"";d.Strsuppl2=E[K].Strsuppl2?E[K].Strsuppl2:"";d.Strsuppl3=E[K].Strsuppl3?E[K].Strsuppl3:"";d.RefPosta=E[K].RefPosta?E[K].RefPosta:"";d.Landx=E[K].Landx?E[K].Landx:"";d.TimeZone=E[K].TimeZone?E[K].TimeZone:"";d.Region=E[K].RfePost?E[K].RfePost:"";d.RegionDesc=E[K].Regiotxt?E[K].Regiotxt:""}}}else{d.Title=d.Title?d.Title:"";d.TitleCode=d.TitleCode?d.TitleCode:"";d.Name1=d.Name1?d.Name1:"";d.Name2=d.Name2?d.Name2:"";d.Name3=d.Name3?d.Name3:"";d.Name4=d.Name4?d.Name4:"";d.Sort1=d.Sort1?d.Sort1:"";d.Sort2=d.Sort2?d.Sort2:"";d.NameCo=d.NameCo?d.NameCo:"";d.PostCod1=d.PostCod1?d.PostCod1:"";d.City1=d.City1?d.City1:"";d.Building=d.Building?d.Building:"";d.Floor=d.Floor?d.Floor:"";d.Roomnum=d.Roomnum?d.Roomnum:"";d.Strsuppl1=d.Strsuppl1?d.Strsuppl1:"";d.Strsuppl2=d.Strsuppl2?d.Strsuppl2:"";d.Strsuppl3=d.Strsuppl3?d.Strsuppl3:"";d.AddrLocation=d.AddrLocation?d.AddrLocation:"";d.RefPosta=d.RefPosta?d.RefPosta:"";d.Landx=d.Landx?d.Landx:"";d.TimeZone=d.TimeZone?d.TimeZone:"";d.Region=d.Region?d.Region:"";d.RegionDesc=d.RegionDesc?d.RegionDesc:""}}}}var y=r.EqAddrI.results;if(y.length>0){for(var D=0;D<y.length;D++){if(y[D].Equi===S.Equnr){y[D].AdNationEnable=false;y[D].City1iVS="None";y[D].StreetiVS="None";d.intlAddr.push(y[D])}}}if(r.EqDFPS){if(r.EqDFPS.results){var Z=r.EqDFPS.results;if(Z){if(Z.length>0){for(var X=0;X<Z.length;X++){if(d.Equnr===Z[X].Equi){d.dfps.Equnr=Z[X].Equi;d.dfps.MeOwner=Z[X].MeOwner;d.dfps.MeUser=Z[X].MeUser;d.dfps.Tailno=Z[X].DeviceId;d.dfps.Area=Z[X].Topsiteid;d.dfps.AreaDesc=Z[X].Topsitede;d.dfps.AreaPrfl=Z[X].AreaPro;d.dfps.Site=Z[X].SiteId;d.dfps.SiteDesc=Z[X].SiteDesc;d.dfps.SitePrfl=Z[X].SitePro;d.dfps.MPO=Z[X].MpoId;d.dfps.MPODesc=Z[X].MpoDescr;d.dfps.RIC=Z[X].RicId;d.dfps.RICDesc=Z[X].RicDescr;d.dfps.ModelId=Z[X].ModelId;d.dfps.ModelIdDesc=Z[X].ModelDes;d.dfps.ForeignEq=l.XtoTrue(Z[X].Foreignob);d.dfps.TechSts=Z[X].TecState;d.dfps.OperSts=Z[X].DepState;d.dfps.Remark=Z[X].DfpsRmrk;if(Z[X].DeviceId!==""){d.dfps.dfpsCrtEnabled=false;d.dfps.dfpsDltEnabled=true;d.dfps.dfpsEnabled=true;d.dfps.TailnoReq=true}}}}}}}if(r.EqClass){var w=r.EqClass.results;if(w){if(w.length>0){for(var Y=0;Y<w.length;Y++){if(d.Equnr===w[Y].Equi){w[Y].ctEnable=false;w[Y].classEnable=false;w[Y].ClassTypeDesc=w[Y].Artxt;delete w[Y].Artxt;w[Y].ClassDesc=w[Y].Kltxt;delete w[Y].Kltxt;delete w[Y].Changerequestid;delete w[Y].Clint;delete w[Y].Service;d.classItems.push(w[Y])}}d.charNewButton=true;if(n.class&&n.class.getId().includes("detailEqui")===true){n.class.setModel(new t(d.classItems))}}}}if(r.EqVal){var W=r.EqVal.results;if(W){if(W.length>0){for(var ee=0;ee<W.length;ee++){if(d.Equnr===W[ee].Equi){W[ee].cNameEnable=false;W[ee].Textbz=W[ee].Atwtb;delete W[ee].Ataut;delete W[ee].Ataw1;delete W[ee].Atawe;delete W[ee].Atcod;delete W[ee].Atflb;delete W[ee].Atflv;delete W[ee].Atimb;delete W[ee].Atsrt;delete W[ee].Atvglart;delete W[ee].Atzis;delete W[ee].Changerequestid;delete W[ee].CharName;delete W[ee].Charid;delete W[ee].Classtype;delete W[ee].Service;delete W[ee].Valcnt;W[ee].slNo=ee+1;W[ee].flag=W[ee].Class+"-"+W[ee].slNo;d.characteristics.push(W[ee])}}for(var D=0;D<d.characteristics.length;D++){var N=1;for(var F=0;F<d.characteristics.length;F++){if(D===F){continue}if(d.characteristics[F].Atnam===d.characteristics[D].Atnam&&d.characteristics[F].Class===d.characteristics[D].Class){N++}}if(N>1){d.characteristics[D].charDltEnable=true}else{d.characteristics[D].charDltEnable=false}if(d.characteristics[D].Atein===true){d.characteristics[D].charAddEnable=false}}if(n.char&&n.char.getId().includes("detailEqui")===true){n.char.setModel(new t(d.characteristics))}}}}if(d.UstaEqui){Se.visible=true}else{Se.visible=false}he.setData(Se);i.push(d)}g.setData(i);for(var te=0;te<g.getData().length;te++){if(n.currentEquipment===g.getData()[te].Equnr){n.rowIndex="/"+te;var ae=new t;var re=g.getProperty(n.rowIndex);if(re.Title!==""&&re.Title!==undefined||re.TitleCode!==""&&re.TitleCode!==undefined||re.Name1!==""&&re.Name1!==undefined||re.Name2!==""&&re.Name2!==undefined||re.Name3!==""&&re.Name3!==undefined||re.Name4!==""&&re.Name4!==undefined||re.Sort1!==""&&re.Sort1!==undefined||re.Sort2!==""&&re.Sort2!==undefined||re.NameCo!==""&&re.NameCo!==undefined||re.PostCod1!==""&&re.PostCod1!==undefined||re.City1!==""&&re.City1!==undefined||re.Building!==""&&re.Building!==undefined||re.Floor!==""&&re.Floor!==undefined||re.Roomnum!==""&&re.Roomnum!==undefined||re.AddrLocation!==""&&re.AddrLocation!==undefined||re.Strsuppl1!==""&&re.Strsuppl1!==undefined||re.Strsuppl2!==""&&re.Strsuppl2!==undefined||re.Strsuppl3!==""&&re.Strsuppl3!==undefined||re.TimeZone!==""&&re.TimeZone!==undefined||re.RefPosta!==""&&re.RefPosta!==undefined||re.Region!==""&&re.Region!==undefined){re.RefPostaLblReq=true}ae.setData(re);var le=[ae.getData()];var ne=$.map(le,function(e){return $.extend(true,{},e)});var se=new t;se.setData(ne);var oe=sap.ui.getCore().getModel("SUP_EQUI_DATA");var ie=oe.getData();var de=true;for(var ce=0;ce<ie.length;ce++){if(re.Equnr===ie[ce].Equnr){de=false}}if(de===true){if(re.SuperordinateEquip!==""&&re.SuperordinateEquip!==undefined||re.Tplnr!==""&&re.Tplnr!==undefined){ie.push(ne[0]);oe.setData(ie)}}Se.tableBusy=false;he.setData(Se);if(e){if(e==="AIWEQUI"){var pe=sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).DOI;var ue=r.Equi_DOI.results;for(var ge=0;ge<ue.length;ge++){ue[ge].instLoc=true;if(ue[ge].hasOwnProperty("maintenance")){if(!ue[ge].maintenance){ue[ge].targetVal=ue[ge].SupFlVal}}else{ue[ge].maintenance=pe[ge].maintenance;if(ue[ge].maintenance){ue[ge].instLoc=false}else{ue[ge].instLoc=true}ue[ge].currentVal=pe[ge].currentVal}if(ue[ge].Property==="Maintplant"||ue[ge].Property==="PplaEeqz"){ue[ge].locEnable=false;ue[ge].maintEnable=false}else{ue[ge].locEnable=true;ue[ge].maintEnable=true}ue[ge].targetVal=ue[ge].SupFlVal}sap.ui.getCore().getModel("dataOriginMOP").getProperty("/EQ"+a).DOI=ue}}return}}var me=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var fe=0;fe<r.Equipment.results.length;fe++){var p=r.Equipment.results[fe];for(var D=0;D<me.length;D++){if(p.Equnr===me[D].key){var Te=me[D].DOI;if(p.Swerki===""){Te[0].maintenance=false;Te[0].instLoc=false;Te[0].SupFlVal="";Te[0].currentVal="";Te[0].targetVal=""}else if(p.Swerki==="D"){Te[0].maintenance=true;Te[0].instLoc=false;Te[0].SupFlVal="";Te[0].currentVal=p.Swerk;Te[0].targetVal=p.Swerk}else{Te[0].maintenance=false;Te[0].instLoc=true;Te[0].SupFlVal=p.Swerk;Te[0].currentVal="";Te[0].targetVal=p.Swerk}if(p.Storti===""){Te[1].maintenance=false;Te[1].instLoc=false;Te[1].SupFlVal="";Te[1].currentVal="";Te[1].targetVal=""}else if(p.Storti==="D"){Te[1].maintenance=true;Te[1].instLoc=false;Te[1].SupFlVal="";Te[1].currentVal=p.StorEilo;Te[1].targetVal=p.StorEilo}else{Te[1].maintenance=false;Te[1].instLoc=true;Te[1].SupFlVal=p.StorEilo;Te[1].currentVal="";Te[1].targetVal=p.StorEilo}if(p.Beberi===""){Te[2].maintenance=false;Te[2].instLoc=false;Te[2].SupFlVal="";Te[2].currentVal="";Te[2].targetVal=""}else if(p.Beberi==="D"){Te[2].maintenance=true;Te[2].instLoc=false;Te[2].SupFlVal="";Te[2].currentVal=p.BebeEilo;Te[2].targetVal=p.BebeEilo}else{Te[2].maintenance=false;Te[2].instLoc=true;Te[2].SupFlVal=p.BebeEilo;Te[2].currentVal="";Te[2].targetVal=p.BebeEilo}if(p.Ppsidi===""){Te[3].maintenance=false;Te[3].instLoc=false;Te[3].SupFlVal="";Te[3].currentVal="";Te[3].targetVal=""}else if(p.Ppsidi==="D"){Te[3].maintenance=true;Te[3].instLoc=false;Te[3].SupFlVal="";Te[3].currentVal=p.ArbpEilo;Te[3].targetVal=p.ArbpEilo}else{Te[3].maintenance=false;Te[3].instLoc=true;Te[3].SupFlVal=p.ArbpEilo;Te[3].currentVal="";Te[3].targetVal=p.ArbpEilo}if(p.Abckzi===""){Te[4].maintenance=false;Te[4].instLoc=false;Te[4].SupFlVal="";Te[4].currentVal="";Te[4].targetVal=""}else if(p.Abckzi==="D"){Te[4].maintenance=true;Te[4].instLoc=false;Te[4].SupFlVal="";Te[4].currentVal=p.AbckEilo;Te[4].targetVal=p.AbckEilo}else{Te[4].maintenance=false;Te[4].instLoc=true;Te[4].SupFlVal=p.AbckEilo;Te[4].currentVal="";Te[4].targetVal=p.AbckEilo}if(p.Kostli===""){Te[5].maintenance=false;Te[5].instLoc=false;Te[5].SupFlVal="";Te[5].currentVal="";Te[5].targetVal=""}else if(p.Kostli==="D"){Te[5].maintenance=true;Te[5].instLoc=false;Te[5].SupFlVal="";Te[5].currentVal=p.KostEilo;Te[5].targetVal=p.KostEilo}else{Te[5].maintenance=false;Te[5].instLoc=true;Te[5].SupFlVal=p.KostEilo;Te[5].currentVal="";Te[5].targetVal=p.KostEilo}if(p.Iwerki===""){Te[6].maintenance=false;Te[6].instLoc=false;Te[6].SupFlVal="";Te[6].currentVal="";Te[6].targetVal=""}else if(p.Iwerki==="D"){Te[6].maintenance=true;Te[6].instLoc=false;Te[6].SupFlVal="";Te[6].currentVal=p.PplaEeqz;Te[6].targetVal=p.PplaEeqz}else{Te[6].maintenance=false;Te[6].instLoc=true;Te[6].SupFlVal=p.PplaEeqz;Te[6].currentVal="";Te[6].targetVal=p.PplaEeqz}if(p.Ingrpi===""){Te[7].maintenance=false;Te[7].instLoc=false;Te[7].SupFlVal="";Te[7].currentVal="";Te[7].targetVal=""}else if(p.Ingrpi==="D"){Te[7].maintenance=true;Te[7].instLoc=false;Te[7].SupFlVal="";Te[7].currentVal=p.IngrEeqz;Te[7].targetVal=p.IngrEeqz}else{Te[7].maintenance=false;Te[7].instLoc=true;Te[7].SupFlVal=p.IngrEeqz;Te[7].currentVal="";Te[7].targetVal=p.IngrEeqz}if(p.Gewrki===""){Te[8].maintenance=false;Te[8].instLoc=false;Te[8].SupFlVal="";Te[8].currentVal="";Te[8].targetVal=""}else if(p.Gewrki==="D"){Te[8].maintenance=true;Te[8].instLoc=false;Te[8].SupFlVal="";Te[8].currentVal=p.ArbpEeqz;Te[8].targetVal=p.ArbpEeqz}else{Te[8].maintenance=false;Te[8].instLoc=true;Te[8].SupFlVal=p.ArbpEeqz;Te[8].currentVal="";Te[8].targetVal=p.ArbpEeqz}if(p.Adrnri===""){Te[10].maintenance=false;Te[10].instLoc=false;Te[10].SupFlVal="";Te[10].currentVal="";Te[10].targetVal=""}else if(p.Adrnri==="D"){Te[10].maintenance=true;Te[10].instLoc=false;Te[10].SupFlVal="";Te[10].currentVal=p.Adrnr;Te[10].targetVal=p.Adrnr}else{Te[10].maintenance=false;Te[10].instLoc=true;Te[10].SupFlVal=p.Adrnr;Te[10].currentVal="";Te[10].targetVal=p.Adrnr}}}}}}if(r.MSPoint){i=[];var Me=r.MSPoint.results;if(Me){if(Me.length>0){for(var be=0;be<Me.length;be++){d={classItems:[],characteristics:[],charNewButton:false,attachmentCount:"0",Guids:"",PttxtVS:"None",PttxtVST:"",ObtypMsVS:"None",ObtypMsVST:"",MptypVS:"None",MptypVST:"",AtnamMsVS:"None",AtnamMsVST:"",EqunrVS:"None",EqunrVST:"",TplnrVS:"None",TplnrVST:"",CodgrVS:"None",CodgrVST:"",MspointEnabled:true,ObtypMsEnabled:true,EqunrEnabled:true,TplnrEnabled:true,MptypEnabled:true,AtnamMsEnabled:true,valCodeStuffSel:false};d.Mspoint=Me[be].Point;d.Psort=Me[be].Psort;d.Pttxt=Me[be].Pttxt;d.ObtypMs=Me[be].ObtypMs;d.Txt=Me[be].Objtypetxt;d.Equnr=Me[be].Equnr;d.Eqktx=Me[be].Eqktx;d.Tplnr=Me[be].Tplnr;d.Pltxt=Me[be].Floctxt;d.Mptyp=Me[be].Mptyp;d.Mpttx=Me[be].Mpttx;d.Inact=Me[be].Inact;d.AtnamMs=Me[be].AtnamMs;d.Atbez=Me[be].Atbez;d.Mseh6=Me[be].Mseh6;d.Msehl=Me[be].Msehl;d.Decim=Me[be].Decim.toString();d.Codgr=Me[be].Codgr;d.Codgrtxt=Me[be].Codgrtxt;d.Locas=Me[be].Locas;d.Maktx=Me[be].Maktx;d.Begru=Me[be].Begru;d.Begtx=Me[be].Begtx;d.Indct=Me[be].Indct;d.Expon=Me[be].Expon;d.Cdsuf=Me[be].Cdsuf;d.Cjumc=Me[be].Cjumc;d.Pyeac=Me[be].Pyeac;d.Desir=Me[be].Desir;d.Mrngu=Me[be].Mrngu;d.Dstxt=Me[be].Dstxt;d.Indrv=Me[be].Indrv;d.Mrmax=Me[be].Mrmax;d.Mrmin=Me[be].Mrmin;d.menuAction=Me[be].IsMenu;d.valCodeStuffSel=false;if(Me[be].Type===true){d.viewParameter="create"}if(Me[be].Type===false){d.viewParameter="change";d.MspointEnabled=false;if(d.ObtypMs===""||d.ObtypMs===undefined){d.ObtypMsEnabled=true}else{d.ObtypMsEnabled=false}if(d.ObtypMs==="IEQ"){d.TplnrEnabled=false;if(d.Equnr===""||d.Equnr===undefined){d.EqunrEnabled=true}else{d.EqunrEnabled=false}}if(d.ObtypMs==="IFL"){d.EqunrEnabled=false;if(d.Tplnr===""||d.Tplnr===undefined){d.TplnrEnabled=true}else{d.TplnrEnabled=false}}if(d.Mptyp===""||d.Mptyp===undefined){d.MptypEnabled=true}else{d.MptypEnabled=false}if(d.AtnamMs===""||d.AtnamMs===undefined){d.AtnamMsEnabled=true}else{d.AtnamMsEnabled=false}}if(Me[be].Indct){d.countEnable=true;d.tEnable=false}else{d.countEnable=false;d.tEnable=true}if(Me[be].Equnr!==""){d.EqunrEnabled=true;d.EqunrLblVis=true;d.EqunrInpVis=true;d.EqktxInpVis=true;d.TplnrEnabled=false;d.TplnrLblVis=false;d.TplnrInpVis=false;d.PltxtInpVis=false}else{d.EqunrEnabled=false;d.EqunrLblVis=false;d.EqunrInpVis=false;d.EqktxInpVis=false;d.TplnrEnabled=true;d.TplnrLblVis=true;d.TplnrInpVis=true;d.PltxtInpVis=true}if(r.MSLAM.results.length>0){var Ee=r.MSLAM.results;for(var M=0;M<Ee.length;M++){if(Ee[M].Mspoint===Me[be].Point){var ve={Mspoint:Ee[M].Mspoint,Lrpid:Ee[M].Lrpid,LrpidDesc:Ee[M].LrpDescr,Strtptatr:Ee[M].Strtptatr,Endptatr:Ee[M].Endptatr,Length:Ee[M].Length,LinUnit:Ee[M].LinUnit,LinUnitDesc:Ee[M].Uomtext,Startmrkr:Ee[M].Startmrkr,Endmrkr:Ee[M].Endmrkr,Mrkdisst:Ee[M].Mrkdisst,Mrkdisend:Ee[M].Mrkdisend,MrkrUnit:Ee[M].MrkrUnit,LamDer:Ee[M].LamDer};d.lam=ve;break}}}if(r.MSClass){var w=r.MSClass.results;if(w){if(w.length>0){for(var Ce=0;Ce<w.length;Ce++){if(d.Mspoint===w[Ce].Mspoint){w[Ce].ctEnable=false;w[Ce].classEnable=false;w[Ce].ClassTypeDesc=w[Ce].Artxt;delete w[Ce].Artxt;w[Ce].ClassDesc=w[Ce].Kltxt;delete w[Ce].Kltxt;delete w[Ce].Changerequestid;delete w[Ce].Clint;delete w[Ce].Service;d.classItems.push(w[Ce])}}d.charNewButton=true;if(n.class&&n.class.getId().includes("detailMspt")===true){n.class.setModel(new t(d.classItems))}}}}if(r.MSVal){var W=r.MSVal.results;if(W){if(W.length>0){for(var xe=0;xe<W.length;xe++){if(d.Mspoint===W[xe].Mspoint){W[xe].cNameEnable=false;W[xe].Textbz=W[xe].Atwtb;delete W[xe].Ataut;delete W[xe].Ataw1;delete W[xe].Atawe;delete W[xe].Atcod;delete W[xe].Atflb;delete W[xe].Atflv;delete W[xe].Atimb;delete W[xe].Atsrt;delete W[xe].Atvglart;delete W[xe].Atzis;delete W[xe].Changerequestid;delete W[xe].CharName;delete W[xe].Charid;delete W[xe].Classtype;delete W[xe].Service;delete W[xe].Valcnt;W[xe].slNo=xe+1;W[xe].flag=W[xe].Class+"-"+W[xe].slNo;d.characteristics.push(W[xe])}}for(var D=0;D<d.characteristics.length;D++){var N=1;for(var F=0;F<d.characteristics.length;F++){if(D===F){continue}if(d.characteristics[F].Atnam===d.characteristics[D].Atnam&&d.characteristics[F].Class===d.characteristics[D].Class){N++}}if(N>1){d.characteristics[D].charDltEnable=true}else{d.characteristics[D].charDltEnable=false}if(d.characteristics[D].Atein===true){d.characteristics[D].charAddEnable=false}}if(n.char&&n.char.getId().includes("detailMspt")===true){n.char.setModel(new t(d.characteristics))}}}}i.push(d)}m.setData(i)}}}if(r.MPLAN){i=[];var Ve=r.MPLAN.results;if(Ve){for(var Pe=0;Pe<Ve.length;Pe++){d={cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,WarplEnabled:true,StratEnabled:true,MehrfachEnabled:true,WsetEnabled:true,MptypEnabled:true,cycleIndSingleEnabled:true,cycleIndStrategyEnabled:true,cycleIndMultCntrEnabled:true,FabklLBLReq:false,ButtonNewItemEnabled:true,ButtonAssignItemEnabled:true,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,attachmentCount:"0",Guids:"",MaintenanceItemMode:"Delete",cycleModel:[],WarplVS:"None",WarplVST:"",WptxtVS:"None",WptxtVST:"",StratVS:"None",StratVST:"",WsetVS:"None",WsetVST:"",StadtVS:"None",StadtVST:"",StichVS:"None",StichVST:"",HunitVS:"None",HunitVST:""};d.Warpl=Ve[Pe].Warpl;d.Wptxt=Ve[Pe].Wptxt;d.Mptyp=Ve[Pe].Mptyp;d.Strat=Ve[Pe].Strat;d.StratDesc=Ve[Pe].StratDesc;d.menuAction=Ve[Pe].IsMenu;if(Ve[Pe].Type===true){d.viewParameter="create"}if(Ve[Pe].Mehrfach==="X"||Ve[Pe].Stich==="4"){d.cycleSetSeqColVis=true;d.CycleSetSeqVis=true;d.ScheIndText=false;d.ScheIndTitle=false;d.ScheIndLBL=false;d.ScheIndRbTimeVis=false;d.ScheIndRbTimeKeyDateVis=false;d.ScheIndRbTimeFactCalVis=false;d.ScheIndRbPerformanceVis=false;d.ScheIndRbTimeEnabled=false;d.ScheIndRbTimeKeyDateEnabled=false;d.ScheIndRbTimeFactCalEnabled=false;d.ScheIndRbPerformanceEnabled=false;d.AbrhoLBL=false;d.AbrhoVis=false;d.HunitVis=false;d.FabklLBL=false;d.FabklVis=false;d.FabklDescVis=false;d.Fabkl="";d.FabklDesc="";d.ButtonNewCycleEnabled=true;d.OPText=true;d.OPTitle=true;d.OPLBL=true;d.OROPVis=true;d.AndOPvis=true;d.WsetLBL=true;d.WsetVis=true;d.KtextVis=true;d.StratLBL=true;d.StratVis=true;d.StratDescVis=true;d.MehrfachLBL=true;d.MehrfachVis=true;d.Mehrfach=true;d.StadtLBL=true;d.StadtVis=true;d.Stadt=l.getDateFormat(Ve[Pe].Startdate);d.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_STDATE");d.SzaehLBL=false;d.SzaehVis=false;d.UnitcVis=false;d.Unitc=" ";d.MpcyclenoLBL=false;d.MpcyclenoVis=false;d.MaintenanceCycleMode="Delete";d.cycleIndMultCntr=true;d.cycleType=2}else if(Ve[Pe].Strat===""&&(Ve[Pe].Stich===" "||Ve[Pe].Stich==="1"||Ve[Pe].Stich==="2")){d.cycleSetSeqColVis=false;d.CycleSetSeqVis=false;d.ScheIndText=true;d.ScheIndTitle=true;d.ScheIndLBL=true;d.ScheIndRbTimeEnabled=true;d.ScheIndRbTimeKeyDateEnabled=true;d.ScheIndRbTimeFactCalEnabled=true;d.ScheIndRbPerformanceEnabled=true;d.AbrhoLBL=true;d.AbrhoVis=true;d.HunitVis=true;d.FabklLBL=true;d.FabklVis=true;d.FabklDescVis=true;d.Fabkl="";d.FabklDesc="";d.StadtLBL=true;d.StadtVis=true;d.Stadt=l.getDateFormat(Ve[Pe].Startdate);d.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");d.SzaehLBL=false;d.SzaehVis=false;d.UnitcVis=false;d.Unitc=" ";d.MpcyclenoLBL=false;d.MpcyclenoVis=false;d.MaintenanceCycleMode="Delete";d.cycleIndSingle=true;d.cycleType=0}else if(Ve[Pe].Strat!==""&&Ve[Pe].Stich==="3"){d.cycleSetSeqColVis=false;d.CycleSetSeqVis=false;d.ScheIndText=false;d.ScheIndTitle=false;d.ScheIndLBL=false;d.ScheIndRbTimeVis=false;d.ScheIndRbTimeKeyDateVis=false;d.ScheIndRbTimeFactCalVis=false;d.ScheIndRbPerformanceVis=false;d.ScheIndRbTimeEnabled=false;d.ScheIndRbTimeKeyDateEnabled=false;d.ScheIndRbTimeFactCalEnabled=false;d.ScheIndRbPerformance=true;d.AbrhoLBL=false;d.AbrhoVis=false;d.HunitVis=false;d.FabklLBL=false;d.FabklVis=false;d.FabklDescVis=false;d.Fabkl="";d.FabklDesc="";d.StratLBL=true;d.StratVis=true;d.StratDescVis=true;d.Strat=Ve[Pe].Strat;n.readScheduling(Ve[Pe],Ve[Pe].Strat,"AIWMPMI");d.StadtLBL=false;d.StadtVis=false;d.Stadt=l.getDateFormat(Ve[Pe].Startdate);d.SzaehLBL=true;d.SzaehVis=true;d.UnitcVis=true;d.MpcyclenoLBL=true;d.MpcyclenoVis=true;d.MaintenanceCycleMode="None";d.cycleIndStrateg=true;d.cycleType=1}else if(Ve[Pe].Strat.indexOf("TIME")>-1&&Ve[Pe].Mehrfach===""&&Ve[Pe].Stich!=="3"){d.ScheIndText=true;d.ScheIndTitle=true;d.ScheIndLBL=true;d.ScheIndRbTimeVis=true;d.ScheIndRbTimeKeyDateVis=true;d.ScheIndRbTimeFactCalVis=true;d.ScheIndRbPerformanceVis=true;d.AbrhoLBL=true;d.AbrhoVis=true;d.HunitVis=true;d.FabklLBL=true;d.FabklVis=true;d.FabklDescVis=true;d.Fabkl="";d.FabklDesc="";d.StratLBL=true;d.StratVis=true;d.StratDescVis=true;d.Strat=Ve[Pe].Strat;d.StadtLBL=true;d.StadtVis=true;d.Stadt=l.getDateFormat(Ve[Pe].Startdate);d.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");n.readScheduling(Ve[Pe],Ve[Pe].Strat,"AIWMPMI");d.SzaehLBL=false;d.SzaehVis=false;d.UnitcVis=false;d.Unitc=Ve[Pe].Unitc;d.MpcyclenoLBL=false;d.MpcyclenoVis=false;d.MaintenanceCycleMode="Delete";d.cycleIndStrateg=true;d.cycleType=1}else if(Ve[Pe].Strat===""&&Ve[Pe].Stich==="3"&&Ve[Pe].Mehrfach===""){d.cycleIndSingle=true;d.cycleType=0;d.ScheIndText=true;d.ScheIndTitle=true;d.ScheIndLBL=true;d.ScheIndRbTimeVis=true;d.ScheIndRbTimeKeyDateVis=true;d.ScheIndRbTimeFactCalVis=true;d.ScheIndRbPerformanceVis=true;d.ScheIndRbTimeEnabled=false;d.ScheIndRbTimeKeyDateEnabled=false;d.ScheIndRbTimeFactCalEnabled=false;d.FabklLBL=true;d.FabklVis=true;d.FabklDescVis=true;d.Fabkl="";d.FabklDesc="";d.StratLBL=false;d.StratVis=false;d.StratDescVis=false;d.Strat=Ve[Pe].Strat;d.StadtLBL=false;d.StadtVis=false;d.Stadt=l.getDateFormat(Ve[Pe].Startdate);d.StadtLBLText=n.getView().getModel("i18n").getProperty("CYCLE_START_TXT");d.SzaehLBL=true;d.SzaehVis=true;d.UnitcVis=true;d.Unitc=" ";d.MaintenanceCycleMode="Delete"}if(Ve[Pe].Stich==="1"){d.ScheIndRbTimeKeyDate=true;d.FabklEnabled=true;d.Fabkl=Ve[Pe].Fabkl;d.FabklDesc=Ve[Pe].FabklDesc}else if(Ve[Pe].Stich==="2"){d.ScheIndRbTimeFactCal=true;d.FabklEnabled=true;d.Fabkl=Ve[Pe].Fabkl;d.FabklDesc=Ve[Pe].FabklDesc}else if(Ve[Pe].Stich==="3"){d.ScheIndRbPerformance=true;d.FabklEnabled=false}else if(Ve[Pe].Stich===""||Ve[Pe].Stich===" "){d.ScheIndRbTime=true;d.FabklEnabled=false;d.Fabkl=Ve[Pe].Fabkl;d.FabklDesc=Ve[Pe].FabklDesc}if(Ve[Pe].Stich){d.Stich=parseInt(Ve[Pe].Stich)}else{d.Stich=0}d.Wset=Ve[Pe].Wset;d.Ktext=Ve[Pe].Ktext;d.Sfakt=Ve[Pe].Sfakt;d.Abrho=Ve[Pe].Abrho;d.Hunit=Ve[Pe].Hunit;d.StratDesc=Ve[Pe].StratDesc;d.Szaeh=Ve[Pe].Szaeh;d.Mpcycleno=Ve[Pe].PointStp;d.Andor=Ve[Pe].Andor;if(Ve[Pe].PointStp!==""){d.Unitc=Ve[Pe].Unitc}if(Ve[Pe].Andor==="X"){d.AndOP=true}else{d.OROP=true}d.Vspos=Ve[Pe].Vspos;d.Topos=Ve[Pe].Topos;d.Vsneg=Ve[Pe].Vsneg;d.Toneg=Ve[Pe].Toneg;d.Horiz=Ve[Pe].Horiz;d.CallConf=Ve[Pe].CallConf;d.PlanSort=Ve[Pe].PlanSort;d.Begru=Ve[Pe].Begru;d.cycleIndSingle=false;d.cycleIndStrategy=false;d.cycleIndMultCntr=false;switch(d.cycleType){case 0:d.cycleType=0;d.cycleIndSingle=true;d.cycleIndStrategyEnabled=false;d.cycleIndMultCntrEnabled=false;d.Strat=" ";d.StratDesc=" ";d.StratLBL=false;d.StratVis=false;d.StratDescVis=false;d.Wset=" ";d.Ktext=" ";d.WsetLBL=false;d.WsetVis=false;d.KtextVis=false;d.Mehrfach=false;d.MehrfachLBL=false;d.MehrfachVis=false;d.ButtonNewCycleEnabled=true;if(d.ScheIndRbPerformance===true){d.SzaehLBL=true;d.SzaehVis=true;d.UnitcVis=true;d.StadtLBL=false;d.StadtVis=false}break;case 1:d.cycleType=1;d.cycleIndStrategy=true;d.cycleIndSingleEnabled=false;d.cycleIndMultCntrEnabled=false;d.StratLBL=true;d.StratVis=true;d.StratDescVis=true;d.StratEnabled=true;d.Mehrfach=false;d.MehrfachLBL=false;d.MehrfachVis=false;d.Wset=" ";d.Ktext=" ";d.WsetLBL=false;d.WsetVis=false;d.KtextVis=false;d.ButtonNewCycleEnabled=false;break;case 2:d.cycleType=2;d.cycleIndMultCntr=true;d.cycleIndStrategyEnabled=false;d.cycleIndSingleEnabled=false;d.Strat=" ";d.StratDesc=" ";d.StratLBL=false;d.StratVis=false;d.StratDescVis=false;d.MehrfachLBL=true;d.MehrfachVis=true;d.MehrfachEnabled=true;d.WsetLBL=true;d.WsetVis=true;d.WsetEnabled=true;d.KtextVis=true;d.ButtonNewCycleEnabled=true;d.cycleSetSeqColVis=true;break}if(d.menuAction==="copy"||d.menuAction==="change"){if(d.Mptyp===""||d.Mptyp===undefined||d.Mptyp===" "){d.MptypEnabled=true}else{d.MptypEnabled=false}if(d.cycleType===1&&(d.Strat===""||d.Strat===undefined||d.Strat===" ")){d.StratEnabled=true}else{d.StratEnabled=false}if(d.cycleType===2&&(d.Mehrfach===false||d.Mehrfach===""||d.Mehrfach===undefined||d.Mehrfach===" ")){d.MehrfachEnabled=true}else{d.MehrfachEnabled=false}if(d.cycleType===2&&(d.Wset===""||d.Wset===undefined||d.Wset===" ")){d.WsetEnabled=true}else{d.WsetEnabled=false}}if(Ve[Pe].Type===false){d.viewParameter="change";d.WarplEnabled=false;if(d.Mptyp===""||d.Mptyp===undefined||d.Mptyp===" "){d.MptypEnabled=true}else{d.MptypEnabled=false}if(d.cycleType===1&&(d.Strat===""||d.Strat===undefined||d.Strat===" ")){d.StratEnabled=true}else{d.StratEnabled=false}if(d.cycleType===2&&(d.Mehrfach===false||d.Mehrfach===""||d.Mehrfach===undefined||d.Mehrfach===" ")){d.MehrfachEnabled=true}else{d.MehrfachEnabled=false}if(d.cycleType===2&&(d.Wset===""||d.Wset===undefined||d.Wset===" ")){d.WsetEnabled=true}else{d.WsetEnabled=false}}if(r.MPCycle){var Ie=r.MPCycle.results;if(Ie){for(var Le=0;Le<Ie.length;Le++){if(d.Warpl===Ie[Le].Mplan){Ie[Le].Psort=Ie[Le].PointTxt;d.cycleModel.push(Ie[Le])}}}}if(d.cycleModel){var ye=d.cycleModel.length;for(var De=0;De<ye;De++){if(d.menuAction==="copy"||d.menuAction==="change"){d.cycleModel[De].Zykl1Enabled=false;d.cycleModel[De].ZeiehEnabled=false;d.cycleModel[De].PakTextEnabled=false;d.cycleModel[De].OffsetEnabled=false;d.cycleModel[De].PointEnabled=false;d.cycleModel[De].CycleseqiEnabled=false}else{d.cycleModel[De].Zykl1Enabled=true;d.cycleModel[De].ZeiehEnabled=true;d.cycleModel[De].PakTextEnabled=true;d.cycleModel[De].OffsetEnabled=true;d.cycleModel[De].PointEnabled=true;d.cycleModel[De].CycleseqiEnabled=true}}}if(r.MPItem){var ke=r.MPItem.results;if(ke){var Fe=new t;var Ae=[];for(var we=0;we<ke.length;we++){if(d.Warpl===ke[we].Mplan){var qe={};qe.Mitemnumb=ke[we].Mitemnumb;qe.Pstxt=ke[we].Pstxt;qe.Cycleseq=ke[we].Cycleseq;qe.Tplnr=ke[we].TplnrMi;qe.Pltxt=ke[we].Flocdesc;qe.Equnr=ke[we].Equnr;qe.Eqktx=ke[we].Equipdesc;qe.AsmblyOb=ke[we].Bautl;qe.Werks=ke[we].PlntMi;qe.Planningplantdes=ke[we].Planningplantdes;qe.Auart=ke[we].Auart;qe.oTypeTxt=ke[we].Ordertypedesc;qe.Qmart=ke[we].Qmart;qe.nTypeTxt=ke[we].Qmartx;qe.ArbpMi=ke[we].ArbpMi;qe.WergwMi=ke[we].WergwMi;qe.Ingrp=ke[we].IngrpMi;qe.Innam=ke[we].Plannergrpdesc;qe.Zeieh=ke[we].Zeieh;qe.Priok=ke[we].Priok;qe.ItmPriotxt=ke[we].GsberMi;qe.GsberMi=ke[we].GsberMi;qe.Gtext=ke[we].Gtext;qe.TaskDet=ke[we].TaskDet;qe.Ilart=ke[we].Ilart;qe.Ilatx=ke[we].Ilatx;qe.PlntyMi=ke[we].PlntyMi;qe.ApfktMi=ke[we].ApfktMi;qe.PlnnrMi=ke[we].PlnnrMi;qe.PlnalMi=ke[we].PlnalMi;qe.Gpcounterdesc=ke[we].Gpcounterdesc;qe.AnlzuMi=ke[we].AnlzuMi;qe.Anlzux=ke[we].Anlzux;qe.SwerkMil=ke[we].SwerkMil;qe.Name1=ke[we].Name1;qe.StortMil=ke[we].StortMil;qe.Locationdesc=ke[we].Locationdesc;qe.MsgrpIl=ke[we].MsgrpIl;qe.BeberMil=ke[we].BeberMil;qe.Fing=ke[we].Fing;qe.Tele=ke[we].Tele;qe.ArbplIl=ke[we].ArbplIl;qe.Workcenterdesc=ke[we].Workcenterdesc;qe.AbckzIl=ke[we].AbckzIl;qe.Abctx=ke[we].Abctx;qe.EqfnrIl=ke[we].EqfnrIl;qe.BukrsMil=ke[we].BukrsMil;qe.Butxt=ke[we].Butxt;qe.City=ke[we].City;qe.Anln1Mil=ke[we].Anln1Mil;qe.Anln2Mil=ke[we].Anln2Mil;qe.Txt50=ke[we].Txt50;qe.GsberIl=ke[we].GsberIl;qe.KostlMil=ke[we].KostlMil;qe.Contareaname=ke[we].Contareaname;qe.KokrsMil=ke[we].KokrsMil;qe.Posid=ke[we].Posid;qe.Post1=ke[we].Post1;qe.AufnrIl=ke[we].AufnrIl;qe.SettleOrdDesc=ke[we].SettleOrdDesc;qe.PlnnrMi=ke[we].PlnnrMi;qe.PlntyMi=ke[we].PlntyMi;qe.PlnalMi=ke[we].PlnalMi;qe.QmartLBL=true;qe.QmartVis=true;qe.nTypetxtVis=true;qe.AuartLBL=true;qe.AuartVis=true;qe.oTypeTxtVis=true;qe.CycleseqLBL=false;qe.CycleseqVis=false;qe.AsmblyObMaxLength=0;qe.maintItemE=false;qe.cycleSetE=false;qe.TplnrEnabled=false;qe.equiE=false;qe.assemblyE=false;qe.CycleseqVS="None";qe.CycleseqVST="";qe.TplnrVS="None";qe.TplnrVST="";qe.EqunrVS="None";qe.EqunrVST="";qe.AsmblyObVS="None";qe.AsmblyObVST="";qe.WerksVS="None";qe.WerksVST="";qe.AuartVS="None";qe.AuartVST="";qe.QmartVS="None";qe.QmartVST="";qe.ArbpMiVS="None";qe.ArbpMiVST="";qe.WergwMiVS="None";qe.WergwMiVST="";qe.IngrpVS="None";qe.IngrpVST="";if(d.Mptyp==="NO"){qe.AuartLBL=false;qe.AuartVis=false;qe.oTypeTxtVis=false}if(d.Mptyp==="PM"){qe.QmartLBL=false;qe.QmartVis=false;qe.nTypetxtVis=false}if(r.MPLAM.results.length>0){var We=r.MPLAM.results;for(var D=0;D<We.length;D++){if(We[D].Mplan===ke[we].Mplan&&We[D].Mitemnumb===ke[we].Mitemnumb){var Be={Mplan:ke[we].Mplan,Mitemnumb:ke[we].Mitemnumb,Lrpid:We[D].Lrpid,LrpidDesc:We[D].LrpDescr,Strtptatr:We[D].Strtptatr,Endptatr:We[D].Endptatr,Length:We[D].Length,LinUnit:We[D].LinUnit,LinUnitDesc:We[D].Uomtext,Startmrkr:We[D].Startmrkr,Endmrkr:We[D].Endmrkr,Mrkdisst:We[D].Mrkdisst,Mrkdisend:We[D].Mrkdisend,MrkrUnit:We[D].MrkrUnit,LamDer:We[D].LamDer};qe.lam=Be;break}}}Ae.push(qe)}}Fe.setData(Ae);d.itemModel=Ae}}if(r.MPOBList){var Ne=r.MPOBList.results;if(Ne){var Oe=[];for(var fe=0;fe<Ne.length;fe++){if(d.Warpl===Ne[fe].Mplan){var qe={};qe.Warpl=Ne[fe].Mplan;qe.Mitemnumb=Ne[fe].Mitemnumb;qe.MatnrObj=Ne[fe].MatnrObj;qe.FlocObj=Ne[fe].FlocObj;qe.EquiObj=Ne[fe].EquiObj;qe.AsmblyOb=Ne[fe].AsmblyOb;qe.Matnrtxt=Ne[fe].Matnrtxt;qe.Equnrtxt=Ne[fe].Equnrtxt;qe.Tplnrtxt=Ne[fe].Tplnrtxt;qe.Bautltxt=Ne[fe].Bautltxt;qe.Enable=false;Oe.push(qe)}}d.ObjListItems=Oe}}i.push(d)}f.setData(i)}}Se.tableBusy=false;he.setData(Se)};var Me=function(e){Se.tableBusy=false;he.setData(Se);var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=t.join("\n");n.invokeMessage(r)};if(p.FLAddrI.length>0){p.FLAddrI=$.map(p.FLAddrI,function(e){return $.extend(true,{},e)});for(var re=0;re<p.FLAddrI.length>0;re++){delete p.FLAddrI[re].AdNationEnable;delete p.FLAddrI[re].City1iVS;delete p.FLAddrI[re].StreetiVS}}if(p.EqAddrI.length>0){p.EqAddrI=$.map(p.EqAddrI,function(e){return $.extend(true,{},e)});for(var re=0;re<p.EqAddrI.length>0;re++){delete p.EqAddrI[re].AdNationEnable;delete p.EqAddrI[re].City1iVS;delete p.EqAddrI[re].StreetiVS}}Se.tableBusy=true;he.setData(Se);o.create(s,p,{success:Te,error:Me})},readSystemStatus:function(e,t){var a=this;var r=a.getView().getModel("valueHelp");var l="/SystemStatValueHelpSet(STSMA='',ObjTyp='IEQ')";var n=function(e){if(t==="AIWEQUI"&&(sData.Tplnr===""||sData.Tplnr===undefined)&&(sData.SuperordinateEquip===""||sData.SuperordinateEquip===undefined)){sData.Stattext=e.TXT04}if(t==="AIWFLOC"){sData.Stattext=e.TXT04}a.getModel(t).refresh()};var s=function(){};a._readData(l,r,n,s)},measPointObjChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.ObtypMs;if(l===""||l===undefined){r.ObtypMs="";r.Txt=""}e.getSource().setValueState("None")},onMeasPointObjChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.ObtypMs;if(l===""||l===undefined){r.ObtypMs="";r.Txt=""}else{r.ObtypMs=l.toUpperCase();this._measPointObject(r,t)}},_measPointObject:function(e,t){var a=this;var r=e.ObtypMs;var l=r.replace(/^[ ]+|[ ]+$/g,"");if(l!==""){var n="/MSPObjTypeSet";var s=[new sap.ui.model.Filter("Obtyp","EQ",r)];var o=a.getView().getModel("valueHelp");var i=function(r){if(r.results.length>0){e.ObtypMs=l;e.Txt=r.results[0].Txt}else{e.ObtypMs="";e.Txt="";e.ObtypMsVS="Error";e.ObtypMsVST="Invalid Entry"}a.getModel(t).refresh()};var d=function(r){var l=JSON.parse(r.response.body);var n=l.error.message.value;e.ObtypMsVS="Error";e.ObtypMsVST=n;a.getModel(t).refresh()};a._readData(n,o,i,d,s);e.EqunrVS="None";e.TplnrVS="None";e.Equnr="";e.Eqktx="";e.Tplnr="";e.Pltxt="";if(l==="IEQ"){e.EqunrInpVis=true;e.EqunrLblVis=true;e.EqktxInpVis=true;e.EqunrEnabled=true;e.TplnrInpVis=false;e.TplnrLblVis=false;e.PltxtInpVis=false;e.TplnrEnabled=false}if(l==="IFL"){e.EqunrInpVis=false;e.EqunrLblVis=false;e.EqktxInpVis=false;e.EqunrEnabled=false;e.TplnrInpVis=true;e.TplnrLblVis=true;e.PltxtInpVis=true;e.TplnrEnabled=true}a.getModel(t).refresh()}else{e.ObtypMs=l;a.getModel(t).refresh()}},onMeasPointObjVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();this.msptObjVH(e.getSource().getBindingContext(t).getProperty(a),t)},msptObjVH:function(e,t){var a=this;var r={title:this.getView().getModel("i18n").getProperty("MEASPOINT_OBJ_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/MSPObjTypeSet",template:new sap.m.StandardListItem({title:"{Obtyp}",description:"{Txt}"})},confirm:function(r){e.ObtypMs=r.getParameters().selectedItem.getProperty("title");e.Txt=r.getParameters().selectedItem.getProperty("description");e.ObtypMsVS="None";e.ObtypMsVST="";e.EqunrVS="None";e.TplnrVS="None";e.Equnr="";e.Eqktx="";e.Tplnr="";e.Pltxt="";if(e.ObtypMs==="IEQ"){e.EqunrInpVis=true;e.EqunrLblVis=true;e.EqktxInpVis=true;e.EqunrEnabled=true;e.TplnrInpVis=false;e.TplnrLblVis=false;e.PltxtInpVis=false;e.TplnrEnabled=false}if(e.ObtypMs==="IFL"){e.EqunrInpVis=false;e.EqunrLblVis=false;e.EqktxInpVis=false;e.EqunrEnabled=false;e.TplnrInpVis=true;e.TplnrLblVis=true;e.PltxtInpVis=true;e.TplnrEnabled=true}a.getModel(t).refresh()}};var l="/MSPObjTypeSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"Obtyp","Txt");s.open()},measPontCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Mptyp;if(l===""||l===undefined){r.Mptyp="";r.Mpttx=""}e.getSource().setValueState("None")},onmeasPointCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Mptyp;if(l===""||l===undefined){r.Mptyp="";r.Mpttx=""}else{r.Mptyp=l.toUpperCase();this._measPointCategory(r,t)}},_measPointCategory:function(e,t){var a=this;var r=e.Mptyp;var l=r.replace(/^[ ]+|[ ]+$/g,"");if(l!==""){var n="/MSPTypeSet";var s=[new sap.ui.model.Filter("Mptyp","EQ",r)];var o=a.getView().getModel("valueHelp");var i=function(r){if(r.results.length>0){e.Mptyp=l;e.Mpttx=r.results[0].Mpttx;if(e.Mptyp==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}}else{e.Mptyp="";e.Mpttx="";e.MptypVS="Error";e.MptypVST="Invalid Entry"}a.getModel(t).refresh()};var d=function(r){var l=JSON.parse(r.response.body);var n=l.error.message.value;e.MptypVS="Error";e.MptypVST=n;a.getModel(t).refresh()};a._readData(n,o,i,d,s)}else{e.Mptyp=l;a.getModel(t).refresh()}},onMsptCatVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();this.msptCatVH(e.getSource().getBindingContext(t).getProperty(a),t)},msptCatVH:function(e,t){var a=this;var r={title:this.getView().getModel("i18n").getProperty("MP_CAT_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/MSPTypeSet",template:new sap.m.StandardListItem({title:"{Mptyp}",description:"{Mpttx}"})},confirm:function(r){e.MptypVS="None";e.MptypVST="";e.Mptyp=r.getParameters().selectedItem.getProperty("title");e.Mpttx=r.getParameters().selectedItem.getProperty("description");if(e.Mptyp==="L"&&e.lam===undefined){e.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}a.getModel(t).refresh()}};var l="/MSPTypeSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"Mptyp","Mpttx");s.open()},charNameChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.AtnamMs;if(l===""||l===undefined){r.AtnamMs="";r.Atbez=""}e.getSource().setValueState("None")},onCharNameChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.AtnamMs;if(l===""||l===undefined){r.AtnamMs="";r.Atbez=""}else{r.AtnamMs=l.toUpperCase();this._characteristicName(r,t)}},_characteristicName:function(e,t){var a=this;var r=e.AtnamMs;var l=r.replace(/^[ ]+|[ ]+$/g,"");if(l!==""){var n="/CharNameSet";var s=[new sap.ui.model.Filter("Atnam","EQ",r)];var o=a.getView().getModel("valueHelp");a.BusyDialog.open();var i=function(r){a.BusyDialog.close();if(r.results.length>0){e.AtnamMs=l;e.Atbez=r.results[0].Atbez;e.AtnamMsVS="None";a.readCharUnit(e,a,l)}else{e.AtnamMs="";e.Atbez="";e.AtnamMsVS="Error";e.AtnamMsVST="Invalid Entry"}a.getModel(t).refresh()};var d=function(r){a.BusyDialog.close();var l=JSON.parse(r.response.body);var n=l.error.message.value;e.AtnamMsVS="Error";e.AtnamMsVST=n;a.getModel(t).refresh()};a._readData(n,o,i,d,s)}else{e.AtnamMs=l;a.getModel(t).refresh()}},onCharVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();this.charVH(e.getSource().getBindingContext(t).getProperty(a),t)},charVH:function(e,t){var a=this;var r={title:a.getView().getModel("i18n").getProperty("CHAR_NAME_TXT"),noDataText:a.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>CHARACTERISTIC}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>VALID_FRM}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>CHARS_GRP}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>FORMAT}"})]})],items:{path:"/CharNameSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Atnam}"}),new sap.m.Text({text:"{Atbez}"}),new sap.m.Text({text:"{Datuv}"}),new sap.m.Text({text:"{Atkla}"}),new sap.m.Text({text:"{Atfor}"})]})},confirm:function(r){e.AtnamMs=r.getParameter("selectedItem").getCells()[0].getText();e.Atbez=r.getParameter("selectedItem").getCells()[1].getText();e.AtnamMsVS="None";e.AtnamMsVSt="";a.getModel(t).refresh();r.getSource().getBinding("items").filter([]);a.readCharUnit(e,a,e.AtnamMs)}};var l="/CharNameSet";var n=[];var s=a.getView().getModel("valueHelp");var o=[new sap.m.Text({text:"{Atnam}"}),new sap.m.Text({text:"{Atbez}"}),new sap.m.Text({text:"{Datuv}"}),new sap.m.Text({text:"{Atkla}"}),new sap.m.Text({text:"{Atfor}"})];var i=c.getValueHelp(s,l,o,n,r,"Atnam","Atbez");i.open();i.setModel(this.getView().getModel("i18n"),"i18n")},onCounterSelect:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getParameters().selected;e.getSource().getBindingContext(t).getProperty(a).AtnamMsVS="None";e.getSource().getBindingContext(t).getProperty(a).CodgrVS="None";e.getSource().getBindingContext(t).getProperty(a).Desir="";e.getSource().getBindingContext(t).getProperty(a).Cjumc="";e.getSource().getBindingContext(t).getProperty(a).Pyeac="";if(r){e.getSource().getBindingContext(t).getProperty(a).Indct=true;e.getSource().getBindingContext(t).getProperty(a).countEnable=true;e.getSource().getBindingContext(t).getProperty(a).tEnable=false;e.getSource().getBindingContext(t).getProperty(a).Cdsuf=false}else{e.getSource().getBindingContext(t).getProperty(a).Indct=false;e.getSource().getBindingContext(t).getProperty(a).countEnable=false;e.getSource().getBindingContext(t).getProperty(a).tEnable=true}},onMaintPlanChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Warpl;if(l===""||l===undefined){r.Warpl=""}else{r.Warpl=l.toUpperCase();this._maintenancePlan(r,t)}},_maintenancePlan:function(e,t){var a=this;var r=e.Warpl;var l=r.replace(/^[ ]+|[ ]+$/g,"");if(l!==""){var n="/MPlanVHSet";var s=[new sap.ui.model.Filter("Warpl","EQ",r)];var o=a.getView().getModel("valueHelp");var i=function(r){if(r.results.length>0){e.Warpl=l;e.Wptxt=r.results[0].Wptxt;a.readMplanData(e,t)}else{e.WarplVs="Error";e.WarplVST="Invalid Entry";a.getModel(t).refresh()}};var d=function(r){var l=JSON.parse(r.response.body);var n=l.error.message.value;e.WarplVs="Error";e.WarplVST=n;a.getModel(t).refresh()};a._readData(n,o,i,d,s)}else{e.Warpl=l;a.getModel(t).refresh()}},onMaintPlanVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();this.maintPlanVH(e.getSource().getBindingContext(t).getProperty(a),t)},maintPlanVH:function(e,t){var a=this;var r={title:this.getView().getModel("i18n").getProperty("MAINTPLAN_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/MPlanVHSet",template:new sap.m.StandardListItem({title:"{Warpl}",description:"{Wptxt}"})},confirm:function(r){e.WarplVS="None";e.WarplVST="";e.Warpl=r.getParameters().selectedItem.getProperty("title");e.Wptxt=r.getParameters().selectedItem.getProperty("description");a.getModel(t).refresh()}};var l="/MPlanVHSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"Warpl","Wptxt");s.open()},readMaintPlanCat:function(){var e=this;var a="/MPLANItemCatgSet";var r=e.getView().getModel("valueHelp");var l=function(a){if(a.results.length>0){var r=[];for(var l=0;l<a.results.length;l++){r.push(a.results[l])}var n=new t([]);n.setData(r);e.getView().setModel(n,"MainPlanCatModel")}};var n=function(){};e._readData(a,r,l,n)},onMaintPlanCatChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Mptyp;if(l===""||l===undefined){e.getSource().setValueState("None")}r.Txt=e.getSource().getSelectedItem().getText();r.Mptyp=e.getSource().getProperty("selectedKey")},strategyChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Strat;if(l===""||l===undefined){r.Strat="";r.StratDesc=""}e.getSource().setValueState("None")},onStrategyChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Strat;if(l===""||l===undefined){r.Strat="";r.StratDesc=""}else{r.Strat=l.toUpperCase();r.cycleType=1;r.StratEnabled=true;r.MehrfachEnabled=false;r.WsetEnabled=false;this.cycleIndicatorSelected(a);this._changeStrategy(r,t)}},_changeStrategy:function(e,t){var a=this;var r=e.Strat;var l=r.replace(/^[ ]+|[ ]+$/g,"");if(l!==""){var n="/StrategySet";var s=a.getView().getModel("valueHelp");var o=[new sap.ui.model.Filter("Strat","EQ",r)];var i=function(n){if(n.results.length>0){e.StratDesc=n.results[0].Ktext;e.ButtonNewCycleEnabled=false;var s=n.results[0].Termk;if(s==="3"){e.AbrhoLBL=false;e.AbrhoVis=false;e.HunitVis=false;e.FabklLBL=false;e.Fabkl="";e.FabklVis=false;e.FabklDesc="";e.FabklDescVis=false;e.Unitc=n.results[0].Zeieh;e.UnitcVis=true;e.SzaehLBL=true;e.SzaehVis=true;e.Szaeh="";e.MpcyclenoLBL=true;e.MpcyclenoVis=true;e.StadtVis=false;e.StadtLBL=false}else{e.AbrhoLBL=true;e.AbrhoVis=true;e.HunitVis=true;e.FabklLBL=true;e.Fabkl="";e.FabklVis=true;e.FabklDesc="";e.FabklDescVis=true;e.SzaehLBL=false;e.SzaehVis=false;e.Szaeh="";e.MpcyclenoLBL=false;e.MpcyclenoVis=false;e.Unitc="";e.UnitcVis=false;e.StadtVis=true;e.StadtLBL=true;e.StadtLBLText=a.getView().getModel("i18n").getProperty("CYCLE_START_TXT")}e.Strat=l;a.getModel(t).refresh();a.readScheduling(e,r,t)}else{e.Strat="";e.StratDesc="";e.StratVS="Error";e.StratVST="Invalid Entry";a.getModel(t).refresh()}};var d=function(r){var l=JSON.parse(r.responseText);var n=l.error.message.value;e.StratVS="Error";e.StratVST=n;a.getModel(t).refresh()};a._readData(n,s,i,d,o)}else{e.Strat=l;a.getModel(t).refresh()}},onStrategyVH:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();this.strategyVH(e.getSource().getBindingContext(t).getProperty(a),t,a)},strategyVH:function(e,t,a){var r=this;var l={title:r.getView().getModel("i18n").getProperty("MAINT_STR"),noDataText:r.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STRATEGY}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SCHE_IND_TXT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>UNIT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>FACT_CAL}"})]})],items:{path:"/StrategySet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})]})},confirm:function(l){e.cycleType=1;e.StratEnabled=true;e.MehrfachEnabled=false;e.WsetEnabled=false;e.StratVS="None";e.StratVST="";e.Strat=l.getParameter("selectedItem").getCells()[0].getText();e.StratDesc=l.getParameter("selectedItem").getCells()[1].getText();var n=l.getParameter("selectedItem").getCells()[0].getText();var s=l.getParameter("selectedItem").getCells()[2].getText();r.cycleIndicatorSelected(a);e.ButtonNewCycleEnabled=false;if(s==="3"){e.ScheIndRbPerformance=false;e.AbrhoLBL=false;e.AbrhoVis=false;e.HunitVis=false;e.FabklLBL=false;e.Fabkl="";e.FabklVis=false;e.FabklDesc="";e.FabklDescVis=false;r.stratUnit=l.getParameter("selectedItem").getCells()[3].getText();e.SzaehLBL=true;e.SzaehVis=true;e.Szaeh="";e.Unitc=r.stratUnit;e.UnitcVis=true;e.StadtVis=false;e.StadtLBL=false;e.MpcyclenoLBL=true;e.MpcyclenoVis=true}else{e.AbrhoLBL=true;e.AbrhoVis=true;e.HunitVis=true;e.FabklLBL=true;e.Fabkl="";e.FabklVis=true;e.FabklDesc="";e.FabklDescVis=true;e.SzaehLBL=false;e.SzaehVis=false;e.Szaeh="";e.Unitc="";e.UnitcVis=false;e.StadtVis=true;e.StadtLBL=true;e.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");e.MpcyclenoLBL=false;e.MpcyclenoVis=false}r.readScheduling(e,n,t)}};var n="/StrategySet";var s=[];var o=r.getView().getModel("valueHelp");var i=[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})];var d=c.getValueHelp(o,n,i,s,l,"Strat","Ktext");d.open();d.setModel(this.getView().getModel("i18n"),"i18n")},readScheduling:function(e,t,a){var r=this;var l="/MPSHDParamSet('"+t+"')";var n=r.getView().getModel();var s=function(t){e.Fabkl=t.Fabkl;e.FabklDesc=t.FabklDesc;e.Abrho=t.Abrho;var l=t.Termk;if(l==="1"){e.Stich=1;e.ScheIndRbTimeKeyDate=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}else if(l==="2"){e.Stich=2;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbPerformanceEnabled=false;e.ScheIndRbTimeFactCal=true;e.ScheIndRbTimeFactCalEnabled=true}else if(l==="3"){e.Stich=3;e.ScheIndRbTimeEnabled=false;e.ScheIndRbTimeKeyDateEnabled=false;e.ScheIndRbTimeFactCalEnabled=false;e.ScheIndRbPerformance=true;e.ScheIndRbPerformanceEnabled=true;r.stratUnit=t.Zeieh}else if(l===""){e.Stich=0;e.ScheIndRbTime=true;e.ScheIndRbTimeKeyDateEnabled=true;e.ScheIndRbTimeEnabled=true;e.ScheIndRbTimeFactCalEnabled=true;e.ScheIndRbPerformanceEnabled=false}r.getView().getModel(a).refresh()};var o=function(){};r._readData(l,n,s,o)},onMultiCounterSelect:function(e){var t=this;var a=this.getFragmentModelName(e);var r=e.getSource().getBindingContext(a).getPath();var l=e.getSource().getBindingContext(a).getProperty(r);l.cycleType=2;l.StratEnabled=false;l.MehrfachEnabled=true;l.WsetEnabled=true;if(l.Mehrfach){l.ScheIndText=false;l.ScheIndTitle=false;l.ScheIndLBL=false;l.ScheIndRbTimeVis=false;l.ScheIndRbTimeKeyDateVis=false;l.ScheIndRbTimeFactCalVis=false;l.ScheIndRbPerformanceVis=false;l.AbrhoLBL=false;l.AbrhoVis=false;l.HunitVis=false;l.FabklLBL=false;l.Fabkl="";l.FabklVis=false;l.FabklDesc="";l.FabklDescVis=false;l.ButtonNewCycleEnabled=true;l.CycleSetSeqVis=true;l.OPText=true;l.OPTitle=true;l.OPLBL=true;l.OROPVis=true;l.AndOPvis=true;l.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE")}else{l.StratEnabled=true;l.ScheIndText=true;l.ScheIndTitle=true;l.ScheIndLBL=true;l.ScheIndRbTimeVis=true;l.ScheIndRbTimeKeyDateVis=true;l.ScheIndRbTimeFactCalVis=true;l.ScheIndRbPerformanceVis=true;l.AbrhoLBL=true;l.AbrhoVis=true;l.HunitVis=true;l.FabklLBL=true;l.Fabkl="";l.FabklVis=true;l.FabklDesc="";l.FabklDescVis=true;l.OPText=false;l.OPTitle=false;l.OPLBL=false;l.OROPVis=false;l.AndOPvis=false;l.CycleSetSeqVis=false}t.cycleIndicatorSelected(r);if(l.cycleIndMultCntr===true&&l.Mehrfach===true||l.cycleIndMultCntr===true&&l.Wset!==""){l.ButtonNewCycleEnabled=true;l.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE")}else{l.ButtonNewCycleEnabled=false;l.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_START_TXT")}t.getView().getModel(a).refresh()},cycleSetChange:function(e){var t=this.getFragmentModelName(e);var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Wset;if(l===""||l===undefined){r.Wset="";r.Ktext=""}e.getSource().setValueState("None")},onCycleSetChange:function(e){var t=this.oModelAIWMPMI;var a=e.getSource().getBindingContext(t).getPath();var r=e.getSource().getBindingContext(t).getProperty(a);var l=r.Wset;if(l===""||l===undefined){r.Wset="";r.Ktext=""}else{r.cycleType=2;r.StratEnabled=false;r.MehrfachEnabled=true;r.WsetEnabled=true;r.Wset=l.toUpperCase();this.cycleIndicatorSelected(a);this._changeCycleSet(r,t,a)}},_changeCycleSet:function(e,t,a){var r=this;var l=e.Wset;var n=l.replace(/^[ ]+|[ ]+$/g,"");if(n!==""){var s="/CyclesetSet";var o=r.getView().getModel("valueHelp");var i=[new sap.ui.model.Filter("Strat","EQ",l)];var d=function(s){if(s.results.length>0){e.Wset=n;e.Ktext=s.results[0].Ktext;e.ScheIndText=false;e.ScheIndTitle=false;e.ScheIndLBL=false;e.ScheIndRbTimeVis=false;e.ScheIndRbTimeKeyDateVis=false;e.ScheIndRbTimeFactCalVis=false;e.ScheIndRbPerformanceVis=false;e.AbrhoLBL=false;e.AbrhoVis=false;e.HunitVis=false;e.FabklLBL=false;e.Fabkl="";e.FabklVis=false;e.FabklDesc="";e.FabklDescVis=false;e.ButtonNewCycleEnabled=true;e.OPText=true;e.OPTitle=true;e.OPLBL=true;e.OROPVis=true;e.AndOPvis=true;r.getModel(t).refresh();r.readCycleDetails(l,t,a)}else{e.WsetVs="Error";e.WsetVST="Invalid Entry";e.Wset="";e.Ktext="";r.getModel(t).refresh()}};var c=function(a){var l=JSON.parse(a.response.body);var n=l.error.message.value;e.WsetVs="Error";e.WsetVST=n;r.getModel(t).refresh()};r._readData(s,o,d,c,i)}else{e.Wset=n;r.getModel(t).refresh()}},readCycleDetails:function(e,t,a){var r=this;if(e!==""){var l="/CyclesetSet('"+e+"')/CyclesetToMPCycle";var n=this.getView().getModel();var s=function(e){var l=r.getView().getModel(t).getProperty(a+"/cycleModel");l=[];for(var n=0;n<e.results.length;n++){l.push(e.results[n])}r.getView().getModel(t).setProperty(a+"/cycleModel",l)};var o=function(){};r._readData(l,n,s,o)}},onCycleSetVH:function(e){var t=this.oModelAIWMPMI;var a=e.getSource().getBindingContext(t).getPath();this.cycleSetVH(e.getSource().getBindingContext(t).getProperty(a),t,a)},cycleSetVH:function(e,t,a){var r=this;var l={title:r.getView().getModel("i18n").getProperty("CYC_SET"),noDataText:r.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>STRATEGY}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DESCRIPTION}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SCHE_IND_TXT}"})]})],items:{path:"/CyclesetSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})]})},confirm:function(l){e.cycleType=2;e.StratEnabled=false;e.MehrfachEnabled=true;e.WsetEnabled=true;e.WsetVS="None";e.WsetVST="";e.Wset=l.getParameter("selectedItem").getCells()[0].getText();e.Ktext=l.getParameter("selectedItem").getCells()[1].getText();e.ScheIndText=false;e.ScheIndTitle=false;e.ScheIndLBL=false;e.ScheIndRbTimeVis=false;e.ScheIndRbTimeKeyDateVis=false;e.ScheIndRbTimeFactCalVis=false;e.ScheIndRbPerformanceVis=false;e.AbrhoLBL=false;e.AbrhoVis=false;e.HunitVis=false;e.FabklLBL=false;e.Fabkl="";e.FabklVis=false;e.FabklDesc="";e.FabklDescVis=false;e.ButtonNewCycleEnabled=true;e.OPText=true;e.OPTitle=true;e.OPLBL=true;e.OROPVis=true;e.AndOPvis=true;r.getModel(t).refresh();r.cycleIndicatorSelected(a);r.readCycleDetails(e.Wset,t,a)}};var n="/CyclesetSet";var s=[];var o=r.getView().getModel("valueHelp");var i=[new sap.m.Text({text:"{Strat}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Termk}"}),new sap.m.Text({text:"{Zeieh}"}),new sap.m.Text({text:"{Fabkl}"})];var d=c.getValueHelp(o,n,i,s,l,"Strat","Ktext");d.open();d.setModel(this.getView().getModel("i18n"),"i18n")},handleBOMONValidation:function(e,t,a,r,l){var n=this;var s="";if(e.length>0||t.length>0||a.length>0||r.length>0||l.length>0){for(var o=0;o<e.length;o++){if(e[o].Matnr===""||e[o].matValueState==="Error"){n.errorFlag=false;e[o].matValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitMbom")}if(e[o].Werks===""||e[o].plantValueState==="Error"){n.errorFlag=false;e[o].plantValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitMbom")}if(e[o].Stlan===""||e[o].usageValueState==="Error"){n.errorFlag=false;e[o].usageValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitMbom")}if(e[o].Stalt===""||e[o].altbomValueState==="Error"){n.errorFlag=false;e[o].altbomValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitMbom")}}if(s!==""){n.MessageList.push({type:"Error",title:s});s=""}for(var o=0;o<t.length;o++){if(t[o].Eqnrbom===""||t[o].equipValueState==="Error"){n.errorFlag=false;t[o].equipValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitEbom")}if(t[o].Werks===""||t[o].plantValueState==="Error"){n.errorFlag=false;t[o].plantValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitEbom")}if(t[o].Stlan===""||t[o].usageValueState==="Error"){n.errorFlag=false;t[o].usageValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitEbom")}}if(s!==""){n.MessageList.push({type:"Error",title:s});s=""}for(var o=0;o<a.length;o++){if(a[o].Tplnrbom===""||a[o].FLValueState==="Error"){n.errorFlag=false;a[o].FLValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitFlbom")}if(a[o].Werks===""||a[o].equipValueState==="Error"){n.errorFlag=false;a[o].plantValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitFlbom")}if(a[o].Stlan===""||a[o].equipValueState==="Error"){n.errorFlag=false;a[o].usageValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitFlbom")}}if(s!==""){n.MessageList.push({type:"Error",title:s});s=""}for(var o=0;o<r.length;o++){if(r[o].WbsExt===""||r[o].wbsValueState==="Error"){n.errorFlag=false;r[o].wbsValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitWbsbom")}if(r[o].Matnr===""||r[o].matValueState==="Error"){n.errorFlag=false;r[o].matValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitWbsbom")}if(r[o].Werks===""||r[o].plantValueState==="Error"){n.errorFlag=false;r[o].plantValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitWbsbom")}if(r[o].Stlan===""||r[o].usageValueState==="Error"){n.errorFlag=false;r[o].usageValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitWbsbom")}}if(s!==""){n.MessageList.push({type:"Error",title:s});s=""}for(var o=0;o<l.length;o++){if(l[o].Objnetwrk===""||l[o].NetIDValueState==="Error"){n.errorFlag=false;l[o].NetIDValueState="Error";s=this.getResourceBundle().getText("incompleteSubmitON")}if(l[o].Netxt===""){n.errorFlag=false;s=this.getResourceBundle().getText("incompleteSubmitON")}}if(s!==""){n.MessageList.push({type:"Error",title:s});s=""}}if(!n.errorFlag){sap.ui.getCore().getModel("AIWListMatModel").refresh();sap.ui.getCore().getModel("AIWListEqModel").refresh();sap.ui.getCore().getModel("AIWListFLModel").refresh();sap.ui.getCore().getModel("AIWListWBSModel").refresh();sap.ui.getCore().getModel("AIWListONModel").refresh()}},updateCountOnLoad:function(){var e=this;var a="/ChangeRequestSet";var r=e.getView().getModel("ApprovalModel");var l=[new n("ChangeRequestId",s.EQ,e.cReqNo),new n("Count",s.EQ,"X"),new n("OTC",s.EQ,"183"),new n("OTC",s.EQ,"237"),new n("OTC",s.EQ,"185"),new n("OTC",s.EQ,"1230"),new n("OTC",s.EQ,"1223"),new n("OTC",s.EQ,"493"),new n("OTC",s.EQ,"/UGI/TLFL"),new n("OTC",s.EQ,"/UGI/TLEQ"),new n("OTC",s.EQ,"/UGI/TL"),new n("OTC",s.EQ,"DRF_0038"),new n("OTC",s.EQ,"DRF_0039"),new n("OTC",s.EQ,"1345"),new n("OTC",s.EQ,"DRF_0013"),new n("OTC",s.EQ,"/UGI/WBSBM")];var o=e.getView().getModel("mainView").getData();var i=function(a){var r=a.results;var l=r[0].EquiCount===""?"0":r[0].EquiCount;var n=r[0].FlocCount===""?"0":r[0].FlocCount;var s=r[0].MsptCount===""?"0":r[0].MsptCount;var i=r[0].MpmiCount===""?"0":r[0].MpmiCount;if(s!==""&&s!=="0"){e.getView().getModel("EnableModel").setProperty("/Measuring Point",true)}else{e.getView().getModel("EnableModel").setProperty("/Measuring Point",false)}if(i!==""&&i!=="0"){e.getView().getModel("EnableModel").setProperty("/Maintenance Plan",true)}else{e.getView().getModel("EnableModel").setProperty("/Maintenance Plan",false)}o.functionalLocationMain=n;o.equipmentMain=l;o.measuringPointMain=s;o.maintenancePlanMain=i;e.getView().getModel("mainView").setData(o);var d=r[0].MbomCount===""?"0":r[0].MbomCount;var c=r[0].EbomCount===""?"0":r[0].EbomCount;var p=r[0].FbomCount===""?"0":r[0].FbomCount;var u=r[0].WbomCount===""?"0":r[0].WbomCount;var g=r[0].ObjnCount===""?"0":r[0].ObjnCount;var m=parseInt(d)+parseInt(c)+parseInt(p)+parseInt(u);if(g!==""&&g!=="0"){e.getView().getModel("EnableModel").setProperty("/Object Network",true)}else{e.getView().getModel("EnableModel").setProperty("/Object Network",false)}var f=r[0].WcCount===""?"0":r[0].WcCount;var h=r[0].GntlCount===""?"0":r[0].GntlCount;var S=r[0].EqtlCount===""?"0":r[0].EqtlCount;var T=r[0].FltlCount===""?"0":r[0].FltlCount;var M=r[0].ObjlCount===""?"0":r[0].ObjlCount;var b=(parseInt(h)+parseInt(S)+parseInt(T)).toString();if(f!==""&&f!=="0"){e.getView().getModel("EnableModel").setProperty("/Work Center",true)}else{e.getView().getModel("EnableModel").setProperty("/Work Center",false)}if(b!==""&&b!=="0"){e.getView().getModel("EnableModel").setProperty("/Task List",true)}else{e.getView().getModel("EnableModel").setProperty("/Task List",false)}if(M!==""&&M!=="0"){e.getView().getModel("EnableModel").setProperty("/Object Link",true)}else{e.getView().getModel("EnableModel").setProperty("/Object Link",false)}var E={MatBomCount:d,EqBomCount:c,FLBomCount:p,WbsBomCount:u,TotalBomCount:m.toString(),ONCount:g,WCCount:f,GTLCount:h,ETLCount:S,FTLCount:T,TotalTLCount:b.toString(),OLCount:M};var v=new t(E);e.getView().setModel(v,"CountModel");e.CountObj={mbomCount:parseInt(d),ebomCount:parseInt(c),flbomCount:parseInt(p),wbsbomCount:parseInt(u),onCount:parseInt(g),WCCount:parseInt(f),GTLCount:parseInt(h),ETLCount:parseInt(S),FTLCount:parseInt(T),OLCount:parseInt(M)};e.handleApprovalLoad()};var d=function(){};sap.ui.getCore().setModel(new t([]),this.oModelAIWFLOC);sap.ui.getCore().setModel(new t([]),this.oModelAIWEQUI);sap.ui.getCore().setModel(new t([]),this.oModelAIWMSPT);sap.ui.getCore().setModel(new t([]),this.oModelAIWMPMI);this.getView().setModel(new t([]),this.oModelAIWFLOC);this.getView().setModel(new t([]),this.oModelAIWEQUI);this.getView().setModel(new t([]),this.oModelAIWMSPT);this.getView().setModel(new t([]),this.oModelAIWMPMI);e._readData(a,r,i,d,l)},mandateFillCheck:function(e,t){var a;var r=true;var l=t.length;var n=l-1;if(l<=0){return r}if(e==="CreateMaterialBom"){if(t[n].Matnr===""||t[n].matValueState==="Error"){t[n].matValueState="Error";r=false}if(t[n].Werks===""||t[n].plantValueState==="Error"){t[n].plantValueState="Error";r=false}if(t[n].Stlan===""||t[n].usageValueState==="Error"){t[n].usageValueState="Error";r=false}a=this.getResourceBundle().getText("incmpltKeyMbom");sap.ui.getCore().getModel("AIWListMatModel").setData(t);this.getView().getModel("AIWListMatModel").refresh()}if(e==="CreateEquipmentBom"){if(t[n].Eqnrbom===""||t[n].equipValueState==="Error"){t[n].equipValueState="Error";r=false}if(t[n].Werks===""||t[n].plantValueState==="Error"){t[n].plantValueState="Error";r=false}if(t[n].Stlan===""||t[n].usageValueState==="Error"){t[n].usageValueState="Error";r=false}a=this.getResourceBundle().getText("incmpltKeyEbom");sap.ui.getCore().getModel("AIWListEqModel").setData(t);this.getView().getModel("AIWListEqModel").refresh()}if(e==="CreateFLBom"){if(t[n].Tplnrbom===""||t[n].FLValueState==="Error"){t[n].FLValueState="Error";r=false}if(t[n].Werks===""||t[n].plantValueState==="Error"){t[n].plantValueState="Error";r=false}if(t[n].Stlan===""||t[n].usageValueState==="Error"){t[n].usageValueState="Error";r=false}a=this.getResourceBundle().getText("incmpltKeyFlbom");sap.ui.getCore().getModel("AIWListFLModel").setData(t);this.getView().getModel("AIWListFLModel").refresh()}if(e==="createWbsbom"){if(t[n].WbsExt===""||t[n].wbsValueState==="Error"){t[n].wbsValueState="Error";r=false}if(t[n].Matnr===""||t[n].matValueState==="Error"){t[n].matValueState="Error";r=false}if(t[n].Werks===""||t[n].plantValueState==="Error"){t[n].plantValueState="Error";r=false}if(t[n].Stlan===""||t[n].usageValueState==="Error"){t[n].usageValueState="Error";r=false}a=this.getResourceBundle().getText("incmpltKeyWbsbom");sap.ui.getCore().getModel("AIWListWBSModel").setData(t);this.getView().getModel("AIWListWBSModel").refresh()}if(e==="createObjNet"){if(t[n].Objnetwrk===""||t[n].NetIDValueState==="Error"){t[n].NetIDValueState="Error";r=false}a=this.getResourceBundle().getText("incmpltKeyON");sap.ui.getCore().getModel("AIWListONModel").setData(t);this.getView().getModel("AIWListONModel").refresh()}if(!r){this.createMessagePopover([{type:"Error",title:a}])}return r},_getMessagePopover:function(){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment("ugieamui.mdg.eam.lib.popover.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}return this._oMessagePopover},handleMessagePopoverPress:function(e){this._getMessagePopover().openBy(e.getSource())},createMessagePopover:function(e,t){var a,r=this._getMessagePopover();if(t){e.push({type:"Success",title:"No errors found"})}sap.ui.getCore().getMessageManager().removeAllMessages();for(var l=0;l<e.length;l++){e[l].message=e[l].title;a=new u({message:e[l].message,type:e[l].type,target:"/Dummy",processor:this.getView().getModel()});sap.ui.getCore().getMessageManager().addMessages(a)}r.toggle(this.getView().byId("idMessagePopover"));this.getView().byId("idMessagePopover").setEnabled(true);this.getView().byId("idMessagePopover").setText(e.length+"")},handleSubmitValueState:function(e,t,a,r){var l=a[e];if(l===""||l===undefined){a[t]="Error";this.errorFlag=false;this.MessageList.push({type:"Error",title:r})}},readSystem:function(){var e=this.getView().getModel("valueHelp");var a=this;var r=new t;var l;e.read("/SystemTypeSet",{success:function(e){if(e.results[0].System===true){l={maxlengthMat:40,maxlengthComp:40}}else{l={maxlengthMat:18,maxlengthComp:10}}r.setData(l);a.getView().setModel(r,"maxLengthModel")}})},onTLWcVH:function(e){var t=this;var a,r,l,n,s,o,i;if(this.action==="createGTL"){a=e.getSource().getBindingContext("GTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createETL"){a=e.getSource().getBindingContext("ETLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}else if(this.action==="createFTL"){a=e.getSource().getBindingContext("FTLHeaderModel").getPath();t.sindex=parseInt(a.split("/")[2])}var d;if(d===undefined){var c=new sap.m.TableSelectDialog({title:this.getView().getModel("i18n").getProperty("WORK_CENTER"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"Work Center Category"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Plant"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Work Center"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Description"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"Language"})]})],items:{path:"/WorkCenterVHSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]})},confirm:function(e){if(t.action==="createGTL"||t.action==="changeGTL"){s=t.getView().getModel("GTLHeaderModel");r=s.getData();r[0][t.sindex].wcValueState="None";r[0][t.sindex].wcValueStateTxt="";r[0][t.sindex].wc=e.getParameter("selectedItem").getCells()[2].getText();r[0][t.sindex].wcDesc=e.getParameter("selectedItem").getCells()[3].getText();r[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[1].getText();s.setData(r);t.WCPPCheck()}else if(t.action==="createETL"||t.action==="changeETL"){o=t.getView().getModel("ETLHeaderModel");l=o.getData();l[0][t.sindex].wcValueState="None";l[0][t.sindex].wcValueStateTxt="";l[0][t.sindex].wc=e.getParameter("selectedItem").getCells()[2].getText();l[0][t.sindex].wcDesc=e.getParameter("selectedItem").getCells()[3].getText();l[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[1].getText();o.setData(l);t.WCPPCheck()}else if(t.action==="createFTL"||t.action==="changeFTL"){i=t.getView().getModel("FTLHeaderModel");n=i.getData();n[0][t.sindex].wcValueState="None";n[0][t.sindex].wcValueStateTxt="";n[0][t.sindex].wc=e.getParameter("selectedItem").getCells()[2].getText();n[0][t.sindex].wcDesc=e.getParameter("selectedItem").getCells()[3].getText();n[0][t.sindex].plant=e.getParameter("selectedItem").getCells()[1].getText();i.setData(n);t.WCPPCheck()}},search:function(e){var t=e.getParameter("value");e.getSource().getBinding("items").filter(!t?[]:[new sap.ui.model.Filter([new sap.ui.model.Filter("Arbpl",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("Ktext",sap.ui.model.FilterOperator.Contains,t)],true)])}});var p="/WorkCenterVHSet";var u=this.getView().getModel("valueHelp");u.read(p,{success:function(e){if(e.results.length>0){var a=sap.ui.getCore().getModel("AIWListWCModel").getData();if(a.length>0){for(var r=0;r<a.length;r++){if(a[r].wc){var l={Verwe:a[r].wcCat,Werks:a[r].plant,Arbpl:a[r].wc,Ktext:a[r].wcDesc,Spras:e.results[0].Spras};e.results.unshift(l)}}}d=e;var n=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]});var s=new sap.ui.model.json.JSONModel;s.setData(e);c.setModel(s);c.bindAggregation("items","/results",n)}else{c.setNoDataText(t.getView().getModel("i18n").getProperty("NO_DATA"))}}})}else{var g=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Verwe}"}),new sap.m.Text({text:"{Werks}"}),new sap.m.Text({text:"{Arbpl}"}),new sap.m.Text({text:"{Ktext}"}),new sap.m.Text({text:"{Spras}"})]});var m=new sap.ui.model.json.JSONModel;m.setData(d);c.setModel(m);c.setGrowingThreshold(d.results.length);c.bindAggregation("items","/results",g);var f=c.getItems();for(var h=0;h<f.length;h++){f[h].setVisible(true)}}c.open()},WCPPCheck:function(){var e=this;var t;var a=this.getView().getModel();if(this.action.indexOf("GTL")>-1){var r=e.getView().getModel("GTLHeaderModel");var l=r.getData();t="/WorkcentrePlantValSet(Werks='"+l[0][e.sindex].Iwerk+"',Tarbpl='"+l[0][e.sindex].wc+"',Wcplant='"+l[0][e.sindex].plant+"')"}else if(this.action.indexOf("ETL")>-1){var n=e.getView().getModel("ETLHeaderModel");var s=n.getData();t="/WorkcentrePlantValSet(Werks='"+s[0][e.sindex].Iwerk+"',Tarbpl='"+s[0][e.sindex].wc+"',Wcplant='"+s[0][e.sindex].plant+"')"}else if(this.action.indexOf("FTL")>-1){var o=e.getView().getModel("FTLHeaderModel");var i=o.getData();t="/WorkcentrePlantValSet(Werks='"+i[0][e.sindex].Iwerk+"',Tarbpl='"+i[0][e.sindex].wc+"',Wcplant='"+i[0][e.sindex].plant+"')"}a.read(t,{success:function(t){if(e.action.indexOf("GTL")>-1){l[0][e.sindex].wcValueState="None";r.setData(l);r.refresh()}else if(e.action.indexOf("ETL")>-1){s[0][e.sindex].wcValueState="None";n.setData(s);n.refresh()}else if(e.action.indexOf("FTL")>-1){i[0][e.sindex].wcValueState="None";o.setData(i);o.refresh()}},error:function(t){var a=[];if(JSON.parse(t.responseText).error.innererror.errordetails===undefined||JSON.parse(t.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(t.responseText).error.message.value}else{for(var d=0;d<JSON.parse(t.responseText).error.innererror.errordetails.length;d++){a[d]=JSON.parse(t.responseText).error.innererror.errordetails[d].message}}var c=[];for(var p=0;p<a.length;p++){c.push({type:"Error",title:a[p]})}e.createMessagePopover(c,false);if(e.action.indexOf("GTL")>-1){l[0][e.sindex].wcValueState="Error";r.setData(l);r.refresh()}else if(e.action.indexOf("ETL")>-1){s[0][e.sindex].wcValueState="Error";n.setData(s);n.refresh()}else if(e.action.indexOf("FTL")>-1){i[0][e.sindex].wcValueState="Error";o.setData(i);o.refresh()}}})},handleTabSelect:function(e){var t=this;var a=e.getParameter("key");var r=e.getParameter("item").getKey();var l=e.getParameter("item").getAggregation("content");var n="";var t=this;var a=e.getParameter("key");var r=e.getParameter("item").getKey();var l=e.getParameter("item").getAggregation("content");var n="";if(this.mode==="display"){switch(r){case"WCTab":this.readApprovalData("WCTab");break;case"TLTab":var s=this.getView().createId("tlMain");if(this.CountObj.GTLCount>0){this.readApprovalData("GTLTab")}if(this.CountObj.ETLCount>0){this.readApprovalData("EqTLTab")}if(this.CountObj.FTLCount>0){this.readApprovalData("FLOCTLTab")}var o=sap.ui.core.Fragment.byId(s,"_iconTabBarTL").getSelectedKey();if(o&&!n){n=l[0].getSelectedKey()}if(n==="GTLTab"){this.action="ApproveGTL"}else if(n==="EqTLTab"){this.action="ApproveETL"}else if(n==="FLOCTLTab"){this.action="ApproveFTL"}break;case"OLTab":this.readApprovalData("OLTab");break}}else{switch(r){case"WCTab":this.action="createWC";break;case"TLTab":n=l[0].getSelectedKey();if(n==="GTLTab"){this.action="createGTL"}else if(n==="EqTLTab"){this.action="createETL"}else if(n==="FLOCTLTab"){this.action="createFTL"}break;case"OLTab":this.action="createOL";this.readObjCat();this.readLinkCat();break}}if(a==="BOM"&&this.mode==="display"){if(this.CountObj.mbomCount>0){this.readApprovalData("MBOMTab")}if(this.CountObj.ebomCount>0){this.readApprovalData("EBOMTab")}if(this.CountObj.flbomCount>0){this.readApprovalData("FLBOMTab")}if(this.CountObj.wbsbomCount>0){this.readApprovalData("WBSBOMTab")}}if(a.indexOf("BOM")>-1&&this.mode==="request"){var i=this.getView().createId("bomMain");a=sap.ui.core.Fragment.byId(i,"_iconTabBarBom").getSelectedKey();if(a==="MBOMTab"){this.action="createMbom"}if(a==="EBOMTab"){this.action="createEbom"}if(a==="FLBOMTab"){this.action="createFlbom"}if(a==="WBSBOMTab"){this.action="createWbsbom"}this.getBomUsageItemStatusFlags()}if(a==="ON"){this.action="createOn";if(this.CountObj&&this.CountObj.onCount>0&&this.mode==="display"){this.readApprovalData("ON")}}if(a==="FLOCTab"){if(this.getMode()==="display"){this.readApprovalData(a)}}if(a==="EQUITab"){if(this.getMode()==="display"){this.readApprovalData(a)}}if(a==="MSPTTab"){if(this.getMode()==="display"){this.readApprovalData(a)}}if(a==="MPMITab"){if(this.getMode()==="display"){this.readApprovalData(a)}this.readMaintPlanCat()}if(a==="onDraft"){var d=sap.ushell.Container.getService("userInfo").getId();this.getView().byId("idUser").setText(d)}},readFirstApprovalData:function(e){var t=this;var a="/ChangeRequestSet";var r=t.getView().getModel("ApprovalModel");var s,o=[new n("ChangeRequestId","EQ",t.cReqNo)];var i={};if(e==="FLOCTab"){var d=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();if(d.length>0){return}s=["FLAddr","FLClass","FLEmail","FLFax","FLLAM","FLLAMCH","FLMltxt","FLPermit","FLPrtnr","FLTele","FLUrl","FLVal","FuncLoc","CrAttachments","Notes"]}if(e==="EQUITab"){var c=sap.ui.getCore().getModel(t.oModelAIWEQUI).getData();if(c.length>0){return}s=["EqClass","EqAddr","EqEmail","EqFax","EqMltxt","EqPermt","Equipment","EqLAM","EqLAMCH","EqPRT","EqPRTNR","EqStock","EqTel","EqUrl","EqVal","CrAttachments","Notes"]}if(e==="MSPTTab"){var p=sap.ui.getCore().getModel(t.oModelAIWMSPT).getData();if(p.length>0){return}s=["MSClass","MSLAM","MSPoint","MSVal","CrAttachments","Notes"]}if(e==="MPMITab"){var u=sap.ui.getCore().getModel(t.oModelAIWMPMI).getData();if(u.length>0){return}s=["MPCycle","MPItem","MPLAM","MPLAN","MPOBList","CrAttachments","Notes"]}var g={$expand:s};var m=t.getView().getModel("mainView");var f=m.getData();f.tableBusy=true;m.setData(f);var h=function(a){var r=a.results[0];var n={};if(r){t.ChangeRequestType=r.ChangeRequestType;t.CreatedBy=r.CreatedBy;t.ChangedAt=r.ChangedAt;t.CrDescription=r.CrDescription;if(e==="FLOCTab"){if(r.FuncLoc){var s=r.FuncLoc.results;if(s){for(var o=0;o<s.length;o++){n={classItems:[],characteristics:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};i={Partners:[],Permits:[],attachmentCount:"0",Guids:"",TplnrEnabled:true,MaintplantEnabled:false,BukrsEnabled:false};i.Functionallocation=s[o].Functionallocation;i.Flocdescription=s[o].Pltxt;i.EditMask=s[o].EditMask;i.Hierarchy=s[o].Hierarchy;i.Floccategory=s[o].Fltyp;i.FlocCategoryDesc=s[o].Flttx;i.Strucindicator=s[o].TplkzFlc;i.StrucIndicatorDesc=s[o].Tplxt;i.Lvorm=s[o].Lvorm;i.Deact=s[o].Deact;i.Trpnr=s[o].Trpnr;i.Refflocdesc=s[o].Refflocdesc;i.SupFunctionallocation=s[o].Tplma;i.SupFlocdescription=s[o].Supflocdesc;i.Stattext=s[o].Stattext;i.UstaEqui=s[o].UstaFloc;i.StsmEqui=s[o].StsmEqui;i.StsmEquiDesc=s[o].Statproftxt;i.UstwEqui=s[o].UstwFloc;i.UswoEqui=s[o].UswoFloc;i.TechnicalObjectTyp=s[o].Eqart;i.Description=s[o].Eartx;i.Begru=s[o].Begru;i.Begtx=s[o].Begtx;i.Brgew=s[o].Brgew;i.Gewei=s[o].Gewei;i.Invnr=s[o].Invnr;i.Groes=s[o].Groes;i.Inbdt=s[o].Inbdt;i.Answt=s[o].Answt;i.Waers=s[o].Waers;i.Ansdt=s[o].Ansdt;i.Herst=s[o].Herst;i.Typbz=s[o].Typbz;i.Mapar=s[o].Mapar;i.Serge=s[o].Serge;i.Herld=s[o].Herld;i.Baujj=s[o].Baujj;i.Baumm=s[o].Baumm;i.MonthName=s[o].MonthName;i.Maintplant=s[o].Swerk;i.MaintplantDesc=s[o].Plantname;i.Location=s[o].StorFloc;i.Locationdesc=s[o].Locationdesc;i.Msgrp=s[o].Msgrp;i.BeberFl=s[o].BeberFl;i.Fing=s[o].Fing;i.Tele=s[o].Tele;i.Arbpl=s[o].Arbplfloc;i.Ktext=s[o].MainWcDesc;i.WcWerks=s[o].MainWcPlant;i.Eqfnr=s[o].Eqfnr;i.Abckz=s[o].Abckzfloc;i.Abctx=s[o].Abctx;i.Bukrs=s[o].Bukrsfloc;i.Butxt=s[o].Butxt;i.City=s[o].City;i.GsbeFloc=s[o].GsbeFloc;i.Gtext=s[o].Gtext;i.Anln1Fl=s[o].Anln1Fl;i.AnlaFl=s[o].AnlaFl;i.Txt50=s[o].Txt50;i.Kostl=s[o].KostFloc;i.Kokrs=s[o].KokrFloc;i.Mctxt=s[o].Contareaname;i.Posid=s[o].Posid;i.Post1=s[o].Post1;i.DaufFloc=s[o].DaufFloc;i.Standorderdesc=s[o].Standorderdesc;i.AufnFloc=s[o].AufnFloc;i.SettleOrdDesc=s[o].SettleOrdDesc;i.Werks=s[o].PlntFloc;i.Planningplantdes=s[o].Planningplantdes;i.Ingrp=s[o].Ingrp;i.Innam=s[o].Plannergrpdesc;i.MainArbpl=s[o].Gewrkfloc;i.MainKtext=s[o].Wergwfloc;i.MainWerks=s[o].Workcenterdesc;i.RbnrFloc=s[o].RbnrFloc;i.Rbnrx=s[o].Rbnrx;i.Tplma=s[o].Tplma;i.Supflocdesc=s[o].Supflocdesc;i.Posnr=s[o].Posnr;i.Trpnr=s[o].Trpnr;i.Refflocdesc=s[o].Refflocdesc;i.Iequi=s[o].Iequi;i.Einzl=s[o].Einzl;i.ConstrType=s[o].Submtiflo;i.ConstructionDesc=s[o].Constdesc;i.CgwldtFl=s[o].CgwldtFl;i.CgwlenFl=s[o].CgwlenFl;i.CmganrFl=s[o].CmganrFl;i.CwagetFl=s[o].CwagetFl;i.CgaerbFl=s[o].CgaerbFl;i.VgwldtFl=s[o].VgwldtFl;i.VgwlenFl=s[o].VgwlenFl;i.VmganrFl=s[o].VmganrFl;i.VwagetFl=s[o].VwagetFl;i.VgaerbFl=s[o].VgaerbFl;i.Vkorg=s[o].Vkorg;i.Vkorgtxt=s[o].Vkorgtxt;i.Vtweg=s[o].Vtweg;i.Vtwegtxt=s[o].Vtwegtxt;i.Spart=s[o].Spart;i.Sparttxt=s[o].Sparttxt;i.Vkbur=s[o].Vkbur;i.Vkburtxt=s[o].Vkburtxt;i.Vkgrp=s[o].Vkgrp;i.Vkgrptxt=s[o].Vkgrptxt;if(r.FLClass){var d=r.FLClass.results;if(d){if(d.length>0){for(var c=0;c<d.length;c++){if(i.Tplnr===d[c].Funcloc){d[c].ctEnable=false;d[c].classEnable=false;d[c].ClassTypeDesc=d[c].Artxt;delete d[c].Artxt;d[c].ClassDesc=d[c].Kltxt;delete d[c].Kltxt;delete d[c].Changerequestid;delete d[c].Clint;delete d[c].Service;n.classItems.push(d[c])}}}}}if(r.FLVal){var p=r.FLVal.results;if(p){if(p.length>0){for(var u=0;u<p.length;u++){if(i.Tplnr===p[u].Funcloc){p[u].cNameEnable=false;p[u].Textbz=p[u].Atwtb;delete p[u].Ataut;delete p[u].Ataw1;delete p[u].Atawe;delete p[u].Atcod;delete p[u].Atflb;delete p[u].Atflv;delete p[u].Atimb;delete p[u].Atsrt;delete p[u].Atvglart;delete p[u].Atzis;delete p[u].Changerequestid;delete p[u].CharName;delete p[u].Charid;delete p[u].Classtype;delete p[u].Service;delete p[u].Valcnt;p[u].slNo=u+1;p[u].flag=p[u].Class+"-"+p[u].slNo;n.characteristics.push(p[u])}}}}}if(r.FLPrtnr){var g={};var h=r.FLPrtnr.results;if(h){if(h.length>0){for(var S=0;S<h.length;S++){if(i.Tplnr===h[S].Funcloc){g.Partnerfn=h[S].Partnerfn;g.Partner=h[S].Partner;g.Namedisp=h[S].Namedisp;g.Addressfl=h[S].Addressfl;g.Address=h[S].Address;g.Partnrfuntxt=h[S].Partnrfuntxt;i.Partners.push(g)}}}}}if(r.FLPermit){var T={};var M=r.FLPermit.results;if(M){if(M.length>0){for(var b=0;b<M.length;b++){if(i.Tplnr===M[b].Funcloc){T.Permit=M[b].Permit;T.Permittxt=M[b].Permittxt;T.Permitcat=M[b].Permitcat;T.Ordercomp=M[b].Ordercomp;T.Orderrel=M[b].Orderrel;T.Printper=M[b].Printper;T.Proposper=M[b].Proposper;T.Ltxtper=M[b].Ltxtper;T.Chbltyper=M[b].Chbltyper;i.Permits.push(T)}}i.PermitLt=M.PermitLt}}}if(a.FLAddr){if(a.FLAddr.results){var E=a.FLAddr.results;if(E){if(E.length>0){for(var v=0;v<E.length;v++){if(i.Tplnr===E[v].Funcloc){n.Title=E[v].Title;n.Name1=E[v].Name1;n.Name2=E[v].Name2;n.Name3=E[v].Name3;n.Name4=E[v].Name4;n.Sort1=E[v].Sort1;n.Sort2=E[v].Sort2;n.NameCo=E[v].NameCo;n.Building=E[v].Building;n.Floor=E[v].Floor;n.Roomnum=E[v].Roomnum;n.Street=E[v].Street;n.HouseNr1=E[v].HouseNr1;n.HouseNr2=E[v].HouseNr2;n.Strsuppl1=E[v].Strsuppl1;n.Strsuppl2=E[v].Strsuppl2;n.Strsuppl3=E[v].Strsuppl3;n.Location=E[v].Location;n.District=E[v].District;n.PostCod1=E[v].PostCod1;n.City1=E[v].City1;n.RefPosta=E[v].RefPosta;n.Landx=E[v].Landx;n.RfePost=E[v].RfePost;n.Regiotxt=E[v].Regiotxt;n.HomeCity=E[v].HomeCity;n.TimeZone=E[v].TimeZone;n.Taxjurcod=E[v].Taxjurcod;n.Regiogrou=E[v].Regiogrou;n.RfePostl=E[v].RfePostl;n.Dontusestxt=E[v].Dontusestxt;n.PoBox=E[v].PoBox;n.PoboxNum=E[v].PoboxNum;n.DlvsrvTy=E[v].DlvsrvTy;n.DlvsrvNr=E[v].DlvsrvNr;n.PostCod2=E[v].PostCod2;n.PoboxLoc=E[v].PoboxLoc;n.PoboxLby=E[v].PoboxLby;n.PoboxCty=E[v].PoboxCty;n.RfePstal=E[v].RfePstal;n.Dontuseptxt=E[v].Dontuseptxt;n.PostCod3=E[v].PostCod3;n.Remark=E[v].Remark}}}}}}if(a.FLEmail){if(a.FLEmail.results){var C={};var x=a.FLEmail.results;if(x){if(x.length>0){for(var V=0;V<x.length;V++){if(i.Tplnr===x[V].Funcloc){C.EAddress=x[V].EAddress;C.EFlgdeft=x[V].EFlgdeft;C.EFlgnous=x[V].EFlgnous;n.emailAddress.push(C)}}}}}}if(a.FLUrl){if(a.FLUrl.results){var P={};var I=a.FLUrl.results;if(I){if(I.length>0){for(var L=0;L<I.length;L++){if(i.Tplnr===I[L].Funcloc){P.Uritypetxt=I[L].Uritypetxt;P.UAddress=I[L].UAddress;P.UFlgdeft=I[L].UFlgdeft;P.UFlgnous=I[L].UFlgnous;n.urlAddress.push(P)}}}}}}if(a.FLTele){if(a.FLTele.results){var y={};var D=a.FLTele.results;if(D){if(D.length>0){for(var k=0;k<D.length;k++){if(i.Tplnr===D[k].Funcloc){y.Teltype=D[k].Teltype;y.TCountry=D[k].TCountry;y.Telefto=D[k].Telefto;y.TNumber=D[k].TNumber;y.TExtens=D[k].TExtens;y.TFlgsms=D[k].TFlgsms;y.TFlgdeft=D[k].TFlgdeft;y.TFlgnous=D[k].TFlgnous;n.telephoneData.push(y)}}}}}}if(a.FLFax){if(a.FLFax.results){var F={};var A=a.FLFax.results;if(A){if(A.length>0){for(var w=0;w<A.length;w++){if(i.Tplnr===A[w].Funcloc){F.FCountry=A[w].FCountry;F.Telefto=A[w].Telefto;F.FNumber=A[w].FNumber;F.FExtens=A[w].FExtens;F.FFlgdeft=A[w].FFlgdeft;F.FFlgnous=A[w].FFlgnous;n.faxData.push(F)}}}}}}t.setCommonApprovalData(n,true);t.handleCreatePress(t,i,t.oModelAIWFLOC)}}}}if(e==="EQUITab"){if(r.Equipment){var q=r.Equipment.results;if(q){for(var W=0;W<q.length;W++){n={classItems:[],characteristics:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};i={PRTInfo:{},DFPS:{},Stock:{},Partners:[],Permits:[],attachmentCount:"0",Guids:"",ConstrTypeMaxLL:0,charValueMaxL:0,BukrsEnabled:false,TplnrEnabled:false};i.Equnr=q[W].Equnr;i.Eqktx=q[W].Txtmi;i.EquipmentCatogory=q[W].Eqtyp;i.EquipCatgDescription=q[W].Etytx;i.ValidFrom=q[W].ValidFrom;i.DatbEeqz=q[W].DatbEeqz;i.LvormEqi=q[W].LvormEqi;i.Deact=q[W].Deact;i.Stattext=q[W].Stattext;i.UstaEqui=q[W].UstaEqui;i.StsmEqui=q[W].StsmEqui;i.StsmEquiDesc=q[W].Statproftxt;i.UstwEqui=q[W].UstwEqui;i.UswoEqui=q[W].UswoEqui;i.TechnicalObjectTyp=q[W].Eqart;i.Description=q[W].Eartx;i.AuthorizGroup=q[W].AuthorizGroup;i.Begtx=q[W].Begtx;i.GrossWt=q[W].GrossWt;i.Gewei=q[W].Gewei;i.Invnr=q[W].Invnr;i.GroesEqu=q[W].GroesEqu;i.Inbdt=q[W].Inbdt;i.Answt=q[W].Answt;i.Waers=q[W].Waers;i.Ansdt=q[W].Ansdt;i.Herst=q[W].Herst;i.Typbz=q[W].Typbz;i.MapaEeqz=q[W].MapaEeqz;i.Serge=q[W].Serge;i.Herld=q[W].Herld;i.CountryName=q[W].CountryName;i.ConstructYear=q[W].ConstructYear;i.ConstructMth=q[W].ConstructMth;i.MonthName=q[W].MonthName;i.Maintplant=q[W].Swerk;i.MaintplantDesc=q[W].Name1;i.Location=q[W].Location;i.Locationdesc=q[W].Locationdesc;i.MsgrEilo=q[W].MsgrEilo;i.Abckz=q[W].Abckzi;i.Abctx=q[W].Abctx;i.BeberFl=q[W].BebeEilo;i.Fing=q[W].Fing;i.Tele=q[W].Tele;i.Arbpl=q[W].ArbpEilo;i.Ktext=q[W].MainWcDesc;i.WcWerks=q[W].MainWcPlant;i.EqfnEilo=q[W].EqfnEilo;i.Bukrs=q[W].Bukrs;i.Butxt=q[W].Butxt;i.GsbeEilo=q[W].GsbeEilo;i.Gtext=q[W].Gtext;i.Anl1Eilo=q[W].Anl1Eilo;i.Anl2Eilo=q[W].Anl2Eilo;i.AssesmentDesc=q[W].AssesmentDesc;i.Kostl=q[W].KostEilo;i.Kokrs=q[W].KokrEilo;i.Mctxt=q[W].Contareaname;i.Posid=q[W].Posid;i.Post1=q[W].Post1;i.DaufEilo=q[W].DaufEilo;i.Standorderdesc=q[W].Standorderdesc;i.Settlement=q[W].Settlement;i.SettleOrdDesc=q[W].SettleOrdDesc;i.Werks=q[W].PplaEeqz;i.Planningplantdes=q[W].Planningplantdes;i.Ingrp=q[W].IngrEeqz;i.Innam=q[W].Plannergrpdesc;i.MainArbpl=q[W].ArbpEeqz;i.MainKtext=q[W].WorkCenterPlant;i.MainWerks=q[W].Workcenterdesc;i.RbnrEeqz=q[W].RbnrEeqz;i.CatalogProfDesc=q[W].CatalogProfDesc;i.SuperordinateEquip=q[W].HequEeqz;i.SuperordinateEquipDesc=q[W].SuperordEqDes;i.EquipPosition=q[W].HeqnEeqz;i.TechIdNum=q[W].TidnEeqz;i.ConstrType=q[W].SubmEeqz;i.ConstructionDesc=q[W].Constdesc;if(q[W].Eqtyp!=="P"){i.Tplnr=q[W].TplnEilo;i.Pltxt=q[W].Flocdescription}else{i.Tplnr="";i.Pltxt=""}i.MatEqu=q[W].MatEqu;i.Materialdesc=q[W].Materialdesc;i.Sernr=q[W].Sernr;i.Lsernr=q[W].Lsernr;i.Kmatn=q[W].Kmatn;i.Vkorg=q[W].Vkorg;i.Vkorgtxt=q[W].Vkorgtxt;i.Vtweg=q[W].Vtweg;i.Vtwegtxt=q[W].Vtwegtxt;i.Spart=q[W].Spart;i.Sparttxt=q[W].Sparttxt;i.Vkbur=q[W].Vkbur;i.Vkburtxt=q[W].Vkburtxt;i.Vkgrp=q[W].Vkgrp;i.Vkgrptxt=q[W].Vkgrptxt;i.CgwldtEq=q[W].CgwldtEq;i.CgwlenEq=q[W].CgwlenEq;i.CmganrEq=q[W].CmganrEq;i.CwagetEq=q[W].CwagetEq;i.CgaerbEq=q[W].CgaerbEq;i.VgwldtEq=q[W].VgwldtEq;i.VgwlenEq=q[W].VgwlenEq;i.VmganrEq=q[W].VmganrEq;i.VwagetEq=q[W].VwagetEq;i.VgaerbEq=q[W].VgaerbEq;i.EliefEqi=q[W].EliefEqi;i.Kun1Eeqz=q[W].Kun1Eeqz;i.Pstlz1=q[W].Pstlz1;i.City1=q[W].City1;i.Kun2Eeqz=q[W].Kun2Eeqz;i.Pstlz2=q[W].Pstlz2;i.City2=q[W].City2;i.Kun3Eeqz=q[W].Kun3Eeqz;i.Pstlz3=q[W].Pstlz3;i.City3=q[W].City3;i.AuldtEqi=q[W].AuldtEqi;if(r.EqClass){var B=r.EqClass.results;if(B){if(B.length>0){for(var N=0;N<B.length;N++){if(i.Equnr===B[N].Equi){B[N].ctEnable=false;B[N].classEnable=false;B[N].ClassTypeDesc=B[N].Artxt;delete B[N].Artxt;B[N].ClassDesc=B[N].Kltxt;delete B[N].Kltxt;delete B[N].Changerequestid;delete B[N].Clint;delete B[N].Service;n.classItems.push(B[N])}}}}}if(r.EqVal){var O=r.EqVal.results;if(O){if(O.length>0){for(var R=0;R<O.length;R++){if(i.Equnr===O[R].Equi){O[R].cNameEnable=false;O[R].Textbz=O[R].Atwtb;delete O[R].Ataut;delete O[R].Ataw1;delete O[R].Atawe;delete O[R].Atcod;delete O[R].Atflb;delete O[R].Atflv;delete O[R].Atimb;delete O[R].Atsrt;delete O[R].Atvglart;delete O[R].Atzis;delete O[R].Changerequestid;delete O[R].CharName;delete O[R].Charid;delete O[R].Classtype;delete O[R].Service;delete O[R].Valcnt;O[R].slNo=u+1;O[R].flag=O[R].Class+"-"+O[R].slNo;n.characteristics.push(O[R])}}}}}if(r.EqPRTNR){var U={};var z=r.EqPRTNR.results;if(z){if(z.length>0){for(var K=0;K<z.length;K++){if(i.Equnr===z[K].Equi){var U={};U.Partnrfun=z[K].Partnrfun;U.Partnereq=z[K].Partnereq;U.NameList=z[K].NameList;U.Aadind=z[K].Aadind;U.Address=z[K].Address;U.Partnrfuntxt=z[K].Partnrfuntxt;i.Partners.push(U)}}}}}if(r.EqPermt){var H={};var G=r.EqPermt.results;if(G){if(G.length>0){for(var j=0;j<G.length;j++){if(i.Equnr===G[j].Equi){H.Countereq=G[j].Countereq;H.Pmsog=G[j].Pmsog;H.KAa=G[j].KAa;H.KDruck=G[j].KDruck;H.KPro=G[j].KPro;i.Permits.push(H)}}i.PmtLtext=G[0].PmtLtext}}}if(r.EqPRT){if(r.EqPRT.results){var Q=r.EqPRT.results;if(Q){if(Q.length>0){for(var _=0;_<Q.length;_++){if(i.Equnr===Q[_].Equi){i.PRTInfo.PlanvPrt=Q[_].PlanvPrt;i.PRTInfo.Fgru1=Q[_].Fgru1;i.PRTInfo.Fgru2=Q[_].Fgru2;i.PRTInfo.Kzkbl=Q[_].Kzkbl;i.PRTInfo.SteufPrt=Q[_].SteufPrt;i.PRTInfo.SteufRef=Q[_].SteufRef;i.PRTInfo.KtschPrt=Q[_].KtschPrt;i.PRTInfo.Ktschref=Q[_].Ktschref;i.PRTInfo.Ewformprt=Q[_].Ewformprt;i.PRTInfo.Ewformref=Q[_].Ewformref;i.PRTInfo.Bzoffbprt=Q[_].Bzoffbprt;i.PRTInfo.Bzoffbref=Q[_].Bzoffbref;i.PRTInfo.Offstb=Q[_].Offstb;i.PRTInfo.Ehoffbprt=Q[_].Ehoffbprt;i.PRTInfo.Offstbref=Q[_].Offstbref;i.PRTInfo.Bzoffeprt=Q[_].Bzoffeprt;i.PRTInfo.Offsteref=Q[_].Offsteref;i.PRTInfo.Offste=Q[_].Offste;i.PRTInfo.Ehoffeprt=Q[_].Ehoffeprt;i.PRTInfo.Offsteref=Q[_].Offsteref;i.PRTInfo.Warpl=Q[_].Warpl;i.PRTInfo.PointEq=Q[_].PointEq}}}}}}if(r.EqStock){if(r.EqStock.results){var J=r.EqStock.results[0];if(J){if(J.length>0){for(var $=0;$<J.length;$++){if(i.Equnr===J[$].Equi){i.Stock.Equilbbsa=J[$].Equilbbsa;i.Stock.BWerk=J[$].BWerk;i.Stock.BukrrsSk=J[$].BukrrsSk;i.Stock.Sloc2equi=J[$].Sloc2equi;i.Stock.Chrg2stk=J[$].Chrg2stk;i.Stock.Sobk2stk=J[$].Sobk2stk;i.Stock.Datlwb=l.getDateFormat(J[$].Datlwb);i.Stock.Kunnr=J[$].Kunnr;i.Stock.LifnrStc=J[$].LifnrStc;i.Stock.Kdauf=J[$].Kdauf;i.Stock.Kdpos=J[$].Kdpos;i.Stock.PsPspPn=J[$].PsPspPn}}}}}}if(a.EqAddr){if(a.EqAddr.results){var Z=a.EqAddr.results;if(Z){if(Z.length>0){for(var X=0;X<Z.length;X++){if(i.Equnr===Z[X].Equi){n.Title=Z[X].Title;n.Name1=Z[X].Name1;n.Name2=Z[X].Name2;n.Name3=Z[X].Name3;n.Name4=Z[X].Name4;n.Sort1=Z[X].Sort1;n.Sort2=Z[X].Sort2;n.NameCo=Z[X].NameCo;n.Building=Z[X].Building;n.Floor=Z[X].Floor;n.Roomnum=Z[X].Roomnum;n.Street=Z[X].Street;n.HouseNr1=Z[X].HouseNr1;n.HouseNr2=Z[X].HouseNr2;n.Strsuppl1=Z[X].Strsuppl1;n.Strsuppl2=Z[X].Strsuppl2;n.Strsuppl3=Z[X].Strsuppl3;n.Location=Z[X].Location;n.District=Z[X].District;n.PostCod1=Z[X].PostCod1;n.City1=Z[X].City1;n.RefPosta=Z[X].RefPosta;n.Landx=Z[X].Landx;n.RfePost=Z[X].RfePost;n.Regiotxt=Z[X].Regiotxt;n.HomeCity=Z[X].HomeCity;n.TimeZone=Z[X].TimeZone;n.Taxjurcod=Z[X].Taxjurcod;n.Regiogrou=Z[X].Regiogrou;n.RfePostl=Z[X].RfePostl;n.Dontusestxt=Z[X].Dontusestxt;n.PoBox=Z[X].PoBox;n.PoboxNum=Z[X].PoboxNum;n.DlvsrvTy=Z[X].DlvsrvTy;n.DlvsrvNr=Z[X].DlvsrvNr;n.PostCod2=Z[X].PostCod2;n.PoboxLoc=Z[X].PoboxLoc;n.PoboxLby=Z[X].PoboxLby;n.PoboxCty=Z[X].PoboxCty;n.RfePstal=Z[X].RfePstal;n.Dontuseptxt=Z[X].Dontuseptxt;n.PostCod3=Z[X].PostCod3;n.Remark=Z[X].Remark}}}}}}if(a.EqEmail){if(a.EqEmail.results){var Y={};var ee=a.EqEmail.results;if(ee){if(ee.length>0){for(var te=0;te<ee.length;te++){if(i.Equnr===ee[te].Equi){Y.EAddress=ee[te].EAddress;Y.EFlgdeft=ee[te].EFlgdeft;Y.EFlgnous=ee[te].EFlgnous;n.emailAddress.push(Y)}}}}}}if(a.EqUrl){if(a.EqUrl.results){var ae={};var re=a.EqUrl.results;if(re){if(re.length>0){for(var le=0;le<re.length;le++){if(i.Equnr===re[le].Equi){ae.Uritypetxt=re[le].Uritypetxt;ae.UAddress=re[le].UAddress;ae.UFlgdeft=re[le].UFlgdeft;ae.UFlgnous=re[le].UFlgnous;n.urlAddress.push(ae)}}}}}}if(a.EqTel){if(a.EqTel.results){var ne={};var se=a.EqTel.results;if(se){if(se.length>0){for(var oe=0;oe<se.length;oe++){if(i.Equnr===se[oe].Equi){ne.Teltype=D[oe].Teltype;ne.TCountry=se[oe].TCountry;ne.Telefto=se[oe].Telefto;ne.TNumber=se[oe].TNumber;ne.TExtens=se[oe].TExtens;ne.TFlgsms=se[oe].TFlgsms;ne.TFlgdeft=se[oe].TFlgdeft;ne.TFlgnous=se[oe].TFlgnous;n.telephoneData.push(ne)}}}}}}if(a.EqFax){if(a.EqFax.results){var ie={};var de=a.EqFax.results;if(de){if(de.length>0){for(var ce=0;ce<de.length;ce++){if(ie.Equnr===de[ce].Equi){ie.FCountry=de[ce].FCountry;ie.Telefto=de[ce].Telefto;ie.FNumber=de[ce].FNumber;ie.FExtens=de[ce].FExtens;ie.FFlgdeft=de[ce].FFlgdeft;ie.FFlgnous=de[ce].FFlgnous;n.faxData.push(ie)}}}}}}t.setCommonApprovalData(n,true);t.handleCreatePress(t,i,t.oModelAIWEQUI)}}}}if(e==="MSPTTab"){if(r.MSPoint){var pe=r.MSPoint.results;if(pe){for(var ue=0;ue<pe.length;ue++){n={classItems:[],characteristics:[]};i={attachmentCount:"0",Guids:"",EqunrEnabled:false,TplnrEnabled:false,countEnable:true,tEnable:false,valCodeStuffSel:false};i.Mspoint=pe[ue].Point;i.Psort=pe[ue].Psort;i.Pttxt=pe[ue].Pttxt;i.ObtypMs=pe[ue].ObtypMs;i.Txt=pe[ue].Objtypetxt;i.Equnr=pe[ue].Equnr;i.Eqktx=pe[ue].Eqktx;i.Tplnr=pe[ue].Tplnr;i.Pltxt=pe[ue].Floctxt;i.Mptyp=pe[ue].Mptyp;i.Mpttx=pe[ue].Mpttx;i.Inact=pe[ue].Inact;i.AtnamMs=pe[ue].AtnamMs;i.Atbez=pe[ue].Atbez;i.Mseh6=pe[ue].Mseh6;i.Msehl=pe[ue].Msehl;i.Decim=pe[ue].Decim.toString();i.Codgr=pe[ue].Codgr;i.Codgrtxt=pe[ue].Codgrtxt;i.Locas=pe[ue].Locas;i.Maktx=pe[ue].Maktx;i.Begru=pe[ue].Begru;i.Begtx=pe[ue].Begtx;i.Indct=pe[ue].Indct;i.Expon=pe[ue].Expon;i.Cdsuf=pe[ue].Cdsuf;i.Cjumc=pe[ue].Cjumc;i.Pyeac=pe[ue].Pyeac;i.Desir=pe[ue].Desir;i.Mrngu=pe[ue].Mrngu;i.Dstxt=pe[ue].Dstxt;i.Indrv=pe[ue].Indrv;i.Mrmax=pe[ue].Mrmax;i.Mrmin=pe[ue].Mrmin;if(pe[ue].Equnr!==""){i.EqunrLblVis=true;i.EqunrInpVis=true;i.EqktxInpVis=true;i.TplnrLblVis=false;i.TplnrInpVis=false;i.PltxtInpVis=false}else{i.EqunrLblVis=false;i.EqunrInpVis=false;i.EqktxInpVis=false;i.TplnrLblVis=true;i.TplnrInpVis=true;i.PltxtInpVis=true}if(r.MSClass){var ge=r.MSClass.results;if(ge){if(ge.length>0){for(var me=0;me<ge.length;me++){if(i.Mspoint===ge[me].Mspoint){ge[me].ctEnable=false;ge[me].classEnable=false;ge[me].ClassTypeDesc=ge[me].Artxt;delete ge[me].Artxt;ge[me].ClassDesc=ge[me].Kltxt;delete ge[me].Kltxt;delete ge[me].Changerequestid;delete ge[me].Clint;delete ge[me].Service;n.classItems.push(ge[me])}}}}}if(r.MSVal){var fe=r.MSVal.results;if(fe){if(fe.length>0){for(var he=0;he<fe.length;he++){if(i.Mspoint===fe[he].Mspoint){fe[he].cNameEnable=false;fe[he].Textbz=fe[he].Atwtb;delete fe[he].Ataut;delete fe[he].Ataw1;delete fe[he].Atawe;delete fe[he].Atcod;delete fe[he].Atflb;delete fe[he].Atflv;delete fe[he].Atimb;delete fe[he].Atsrt;delete fe[he].Atvglart;delete fe[he].Atzis;delete fe[he].Changerequestid;delete fe[he].CharName;delete fe[he].Charid;delete fe[he].Classtype;delete fe[he].Service;delete fe[he].Valcnt;fe[he].slNo=he+1;fe[he].flag=fe[he].Class+"-"+fe[he].slNo;n.characteristics.push(fe[he])}}}}}t.setCommonApprovalData(n);t.handleCreatePress(t,i,t.oModelAIWMSPT)}}}}if(e==="MPMITab"){if(r.MPLAN){var Se=r.MPLAN.results;if(Se){for(var ue=0;ue<Se.length;ue++){i={attachmentCount:"0",Guids:"",cycleModel:[],itemModel:[],cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,ScheIndRbTimeEnabled:false,ScheIndRbTimeKeyDateEnabled:false,ScheIndRbTimeFactCalEnabled:false,ScheIndRbPerformanceEnabled:false,MptypEnabled:false,cycleIndSingleEnabled:false,cycleIndStrategyEnabled:false,cycleIndMultCntrEnabled:false,FabklLBLReq:false,ButtonNewCycleEnabled:false,FabklEnabled:false,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,MaintenanceCycleMode:"None"};if(Se[ue].Stich!==""||Se[ue].Stich===undefined){i.Stich=parseInt(Se[ue].Stich)}i.Warpl=Se[ue].Warpl;i.Wptxt=Se[ue].Txtmi;i.Mptyp=Se[ue].Mptyp;i.Strat=Se[ue].Strat;i.StratDesc=Se[ue].StratDesc;i.Puffp=Se[ue].Puffp;if(Se[ue].Mehrfach==="X"||Se[ue].Stich==="4"){i.cycleSetSeqColVis=true;i.CycleSetSeqVis=true;i.ScheIndText=false;i.ScheIndTitle=false;i.ScheIndLBL=false;i.AbrhoLBL=false;i.AbrhoVis=false;i.HunitVis=false;i.FabklLBL=false;i.FabklVis=false;i.FabklDescVis=false;i.Fabkl="";i.FabklDesc="";i.OPText=true;i.OPTitle=true;i.OPLBL=true;i.OROPVis=true;i.AndOPvis=true;i.WsetLBL=true;i.WsetVis=true;i.KtextVis=true;i.StratLBL=true;i.StratVis=true;i.StratDescVis=true;i.MehrfachLBL=true;i.MehrfachVis=true;i.Mehrfach=true;i.StadtLBL=true;i.StadtVis=true;i.Stadt=l.getDateFormat(Se[ue].Startdate);i.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_STDATE");i.SzaehLBL=false;i.SzaehVis=false;i.UnitcVis=false;i.Unitc=" ";i.MpcyclenoLBL=false;i.MpcyclenoVis=false;i.cycleIndMultCntr=true}else if(Se[ue].Strat===""&&(Se[ue].Stich===""||Se[ue].Stich==="1"||Se[ue].Stich==="2")){i.cycleSetSeqColVis=false;i.CycleSetSeqVis=false;i.ScheIndText=true;i.ScheIndTitle=true;i.ScheIndLBL=true;i.AbrhoLBL=true;i.AbrhoVis=true;i.HunitVis=true;i.FabklLBL=true;i.FabklVis=true;i.FabklDescVis=true;i.Fabkl="";i.FabklDesc="";i.StadtLBL=true;i.StadtVis=true;i.Stadt=l.getDateFormat(Se[ue].Startdate);i.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_START_TXT");i.SzaehLBL=false;i.SzaehVis=false;i.UnitcVis=false;i.Unitc=" ";i.MpcyclenoLBL=false;i.MpcyclenoVis=false;i.cycleIndSingle=true}else if(Se[ue].Strat!==""&&Se[ue].Stich==="3"){i.cycleSetSeqColVis=false;i.CycleSetSeqVis=false;i.ScheIndText=false;i.ScheIndTitle=false;i.ScheIndLBL=false;i.AbrhoLBL=false;i.AbrhoVis=false;i.HunitVis=false;i.FabklLBL=false;i.FabklVis=false;i.FabklDescVis=false;i.Fabkl="";i.FabklDesc="";i.StratLBL=true;i.StratVis=true;i.StratDescVis=true;i.Strat=Se[ue].Strat;i.StadtLBL=false;i.StadtVis=false;i.Stadt=l.getDateFormat(Se[ue].Startdate);i.SzaehLBL=true;i.SzaehVis=true;i.UnitcVis=true;i.MpcyclenoLBL=true;i.MpcyclenoVis=true;i.cycleIndStrateg=true;t.readScheduling(Se[ue].Strat)}else if(Se[ue].Strat.indexOf("TIME")>-1&&Se[ue].Mehrfach===""&&Se[ue].Stich!=="3"){i.ScheIndText=true;i.ScheIndTitle=true;i.ScheIndLBL=true;i.ScheIndRbTimeVis=true;i.ScheIndRbTimeKeyDateVis=true;i.ScheIndRbTimeFactCalVis=true;i.ScheIndRbPerformanceVis=true;i.AbrhoLBL=true;i.AbrhoVis=true;i.HunitVis=true;i.FabklLBL=true;i.FabklVis=true;i.FabklDescVis=true;i.Fabkl="";i.FabklDesc="";i.StratLBL=true;i.StratVis=true;i.StratDescVis=true;i.Strat=Se[ue].Strat;i.StadtLBL=true;i.StadtVis=true;i.Stadt=l.getDateFormat(Se[ue].Startdate);i.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_START_TXT");i.SzaehLBL=false;i.SzaehVis=false;i.UnitcVis=false;i.Unitc=Se[ue].Unitc;i.MpcyclenoLBL=false;i.MpcyclenoVis=false;i.cycleIndStrateg=true;t.readScheduling(Se[ue].Strat)}else if(Se[ue].Strat===""&&Se[ue].Stich==="3"&&Se[ue].Mehrfach===""){i.ScheIndText=true;i.ScheIndTitle=true;i.ScheIndLBL=true;i.ScheIndRbTimeVis=true;i.ScheIndRbTimeKeyDateVis=true;i.ScheIndRbTimeFactCalVis=true;i.ScheIndRbPerformanceVis=true;i.AbrhoLBL=false;i.AbrhoVis=false;i.HunitVis=false;i.FabklLBL=true;i.FabklVis=true;i.FabklDescVis=true;i.Fabkl="";i.FabklDesc="";i.StratLBL=false;i.StratVis=false;i.StratDescVis=false;i.Strat=Se[ue].Strat;i.StadtLBL=false;i.StadtVis=false;i.Stadt=l.getDateFormat(Se[ue].Startdate);i.StadtLBLText=t.getView().getModel("i18n").getProperty("CYCLE_START_TXT");i.SzaehLBL=true;i.SzaehVis=true;i.UnitcVis=true;i.Unitc=" ";i.MpcyclenoLBL=true;i.MpcyclenoVis=true}if(Se[ue].Stich==="1"){i.ScheIndRbTimeKeyDate=true;i.Fabkl=Se[ue].Fabkl;i.FabklDesc=Se[ue].FabklDesc}else if(Se[ue].Stich==="2"){i.ScheIndRbTimeFactCal=true;i.Fabkl=Se[ue].Fabkl;i.FabklDesc=Se[ue].FabklDesc}else if(Se[ue].Stich==="3"){i.ScheIndRbPerformance=true}else if(Se[ue].Stich==="4"){i.ScheIndRbTime=true;i.Fabkl=Se[ue].Fabkl;i.FabklDesc=Se[ue].FabklDesc}i.Wset=Se[ue].Wset;i.Ktext=Se[ue].Ktext;i.Sfakt=Se[ue].Sfakt;i.Abrho=Se[ue].Abrho;i.Hunit=Se[ue].Hunit;i.StratDesc=Se[ue].StratDesc;i.Szaeh=Se[ue].Szaeh;i.Mpcycleno=Se[ue].PointStp;i.Andor=Se[ue].Andor;if(Se[ue].PointStp!==""){t.readCounterData(Se[ue],Se[ue].PointStp,"counterUnit")}if(Se[ue].Andor==="X"){i.AndOP=true}else{i.OROP=true}i.Vspos=Se[ue].Vspos;i.Topos=Se[ue].Topos;i.Vsneg=Se[ue].Vsneg;i.Toneg=Se[ue].Toneg;i.Horiz=Se[ue].Horiz;i.CallConf=Se[ue].CallConf;i.PlanSort=Se[ue].PlanSort;i.Begru=Se[ue].Begru;if(r.MPCycle){var Te=r.MPCycle.results;if(Te){for(var u=0;u<Te.length;u++){if(i.Warpl===Te[u].Mplan){Te[u].Psort=Te[u].PointTxt}}i.cycleModel=Te}}if(r.MPItem){var Me=r.MPItem.results;if(Me){var be=[];for(var ue=0;ue<Me.length;ue++){if(i.Warpl===Me[ue].Mplan){var Ee={};Ee.Mitemnumb=Me[ue].Mitemnumb;Ee.Pstxt=Me[ue].Pstxt;Ee.Cycleseq=Me[ue].Cycleseq;Ee.Tplnr=Me[ue].TplnrMi;Ee.Pltxt=Me[ue].Flocdesc;Ee.Equnr=Me[ue].Equnr;Ee.Eqktx=Me[ue].Equipdesc;Ee.AsmblyOb=Me[ue].Bautl;Ee.Werks=Me[ue].PlntMi;Ee.Planningplantdes=Me[ue].Planningplantdes;Ee.Auart=Me[ue].Auart;Ee.oTypeTxt=Me[ue].Ordertypedesc;Ee.Qmart=Me[ue].Qmart;Ee.nTypeTxt=Me[ue].Qmartx;Ee.ArbpMi=Me[ue].ArbpMi;Ee.WergwMi=Me[ue].WergwMi;Ee.Ingrp=Me[ue].IngrpMi;Ee.Innam=Me[ue].Plannergrpdesc;Ee.Zeieh=Me[ue].Zeieh;Ee.Priok=Me[ue].Priok;Ee.ItmPriotxt=Me[ue].GsberMi;Ee.GsberMi=Me[ue].GsberMi;Ee.Gtext=Me[ue].Gtext;Ee.TaskDet=Me[ue].TaskDet;Ee.Ilart=Me[ue].Ilart;Ee.Ilatx=Me[ue].Ilatx;Ee.PlntyMi=Me[ue].PlntyMi;Ee.ApfktMi=Me[ue].ApfktMi;Ee.PlnnrMi=Me[ue].PlnnrMi;Ee.PlnalMi=Me[ue].PlnalMi;Ee.Gpcounterdesc=Me[ue].Gpcounterdesc;Ee.AnlzuMi=Me[ue].AnlzuMi;Ee.Anlzux=Me[ue].Anlzux;Ee.SwerkMil=Me[ue].SwerkMil;Ee.Name1=Me[ue].Name1;Ee.StortMil=Me[ue].StortMil;Ee.Locationdesc=Me[ue].Locationdesc;Ee.MsgrpIl=Me[ue].MsgrpIl;Ee.BeberMil=Me[ue].BeberMil;Ee.Fing=Me[ue].Fing;Ee.Tele=Me[ue].Tele;Ee.ArbplIl=Me[ue].ArbplIl;Ee.Workcenterdesc=Me[ue].Workcenterdesc;Ee.AbckzIl=Me[ue].AbckzIl;Ee.Abctx=Me[ue].Abctx;Ee.EqfnrIl=Me[ue].EqfnrIl;Ee.BukrsMil=Me[ue].BukrsMil;Ee.Butxt=Me[ue].Butxt;Ee.City=Me[ue].City;Ee.Anln1Mil=Me[ue].Anln1Mil;Ee.Anln2Mil=Me[ue].Anln2Mil;Ee.Txt50=Me[ue].Txt50;Ee.GsberIl=Me[ue].GsberIl;Ee.KostlMil=Me[ue].KostlMil;Ee.Contareaname=Me[ue].Contareaname;Ee.KokrsMil=Me[ue].KokrsMil;Ee.Posid=Me[ue].Posid;Ee.Post1=Me[ue].Post1;Ee.AufnrIl=Me[ue].AufnrIl;Ee.SettleOrdDesc=Me[ue].SettleOrdDesc;Ee.QmartLBL=true;Ee.QmartVis=true;Ee.nTypetxtVis=true;Ee.AuartLBL=true;Ee.AuartVis=true;Ee.oTypeTxtVis=true;Ee.CycleseqLBL=false;Ee.CycleseqVis=false;Ee.AsmblyObMaxLength=0;Ee.maintItemE=false;Ee.cycleSetE=false;Ee.TplnrEnabled=false;Ee.equiE=false;Ee.assemblyE=false;Ee.CycleseqVS="None";Ee.CycleseqVST="";Ee.TplnrVS="None";Ee.TplnrVST="";Ee.EqunrVS="None";Ee.EqunrVST="";Ee.AsmblyObVS="None";Ee.AsmblyObVST="";Ee.WerksVS="None";Ee.WerksVST="";Ee.AuartVS="None";Ee.AuartVST="";Ee.QmartVS="None";Ee.QmartVST="";Ee.ArbpMiVS="None";Ee.ArbpMiVST="";Ee.WergwMiVS="None";Ee.WergwMiVST="";Ee.IngrpVS="None";Ee.IngrpVST="";be.push(Ee)}}i.itemModel=be}}t.handleCreatePress(t,i,t.oModelAIWMPMI)}}}}}f.tableBusy=false;m.setData(f)};var S=function(e){var a=[];f.tableBusy=false;m.setData(f);if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=a.join("\n");t.invokeMessage(l)};t._readData(a,r,h,S,o,g)},onCopyBOMclose:function(){this._copyFragment.close();if(this.action==="copyMbom"){this.action="createMbom"}else if(this.action==="copyEbom"||this.action==="copyMtoEbom"){this.action="createEbom"}else if(this.action==="copyFlbom"||this.action==="copyMtoFlbom"){this.action="createFlbom"}else if(this.action==="copyWbsbom"||this.action==="copyMtoWbsbom"){this.action="createWbsbom"}},onCopyBOMpress:function(){var e=this;var t=this.getView().getModel();var a=true;var r=this._copyFragment.getModel("copyModel");var l=r.getData();if(this.action==="copyMbom"){if(l.copyMaterialSource===""){a=false;l.srcMatValueState="Error"}if(l.copyMaterialTarget===""){a=false;l.tarMatValueState="Error"}if(l.copyAltBomSource===""){a=false;l.srcAltBomValueState="Error"}if(l.copyAltBomTarget===""){a=false;l.tarAltBomValueState="Error"}}if(this.action==="copyEbom"){if(l.copyEquipmentSource===""){a=false;l.srcEquiValueState="Error"}if(l.copyEquipmentTarget===""){a=false;l.tarEquiValueState="Error"}}if(this.action==="copyMtoEbom"){if(l.copyMaterialSource===""){a=false;l.srcMatValueState="Error"}if(l.copyEquipmentTarget===""){a=false;l.tarEquiValueState="Error"}if(l.copyAltBomSource===""){a=false;l.srcAltBomValueState="Error"}}if(this.action==="copyFlbom"){if(l.copyFlocSource===""){a=false;l.srcFlocValueState="Error"}if(l.copyFlocTarget===""){a=false;l.tarFlocValueState="Error"}}if(this.action==="copyMtoFlbom"){if(l.copyMaterialSource===""){a=false;l.srcMatValueState="Error"}if(l.copyFlocTarget===""){a=false;l.tarFlocValueState="Error"}if(l.copyAltBomSource===""){a=false;l.srcAltBomValueState="Error"}}if(this.action==="copyWbsbom"){if(l.copyWBSSource===""){a=false;l.srcWBSValueState="Error"}if(l.copyMaterialSource===""){a=false;l.srcMatValueState="Error"}if(l.copyWBSTarget===""){a=false;l.tarWBSValueState="Error"}if(l.copyMaterialTarget===""){a=false;l.tarMatValueState="Error"}}if(this.action==="copyMtoWbsbom"){if(l.copyMaterialSource===""){a=false;l.srcMatValueState="Error"}if(l.copyWBSTarget===""){a=false;l.tarWBSValueState="Error"}if(l.copyMaterialTarget===""){a=false;l.tarMatValueState="Error"}if(l.copyAltBomSource===""){a=false;l.srcAltBomValueState="Error"}}if(l.copyPlantSource===""){a=false;l.srcPlantValueState="Error"}if(l.copyUsageSource===""){a=false;l.srcUsageValueState="Error"}if(l.copyPlantTarget===""){a=false;l.tarPlantValueState="Error"}if(l.copyUsageTarget===""){a=false;l.tarUsageValueState="Error"}if(!a){r.setData(l);return}var n=function(e,t){var a=$.map(e,function(e){return $.extend(true,{},e)});for(var r=0;r<e.length;r++){a[r].Pmper=t.Pmper;a[r].Pmpka=t.Pmpka;a[r].Pmprv=t.Pmprv;a[r].Pmpfe=t.Pmpfe;a[r].Pmpin=t.Pmpin;a[r].Pmpko=t.Pmpko;if(a[r].Pmpfe==="+")a[r].Sanfe=true;else a[r].Sanfe=false;if(a[r].Pmpin==="+")a[r].Sanin=true;else a[r].Sanin=false;if(a[r].Pmpko==="+")a[r].Sanko=true;else a[r].Sanko=false}return a};var s=false;var o=false;var i=sap.ui.getCore().getModel("AIWListMatModel");var d=i.getData();var c=sap.ui.getCore().getModel("AIWListEqModel");var p=c.getData();var u=sap.ui.getCore().getModel("AIWListFLModel");var g=u.getData();var m=sap.ui.getCore().getModel("AIWListWBSModel");var f=m.getData();var h={};var S=sap.ui.getCore().getModel("itemStatusModel");var T=S.getData();for(var M=0;M<T.length;M++){if(l.copyUsageTarget===T[M].Stlan){h=T[M]}}if(this.action==="copyMbom"){if(d.length>0){for(var b=0;b<d.length;b++){if(d[b].Matnr===l.copyMaterialTarget&&d[b].Werks===l.copyPlantTarget&&d[b].Stlan===l.copyUsageTarget&&d[b].Stalt===l.copyAltBomTarget){var E=e.getResourceBundle().getText("matBomErr")+l.copyMaterialTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+"/"+l.copyAltBomTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}if(!s){if(d.length>0){for(var b=0;b<d.length;b++){if(d[b].Matnr===l.copyMaterialSource&&d[b].Werks===l.copyPlantSource&&d[b].Stlan===l.copyUsageSource&&d[b].Stalt===l.copyAltBomSource){o=true;var v={Matnr:l.copyMaterialTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Stalt:l.copyAltBomTarget,Bomstatus:d[b].Bomstatus,Lngtxt:d[b].Lngtxt,Stktx:d[b].Stktx,Validfrom:e.getDateFormat(d[b].Validfrom),BaseQty:d[b].BaseQty,BaseUom:d[b].BaseUom,Validtoda:e.getDateFormat(d[b].Validtoda),MatDesc:l.copyMaterialTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:d[b].BomstatusText,matEnable:false,plantEnable:false,usageEnable:false,altbomEnable:false,bomType:"Create",modeFlag:"Delete",matItem:d[b].matItem,matSubItem:d[b].matSubItem};v.matItem=n(v.matItem,h);d.push(v);i.setData(d);e.getView().setModel(i,"AIWListMatModel");e.updateCount("MaterialBom",i.getData());e.onCopyBOMclose();break}}}if(!o){this.checkMaterialConfigurability(l)}}}if(this.action==="copyEbom"){if(p.length>0){for(var b=0;b<p.length;b++){if(p[b].Eqnrbom===l.copyEquipmentTarget&&p[b].Werks===l.copyPlantTarget&&p[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("equiBomErr")+l.copyEquipmentTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}if(!s){if(p.length>0){for(var b=0;b<p.length;b++){if(p[b].Eqnrbom===l.copyEquipmentSource&&p[b].Werks===l.copyPlantSource&&p[b].Stlan===l.copyUsageSource){o=true;var C={Eqnrbom:l.copyEquipmentTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:p[b].Bomstatus,Lngtxt:p[b].Lngtxt,Validfrom:e.getDateFormat(p[b].Validfrom),BaseQty:p[b].BaseQty,BaseUom:p[b].BaseUom,Validtoda:e.getDateFormat(p[b].Validtoda),EquiDesc:l.copyEquipmentTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:p[b].BomstatusText,equipEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",eqItem:p[b].eqItem,eqSubItem:p[b].eqSubItem};C.eqItem=n(C.eqItem,h);p.push(C);c.setData(p);e.getView().setModel(c,"AIWListEqModel");e.updateCount("EquipmentBom",c.getData());e.onCopyBOMclose();break}}}if(!o){e.checkTargetBOMExist(l)}}}if(this.action==="copyFlbom"){if(g.length>0){for(var b=0;b<g.length;b++){if(g[b].Tplnrbom===l.copyFlocTarget&&g[b].Werks===l.copyPlantTarget&&g[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("flocBomErr")+l.copyFlocTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}if(!s){if(g.length>0){for(var b=0;b<g.length;b++){if(g[b].Tplnrbom===l.copyFlocSource&&g[b].Werks===l.copyPlantSource&&g[b].Stlan===l.copyUsageSource){o=true;var x={Tplnrbom:l.copyFlocTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:g[b].Bomstatus,Lngtxt:g[b].Lngtxt,Validfrom:e.getDateFormat(g[b].Validfrom),BaseQty:g[b].BaseQty,BaseUom:g[b].BaseUom,Validtoda:e.getDateFormat(g[b].Validtoda),FLDesc:l.copyFlocTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:g[b].BomstatusText,FLEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",flItem:g[b].flItem,flSubItem:g[b].flSubItem};x.flItem=n(x.flItem,h);g.push(x);u.setData(g);e.getView().setModel(u,"AIWListFLModel");e.updateCount("FLBom",u.getData());e.onCopyBOMclose();break}}}if(!o){e.checkTargetBOMExist(l)}}}if(this.action==="copyWbsbom"){if(f.length>0){for(var b=0;b<f.length;b++){if(f[b].WbsExt===l.copyWBSTarget&&f[b].Matnr===l.copyMaterialTarget&&f[b].Werks===l.copyPlantTarget&&f[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("wbsBomErr")+l.copyWBSTarget+"/"+l.copyMaterialTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}if(!s){if(f.length>0){for(var b=0;b<f.length;b++){if(f[b].WbsExt===l.copyWBSSource&&f[b].Matnr===l.copyMaterialSource&&f[b].Werks===l.copyPlantSource&&f[b].Stlan===l.copyUsageSource){o=true;var V={WbsExt:l.copyWBSTarget,Matnr:l.copyMaterialTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:f[b].Bomstatus,Lngtxt:f[b].Lngtxt,Validfrom:e.getDateFormat(f[b].Validfrom),BaseQty:f[b].BaseQty,BaseUom:f[b].BaseUom,Validtoda:e.getDateFormat(f[b].Validtoda),WbsDesc:l.copyWBSTargetDesc,MatDesc:l.copyMaterialTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:f[b].BomstatusText,wbsEnable:false,matEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",wbsItem:f[b].wbsItem,wbsSubItem:f[b].wbsSubItem};V.wbsItem=n(V.wbsItem,h);f.push(V);m.setData(f);e.getView().setModel(m,"AIWListWBSModel");e.updateCount("WbsBom",m.getData());e.onCopyBOMclose();break}}}if(!o){e.checkTargetBOMExist(l)}}}if(this.action==="copyMtoEbom"||this.action==="copyMtoFlbom"||this.action==="copyMtoWbsbom"){if(this.action==="copyMtoEbom"){if(p.length>0){for(var b=0;b<p.length;b++){if(p[b].Eqnrbom===l.copyEquipmentTarget&&p[b].Werks===l.copyPlantTarget&&p[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("equiBomErr")+l.copyEquipmentTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}}if(this.action==="copyMtoFlbom"){if(g.length>0){for(var b=0;b<g.length;b++){if(g[b].Tplnrbom===l.copyFlocTarget&&g[b].Werks===l.copyPlantTarget&&g[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("flocBomErr")+l.copyFlocTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}}if(this.action==="copyMtoWbsbom"){if(f.length>0){for(var b=0;b<f.length;b++){if(f[b].WbsExt===l.copyWBSTarget&&f[b].Matnr===l.copyMaterialTarget&&f[b].Werks===l.copyPlantTarget&&f[b].Stlan===l.copyUsageTarget){var E=e.getResourceBundle().getText("wbsBomErr")+l.copyWBSTarget+"/"+l.copyMaterialTarget+"/"+l.copyPlantTarget+"/"+l.copyUsageTarget+" "+e.getResourceBundle().getText("locked");sap.m.MessageToast.show(E,{duration:5e3,animationDuration:5e3});s=true;break}}}}if(!s){for(var b=0;b<d.length;b++){if(d[b].Matnr===l.copyMaterialSource&&d[b].Werks===l.copyPlantSource&&d[b].Stlan===l.copyUsageSource&&d[b].Stalt===l.copyAltBomSource){o=true;switch(this.action){case"copyMtoEbom":var C={Eqnrbom:l.copyEquipmentTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:d[b].Bomstatus,Lngtxt:d[b].Lngtxt,Validfrom:e.getDateFormat(d[b].Validfrom),BaseQty:d[b].BaseQty,BaseUom:d[b].BaseUom,Validtoda:e.getDateFormat(d[b].Validtoda),EquiDesc:l.copyEquipmentTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:d[b].BomstatusText,equipEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",eqItem:d[b].matItem,eqSubItem:d[b].matSubItem};C.eqItem=n(C.eqItem,h);p.push(C);c.setData(p);e.getView().setModel(c,"AIWListEqModel");e.updateCount("EquipmentBom",c.getData());break;case"copyMtoFlbom":var x={Tplnrbom:l.copyFlocTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:d[b].Bomstatus,Lngtxt:d[b].Lngtxt,Validfrom:e.getDateFormat(d[b].Validfrom),BaseQty:d[b].BaseQty,BaseUom:d[b].BaseUom,Validtoda:e.getDateFormat(d[b].Validtoda),FLDesc:l.copyFlocTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:d[b].BomstatusText,FLEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",flItem:d[b].matItem,flSubItem:d[b].matSubItem};x.flItem=n(x.flItem,h);g.push(x);u.setData(g);e.getView().setModel(u,"AIWListFLModel");e.updateCount("FLBom",u.getData());break;case"copyMtoWbsbom":var V={WbsExt:l.copyWBSTarget,Matnr:l.copyMaterialTarget,Werks:l.copyPlantTarget,Stlan:l.copyUsageTarget,Bomstatus:d[b].Bomstatus,Lngtxt:d[b].Lngtxt,Validfrom:e.getDateFormat(d[b].Validfrom),BaseQty:d[b].BaseQty,BaseUom:d[b].BaseUom,Validtoda:e.getDateFormat(d[b].Validtoda),WbsDesc:l.copyWBSTargetDesc,MatDesc:l.copyMaterialTargetDesc,WerksDesc:l.copyPlantTargetDesc,StlanDesc:l.copyUsageTargetDesc,BomstatusText:d[b].BomstatusText,wbsEnable:false,matEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",wbsItem:d[b].matItem,wbsSubItem:d[b].matSubItem};V.wbsItem=n(V.wbsItem,h);f.push(V);m.setData(f);e.getView().setModel(m,"AIWListWBSModel");e.updateCount("WbsBom",m.getData());break}e.onCopyBOMclose();break}}if(!o){e.checkTargetBOMExist(l)}}}},getBomUsageItemStatusFlags:function(){var e=this.getView().getModel("valueHelp");var a=this;var r=new t;e.read("/BOMUsageHelpSet",{success:function(e){if(e.results.length>0){r.setData(e.results);sap.ui.getCore().setModel(r,"itemStatusModel")}}})},checkMaterialConfigurability:function(e){var t=this;var a=this.getView().getModel("valueHelp");var r="/ConfigmatvalSet(MatFrom='"+e.copyMaterialSource+"',MatTo='"+e.copyMaterialTarget+"')";t._copyFragment.setBusy(true);a.read(r,{success:function(a){t._copyFragment.setBusy(false);t.checkTargetBOMExist(e)},error:function(e){var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}t.createMessagePopover(l,false)}})},checkTargetBOMExist:function(e){var t=this;var a=this.getView().getModel();if(this.action==="copyMbom"){var r="/DeriveBOMHDRSet(Material='"+e.copyMaterialTarget+"',Werks='"+e.copyPlantTarget+"',Stlan='"+e.copyUsageTarget+"',Stlal='"+e.copyAltBomTarget+"',Tplnr='',Equnr='',Proid='')"}else if(this.action==="copyEbom"||this.action==="copyMtoEbom"){var r="/DeriveBOMHDRSet(Material='',Werks='"+e.copyPlantTarget+"',Stlan='"+e.copyUsageTarget+"',Stlal='',Tplnr='',Equnr='"+e.copyEquipmentTarget+"',Proid='')"}else if(this.action==="copyFlbom"||this.action==="copyMtoFlbom"){var r="/DeriveBOMHDRSet(Material='',Werks='"+e.copyPlantTarget+"',Stlan='"+e.copyUsageTarget+"',Tplnr='"+e.copyFlocTarget+"',Stlal='',Equnr='',Proid='')"}else if(this.action==="copyWbsbom"||this.action==="copyMtoWbsbom"){var r="/DeriveBOMHDRSet(Material='"+e.copyMaterialTarget+"',Werks='"+e.copyPlantTarget+"',Stlan='"+e.copyUsageTarget+"',Stlal='',Tplnr='',Equnr='',Proid='"+e.copyWBSTarget+"')"}a.read(r,{success:function(a){if(a.Message!==""){sap.m.MessageToast.show(a.Message,{duration:15e3,animationDuration:15e3})}else{if(t.action==="copyMbom"||t.action==="copyMtoEbom"||t.action==="copyMtoFlbom"||t.action==="copyMtoWbsbom"){t.readCopyDetails(e.copyMaterialSource,e.copyPlantSource,e.copyUsageSource,e,"","")}else if(t.action==="copyEbom"){t.readCopyDetails(e.copyEquipmentSource,e.copyPlantSource,e.copyUsageSource,e,"","")}else if(t.action==="copyFlbom"){t.readCopyDetails(e.copyFlocSource,e.copyPlantSource,e.copyUsageSource,e,"","")}else if(t.action==="copyWbsbom"){t.readCopyDetails(e.copyMaterialSource,e.copyPlantSource,e.copyUsageSource,e,"",e.copyWBSSource)}}},error:function(e){var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}t.createMessagePopover(l,false)}})},readCopyDetails:function(e,t,a,r,l,n){var s=this;var o=this.getView().getModel();var i;var d;var c;var p=this.getView().getModel("BusyModel").getData();var u=sap.ui.getCore().getModel("AIWListMatModel");var g=sap.ui.getCore().getModel("AIWListEqModel");var m=sap.ui.getCore().getModel("AIWListFLModel");var f=sap.ui.getCore().getModel("AIWListWBSModel");if(this.action==="copyMbom"||this.action==="copyMtoEbom"||this.action==="copyMtoFlbom"||this.action==="copyMtoWbsbom"){i="/ChangeRequestSet";d=[new sap.ui.model.Filter("Stalt","EQ",r.copyAltBomSource),new sap.ui.model.Filter("Matnr","EQ",e),new sap.ui.model.Filter("Werks","EQ",t),new sap.ui.model.Filter("Stlan","EQ",a),new sap.ui.model.Filter("CopyCreate","EQ",true)];c=["MRBHeader","MRBItem","MRBSBIT"]}if(this.action==="copyEbom"){i="/ChangeRequestSet";d=[new sap.ui.model.Filter("Stalt","EQ",""),new sap.ui.model.Filter("Eqnrbom","EQ",e),new sap.ui.model.Filter("Werks","EQ",t),new sap.ui.model.Filter("Stlan","EQ",a),new sap.ui.model.Filter("CopyCreate","EQ",true)];c=["EBHeader","EBItem","EBSBIT"]}if(this.action==="copyFlbom"){i="/ChangeRequestSet";d=[new sap.ui.model.Filter("Stalt","EQ",""),new sap.ui.model.Filter("Tplnrbom","EQ",e),new sap.ui.model.Filter("Werks","EQ",t),new sap.ui.model.Filter("Stlan","EQ",a),new sap.ui.model.Filter("CopyCreate","EQ",true)];c=["FBHeader","FBItem","FBSBIT"]}if(this.action==="copyWbsbom"){i="/ChangeRequestSet";d=[new sap.ui.model.Filter("Stalt","EQ",""),new sap.ui.model.Filter("Proid","EQ",n),new sap.ui.model.Filter("Matnr","EQ",e),new sap.ui.model.Filter("Werks","EQ",t),new sap.ui.model.Filter("Stlan","EQ",a),new sap.ui.model.Filter("CopyCreate","EQ",true)];c=["WBHeader","WBSBIT","WBItem"]}p.AiwTblBusy=true;this.getView().getModel("BusyModel").setData(p);this._copyFragment.setBusy(true);o.read(i,{filters:d,urlParameters:{$expand:c},success:function(e){p.AiwTblBusy=false;s.getView().getModel("BusyModel").setData(p);s._copyFragment.setBusy(false);if(e.results.length>0){if(e.results[0].Message!==""&&e.results[0].Message.indexOf("locked")===-1){sap.m.MessageToast.show(e.results[0].Message,{duration:5e3,animationDuration:5e3});return}var t={};var a=[];var l=[];var n;if(s.action==="copyMbom"){t=e.results[0].MRBHeader.results[0];a=e.results[0].MRBItem.results;for(n=0;n<a.length;n++){a[n].itmCatEnable=false}l=e.results[0].MRBSBIT.results;if(t!==undefined){var o=u.getData();var i={Matnr:r.copyMaterialTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Stalt:r.copyAltBomTarget,Bomstatus:t.Bomstatus,Lngtxt:t.Txtmi,Stktx:t.Stktx,Validfrom:s.getDateFormat(t.Validfrom),BaseQty:t.Baseqty,BaseUom:t.Baseuom,Validtoda:s.getDateFormat(t.Validtoda),MatDesc:r.copyMaterialTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:t.Bomstatustxt,matEnable:false,plantEnable:false,usageEnable:false,altbomEnable:false,bomType:"Create",modeFlag:"Delete",matItem:a,matSubItem:l};i.matItem=s.updateItemStatusActive(r,i.matItem);o.push(i);u.setData(o);u.setSizeLimit(o.length);s.getView().setModel(u,"AIWListMatModel");s.updateCount("MaterialBom",u.getData())}s.onCopyBOMclose()}if(s.action==="copyEbom"||s.action==="copyMtoEbom"){if(s.action==="copyEbom"){t=e.results[0].EBHeader.results[0];a=e.results[0].EBItem.results;l=e.results[0].EBSBIT.results}else if(s.action==="copyMtoEbom"){t=e.results[0].MRBHeader.results[0];a=e.results[0].MRBItem.results;l=e.results[0].MRBSBIT.results}for(n=0;n<a.length;n++){a[n].itmCatEnable=false}if(t!==undefined){var d=g.getData();var c={Eqnrbom:r.copyEquipmentTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:t.Bomstatus,Lngtxt:t.Txtmi,Validfrom:s.getDateFormat(t.Validfrom),BaseQty:t.Baseqty,BaseUom:t.Baseuom,Validtoda:s.getDateFormat(t.Validtoda),EquiDesc:r.copyEquipmentTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:t.Bomstatustxt,equipEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",eqItem:a,eqSubItem:l};c.eqItem=s.updateItemStatusActive(r,c.eqItem);d.push(c);g.setData(d);g.setSizeLimit(d.length);s.getView().setModel(g,"AIWListEqModel");s.updateCount("EquipmentBom",g.getData())}s.onCopyBOMclose()}if(s.action==="copyFlbom"||s.action==="copyMtoFlbom"){if(s.action==="copyFlbom"){t=e.results[0].FBHeader.results[0];a=e.results[0].FBItem.results;l=e.results[0].FBSBIT.results}else if(s.action==="copyMtoFlbom"){t=e.results[0].MRBHeader.results[0];a=e.results[0].MRBItem.results;l=e.results[0].MRBSBIT.results}for(n=0;n<a.length;n++){a[n].itmCatEnable=false}if(t!==undefined){var h=m.getData();var S={Tplnrbom:r.copyFlocTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:t.Bomstatus,Lngtxt:t.Txtmi,Validfrom:s.getDateFormat(t.Validfrom),BaseQty:t.Baseqty,BaseUom:t.Baseuom,Validtoda:s.getDateFormat(t.Validtoda),FLDesc:r.copyFlocTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:t.Bomstatustxt,FLEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",flItem:a,flSubItem:l};S.flItem=s.updateItemStatusActive(r,S.flItem);h.push(S);m.setData(h);m.setSizeLimit(h.length);s.getView().setModel(m,"AIWListFLModel");s.updateCount("FLBom",m.getData())}s.onCopyBOMclose()}if(s.action==="copyWbsbom"||s.action==="copyMtoWbsbom"){if(s.action==="copyWbsbom"){t=e.results[0].WBHeader.results[0];a=e.results[0].WBItem.results;l=e.results[0].WBSBIT.results}else if(s.action==="copyMtoWbsbom"){t=e.results[0].MRBHeader.results[0];a=e.results[0].MRBItem.results;l=e.results[0].MRBSBIT.results}for(n=0;n<a.length;n++){a[n].itmCatEnable=false}if(t!==undefined){var T=f.getData();var M={WbsExt:r.copyWBSTarget,Matnr:r.copyMaterialTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:t.Bomstatus,Lngtxt:t.Txtmi,Validfrom:s.getDateFormat(t.Validfrom),BaseQty:t.Baseqty,BaseUom:t.Baseuom,Validtoda:s.getDateFormat(t.Validtoda),WbsDesc:r.copyWBSTargetDesc,MatDesc:r.copyMaterialTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:t.Bomstatustxt,wbsEnable:false,matEnable:false,plantEnable:false,usageEnable:false,bomType:"Create",modeFlag:"Delete",wbsItem:a,wbsSubItem:l};M.wbsItem=s.updateItemStatusActive(r,M.wbsItem);T.push(M);f.setData(T);f.setSizeLimit(T.length);s.getView().setModel(f,"AIWListWBSModel");s.updateCount("WbsBom",f.getData())}s.onCopyBOMclose()}}},error:function(e){s._copyFragment.setBusy(false);s.onCopyBOMclose();p.AiwTblBusy=false;s.getView().getModel("BusyModel").setData(p);var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=[];for(var l=0;l<t.length;l++){r.push({type:"Error",title:t[l]})}s.createMessagePopover(r,false)}})},updateItemStatusActive:function(e,t){var a={};var r=sap.ui.getCore().getModel("itemStatusModel");var l=r.getData();for(var n=0;n<l.length;n++){if(e.copyUsageTarget===l[n].Stlan){a=l[n]}}var s=$.map(t,function(e){return $.extend(true,{},e)});for(var o=0;o<t.length;o++){s[o].Pmper=a.Pmper;s[o].Pmpka=a.Pmpka;s[o].Pmprv=a.Pmprv;s[o].Pmpfe=a.Pmpfe;s[o].Pmpin=a.Pmpin;s[o].Pmpko=a.Pmpko;if(s[o].Pmpfe==="+")s[o].Sanfe=true;else s[o].Sanfe=false;if(s[o].Pmpin==="+")s[o].Sanin=true;else s[o].Sanin=false;if(s[o].Pmpko==="+")s[o].Sanko=true;else s[o].Sanko=false}return s},CreateBomRow:function(e){if(e==="CreateMaterialBom"){var t=sap.ui.getCore().getModel("AIWListMatModel");var a=t.getData();var r=this.mandateFillCheck(e,a);if(r){var l={Matnr:"",Werks:"",Stlan:"",Stalt:"",Pmbomtech:"",PmbomtechTxt:"",Bomstatus:"",Lngtxt:"",Validfrom:"",BaseQty:"",BaseUom:"",Validtoda:"",MatDesc:"",WerksDesc:"",StlanDesc:"",BomstatusText:"",matEnable:true,plantEnable:true,usageEnable:true,altbomEnable:true,BomstatusEnable:true,BaseQtyEnable:true,LngtxtEnable:true,addItemEnable:false,fromDateEnable:true,matValueState:"None",plantValueState:"None",usageValueState:"None",altbomValueState:"None",statusValueState:"None",BaseQtyValueState:"None",bomType:"Create",modeFlag:"Delete",matItem:[],matSubItem:[]};a.push(l);t.setData(a);t.setSizeLimit(a.length);this.getView().setModel(t,"AIWListMatModel");this.updateCount("MaterialBom",a)}}if(e==="CreateEquipmentBom"){var n=sap.ui.getCore().getModel("AIWListEqModel");var s=n.getData();var r=this.mandateFillCheck(e,s);if(r){var o={Eqnrbom:"",Werks:"",Stlan:"",Bomstatus:"",Lngtxt:"",Validfrom:"",BaseQty:"",BaseUom:"",Validtoda:"",EquiDesc:"",WerksDesc:"",StlanDesc:"",BomstatusText:"",equipEnable:true,plantEnable:true,usageEnable:true,BomstatusEnable:true,BaseQtyEnable:true,LngtxtEnable:true,addItemEnable:false,fromDateEnable:true,equipValueState:"None",plantValueState:"None",usageValueState:"None",statusValueState:"None",BaseQtyValueState:"None",bomType:"Create",modeFlag:"Delete",eqItem:[],eqSubItem:[]};s.push(o);n.setData(s);n.setSizeLimit(s.length);this.getView().setModel(n,"AIWListEqModel");this.updateCount("EquipmentBom",n.getData())}}if(e==="CreateFLBom"){var i=sap.ui.getCore().getModel("AIWListFLModel");var d=i.getData();var r=this.mandateFillCheck(e,d);if(r){var c={Tplnrbom:"",Werks:"",Stlan:"",Bomstatus:"",Lngtxt:"",Validfrom:"",BaseQty:"",BaseUom:"",Validtoda:"",FLDesc:"",WerksDesc:"",StlanDesc:"",BomstatusText:"",FLEnable:true,plantEnable:true,usageEnable:true,BomstatusEnable:true,BaseQtyEnable:true,LngtxtEnable:true,addItemEnable:false,fromDateEnable:true,FLValueState:"None",plantValueState:"None",usageValueState:"None",statusValueState:"None",BaseQtyValueState:"None",bomType:"Create",modeFlag:"Delete",flItem:[],flSubItem:[]};d.push(c);i.setData(d);i.setSizeLimit(d.length);this.getView().setModel(i,"AIWListFLModel");this.updateCount("FLBom",i.getData())}}if(e==="createWbsbom"){var p=sap.ui.getCore().getModel("AIWListWBSModel");var u=p.getData();var r=this.mandateFillCheck(e,u);if(r){var g={WbsExt:"",Matnr:"",Werks:"",Stlan:"",Bomstatus:"",Lngtxt:"",Validfrom:"",BaseQty:"",BaseUom:"",Validtoda:"",WbsDesc:"",MatDesc:"",WerksDesc:"",StlanDesc:"",BomstatusText:"",wbsEnable:true,matEnable:true,plantEnable:true,usageEnable:true,BomstatusEnable:true,BaseQtyEnable:true,LngtxtEnable:true,addItemEnable:false,fromDateEnable:true,wbsValueState:"None",matValueState:"None",plantValueState:"None",usageValueState:"None",statusValueState:"None",BaseQtyValueState:"None",bomType:"Create",modeFlag:"Delete",wbsItem:[],wbsSubItem:[]};u.push(g);p.setData(u);p.setSizeLimit(u.length);this.getView().setModel(p,"AIWListWBSModel");this.updateCount("WbsBom",p.getData())}}if(e==="createObjNet"){var m=sap.ui.getCore().getModel("AIWListONModel");var f=m.getData();var r=this.mandateFillCheck(e,f);if(r){var h={Objnetwrk:"",Netgrp:"",Netwtyp:"",Netxt:"",Ntobjtyp:"",NetgrpDesc:"",NetwtypDesc:"",NetIDValueState:"None",NetIDValueStateText:"",NetgrpValueState:"None",NetwtypValueState:"None",ShrtTxtValueState:"None",NetIDEnable:true,lam:{Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:false,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}};f.push(h);m.setData(f);m.setSizeLimit(f.length);this.getView().setModel(m,"AIWListONModel");this.updateCount("ObjNet",m.getData())}}},updateTotalTLCount:function(){var e=this.getView().getModel("AIWListGTLModel").getData().length;var t=this.getView().getModel("AIWListETLModel").getData().length;var a=this.getView().getModel("AIWListFTLModel").getData().length;var r=this.getView().getModel("CountModel");var l=r.getData();var n=0;n=e+t+a;l.TotalTLCount=n;r.setData(l)},updateCount:function(e,t){var a=this.getView().getModel("CountModel");var r=a.getData();var l=0;if(t.length>0){l=t.length}if(e==="workCenter"){r.WCCount=l}if(e==="generalTL"){r.GTLCount=l;this.updateTotalTLCount()}if(e==="equiTL"){r.ETLCount=l;this.updateTotalTLCount()}if(e==="flocTL"){r.FTLCount=l;this.updateTotalTLCount()}if(e==="objLink"){r.OLCount=l}if(e==="MaterialBom"){r.MatBomCount=l;this.updateTotalBomCount()}if(e==="EquipmentBom"){r.EqBomCount=l;this.updateTotalBomCount()}if(e==="FLBom"){r.FLBomCount=l;this.updateTotalBomCount()}if(e==="WbsBom"){r.WbsBomCount=l;this.updateTotalBomCount()}if(e==="ObjNet"){r.ONCount=l}a.setData(r)},updateTotalBomCount:function(){var e=this.getView().getModel("AIWListMatModel").getData().length;var t=this.getView().getModel("AIWListEqModel").getData().length;var a=this.getView().getModel("AIWListFLModel").getData().length;var r=this.getView().getModel("AIWListWBSModel").getData().length;var l=this.getView().getModel("CountModel");var n=l.getData();var s=0;s=e+t+a+r;n.TotalBomCount=s;l.setData(n)},onEquiNavigation:function(e){var t=e.getSource().getBindingContext("AIWListEqModel").sPath;var a="CreateEquipmentBom";this.getRouter().navTo("detail",{FragmentName:a,itemPath:encodeURIComponent(t),e:" ",p:" ",u:" ",cr:" ",w:" ",mode:this.getMode()})},onFlocNavigation:function(e){var t=e.getSource().getBindingContext("AIWListFLModel").sPath;var a="CreateFLBom";this.getRouter().navTo("detail",{FragmentName:a,itemPath:encodeURIComponent(t),e:" ",p:" ",u:" ",cr:" ",w:" ",mode:this.getMode()})},onMatNavigation:function(e){var t=e.getSource().getBindingContext("AIWListMatModel").sPath;var a="CreateMaterialBom";this.getRouter().navTo("detail",{FragmentName:a,itemPath:encodeURIComponent(t),e:" ",p:" ",u:" ",cr:" ",w:" ",mode:this.getMode()})},onWBSNavigation:function(e){var t=e.getSource().getBindingContext("AIWListWBSModel").sPath;var a="CreateWBSBom";this.getRouter().navTo("detail",{FragmentName:a,itemPath:encodeURIComponent(t),e:" ",p:" ",u:" ",cr:" ",w:" ",mode:this.getMode()})},onObjNetNavigation:function(e){var t=e.getSource().getBindingContext("AIWListONModel").sPath;var a="Create";this.getRouter().navTo("ONdetail",{itemPath:encodeURIComponent(t),action:a,netId:" ",objType:" ",status:" ",mode:this.getMode()})},onEquipmentVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");if(this.action==="createEbom"){var r=e.getSource().getBindingContext("AIWListEqModel").getPath();this.sindex=parseInt(r.split("/")[1])}if(this.action==="copyEbom"||this.action==="copyMtoEbom"){this.sourceId=e.getSource().getId()}var l=d.EquipmentSelectDialog(t);this.getView().addDependent(l);l.setModel(a);l.setModel(this.getView().getModel("i18n"),"i18n");l.open()},handleEquimentConfirm:function(e){var t=this.getParent().getController();var a=t.sindex;var r=t.action;var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();if(r==="createEbom"){n[a].Eqnrbom=e.getParameters().selectedItem.getProperty("title");n[a].EquiDesc=e.getParameters().selectedItem.getProperty("description");n[a].equipValueState="None";l.setData(n);if(n[a].Werks!==""&&n[a].Stlan!==""){t.readBomHdrDetails(n[a].Eqnrbom,n[a].Werks,n[a].Stlan,n,a,"")}}if(r==="copyEbom"||r==="copyMtoEbom"){var s=t._copyFragment.getModel("copyModel");var o=s.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyEquipmentSource"){o.copyEquipmentSource=e.getParameters().selectedItem.getProperty("title");o.copyEquipmentSourceDesc=e.getParameters().selectedItem.getProperty("description");o.srcEquiValueState="None"}else{o.copyEquipmentTarget=e.getParameters().selectedItem.getProperty("title");o.copyEquipmentTargetDesc=e.getParameters().selectedItem.getProperty("description");o.tarEquiValueState="None"}s.setData(o)}if(r.indexOf("ETL")){var t=this.getParent().getController();var a=t.eqindex;var d=sap.ui.getCore().getModel("AIWListETLModel");var c=d.getData();c[a].equipment=e.getParameters().selectedItem.getProperty("title");c[a].equipmentDesc=e.getParameters().selectedItem.getProperty("description");c[a].equipmentVS="None";c[a].header.forEach(function(e){e.equipment=c[a].equipment;e.equipmentDesc=c[a].equipmentDesc});d.setData(c);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(c[a].header.length>0){t.DeriveEquiFlocData(c[a].equipment,"E")}}},DeriveEquiFlocData:function(e,t){var a=this;var r="/ChangeRequestSet";var l=a.getView().getModel();var n={ChangeRequestType:"AIWEAM0P",CrDescription:"",Reason:"01",DeriveData:true,FuncLoc:[],FLAddr:[],FLAddrI:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqClass:[],EqVal:[],MSPoint:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],Messages:[]};var s=sap.ui.getCore().getModel("AIWEQUI").getData();var o=sap.ui.getCore().getModel("AIWFLOC").getData();if(o.length>0){for(var i=0;i<o.length;i++){var d={Tplnr:o[i].Functionallocation,Txtmi:o[i].Flocdescription,TplkzFlc:o[i].Strucindicator,Tplxt:o[i].StrucIndicatorDesc,EditMask:o[i].EditMask,Hierarchy:o[i].Hierarchy,Fltyp:o[i].Floccategory,Flttx:o[i].FlocCategoryDesc,Swerk:o[i].Maintplant,Plantname:o[i].MaintplantDesc,StorFloc:o[i].Location,Locationdesc:o[i].Locationdesc,Abckzfloc:o[i].Abckz,Abctx:o[i].Abctx,Bukrsfloc:o[i].Bukrs,Butxt:o[i].Butxt,City:o[i].City,KostFloc:o[i].Kostl,KokrFloc:o[i].Kokrs,Contareaname:o[i].Mctxt,PlntFloc:o[i].Werks,Planningplantdes:o[i].Planningplantdes,Ingrp:o[i].Ingrp,Plannergrpdesc:o[i].Innam,Arbplfloc:o[i].Arbpl,Wergwfloc:o[i].WcWerks,Gewrkfloc:o[i].MainArbpl,MainWcPlant:o[i].MainWerks,Tplma:o[i].SupFunctionallocation,Supflocdesc:o[i].SupFlocdescription,BeberFl:o[i].BeberFl,Fing:o[i].Fing,Tele:o[i].Tele,Submtiflo:o[i].ConstrType,Constdesc:o[i].ConstructionDesc,Eqart:o[i].TechnicalObjectTyp,Eartx:o[i].Description,Stattext:o[i].Stattext,StsmFloc:o[i].StsmEqui,Statproftxt:o[i].StsmEquiDesc,UstwFloc:o[i].UstwEqui,UswoFloc:o[i].UswoEqui,UstaFloc:o[i].UstaEqui};if(o[i].viewParameter==="create"){d.Type=true}n.FuncLoc.push(d);var c={Funcloc:o[i].Functionallocation,Title:o[i].TitleCode,Name1:o[i].Name1,Name2:o[i].Name2,Name3:o[i].Name3,Name4:o[i].Name4,Sort1:o[i].Sort1,Sort2:o[i].Sort2,NameCo:o[i].NameCo,PostCod1:o[i].PostCod1,City1:o[i].City1,Building:o[i].Building,Floor:o[i].Floor,Roomnum:o[i].Roomnum,Strsuppl1:o[i].Strsuppl1,Strsuppl2:o[i].Strsuppl2,Strsuppl3:o[i].Strsuppl3,Location:o[i].AddrLocation,RPostafl:o[i].RefPosta,Landx:o[i].Landx,TimeZone:o[i].TimeZone};n.FLAddr.push(c);var p=o[i].intlAddr;if(p.length>0){for(var u=0;u<p.length;u++){n.FLAddrI.push(p[u])}}if(a.AltLblDerv==="2"&&o[i].altlbl.length>0){for(var g=0;g<o[i].altlbl.length;g++){var m={Funcloc:o[i].Functionallocation,AltAlkey:o[i].altlbl[g].AltAlkey,AltStrno:o[i].altlbl[g].AltStrno,AltTplkz:o[i].altlbl[g].AltTplkz};n.FLALTLBEL.push(m)}}var f=o[i].classItems;if(f){if(f.length>0){for(var h=0;h<f.length;h++){var S={Funcloc:o[i].Functionallocation,Classtype:f[h].Classtype,Class:f[h].Class,Clstatus1:f[h].Clstatus1};n.FLClass.push(S)}}}var T=o[i].characteristics;if(T){if(T.length>0){for(var M=0;M<T.length;M++){var b={Funcloc:o[i].Functionallocation,Atnam:T[M].Atnam,Textbez:T[M].Textbez,Atwrt:T[M].Atwrt,Class:T[M].Class};n.FLVal.push(b)}}}}}if(s.length>0){for(var E=0;E<s.length;E++){var v={Herst:s[E].Herst,Equnr:s[E].Equnr,Txtmi:s[E].Eqktx,Swerk:s[E].Maintplant,Name1:s[E].MaintplantDesc,TplnEilo:s[E].Tplnr,Flocdescription:s[E].Pltxt,Eqtyp:s[E].EquipmentCatogory,Etytx:s[E].EquipCatgDescription,Eqart:s[E].TechnicalObjectTyp,Eartx:s[E].Description,Typbz:s[E].Typbz,SubmEeqz:s[E].ConstrType,Constdesc:s[E].ConstructionDesc,BukrEilo:s[E].Bukrs,Butxt:s[E].Butxt,HequEeqz:s[E].SuperordinateEquip,SuperordEqDes:s[E].SuperordinateEquipDesc,TidnEeqz:s[E].TechIdNum,KostEilo:s[E].Kostl,KokrEilo:s[E].Kokrs,Contareaname:s[E].Mctxt,StorEilo:s[E].Location,Locationdesc:s[E].Locationdesc,AbckEilo:s[E].Abckz,Abctx:s[E].Abctx,PplaEeqz:s[E].Werks,Planningplantdes:s[E].Planningplantdes,IngrEeqz:s[E].Ingrp,Plannergrpdesc:s[E].Innam,Serge:s[E].Serge,MapaEeqz:s[E].MapaEeqz,Stattext:s[E].Stattext,StsmEqui:s[E].StsmEqui,Statproftxt:s[E].StsmEquiDesc,UstwEqui:s[E].UstwEqui,UswoEqui:s[E].UswoEqui,UstaEqui:s[E].UstaEqui,Answt:s[E].Answt,Ansdt:a._formatDate(s[E].Ansdt),Waers:s[E].Waers,ArbpEilo:s[E].Arbpl,WorkCenterPlant:s[E].WcWerks,ArbpEeqz:s[E].MainArbpl,MainWcPlant:s[E].MainWerks,BebeEilo:s[E].BeberFl,Fing:s[E].Fing,Tele:s[E].Tele,HeqnEeqz:s[E].EquipPosition};if(s[E].viewParameter==="create"){v.Type=true}n.Equipment.push(v);var C={Equi:s[E].Equnr,Title:s[E].TitleCode,Name1:s[E].Name1,Name2:s[E].Name2,Name3:s[E].Name3,Name4:s[E].Name4,Sort1:s[E].Sort1,Sort2:s[E].Sort2,NameCo:s[E].NameCo,PostCod1:s[E].PostCod1,City1:s[E].City1,Building:s[E].Building,Floor:s[E].Floor,Roomnum:s[E].Roomnum,Strsuppl1:s[E].Strsuppl1,Strsuppl2:s[E].Strsuppl2,Strsuppl3:s[E].Strsuppl3,Location:s[E].AddrLocation,RefPosta:s[E].RefPosta,Landx:s[E].Landx,TimeZone:s[E].TimeZone};n.EqAddr.push(C);var p=s[E].intlAddr;if(p.length>0){for(var u=0;u<p.length;u++){n.EqAddrI.push(p[u])}}var x=s[E].classItems;if(x){if(x.length>0){for(var e=0;e<x.length;e++){var V={Equi:s[E].Equnr,Classtype:x[e].Classtype,Class:x[e].Class,Clstatus1:x[e].Clstatus1};n.EqClass.push(V)}}}var P=s[E].characteristics;if(P){if(P.length>0){for(var I=0;I<P.length;I++){var L={Equi:s[E].Equnr,Atnam:P[I].Atnam,Textbez:P[I].Textbez,Atwrt:P[I].Atwrt,Class:P[I].Class};n.EqVal.push(L)}}}}}if(t==="E"){var y=this.etlPath;var D=sap.ui.getCore().getModel("AIWListETLModel");var k=D.getData();if(k[y].header){for(var F=0;F<k[y].header.length;F++){if(k[y].header[F].Iwerk!==""){k[y].header[F].Werks=k[y].header[F].Iwerk}var A={Werks:k[y].header[F].Werks,Wcplant:k[y].header[F].plant,Statu:k[y].header[F].Statu,Tverwe:k[y].header[F].tlusg,Ktext:k[y].header[F].Ktext,Tarbpl:k[y].header[F].wc,Vagrp:k[y].header[F].Vagrp,Anlzu:k[y].header[F].Anlzu,Tplnal:k[y].header[F].Plnal.toString(),Tleqhdr:k[y].grp,Strat:k[y].header[F].Strat,Eq2tl:k[y].equipment};n.ETList.push(A)}}if(k[y].operation){for(var w=0;w<k[y].operation.length;w++){var q={Tleqhdr:k[y].grp,Vornr:k[y].operation[w].Vornr,TlArbpl:k[y].operation[w].Arbpl,Werks2eop:k[y].operation[w].Werks,Steus2eop:k[y].operation[w].Steus,Ltxa1:k[y].operation[w].Ltxa1,Arbei:k[y].operation[w].Arbei,Dauno:k[y].operation[w].Dauno,Arbeh:k[y].operation[w].Arbeh,Anzzl:k[y].operation[w].Anzzl,Daune:k[y].operation[w].Daune,Indet:k[y].operation[w].Indet,Tplnal:k[y].operation[w].Plnal.toString()};n.ETOprs.push(q)}}}if(t==="F"){var y=this.ftlPath;var W=sap.ui.getCore().getModel("AIWListFTLModel");var B=W.getData();if(B[y].header){for(var F=0;F<B[y].header.length;F++){if(B[y].header[F].Iwerk!==""){B[y].header[F].Werks=B[y].header[F].Iwerk}var N={Werks:B[y].header[F].Werks,Wcplant:B[y].header[F].plant,Statu:B[y].header[F].Statu,Tverwe:B[y].header[F].tlusg,Ktext:B[y].header[F].Ktext,Tarbpl:B[y].header[F].wc,Vagrp:B[y].header[F].Vagrp,Anlzu:B[y].header[F].Anlzu,Tplnal:B[y].header[F].Plnal.toString(),Tlflhdr:B[y].grp,Strat:B[y].header[F].Strat,Fl2tl:B[y].floc};n.FTList.push(N)}}if(B[y].operation){for(var w=0;w<B[y].operation.length;w++){var O={Tlflhdr:B[y].grp,Vornr:B[y].operation[w].Vornr,TlArbpl:B[y].operation[w].Arbpl,Werks2fop:B[y].operation[w].Werks,Steus2fop:B[y].operation[w].Steus,Ltxa1:B[y].operation[w].Ltxa1,Arbei:B[y].operation[w].Arbei,Dauno:B[y].operation[w].Dauno,Arbeh:B[y].operation[w].Arbeh,Anzzl:B[y].operation[w].Anzzl,Daune:B[y].operation[w].Daune,Indet:B[y].operation[w].Indet,Tplnal:B[y].operation[w].Plnal.toString()};n.FTOprs.push(O)}}}var R=function(e){if(t==="E"){var r=sap.ui.getCore().getModel("AIWListETLModel");var l=r.getData();if(e.ETList.results.length>0){for(var n=0;n<e.ETList.results.length;n++){l[y].header[n].equipment=e.ETList.results[n].Eq2tl;l[y].header[n].Iwerk=e.ETList.results[n].Werks;l[y].header[n].pPlantDesc=e.ETList.results[n].Iwerktxt;l[y].header[n].wc=e.ETList.results[n].Tarbpl;l[y].header[n].plant=e.ETList.results[n].Wcplant}}if(e.ETOprs.results.length>0){for(var n=0;n<e.ETOprs.results.length;n++){l[y].operation[n].Arbpl=e.ETOprs.results[n].TlArbpl;l[y].operation[n].Werks=e.ETOprs.results[n].Werks2eop;l[y].operation[n].Steus=e.ETOprs.results[n].Steus2eop;if(e.ETOprs.results[n].Usrvalflg1==="X"){l[y].operation[n].SteusEnable=false}else{l[y].operation[n].SteusEnable=true}}}r.setData(l);sap.ui.getCore().getModel("AIWListETLModel").refresh();a.getView().getModel("ETLHeaderModel").refresh()}if(t==="F"){var s=sap.ui.getCore().getModel("AIWListFTLModel");var o=s.getData();if(e.FTList.results.length>0){for(var n=0;n<e.FTList.results.length;n++){o[y].header[n].floc=e.FTList.results[n].Fl2tl;o[y].header[n].Iwerk=e.FTList.results[n].Werks;o[y].header[n].pPlantDesc=e.FTList.results[n].Iwerktxt;o[y].header[n].wc=e.FTList.results[n].Tarbpl;o[y].header[n].plant=e.FTList.results[n].Wcplant}}if(e.ETOprs.results.length>0){for(var n=0;n<e.FTOprs.results.length;n++){o[y].operation[n].Arbpl=e.FTOprs.results[n].TlArbpl;o[y].operation[n].Werks=e.FTOprs.results[n].Werks2fop;o[y].operation[n].Steus=e.FTOprs.results[n].Steus2fop;if(e.FTOprs.results[n].Usrvalflg1==="X"){o[y].operation[n].SteusEnable=false}else{o[y].operation[n].SteusEnable=true}}}s.setData(o);sap.ui.getCore().getModel("AIWListFTLModel").refresh();a.getView().getModel("FTLHeaderModel").refresh()}};if(n.FLAddrI.length>0){n.FLAddrI=$.map(n.FLAddrI,function(e){return $.extend(true,{},e)});for(var u=0;u<n.FLAddrI.length>0;u++){delete n.FLAddrI[u].AdNationEnable;delete n.FLAddrI[u].City1iVS;delete n.FLAddrI[u].StreetiVS}}if(n.EqAddrI.length>0){n.EqAddrI=$.map(n.EqAddrI,function(e){return $.extend(true,{},e)});for(var u=0;u<n.EqAddrI.length>0;u++){delete n.EqAddrI[u].AdNationEnable;delete n.EqAddrI[u].City1iVS;delete n.EqAddrI[u].StreetiVS}}l.create(r,n,{success:R,error:{}})},onTLFlocChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListFTLModel");var n=l.getData();var s=e.getSource().getBindingContext("AIWListFTLModel").getPath();this.FLindex=parseInt(s.split("/")[1]);this.sGrpTableRef=e.getSource().getParent().getParent();if(a!==""){if(a===undefined)return;var o=sap.ui.getCore().getModel("AIWFLOC").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(a===o[i].Functionallocation){n[t.FLindex].floc=o[i].Functionallocation;n[t.FLindex].flocDesc=o[i].Flocdescription;n[t.FLindex].flocVS="None";FLdata[t.FLindex].header.forEach(function(e){e.floc=FLdata[t.FLindex].floc;e.flocDesc=FLdata[t.FLindex].flocDesc});l.setData(n);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(n[t.FLindex].header.length>0){t.DeriveEquiFlocData(n[t.FLindex].floc,"F")}return}}}var d=a.toUpperCase();var c=[new sap.ui.model.Filter("Tplnr","EQ",d)];r.read("/FunctionLocationSet",{filters:c,success:function(e){if(e.results.length>0){n[t.FLindex].floc=e.results[0].Tplnr;n[t.FLindex].flocDesc=e.results[0].Pltxt;n[t.FLindex].flocVS="None";FLdata[t.FLindex].header.forEach(function(e){e.floc=FLdata[t.FLindex].floc;e.flocDesc=FLdata[t.FLindex].flocDesc});l.setData(n);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(n[t.FLindex].header.length>0){t.DeriveEquiFlocData(n[t.FLindex].floc,"F")}}else{n[t.FLindex].flocVS="Error";l.setData(n)}},error:function(e){n[t.FLindex].flocVS="Error";l.setData(n)}})}else{n[t.FLindex].flocVS="Error";l.setData(n)}},onTLEquipChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListETLModel");var n=l.getData();var s=e.getSource().getBindingContext("AIWListETLModel").getPath();this.eqindex=parseInt(s.split("/")[1]);this.sGrpTableRef=e.getSource().getParent().getParent();if(a!==""){if(a===undefined)return;var o=sap.ui.getCore().getModel("AIWEQUI").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(a===o[i].Equnr){n[t.eqindex].equipment=o[i].Equnr;n[t.eqindex].equipmentDesc=o[i].Eqktx;n[t.eqindex].equipmentVS="None";n[t.eqindex].header.forEach(function(e){e.equipment=n[t.eqindex].equipment;e.equipmentDesc=n[t.eqindex].equipmentDesc});l.setData(n);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(n[t.eqindex].header.length>0){t.DeriveEquiFlocData(n[t.eqindex].equipment,"E")}return}}}var d=a.toUpperCase();var c=[new sap.ui.model.Filter("Equnr","EQ",d)];r.read("/EquipmentNumberSet",{filters:c,success:function(e){if(e.results.length>0){n[t.eqindex].equipment=e.results[0].Equnr;n[t.eqindex].equipmentDesc=e.results[0].Eqktx;n[t.eqindex].equipmentVS="None";n[t.eqindex].header.forEach(function(e){e.equipment=n[t.eqindex].equipment;e.equipmentDesc=n[t.eqindex].equipmentDesc});l.setData(n);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(n[t.eqindex].header.length>0){t.DeriveEquiFlocData(n[t.eqindex].equipment,"E")}}else{n[t.eqindex].equipmentVS="Error";l.setData(n)}},error:function(e){n[t.eqindex].equipmentVS="Error";l.setData(n)}})}else{n[t.eqindex].equipmentVS="Error";l.setData(n)}},onTLFlocVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");var r=e.getSource().getBindingContext("AIWListFTLModel").getPath();this.FLindex=parseInt(r.split("/")[1]);var l=d.FLocSelectDialog(t);this.getView().addDependent(l);l.setModel(a);l.setModel(this.getView().getModel("i18n"),"i18n");l.open();this.sGrpTableRef=e.getSource().getParent().getParent()},onFLocBomVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");if(this.action==="createFlbom"){var r=e.getSource().getBindingContext("AIWListFLModel").getPath();this.sindex=parseInt(r.split("/")[1])}if(this.action==="copyFlbom"||this.action==="copyMtoFlbom"){this.sourceId=e.getSource().getId()}var l=d.FLocSelectDialog(t);this.getView().addDependent(l);l.setModel(a);l.setModel(this.getView().getModel("i18n"),"i18n");l.open()},onTLEquipVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");var r=e.getSource().getBindingContext("AIWListETLModel").getPath();this.eqindex=parseInt(r.split("/")[1]);var l=d.EquipmentSelectDialog(t);this.getView().addDependent(l);l.setModel(a);l.setModel(this.getView().getModel("i18n"),"i18n");l.open();this.sGrpTableRef=e.getSource().getParent().getParent()},flocChangeBOM:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListFLModel");var n=l.getData();if(this.action==="createFlbom"){var s=e.getSource().getBindingContext("AIWListFLModel").getPath();this.sindex=parseInt(s.split("/")[1])}if(this.action==="copyFlbom"||this.action==="copyMtoFlbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var o=a.toUpperCase();var i=[new sap.ui.model.Filter("Tplnr","EQ",o)];r.read("/FunctionLocationSet",{filters:i,success:function(e){if(e.results.length>0){if(t.action==="createFlbom"){n[t.sindex].Tplnrbom=e.results[0].Tplnr;n[t.sindex].FLDesc=e.results[0].Pltxt;n[t.sindex].FLValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Tplnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var s=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(s==="/copyFlocSource"){r.copyFlocSource=e.results[0].Tplnr;r.copyFlocSourceDesc=e.results[0].Pltxt}else if(s==="/copyFlocTarget"){r.copyFlocTarget=e.results[0].Tplnr;r.copyFlocTargetDesc=e.results[0].Pltxt}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},handleFLocConfirm:function(e){var t=this.getParent().getController();var a=t.action;var r=sap.ui.getCore().getModel("AIWListFLModel");var l=r.getData();if(a==="createFlbom"){var n=t.sindex;l[n].Tplnrbom=e.getParameters().selectedItem.getProperty("title");l[n].FLDesc=e.getParameters().selectedItem.getProperty("description");l[n].FLValueState="None";r.setData(l);if(l[n].Werks!==""&&l[n].Stlan!==""){t.readBomHdrDetails(l[n].Tplnrbom,l[n].Werks,l[n].Stlan,l,n,"")}}if(a==="copyFlbom"||a==="copyMtoFlbom"){var s=t._copyFragment.getModel("copyModel");var o=s.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyFlocSource"){o.copyFlocSource=e.getParameters().selectedItem.getProperty("title");o.copyFlocSourceDesc=e.getParameters().selectedItem.getProperty("description");o.srcFlocValueState="None"}else{o.copyFlocTarget=e.getParameters().selectedItem.getProperty("title");o.copyFlocTargetDesc=e.getParameters().selectedItem.getProperty("description");o.tarFlocValueState="None"}s.setData(o)}if(a.indexOf("FTL")){var t=this.getParent().getController();var d=sap.ui.getCore().getModel("AIWListFTLModel");var l=d.getData();var n=t.FLindex;l[n].floc=e.getParameters().selectedItem.getProperty("title");l[n].flocDesc=e.getParameters().selectedItem.getProperty("description");l[n].flocVS="None";l[n].header.forEach(function(e){e.floc=l[n].floc;e.flocDesc=l[n].flocDesc});d.setData(l);t.sGrpTableRef.setSelectedItem(t.sGrpTableRef.getItems()[t.eqindex],true,true);if(l[n].header.length>0){t.DeriveEquiFlocData(l[n].floc,"F")}}},onMaterialVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");if(this.action==="createMbom"){var r=e.getSource().getBindingContext("AIWListMatModel").getPath();this.sindex=parseInt(r.split("/")[1])}if(this.action==="createWbsbom"){var r=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.sindex=parseInt(r.split("/")[1])}if(this.action==="copyMbom"||this.action==="copyMtoEbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId()}var l={title:this.getView().getModel("i18n").getProperty("MATERIAL_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/MaterialSHSet",template:new sap.m.StandardListItem({title:"{Matnr}",description:"{Maktx}"})},confirm:function(e){if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.sindex].Matnr=e.getParameters().selectedItem.getProperty("title");r[t.sindex].MatDesc=e.getParameters().selectedItem.getProperty("description");r[t.sindex].matValueState="None";a.setData(r);if(r[t.sindex].Werks!==""&&r[t.sindex].Stlan!==""&&r[t.sindex].Stalt!==""){t.readBomHdrDetails(r[t.sindex].Matnr,r[t.sindex].Werks,r[t.sindex].Stlan,r,t.sindex,"")}}if(t.action==="createWbsbom"){var l=sap.ui.getCore().getModel("AIWListWBSModel");var n=l.getData();n[t.sindex].Matnr=e.getParameters().selectedItem.getProperty("title");n[t.sindex].MatDesc=e.getParameters().selectedItem.getProperty("description");n[t.sindex].matValueState="None";l.setData(n);if(n[t.sindex].WbsExt!==""&&n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Matnr,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex,n[t.sindex].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyMtoEbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var s=t._copyFragment.getModel("copyModel");var o=s.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyMaterialSource"){o.copyMaterialSource=e.getParameters().selectedItem.getProperty("title");o.copyMaterialSourceDesc=e.getParameters().selectedItem.getProperty("description");o.srcMatValueState="None"}else{o.copyMaterialTarget=e.getParameters().selectedItem.getProperty("title");o.copyMaterialTargetDesc=e.getParameters().selectedItem.getProperty("description");o.tarMatValueState="None"}s.setData(o)}}};var n="/MaterialSHSet";var s=c.getSelectDialog(a,n,[],l,"Matnr","Maktx");s.setModel(this.getView().getModel("i18n"),"i18n");s.open()},handleMaterialConfirm:function(e){var t=this.getParent().getController();if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.sindex].Matnr=e.getParameters().selectedItem.getProperty("title");r[t.sindex].MatDesc=e.getParameters().selectedItem.getProperty("description");r[t.sindex].matValueState="None";a.setData(r);if(r[t.sindex].Werks!==""&&r[t.sindex].Stlan!==""&&r[t.sindex].Stalt!==""){t.readBomHdrDetails(r[t.sindex].Matnr,r[t.sindex].Werks,r[t.sindex].Stlan,r,t.sindex,"")}}if(t.action==="createWbsbom"){var l=sap.ui.getCore().getModel("AIWListWBSModel");var n=l.getData();n[t.sindex].Matnr=e.getParameters().selectedItem.getProperty("title");n[t.sindex].MatDesc=e.getParameters().selectedItem.getProperty("description");n[t.sindex].matValueState="None";l.setData(n);if(n[t.sindex].WbsExt!==""&&n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Matnr,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex,n[t.sindex].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyMtoEbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var s=t._copyFragment.getModel("copyModel");var o=s.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyMaterialSource"){o.copyMaterialSource=e.getParameters().selectedItem.getProperty("title");o.copyMaterialSourceDesc=e.getParameters().selectedItem.getProperty("description");o.srcMatValueState="None"}else{o.copyMaterialTarget=e.getParameters().selectedItem.getProperty("title");o.copyMaterialTargetDesc=e.getParameters().selectedItem.getProperty("description");o.tarMatValueState="None"}s.setData(o)}},onWbsVH:function(e){var t=this;var a=this.getView().getModel("valueHelp");if(this.action==="createWbsbom"){var r=e.getSource().getBindingContext("AIWListWBSModel").getPath();var l=parseInt(r.split("/")[1])}if(this.action==="copyWbsbom"||this.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId()}var n=t.action;var s=sap.ui.getCore().getModel("AIWListWBSModel");var o=s.getData();var i={title:"{i18n>WBS_TXT}",noDataText:"{i18n>LOAD}"+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>DESC_TXT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>WBS_TXT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>SHORTID}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>PROJDEF}"})]})],items:{path:"/WBSElementSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Post1}"}),new sap.m.Text({text:"{Posid}"}),new sap.m.Text({text:"{Poski}"}),new sap.m.Text({text:"{Objnr}"})]})},confirm:function(e){if(n==="createWbsbom"){o[l].WbsExt=e.getParameter("selectedItem").getCells()[1].getText();o[l].WbsDesc=e.getParameter("selectedItem").getCells()[0].getText();o[l].wbsValueState="None";s.setData(o);if(o[l].Matnr!==""&&o[l].Werks!==""&&o[l].Stlan!==""){t.readBomHdrDetails(o[l].Matnr,o[l].Werks,o[l].Stlan,o,l,o[l].WbsExt)}}if(n==="copyWbsbom"||n==="copyMtoWbsbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyWBSSource"){r.copyWBSSource=e.getParameter("selectedItem").getCells()[1].getText();r.copyWBSSourceDesc=e.getParameter("selectedItem").getCells()[0].getText();r.srcWBSValueState="None"}else{r.copyWBSTarget=e.getParameter("selectedItem").getCells()[1].getText();r.copyWBSTargetDesc=e.getParameter("selectedItem").getCells()[0].getText();r.tarWBSValueState="None"}a.setData(r)}}};var r="/WBSElementSet";var d=[];var p=[new sap.m.Text({text:"{Post1}"}),new sap.m.Text({text:"{Posid}"}),new sap.m.Text({text:"{Poski}"}),new sap.m.Text({text:"{Objnr}"})];var u=c.getValueHelp(a,r,p,d,i,"Post1","Posid");u.open();u.setModel(this.getView().getModel("i18n"),"i18n")},handleWbsConfirm:function(e){var t=this.getParent().getController();var a=t.sindex;var r=t.action;var l=sap.ui.getCore().getModel("AIWListWBSModel");var n=l.getData();if(r==="createWbsbom"){n[a].WbsExt=e.getParameter("selectedItem").getCells()[1].getText();n[a].WbsDesc=e.getParameter("selectedItem").getCells()[0].getText();n[a].wbsValueState="None";l.setData(n);if(n[a].Matnr!==""&&n[a].Werks!==""&&n[a].Stlan!==""){t.readBomHdrDetails(n[a].Matnr,n[a].Werks,n[a].Stlan,n,a,n[a].WbsExt)}}if(r==="copyWbsbom"||r==="copyMtoWbsbom"){var s=t._copyFragment.getModel("copyModel");var o=s.getData();var i=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(i==="/copyWBSSource"){o.copyWBSSource=e.getParameter("selectedItem").getCells()[1].getText();o.copyWBSSourceDesc=e.getParameter("selectedItem").getCells()[0].getText();o.srcWBSValueState="None"}else{o.copyWBSTarget=e.getParameter("selectedItem").getCells()[1].getText();o.copyWBSTargetDesc=e.getParameter("selectedItem").getCells()[0].getText();o.tarWBSValueState="None"}s.setData(o)}},onPlantInBomVH:function(e){var t=this;if(this.action==="createMbom"){var a=e.getSource().getBindingContext("AIWListMatModel").getPath();this.index=parseInt(a.split("/")[1])}if(this.action==="createEbom"){var a=e.getSource().getBindingContext("AIWListEqModel").getPath();this.index=parseInt(a.split("/")[1])}if(this.action==="createFlbom"){var a=e.getSource().getBindingContext("AIWListFLModel").getPath();this.index=parseInt(a.split("/")[1])}if(this.action==="createWbsbom"){var a=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.index=parseInt(a.split("/")[1])}if(t.action==="copyMbom"||this.action==="copyEbom"||this.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId()}var r={title:this.getView().getModel("i18n").getProperty("PLANT_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/PlantNameSet",template:new sap.m.StandardListItem({title:"{Werks}",description:"{Name1}"})},confirm:function(e){if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.index].Werks=e.getParameters().selectedItem.getProperty("title");r[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");r[t.index].plantValueState="None";a.setData(r);if(r[t.index].Matnr!==""&&r[t.index].Stlan!==""&&r[t.index].Stalt!==""){t.readBomHdrDetails(r[t.index].Matnr,r[t.index].Werks,r[t.index].Stlan,r,t.index,"")}}if(t.action==="createEbom"){var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();n[t.index].Werks=e.getParameters().selectedItem.getProperty("title");n[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");n[t.index].plantValueState="None";l.setData(n);if(n[t.index].Eqnrbom!==""&&n[t.index].Stlan!==""){t.readBomHdrDetails(n[t.index].Eqnrbom,n[t.index].Werks,n[t.index].Stlan,n,t.index,"")}}if(t.action==="createFlbom"){var s=sap.ui.getCore().getModel("AIWListFLModel");var o=s.getData();o[t.index].Werks=e.getParameters().selectedItem.getProperty("title");o[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");o[t.index].plantValueState="None";s.setData(o);if(o[t.index].Tplnrbom!==""&&o[t.index].Stlan!==""){t.readBomHdrDetails(o[t.index].Tplnrbom,o[t.index].Werks,o[t.index].Stlan,o,t.index,"")}}if(t.action==="createWbsbom"){var i=sap.ui.getCore().getModel("AIWListWBSModel");var d=i.getData();d[t.index].Werks=e.getParameters().selectedItem.getProperty("title");d[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");d[t.index].plantValueState="None";i.setData(d);if(d[t.index].WbsExt!==""&&d[t.index].Matnr!==""&&d[t.index].Stlan!==""){t.readBomHdrDetails(d[t.index].Matnr,d[t.index].Werks,d[t.index].Stlan,d,t.index,d[t.index].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var c=t._copyFragment.getModel("copyModel");var p=c.getData();var u=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(u==="/copyPlantSource"){p.copyPlantSource=e.getParameters().selectedItem.getProperty("title");p.copyPlantSourceDesc=e.getParameters().selectedItem.getProperty("description");p.srcPlantValueState="None"}else{p.copyPlantTarget=e.getParameters().selectedItem.getProperty("title");p.copyPlantTargetDesc=e.getParameters().selectedItem.getProperty("description");p.tarPlantValueState="None"}c.setData(p)}}};var l="/PlantNameSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"Werks","Name1");s.setModel(this.getView().getModel("i18n"),"i18n");s.open()},handlePlantConfirm:function(e){var t=this.getParent().getController();if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.index].Werks=e.getParameters().selectedItem.getProperty("title");r[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");r[t.index].plantValueState="None";a.setData(r);if(r[t.index].Matnr!==""&&r[t.index].Stlan!==""&&r[t.index].Stalt!==""){t.readBomHdrDetails(r[t.index].Matnr,r[t.index].Werks,r[t.index].Stlan,r,t.index,"")}}if(t.action==="createEbom"){var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();n[t.index].Werks=e.getParameters().selectedItem.getProperty("title");n[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");n[t.index].plantValueState="None";l.setData(n);if(n[t.index].Eqnrbom!==""&&n[t.index].Stlan!==""){t.readBomHdrDetails(n[t.index].Eqnrbom,n[t.index].Werks,n[t.index].Stlan,n,t.index,"")}}if(t.action==="createFlbom"){var s=sap.ui.getCore().getModel("AIWListFLModel");var o=s.getData();o[t.index].Werks=e.getParameters().selectedItem.getProperty("title");o[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");o[t.index].plantValueState="None";s.setData(o);if(o[t.index].Tplnrbom!==""&&o[t.index].Stlan!==""){t.readBomHdrDetails(o[t.index].Tplnrbom,o[t.index].Werks,o[t.index].Stlan,o,t.index,"")}}if(t.action==="createWbsbom"){var i=sap.ui.getCore().getModel("AIWListWBSModel");var d=i.getData();d[t.index].Werks=e.getParameters().selectedItem.getProperty("title");d[t.index].WerksDesc=e.getParameters().selectedItem.getProperty("description");d[t.index].plantValueState="None";i.setData(d);if(d[t.index].WbsExt!==""&&d[t.index].Matnr!==""&&d[t.index].Stlan!==""){t.readBomHdrDetails(d[t.index].Matnr,d[t.index].Werks,d[t.index].Stlan,d,t.index,d[t.index].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var c=t._copyFragment.getModel("copyModel");var p=c.getData();var u=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(u==="/copyPlantSource"){p.copyPlantSource=e.getParameters().selectedItem.getProperty("title");p.copyPlantSourceDesc=e.getParameters().selectedItem.getProperty("description");p.srcPlantValueState="None"}else{p.copyPlantTarget=e.getParameters().selectedItem.getProperty("title");p.copyPlantTargetDesc=e.getParameters().selectedItem.getProperty("description");p.tarPlantValueState="None"}c.setData(p)}},omBomUsageVH:function(e){var t=this;var a=[];if(this.action==="createMbom"){var r=e.getSource().getBindingContext("AIWListMatModel").getPath();this.index=parseInt(r.split("/")[1])}if(this.action==="createEbom"){var r=e.getSource().getBindingContext("AIWListEqModel").getPath();this.index=parseInt(r.split("/")[1]);a=[new sap.ui.model.Filter("EqFl","EQ",true)]}if(this.action==="createFlbom"){var r=e.getSource().getBindingContext("AIWListFLModel").getPath();this.index=parseInt(r.split("/")[1]);a=[new sap.ui.model.Filter("EqFl","EQ",true)]}if(this.action==="createWbsbom"){var r=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.index=parseInt(r.split("/")[1])}if(t.action==="copyMbom"||this.action==="copyEbom"||this.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId();this.BindPath=e.getSource().getBindingInfo("value").binding.sPath}var l={title:this.getView().getModel("i18n").getProperty("BOM_USAGE_TXT"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/BOMUsageHelpSet",template:new sap.m.StandardListItem({title:"{Stlan}",description:"{Antxt}"})},confirm:function(e){if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.index].Stlan=e.getParameters().selectedItem.getProperty("title");r[t.index].StlanDesc=e.getParameters().selectedItem.getProperty("description");r[t.index].usageValueState="None";a.setData(r);if(r[t.index].Matnr!==""&&r[t.index].Werks!==""&&r[t.index].Stalt!==""){t.readBomHdrDetails(r[t.index].Matnr,r[t.index].Werks,r[t.index].Stlan,r,t.index,"")}}if(t.action==="createEbom"){var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();n[t.index].Stlan=e.getParameters().selectedItem.getProperty("title");n[t.index].StlanDesc=e.getParameters().selectedItem.getProperty("description");n[t.index].usageValueState="None";l.setData(n);if(n[t.index].Eqnrbom!==""&&n[t.index].Werks!==""){t.readBomHdrDetails(n[t.index].Eqnrbom,n[t.index].Werks,n[t.index].Stlan,n,t.index,"")}}if(t.action==="createFlbom"){var s=sap.ui.getCore().getModel("AIWListFLModel");var o=s.getData();o[t.index].Stlan=e.getParameters().selectedItem.getProperty("title");o[t.index].StlanDesc=e.getParameters().selectedItem.getProperty("description");o[t.index].usageValueState="None";s.setData(o);if(o[t.index].Tplnrbom!==""&&o[t.index].Werks!==""){t.readBomHdrDetails(o[t.index].Tplnrbom,o[t.index].Werks,o[t.index].Stlan,o,t.index,"")}}if(t.action==="createWbsbom"){var i=sap.ui.getCore().getModel("AIWListWBSModel");var d=i.getData();d[t.index].Stlan=e.getParameters().selectedItem.getProperty("title");d[t.index].StlanDesc=e.getParameters().selectedItem.getProperty("description");d[t.index].usageValueState="None";i.setData(d);if(d[t.index].WbsExt!==""&&d[t.index].Matnr!==""&&d[t.index].Werks!==""){t.readBomHdrDetails(d[t.index].Matnr,d[t.index].Werks,d[t.index].Stlan,d,t.index,d[t.index].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var c=t._copyFragment.getModel("copyModel");var p=c.getData();var u=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(u==="/copyUsageSource"){p.copyUsageSource=e.getParameters().selectedItem.getProperty("title");p.copyUsageSourceDesc=e.getParameters().selectedItem.getProperty("description");p.srcUsageValueState="None"}else{p.copyUsageTarget=e.getParameters().selectedItem.getProperty("title");p.copyUsageTargetDesc=e.getParameters().selectedItem.getProperty("description");p.tarUsageValueState="None"}c.setData(p)}}};var n="/BOMUsageHelpSet";var s=this.getView().getModel("valueHelp");var o=c.getSelectDialog(s,n,a,l,"Stlan","Antxt");o.setModel(this.getView().getModel("i18n"),"i18n");o.open()},handleBomUsageConfirm:function(e){var t=this.getParent().getController();if(t.action==="createMbom"){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();r[t.index].Stlan=e.getParameter("selectedItem").getCells()[0].getText();r[t.index].StlanDesc=e.getParameter("selectedItem").getCells()[7].getText();r[t.index].usageValueState="None";a.setData(r);if(r[t.index].Matnr!==""&&r[t.index].Werks!==""&&r[t.index].Stalt!==""){t.readBomHdrDetails(r[t.index].Matnr,r[t.index].Werks,r[t.index].Stlan,r,t.index,"")}}if(t.action==="createEbom"){var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();n[t.index].Stlan=e.getParameter("selectedItem").getCells()[0].getText();n[t.index].StlanDesc=e.getParameter("selectedItem").getCells()[7].getText();n[t.index].usageValueState="None";l.setData(n);if(n[t.index].Eqnrbom!==""&&n[t.index].Werks!==""){t.readBomHdrDetails(n[t.index].Eqnrbom,n[t.index].Werks,n[t.index].Stlan,n,t.index,"")}}if(t.action==="createFlbom"){var s=sap.ui.getCore().getModel("AIWListFLModel");var o=s.getData();o[t.index].Stlan=e.getParameter("selectedItem").getCells()[0].getText();o[t.index].StlanDesc=e.getParameter("selectedItem").getCells()[7].getText();o[t.index].usageValueState="None";s.setData(o);if(o[t.index].Tplnrbom!==""&&o[t.index].Werks!==""){t.readBomHdrDetails(o[t.index].Tplnrbom,o[t.index].Werks,o[t.index].Stlan,o,t.index,"")}}if(t.action==="createWbsbom"){var i=sap.ui.getCore().getModel("AIWListWBSModel");var d=i.getData();d[t.index].Stlan=e.getParameter("selectedItem").getCells()[0].getText();d[t.index].StlanDesc=e.getParameter("selectedItem").getCells()[7].getText();d[t.index].usageValueState="None";i.setData(d);if(d[t.index].WbsExt!==""&&d[t.index].Matnr!==""&&d[t.index].Werks!==""){t.readBomHdrDetails(d[t.index].Matnr,d[t.index].Werks,d[t.index].Stlan,d,t.index,d[t.index].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var c=t._copyFragment.getModel("copyModel");var p=c.getData();var u=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(u==="/copyUsageSource"){p.copyUsageSource=e.getParameter("selectedItem").getCells()[0].getText();p.copyUsageSourceDesc=e.getParameter("selectedItem").getCells()[7].getText();p.srcUsageValueState="None"}else{p.copyUsageTarget=e.getParameter("selectedItem").getCells()[0].getText();p.copyUsageTargetDesc=e.getParameter("selectedItem").getCells()[7].getText();p.tarUsageValueState="None"}c.setData(p)}},readBomHdrDetails:function(e,t,a,r,l,n){var s=this;var o=this.getView().getModel();var i;var d=this.getView().getModel("BusyModel").getData();if(this.action==="createMbom"){var c=0;var p=sap.ui.getCore().getModel("AIWListMatModel").getData();if(p.length>0){for(var u=0;u<p.length;u++){if(p[u].Matnr===e&&p[u].Werks===t&&p[u].Stlan===a&&p[u].Stalt===r[l].Stalt){var g="Material BOM "+e+"/"+t+"/"+a+"/"+r[l].Stalt+" already locked in this CR";c=c+1;if(c>1){p[u].Matnr="";p[u].Werks="";p[u].Stlan="";p[u].Stalt="";p[u].MatDesc="";p[u].WerksDesc="";p[u].StlanDesc="";break}}}}if(c<=1){i="/DeriveBOMHDRSet(Material='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='"+r[l].Stalt+"',Tplnr='',Equnr='',Proid='')"}else{s.createMessagePopover([{title:g,type:"Error"}],false);sap.ui.getCore().getModel("AIWListMatModel").setData(p);this.getView().getModel("AIWListMatModel").setData(p);return}}if(this.action==="createEbom"){var c=0;var m=sap.ui.getCore().getModel("AIWListEqModel").getData();if(m.length>0){for(var u=0;u<m.length;u++){if(m[u].Eqnrbom===e&&m[u].Werks===t&&m[u].Stlan===a){var g="Equipment BOM "+e+"/"+t+"/"+a+" already locked in this CR";c=c+1;if(c>1){m[u].Eqnrbom="";m[u].Werks="";m[u].Stlan="";m[u].EquiDesc="";m[u].WerksDesc="";m[u].StlanDesc="";break}}}}if(c<=1){i="/DeriveBOMHDRSet(Equnr='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Material='',Tplnr='',Proid='')"}else{s.createMessagePopover([{title:g,type:"Error"}],false);sap.ui.getCore().getModel("AIWListEqModel").setData(m);this.getView().getModel("AIWListEqModel").setData(m);return}}if(this.action==="copyEbom"){i="/DeriveBOMHDRSet(Equnr='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Material='',Tplnr='',Proid='')"}if(this.action==="createFlbom"){var c=0;var f=sap.ui.getCore().getModel("AIWListFLModel").getData();if(f.length>0){for(var u=0;u<f.length;u++){if(f[u].Tplnrbom===e&&f[u].Werks===t&&f[u].Stlan===a){var g="Functional Location BOM "+e+"/"+t+"/"+a+" already locked in this CR";c=c+1;if(c>1){f[u].Tplnrbom="";f[u].Werks="";f[u].Stlan="";f[u].FLDesc="";f[u].WerksDesc="";f[u].StlanDesc="";break}}}}if(c<=1){i="/DeriveBOMHDRSet(Tplnr='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Material='',Equnr='',Proid='')"}else{s.createMessagePopover([{title:g,type:"Error"}],false);sap.ui.getCore().getModel("AIWListFLModel").setData(f);this.getView().getModel("AIWListFLModel").setData(f);return}}if(this.action==="copyFlbom"){i="/DeriveBOMHDRSet(Tplnr='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Material='',Equnr='',Proid='')"}if(this.action==="createWbsbom"){var c=0;var h=sap.ui.getCore().getModel("AIWListWBSModel").getData();if(h.length>0){for(var u=0;u<h.length;u++){if(h[u].WbsExt===n&&h[u].Matnr===e&&h[u].Werks===t&&h[u].Stlan===a){var g="WBS BOM "+n+"/"+e+"/"+t+"/"+a+" already locked in this CR";c=c+1;if(c>1){h[u].WbsExt="";h[u].Matnr="";h[u].Werks="";h[u].Stlan="";h[u].WbsDesc="";h[u].MatDesc="";h[u].WerksDesc="";h[u].StlanDesc="";break}}}}if(c<=1){i="/DeriveBOMHDRSet(Material='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Proid='"+n+"',Tplnr='',Equnr='')"}else{s.createMessagePopover([{title:g,type:"Error"}],false);sap.ui.getCore().getModel("AIWListWBSModel").setData(h);this.getView().getModel("AIWListWBSModel").setData(h);return}}if(this.action==="copyWbsbom"){i="/DeriveBOMHDRSet(Material='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='',Proid='"+n+"',Tplnr='',Equnr='')"}if(s.action==="copyMbom"||this.action==="copyMtoEbom"||this.action==="copyMtoFlbom"||this.action==="copyMtoWbsbom"){i="/DeriveBOMHDRSet(Material='"+e+"',Werks='"+t+"',Stlan='"+a+"',Stlal='"+r[l].Stalt+"',Tplnr='',Equnr='',Proid='')"}d.AiwTblBusy=true;this.getView().getModel("BusyModel").setData(d);o.read(i,{success:function(e){d.AiwTblBusy=false;s.getView().getModel("BusyModel").setData(d);var t=sap.ui.getCore().getModel("AIWListMatModel");var a=sap.ui.getCore().getModel("AIWListEqModel");var o=sap.ui.getCore().getModel("AIWListFLModel");var i=sap.ui.getCore().getModel("AIWListWBSModel");if(s.action.indexOf("create")>-1){if(e.Message!==""){s.createMessagePopover([{title:e.Message,type:"Error"}],false);r[l].plantEnable=true;r[l].usageEnable=true;if(s.action==="createMbom"){r[l].matValueState="Error";r[l].plantValueState="Error";r[l].usageValueState="Error";r[l].altbomValueState="Error";r[l].matEnable=true;r[l].altbomEnable=true;t.setData(r)}if(s.action==="createEbom"){r[l].equipValueState="Error";r[l].plantValueState="Error";r[l].usageValueState="Error";r[l].equipEnable=true;a.setData(r)}if(s.action==="createFlbom"){r[l].FLValueState="Error";r[l].plantValueState="Error";r[l].usageValueState="Error";r[l].FLEnable=true;o.setData(r)}if(s.action==="createWbsbom"){r[l].wbsValueState="Error";r[l].matValueState="Error";r[l].plantValueState="Error";r[l].usageValueState="Error";r[l].wbsEnable=true;r[l].matEnable=true;i.setData(r)}d.AiwTblBusy=false;s.getView().getModel("BusyModel").setData(d);return}}if(s.action==="createMbom"){r[l].Stalt=e.Stlal;r[l].Pmbomtech=e.Pmbomtech;r[l].PmbomtechTxt=e.PmbomtechTxt;r[l].BaseQty=e.Bmeng;r[l].BaseUom=e.Bmein;r[l].Bomstatus=e.Stlst;r[l].BomstatusText=e.Sttxt;r[l].Validfrom=s.getDateFormat(e.Validfrom);r[l].Validtoda=s.getDateFormat(e.Validto);r[l].matEnable=false;r[l].plantEnable=false;r[l].usageEnable=false;if(n&&n!==""&&r[l].Stalt!==""){r[l].altbomEnable=false}r[l].addItemEnable=true;r[l].matValueState="None";r[l].plantValueState="None";r[l].usageValueState="None";t.setData(r)}if(s.action==="createEbom"){r[l].BaseQty=e.Bmeng;r[l].BaseUom=e.Bmein;r[l].Bomstatus=e.Stlst;r[l].BomstatusText=e.Sttxt;r[l].Validfrom=s.getDateFormat(e.Validfrom);r[l].Validtoda=s.getDateFormat(e.Validto);r[l].equipEnable=false;r[l].plantEnable=false;r[l].usageEnable=false;r[l].addItemEnable=true;r[l].equipValueState="None";r[l].plantValueState="None";r[l].usageValueState="None";a.setData(r)}if(s.action==="createFlbom"){r[l].BaseQty=e.Bmeng;r[l].BaseUom=e.Bmein;r[l].Bomstatus=e.Stlst;r[l].BomstatusText=e.Sttxt;r[l].Validfrom=s.getDateFormat(e.Validfrom);r[l].Validtoda=s.getDateFormat(e.Validto);r[l].FLEnable=false;r[l].plantEnable=false;r[l].usageEnable=false;r[l].addItemEnable=true;r[l].FLValueState="None";r[l].plantValueState="None";r[l].usageValueState="None";o.setData(r)}if(s.action==="createWbsbom"){r[l].BaseQty=e.Bmeng;r[l].BaseUom=e.Bmein;r[l].Bomstatus=e.Stlst;r[l].BomstatusText=e.Sttxt;r[l].Validfrom=s.getDateFormat(e.Validfrom);r[l].Validtoda=s.getDateFormat(e.Validto);r[l].wbsEnable=false;r[l].matEnable=false;r[l].plantEnable=false;r[l].usageEnable=false;r[l].addItemEnable=true;r[l].wbsValueState="None";r[l].matValueState="None";r[l].plantValueState="None";r[l].usageValueState="None";i.setData(r)}if(s.action==="copyMbom"){var c=t.getData();var p={Matnr:r.copyMaterialTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Stalt:r.copyAltBomTarget,Bomstatus:e.Stlst,Lngtxt:"",Validfrom:s.getDateFormat(e.Validfrom),BaseQty:e.Bmeng,BaseUom:e.Bmein,Validtoda:s.getDateFormat(e.Validto),MatDesc:r.copyMaterialTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:e.Sttxt,matEnable:false,plantEnable:false,usageEnable:false,bomType:"Change",modeFlag:"Delete",matItem:[],matSubItem:[]};c.push(p);t.setData(c);s.getView().setModel(t,"AIWListMatModel");s.updateCount("MaterialBom",t.getData());s.onCopyBOMclose()}if(s.action==="copyEbom"||s.action==="copyMtoEbom"){var u=a.getData();var g={Eqnrbom:r.copyEquipmentTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:e.Stlst,Lngtxt:"",Validfrom:s.getDateFormat(e.Validfrom),BaseQty:e.Bmeng,BaseUom:e.Bmein,Validtoda:s.getDateFormat(e.Validto),EquiDesc:r.copyEquipmentTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:e.Sttxt,equipEnable:false,plantEnable:false,usageEnable:false,bomType:"Change",modeFlag:"Delete",eqItem:[],eqSubItem:[]};u.push(g);a.setData(u);s.getView().setModel(a,"AIWListEqModel");s.updateCount("EquipmentBom",a.getData());s.onCopyBOMclose()}if(s.action==="copyFlbom"||s.action==="copyMtoFlbom"){var m=o.getData();var f={Tplnrbom:r.copyFlocTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:e.Stlst,Lngtxt:"",Validfrom:s.getDateFormat(e.Validfrom),BaseQty:e.Bmeng,BaseUom:e.Bmein,Validtoda:s.getDateFormat(e.Validto),FLDesc:r.copyFlocTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:e.Sttxt,FLEnable:false,plantEnable:false,usageEnable:false,bomType:"Change",modeFlag:"Delete",flItem:[],flSubItem:[]};m.push(f);o.setData(m);s.getView().setModel(o,"AIWListFLModel");s.updateCount("FLBom",o.getData());s.onCopyBOMclose()}if(s.action==="copyWbsbom"||s.action==="copyMtoWbsbom"){var h=i.getData();var S={WbsExt:r.copyWBSTarget,Matnr:r.copyMaterialTarget,Werks:r.copyPlantTarget,Stlan:r.copyUsageTarget,Bomstatus:e.Stlst,Lngtxt:"",Validfrom:s.getDateFormat(e.Validfrom),BaseQty:e.Bmeng,BaseUom:e.Bmein,Validtoda:s.getDateFormat(e.Validto),WbsDesc:r.copyWBSTargetDesc,MatDesc:r.copyMaterialTargetDesc,WerksDesc:r.copyPlantTargetDesc,StlanDesc:r.copyUsageTargetDesc,BomstatusText:e.Sttxt,wbsEnable:false,matEnable:false,plantEnable:false,usageEnable:false,bomType:"Change",modeFlag:"Delete",wbsItem:[],wbsSubItem:[]};h.push(S);i.setData(h);s.getView().setModel(i,"AIWListWBSModel");s.updateCount("WbsBom",i.getData());s.onCopyBOMclose()}},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var r=[];for(var l=0;l<t.length;l++){r.push({type:"Error",title:t[l]})}s.createMessagePopover(r,false);d.AiwTblBusy=false;s.getView().getModel("BusyModel").setData(d)}})},getDateFormat:function(e){if(e!==""&&e!==null){var t="";var a=new Date(e);var r=a.getFullYear();var l=a.getMonth();if(l<10){l=l+1;if(l.length===1){l="0"+l}}else{l=l+1}var n=a.getDate();if(n<10){n="0"+n}var s=a.getHours();if(s<10){s="0"+s}var o=a.getMinutes();if(o<10){o="0"+o}var i=a.getSeconds();if(i<10){i="0"+i}t=l+"/"+n+"/"+r;return t}else if(e===null){return""}},onLiveChange:function(e){if(e.getSource().getValue()===" "){e.getSource().setValue("")}e.getSource().setValueState("None");e.getSource().setValueStateText("")},materialChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l;if(this.action==="createMbom"){var n=sap.ui.getCore().getModel("AIWListMatModel");var s=n.getData();l=e.getSource().getBindingContext("AIWListMatModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="createWbsbom"){var o=sap.ui.getCore().getModel("AIWListWBSModel");var i=o.getData();l=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="copyMbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId();this._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var d=a.toUpperCase();var c=[new sap.ui.model.Filter("Matnr","EQ",d)];r.read("/MaterialSHSet",{filters:c,success:function(e){if(e.results.length>0){if(t.action==="createMbom"){s[t.sindex].Matnr=e.results[0].Matnr;s[t.sindex].MatDesc=e.results[0].Maktx;s[t.sindex].matValueState="None";n.setData(s);if(s[t.sindex].Werks!==""&&s[t.sindex].Stlan!==""){t.readBomHdrDetails(s[t.sindex].Matnr,s[t.sindex].Werks,s[t.sindex].Stlan,s,t.sindex)}}if(t.action==="createWbsbom"){i[t.sindex].Matnr=e.results[0].Matnr;i[t.sindex].MatDesc=e.results[0].Maktx;i[t.sindex].matValueState="None";o.setData(i);if(i[t.sindex].WbsExt!==""&&i[t.sindex].Werks!==""&&i[t.sindex].Stlan!==""){t.readBomHdrDetails(i[t.sindex].Matnr,i[t.sindex].Werks,i[t.sindex].Stlan,i,t.sindex,i[t.sindex].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var l=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(l==="/copyMaterialSource"){r.copyMaterialSource=e.results[0].Matnr;r.copyMaterialSourceDesc=e.results[0].Maktx}else if(l==="/copyMaterialTarget"){r.copyMaterialTarget=e.results[0].Matnr;r.copyMaterialTargetDesc=e.results[0].Maktx}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createMbom"){s[t.sindex].matValueState="Error";n.setData(s)}if(t.action==="createWbsbom"){i[t.sindex].matValueState="Error";o.setData(i)}if(t.action==="copyMbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createMbom"){s[t.sindex].matValueState="Error";n.setData(s)}if(t.action==="createWbsbom"){i[t.sindex].matValueState="Error";o.setData(i)}if(t.action==="copyMbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createMbom"){s[t.sindex].matValueState="Error";n.setData(s)}if(t.action==="createWbsbom"){i[t.sindex].matValueState="Error";o.setData(i)}if(t.action==="copyMbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},equipmenBomtChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListEqModel");var n=l.getData();if(this.action==="createEbom"){var s=e.getSource().getBindingContext("AIWListEqModel").getPath();this.sindex=parseInt(s.split("/")[1])}if(this.action==="copyEbom"||this.action==="copyMtoEbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var o=sap.ui.getCore().getModel("AIWEQUI").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(a===o[i].Equnr){if(t.action==="createEbom"){n[t.sindex].Eqnrbom=o[i].Equnr;n[t.sindex].EquiDesc=o[i].Eqktx;n[t.sindex].equipValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Eqnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){var d=t._copyFragment.getModel("copyModel");var c=d.getData();var p=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(p==="/copyEquipmentSource"){c.copyEquipmentSource=o[i].Equnr;c.copyEquipmentSourceDesc=o[i].Eqktx}else if(p==="/copyEquipmentTarget"){c.copyEquipmentTarget=o[i].Equnr;c.copyEquipmentTargetDesc=o[i].Eqktx}d.setData(c);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}return}}}var u=a.toUpperCase();var g=[new sap.ui.model.Filter("Equnr","EQ",u)];r.read("/EquipmentNumberSet",{filters:g,success:function(e){if(e.results.length>0){if(t.action==="createEbom"){n[t.sindex].Eqnrbom=e.results[0].Equnr;n[t.sindex].EquiDesc=e.results[0].Eqktx;n[t.sindex].equipValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Eqnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var s=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(s==="/copyEquipmentSource"){r.copyEquipmentSource=e.results[0].Equnr;r.copyEquipmentSourceDesc=e.results[0].Eqktx}else if(s==="/copyEquipmentTarget"){r.copyEquipmentTarget=e.results[0].Equnr;r.copyEquipmentTargetDesc=e.results[0].Eqktx}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createEbom"){n[t.sindex].equipValueState="Error";l.setData(n)}if(t.action==="copyEbom"||t.action==="copyMtoEbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},flocBomChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListFLModel");var n=l.getData();if(this.action==="createFlbom"){var s=e.getSource().getBindingContext("AIWListFLModel").getPath();this.sindex=parseInt(s.split("/")[1])}if(this.action==="copyFlbom"||this.action==="copyMtoFlbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var o=sap.ui.getCore().getModel("AIWFLOC").getData();if(o.length>0){for(var i=0;i<o.length;i++){if(a===o[i].Functionallocation){if(t.action==="createFlbom"){n[t.sindex].Tplnrbom=o[i].Functionallocation;n[t.sindex].FLDesc=o[i].Flocdescription;n[t.sindex].FLValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Tplnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){var d=t._copyFragment.getModel("copyModel");var c=d.getData();var p=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(p==="/copyFlocSource"){c.copyFlocSource=o[i].Functionallocation;c.copyFlocSourceDesc=o[i].Flocdescription}else if(p==="/copyFlocTarget"){c.copyFlocTarget=o[i].Functionallocation;c.copyFlocTargetDesc=o[i].Flocdescription}d.setData(c);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}return}}}var u=a.toUpperCase();var g=[new sap.ui.model.Filter("Tplnr","EQ",u)];r.read("/FunctionLocationSet",{filters:g,success:function(e){if(e.results.length>0){if(t.action==="createFlbom"){n[t.sindex].Tplnrbom=e.results[0].Tplnr;n[t.sindex].FLDesc=e.results[0].Pltxt;n[t.sindex].FLValueState="None";l.setData(n);if(n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Tplnrbom,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex)}}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var s=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(s==="/copyFlocSource"){r.copyFlocSource=e.results[0].Tplnr;r.copyFlocSourceDesc=e.results[0].Pltxt}else if(s==="/copyFlocTarget"){r.copyFlocTarget=e.results[0].Tplnr;r.copyFlocTargetDesc=e.results[0].Pltxt}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createFlbom"){n[t.sindex].FLValueState="Error";l.setData(n)}if(t.action==="copyFlbom"||t.action==="copyMtoFlbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},wbsChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListWBSModel");var n=l.getData();if(this.action==="createWbsbom"){var s=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.sindex=parseInt(s.split("/")[1])}if(this.action==="copyWbsbom"||this.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var o=a.toUpperCase();var i=[new sap.ui.model.Filter("Posid","EQ",o)];r.read("/WBSElementSet",{filters:i,success:function(e){if(e.results.length>0){if(t.action==="createWbsbom"){n[t.sindex].WbsExt=e.results[0].Posid;n[t.sindex].WbsDesc=e.results[0].Post1;n[t.sindex].wbsValueState="None";l.setData(n);if(n[t.sindex].Matnr!==""&&n[t.sindex].Werks!==""&&n[t.sindex].Stlan!==""){t.readBomHdrDetails(n[t.sindex].Matnr,n[t.sindex].Werks,n[t.sindex].Stlan,n,t.sindex,n[t.sindex].WbsExt)}}if(t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var s=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(s==="/copyWBSSource"){r.copyWBSSource=e.results[0].Posid;r.copyWBSSourceDesc=e.results[0].Post1}else if(s==="/copyWBSTarget"){r.copyWBSTarget=e.results[0].Posid;r.copyWBSTargetDesc=e.results[0].Post1}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createWbsbom"){n[t.sindex].wbsValueState="Error";l.setData(n)}if(t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createWbsbom"){n[t.sindex].wbsValueState="Error";l.setData(n)}if(t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createWbsbom"){n[t.sindex].wbsValueState="Error";l.setData(n)}if(t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},plantChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l;if(this.action==="createMbom"){var n=sap.ui.getCore().getModel("AIWListMatModel");var s=n.getData();l=e.getSource().getBindingContext("AIWListMatModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="createEbom"){var o=sap.ui.getCore().getModel("AIWListEqModel");var i=o.getData();l=e.getSource().getBindingContext("AIWListEqModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="createFlbom"){var d=sap.ui.getCore().getModel("AIWListFLModel");var c=d.getData();l=e.getSource().getBindingContext("AIWListFLModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="createWbsbom"){var p=sap.ui.getCore().getModel("AIWListWBSModel");var u=p.getData();l=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="copyMbom"||this.action==="copyEbom"||this.action==="copyMtoEbom"||this.action==="copyFlbom"||this.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var g=a.toUpperCase();var m=[new sap.ui.model.Filter("Werks","EQ",g)];r.read("/PlantNameSet",{filters:m,success:function(e){if(e.results.length>0){if(t.action==="createMbom"){s[t.sindex].Werks=e.results[0].Werks;s[t.sindex].WerksDesc=e.results[0].Name1;s[t.sindex].plantValueState="None";n.setData(s);if(s[t.sindex].Matnr!==""&&s[t.sindex].Stlan!==""){t.readBomHdrDetails(s[t.sindex].Matnr,s[t.sindex].Werks,s[t.sindex].Stlan,s,t.sindex)}}if(t.action==="createEbom"){i[t.sindex].Werks=e.results[0].Werks;i[t.sindex].WerksDesc=e.results[0].Name1;i[t.sindex].plantValueState="None";o.setData(i);if(i[t.sindex].Eqnrbom!==""&&i[t.sindex].Stlan!==""){t.readBomHdrDetails(i[t.sindex].Eqnrbom,i[t.sindex].Werks,i[t.sindex].Stlan,i,t.sindex)}}if(t.action==="createFlbom"){c[t.sindex].Werks=e.results[0].Werks;c[t.sindex].WerksDesc=e.results[0].Name1;c[t.sindex].plantValueState="None";d.setData(c);if(c[t.sindex].Tplnrbom!==""&&c[t.sindex].Stlan!==""){t.readBomHdrDetails(c[t.sindex].Tplnrbom,c[t.sindex].Werks,c[t.sindex].Stlan,c,t.sindex)}}if(t.action==="createWbsbom"){u[t.sindex].Werks=e.results[0].Werks;u[t.sindex].WerksDesc=e.results[0].Name1;u[t.sindex].plantValueState="None";p.setData(u);if(u[t.sindex].WbsExt!==""&&u[t.sindex].Matnr!==""&&u[t.sindex].Stlan!==""){t.readBomHdrDetails(u[t.sindex].Matnr,u[t.sindex].Werks,u[t.sindex].Stlan,u,t.sindex,u[t.sindex].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var l=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(l==="/copyPlantSource"){r.copyPlantSource=e.results[0].Werks;r.copyPlantSourceDesc=e.results[0].Name1}else if(l==="/copyPlantTarget"){r.copyPlantTarget=e.results[0].Werks;r.copyPlantTargetDesc=e.results[0].Name1}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createMbom"){s[t.sindex].plantValueState="Error";n.setData(s)}if(t.action==="createEbom"){i[t.sindex].plantValueState="Error";o.setData(i)}if(t.action==="createFlbom"){c[t.sindex].plantValueState="Error";d.setData(c)}if(t.action==="createWbsbom"){u[t.sindex].plantValueState="Error";p.setData(u)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createMbom"){s[t.sindex].plantValueState="Error";n.setData(s)}if(t.action==="createEbom"){i[t.sindex].plantValueState="Error";o.setData(i)}if(t.action==="createFlbom"){c[t.sindex].plantValueState="Error";d.setData(c)}if(t.action==="createWbsbom"){u[t.sindex].plantValueState="Error";p.setData(u)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createMbom"){s[t.sindex].plantValueState="Error";n.setData(s)}if(t.action==="createEbom"){i[t.sindex].plantValueState="Error";o.setData(i)}if(t.action==="createFlbom"){c[t.sindex].plantValueState="Error";d.setData(c)}if(t.action==="createWbsbom"){u[t.sindex].plantValueState="Error";p.setData(u)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},bomUsageChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l;var n=[];if(this.action==="createMbom"){var s=sap.ui.getCore().getModel("AIWListMatModel");var o=s.getData();l=e.getSource().getBindingContext("AIWListMatModel").getPath();this.index=parseInt(l.split("/")[1])}if(this.action==="createEbom"){var i=sap.ui.getCore().getModel("AIWListEqModel");var d=i.getData();l=e.getSource().getBindingContext("AIWListEqModel").getPath();this.index=parseInt(l.split("/")[1]);n.push(new sap.ui.model.Filter("EqFl","EQ",true))}if(this.action==="createFlbom"){var c=sap.ui.getCore().getModel("AIWListFLModel");var p=c.getData();l=e.getSource().getBindingContext("AIWListFLModel").getPath();this.sindex=parseInt(l.split("/")[1]);n.push(new sap.ui.model.Filter("EqFl","EQ",true))}if(this.action==="createWbsbom"){var u=sap.ui.getCore().getModel("AIWListWBSModel");var g=u.getData();l=e.getSource().getBindingContext("AIWListWBSModel").getPath();this.sindex=parseInt(l.split("/")[1])}if(this.action==="copyMbom"||this.action==="copyEbom"||this.action==="copyMtoEbom"||this.action==="copyFlbom"||this.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){this.sourceId=e.getSource().getId();t._copyFragment.setBusy(true)}if(a!==""){if(a===undefined)return;var m=a.toUpperCase();n.push(new sap.ui.model.Filter("Stlan","EQ",m));r.read("/BOMUsageHelpSet",{filters:n,success:function(e){if(e.results.length>0){if(t.action==="createMbom"){o[t.index].Stlan=e.results[0].Stlan;o[t.index].StlanDesc=e.results[0].Antxt;o[t.index].usageValueState="None";s.setData(o);if(o[t.index].Matnr!==""&&o[t.index].Werks!==""){t.readBomHdrDetails(o[t.index].Matnr,o[t.index].Werks,o[t.index].Stlan,o,t.index)}}if(t.action==="createEbom"){d[t.index].Stlan=e.results[0].Stlan;d[t.index].StlanDesc=e.results[0].Antxt;d[t.index].usageValueState="None";i.setData(d);if(d[t.index].Eqnrbom!==""&&d[t.index].Werks!==""){t.readBomHdrDetails(d[t.index].Eqnrbom,d[t.index].Werks,d[t.index].Stlan,d,t.index)}}if(t.action==="createFlbom"){p[t.sindex].Stlan=e.results[0].Stlan;p[t.sindex].StlanDesc=e.results[0].Antxt;p[t.sindex].usageValueState="None";c.setData(p);if(p[t.sindex].Tplnrbom!==""&&p[t.sindex].Werks!==""){t.readBomHdrDetails(p[t.sindex].Tplnrbom,p[t.sindex].Werks,p[t.sindex].Stlan,p,t.sindex)}}if(t.action==="createWbsbom"){g[t.sindex].Stlan=e.results[0].Stlan;g[t.sindex].StlanDesc=e.results[0].Antxt;g[t.sindex].usageValueState="None";u.setData(g);if(g[t.sindex].WbsExt!==""&&g[t.sindex].Matnr!==""&&g[t.sindex].Werks!==""){t.readBomHdrDetails(g[t.sindex].Matnr,g[t.sindex].Werks,g[t.sindex].Stlan,g,t.sindex,g[t.sindex].WbsExt)}}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){var a=t._copyFragment.getModel("copyModel");var r=a.getData();var l=sap.ui.getCore().byId(t.sourceId).getBindingInfo("value").binding.sPath;if(l==="/copyUsageSource"){r.copyUsageSource=e.results[0].Stlan;r.copyUsageSourceDesc=e.results[0].Antxt}else if(l==="/copyUsageTarget"){r.copyUsageTarget=e.results[0].Stlan;r.copyUsageTargetDesc=e.results[0].Antxt}a.setData(r);sap.ui.getCore().byId(t.sourceId).setValueState("None");t._copyFragment.setBusy(false)}}else{if(t.action==="createMbom"){o[t.sindex].usageValueState="Error";s.setData(o)}if(t.action==="createEbom"){d[t.index].usageValueState="Error";i.setData(d)}if(t.action==="createFlbom"){p[t.sindex].usageValueState="Error";c.setData(p)}if(t.action==="createWbsbom"){g[t.sindex].usageValueState="Error";u.setData(g)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},error:function(e){if(t.action==="createMbom"){o[t.sindex].usageValueState="Error";s.setData(o)}if(t.action==="createEbom"){d[t.index].usageValueState="Error";i.setData(d)}if(t.action==="createFlbom"){p[t.sindex].usageValueState="Error";c.setData(p)}if(t.action==="createWbsbom"){g[t.sindex].usageValueState="Error";u.setData(g)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}})}else{if(t.action==="createMbom"){o[t.sindex].usageValueState="Error";s.setData(o)}if(t.action==="createEbom"){d[t.index].usageValueState="Error";i.setData(d)}if(t.action==="createFlbom"){p[t.sindex].usageValueState="Error";c.setData(p)}if(t.action==="createWbsbom"){g[t.sindex].usageValueState="Error";u.setData(g)}if(t.action==="copyMbom"||t.action==="copyEbom"||t.action==="copyMtoEbom"||t.action==="copyFlbom"||t.action==="copyMtoFlbom"||t.action==="copyWbsbom"||t.action==="copyMtoWbsbom"){sap.ui.getCore().byId(t.sourceId).setValueState("Error");t._copyFragment.setBusy(false)}}},onAltBomChange:function(e){var t=this;if(e.getSource().getValue()!==""){var a=sap.ui.getCore().getModel("AIWListMatModel");var r=a.getData();var l=e.getSource().getValue();if(r[t.index].Matnr!==""&&r[t.index].Werks!==""&&r[t.index].Stlan!==""){t.readBomHdrDetails(r[t.index].Matnr,r[t.index].Werks,r[t.index].Stlan,r,t.index,l)}}},onMatRowSelect:function(e){this.updateDeleteEnableBOM("MBOM",e)},onEqRowSelect:function(e){this.updateDeleteEnableBOM("EBOM",e)},onFLRowSelect:function(e){this.updateDeleteEnableBOM("FLBOM",e)},onWbsRowSelect:function(e){this.updateDeleteEnableBOM("WBSBOM",e)},onONRowSelect:function(e){this.updateDeleteEnableBOM("ON",e)},updateDeleteEnableBOM:function(e,t){var a=this.getView().getModel("EnableModel");var r=a.getData();this.tableId=t.getSource().getId();if(e==="MBOM"){this.selectedRowsMAT=t.getSource()._aSelectedPaths;if(this.selectedRowsMAT.length>0){r.deleteMAT=true}else{r.deleteMAT=false}}if(e==="EBOM"){this.selectedRowsEQ=t.getSource()._aSelectedPaths;if(this.selectedRowsEQ.length>0){r.deleteEQ=true}else{r.deleteEQ=false}}if(e==="FLBOM"){this.selectedRowsFL=t.getSource()._aSelectedPaths;if(this.selectedRowsFL.length>0){r.deleteFL=true}else{r.deleteFL=false}}if(e==="WBSBOM"){this.selectedRowsWBS=t.getSource()._aSelectedPaths;if(this.selectedRowsWBS.length>0){r.deleteWBS=true}else{r.deleteWBS=false}}if(e==="ON"){this.selectedRowsON=t.getSource()._aSelectedPaths;if(this.selectedRowsON.length>0){r.deleteON=true}else{r.deleteON=false}}a.setData(r)},onRemoveMATPress:function(e){var t=[];var a;var r=this.getView().getModel("AIWListMatModel");var l=r.getData();for(var n=0;n<this.selectedRowsMAT.length;n++){t.push(parseInt(this.selectedRowsMAT[n].split("/")[1]))}t.sort(function(e,t){return e-t});for(var s=t.length-1;s>=0;s--){a=t[s];l.splice(a,1)}sap.ui.getCore().byId(this.tableId).removeSelections();r.setData(l);this.updateCount("MaterialBom",l);this.selectedRowsMAT=[];var o=this.getView().getModel("EnableModel");var i=o.getData();i.deleteMAT=false;o.setData(i)},onRemoveEQPress:function(e){var t=[];var a;var r=this.getView().getModel("AIWListEqModel");var l=r.getData();for(var n=0;n<this.selectedRowsEQ.length;n++){t.push(parseInt(this.selectedRowsEQ[n].split("/")[1]))}t.sort(function(e,t){return e-t});for(var s=t.length-1;s>=0;s--){a=t[s];l.splice(a,1)}sap.ui.getCore().byId(this.tableId).removeSelections();r.setData(l);this.updateCount("EquipmentBom",l);this.selectedRowsEQ=[];var o=this.getView().getModel("EnableModel");var i=o.getData();i.deleteEQ=false;o.setData(i)},onRemoveFLPress:function(e){var t=[];var a;var r=this.getView().getModel("AIWListFLModel");var l=r.getData();for(var n=0;n<this.selectedRowsFL.length;n++){t.push(parseInt(this.selectedRowsFL[n].split("/")[1]))}t.sort(function(e,t){return e-t});for(var s=t.length-1;s>=0;s--){a=t[s];l.splice(a,1)}sap.ui.getCore().byId(this.tableId).removeSelections();r.setData(l);this.updateCount("FLBom",l);this.selectedRowsFL=[];var o=this.getView().getModel("EnableModel");var i=o.getData();i.deleteFL=false;o.setData(i)},onRemoveWBSPress:function(e){var t=[];var a;var r=this.getView().getModel("AIWListWBSModel");var l=r.getData();for(var n=0;n<this.selectedRowsWBS.length;n++){t.push(parseInt(this.selectedRowsWBS[n].split("/")[1]))}t.sort(function(e,t){return e-t});for(var s=t.length-1;s>=0;s--){a=t[s];l.splice(a,1)}sap.ui.getCore().byId(this.tableId).removeSelections();r.setData(l);this.updateCount("WbsBom",l);this.selectedRowsWBS=[];var o=this.getView().getModel("EnableModel");var i=o.getData();i.deleteWBS=false;o.setData(i)},onRemoveONPress:function(e){var t=[];var a;var r=this.getView().getModel("AIWListONModel");var l=r.getData();for(var n=0;n<this.selectedRowsON.length;n++){t.push(parseInt(this.selectedRowsON[n].split("/")[1]))}t.sort(function(e,t){return e-t});for(var s=t.length-1;s>=0;s--){a=t[s];l.splice(a,1)}sap.ui.getCore().byId(this.tableId).removeSelections();r.setData(l);this.updateCount("ObjNet",l);this.selectedRowsON=[];var o=this.getView().getModel("EnableModel");var i=o.getData();i.deleteON=false;o.setData(i)},openCopyOnFragment:function(){if(!this._copyONFragment){this._copyONFragment=sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.ON.CopyObjectNetwork",this);this.getView().addDependent(this._copyFragment)}this._copyONFragment.open();var e=sap.ui.getCore().byId("idSrcNetwork");var t=sap.ui.getCore().byId("idTarNetwork");e.setValue("");e.setValueState("None");e.setValueStateText("");t.setValue("");t.setValueState("None");t.setValueStateText("")},onCopyONclose:function(){this._copyONFragment.close();if(this.action==="copyOn"){this.action="createOn"}},onNetworkIdVH:function(e){var t=this;var a;a=e.getSource();var r={title:this.getView().getModel("i18n").getProperty("NET_ID"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",columns:[new sap.m.Column({header:[new sap.m.Text({text:"{i18n>netId}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>NET_SHTXT}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>NET_GRP}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>NET_TYP}"})]}),new sap.m.Column({demandPopin:true,minScreenWidth:"Tablet",header:[new sap.m.Text({text:"{i18n>DELINDICATOR}"})]})],items:{path:"/NetidSet",template:new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Text({text:"{Netwid}"}),new sap.m.Text({text:"{Netxt}"}),new sap.m.Text({text:"{NetworkGroup}"}),new sap.m.Text({text:"{NetworkType}"}),new sap.m.Text({text:"{Lvorm}"})]})},confirm:function(e){a.setValue(e.getParameter("selectedItem").getCells()[0].getText());a.setValueState("None");a.setValueStateText("")}};var l="/NetidSet";var n=[];var s=this.getView().getModel("valueHelp");var o=[new sap.m.Text({text:"{Netwid}"}),new sap.m.Text({text:"{Netxt}"}),new sap.m.Text({text:"{NetworkGroup}"}),new sap.m.Text({text:"{NetworkType}"}),new sap.m.Text({text:"{Lvorm}"})];var i=c.getValueHelp(s,l,o,n,r,"Netwid","Netxt");i.open();i.setModel(this.getView().getModel("i18n"),"i18n")},srcnetIdChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=e.getSource();this._copyONFragment.setBusy(true);if(a!==""){if(a!==undefined){var n=a.toUpperCase();var s=[new sap.ui.model.Filter("Netwid","EQ",n)];r.read("/NetidSet",{filters:s,success:function(e){if(e.results.length>0){l.setValue(e.results[0].Netwid);l.setValueState("None");l.setValueStateText("")}else{l.setValueState("Error");l.setValueStateText("Object Network "+a+" doesn't exists")}t._copyONFragment.setBusy(false)},error:function(e){l.setValueState("Error");t._copyONFragment.setBusy(false)}})}}},tarnetIdChange:function(e){var t=e.getParameters().newValue;var a=this.getView().getModel("valueHelp");var r=e.getSource();var l=false;if(t!==""){if(t!==undefined){var n=t.toUpperCase();var s=sap.ui.getCore().getModel("AIWListONModel").getData();if(s.length>0){for(var o=0;o<s.length;o++){if(s[o].Objnetwrk===t){var i="Object Network "+t+" already locked in this CR";r.setValueState("Error");r.setValueStateText(i);l=true;break}}}if(!l){r.setValueState("None");r.setValueStateText("");var d=[new sap.ui.model.Filter("Netwid","EQ",n)];a.read("/NetidSet",{filters:d,success:function(e){if(e.results.length>0){r.setValueState("Error");r.setValueStateText("Object Network "+e.results[0].Netwid+" already exists");r.setValue(e.results[0].Netwid)}else{r.setValue(t);r.setValueState("None");r.setValueStateText("")}},error:function(e){r.setValueState("Error")}})}}}},aiwNetIdChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=e.getSource();var n=false;var s=e.getSource().getBindingContext("AIWListONModel").getPath();var o=parseInt(s.split("/")[1]);if(a!==""){if(a!==undefined){var i=a.toUpperCase();var d=sap.ui.getCore().getModel("AIWListONModel");var c=d.getData();if(c.length>0){for(var p=0;p<c.length;p++){if(p!==o){if(c[p].Objnetwrk===a){var u="Object Network "+a+" already locked in this CR";c[o].NetIDValueState="Error";d.setData(c);n=true;this.createMessagePopover([{type:"Error",title:u}]);break}}}}if(!n){var g=[new sap.ui.model.Filter("Netwid","EQ",i)];r.read("/NetidSet",{filters:g,success:function(e){if(e.results.length>0){c[o].NetIDValueState="Error";t.createMessagePopover([{type:"Error",title:"Object Network "+e.results[0].Netwid+" already exists"}]);d.setData(c)}else{c[o].Objnetwrk=a.toUpperCase();c[o].NetIDValueState="None";d.setData(c)}},error:function(e){c[o].NetIDValueState="Error";d.setData(c)}})}}}},onNetGrpVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListONModel").getPath();this.sindex=parseInt(a.split("/")[1]);var r={title:this.getView().getModel("i18n").getProperty("NET_GRP"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/NetGrpSet",template:new sap.m.StandardListItem({title:"{Netgrp}",description:"{Netgrp_txt}"})},confirm:function(e){var a=t.sindex;var r=sap.ui.getCore().getModel("AIWListONModel");var l=r.getData();l[a].Netgrp=e.getParameters().selectedItem.getProperty("title");l[a].NetgrpDesc=e.getParameters().selectedItem.getProperty("description");l[a].NetgrpValueState="None";r.setData(l)}};var l="/NetGrpSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"Netgrp","Netgrp_txt");s.setModel(this.getView().getModel("i18n"),"i18n");s.open()},handleNetGrpConfirm:function(e){var t=this.getParent().getController();var a=t.sindex;var r=sap.ui.getCore().getModel("AIWListONModel");var l=r.getData();l[a].Netgrp=e.getParameters().selectedItem.getProperty("title");l[a].NetgrpDesc=e.getParameters().selectedItem.getProperty("description");l[a].NetgrpValueState="None";r.setData(l)},onNetTypeVH:function(e){var t=this;var a=e.getSource().getBindingContext("AIWListONModel").getPath();this.sindex=parseInt(a.split("/")[1]);var r={title:this.getView().getModel("i18n").getProperty("NET_TYP"),noDataText:this.getView().getModel("i18n").getProperty("LOAD")+"...",items:{path:"/NetTypSet",template:new sap.m.StandardListItem({title:"{NETYP}",description:"{NETYP_TXT}"})},confirm:function(e){var a=t.sindex;var r=sap.ui.getCore().getModel("AIWListONModel");var l=r.getData();l[a].Netwtyp=e.getParameters().selectedItem.getProperty("title");l[a].NetwtypDesc=e.getParameters().selectedItem.getProperty("description");l[a].NetwtypValueState="None";r.setData(l)}};var l="/NetTypSet";var n=this.getView().getModel("valueHelp");var s=c.getSelectDialog(n,l,[],r,"NETYP","NETYP_TXT");s.setModel(this.getView().getModel("i18n"),"i18n");s.open()},handleNetTypConfirm:function(e){var t=this.getParent().getController();var a=t.sindex;var r=sap.ui.getCore().getModel("AIWListONModel");var l=r.getData();l[a].Netwtyp=e.getParameters().selectedItem.getProperty("title");l[a].NetwtypDesc=e.getParameters().selectedItem.getProperty("description");l[a].NetwtypValueState="None";r.setData(l)},netGrpChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListONModel");var n=l.getData();var s=e.getSource().getBindingContext("AIWListONModel").getPath();this.sindex=parseInt(s.split("/")[1]);if(a!==""){if(a!==undefined){var o=a.toUpperCase();var i=[new sap.ui.model.Filter("Netgrp","EQ",o)];r.read("/NetGrpSet",{filters:i,success:function(e){if(e.results.length>0){n[t.sindex].Netgrp=e.results[0].Netgrp;n[t.sindex].NetgrpDesc=e.results[0].Netgrp_txt;n[t.sindex].NetgrpValueState="None";l.setData(n)}else{n[t.sindex].NetgrpValueState="Error";n[t.sindex].NetgrpDesc="";l.setData(n)}},error:function(e){n[t.sindex].NetgrpValueState="Error";n[t.sindex].NetgrpDesc="";l.setData(n)}})}}else{n[t.sindex].NetgrpValueState="Error";n[t.sindex].NetgrpDesc="";l.setData(n)}},netTypeChange:function(e){var t=this;var a=e.getParameters().newValue;var r=this.getView().getModel("valueHelp");var l=sap.ui.getCore().getModel("AIWListONModel");var n=l.getData();var s=e.getSource().getBindingContext("AIWListONModel").getPath();this.sindex=parseInt(s.split("/")[1]);if(a!==""){if(a!==undefined){var o=a.toUpperCase();var i=[new sap.ui.model.Filter("NETYP","EQ",o)];r.read("/NetTypSet",{filters:i,success:function(e){if(e.results.length>0){n[t.sindex].Netwtyp=e.results[0].NETYP;n[t.sindex].NetwtypDesc=e.results[0].NETYP_TXT;n[t.sindex].NetwtypValueState="None";l.setData(n)}else{n[t.sindex].NetwtypValueState="Error";n[t.sindex].NetwtypDesc="";l.setData(n)}},error:function(e){n[t.sindex].NetwtypValueState="Error";n[t.sindex].NetwtypDesc="";l.setData(n)}})}}else{n[t.sindex].NetwtypValueState="Error";n[t.sindex].NetwtypDesc="";l.setData(n)}},onCopyONpress:function(){var e=sap.ui.getCore().byId("idSrcNetwork");var t=sap.ui.getCore().byId("idTarNetwork");var a=sap.ui.getCore().byId("idSrcNetwork").getValue();var r=sap.ui.getCore().byId("idTarNetwork").getValue();var l=sap.ui.getCore().byId("idSrcNetwork").getValueState();var n=sap.ui.getCore().byId("idTarNetwork").getValueState();var s=true;if(a===""){s=false;e.setValueState("Error")}if(r===""){s=false;t.setValueState("Error")}if(l==="Error"||n==="Error"){s=false;g.createMessagePopover([{title:"Enter Valid Network ID",type:"Error"}],false)}if(!s){return}this.BusyDialog.open();this.readNetworkData(a,"","",r)},readNetworkData:function(e,t,a,r){var l=this;var n=0;var s=sap.ui.getCore().getModel("AIWListONModel").getData();var o=sap.ui.getCore().getModel("AIWListONModel").getData();for(var i=0;i<o.length;i++){if(o[i].Objnetwrk===e&&n===0){n=n+1;var d={};d.Objnetwrk=r;d.Netgrp=o[i].Netgrp;d.Netwtyp=o[i].Netwtyp;d.Netxt=o[i].Netxt;d.NetgrpDesc=o[i].NetgroupTxt;d.NetwtypDesc=o[i].NettypeTxt;d.NetgrpValueState="None";d.NetwtypValueState="None";d.Ntobjtyp=o[i].Ntobjtyp;d.lam={Lrpid:o[i].lam.Lrpid,Strtptatr:o[i].lam.Strtptatr,Endptatr:o[i].lam.lam.Endptatr,Length:o[i].lam.Length,LinUnit:o[i].lam.LinUnit,LinUnitDesc:o[i].lam.Uomtext,Startmrkr:o[i].lam.Startmrkr,Endmrkr:o[i].lam.Endmrkr,Mrkdisst:o[i].lam.Mrkdisst,Mrkdisend:o[i].lam.Mrkdisend,MrkrUnit:o[i].lam.MrkrUnit,LrpidDesc:o[i].lam.LrpDescr};s.push(d);sap.ui.getCore().getModel("AIWListONModel").refresh();l.updateCount("ObjNet",s);l.onCopyONclose();l.BusyDialog.close()}}if(n>0){return}var c=this.getView().getModel();var p=[new sap.ui.model.Filter("Objnetwrk","EQ",e),new sap.ui.model.Filter("Kantyp","EQ",t)];var u=["ONLAM","ONText","ONetwork","ONWClass","ONVal","ONALAM","ONatevt","ONattrp","ONLink","ONLLAM"];var g="/ChangeRequestSet";c.read(g,{filters:p,urlParameters:{$expand:u},success:function(e){if(e.results.length>0){l.match=true;var t=e.results[0];var a={};if(t.ONetwork.results[0]!==undefined){var n=t.ONetwork.results;if(n.length>0){var o=n[0];a.Objnetwrk=r;a.Netgrp=o.Netgrp;a.Netwtyp=o.Netwtyp;a.Netxt=o.Netxt;a.NetgrpDesc=o.NetgroupTxt;a.NetwtypDesc=o.NettypeTxt;a.NetgrpValueState="None";a.NetwtypValueState="None"}if(o.Ntobjtyp==="E"){a.Ntobjtyp="EQ"}else if(o.Ntobjtyp==="T"){a.Ntobjtyp="FL"}else{a.Ntobjtyp=""}var i=t.ONLAM.results;if(i.length>0){var d=i[0];a.lam={Lrpid:d.Lrpid,Strtptatr:d.Strtptatr,Endptatr:d.Endptatr,Length:d.Length,LinUnit:d.LinUnit,LinUnitDesc:d.Uomtext,Startmrkr:d.Startmrkr,Endmrkr:d.Endmrkr,Mrkdisst:d.Mrkdisst,Mrkdisend:d.Mrkdisend,MrkrUnit:d.MrkrUnit,LrpidDesc:d.LrpDescr,enableLrp:true,enableMarker:true,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}else{a.lam={Lrpid:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",LrpidDesc:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"}}s.push(a);sap.ui.getCore().getModel("AIWListONModel").refresh();l.updateCount("ObjNet",s)}l.onCopyONclose();l.BusyDialog.close()}},error:function(e){l.onCopyONclose();l.BusyDialog.close()}})},handleApprovalLoad:function(){var e=this.getView().byId("_iconTabBar").getSelectedKey();var t=this;if(e==="BOM"){if(t.CountObj.mbomCount>0&&t.getMode()==="display"){t.readApprovalData("MBOMTab")}if(t.CountObj.ebomCount>0&&t.getMode()==="display"){t.readApprovalData("EBOMTab")}if(t.CountObj.flbomCount>0&&t.getMode()==="display"){t.readApprovalData("FLBOMTab")}if(t.CountObj.wbsbomCount>0&&t.getMode()==="display"){t.readApprovalData("WBSBOMTab")}}else if(e==="TLTab"){var a=this.getView().createId("tlMain");var r=sap.ui.core.Fragment.byId(a,"_iconTabBarTL").getSelectedKey();if(r==="GTLTab"){this.readApprovalData("GTLTab");this.action="ApproveGTL"}if(r==="EqTLTab"){this.readApprovalData("EqTLTab");this.action="ApproveETL"}if(r==="FLOCTLTab"){this.readApprovalData("FLOCTLTab");this.action="ApproveFTL"}}else if(e==="EQUITab"||e==="FLOCTab"||e==="MPMITab"||e==="MSPTTab"){this.handleApproveModel(false,"None",false,true,false,false);this.readApprovalData(e)}else{this.readApprovalData(e)}},bindNotesData:function(e){var t=new sap.ui.model.json.JSONModel;var a=e.Notes.results;var r={items:[]};if(a.length>0){for(var l=0;l<a.length;l++){r.items.push(a[l])}t.setData(r)}this.getView().byId("CNoteAprl").setModel(t,"notes");this.getView().setModel(t,"notes");return t},bindAttachmentData:function(e){var t=new sap.ui.model.json.JSONModel;var a={dataitems:[]};var r=e.CrAttachments.results;if(r.length>0){for(var n=0;n<r.length;n++){var s=l._formatDate(r[n].CreatedAt);var o=decodeURIComponent(r[n].FileName);r[n].FileName=o;var i=s.split(".");r[n].url="/sap/opu/odata/UGIOD01/MDG_APPROVE_CR_SRV/AttachmentCollection(ChangeRequestID='"+r[n].ChangeRequestID+"',CreatedAt=datetime'"+i[0]+"')/$value";a.dataitems.push(r[n])}}t.setData(a);this.getView().byId("_fileUpload").setModel(t);this.getView().byId("_fileUpload").getBinding("items").refresh(true);this.getView().byId("_fileUpload").rerender();this.getView().setModel(t,"json")},handleApproveModel:function(e,t,a,r,l,n){var s=this.getView().getModel("ApproveModel");var o=s.getData();o.headerToolbarVis=e;o.mainTableMode=t;o.createVisible=a;o.approveVisible=r;o.mainFieldEnabled=l;o.SuperordinateEquipEnabled=n;s.setData(o)},readBufferData:function(){var e=this;var t=this.getView().getModel();var a="/ChangeRequestSet";var r=e.getView().byId("_iconTabBar").getSelectedKey();var l=sap.ui.getCore().getModel(e.oModelAIWFLOC).getData();var n=sap.ui.getCore().getModel(e.oModelAIWEQUI).getData();var s=sap.ui.getCore().getModel(e.oModelAIWMSPT).getData();var o=sap.ui.getCore().getModel(e.oModelAIWMPMI).getData();var i={};i.BufferRead=true;i.Hierarchy=[];i.FuncLoc=[];i.FLLAM=[];i.FLAddr=[];i.FLAddrI=[];i.FLALTLBEL=[];i.FLClass=[];i.FLVal=[];i.Equipment=[];i.EqLAM=[];i.EqAddr=[];i.EqAddrI=[];i.EqClass=[];i.EqVal=[];i.MSPoint=[];i.MSLAM=[];i.MSClass=[];i.MSVal=[];i.MPLAN=[];i.MPItem=[];i.MPLAM=[];i.MPCycle=[];i.MRBHeader=[];i.MRBItem=[];i.MRBSBIT=[];i.EBHeader=[];i.EBItem=[];i.EBSBIT=[];i.FBHeader=[];i.FBItem=[];i.FBSBIT=[];i.WBHeader=[];i.WBItem=[];i.WBSBIT=[];i.ONetwork=[];i.ONLAM=[];i.Workcenter=[];i.WCCost=[];i.ClassWC=[];i.ValueWC=[];i.GTHdr=[];i.GTList=[];i.GTOprs=[];i.GTComp=[];i.GTClass=[];i.GTVal=[];i.ETHdr=[];i.ETList=[];i.ETOprs=[];i.ETComp=[];i.ETClass=[];i.ETVal=[];i.FTHdr=[];i.FTList=[];i.FTOprs=[];i.FTComp=[];i.FTClass=[];i.FTVal=[];i.Olink=[];i.OLClass=[];i.OLVal=[];i.AiwModel=[];i.AiwModelRef=[];var d=function(t){if(t){sap.ui.getCore().getModel("mocrRefresh").setProperty("/refresh",false);var a={ReadAllObj:true};var l=sap.ushell.Container.getService("UserInfo").getId();var n=e.formatter.getDateFormat(new Date);if(e.isHierarchy){var s="Mass Change"+" "+l+" "+n;e.getView().byId("Description").setValue(s);if(e.hMode==="copy"){var o=t.Hierarchy.results[0].EntKey;var i=t.Hierarchy.results[0].RowKey;s="Hierarchy Copy: "+o+" ->"+" "+i;e.getView().byId("Description").setValue(s);a.CopyCreate=true}var d=t.Hierarchy.results;for(var c=0;c<d.length;c++){delete d[c].__metadata}e.getView().byId("_iconTabBar").setSelectedKey("FLOCTab");a.Hierarchy=d;a.FuncLoc=[];a.FLLAM=[];a.FLAddr=[];a.FLAddrI=[];a.FLALTLBEL=[];a.FLClass=[];a.FLVal=[];a.Equipment=[];a.EqLAM=[];a.EqAddr=[];a.EqAddrI=[];a.EqClass=[];a.EqVal=[];a.MSPoint=[];a.MSLAM=[];a.MSClass=[];a.MSVal=[];a.MPLAN=[];a.MPItem=[];a.MPLAM=[];a.MPCycle=[];a.MRBHeader=[];a.MRBItem=[];a.MRBSBIT=[];a.EBHeader=[];a.EBItem=[];a.EBSBIT=[];a.FBHeader=[];a.FBItem=[];a.FBSBIT=[];a.WBHeader=[];a.WBItem=[];a.WBSBIT=[];a.ONetwork=[];a.ONLAM=[];a.Workcenter=[];a.WCCost=[];a.ClassWC=[];a.ValueWC=[];a.GTHdr=[];a.GTList=[];a.GTOprs=[];a.GTComp=[];a.GTClass=[];a.GTVal=[];a.ETHdr=[];a.ETList=[];a.ETOprs=[];a.ETComp=[];a.ETClass=[];a.ETVal=[];a.FTHdr=[];a.FTList=[];a.FTOprs=[];a.FTComp=[];a.FTClass=[];a.FTVal=[];a.Olink=[];a.OLClass=[];a.OLVal=[];a.HIERDOI=[{OBJDOI:[]}];a.AiwModel=[];a.AiwModelRef=[]}else{var p="AIW Mass Process "+l+" "+n;e.getView().byId("Description").setValue(p);a.FuncLoc=t.FuncLoc;a.Equipment=t.Equipment;a.EBHeader=t.EBHeader;a.FBHeader=t.FBHeader;a.MPLAN=t.MPLAN;a.MRBHeader=t.MRBHeader;a.MSPoint=t.MSPoint;a.ONetwork=t.ONetwork;a.Olink=t.Olink;a.WBHeader=t.WBHeader;a.Workcenter=t.Workcenter;a.GTList=t.GTList;a.FTList=t.FTList;a.ETList=t.ETList;a.FLLAM=[];a.FLAddr=[];a.FLAddrI=[];a.FLALTLBEL=[];a.FLClass=[];a.FLVal=[];a.EqLAM=[];a.EqAddr=[];a.EqAddrI=[];a.EqClass=[];a.EqVal=[];a.MSLAM=[];a.MSClass=[];a.MSVal=[];a.MPItem=[];a.MPLAM=[];a.MPCycle=[];a.MRBItem=[];a.MRBSBIT=[];a.EBItem=[];a.EBSBIT=[];a.FBItem=[];a.FBSBIT=[];a.WBItem=[];a.WBSBIT=[];a.ONLAM=[];a.WCCost=[];a.ClassWC=[];a.ValueWC=[];a.GTOprs=[];a.GTComp=[];a.GTClass=[];a.GTVal=[];a.ETOprs=[];a.ETComp=[];a.ETClass=[];a.ETVal=[];a.FTOprs=[];a.FTComp=[];a.FTClass=[];a.FTVal=[];a.OLClass=[];a.OLVal=[];a.HIERDOI=[{OBJDOI:[]}];a.AiwModel=[];a.AiwModelRef=[]}e.BusyDialog.close();e.readApprovalData(r,a)}};var c=function(t){e.BusyDialog.close()};this.BusyDialog.open();t.create(a,i,{success:d,error:c})},readApprovalData:function(e,a){var r=this;var n=this.getView().getModel("ApprModel");var s=this.getView().getModel();var o="/ChangeRequestSet";var i=[new sap.ui.model.Filter("ChangeRequestId","EQ",this.cReqNo)];var d={};var c={};var p=sap.ui.getCore().getModel(r.oModelAIWFLOC).getData();var u=sap.ui.getCore().getModel(r.oModelAIWEQUI).getData();var g=sap.ui.getCore().getModel(r.oModelAIWMSPT).getData();var m=sap.ui.getCore().getModel(r.oModelAIWMPMI).getData();var f=sap.ui.getCore().getModel("AIWListMatModel").getData();var h=sap.ui.getCore().getModel("AIWListEqModel").getData();var S=sap.ui.getCore().getModel("AIWListFLModel").getData();var T=sap.ui.getCore().getModel("AIWListWBSModel").getData();var M=sap.ui.getCore().getModel("AIWListONModel").getData();var b=sap.ui.getCore().getModel("AIWListWCModel").getData();var E=sap.ui.getCore().getModel("AIWListGTLModel").getData();var v=sap.ui.getCore().getModel("AIWListETLModel").getData();var C=sap.ui.getCore().getModel("AIWListFTLModel").getData();var x=sap.ui.getCore().getModel("AIWListOLModel").getData();var V=a;function P(e,t){var a="/DeriveOLstatusSet(Netyp='"+e+"',Lvorm=false)";n.read(a,{success:function(e){if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){x[t-1].usrSts=e.Usta_oln;x[t-1].stProfLblV=true;x[t-1].stsProf=e.Stsm_oln;x[t-1].stsProfV=true;x[t-1].stsProfDesc=e.Statproftxt;x[t-1].stsProfDescV=true;x[t-1].stsObj=e.Ustw_oln;x[t-1].stsObjLblV=true;x[t-1].stsObjV=true;x[t-1].stsWoLblV=true;x[t-1].stsWoNoV=true;x[t-1].stsWoNo=e.Uswo_oln;x[t-1].sysSts=e.Stattext}else{x[t-1].stProfLblV=false;x[t-1].stsProfV=false;x[t-1].stsProfDescV=false;x[t-1].stsObjLblV=false;x[t-1].stsObjV=false;x[t-1].stsWoLblV=false;x[t-1].stsWoNoV=false;x[t-1].usrSts="";x[t-1].stsProf="";x[t-1].stsProfDesc="";x[t-1].stsObj="";x[t-1].stsWoNo="";x[t-1].sysSts=""}if(t>1){t--;P(x[t-1].linkCat,t)}sap.ui.getCore().getModel("AIWListOLModel").setData(x);sap.ui.getCore().getModel("AIWListOLModel").refresh()},error:function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.BusyDialog.close();r.invokeMessage(l)}})}var I=function(t){var a=t;var n={};if(a){var s=a.EquiCount===""?"0":a.EquiCount;var o=a.MsptCount===""?"0":a.MsptCount;var i=a.MpmiCount===""?"0":a.MpmiCount;if(o!==""&&o!=="0"){r.getView().getModel("EnableModel").setProperty("/Measuring Point",true)}else{r.getView().getModel("EnableModel").setProperty("/Measuring Point",false)}if(i!==""&&i!=="0"){r.getView().getModel("EnableModel").setProperty("/Maintenance Plan",true)}else{r.getView().getModel("EnableModel").setProperty("/Maintenance Plan",false)}var d=a.MbomCount===""?"0":a.MbomCount;var p=a.EbomCount===""?"0":a.EbomCount;var u=a.FbomCount===""?"0":a.FbomCount;var g=a.WbomCount===""?"0":a.WbomCount;var m=a.ObjnCount===""?"0":a.ObjnCount;var V=parseInt(d)+parseInt(p)+parseInt(u)+parseInt(g);var I=a.WcCount===""?"0":a.WcCount;var L=a.GntlCount===""?"0":a.GntlCount;var y=a.EqtlCount===""?"0":a.EqtlCount;var D=a.FltlCount===""?"0":a.FltlCount;var k=a.ObjlCount===""?"0":a.ObjlCount;var F=(parseInt(L)+parseInt(y)+parseInt(D)).toString();if(m!==""&&m!=="0"){r.getView().getModel("EnableModel").setProperty("/Object Network",true)}else{r.getView().getModel("EnableModel").setProperty("/Object Network",false)}if(I!==""&&I!=="0"){r.getView().getModel("EnableModel").setProperty("/Work Center",true)}else{r.getView().getModel("EnableModel").setProperty("/Work Center",false)}if(F!==""&&F!=="0"){r.getView().getModel("EnableModel").setProperty("/Task List",true)}else{r.getView().getModel("EnableModel").setProperty("/Task List",false)}if(k!==""&&k!=="0"){r.getView().getModel("EnableModel").setProperty("/Object Link",true)}else{r.getView().getModel("EnableModel").setProperty("/Object Link",false)}var A=r.getView().getModel("CountModel");A.setProperty("/MatBomCount",r.getResourceBundle().getText("mbom",[d]));A.setProperty("/EqBomCount",r.getResourceBundle().getText("ebom",[p]));A.setProperty("/FLBomCount",r.getResourceBundle().getText("flbom",[u]));A.setProperty("/WbsBomCount",r.getResourceBundle().getText("wbsbom",[g]));A.setProperty("/TotalBomCount",r.getResourceBundle().getText("billOfMaterials",[V.toString()]));A.setProperty("/ONCount",r.getResourceBundle().getText("objNet",[m]));A.setProperty("/WCCount",r.getResourceBundle().getText("detailWCIconTabFilterMaster",[I]));A.setProperty("/GTLCount",r.getResourceBundle().getText("GTLHeader",[L]));A.setProperty("/ETLCount",r.getResourceBundle().getText("ETLHeader",[y]));A.setProperty("/FTLCount",r.getResourceBundle().getText("FTLHeader",[D]));A.setProperty("/TotalTLCount",r.getResourceBundle().getText("TLHeaderTitle",[F.toString()]));A.setProperty("/OLCount",r.getResourceBundle().getText("detailOLIconTabFilterMaster",[k]));if(r.getState()==="MOCR"&&r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("FLOCTab")}if(a.FuncLoc){var w=a.FuncLoc.results;if(w){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("FLOCTab")}for(var q=0;q<w.length;q++){n={intlAddr:[],classItems:[],characteristics:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};c={intlAddr:[],classItems:[],characteristics:[],altlbl:[],Partners:[],Permits:[],attachmentCount:"0",Guids:"",TplnrEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true};if(r.getState()==="MOCR"&&r.hMode!=="copy"){c.FunctionalLocEnabled=false;c.FlocCatEnabled=false;c.StrucIndEnabled=false}c.Tplnr=w[q].Tplnr;if(r.hMode==="copy"){c.Type=true;c.viewParameter="create"}else{c.viewParameter="change"}c.Functionallocation=w[q].FlocRef;c.Flocdescription=w[q].Txtmi;c.EditMask=w[q].EditMask;c.Hierarchy=w[q].Hierarchy;c.Floccategory=w[q].Fltyp;c.FlocCategoryDesc=w[q].Flttx;c.Strucindicator=w[q].TplkzFlc;c.StrucIndicatorDesc=w[q].Tplxt;c.Lvorm=w[q].Lvorm;c.Deact=w[q].Deact;c.Trpnr=w[q].Trpnr;c.Refflocdesc=w[q].Refflocdesc;c.SupFunctionallocation=w[q].Tplma;c.SupFlocdescription=w[q].Supflocdesc;c.Stattext=w[q].Stattext;c.UstaEqui=w[q].UstaFloc;c.StsmEqui=w[q].StsmFloc;c.StsmEquiDesc=w[q].Statproftxt;c.UstwEqui=w[q].UstwFloc;c.UswoEqui=w[q].UswoFloc;c.TechnicalObjectTyp=w[q].Eqart;c.Description=w[q].Eartx;c.Begru=w[q].Begru;c.Begtx=w[q].Begtx;c.Brgew=w[q].Brgew;c.Gewei=w[q].Gewei;c.Invnr=w[q].Invnr;c.Groes=w[q].Groes;c.Inbdt=w[q].Inbdt;c.Answt=w[q].Answt;c.Waers=w[q].Waers;c.Ansdt=w[q].Ansdt;c.Herst=w[q].Herst;c.Typbz=w[q].Typbz;c.Mapar=w[q].Mapar;c.Serge=w[q].Serge;c.Herld=w[q].Herld;c.Baujj=w[q].Baujj;c.Baumm=w[q].Baumm;c.MonthName=w[q].MonthName;c.Maintplant=w[q].Swerk;if(c.Maintplant!==""&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.MaintplantEnabled=false}c.MaintplantDesc=w[q].Plantname;c.Location=w[q].StorFloc;c.Locationdesc=w[q].Locationdesc;c.Msgrp=w[q].Msgrp;c.BeberFl=w[q].BeberFl;c.Fing=w[q].Fing;c.Tele=w[q].Tele;c.Eqfnr=w[q].Eqfnr;c.Abckz=w[q].Abckzfloc;c.Abctx=w[q].Abctx;c.Bukrs=w[q].Bukrsfloc;if(c.Bukrs!==""&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.BukrsEnabled=false}c.Butxt=w[q].Butxt;c.City=w[q].City;c.GsbeFloc=w[q].GsbeFloc;c.Gtext=w[q].Gtext;c.Anln1Fl=w[q].Anln1Fl;c.AnlaFl=w[q].AnlaFl;c.Txt50=w[q].Txt50;c.Kostl=w[q].KostFloc;c.Kokrs=w[q].KokrFloc;c.Mctxt=w[q].Contareaname;c.Posid=w[q].Posid;c.Post1=w[q].Post1;c.DaufFloc=w[q].DaufFloc;c.Standorderdesc=w[q].Standorderdesc;c.AufnFloc=w[q].AufnFloc;c.SettleOrdDesc=w[q].SettleOrdDesc;c.Werks=w[q].PlntFloc;c.Planningplantdes=w[q].Planningplantdes;c.Ingrp=w[q].Ingrp;c.Innam=w[q].Plannergrpdesc;c.Arbpl=w[q].Arbplfloc;c.Ktext=w[q].Workcenterdesc;c.WcWerks=w[q].Wergwfloc;c.MainArbpl=w[q].Gewrkfloc;c.MainKtext=w[q].MainWcDesc;c.MainWerks=w[q].MainWcPlant;c.RbnrFloc=w[q].RbnrFloc;c.Rbnrx=w[q].Rbnrx;c.Tplma=w[q].Tplma;c.Supflocdesc=w[q].Supflocdesc;c.Posnr=w[q].Posnr;c.Trpnr=w[q].Trpnr;c.Refflocdesc=w[q].Refflocdesc;c.Iequi=w[q].Iequi;c.Einzl=w[q].Einzl;c.ConstrType=w[q].Submtiflo;c.ConstructionDesc=w[q].Constdesc;c.CgwldtFl=w[q].CgwldtFl;c.CgwlenFl=w[q].CgwlenFl;c.CmganrFl=w[q].CmganrFl;c.CwagetFl=w[q].CwagetFl;c.CgaerbFl=w[q].CgaerbFl;c.VgwldtFl=w[q].VgwldtFl;c.VgwlenFl=w[q].VgwlenFl;c.VmganrFl=w[q].VmganrFl;c.VwagetFl=w[q].VwagetFl;c.VgaerbFl=w[q].VgaerbFl;c.Vkorg=w[q].Vkorg;c.Vkorgtxt=w[q].Vkorgtxt;c.Vtweg=w[q].Vtweg;c.Vtwegtxt=w[q].Vtwegtxt;c.Spart=w[q].Spart;c.Sparttxt=w[q].Sparttxt;c.Vkbur=w[q].Vkbur;c.Vkburtxt=w[q].Vkburtxt;c.Vkgrp=w[q].Vkgrp;c.Vkgrptxt=w[q].Vkgrptxt;c.Modeldesc=w[q].Modeldesc;c.Modelref=w[q].Modelref;c.Modelrver=w[q].Modelrver;c.Modelext=w[q].Modelext;c.Modelname=w[q].Modelname;c.Modelver=w[q].Modelver;if(w[q].Fltyp==="L"&&a.FLLAM){var W=a.FLLAM.results;if(W){for(var B=0;B<W.length;B++){if(W[B].Funcloc===w[q].Tplnr){c.lam=W[B];c.lam.LrpidDesc=W[B].LrpDescr;c.lam.LinUnitDesc=W[B].Uomtext;break}}}}if(a.FLClass){var N=a.FLClass.results;if(N){if(N.length>0){for(var O=0;O<N.length;O++){if(c.Tplnr===N[O].Funcloc){if(r.getState()==="MOCR"&&r.hMode!=="copy"){N[O].ctEnable=false;N[O].classEnable=false}else{N[O].ctEnable=true;N[O].classEnable=true}N[O].ClassTypeDesc=N[O].Artxt;delete N[O].Artxt;N[O].ClassDesc=N[O].Kltxt;delete N[O].Kltxt;delete N[O].Changerequestid;delete N[O].Clint;delete N[O].Service;c.classItems.push(N[O])}}}}}if(a.FLVal){var R=a.FLVal.results;if(R){if(R.length>0){for(var U=0;U<R.length;U++){if(c.Tplnr===R[U].Funcloc){if(r.getState()==="MOCR"&&r.hMode!=="copy"){R[U].cNameEnable=false}else{R[U].cNameEnable=true}R[U].Textbz=R[U].Atwtb;delete R[U].Ataut;delete R[U].Ataw1;delete R[U].Atawe;delete R[U].Atcod;delete R[U].Atflb;delete R[U].Atflv;delete R[U].Atimb;delete R[U].Atsrt;delete R[U].Atvglart;delete R[U].Atzis;delete R[U].Changerequestid;delete R[U].Charid;delete R[U].Classtype;delete R[U].Service;delete R[U].Valcnt;R[U].slNo=U+1;R[U].flag=R[U].Class+"-"+R[U].slNo;c.characteristics.push(R[U])}}for(var B=0;B<c.characteristics.length;B++){var z=1;for(var K=0;K<c.characteristics.length;K++){if(B===K){continue}if(c.characteristics[K].Atnam===c.characteristics[B].Atnam&&c.characteristics[K].Class===c.characteristics[B].Class){z++}}if(z>1){c.characteristics[B].charDltEnable=true}else{c.characteristics[B].charDltEnable=false}if(c.characteristics[B].Atein===true){c.characteristics[B].charAddEnable=false}}}}}if(a.FLPrtnr){var H=a.FLPrtnr.results;if(H){if(H.length>0){for(var G=0;G<H.length;G++){if(c.Tplnr===H[G].Funcloc){var j={};j.Partnerfn=H[G].Partnerfn;j.Partner=H[G].Partner;j.Namedisp=H[G].Namedisp;j.Addressfl=H[G].Addressfl;j.Address=H[G].Address;j.Partnrfuntxt=H[G].Partnrfuntxt;c.Partners.push(j)}}}}}if(a.FLPermit){var Q=a.FLPermit.results;if(Q){if(Q.length>0){for(var _=0;_<Q.length;_++){if(c.Tplnr===Q[_].Funcloc){var J={};J.Permit=Q[_].Permit;J.Permittxt=Q[_].Permittxt;J.Permitcat=Q[_].Permitcat;J.Ordercomp=Q[_].Ordercomp;J.Orderrel=Q[_].Orderrel;J.Printper=Q[_].Printper;J.Proposper=Q[_].Proposper;J.Ltxtper=Q[_].Ltxtper;J.Chbltyper=Q[_].Chbltyper;J.PermitLt=Q[_].PermitLt;c.Permits.push(J)}}}}}if(a.FLAddr){if(a.FLAddr.results){var $=a.FLAddr.results;if($){if($.length>0){for(var Z=0;Z<$.length;Z++){if(c.Tplnr===$[Z].Funcloc){var X=sap.ui.getCore().getModel("flocAddressView");var Y=X.getData();var ee=true;var te,ae;if(Y.length>0){for(var re=0;re<Y.length;re++){if(c.Functionallocation===Y[re].Functionallocation){ee=false;ae=re;break}}}if(ee&&c.SupFunctionallocation!==""&&c.SupFunctionallocation!==undefined){te={Functionallocation:c.Functionallocation,IsEditable:$[Z].IsEditable};Y.push(te);X.setData(Y)}if(!ee&&c.SupFunctionallocation!==""&&c.SupFunctionallocation!==undefined){Y[ae].Functionallocation=c.Functionallocation;Y[ae].IsEditable=$[Z].IsEditable;X.setData(Y)}c.Title=$[Z].Titletxt;c.TitleCode=$[Z].Title;c.Name1=$[Z].Name1;c.Name2=$[Z].Name2;c.Name3=$[Z].Name3;c.Name4=$[Z].Name4;c.Sort1=$[Z].Sort1;c.Sort2=$[Z].Sort2;c.NameCo=$[Z].NameCo;c.Building=$[Z].Building;c.Floor=$[Z].Floor;c.Roomnum=$[Z].Roomnum;c.Street=$[Z].Street;c.HouseNr1=$[Z].HouseNr1;c.HouseNr2=$[Z].HouseNr2;c.Strsuppl1=$[Z].Strsuppl1;c.Strsuppl2=$[Z].Strsuppl2;c.Strsuppl3=$[Z].Strsuppl3;c.AddrLocation=$[Z].Location;c.District=$[Z].District;c.PostCod1=$[Z].PostCod1;c.City1=$[Z].City1;c.RefPosta=$[Z].RPostafl;c.Landx=$[Z].Landx;c.Region=$[Z].RfePost;c.Regiotxt=$[Z].Regiotxt;c.HomeCity=$[Z].HomeCity;c.TimeZone=$[Z].TimeZone;c.Taxjurcod=$[Z].Taxjurcod;c.Regiogrou=$[Z].Regiogrou;c.RfePostl=$[Z].RfePostl;c.Dontusestxt=$[Z].Dontusestxt;c.PoBox=$[Z].PoBox;c.PoboxNum=$[Z].PoboxNum;c.DlvsrvTy=$[Z].DlvsrvTy;c.DlvsrvNr=$[Z].DlvsrvNr;c.PostCod2=$[Z].PostCod2;c.PoboxLoc=$[Z].PoboxLoc;c.PoboxLby=$[Z].PoboxLby;c.PoboxCty=$[Z].PoboxCty;c.LandxP=$[Z].LandxP;c.RfePstal=$[Z].RPstaFl;c.RegiotxtP=$[Z].RegiotxtP;c.Dontuseptxt=$[Z].Dontuseptxt;c.PostCod3=$[Z].PostCod3;c.Remark=$[Z].Remark;c.Region=$[Z].RPostFl;c.RegionDesc=$[Z].Regiotxt}}}}}}var le=a.FLAddrI.results;if(le){for(var B=0;B<le.length;B++){if(le[B].Funcloc===c.Tplnr){le[B].AdNationEnable=false;le[B].City1iVS="None";le[B].StreetiVS="None";c.intlAddr.push(le[B])}}}var ne=a.FLALTLBEL.results;if(ne){for(var K=0;K<ne.length;K++){if(ne[K].Funcloc===c.Tplnr){var se={Funcloc:ne[K].Funcloc,AltAlkey:ne[K].AltAlkey,Altxt:ne[K].Altxt,AltStrno:ne[K].AltStrno,AltTplkz:ne[K].AltTplkz,Tplxt:ne[K].Tplxt,Name1i:ne[K].Editm,Actvs:ne[K].Actvs,AltPrkey:ne[K].AltPrkey,AltReuse:ne[K].AltReuse,enableLblSys:false,enableAltLbl:false,enableStrInd:false,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};c.altlbl.push(se)}}}if(a.FLEmail){if(a.FLEmail.results){var oe=a.FLEmail.results;if(oe){if(oe.length>0){for(var ie=0;ie<oe.length;ie++){if(c.Tplnr===oe[ie].Funcloc){var de={};de.EAddress=oe[ie].EAddress;de.EFlgdeft=oe[ie].EFlgdeft;de.EFlgnous=oe[ie].EFlgnous;n.emailAddress.push(de)}}}}}}if(a.FLUrl){if(a.FLUrl.results){var ce=a.FLUrl.results;if(ce){if(ce.length>0){for(var pe=0;pe<ce.length;pe++){if(c.Tplnr===ce[pe].Funcloc){var ue={};ue.Uritypetxt=ce[pe].Uritypetxt;ue.UAddress=ce[pe].UAddress;ue.UFlgdeft=ce[pe].UFlgdeft;ue.UFlgnous=ce[pe].UFlgnous;n.urlAddress.push(ue)}}}}}}if(a.FLTele){if(a.FLTele.results){var ge=a.FLTele.results;if(ge){if(ge.length>0){for(var me=0;me<ge.length;me++){if(c.Tplnr===ge[me].Funcloc){var fe={};fe.Teltype=ge[me].Teltype;fe.TCountry=ge[me].TCountry;fe.Telefto=ge[me].Telefto;fe.TNumber=ge[me].TNumber;fe.TExtens=ge[me].TExtens;fe.TFlgsms=ge[me].TFlgsms;fe.TFlgdeft=ge[me].TFlgdeft;fe.TFlgnous=ge[me].TFlgnous;n.telephoneData.push(fe)}}}}}}if(a.FLFax){if(a.FLFax.results){var he=a.FLFax.results;if(he){if(he.length>0){for(var Se=0;Se<he.length;Se++){if(c.Tplnr===he[Se].Funcloc){var Te={};Te.FCountry=he[Se].FCountry;Te.Telefto=he[Se].Telefto;Te.FNumber=he[Se].FNumber;Te.FExtens=he[Se].FExtens;Te.FFlgdeft=he[Se].FFlgdeft;Te.FFlgnous=he[Se].FFlgnous;n.faxData.push(Te)}}}}}}r.setCommonApprovalData(r.oModelAIWFLOC,n,true);r.handleCreatePress(r,c,r.oModelAIWFLOC)}if(a.HIERDOI){var Me=a.HIERDOI.results;for(var B=0;B<Me.length;B++){if(Me[B].Tplnr!==""&&Me[B].Equnr===""){sap.ui.getCore().getModel("dataOriginMOP").getData().FL.push({key:Me[B].Tplnr,DOI:Me[B].OBJDOI.results})}}}}}if(a.Equipment){var be=a.Equipment.results;if(be){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("EQUITab")}for(var Ee=0;Ee<be.length;Ee++){n={intlAddr:[],classItems:[],characteristics:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};c={intlAddr:[],classItems:[],characteristics:[],PRTInfo:{},DFPS:{},FLEET:{},Stock:{},Partners:[],Permits:[],attachmentCount:"0",Guids:"",ConstrTypeMaxL:0,charValueMaxL:0,EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,TplnrEnabled:true,SuperordinateEquipEnabled:true};if(r.getState()==="MOCR"&&r.hMode!=="copy"){c.EqunrEnabled=false;c.EquipCatEnabled=false}c.Equnr=be[Ee].Equnr;if(r.hMode==="copy"){c.Type=true;c.viewParameter="create"}else{c.viewParameter="change"}c.Eqktx=be[Ee].Txtmi;c.EquipmentCatogory=be[Ee].Eqtyp;c.EquipCatgDescription=be[Ee].Etytx;c.ValidFrom=be[Ee].DataEeqz;c.DatbEeqz=be[Ee].DatbEeqz;c.LvormEqi=be[Ee].LvormEqi;c.Deact=be[Ee].Deact;c.DeactEnable=false;c.Stattext=be[Ee].Stattext;c.UstaEqui=be[Ee].UstaEqui;c.StsmEqui=be[Ee].StsmEqui;c.StsmEquiDesc=be[Ee].Statproftxt;c.UstwEqui=be[Ee].UstwEqui;c.UswoEqui=be[Ee].UswoEqui;c.TechnicalObjectTyp=be[Ee].Eqart;c.Description=be[Ee].Eartx;c.AuthorizGroup=be[Ee].Begru;c.Begtx=be[Ee].Begtx;c.GrossWt=be[Ee].Brgew;c.Gewei=be[Ee].Gewei;c.Invnr=be[Ee].Invnr;c.GroesEqu=be[Ee].GroesEqu;c.Inbdt=be[Ee].Inbdt;c.Answt=be[Ee].Answt;c.Waers=be[Ee].Waers;c.Ansdt=be[Ee].Ansdt;c.Herst=be[Ee].Herst;c.Typbz=be[Ee].Typbz;c.MapaEeqz=be[Ee].MapaEeqz;c.Serge=be[Ee].Serge;c.Herld=be[Ee].Herld;c.CountryName=be[Ee].CountryName;c.ConstructYear=be[Ee].Baujj;c.ConstructMth=be[Ee].BaummEqi;c.MonthName=be[Ee].MonthName;c.Maintplant=be[Ee].Swerk;if(c.Maintplant!==""&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.MaintplantEnabled=false}c.MaintplantDesc=be[Ee].Name1;c.Location=be[Ee].StorEilo;c.Locationdesc=be[Ee].Locationdesc;c.MsgrEilo=be[Ee].MsgrEilo;c.Abckz=be[Ee].AbckEilo;c.Abctx=be[Ee].Abctx;c.BeberFl=be[Ee].BebeEilo;c.Fing=be[Ee].Fing;c.Tele=be[Ee].Tele;c.EqfnEilo=be[Ee].EqfnEilo;c.Bukrs=be[Ee].BukrEilo;if(c.Bukrs!==""&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.BukrsEnabled=false}c.Butxt=be[Ee].Butxt;c.GsbeEilo=be[Ee].GsbeEilo;c.Gtext=be[Ee].Gtext;c.Anl1Eilo=be[Ee].Anl1Eilo;c.Anl2Eilo=be[Ee].Anl2Eilo;c.AssesmentDesc=be[Ee].Txt50;c.Kostl=be[Ee].KostEilo;c.Kokrs=be[Ee].KokrEilo;c.Mctxt=be[Ee].Contareaname;c.Posid=be[Ee].Posid;c.Post1=be[Ee].Post1;c.DaufEilo=be[Ee].DaufEilo;c.Standorderdesc=be[Ee].Standorderdesc;c.Settlement=be[Ee].AufnEilo;c.SettleOrdDesc=be[Ee].SettleOrdDesc;c.Werks=be[Ee].PplaEeqz;c.Planningplantdes=be[Ee].Planningplantdes;c.Ingrp=be[Ee].IngrEeqz;c.Innam=be[Ee].Plannergrpdesc;c.Arbpl=be[Ee].ArbpEilo;c.Ktext=be[Ee].Workcenterdesc;c.WcWerks=be[Ee].WorkCenterPlant;c.MainArbpl=be[Ee].ArbpEeqz;c.MainKtext=be[Ee].MainWcDesc;c.MainWerks=be[Ee].MainWcPlant;c.RbnrEeqz=be[Ee].RbnrEeqz;c.CatalogProfDesc=be[Ee].Rbnrx;c.SuperordinateEquip=be[Ee].HequEeqz;c.SuperordinateEquipDesc=be[Ee].SuperordEqDes;c.EquipPosition=be[Ee].HeqnEeqz;c.Liznr=be[Ee].Liznr;c.TechIdNum=be[Ee].TidnEeqz;c.ConstrType=be[Ee].SubmEeqz;c.ConstructionDesc=be[Ee].Constdesc;if(be[Ee].Eqtyp!=="P"){c.Tplnr=be[Ee].TplnEilo;c.Pltxt=be[Ee].Flocdescription}else{c.Tplnr="";c.Pltxt=""}if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined){c.TplnrEnabled=false;c.SuperordinateEquipEnabled=true}if(c.SuperordinateEquip===""&&c.Tplnr!==""&&c.Tplnr!==undefined){c.TplnrEnabled=true;c.SuperordinateEquipEnabled=false}c.MatEqu=be[Ee].MatEqu;c.Materialdesc=be[Ee].Materialdesc;c.Sernr=be[Ee].Sernr;c.Lsernr=be[Ee].Lsernr;c.Kmatn=be[Ee].Kmatn;c.Funcid=be[Ee].Funcid;c.Frcfit=be[Ee].Frcfit;c.Frcrmv=be[Ee].Frcrmv;c.SubmEeqz=be[Ee].SubmEeqz;c.Vkorg=be[Ee].Vkorg;c.Vkorgtxt=be[Ee].Vkorgtxt;c.Vtweg=be[Ee].Vtweg;c.Vtwegtxt=be[Ee].Vtwegtxt;c.Spart=be[Ee].Spart;c.Sparttxt=be[Ee].Sparttxt;c.Vkbur=be[Ee].Vkbur;c.Vkburtxt=be[Ee].Vkburtxt;c.Vkgrp=be[Ee].Vkgrp;c.Vkgrptxt=be[Ee].Vkgrptxt;c.CgwldtEq=be[Ee].CgwldtEq;c.CgwlenEq=be[Ee].CgwlenEq;c.CmganrEq=be[Ee].CmganrEq;c.CwagetEq=be[Ee].CwagetEq;c.CgaerbEq=be[Ee].CgaerbEq;c.VgwldtEq=be[Ee].VgwldtEq;c.VgwlenEq=be[Ee].VgwlenEq;c.VmganrEq=be[Ee].VmganrEq;c.VwagetEq=be[Ee].VwagetEq;c.VgaerbEq=be[Ee].VgaerbEq;c.EliefEqi=be[Ee].EliefEqi;c.Kun1Eeqz=be[Ee].Kun1Eeqz;c.Pstlz1=be[Ee].Pstlz1;c.City1=be[Ee].City1;c.Kun2Eeqz=be[Ee].Kun2Eeqz;c.Pstlz2=be[Ee].Pstlz2;c.City2=be[Ee].City2;c.Kun3Eeqz=be[Ee].Kun3Eeqz;c.Pstlz3=be[Ee].Pstlz3;c.City3=be[Ee].City3;c.AuldtEqi=be[Ee].AuldtEqi;c.PstcdCcust=be[Ee].PstcdCcust;c.LocatCcust=be[Ee].LocatCcust;c.KundeEq=be[Ee].KundeEq;c.Insdate=be[Ee].Insdate===null?"":be[Ee].Insdate;c.Instime=l.getTime(be[Ee].Instime);c.Modelid=be[Ee].Modelid;c.Modelname=be[Ee].Modelnam;c.ModelDescription=be[Ee].ModelDescription;c.Template=be[Ee].Template;c.GlobalId=be[Ee].GlobalId;c.Manuf=be[Ee].Manuf;c.IsModel=be[Ee].IsModel;c.CopyFrom=be[Ee].CopyFrom;c.Modelid=be[Ee].Modelid;if(be[Ee].Eqtyp==="L"&&a.EqLAM){var W=a.EqLAM.results;if(W){for(var B=0;B<W.length;B++){if(W[B].Equi===be[Ee].Equnr){c.lam=W[B];c.lam.LrpidDesc=W[B].LrpDescr;c.lam.LinUnitDesc=W[B].Uomtext;break}}}}if(a.EqClass){var ve=a.EqClass.results;if(ve){if(ve.length>0){for(var Ce=0;Ce<ve.length;Ce++){if(c.Equnr===ve[Ce].Equi){if(r.getState()==="MOCR"&&r.hMode!=="copy"){ve[Ce].ctEnable=false;ve[Ce].classEnable=false}else{ve[Ce].ctEnable=true;ve[Ce].classEnable=true}ve[Ce].ClassTypeDesc=ve[Ce].Artxt;delete ve[Ce].Artxt;ve[Ce].ClassDesc=ve[Ce].Kltxt;delete ve[Ce].Kltxt;delete ve[Ce].Changerequestid;delete ve[Ce].Clint;delete ve[Ce].Service;c.classItems.push(ve[Ce])}}}}}if(a.EqFleet){if(a.EqFleet.results){var xe=a.EqFleet.results;if(xe){if(xe.length>0){for(var Ve=0;Ve<xe.length;Ve++){if(c.Equnr===xe[Ve].Equi){c.FLEET.FleetCat=xe[Ve].FleetCat;c.FLEET.FleetNum=xe[Ve].FleetNum;c.FLEET.LicenseN=xe[Ve].LicenseN;c.FLEET.ValidityEndDate=l.getDateFormat(xe[Ve].ExpiryDt);c.FLEET.FleetVin=xe[Ve].FleetVin;c.FLEET.Chasisnum=xe[Ve].Chasisnum;c.FLEET.FleetHgt=xe[Ve].FleetHgt;c.FLEET.DimUnit=xe[Ve].DimUnit;c.FLEET.FleetWid=xe[Ve].FleetWid;c.FLEET.FleetLen=xe[Ve].FleetLen;c.FLEET.BrgewFt=xe[Ve].BrgewFt;c.FLEET.GeweiFt=xe[Ve].GeweiFt;c.FLEET.GrossWgt=xe[Ve].GrossWgt;c.FLEET.LoadWgt=xe[Ve].LoadWgt;c.FLEET.LoadVol=xe[Ve].LoadVol;c.FLEET.VolUnit=xe[Ve].VolUnit;c.FLEET.LoadHgt=xe[Ve].LoadHgt;c.FLEET.Lddimunit=xe[Ve].Lddimunit;c.FLEET.LoadWid=xe[Ve].LoadWid;c.FLEET.LoadLen=xe[Ve].LoadLen;c.FLEET.Nocompart=xe[Ve].Nocompart;c.FLEET.FleetUse=xe[Ve].FleetUse;c.FLEET.CardNum=xe[Ve].CardNum;c.FLEET.KeyNum=xe[Ve].KeyNum;c.FLEET.NumAxle=xe[Ve].NumAxle;c.FLEET.Maxoccupa=xe[Ve].Maxoccupa;c.FLEET.FuelPri=xe[Ve].FuelPri;c.FLEET.FuelSec=xe[Ve].FuelSec;c.FLEET.OilType=xe[Ve].OilType;c.FLEET.Consumpmv=xe[Ve].Consumpmv;c.FLEET.Consumptl=xe[Ve].Consumptl;c.FLEET.PriCalc=xe[Ve].PriCalc;c.FLEET.Enginetyp=xe[Ve].Enginetyp;c.FLEET.Enginesnr=xe[Ve].Enginesnr;c.FLEET.SpeedMax=xe[Ve].SpeedMax;c.FLEET.Enginepow=xe[Ve].Enginepow;c.FLEET.Revlutons=xe[Ve].Revlutons;c.FLEET.Enginecap=xe[Ve].Enginecap;c.FLEET.Enginecyl=xe[Ve].Enginecyl;c.FLEET.ReplaDt=l.getDateFormat(xe[Ve].ReplaDt);c.FLEET.Enginecyl=xe[Ve].Enginecyl;c.FLEET.Enginecyl=xe[Ve].Enginecyl;c.FLEET.Replaodom=xe[Ve].Replaodom;c.FLEET.ReplaOph=xe[Ve].ReplaOph}}}}}}if(a.EqDFPS){if(a.EqDFPS.results){var Pe=a.EqDFPS.results;if(Pe){if(Pe.length>0){for(var Ie=0;Ie<Pe.length;Ie++){if(c.Equnr===Pe[Ie].Equi){c.DFPS.MeOwner=Pe[Ie].MeOwner;c.DFPS.MeUser=Pe[Ie].MeUser;c.DFPS.DeviceId=Pe[Ie].DeviceId;c.DFPS.Topsiteid=Pe[Ie].Topsiteid;c.DFPS.Topsitede=Pe[Ie].Topsitede;c.DFPS.SiteId=Pe[Ie].SiteId;c.DFPS.SiteDesc=Pe[Ie].SiteDesc;c.DFPS.MpoId=Pe[Ie].MpoId;c.DFPS.MpoDescr=Pe[Ie].MpoDescr;c.DFPS.RicId=Pe[Ie].RicId;c.DFPS.RicDescr=Pe[Ie].RicDescr;c.DFPS.ModelId=Pe[Ie].ModelId;c.DFPS.ModelDes=Pe[Ie].ModelDes;c.DFPS.Foreignob=Pe[Ie].Foreignob;c.DFPS.TecState=Pe[Ie].TecState;c.DFPS.DepState=Pe[Ie].DepState;c.DFPS.DfpsRmrk=Pe[Ie].DfpsRmrk}}}}}}if(a.EqVal){var Le=a.EqVal.results;if(Le){if(Le.length>0){for(var ye=0;ye<Le.length;ye++){if(c.Equnr===Le[ye].Equi){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Le[ye].cNameEnable=false}else{Le[ye].cNameEnable=true}Le[ye].Textbz=Le[ye].Atwtb;delete Le[ye].Ataut;delete Le[ye].Ataw1;delete Le[ye].Atawe;delete Le[ye].Atcod;delete Le[ye].Atflb;delete Le[ye].Atflv;delete Le[ye].Atimb;delete Le[ye].Atsrt;delete Le[ye].Atvglart;delete Le[ye].Atzis;delete Le[ye].Changerequestid;delete Le[ye].Charid;delete Le[ye].Classtype;delete Le[ye].Service;delete Le[ye].Valcnt;Le[ye].slNo=U+1;Le[ye].flag=Le[ye].Class+"-"+Le[ye].slNo;c.characteristics.push(Le[ye])}}for(var B=0;B<c.characteristics.length;B++){var z=1;for(var K=0;K<c.characteristics.length;K++){if(B===K){continue}if(c.characteristics[K].Atnam===c.characteristics[B].Atnam&&c.characteristics[K].Class===c.characteristics[B].Class){z++}}if(z>1){c.characteristics[B].charDltEnable=true}else{c.characteristics[B].charDltEnable=false}if(c.characteristics[B].Atein===true){c.characteristics[B].charAddEnable=false}}}}}if(a.EqPRTNR){var De=a.EqPRTNR.results;if(De){if(De.length>0){for(var t=0;t<De.length;t++){if(c.Equnr===De[t].Equi){var ke={};ke.Partnrfun=De[t].Partnrfun;ke.Partnereq=De[t].Partnereq;ke.NameList=De[t].NameList;ke.Aadind=De[t].Aadind;ke.Address=De[t].Address;ke.Partnrfuntxt=De[t].Partnrfuntxt;c.Partners.push(ke)}}}}}if(a.EqPermt){var Fe=a.EqPermt.results;if(Fe){if(Fe.length>0){for(var Ae=0;Ae<Fe.length;Ae++){if(c.Equnr===Fe[Ae].Equi){var we={};we.Countereq=Fe[Ae].Countereq;we.Pmsog=Fe[Ae].Pmsog;we.KAa=Fe[Ae].KAa;we.KAf=Fe[Ae].KAf;we.KDruck=Fe[Ae].KDruck;we.KPro=Fe[Ae].KPro;we.PmtLtext=Fe[Ae].PmtLtext;c.Permits.push(we)}}}}}if(a.EqPRT){if(a.EqPRT.results){var qe=a.EqPRT.results;if(qe){if(qe.length>0){for(var We=0;We<qe.length;We++){if(c.Equnr===qe[We].Equi){c.PRTInfo.PlanvPrt=qe[We].PlanvPrt;c.PRTInfo.Fgru1=qe[We].Fgru1;c.PRTInfo.Fgru2=qe[We].Fgru2;c.PRTInfo.Kzkbl=qe[We].Kzkbl;c.PRTInfo.SteufPrt=qe[We].SteufPrt;c.PRTInfo.SteufRef=qe[We].SteufRef;c.PRTInfo.KtschPrt=qe[We].KtschPrt;c.PRTInfo.Ktschref=qe[We].Ktschref;c.PRTInfo.Ewformprt=qe[We].Ewformprt;c.PRTInfo.Ewformref=qe[We].Ewformref;c.PRTInfo.Bzoffbprt=qe[We].Bzoffbprt;c.PRTInfo.Bzoffbref=qe[We].Bzoffbref;c.PRTInfo.Offstb=qe[We].Offstb;c.PRTInfo.Ehoffbprt=qe[We].Ehoffbprt;c.PRTInfo.Offstbref=qe[We].Offstbref;c.PRTInfo.Bzoffeprt=qe[We].Bzoffeprt;c.PRTInfo.Offsteref=qe[We].Offsteref;c.PRTInfo.Offste=qe[We].Offste;c.PRTInfo.Ehoffeprt=qe[We].Ehoffeprt;c.PRTInfo.Offsteref=qe[We].Offsteref;c.PRTInfo.Warpl=qe[We].Warpl;c.PRTInfo.PointEq=qe[We].PointEq}}}}}}if(a.EqStock){if(a.EqStock.results){var Be=a.EqStock.results[0];if(Be){if(Be.length>0){for(var Ne=0;Ne<Be.length;Ne++){if(c.Equnr===Be[Ne].Equi){c.Stock.Equilbbsa=Be[Ne].Equilbbsa;c.Stock.BWerk=Be[Ne].BWerk;c.Stock.BukrrsSk=Be[Ne].BukrrsSk;c.Stock.Sloc2equi=Be[Ne].Sloc2equi;c.Stock.Chrg2stk=Be[Ne].Chrg2stk;c.Stock.Sobk2stk=Be[Ne].Sobk2stk;c.Stock.Datlwb=l.getDateFormat(Be[Ne].Datlwb);c.Stock.Kunnr=Be[Ne].Kunnr;c.Stock.LifnrStc=Be[Ne].LifnrStc;c.Stock.Kdauf=Be[Ne].Kdauf;c.Stock.Kdpos=Be[Ne].Kdpos;c.Stock.PsPspPn=Be[Ne].PsPspPn}}}}}}if(a.EqAddr){if(a.EqAddr.results){var Oe=a.EqAddr.results;if(Oe){if(Oe.length>0){for(var Re=0;Re<Oe.length;Re++){if(c.Equnr===Oe[Re].Equi){var Ue=sap.ui.getCore().getModel("equiAddressView");var ze=Ue.getData();var Ke=true;var He,Ge;if(ze.length>0){for(var je=0;je<ze.length;je++){if(c.Equnr===ze[je].Equnr){Ke=false;Ge=je;break}}}if(Ke===true){if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){He={Equnr:c.Equnr,Tplnr:c.Tplnr,IsEditable:Oe[Re].IsEditable};ze.push(He);Ue.setData(ze)}}if(Ke===false){if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){ze[Ge].Equnr=c.Equnr;ze[Ge].Tplnr=c.Tplnr;ze[Ge].IsEditable=Oe[Re].IsEditable;Ue.setData(ze)}}c.Title=Oe[Re].Titletxt;c.TitleCode=Oe[Re].Title;c.Name1=Oe[Re].Name1;c.Name2=Oe[Re].Name2;c.Name3=Oe[Re].Name3;c.Name4=Oe[Re].Name4;c.Sort1=Oe[Re].Sort1;c.Sort2=Oe[Re].Sort2;c.NameCo=Oe[Re].NameCo;c.Building=Oe[Re].Building;c.Floor=Oe[Re].Floor;c.Roomnum=Oe[Re].Roomnum;c.Street=Oe[Re].Street;c.HouseNr1=Oe[Re].HouseNr1;c.HouseNr2=Oe[Re].HouseNr2;c.Strsuppl1=Oe[Re].Strsuppl1;c.Strsuppl2=Oe[Re].Strsuppl2;c.Strsuppl3=Oe[Re].Strsuppl3;c.AddrLocation=Oe[Re].Location;c.District=Oe[Re].District;c.PostCod1=Oe[Re].PostCod1;c.City1=Oe[Re].City1;c.RefPosta=Oe[Re].RefPosta;c.Landx=Oe[Re].Landx;c.RfePost=Oe[Re].RfePost;c.Regiotxt=Oe[Re].Regiotxt;c.HomeCity=Oe[Re].HomeCity;c.TimeZone=Oe[Re].TimeZone;c.Taxjurcod=Oe[Re].Taxjurcod;c.Regiogrou=Oe[Re].Regiogrou;c.RfePostl=Oe[Re].RfePostl;c.Region=Oe[Re].RPostFl;c.PoBox=Oe[Re].PoBox;c.PoboxNum=Oe[Re].PoboxNum;c.DlvsrvTy=Oe[Re].DlvsrvTy;c.DlvsrvNr=Oe[Re].DlvsrvNr;c.PostCod2=Oe[Re].PostCod2;c.PoboxLoc=Oe[Re].PoboxLoc;c.PoboxLby=Oe[Re].PoboxLby;c.PoboxCty=Oe[Re].PoboxCty;c.LandxP=Oe[Re].LandxP;c.RfePstal=Oe[Re].RfePstal;c.RegiotxtP=Oe[Re].RegiotxtP;c.RegionDesc=Oe[Re].Regiotxt;c.Dontuseptxt=Oe[Re].Dontuseptxt;c.PostCod3=Oe[Re].PostCod3;c.Remark=Oe[Re].Remark}}}}}}var le=a.EqAddrI.results;if(le){for(var B=0;B<le.length;B++){if(le[B].Equi===c.Equnr){le[B].AdNationEnable=false;le[B].City1iVS="None";le[B].StreetiVS="None";c.intlAddr.push(le[B])}}}var Qe=a.AINHeaderinfo.results;if(Qe){for(var _e=0;_e<Qe.length;_e++){var Je=Qe[0];var $e={};$e.Name=Je.Name;$e.Modelid=Je.Modelid;$e.Description=Je.Description;$e.Manufacturer=Je.Manufacturer;$e.Modeltemplate=Je.Modeltemplate;$e.Globalid=Je.Globalid;$e.moreInfo=true;$e.linkVisible=false;$e.deLinkVisible=false;$e.equiCreate=data.results[0].AineqInd;$e.AinEqunr=data.results[0].AinEqunr;sap.ui.getCore().getModel("ainMOP").getData().push({key:c.Equnr,AIN:$e})}}if(a.EqEmail){if(a.EqEmail.results){var Ze=a.EqEmail.results;if(Ze){if(Ze.length>0){for(var Xe=0;Xe<Ze.length;Xe++){if(c.Equnr===Ze[Xe].Equi){var Ye={};Ye.EAddress=Ze[Xe].EAddress;Ye.EFlgdeft=Ze[Xe].EFlgdeft;Ye.EFlgnous=Ze[Xe].EFlgnous;n.emailAddress.push(Ye)}}}}}}if(a.EqUrl){if(a.EqUrl.results){var et=a.EqUrl.results;if(et){if(et.length>0){for(var tt=0;tt<et.length;tt++){if(c.Equnr===et[tt].Equi){var at={};at.Uritypetxt=et[tt].Uritypetxt;at.UAddress=et[tt].UAddress;at.UFlgdeft=et[tt].UFlgdeft;at.UFlgnous=et[tt].UFlgnous;n.urlAddress.push(at)}}}}}}if(a.EqTel){if(a.EqTel.results){var rt=a.EqTel.results;if(rt){if(rt.length>0){for(var K=0;K<rt.length;K++){if(c.Equnr===rt[K].Equi){var lt={};lt.Teltype=rt[K].Teltype;lt.TCountry=rt[K].TCountry;lt.Telefto=rt[K].Telefto;lt.TNumber=rt[K].TNumber;lt.TExtens=rt[K].TExtens;lt.TFlgsms=rt[K].TFlgsms;lt.TFlgdeft=rt[K].TFlgdeft;lt.TFlgnous=rt[K].TFlgnous;n.telephoneData.push(lt)}}}}}}if(a.EqFax){if(a.EqFax.results){var nt=a.EqFax.results;if(nt){if(nt.length>0){for(var B=0;B<nt.length;B++){if(c.Equnr===nt[B].Equi){var st={};st.FCountry=nt[B].FCountry;st.Telefto=nt[B].Telefto;st.FNumber=nt[B].FNumber;st.FExtens=nt[B].FExtens;st.FFlgdeft=nt[B].FFlgdeft;st.FFlgnous=nt[B].FFlgnous;n.faxData.push(st)}}}}}}r.setCommonApprovalData(r.oModelAIWEQUI,n,true);r.handleCreatePress(r,c,r.oModelAIWEQUI)}if(a.HIERDOI){var Me=a.HIERDOI.results;for(var B=0;B<Me.length;B++){if(Me[B].Equnr!==""&&Me[B].Tplnr===""){sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.push({key:Me[B].Equnr,DOI:Me[B].OBJDOI.results})}}}}}if(a.MSPoint){var ot=a.MSPoint.results;if(ot){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("MSPTTab")}for(var it=0;it<ot.length;it++){n={classItems:[],characteristics:[]};c={classItems:[],characteristics:[],attachmentCount:"0",Guids:"",MspointEnabled:true,ObtypMsEnabled:true,EqunrEnabled:true,TplnrEnabled:true,MptypEnabled:true,AtnamMsEnabled:true,countEnable:true,tEnable:true,valCodeStuffSel:true};if(r.getState()==="MOCR"&&r.hMode!=="copy"){c.MspointEnabled=false;c.MptypEnabled=false;c.ObtypMsEnabled=false;c.AtnamMsEnabled=false}c.Mspoint=ot[it].Point;if(r.hMode==="copy"){c.Type=true;c.viewParameter="create"}else{c.viewParameter="change"}c.Psort=ot[it].Psort;c.Pttxt=ot[it].Pttxt;c.ObtypMs=ot[it].ObtypMs;if(ot[it].ObtypMs==="IFL"&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.TplnrEnabled=false}else if(ot[it].ObtypMs==="IEQ"&&r.getState()==="MOCR"&&r.hMode!=="copy"){c.EqunrEnabled=false}c.Deact=ot[it].Inact;c.DeactEnable=false;c.Txt=ot[it].Objtypetxt;c.Equnr=ot[it].Equnr;c.Eqktx=ot[it].Eqktx;c.Tplnr=ot[it].Tplnr;c.Pltxt=ot[it].Floctxt;c.Mptyp=ot[it].Mptyp;c.Mpttx=ot[it].Mpttx;c.Inact=ot[it].Inact;c.AtnamMs=ot[it].AtnamMs;c.Atbez=ot[it].Atbez;c.Mseh6=ot[it].Mseh6;c.Msehl=ot[it].Msehl;c.Decim=ot[it].Decim.toString();c.Codgr=ot[it].Codgr;c.Codgrtxt=ot[it].Codgrtxt;c.Locas=ot[it].Locas;c.Maktx=ot[it].Maktx;c.Begru=ot[it].Begru;c.Begtx=ot[it].Begtx;c.Indct=ot[it].Indct;c.Expon=ot[it].Expon;c.Cdsuf=ot[it].Cdsuf;c.Cjumc=ot[it].Cjumc;c.Pyeac=ot[it].Pyeac;c.Desir=ot[it].Desir;c.Mrngu=ot[it].Mrngu;c.Dstxt=ot[it].Dstxt;c.Indrv=ot[it].Indrv;c.Mrmax=ot[it].Mrmax;c.Mrmin=ot[it].Mrmin;if(ot[it].Equnr!==""){c.EqunrLblVis=true;c.EqunrInpVis=true;c.EqktxInpVis=true;c.TplnrLblVis=false;c.TplnrInpVis=false;c.PltxtInpVis=false}else{c.EqunrLblVis=false;c.EqunrInpVis=false;c.EqktxInpVis=false;c.TplnrLblVis=true;c.TplnrInpVis=true;c.PltxtInpVis=true}if(ot[it].Mptyp==="L"&&a.MSLAM){var W=a.MSLAM.results;if(W){for(var B=0;B<W.length;B++){if(W[B].Mspoint===ot[it].Point){c.lam=W[B];c.lam.LrpidDesc=W[B].LrpDescr;c.lam.LinUnitDesc=W[B].Uomtext;break}}}}if(a.MSClass){var dt=a.MSClass.results;if(dt){if(dt.length>0){for(var ct=0;ct<dt.length;ct++){if(c.Mspoint===dt[ct].Mspoint){dt[ct].ctEnable=false;dt[ct].classEnable=false;dt[ct].ClassTypeDesc=dt[ct].Artxt;delete dt[ct].Artxt;dt[ct].ClassDesc=dt[ct].Kltxt;delete dt[ct].Kltxt;delete dt[ct].Changerequestid;delete dt[ct].Clint;delete dt[ct].Service;c.classItems.push(dt[ct])}}}}}if(a.MSVal){var pt=a.MSVal.results;if(pt){if(pt.length>0){for(var ut=0;ut<pt.length;ut++){if(c.Mspoint===pt[ut].Mspoint){pt[ut].cNameEnable=false;pt[ut].Textbz=pt[ut].Atwtb;delete pt[ut].Ataut;delete pt[ut].Ataw1;delete pt[ut].Atawe;delete pt[ut].Atcod;delete pt[ut].Atflb;delete pt[ut].Atflv;delete pt[ut].Atimb;delete pt[ut].Atsrt;delete pt[ut].Atvglart;delete pt[ut].Atzis;delete pt[ut].Changerequestid;delete pt[ut].Charid;delete pt[ut].Classtype;delete pt[ut].Service;delete pt[ut].Valcnt;pt[ut].slNo=ut+1;pt[ut].flag=pt[ut].Class+"-"+pt[ut].slNo;c.characteristics.push(pt[ut])}}for(var B=0;B<c.characteristics.length;B++){var z=1;for(var K=0;K<c.characteristics.length;K++){if(B===K){continue}if(c.characteristics[K].Atnam===c.characteristics[B].Atnam&&c.characteristics[K].Class===c.characteristics[B].Class){z++}}if(z>1){c.characteristics[B].charDltEnable=true}else{c.characteristics[B].charDltEnable=false}if(c.characteristics[B].Atein===true){c.characteristics[B].charAddEnable=false}}}}}r.setCommonApprovalData(r.oModelAIWMSPT,n);r.handleCreatePress(r,c,r.oModelAIWMSPT)}}}if(a.MPLAN){var gt=a.MPLAN.results;if(gt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("MPMITab")}for(var _e=0;_e<gt.length;_e++){c={attachmentCount:"0",Guids:"",cycleModel:[],itemModel:[],cycleIndSingle:true,cycleIndStrategy:true,cycleIndMultCntr:true,WarplEnabled:true,StratEnabled:true,WsetEnabled:true,MehrfachEnabled:true,ScheIndRbTimeEnabled:true,ScheIndRbTimeKeyDateEnabled:true,ScheIndRbTimeFactCalEnabled:true,ScheIndRbPerformanceEnabled:true,MptypEnabled:true,cycleIndSingleEnabled:true,cycleIndStrategyEnabled:true,cycleIndMultCntrEnabled:true,FabklLBLReq:true,ButtonNewCycleEnabled:true,FabklEnabled:true,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,MaintenanceCycleMode:"None"};if(gt[_e].Stich!==""||gt[_e].Stich===undefined){c.Stich=parseInt(gt[_e].Stich)}else{c.Stich=0}c.Deact=gt[_e].InactMp;c.DeactEnable=false;c.Warpl=gt[_e].Warpl;c.Wptxt=gt[_e].Wptxt;c.Mptyp=gt[_e].Mptyp;c.Txt=gt[_e].Mplancatdesc;c.Strat=gt[_e].Strat;c.StratDesc=gt[_e].StratDesc;c.Puffp=gt[_e].Puffp;if(gt[_e].Mehrfach==="X"||gt[_e].Stich==="4"){c.cycleType=2;c.cycleSetSeqColVis=true;c.CycleSetSeqVis=true;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.OPText=true;c.OPTitle=true;c.OPLBL=true;c.OROPVis=true;c.AndOPvis=true;c.WsetLBL=true;c.WsetVis=true;c.KtextVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.MehrfachLBL=true;c.MehrfachVis=true;c.Mehrfach=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_STDATE");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndMultCntr=true}else if(gt[_e].Strat===""&&(gt[_e].Stich===""||gt[_e].Stich==="1"||gt[_e].Stich==="2")){c.cycleType=0;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndSingle=true}else if(gt[_e].Strat!==""&&gt[_e].Stich==="3"){c.cycleType=1;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.StadtLBL=false;c.StadtVis=false;c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.MpcyclenoLBL=true;c.MpcyclenoVis=true;c.cycleIndStrateg=true;r.readScheduling(gt[_e],gt[_e].Strat,r.oModelAIWMPMI)}else if(gt[_e].Strat.indexOf("TIME")>-1&&gt[_e].Mehrfach===""&&gt[_e].Stich!=="3"){c.cycleType=1;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.Strat=gt[_e].Strat;c.StadtLBL=true;c.StadtVis=true;c.Stadt=l.getDateFormat(gt[_e].Startdate);c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndStrateg=true;r.readScheduling(gt[_e],gt[_e].Strat,r.oModelAIWMPMI)}else if(gt[_e].Strat===""&&gt[_e].Stich==="3"&&gt[_e].Mehrfach===""){c.cycleIndSingle=true;c.cycleType=0;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.StadtLBL=false;c.StadtVis=false;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.Unitc=" ";c.MpcyclenoLBL=true;c.MpcyclenoVis=true}c.Stadt=l.getDateFormat(gt[_e].Startdate);c.Unitc=gt[_e].Unitc;c.Fabkl=gt[_e].Fabkl;c.FabklDesc=gt[_e].FabklDesc;if(gt[_e].Stich==="1"){c.ScheIndRbTimeKeyDate=true}else if(gt[_e].Stich==="2"){c.ScheIndRbTimeFactCal=true}else if(gt[_e].Stich==="3"){c.ScheIndRbPerformance=true}else if(gt[_e].Stich===""||gt[_e].Stich===" "){c.ScheIndRbTime=true}c.Wset=gt[_e].Wset;c.Ktext=gt[_e].Ktext;c.Sfakt=gt[_e].Sfakt;c.Abrho=gt[_e].Abrho;c.Hunit=gt[_e].Hunit;c.StratDesc=gt[_e].StratDesc;c.Szaeh=gt[_e].Szaeh;c.Mpcycleno=gt[_e].PointStp;c.Andor=gt[_e].Andor;if(gt[_e].PointStp!==""){c.Unitc=gt[_e].Unitc}if(gt[_e].Andor==="X"){c.AndOP=true}else{c.OROP=true}if(c.Mehrfach===true||(c.Wset!==""||c!==undefined)){c.HorizVisible=false}else{c.HorizVisible=true}if(gt[_e].PointStp!==""){c.Unitc=gt[_e].Unitc}if(gt[_e].Andor==="X"){c.AndOP=true}else{c.OROP=true}if(c.Mehrfach===true||(c.Wset!==""||c!==undefined)){c.HorizVisible=false}else{c.HorizVisible=true}c.Vspos=gt[_e].Vspos;c.Topos=gt[_e].Topos;c.Vsneg=gt[_e].Vsneg;c.Toneg=gt[_e].Toneg;c.Horiz=gt[_e].Horiz;c.CallConf=gt[_e].CallConf;c.PlanSort=gt[_e].PlanSort;c.Begru=gt[_e].Begru;if(a.MPCycle){var mt=a.MPCycle.results;if(mt){for(var ft=0;ft<mt.length;ft++){if(c.Warpl===mt[ft].Mplan){mt[ft].Psort=mt[ft].PointTxt;c.cycleModel.push(mt[ft])}}}}if(a.MPItem){var ht=a.MPItem.results;if(ht){var St=[];for(var Tt=0;Tt<ht.length;Tt++){if(c.Warpl===ht[Tt].Mplan){var Mt={};Mt.Mitemnumb=ht[Tt].Mitemnumb;Mt.Pstxt=ht[Tt].Pstxt;Mt.Cycleseq=ht[Tt].Cycleseq;Mt.Tplnr=ht[Tt].TplnrMi;Mt.Pltxt=ht[Tt].Flocdesc;Mt.Equnr=ht[Tt].Equnr;Mt.Eqktx=ht[Tt].Equipdesc;Mt.AsmblyOb=ht[Tt].Bautl;Mt.Assemblydesc=ht[Tt].Assemblydesc;Mt.Werks=ht[Tt].PlntMi;Mt.Planningplantdes=ht[Tt].Planningplantdes;Mt.Auart=ht[Tt].Auart;Mt.oTypeTxt=ht[Tt].Ordertypedesc;Mt.Qmart=ht[Tt].Qmart;Mt.nTypeTxt=ht[Tt].Qmartx;Mt.ArbpMi=ht[Tt].ArbpMi;Mt.WergwMi=ht[Tt].WergwMi;Mt.Ingrp=ht[Tt].IngrpMi;Mt.Innam=ht[Tt].Plannergrpdesc;var bt=ht[Tt].ItmPriotxt;bt=bt.substr(bt.indexOf(" ")+1);Mt.Zeieh=ht[Tt].Zeieh;Mt.Priok=ht[Tt].Priok;Mt.ItmPriotxt=bt;Mt.GsberMi=ht[Tt].GsberMi;Mt.Gtext=ht[Tt].Gtext;Mt.TaskDet=ht[Tt].TaskDet;Mt.Ilart=ht[Tt].Ilart;Mt.Ilatx=ht[Tt].Ilatx;Mt.PlntyMi=ht[Tt].PlntyMi;Mt.ApfktMi=ht[Tt].ApfktMi;Mt.PlnnrMi=ht[Tt].PlnnrMi;Mt.PlnalMi=ht[Tt].PlnalMi;Mt.Gpcounterdesc=ht[Tt].Gpcounterdesc;Mt.AnlzuMi=ht[Tt].AnlzuMi;Mt.Anlzux=ht[Tt].Anlzux;Mt.SwerkMil=ht[Tt].SwerkMil;Mt.Name1=ht[Tt].Name1;Mt.StortMil=ht[Tt].StortMil;Mt.Locationdesc=ht[Tt].Locationdesc;Mt.MsgrpIl=ht[Tt].MsgrpIl;Mt.BeberMil=ht[Tt].BeberMil;Mt.Fing=ht[Tt].Fing;Mt.Tele=ht[Tt].Tele;Mt.ArbplIl=ht[Tt].ArbplIl;Mt.Workcenterdesc=ht[Tt].Workcenterdesc;Mt.AbckzIl=ht[Tt].AbckzIl;Mt.Abctx=ht[Tt].Abctx;Mt.EqfnrIl=ht[Tt].EqfnrIl;Mt.BukrsMil=ht[Tt].BukrsMil;Mt.Butxt=ht[Tt].Butxt;Mt.City=ht[Tt].City;Mt.Anln1Mil=ht[Tt].Anln1Mil;Mt.Anln2Mil=ht[Tt].Anln2Mil;Mt.Txt50=ht[Tt].Txt50;Mt.GsberIl=ht[Tt].GsberIl;Mt.KostlMil=ht[Tt].KostlMil;Mt.Contareaname=ht[Tt].Contareaname;Mt.KokrsMil=ht[Tt].KokrsMil;Mt.Posid=ht[Tt].Posid;Mt.Post1=ht[Tt].Post1;Mt.AufnrIl=ht[Tt].AufnrIl;Mt.SettleOrdDesc=ht[Tt].SettleOrdDesc;Mt.QmartLBL=true;Mt.QmartVis=true;Mt.nTypetxtVis=true;Mt.AuartLBL=true;Mt.AuartVis=true;Mt.oTypeTxtVis=true;Mt.CycleseqLBL=false;Mt.CycleseqVis=false;Mt.AsmblyObMaxLength=0;Mt.maintItemE=false;Mt.cycleSetE=false;Mt.TplnrEnabled=false;Mt.equiE=false;Mt.assemblyE=false;Mt.CycleseqVS="None";Mt.CycleseqVST="";Mt.TplnrVS="None";Mt.TplnrVST="";Mt.EqunrVS="None";Mt.EqunrVST="";Mt.AsmblyObVS="None";Mt.AsmblyObVST="";Mt.WerksVS="None";Mt.WerksVST="";Mt.AuartVS="None";Mt.AuartVST="";Mt.QmartVS="None";Mt.QmartVST="";Mt.ArbpMiVS="None";Mt.ArbpMiVST="";Mt.WergwMiVS="None";Mt.WergwMiVST="";Mt.IngrpVS="None";Mt.IngrpVST="";var Et=a.MPLAM.results;if(Et){for(var B=0;B<Et.length;B++){if(Et[B].Mplan===ht[Tt].Mplan&&Et[B].Mitemnumb===ht[Tt].Mitemnumb){var vt=Et[B];vt.LrpidDesc=Et[B].LrpDescr;vt.LinUnitDesc=Et[B].Uomtext;Mt.lam=vt;break}}}St.push(Mt)}}c.itemModel=St}}if(r.hMode==="copy"){c.Type=true;c.viewParameter="create"}else{c.viewParameter="change";if(c.Mptyp===""||c.Mptyp===undefined||c.Mptyp===" "){c.MptypEnabled=true}else{c.MptypEnabled=false}if(c.cycleType===1&&(c.Strat===""||c.Strat===undefined||c.Strat===" ")){c.StratEnabled=true}else{c.StratEnabled=false}if(c.cycleType===2&&(c.Mehrfach===false||c.Mehrfach===""||c.Mehrfach===undefined||c.Mehrfach===" ")){c.MehrfachEnabled=true}else{c.MehrfachEnabled=false}if(c.cycleType===2&&(c.Wset===""||c.Wset===undefined||c.Wset===" ")){c.WsetEnabled=true}else{c.WsetEnabled=false}c.WarplEnabled=false}r.handleCreatePress(r,c,r.oModelAIWMPMI)}}}if(a.MRBHeader){var Ct=a.MRBHeader.results;if(Ct){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("BOM")}for(var it=0;it<Ct.length;it++){var xt={};if(r.getState()==="MOCR"&&r.hMode!=="copy"){xt.bomType="Change"}else{xt.bomType="Create"}xt.Matnr=Ct[it].Matnr;xt.Werks=Ct[it].Werks;xt.Stlan=Ct[it].Stlan;xt.Bomstatus=Ct[it].Bomstatus;xt.Lngtxt=Ct[it].Txtmi;xt.Validfrom=r.getDateFormat(Ct[it].Validfrom);xt.BaseQty=Ct[it].Baseqty;xt.BaseUom=Ct[it].Baseuom;xt.Validtoda=r.getDateFormat(Ct[it].Validtoda);xt.MatDesc=Ct[it].Maktx;xt.WerksDesc=Ct[it].Plantname;xt.StlanDesc=Ct[it].Bomusagetxt;xt.BomstatusText=Ct[it].Bomstatustxt;xt.Stktx=Ct[it].Stktx;if(r.getState()==="MOCR"&&r.hMode!=="copy"){xt.matEnable=false;xt.plantEnable=false;xt.usageEnable=false;xt.bomType="Change"}else{xt.matEnable=true;xt.plantEnable=true;xt.usageEnable=true;xt.bomType="Create"}xt.LngtxtEnable=true;xt.BomstatusEnable=true;xt.BaseQtyEnable=true;xt.fromDateEnable=true;xt.addItemEnable=true;xt.modeFlag="None";xt.Authgroup=Ct[it].Authgroup;xt.Sizdim=Ct[it].Sizdim;xt.Labofc=Ct[it].Labofc;xt.Labortxt=Ct[it].Labortxt;xt.Stalt=Ct[it].Stalt;xt.Flbomsub="";xt.Delflg="";xt.Invnr="";xt.Herst="";xt.Htypb="";xt.Serge="";xt.matItem=[];xt.matSubItem=[];var Vt=a.MRBItem.results;if(Vt.length>0){for(var ct=0;ct<Vt.length;ct++){if(Vt[ct].Matnr===xt.Matnr&&Vt[ct].Werks===xt.Werks&&Vt[ct].Stlan===xt.Stlan){Vt[ct].addSubItmEnable=true;Vt[ct].Pmper="-";Vt[ct].Pmpka="-";Vt[ct].Pmprv="-";Vt[ct].Pmpfe="-";Vt[ct].Pmpin="-";Vt[ct].Pmpko="-";xt.matItem.push(Vt[ct])}}}else{xt.matItem=[]}var Pt=a.MRBSBIT.results;if(Pt.length>0){for(var ut=0;ut<Pt.length;ut++){if(Pt[ut].Matnr===xt.Matnr&&Pt[ut].Werks===xt.Werks&&Pt[ut].Stlan===xt.Stlan){Pt[ut].intPointEnable=true;Pt[ut].subQtyEnable=true;Pt[ut].subTextEnable=true;xt.matSubItem.push(Pt[ut])}}}else{xt.matSubItem=[]}f.push(xt)}sap.ui.getCore().getModel("AIWListMatModel").setSizeLimit(f.length);sap.ui.getCore().getModel("AIWListMatModel").refresh()}}if(a.EBHeader){var It=a.EBHeader.results;if(It){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("BOM")}for(var it=0;it<It.length;it++){var Lt={};if(r.getState()==="MOCR"&&r.hMode!=="copy"){Lt.bomType="Change"}else{Lt.bomType="Create"}Lt.Eqnrbom=It[it].Eqnrbom;Lt.Werks=It[it].Werks;Lt.Stlan=It[it].Stlan;Lt.Bomstatus=It[it].Bomstatus;Lt.Lngtxt=It[it].Txtmi;Lt.Validfrom=r.getDateFormat(It[it].Validfrom);Lt.BaseQty=It[it].Baseqty;Lt.BaseUom=It[it].Baseuom;Lt.Validtoda=r.getDateFormat(It[it].Validtoda);Lt.EquiDesc=It[it].Eqktx;Lt.WerksDesc=It[it].Plantname;Lt.StlanDesc=It[it].Bomusagetxt;Lt.BomstatusText=It[it].Bomstatustxt;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Lt.equipEnable=false;Lt.plantEnable=false;Lt.usageEnable=false;Lt.bomType="Change"}else{Lt.equipEnable=true;Lt.plantEnable=true;Lt.usageEnable=true;Lt.bomType="Create"}Lt.LngtxtEnable=true;Lt.fromDateEnable=true;Lt.BomstatusEnable=true;Lt.BaseQtyEnable=true;Lt.addItemEnable=true;Lt.modeFlag="None";Lt.Authgroup=It[it].Authgroup;Lt.Sizdim=It[it].Sizdim;Lt.Labofc=It[it].Labofc;Lt.Labortxt=It[it].Labortxt;Lt.Delflg=It[it].Delflg;Lt.Invnr=It[it].Invnr;Lt.Herst=It[it].Herst;Lt.Htypb=It[it].Htypb;Lt.Serge=It[it].Serge;Lt.Flbomsub="";Lt.Stalt="";Lt.Stktx="";Lt.eqItem=[];Lt.eqSubItem=[];var yt=a.EBItem.results;if(yt.length>0){for(var ct=0;ct<yt.length;ct++){if(yt[ct].Eqnrbom===Lt.Eqnrbom&&yt[ct].Werks===Lt.Werks&&yt[ct].Stlan===Lt.Stlan){yt[ct].addSubItmEnable=true;yt[ct].Pmper="-";yt[ct].Pmpka="-";yt[ct].Pmprv="-";yt[ct].Pmpfe="-";yt[ct].Pmpin="-";yt[ct].Pmpko="-";Lt.eqItem.push(yt[ct])}}}else{Lt.eqItem=[]}var Dt=a.EBSBIT.results;if(Dt.length>0){for(var ut=0;ut<Dt.length;ut++){if(Dt[ut].Eqnrbom===Lt.Eqnrbom&&Dt[ut].Werks===Lt.Werks&&Dt[ut].Stlan===Lt.Stlan){Dt[ut].intPointEnable=false;Dt[ut].subQtyEnable=false;Dt[ut].subTextEnable=false;Lt.eqSubItem.push(Dt[ut])}}}else{Lt.eqSubItem=[]}h.push(Lt)}sap.ui.getCore().getModel("AIWListEqModel").setSizeLimit(h.length);sap.ui.getCore().getModel("AIWListEqModel").refresh()}}if(a.FBHeader){var kt=a.FBHeader.results;if(kt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("BOM")}for(var it=0;it<kt.length;it++){var Ft={};if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ft.bomType="Change"}else{Ft.bomType="Create"}Ft.Tplnrbom=kt[it].Tplnrbom;Ft.Werks=kt[it].Werks;Ft.Stlan=kt[it].Stlan;Ft.Bomstatus=kt[it].Bomstatus;Ft.Lngtxt=kt[it].Txtmi;Ft.Validfrom=r.getDateFormat(kt[it].Validfrom);Ft.BaseQty=kt[it].Baseqty;Ft.BaseUom=kt[it].Baseuom;Ft.Validtoda=r.getDateFormat(kt[it].Validtoda);Ft.FLDesc=kt[it].Pltxt;Ft.WerksDesc=kt[it].Plantname;Ft.StlanDesc=kt[it].Bomusagetxt;Ft.BomstatusText=kt[it].Bomstatustxt;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ft.FLEnable=false;Ft.plantEnable=false;Ft.usageEnable=false;Ft.bomType="Change"}else{Ft.FLEnable=true;Ft.plantEnable=true;Ft.usageEnable=true;Ft.bomType="Create"}Ft.LngtxtEnable=true;Ft.fromDateEnable=true;Ft.BomstatusEnable=true;Ft.BaseQtyEnable=true;Ft.addItemEnable=true;Ft.modeFlag="None";Ft.Authgroup=kt[it].Authgroup;Ft.Sizdim=kt[it].Sizdim;Ft.Flbomsub=kt[it].Flbomsub;Ft.Labofc=kt[it].Labofc;Ft.Labortxt=kt[it].Labortxt;Ft.Stalt="";Ft.Delflg="";Ft.Invnr="";Ft.Herst="";Ft.Htypb="";Ft.Serge="";Ft.Stktx="";Ft.flItem=[];Ft.flSubItem=[];var At=a.FBItem.results;if(At.length>0){for(var ct=0;ct<At.length;ct++){if(At[ct].Tplnrbom===Ft.Tplnrbom&&At[ct].Werks===Ft.Werks&&At[ct].Stlan===Ft.Stlan){At[ct].addSubItmEnable=true;At[ct].Pmper="-";At[ct].Pmpka="-";At[ct].Pmprv="-";At[ct].Pmpfe="-";At[ct].Pmpin="-";At[ct].Pmpko="-";Ft.flItem.push(At[ct])}}}else{Ft.flItem=[]}var wt=a.FBSBIT.results;if(wt.length>0){for(var ut=0;ut<wt.length;ut++){if(wt[ut].Tplnrbom===Ft.Tplnrbom&&wt[ut].Werks===Ft.Werks&&wt[ut].Stlan===Ft.Stlan){wt[ut].intPointEnable=true;wt[ut].subQtyEnable=true;wt[ut].subTextEnable=true;Ft.flSubItem.push(wt[ut])}}}else{Ft.flSubItem=[]}S.push(Ft)}sap.ui.getCore().getModel("AIWListFLModel").setSizeLimit(S.length);sap.ui.getCore().getModel("AIWListFLModel").refresh()}}if(a.WBHeader){var qt=a.WBHeader.results;if(qt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("BOM")}for(var it=0;it<qt.length;it++){var Wt={};if(r.getState()==="MOCR"&&r.hMode!=="copy"){Wt.bomType="Change"}else{Wt.bomType="Create"}Wt.WbsExt=qt[it].WbsExt;Wt.Matnr=qt[it].MatnrWbs;Wt.Werks=qt[it].Werks;Wt.Stlan=qt[it].Stlan;Wt.Bomstatus=qt[it].Bomstatus;Wt.Lngtxt=qt[it].Txtmi;Wt.Validfrom=r.getDateFormat(qt[it].Validfrom);Wt.BaseQty=qt[it].Baseqty;Wt.BaseUom=qt[it].Baseuom;Wt.Validtoda=r.getDateFormat(qt[it].Validtoda);Wt.WbsDesc=qt[it].Post1;Wt.MatDesc=qt[it].Maktx;Wt.WerksDesc=qt[it].Plantname;Wt.StlanDesc=qt[it].Bomusagetxt;Wt.BomstatusText=qt[it].Bomstatustxt;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Wt.wbsEnable=false;Wt.matEnable=false;Wt.plantEnable=false;Wt.usageEnable=false;Wt.bomType="Change"}else{Wt.wbsEnable=true;Wt.matEnable=true;Wt.plantEnable=true;Wt.usageEnable=true;Wt.bomType="Create"}Wt.LngtxtEnable=true;Wt.fromDateEnable=true;Wt.BomstatusEnable=true;Wt.BaseQtyEnable=true;Wt.addItemEnable=true;Wt.modeFlag="None";Wt.Authgroup=qt[it].Authgroup;Wt.Sizdim=qt[it].Sizdim;Wt.Labofc=qt[it].Labofc;Wt.Labortxt=qt[it].Labortxt;Wt.Stalt="";Wt.Flbomsub="";Wt.Delflg="";Wt.Invnr="";Wt.Herst="";Wt.Htypb="";Wt.Serge="";Wt.Stktx="";Wt.wbsItem=[];Wt.wbsSubItem=[];var Bt=a.WBItem.results;if(Bt.length>0){for(var ct=0;ct<Bt.length;ct++){if(Bt[ct].MatnrWbs===Wt.Matnr&&Bt[ct].Werks===Wt.Werks&&Bt[ct].Stlan===Wt.Stlan){Bt[ct].addSubItmEnable=true;Bt[ct].Pmper="-";Bt[ct].Pmpka="-";Bt[ct].Pmprv="-";Bt[ct].Pmpfe="-";Bt[ct].Pmpin="-";Bt[ct].Pmpko="-";Wt.wbsItem.push(Bt[ct])}}}else{Wt.wbsItem=[]}var Nt=a.WBSBIT.results;if(Nt.length>0){for(var ut=0;ut<Nt.length;ut++){if(Nt[ut].MatnrWbs===Wt.Matnr&&Nt[ut].Werks===Wt.Werks&&Nt[ut].Stlan===Wt.Stlan){Nt[ut].intPointEnable=true;Nt[ut].subQtyEnable=true;Nt[ut].subTextEnable=true;Wt.wbsSubItem.push(Nt[ut])}}}else{Wt.wbsSubItem=[]}T.push(Wt)}sap.ui.getCore().getModel("AIWListWBSModel").setSizeLimit(T.length);sap.ui.getCore().getModel("AIWListWBSModel").refresh()}}if(a.ONetwork){var Ot={};var Rt=a.ONetwork.results;if(Rt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("ON")}for(var it=0;it<Rt.length;it++){Ot={};Ot.Objnetwrk=Rt[it].Objnetwrk;if(r.hMode==="copy"){Ot.Type=true}Ot.Netgrp=Rt[it].Netgrp;Ot.Netwtyp=Rt[it].Netwtyp;Ot.Netxt=Rt[it].Netxt;Ot.NetgrpDesc=Rt[it].NetgroupTxt;Ot.NetwtypDesc=Rt[it].NettypeTxt;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ot.NetIDEnable=false}else{Ot.NetIDEnable=true}Ot.Ntobjtyp=Rt[it].Ntobjtyp;var Ut=a.ONLAM.results;if(Ut){for(var ct=0;ct<Ut.length;ct++){if(Ut[ct].Objnetwrk===Rt[it].Objnetwrk){Ot.Lrpid=Ut[ct].Lrpid;Ot.Strtptatr=Ut[ct].Strtptatr;Ot.Endptatr=Ut[ct].Endptatr;Ot.Length=Ut[ct].Length;Ot.LinUnit=Ut[ct].LinUnit;Ot.LinUnitDesc=Ut[ct].Uomtext;Ot.Startmrkr=Ut[ct].Startmrkr;Ot.Endmrkr=Ut[ct].Endmrkr;Ot.Mrkdisst=Ut[ct].Mrkdisst;Ot.Mrkdisend=Ut[ct].Mrkdisend;Ot.MrkrUnit=Ut[ct].MrkrUnit;Ot.LrpidDesc=Ut[ct].LrpDescr}}}M.push(Ot)}sap.ui.getCore().getModel("AIWListONModel").setSizeLimit(M.length);sap.ui.getCore().getModel("AIWListONModel").refresh();r.disableFields(e)}}if(a.Workcenter){var zt=a.Workcenter.results;if(zt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("WCTab")}for(var Xe=0;Xe<zt.length;Xe++){var Kt={classItems:[],characteristics:[]};if(r.hMode==="copy"){Kt.Type=true}Kt=zt[Xe];Kt.wc=zt[Xe].Arbpl;Kt.wcDesc=zt[Xe].Txtmi;Kt.plant=zt[Xe].Werks;Kt.plantDesc=zt[Xe].Plantdesc;Kt.wcCat=zt[Xe].Verwe;Kt.wcCatDesc=zt[Xe].Ktext;Kt.person=zt[Xe].Crveran;Kt.personDesc=zt[Xe].Persresptxt;Kt.usg=zt[Xe].Planv;Kt.usgDesc=zt[Xe].UsageTxt;Kt.stdVal=zt[Xe].Vgwts;Kt.stdValDesc=zt[Xe].Vgwtx;Kt.ctrlKey=zt[Xe].Crsteus;Kt.ctrlKeyDesc=zt[Xe].Steutxt;Kt.wcValueState="None";Kt.wcDescValueState="None";Kt.plantValueState="None";Kt.wcCatValueState="None";Kt.personResValueState="None";Kt.usgValueState="None";Kt.stdValueState="None";Kt.cntrlKeyValueState="None";Kt.wcValueStateTxt="";Kt.wcDescValueStateTxt="";Kt.plantValueStateTxt="";Kt.wcCatValueStateTxt="";Kt.personResValueStateTxt="";Kt.usgValueStateTxt="";Kt.stdValueStateTxt="";Kt.cntrlKeyValueStateTxt="";Kt.enable=true;Kt.wcatEnable=true;Kt.plEnable=true;Kt.wcEnable=true;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Kt.wcatEnable=false;Kt.plEnable=false;Kt.wcEnable=false}Kt.cost=[];Kt.capacity=[];var Ht=a.WCCost.results;if(Ht){if(Ht.length>0){var Gt=[];for(var U=0;U<Ht.length;U++){if(Kt.wc===Ht[U].Arbpl){Gt.push(Ht[U])}}var jt=new sap.ui.model.json.JSONModel;jt.setData(Ht);Kt.cost=Gt}}var Qt=a.WCCapa.results;if(Qt){var _t=[];if(Qt.length>0){for(var Jt=0;Jt<Qt.length;Jt++){if(Kt.wc===Qt[Jt].Arbpl){_t.push(Qt[Jt])}}var $t=new sap.ui.model.json.JSONModel;$t.setData(Qt);Kt.capacity=Qt}}var Zt=a.ClassWC.results;if(Zt){if(Zt.length>0){for(var it=0;it<Zt.length;it++){Zt[it].ctEnable=false;Zt[it].classEnable=false;Zt[it].ClassTypeDesc=Zt[it].Artxt;delete Zt[it].Artxt;Zt[it].ClassDesc=Zt[it].Kltxt;delete Zt[it].Kltxt;delete Zt[it].Changerequestid;delete Zt[it].Clint;delete Zt[it].Service;Kt.classItems.push(Zt[it])}}}var Xt=a.ValueWC.results;if(Xt){if(Xt.length>0){for(var ct=0;ct<Xt.length;ct++){Xt[ct].cNameEnable=false;Xt[ct].Textbz=Xt[ct].Atwtb;delete Xt[ct].Ataut;delete Xt[ct].Ataw1;delete Xt[ct].Atawe;delete Xt[ct].Atcod;delete Xt[ct].Atflb;delete Xt[ct].Atflv;delete Xt[ct].Atimb;delete Xt[ct].Atsrt;delete Xt[ct].Atvglart;delete Xt[ct].Atzis;delete Xt[ct].Changerequestid;delete Xt[ct].CharName;delete Xt[ct].Charid;delete Xt[ct].Classtype;delete Xt[ct].Service;delete Xt[ct].Valcnt;Xt[ct].slNo=ct+1;Xt[ct].flag=Xt[ct].Class+"-"+Xt[ct].slNo;Kt.characteristics.push(Xt[ct])}for(var B=0;B<Kt.characteristics.length;B++){var z=1;for(var K=0;K<Kt.characteristics.length;K++){if(B===K){continue}if(Kt.characteristics[K].Atnam===Kt.characteristics[B].Atnam&&Kt.characteristics[K].Class===Kt.characteristics[B].Class){z++}}if(z>1){Kt.characteristics[B].charDltEnable=true}else{Kt.characteristics[B].charDltEnable=false}if(Kt.characteristics[B].Atein===true){Kt.characteristics[B].charAddEnable=false}}}}b.push(Kt)}}sap.ui.getCore().getModel("AIWListWCModel").setSizeLimit(b.length);sap.ui.getCore().getModel("AIWListWCModel").setData(b)}if(a.GTHdr){var Yt=a.GTHdr.results;if(Yt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("TLTab")}for(var ea=0;ea<Yt.length;ea++){var ta={validFrm:l.getDateFormat(Yt[ea].Datuv),grp:Yt[ea].Tlgnhdr,vEquiLbl:false,vEqui:false,vEquiDesc:false,vFlocLbl:false,vFloc:false,vFlocDesc:false,flocEnb:false,equiEnb:false,bAddComponent:true,enable:false,header:[],operation:[],component:[],Class:[],Char:[]};if(r.hMode==="copy"){ta.Type=true;ta.modeFlag="Crt"}var aa=a.GTList.results;if(aa.length>0){for(var ie=0;ie<aa.length;ie++){if(ta.grp===aa[ie].Tlgnhdr){var ra={};if(r.hMode==="copy"){ra.Type=true}ra.PPenable=false;if(r.getState()==="MOCR"&&r.hMode!=="copy"){ra.Grpenable=false;ta.modeFlag="Chg"}ra.Grpenable=true;ra.pPlantDesc=aa[ie].Iwerktxt;ra.usageDesc=aa[ie].TlUsgTxt;ra.plGrpDesc=aa[ie].Plnnrgrptxt;ra.statusDesc=aa[ie].Statustxt;ra.sysCondDesc=aa[ie].Anlzux;ra.Strat=aa[ie].Strat;ra.stratDesc=aa[ie].Strattxt;ra.Plnal=aa[ie].Tplnal;ra.Verwe=aa[ie].Tverwe;ra.plEnable=false;ra.valueStateT="None";ra.valueStatePP="None";ra.valueStateU="None";ra.valueStateS="None";ra.groupCounter=aa[ie].Tplnal;ra.Ktext=aa[ie].Ktext;ra.profile=aa[ie].Profident;ra.wc=aa[ie].Tarbpl;ra.keydate=aa[ie].Keydate;ra.plant=aa[ie].Wcplant;ra.Iwerk=aa[ie].Werks;ra.usage=aa[ie].Tverwe;ra.plannerGrp=aa[ie].Vagrp;ra.Vagrp=aa[ie].Vagrp;ra.Statu=aa[ie].Statu;ra.systemCond=aa[ie].Anlzu;ra.Anlzu=aa[ie].Anlzu;ra.groupVal=aa[ie].Tlgnhdr;ra.groupCounterDesc=aa[ie].Ktext;ra.wcDesc=aa[ie].Wcdescription;ra.assembly=aa[ie].Istru;ra.deletion=aa[ie].Delkz;ra.Plnnrgrptxt=aa[ie].Plnnrgrptxt;ra.Statustxt=aa[ie].Statustxt;ra.Anlzux=aa[ie].Anlzux;ra.Istrux=aa[ie].Istrux;ra.insPtDesc=aa[ie].Slwbeztxt;ra.insPt=aa[ie].Slwbez;ra.extNum=aa[ie].Extnumtxt;ra.tlusg=aa[ie].Tverwe;ra.grp=aa[ie].Tlgnhdr;ra.assmbly=aa[ie].Istru;ra.assmblyDesc=aa[ie].Istrux;ta.header.push(ra)}}}var la=a.GTOprs.results;if(la.length>0){for(var Ee=0;Ee<la.length;Ee++){if(ta.grp===la[Ee].Tlgnhdr){var na={};na=la[Ee];na.calcKeyDesc="";na.actTypDesc="";na.Vornr=la[Ee].Vornr;na.flag=la[Ee].Tplnal+"-"+la[Ee].Vornr;na.Arbpl=la[Ee].TlArbpl;na.Plnal=la[Ee].Tplnal;na.opState="None";na.opDescState="None";na.wcState="None";na.plantState="None";na.ctrlKeyState="None";na.operation=la[Ee].Gvornr2op;na.subOp=la[Ee].Uvorn;na.workCenter=la[Ee].TlArbpl;na.plant=la[Ee].Werks2gop;na.controlKey=la[Ee].Steus2gop;na.Steus=la[Ee].Steus2gop;na.shortText=la[Ee].Ltxa1;na.Ltxa1=la[Ee].Ltxa1;na.work=la[Ee].Arbei;na.unitForWork=la[Ee].Arbeh;na.number=la[Ee].Anzzl;na.calcKey=la[Ee].Indet;na.normDuration=la[Ee].Dauno;na.uomDuration=la[Ee].Daune;na.workPerc=la[Ee].Prznt.toString();na.exeFactor=la[Ee].Aufkt;na.Werks=la[Ee].Werks2gop;na.actType=la[Ee].Larnt2gop;na.stdTextKey=la[Ee].Ktsch;na.assembly=la[Ee].Tistru;na.noOfTime=la[Ee].Loanz;na.sutability=la[Ee].Qualf2gop;na.wageGroup=la[Ee].Logrp2gop;na.wageType=la[Ee].Loart;na.sysCondition=la[Ee].Tanlzu;na.orderQty=la[Ee].Bmvrg;na.ordQtyUnit=la[Ee].Bmeih;na.netPrice=la[Ee].Opreis;na.currency=la[Ee].Owaers;na.priceUnit=la[Ee].Opeinh;na.planDelTime=la[Ee].Plifz;na.costElement=la[Ee].Sakto2gop;na.materialGrp=la[Ee].Omatkl;na.puchGroup=la[Ee].Oekgrp;na.vendor=la[Ee].Lifnr;na.purchOrg=la[Ee].Ekorg;na.shortTerm=la[Ee].Sortl;na.purchInfo=la[Ee].Infnr;na.fieldKey=la[Ee].Slwid;na.purchDoc=la[Ee].Ebeln;na.purchDocItem=la[Ee].Ebelp2gop;na.userFld=la[Ee].Slwid;na.capCat=la[Ee].Qlkapar;na.capCatDesc=la[Ee].Kapartxt;na.quantity1_=la[Ee].Use04;na.quantity1=la[Ee].Usr04;na.quantity2=la[Ee].Usr05;na.quantity2_=la[Ee].Use05;na.value3=la[Ee].Usr06;na.value4=la[Ee].Usr07;na.value3_=la[Ee].Use06;na.value4_=la[Ee].Use07;na.text1=la[Ee].Usr00;na.text2=la[Ee].Usr01;na.text3=la[Ee].Usr03;na.text4=la[Ee].Usr04;na.date1=la[Ee].Usr08;na.date2=la[Ee].Usr09;na.indicator1=la[Ee].Usr10;na.indicator2=la[Ee].Usr11;na.Usrtxtname1=la[Ee].Usrtxtname1;na.Usrtxtflg1=la[Ee].Usrtxtflg1;na.Usrtxtname2=la[Ee].Usrtxtname2;na.Usrtxtflg2=la[Ee].Usrtxtflg2;na.Usrtxtname3=la[Ee].Usrtxtname3;na.Usrtxtflg3=la[Ee].Usrtxtflg3;na.Usrtxtname4=la[Ee].Usrtxtname4;na.Usrtxtflg4=la[Ee].Usrtxtflg4;na.Usrqtyname1=la[Ee].Usrqtyname1;na.Usrqtyflg1=la[Ee].Usrqtyflg1;na.Usrqtyname2=la[Ee].Usrqtyname2;na.Usrqtyflg2=la[Ee].Usrqtyflg2;na.Usrvalname1=la[Ee].Usrvalname1;na.Usrvalflg1=la[Ee].Usrvalflg1;na.Usrvalname2=la[Ee].Usrvalname2;na.Usrvalflg2=la[Ee].Usrvalflg2;na.Usrdatename1=la[Ee].Usrdatename1;na.Usrdatflg1=la[Ee].Usrdatflg1;na.Usrdatename2=la[Ee].Usrdatename2;na.Usrdatflg2=la[Ee].Usrdatflg2;na.Usrindname1=la[Ee].Usrindname1;na.Usrindflag1=la[Ee].Usrindflag1;na.Usrindname2=la[Ee].Usrindname2;na.Usrindflag2=la[Ee].Usrindflag2;na.qual=la[Ee].Qlotype;na.search=la[Ee].Qsearchtm;na.groupCounter=la[Ee].Tplnal;ta.operation.push(na)}}}var sa=a.GTComp.results;if(sa.length>0){for(var U=0;U<sa.length;U++){if(ta.grp===sa[U].Tlgnhdr){var oa={};oa=sa[U];oa.matDesc=sa[U].Maktx;oa.slNo=U+1;oa.Plnal=sa[U].Tplnal;oa.Vornr=sa[U].Vornr;oa.activity=sa[U].Vornr;oa.flag=sa[U].Tplnal+"-"+sa[U].Vornr+"-"+oa.slNo;oa.hFlag=sa[U].Tplnal+"-"+sa[U].Vornr;oa.group=sa[U].Tlgnhdr;oa.grp=sa[U].Tlgnhdr;oa.groupCounter=sa[U].Tplnal;oa.activity=sa[U].Vorn2gcmp;oa.Idnrk=sa[U].Idnrk;oa.component=sa[U].Idnrk;oa.compDesc=sa[U].Maktx;oa.Menge=sa[U].Menge;oa.compQty=sa[U].Menge;oa.MeinsGcp=sa[U].MeinsGcp;oa.compUnit=sa[U].MeinsGcp;oa.backFlush=sa[U].RgekzGcp;oa.resv=sa[U].Disp===""?sa[U].Disptxt:sa[U].Disp;oa.resvDesc=sa[U].Disptxt;oa.storageLoc=sa[U].Lgortgcmp;oa.costElement=sa[U].Saktogcmp;oa.bom=sa[U].Stlnrgcmp;oa.bomCat=sa[U].Stltygcmp;oa.bomCatDesc=sa[U].Stltygcmptxt;oa.itCat=sa[U].Postp;oa.assembly=sa[U].Istru;oa.sortStr=sa[U].Sortf;oa.itemNo=sa[U].Posnr;oa.plantMaint=sa[U].Sanin;oa.relSales=sa[U].Rvrel;oa.relCost=sa[U].Sanka;oa.pmAssembly=sa[U].Stkkz;oa.spare=sa[U].Erskz;oa.matProv=sa[U].Beikz;oa.isPlant=sa[U].Pswrk;oa.bulkMat=sa[U].Schgt;oa.plant=sa[U].Werksgcmp;oa.purchGrp=sa[U].Ekgrp;oa.price=sa[U].Preis;oa.currency=sa[U].Waers;oa.prUnit=sa[U].Peinh;oa.delTimeD=sa[U].Lifzt;oa.matGrp=sa[U].Matkl;oa.qtyFix=sa[U].Fmeng;oa.altBom=sa[U].Stlal;ta.component.push(oa)}}r.cmpData=sa}var Zt=a.GTClass.results;if(Zt){if(Zt.length>0){for(var it=0;it<Zt.length;it++){if(ta.grp===Zt[it].Tlgnhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Zt[it].ctEnable=false;Zt[it].classEnable=false}else{Zt[it].ctEnable=true;Zt[it].classEnable=true}Zt[it].ClassTypeDesc=Zt[it].Artxt;delete Zt[it].Artxt;Zt[it].ClassDesc=Zt[it].Kltxt;delete Zt[it].Kltxt;delete Zt[it].Changerequestid;delete Zt[it].Clint;delete Zt[it].Service;Zt[it].slNo=it+1;Zt[it].Plnal=Zt[it].Tplnal;Zt[it].flag=Zt[it].Tplnal+"-"+Zt[it].slNo;ta.Class.push(Zt[it])}}r.cData=Zt}}var Xt=a.GTVal.results;if(Xt){if(Xt.length>0){for(var ct=0;ct<Xt.length;ct++){if(ta.grp===Xt[ct].Tlgnhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Xt[ct].cNameEnable=false}else{Xt[ct].cNameEnable=true}Xt[ct].Textbz=Xt[ct].Atwtb;delete Xt[ct].Ataut;delete Xt[ct].Ataw1;delete Xt[ct].Atawe;delete Xt[ct].Atcod;delete Xt[ct].Atflb;delete Xt[ct].Atflv;delete Xt[ct].Atimb;delete Xt[ct].Atsrt;delete Xt[ct].Atvglart;delete Xt[ct].Atzis;delete Xt[ct].Changerequestid;delete Xt[ct].Charid;delete Xt[ct].Classtype;delete Xt[ct].Service;delete Xt[ct].Valcnt;Xt[ct].slNo=ct+1;Xt[ct].Plnal=Xt[ct].Tplnal;Xt[ct].flag=Xt[ct].Tplnal+"-"+Xt[ct].Class+"-"+Xt[ct].slNo;ta.Char.push(Xt[ct])}r.chData=Xt}for(var B=0;B<ta.Char.length;B++){var z=1;for(var K=0;K<ta.Char.length;K++){if(B===K){continue}if(ta.Char[K].Atnam===ta.Char[B].Atnam&&ta.Char[K].Class===ta.Char[B].Class){z++}}if(z>1){ta.Char[B].charDltEnable=true}else{ta.Char[B].charDltEnable=false}if(ta.Char[B].Atein===true){ta.Char[B].charAddEnable=false}}}}E.push(ta)}sap.ui.getCore().getModel("AIWListGTLModel").setSizeLimit(E.length);sap.ui.getCore().getModel("AIWListGTLModel").setData(E)}}if(a.ETHdr){var Yt=a.ETHdr.results;if(Yt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("TLTab")}for(var ia=0;ia<Yt.length;ia++){var da={validFrm:l.getDateFormat(Yt[ia].Datuv),grp:Yt[ia].Tleqhdr,vEquiLbl:true,vEqui:true,vEquiDesc:true,equipment:Yt[ia].Equnr2eth,equipmentDesc:Yt[ia].Eqktx,vFlocLbl:false,vFloc:false,vFlocDesc:false,flocEnb:false,bAddComponent:true,enable:false,equiEnb:false,header:[],operation:[],component:[],Class:[],Char:[]};if(r.getState()==="MOCR"&&r.hMode!=="copy"){da.modeFlag="Chg"}if(r.hMode==="copy"){da.Type=true;da.modeFlag="Crt"}var aa=a.ETList.results;if(aa.length>0){for(var ie=0;ie<aa.length;ie++){if(da.grp===aa[ie].Tleqhdr){var ca={};if(r.hMode==="copy"){ca.Type=true}if(r.getState()==="MOCR"&&r.hMode!=="copy"){ca.Grpenable=false}ca.pPlantDesc=aa[ie].Iwerktxt;ca.Grpenable=false;ca.usageDesc=aa[ie].TlUsgTxt;ca.plGrpDesc=aa[ie].Plnnrgrptxt;ca.statusDesc=aa[ie].Statustxt;ca.sysCondDesc=aa[ie].Anlzux;ca.Strat=aa[ie].Strat;ca.stratDesc=aa[ie].Strattxt;ca.Plnal=aa[ie].Tplnal;ca.Verwe=aa[ie].Tverwe;ca.plEnable=false;ca.Ktext=aa[ie].Ktext;ca.valueStateT="None";ca.valueStatePP="None";ca.valueStateU="None";ca.valueStateS="None";ca.profile=aa[ie].Profident;ca.keydate=aa[ie].Keydate;ca.wc=aa[ie].Tarbpl;ca.plant=aa[ie].Wcplant;ca.Iwerk=aa[ie].Werks;ca.usage=aa[ie].Tverwe;ca.plannerGrp=aa[ie].Vagrp;ca.Vagrp=aa[ie].Vagrp;ca.Statu=aa[ie].Statu;ca.systemCond=aa[ie].Anlzu;ca.Anlzu=aa[ie].Anlzu;ca.groupVal=aa[ie].Tleqhdr;ca.groupCounterDesc=aa[ie].Eqktx;ca.wcDesc=aa[ie].Wcdescription;ca.equipment=aa[ie].Eq2tl;ca.equipmentDesc=aa[ie].Eqktx;ca.deletion=aa[ie].Delkz;ca.TlUsgTxt=aa[ie].TlUsgTxt;ca.Plnnrgrptxt=aa[ie].Plnnrgrptxt;ca.Statustxt=aa[ie].Statustxt;ca.Anlzux=aa[ie].Anlzux;ca.insPtDesc=aa[ie].Slwbeztxt;ca.insPt=aa[ie].Slwbez;ca.extNum=aa[ie].Extnumtxt;ca.tlusg=aa[ie].Tverwe;ca.grp=aa[ie].Tlgnhdr;ca.assmbly=aa[ie].Istru;ca.assmblyDesc=aa[ie].Istrux;da.header.push(ca)}}}var la=a.ETOprs.results;if(la.length>0){for(var Ee=0;Ee<la.length;Ee++){if(da.grp===la[Ee].Tleqhdr){var pa={};pa=la[Ee];pa.calcKeyDesc="";pa.actTypDesc="";pa.flag=la[Ee].Tplnal+"-"+la[Ee].Vornr;pa.Arbpl=la[Ee].TlArbpl;pa.Plnal=la[Ee].Tplnal;pa.Vornr=la[Ee].Vornr;pa.opState="None";pa.opDescState="None";pa.wcState="None";pa.plantState="None";pa.ctrlKeyState="None";pa.operation=la[Ee].Evornr2op;pa.groupCounter=la[Ee].Tplnal;pa.subOp=la[Ee].Uvorn;pa.workCenter=la[Ee].TlArbpl;pa.Werks=la[Ee].Werks2eop;pa.plant=la[Ee].Werks2eop;pa.controlKey=la[Ee].Steus2eop;pa.Steus=la[Ee].Steus2eop;pa.shortText=la[Ee].Ltxa1;pa.Ltxa1=la[Ee].Ltxa1;pa.work=la[Ee].Arbei;pa.unitForWork=la[Ee].Arbeh;pa.number=la[Ee].Anzzl;pa.calcKey=la[Ee].Indet;pa.normDuration=la[Ee].Dauno;pa.uomDuration=la[Ee].Daune;pa.workPerc=la[Ee].Prznt.toString();pa.exeFactor=la[Ee].Aufkt;pa.actType=la[Ee].Larnt2eop;pa.stdTextKey=la[Ee].Ktsch;pa.assembly=la[Ee].Tistru;pa.noOfTime=la[Ee].Loanz;pa.sutability=la[Ee].Qualf2eop;pa.wageGroup=la[Ee].Logrp2eop;pa.wageType=la[Ee].Loart;pa.sysCondition=la[Ee].Tanlzu;pa.orderQty=la[Ee].Bmvrg;pa.ordQtyUnit=la[Ee].Bmeih;pa.netPrice=la[Ee].Opreis;pa.currency=la[Ee].Owaers;pa.priceUnit=la[Ee].Opeinh;pa.planDelTime=la[Ee].Plifz;pa.costElement=la[Ee].Sakto2eop;pa.materialGrp=la[Ee].Omatkl;pa.puchGroup=la[Ee].Oekgrp;pa.vendor=la[Ee].Lifnr;pa.purchOrg=la[Ee].Ekorg;pa.shortTerm=la[Ee].Sortl;pa.purchInfo=la[Ee].Infnr;pa.fieldKey=la[Ee].Slwid;pa.purchDoc=la[Ee].Ebeln;pa.purchDocItem=la[Ee].Ebelp2eop;pa.userFld=la[Ee].Slwid;pa.capCat=la[Ee].Qlkapar;pa.capCatDesc=la[Ee].Kapartxt;pa.quantity1_=la[Ee].Use04;pa.quantity1=la[Ee].Usr04;pa.quantity2=la[Ee].Usr05;pa.quantity2_=la[Ee].Use05;pa.value3=la[Ee].Usr06;pa.value4=la[Ee].Usr07;pa.value3_=la[Ee].Use06;pa.value4_=la[Ee].Use07;pa.text1=la[Ee].Usr00;pa.text2=la[Ee].Usr01;pa.text3=la[Ee].Usr03;pa.text4=la[Ee].Usr04;pa.date1=la[Ee].Usr08;pa.date2=la[Ee].Usr09;pa.indicator1=la[Ee].Usr10;pa.indicator2=la[Ee].Usr11;pa.Usrtxtname1=la[Ee].Usrtxtname1;pa.Usrtxtflg1=la[Ee].Usrtxtflg1;pa.Usrtxtname2=la[Ee].Usrtxtname2;pa.Usrtxtflg2=la[Ee].Usrtxtflg2;pa.Usrtxtname3=la[Ee].Usrtxtname3;pa.Usrtxtflg3=la[Ee].Usrtxtflg3;pa.Usrtxtname4=la[Ee].Usrtxtname4;pa.Usrtxtflg4=la[Ee].Usrtxtflg4;pa.Usrqtyname1=la[Ee].Usrqtyname1;pa.Usrqtyflg1=la[Ee].Usrqtyflg1;pa.Usrqtyname2=la[Ee].Usrqtyname2;pa.Usrqtyflg2=la[Ee].Usrqtyflg2;pa.Usrvalname1=la[Ee].Usrvalname1;pa.Usrvalflg1=la[Ee].Usrvalflg1;pa.Usrvalname2=la[Ee].Usrvalname2;pa.Usrvalflg2=la[Ee].Usrvalflg2;pa.Usrdatename1=la[Ee].Usrdatename1;pa.Usrdatflg1=la[Ee].Usrdatflg1;pa.Usrdatename2=la[Ee].Usrdatename2;pa.Usrdatflg2=la[Ee].Usrdatflg2;pa.Usrindname1=la[Ee].Usrindname1;pa.Usrindflag1=la[Ee].Usrindflag1;pa.Usrindname2=la[Ee].Usrindname2;pa.Usrindflag2=la[Ee].Usrindflag2;pa.qual=la[Ee].Qlotype;pa.search=la[Ee].Qsearchtm;da.operation.push(pa)}}r.oData=da.operation}sa=a.ETComp.results;if(sa.length>0){for(var _=0;_<sa.length;_++){if(da.grp===sa[_].Tleqhdr){var ua={};ua=sa[_];ua.matDesc=sa[_].Maktx;ua.slNo=_+1;ua.flag=sa[_].Tplnal+"-"+sa[_].Vornr+"-"+sa[_].slNo;ua.hFlag=sa[_].Tplnal+"-"+sa[_].Vornr;ua.Vornr=sa[_].Vornr;ua.activity=sa[_].Vornr;ua.group=sa[_].Tleqhdr;ua.grp=sa[_].Tleqhdr;ua.groupCounter=sa[_].Tplnal;ua.component=sa[_].Idnrk;ua.compDesc=sa[_].Maktx;ua.compQty=sa[_].Menge;ua.compUnit=sa[_].MeinsEcp;ua.backFlush=sa[_].RgekzEcp;ua.resv=sa[_].Disp===""?sa[_].Disptxt:sa[_].Disp;ua.resvDesc=sa[_].Disptxt;ua.storageLoc=sa[_].Lgortecmp;ua.costElement=sa[_].Saktoecmp;ua.Plnal=sa[_].Tplnal;ua.bom=sa[_].Stlnrecmp;ua.bomCat=sa[_].Stltyecmp;ua.bomCatDesc=sa[_].Stltyecmptxt;ua.itCat=sa[_].Postp;ua.assembly=sa[_].Istru;ua.sortStr=sa[_].Sortf;ua.itemNo=sa[_].Posnr;ua.plantMaint=sa[_].Sanin;ua.relSales=sa[_].Rvrel;ua.relCost=sa[_].Sanka;ua.pmAssembly=sa[_].Stkkz;ua.spare=sa[_].Erskz;ua.matProv=sa[_].Beikz;ua.isPlant=sa[_].Pswrk;ua.bulkMat=sa[_].Schgt;ua.plant=sa[_].Werksecmp;ua.purchGrp=sa[_].Ekgrp;ua.price=sa[_].Preis;ua.currency=sa[_].Waers;ua.prUnit=sa[_].Peinh;ua.delTimeD=sa[_].Lifzt;ua.matGrp=sa[_].Matkl;ua.qtyFix=sa[_].Fmeng;ua.altBom=sa[_].Stlal;da.component.push(ua)}}r.cmpData=sa}var Zt=a.ETClass.results;if(Zt){if(Zt.length>0){for(var it=0;it<Zt.length;it++){if(da.grp===Zt[it].Tleqhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Zt[it].ctEnable=false;Zt[it].classEnable=false}else{Zt[it].ctEnable=true;Zt[it].classEnable=true}Zt[it].ClassTypeDesc=Zt[it].Artxt;delete Zt[it].Artxt;Zt[it].ClassDesc=Zt[it].Kltxt;delete Zt[it].Kltxt;delete Zt[it].Changerequestid;delete Zt[it].Clint;delete Zt[it].Service;Zt[it].slNo=it+1;Zt[it].Plnal=Zt[it].Tplnal;Zt[it].flag=Zt[it].Tplnal+"-"+Zt[it].slNo;da.Class.push(Zt[it])}}r.cData=Zt}}var Xt=a.ETVal.results;if(Xt){if(Xt.length>0){for(var ct=0;ct<Xt.length;ct++){if(da.grp===Xt[ct].Tleqhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Xt[ct].cNameEnable=false}else{Xt[ct].cNameEnable=true}Xt[ct].Textbz=Xt[ct].Atwtb;delete Xt[ct].Ataut;delete Xt[ct].Ataw1;delete Xt[ct].Atawe;delete Xt[ct].Atcod;delete Xt[ct].Atflb;delete Xt[ct].Atflv;delete Xt[ct].Atimb;delete Xt[ct].Atsrt;delete Xt[ct].Atvglart;delete Xt[ct].Atzis;delete Xt[ct].Changerequestid;delete Xt[ct].Charid;delete Xt[ct].Classtype;delete Xt[ct].Service;delete Xt[ct].Valcnt;Xt[ct].slNo=ct+1;Xt[ct].Plnal=Xt[ct].Tplnal;Xt[ct].flag=Xt[ct].Tplnal+"-"+Xt[ct].Class+"-"+Xt[ct].slNo;da.Char.push(Xt[ct])}r.chData=Xt}for(var B=0;B<da.Char.length;B++){var z=1;for(var K=0;K<da.Char.length;K++){if(B===K){continue}if(da.Char[K].Atnam===da.Char[B].Atnam&&da.Char[K].Class===da.Char[B].Class){z++}}if(z>1){da.Char[B].charDltEnable=true}else{da.Char[B].charDltEnable=false}if(da.Char[B].Atein===true){da.Char[B].charAddEnable=false}}}v.push(da)}sap.ui.getCore().getModel("AIWListETLModel").setSizeLimit(v.length);sap.ui.getCore().getModel("AIWListETLModel").setData(v)}sap.ui.getCore().getModel("AIWListETLModel").setData(v)}}if(a.FTHdr){var Yt=a.FTHdr.results;if(Yt){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("TLTab")}for(var ga=0;ga<Yt.length;ga++){var ma={validFrm:l.getDateFormat(Yt[ga].Datuv),grp:Yt[ga].Tlflhdr,vEquiLbl:false,vEqui:false,vEquiDesc:false,floc:Yt[ga].Tplnr2fth,flocDesc:Yt[ga].Pltxt,vFlocLbl:true,vFloc:true,vFlocDesc:true,flocEnb:false,equiEnb:false,bAddComponent:true,enable:false,header:[],operation:[],component:[],Class:[],Char:[]};if(r.getState()==="MOCR"&&r.hMode!=="copy"){ma.modeFlag="Chg"}if(r.hMode==="copy"){ma.Type=true;ma.modeFlag="Crt"}var aa=a.FTList.results;if(aa.length>0){for(var ie=0;ie<aa.length;ie++){if(ma.grp===aa[ie].Tlflhdr){var fa={};if(r.hMode==="copy"){fa.Type=true}if(r.getState()==="MOCR"&&r.hMode!=="copy"){fa.Grpenable=false}fa.pPlantDesc=aa[ie].Iwerktxt;fa.usageDesc=aa[ie].TlUsgTxt;fa.plGrpDesc=aa[ie].Plnnrgrptxt;fa.statusDesc=aa[ie].Statustxt;fa.sysCondDesc=aa[ie].Anlzux;fa.Strat=aa[ie].Strat;fa.stratDesc=aa[ie].Strattxt;fa.Plnal=aa[ie].Tplnal;fa.Verwe=aa[ie].Tverwe;fa.plEnable=false;fa.Ktext=aa[ie].Ktext;fa.valueStateT="None";fa.valueStatePP="None";fa.valueStateU="None";fa.valueStateS="None";fa.profile=aa[ie].Profident;fa.keydate=aa[ie].Keydate;fa.wc=aa[ie].Tarbpl;fa.Iwerk=aa[ie].Werks;fa.plant=aa[ie].Wcplant;fa.tlusg=aa[ie].Tverwe;fa.plannerGrp=aa[ie].Vagrp;fa.Vagrp=aa[ie].Vagrp;fa.Statu=aa[ie].Statu;fa.systemCond=aa[ie].Anlzu;fa.Anlzu=aa[ie].Anlzu;fa.groupVal=aa[ie].Tlflhdr;fa.groupCounterDesc=aa[ie].Pltxt;fa.wcDesc=aa[ie].Wcdescription;fa.assembly=aa[ie].Istru;fa.deletion=aa[ie].Delkz;fa.TlUsgTxt=aa[ie].TlUsgTxt;fa.Plnnrgrptxt=aa[ie].Plnnrgrptxt;fa.Statustxt=aa[ie].Statustxt;fa.Anlzux=aa[ie].Anlzux;fa.insPtDesc=aa[ie].Slwbeztxt;fa.insPt=aa[ie].Slwbez;fa.extNum=aa[ie].Extnumtxt;fa.assmbly=aa[ie].Istru;fa.assmblyDesc=aa[ie].Istrux;fa.grp=aa[ie].Tlgnhdr;fa.floc=aa[ie].Fl2tl;fa.flocDesc=aa[ie].Pltxt;ma.header.push(fa)}}}var la=a.FTOprs.results;if(la.length>0){for(var Ee=0;Ee<la.length;Ee++){if(ma.grp===la[Ee].Tlflhdr){var ha={};ha=la[Ee];ha.calcKeyDesc="";ha.actTypDesc="";ha.flag=la[Ee].Tplnal+"-"+la[Ee].Vornr;ha.Arbpl=la[Ee].TlArbpl;ha.Plnal=la[Ee].Tplnal;ha.Vornr=la[Ee].Vornr;ha.opState="None";ha.opDescState="None";ha.wcState="None";ha.plantState="None";ha.ctrlKeyState="None";ha.groupCounter=la[Ee].Tplnal;ha.operation=la[Ee].Fvornr2op;ha.subOp=la[Ee].Uvorn;ha.workCenter=la[Ee].TlArbpl;ha.plant=la[Ee].Werks2fop;ha.controlKey=la[Ee].Steus2fop;ha.Steus=la[Ee].Steus2fop;ha.shortText=la[Ee].Ltxa1;ha.Ltxa1=la[Ee].Ltxa1;ha.work=la[Ee].Arbei;ha.unitForWork=la[Ee].Arbeh;ha.number=la[Ee].Anzzl;ha.calcKey=la[Ee].Indet;ha.Werks=la[Ee].Werks2fop;ha.normDuration=la[Ee].Dauno;ha.uomDuration=la[Ee].Daune;ha.workPerc=la[Ee].Prznt.toString();ha.exeFactor=la[Ee].Aufkt;ha.actType=la[Ee].Larnt2fop;ha.stdTextKey=la[Ee].Ktsch;ha.assembly=la[Ee].Tistru;ha.noOfTime=la[Ee].Loanz;ha.sutability=la[Ee].Qualf2fop;ha.wageGroup=la[Ee].Logrp2fop;ha.wageType=la[Ee].Loart;ha.sysCondition=la[Ee].Tanlzu;ha.orderQty=la[Ee].Bmvrg;ha.ordQtyUnit=la[Ee].Bmeih;ha.netPrice=la[Ee].Opreis;ha.currency=la[Ee].Owaers;ha.priceUnit=la[Ee].Opeinh;ha.planDelTime=la[Ee].Plifz;ha.costElement=la[Ee].Sakto2fop;ha.materialGrp=la[Ee].Omatkl;ha.puchGroup=la[Ee].Oekgrp;ha.vendor=la[Ee].Lifnr;ha.purchOrg=la[Ee].Ekorg;ha.shortTerm=la[Ee].Sortl;ha.purchInfo=la[Ee].Infnr;ha.fieldKey=la[Ee].Slwid;ha.purchDoc=la[Ee].Ebeln;ha.purchDocItem=la[Ee].Ebelp2fop;ha.userFld=la[Ee].Slwid;ha.capCat=la[Ee].Qlkapar;ha.capCatDesc=la[Ee].Kapartxt;ha.quantity1_=la[Ee].Use04;ha.quantity1=la[Ee].Usr04;ha.quantity2=la[Ee].Usr05;ha.quantity2_=la[Ee].Use05;ha.value3=la[Ee].Usr06;ha.value4=la[Ee].Usr07;ha.value3_=la[Ee].Use06;ha.value4_=la[Ee].Use07;ha.text1=la[Ee].Usr00;ha.text2=la[Ee].Usr01;ha.text3=la[Ee].Usr03;ha.text4=la[Ee].Usr04;ha.date1=la[Ee].Usr08;ha.date2=la[Ee].Usr09;ha.indicator1=la[Ee].Usr10;ha.indicator2=la[Ee].Usr11;ha.Usrtxtname1=la[Ee].Usrtxtname1;ha.Usrtxtflg1=la[Ee].Usrtxtflg1;ha.Usrtxtname2=la[Ee].Usrtxtname2;ha.Usrtxtflg2=la[Ee].Usrtxtflg2;ha.Usrtxtname3=la[Ee].Usrtxtname3;ha.Usrtxtflg3=la[Ee].Usrtxtflg3;ha.Usrtxtname4=la[Ee].Usrtxtname4;ha.Usrtxtflg4=la[Ee].Usrtxtflg4;ha.Usrqtyname1=la[Ee].Usrqtyname1;ha.Usrqtyflg1=la[Ee].Usrqtyflg1;ha.Usrqtyname2=la[Ee].Usrqtyname2;ha.Usrqtyflg2=la[Ee].Usrqtyflg2;ha.Usrvalname1=la[Ee].Usrvalname1;ha.Usrvalflg1=la[Ee].Usrvalflg1;ha.Usrvalname2=la[Ee].Usrvalname2;ha.Usrvalflg2=la[Ee].Usrvalflg2;ha.Usrdatename1=la[Ee].Usrdatename1;ha.Usrdatflg1=la[Ee].Usrdatflg1;ha.Usrdatename2=la[Ee].Usrdatename2;ha.Usrdatflg2=la[Ee].Usrdatflg2;ha.Usrindname1=la[Ee].Usrindname1;ha.Usrindflag1=la[Ee].Usrindflag1;ha.Usrindname2=la[Ee].Usrindname2;ha.Usrindflag2=la[Ee].Usrindflag2;ha.qual=la[Ee].Qlotype;ha.search=la[Ee].Qsearchtm;ma.operation.push(ha)}}}sa=a.FTComp.results;if(sa.length>0){for(var Z=0;Z<sa.length;Z++){if(ma.grp===sa[Z].Tlflhdr){var Sa={};Sa=sa[Z];Sa.matDesc=sa[Z].Maktx;Sa.slNo=_+1;Sa.flag=sa[Z].Tplnal+"-"+sa[Z].Vornr+"-"+sa[Z].slNo;Sa.hFlag=sa[Z].Tplnal+"-"+sa[Z].Vornr;Sa.group=sa[Z].Tlflhdr;Sa.grp=sa[Z].Tlflhdr;Sa.groupCounter=sa[Z].Tplnal;Sa.activity=sa[Z].Vornr;Sa.Vornr=sa[Z].Vornr;Sa.Plnal=sa[Z].Tplnal;Sa.component=sa[Z].Idnrk;Sa.compDesc=sa[Z].Maktx;Sa.compQty=sa[Z].Menge;Sa.compUnit=sa[Z].MeinsFcp;Sa.backFlush=sa[Z].RgekzFcp;Sa.resv=sa[Z].Disp===""?sa[Z].Disptxt:sa[Z].Disp;Sa.resvDesc=sa[Z].Disptxt;Sa.storageLoc=sa[Z].Lgortfcmp;Sa.costElement=sa[Z].Saktofcmp;Sa.bom=sa[Z].Stlnrfcmp;Sa.bomCat=sa[Z].Stltyfcmp;Sa.bomCatDesc=sa[Z].Stltyfcmptxt;Sa.itCat=sa[Z].Postp;Sa.assembly=sa[Z].Istru;Sa.sortStr=sa[Z].Sortf;Sa.itemNo=sa[Z].Posnr;Sa.plantMaint=sa[Z].Sanin;Sa.relSales=sa[Z].Rvrel;Sa.relCost=sa[Z].Sanka;Sa.pmAssembly=sa[Z].Stkkz;Sa.spare=sa[Z].Erskz;Sa.matProv=sa[Z].Beikz;Sa.isPlant=sa[Z].Pswrk;Sa.bulkMat=sa[Z].Schgt;Sa.plant=sa[Z].Werksfcmp;Sa.purchGrp=sa[Z].Ekgrp;Sa.price=sa[Z].Preis;Sa.currency=sa[Z].Waers;Sa.prUnit=sa[Z].Peinh;Sa.delTimeD=sa[Z].Lifzt;Sa.matGrp=sa[Z].Matkl;Sa.qtyFix=sa[Z].Fmeng;Sa.altBom=sa[Z].Stlal;ma.component.push(Sa)}}r.cmpData=sa}var Zt=a.FTClass.results;if(Zt){if(Zt.length>0){for(var it=0;it<Zt.length;it++){if(ma.grp===Zt[it].Tlflhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Zt[it].ctEnable=false;Zt[it].classEnable=false}else{Zt[it].ctEnable=true;Zt[it].classEnable=true}Zt[it].ClassTypeDesc=Zt[it].Artxt;delete Zt[it].Artxt;Zt[it].ClassDesc=Zt[it].Kltxt;delete Zt[it].Kltxt;delete Zt[it].Changerequestid;delete Zt[it].Clint;delete Zt[it].Service;Zt[it].slNo=it+1;Zt[it].Plnal=Zt[it].Tplnal;Zt[it].flag=Zt[it].Tplnal+"-"+Zt[it].slNo;ma.Class.push(Zt[it])}}r.cData=Zt}}var Xt=a.FTVal.results;if(Xt){if(Xt.length>0){for(var ct=0;ct<Xt.length;ct++){if(ma.grp===Xt[ct].Tlflhdr){if(r.getState()==="MOCR"&&r.hMode!=="copy"){Xt[ct].cNameEnable=false}else{Xt[ct].cNameEnable=true}Xt[ct].Textbz=Xt[ct].Atwtb;delete Xt[ct].Ataut;delete Xt[ct].Ataw1;delete Xt[ct].Atawe;delete Xt[ct].Atcod;delete Xt[ct].Atflb;delete Xt[ct].Atflv;delete Xt[ct].Atimb;delete Xt[ct].Atsrt;delete Xt[ct].Atvglart;delete Xt[ct].Atzis;delete Xt[ct].Changerequestid;delete Xt[ct].Charid;delete Xt[ct].Classtype;delete Xt[ct].Service;delete Xt[ct].Valcnt;Xt[ct].slNo=ct+1;Xt[ct].Plnal=Xt[ct].Tplnal;Xt[ct].flag=Xt[ct].Tplnal+"-"+Xt[ct].Class+"-"+Xt[ct].slNo;ma.Char.push(Xt[ct])}r.chData=Xt}for(var B=0;B<ma.Char.length;B++){var z=1;for(var K=0;K<ma.Char.length;K++){if(B===K){continue}if(ma.Char[K].Atnam===ma.Char[B].Atnam&&ma.Char[K].Class===ma.Char[B].Class){z++}}if(z>1){ma.Char[B].charDltEnable=true}else{ma.Char[B].charDltEnable=false}if(ma.Char[B].Atein===true){ma.Char[B].charAddEnable=false}}}}C.push(ma)}sap.ui.getCore().getModel("AIWListFTLModel").setSizeLimit(C.length);sap.ui.getCore().getModel("AIWListFTLModel").setData(C)}}if(a.Olink){var G=a.Olink.results;if(G){if(G.length>0){if(r.getState()==="MOCR"&&!r.isHierarchy){r.getView().byId("_iconTabBar").setSelectedKey("OLTab")}for(var it=0;it<G.length;it++){var Ta={};if(r.hMode==="copy"){Ta.Type=true}Ta.linkCat=G[it].Netyp;Ta.objCat=G[it].Kantyp;Ta.link=G[it].Objlink;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ta.lenable=false}else{Ta.lenable=true}Ta.linkCatDesc=G[it].Netyptxt;Ta.objCat=G[it].Kantyp;Ta.objCatDesc=G[it].Kantyptxt;Ta.linkDesc=G[it].Kanxt;Ta.netId=G[it].Netid;Ta.netIdDesc=G[it].Netidtxt;Ta.linkNum=G[it].Lfdknr;Ta.autGrp=G[it].Begru;Ta.autGrpDesc=G[it].Begtx;Ta.validFrm=l.getDateFormat(G[it].Datva);Ta.timeFrm=l.getTime(G[it].Zeitva);Ta.validTo=l.getDateFormat(G[it].Datvb);Ta.timeTo=l.getTime(G[it].Zeitvb);Ta.medium=G[it].Mediu;Ta.mediumDesc=G[it].Medkxt;Ta.linkFrmFlEn=true;Ta.linkToFlEn=true;Ta.linkObjFlEn=true;Ta.linkFromEQEn=true;Ta.linkToEQEn=true;Ta.linkObjEqEn=true;Ta.linkCatEn=true;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ta.linkCatEn=false}Ta.linkCatVS="true";Ta.objCatEn=true;if(r.getState()==="MOCR"&&r.hMode!=="copy"){Ta.objCatEn=false}Ta.objCatVS="None";Ta.linkFEqLblRQ=true;Ta.linkToEqLblRQ=true;Ta.linkFrmEq="";Ta.linkFrmEqDesc="";Ta.linkToEq="";Ta.linkToEqDesc="";Ta.linkObjEq="";Ta.linkObjEqDesc="";Ta.linkFrmflLblV=true;Ta.linkFrmFlV=true;Ta.linkFrmFlDescV=true;Ta.linkToFlLblV=true;Ta.linkToFlV=true;Ta.linkToFlDescV=true;Ta.linkObjFlLblV=true;Ta.linkObjFlV=true;Ta.linkObjFlDescV=true;Ta.linkFrmEqLblV=true;Ta.linkFrmEqV=true;Ta.linkFrmEqDescV=true;Ta.linkToEqLblV=true;Ta.linkToEQV=true;Ta.linkToEqDescV=true;Ta.linkObjEqLblV=true;Ta.linkObjEqV=true;Ta.linkObjEqDescV=true;Ta.enable=true;Ta.LAM=[];Ta.Class=[];Ta.Char=[];if(Ta.objCat==="E"){Ta.linkCatEn=false;Ta.linkFrmFlEn=false;Ta.linkToFlEn=false;Ta.linkObjFlEn=false;Ta.linkFEqLblRQ=true;Ta.linkToEqLblRQ=true;Ta.linkFrmflLblV=false;Ta.linkFrmFlV=false;Ta.linkFrmFlDescV=false;Ta.linkToFlLblV=false;Ta.linkToFlV=false;Ta.linkToFlDescV=false;Ta.linkObjFlLblV=false;Ta.linkObjFlV=false;Ta.linkObjFlDescV=false;Ta.linkCatVS="None";Ta.objCatEn=false;Ta.objCatVS="None";Ta.linkFEqLblRQ=true;Ta.linkToEqLblRQ=true;Ta.linkFrmEq=G[it].Eqvon;Ta.linkFrmEqDesc=G[it].Eqtxtf;Ta.linkToEq=G[it].Eqnach;Ta.linkToEqDesc=G[it].Eqtxtt;Ta.linkObjEq=G[it].Eqkant;Ta.linkObjEqDesc=G[it].Eqtxtl;Ta.linkFrmflLblV=false;Ta.linkFrmFlV=false;Ta.linkFrmFlDescV=false;Ta.linkToFlLblV=false;Ta.linkToFlV=false;Ta.linkToFlDescV=false;Ta.linkObjFlLblV=false;Ta.linkObjFlV=false;Ta.linkObjFlDescV=false;Ta.linkFrmEqLblV=true;Ta.linkFrmEqV=true;Ta.linkFrmEqDescV=true;Ta.linkToEqLblV=true;Ta.linkToEQV=true;Ta.linkToEqDescV=true;Ta.linkObjEqLblV=true;Ta.linkObjEqV=true;Ta.linkObjEqDescV=true}else if(Ta.objCat==="T"){Ta.linkCatEn=false;Ta.linkFromEQEn=false;Ta.linkToEQEn=false;Ta.linkObjEqEn=false;Ta.linkFrmflLblRQ=true;Ta.linkToFlLblRQ=true;Ta.linkFrmEqLblV=false;Ta.linkFrmEqV=false;Ta.linkFrmEqDescV=false;Ta.linkToEqLblV=false;Ta.linkToEQV=false;Ta.linkToEqDescV=false;Ta.linkObjEqLblV=false;Ta.linkObjEqV=false;Ta.linkObjEqDescV=false;Ta.linkCatVS="None";Ta.objCatEn=false;Ta.objCatVS="None";Ta.linkFrmflLblRQ=true;Ta.linkToFlLblRQ=true;Ta.linkFrmFl=G[it].Tpvon;Ta.linkFrmFlDesc=G[it].Fltxtf;Ta.linkToFl=G[it].Tpnach;Ta.linkToFlDesc=G[it].Fltxtt;Ta.linkObjFl=G[it].Tpkant;Ta.linkObjFlDesc=G[it].Fltxtl;Ta.linkFrmflLblV=true;Ta.linkFrmFlV=true;Ta.linkFrmFlDescV=true;Ta.linkToFlLblV=true;Ta.linkToFlV=true;Ta.linkToFlDescV=true;Ta.linkObjFlLblV=true;Ta.linkObjFlV=true;Ta.linkObjFlDescV=true;Ta.linkFrmEqLblV=false;Ta.linkFrmEqV=false;Ta.linkFrmEqDescV=false;Ta.linkToEqLblV=false;Ta.linkToEQV=false;Ta.linkToEqDescV=false;Ta.linkObjEqLblV=false;Ta.linkObjEqV=false;Ta.linkObjEqDescV=false}if(G[it].Bezarp==="2"){Ta.twoWayRel=true;Ta.oneWayRel=false}else if(G[it].Bezarp==="1"){Ta.oneWayRel=true;Ta.twoWayRel=false}if(G[it].Bezarl==="2"){Ta.twoWayUsd=true;Ta.oneWayUsd=false;Ta.relNotUsd=false}else if(G[it].Bezarl==="1"){Ta.oneWayUsd=true;Ta.relNotUsd=false;Ta.twoWayUsd=false}else if(G[it].Bezarl==="0"){Ta.relNotUsd=true;Ta.oneWayUsd=false;Ta.twoWayUsd=false}var Ma=a.OLLAM.results;if(Ma){var ba=new sap.ui.model.json.JSONModel;ba.setData(Ma);Ta.LAM=Ma}var Zt=a.OLClass.results;if(Zt){if(Zt.length>0){for(var ie=0;ie<Zt.length;ie++){if(Ta.link===Zt[ie].Objlink){Zt[ie].ctEnable=true;Zt[ie].classEnable=true;Zt[ie].ClassTypeDesc=Zt[ie].Artxt;delete Zt[ie].Artxt;Zt[ie].ClassDesc=Zt[ie].Kltxt;delete Zt[ie].Kltxt;delete Zt[ie].Changerequestid;delete Zt[ie].Clint;delete Zt[ie].Service;Ta.Class.push(Zt[ie])}}}var Xt=a.OLVal.results;if(Xt){if(Xt.length>0){for(var ct=0;ct<Xt.length;ct++){if(Ta.link===Xt[ct].Objlink){Xt[ct].cNameEnable=true;Xt[ct].Textbz=Xt[ct].Atwtb;delete Xt[ct].Ataut;delete Xt[ct].Ataw1;delete Xt[ct].Atawe;delete Xt[ct].Atcod;delete Xt[ct].Atflb;delete Xt[ct].Atflv;delete Xt[ct].Atimb;delete Xt[ct].Atsrt;delete Xt[ct].Atvglart;delete Xt[ct].Atzis;delete Xt[ct].Changerequestid;delete Xt[ct].Charid;delete Xt[ct].Classtype;delete Xt[ct].Service;delete Xt[ct].Valcnt;Xt[ct].slNo=ct+1;Xt[ct].flag=Xt[ct].Class+"-"+Xt[ct].slNo;Ta.Char.push(Xt[ct])}}for(var B=0;B<Ta.Char.length;B++){var z=1;for(var K=0;K<Ta.Char.length;K++){if(B===K){continue}if(Ta.Char[K].Atnam===Ta.Char[B].Atnam&&Ta.Char[K].Class===Ta.Char[B].Class){z++}}if(z>1){Ta.Char[B].charDltEnable=true}else{Ta.Char[B].charDltEnable=false}if(Ta.Char[B].Atein===true){Ta.Char[B].charAddEnable=false}}}}}x.push(Ta)}P(x[x.length-1].linkCat,x.length)}}}}r.readAIWModel("R");r.BusyDialog.close()};var L=function(a){r.BusyDialog.close();if(a.results.length>0){var n=a.results[0];var s={};if(n){r.bindAttachmentData(n);r.bindNotesData(n);r.ChangeRequestType=n.ChangeRequestType;r.CreatedBy=n.CreatedBy;r.ChangedAt=n.ChangedAt;r.CrDescription=n.CrDescription;if(e==="FLOCTab"){p=sap.ui.getCore().getModel(r.oModelAIWFLOC).getData();if(p.length>0){return}var o={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"",modelParKey:"",modelParKeyVS:"None",modelEnable:false,crtEnable:false,delEnable:false};var i=new t(o);r.getView().setModel(i,"AIWModel");if(n.FuncLoc){var d=n.FuncLoc.results;if(d){for(var f=0;f<d.length;f++){s={intlAddr:[],classItems:[],characteristics:[],linearChar:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};c={altlbl:[],Partners:[],Permits:[],attachmentCount:"0",Guids:"",TplnrEnabled:true,MaintplantEnabled:false,BukrsEnabled:false,FunctionalLocEnabled:false,FlocCatEnabled:false,StrucIndEnabled:false};c.Tplnr=d[f].Tplnr;c.Functionallocation=d[f].FlocRef;c.Flocdescription=d[f].Txtmi;c.EditMask=d[f].EditMask;c.Hierarchy=d[f].Hierarchy;c.Floccategory=d[f].Fltyp;c.FlocCategoryDesc=d[f].Flttx;c.Strucindicator=d[f].TplkzFlc;c.StrucIndicatorDesc=d[f].Tplxt;c.Lvorm=d[f].Lvorm;c.Deact=d[f].Deact;c.Trpnr=d[f].Trpnr;c.Refflocdesc=d[f].Refflocdesc;c.SupFunctionallocation=d[f].Tplma;c.SupFlocdescription=d[f].Supflocdesc;c.Stattext=d[f].Stattext;c.UstaEqui=d[f].UstaFloc;c.StsmEqui=d[f].StsmFloc;c.StsmEquiDesc=d[f].Statproftxt;c.UstwEqui=d[f].UstwFloc;c.UswoEqui=d[f].UswoFloc;c.TechnicalObjectTyp=d[f].Eqart;c.Description=d[f].Eartx;c.Begru=d[f].Begru;c.Begtx=d[f].Begtx;c.Brgew=d[f].Brgew;c.Gewei=d[f].Gewei;c.Invnr=d[f].Invnr;c.Groes=d[f].Groes;c.Inbdt=d[f].Inbdt;c.Answt=d[f].Answt;c.Waers=d[f].Waers;c.Ansdt=d[f].Ansdt;c.Herst=d[f].Herst;c.Typbz=d[f].Typbz;c.Mapar=d[f].Mapar;c.Serge=d[f].Serge;c.Herld=d[f].Herld;c.Baujj=d[f].Baujj;c.Baumm=d[f].Baumm;c.MonthName=d[f].MonthName;c.Maintplant=d[f].Swerk;c.MaintplantDesc=d[f].Plantname;c.Location=d[f].StorFloc;c.Locationdesc=d[f].Locationdesc;c.Msgrp=d[f].Msgrp;c.BeberFl=d[f].BeberFl;c.Fing=d[f].Fing;c.Tele=d[f].Tele;c.Eqfnr=d[f].Eqfnr;c.Abckz=d[f].Abckzfloc;c.Abctx=d[f].Abctx;c.Bukrs=d[f].Bukrsfloc;c.Butxt=d[f].Butxt;c.City=d[f].City;c.GsbeFloc=d[f].GsbeFloc;c.Gtext=d[f].Gtext;c.Anln1Fl=d[f].Anln1Fl;c.AnlaFl=d[f].AnlaFl;c.Txt50=d[f].Txt50;c.Kostl=d[f].KostFloc;c.Kokrs=d[f].KokrFloc;c.Mctxt=d[f].Contareaname;c.Posid=d[f].Posid;c.Post1=d[f].Post1;c.DaufFloc=d[f].DaufFloc;c.Standorderdesc=d[f].Standorderdesc;c.AufnFloc=d[f].AufnFloc;c.SettleOrdDesc=d[f].SettleOrdDesc;c.Werks=d[f].PlntFloc;c.Planningplantdes=d[f].Planningplantdes;c.Ingrp=d[f].Ingrp;c.Innam=d[f].Plannergrpdesc;c.Arbpl=d[f].Arbplfloc;c.Ktext=d[f].Workcenterdesc;c.WcWerks=d[f].Wergwfloc;c.MainArbpl=d[f].Gewrkfloc;c.MainKtext=d[f].MainWcDesc;c.MainWerks=d[f].MainWcPlant;c.RbnrFloc=d[f].RbnrFloc;c.Rbnrx=d[f].Rbnrx;c.Tplma=d[f].Tplma;c.Supflocdesc=d[f].Supflocdesc;c.Posnr=d[f].Posnr;c.Trpnr=d[f].Trpnr;c.Refflocdesc=d[f].Refflocdesc;c.Iequi=d[f].Iequi;c.Einzl=d[f].Einzl;c.ConstrType=d[f].Submtiflo;c.ConstructionDesc=d[f].Constdesc;c.CgwldtFl=d[f].CgwldtFl;c.CgwlenFl=d[f].CgwlenFl;c.CmganrFl=d[f].CmganrFl;c.CwagetFl=d[f].CwagetFl;c.CgaerbFl=d[f].CgaerbFl;c.VgwldtFl=d[f].VgwldtFl;c.VgwlenFl=d[f].VgwlenFl;c.VmganrFl=d[f].VmganrFl;c.VwagetFl=d[f].VwagetFl;c.VgaerbFl=d[f].VgaerbFl;c.Vkorg=d[f].Vkorg;c.Vkorgtxt=d[f].Vkorgtxt;c.Vtweg=d[f].Vtweg;c.Vtwegtxt=d[f].Vtwegtxt;c.Spart=d[f].Spart;c.Sparttxt=d[f].Sparttxt;c.Vkbur=d[f].Vkbur;c.Vkburtxt=d[f].Vkburtxt;c.Vkgrp=d[f].Vkgrp;c.Vkgrptxt=d[f].Vkgrptxt;c.Modeldesc=d[f].Modeldesc;c.Modelref=d[f].Modelref;c.Modelrver=d[f].Modelrver;c.Modelext=d[f].Modelext;c.Modelname=d[f].Modelname;c.Modelver=d[f].Modelver;if(d[f].Fltyp==="L"&&n.FLLAM){var h=n.FLLAM.results;if(h){for(var S=0;S<h.length;S++){if(h[S].Funcloc===d[f].Tplnr){c.lam=h[S];c.lam.LrpidDesc=h[S].LrpDescr;c.lam.LinUnitDesc=h[S].Uomtext;break}}}}if(n.FLClass){var T=n.FLClass.results;if(T){if(T.length>0){for(var M=0;M<T.length;M++){if(c.Tplnr===T[M].Funcloc){T[M].ctEnable=false;T[M].classEnable=false;T[M].ClassTypeDesc=T[M].Artxt;delete T[M].Artxt;T[M].ClassDesc=T[M].Kltxt;delete T[M].Kltxt;delete T[M].Changerequestid;delete T[M].Clint;delete T[M].Service;s.classItems.push(T[M])}}}}}if(n.FLVal){var V=n.FLVal.results;if(V){if(V.length>0){for(var I=0;I<V.length;I++){if(c.Tplnr===V[I].Funcloc){V[I].cNameEnable=false;V[I].Textbz=V[I].Atwtb;delete V[I].Ataut;delete V[I].Ataw1;delete V[I].Atawe;delete V[I].Atcod;delete V[I].Atflb;delete V[I].Atflv;delete V[I].Atimb;delete V[I].Atsrt;delete V[I].Atvglart;delete V[I].Atzis;delete V[I].Changerequestid;delete V[I].Charid;delete V[I].Classtype;delete V[I].Service;delete V[I].Valcnt;V[I].slNo=I+1;V[I].flag=V[I].Class+"-"+V[I].slNo;s.characteristics.push(V[I])}}}}}if(n.FLLAMCH){var L=n.FLLAMCH.results;if(L){if(L.length>0){for(var y=0;y<L.length;y++){if(c.Functionallocation===L[y].Funcloc){L[y].linCharEnable=true;s.linearChar.push(L[y])}}}}}if(n.FLPrtnr){var D=n.FLPrtnr.results;if(D){if(D.length>0){for(var k=0;k<D.length;k++){if(c.Tplnr===D[k].Funcloc){var F={};F.Partnerfn=D[k].Partnerfn;F.Partner=D[k].Partner;F.Namedisp=D[k].Namedisp;F.Addressfl=D[k].Addressfl;F.Address=D[k].Address;F.Partnrfuntxt=D[k].Partnrfuntxt;c.Partners.push(F)}}}}}if(n.FLPermit){var A=n.FLPermit.results;if(A){if(A.length>0){for(var w=0;w<A.length;w++){if(c.Tplnr===A[w].Funcloc){var q={};q.Permit=A[w].Permit;q.Permittxt=A[w].Permittxt;q.Permitcat=A[w].Permitcat;q.Ordercomp=A[w].Ordercomp;q.Orderrel=A[w].Orderrel;q.Printper=A[w].Printper;q.Proposper=A[w].Proposper;q.Ltxtper=A[w].Ltxtper;q.Chbltyper=A[w].Chbltyper;q.PermitLt=A[w].PermitLt;c.Permits.push(q)}}}}}if(n.FLAddr){if(n.FLAddr.results){var W=n.FLAddr.results;if(W){if(W.length>0){for(var B=0;B<W.length;B++){if(c.Tplnr===W[B].Funcloc){s.Title=W[B].Titletxt;s.Name1=W[B].Name1;s.Name2=W[B].Name2;s.Name3=W[B].Name3;s.Name4=W[B].Name4;s.Sort1=W[B].Sort1;s.Sort2=W[B].Sort2;s.NameCo=W[B].NameCo;s.Building=W[B].Building;s.Floor=W[B].Floor;s.Roomnum=W[B].Roomnum;s.Street=W[B].Street;s.HouseNr1=W[B].HouseNr1;s.HouseNr2=W[B].HouseNr2;s.Strsuppl1=W[B].Strsuppl1;s.Strsuppl2=W[B].Strsuppl2;s.Strsuppl3=W[B].Strsuppl3;s.AddrLocation=W[B].Location;s.District=W[B].District;s.PostCod1=W[B].PostCod1;s.City1=W[B].City1;s.RPostafl=W[B].RPostafl;s.Landx=W[B].Landx;s.RfePost=W[B].RPostFl;s.Regiotxt=W[B].Regiotxt;s.HomeCity=W[B].HomeCity;s.TimeZone=W[B].TimeZone;s.Taxjurcod=W[B].Taxjurcod;s.Regiogrou=W[B].Regiogrou;s.RfePostl=W[B].RfePostl;s.Dontusestxt=W[B].Dontusestxt;s.PoBox=W[B].PoBox;s.PoboxNum=W[B].PoboxNum;s.DlvsrvTy=W[B].DlvsrvTy;s.DlvsrvNr=W[B].DlvsrvNr;s.PostCod2=W[B].PostCod2;s.PoboxLoc=W[B].PoboxLoc;s.PoboxLby=W[B].PoboxLby;s.PoboxCty=W[B].PoboxCty;s.LandxP=W[B].LandxP;s.RfePstal=W[B].RPstaFl;s.RegiotxtP=W[B].RegiotxtP;s.Dontuseptxt=W[B].Dontuseptxt;s.PostCod3=W[B].PostCod3;s.Remark=W[B].Remark}}}}}}var N=n.FLAddrI.results;if(N){for(var S=0;S<N.length;S++){if(N[S].Funcloc===c.Tplnr){N[S].AdNationEnable=false;N[S].City1iVS="None";N[S].StreetiVS="None";s.intlAddr.push(N[S])}}}var O=n.FLALTLBEL.results;if(O){for(var R=0;R<O.length;R++){if(O[R].Funcloc===c.Tplnr){var U={Funcloc:O[R].Funcloc,AltAlkey:O[R].AltAlkey,Altxt:O[R].Altxt,AltStrno:O[R].AltStrno,AltTplkz:O[R].AltTplkz,Tplxt:O[R].Tplxt,Name1i:O[R].Editm,Actvs:O[R].Actvs,AltPrkey:O[R].AltPrkey,AltReuse:O[R].AltReuse,enableLblSys:false,enableAltLbl:false,enableStrInd:false,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};c.altlbl.push(U)}}}if(n.FLEmail){if(n.FLEmail.results){var z=n.FLEmail.results;if(z){if(z.length>0){for(var K=0;K<z.length;K++){if(c.Tplnr===z[K].Funcloc){var H={};H.EAddress=z[K].EAddress;H.EFlgdeft=z[K].EFlgdeft;H.EFlgnous=z[K].EFlgnous;s.emailAddress.push(H)}}}}}}if(n.FLUrl){if(n.FLUrl.results){var G=n.FLUrl.results;if(G){if(G.length>0){for(var j=0;j<G.length;j++){if(c.Tplnr===G[j].Funcloc){var Q={};Q.Uritypetxt=G[j].Uritypetxt;Q.UAddress=G[j].UAddress;Q.UFlgdeft=G[j].UFlgdeft;Q.UFlgnous=G[j].UFlgnous;s.urlAddress.push(Q)}}}}}}if(n.FLTele){if(n.FLTele.results){var _=n.FLTele.results;if(_){if(_.length>0){for(var J=0;J<_.length;J++){if(c.Tplnr===_[J].Funcloc){var $={};$.Teltype=_[J].Teltype;$.TCountry=_[J].TCountry;$.Telefto=_[J].Telefto;$.TNumber=_[J].TNumber;$.TExtens=_[J].TExtens;$.TFlgsms=_[J].TFlgsms;$.TFlgdeft=_[J].TFlgdeft;$.TFlgnous=_[J].TFlgnous;s.telephoneData.push($)}}}}}}if(n.FLFax){if(n.FLFax.results){var Z=n.FLFax.results;if(Z){if(Z.length>0){for(var X=0;X<Z.length;X++){if(c.Tplnr===Z[X].Funcloc){var Y={};Y.FCountry=Z[X].FCountry;Y.Telefto=Z[X].Telefto;Y.FNumber=Z[X].FNumber;Y.FExtens=Z[X].FExtens;Y.FFlgdeft=Z[X].FFlgdeft;Y.FFlgnous=Z[X].FFlgnous;s.faxData.push(Y)}}}}}}if(d[f].Modelname!==""){o.modelName=d[f].Modelname;o.modelDesc=d[f].Modeldesc;o.modelVer=d[f].Modelver;o.modelParKey=d[f].FlocRef;var i=new t(o);r.getView().setModel(i,"AIWModel")}r.setCommonApprovalData(r.oModelAIWFLOC,s,true);r.handleCreatePress(r,c,r.oModelAIWFLOC)}}}}if(e==="EQUITab"){u=sap.ui.getCore().getModel(r.oModelAIWEQUI).getData();if(u.length>0){return}if(n.Equipment){var ee=n.Equipment.results;if(ee){for(var te=0;te<ee.length;te++){s={intlAddr:[],classItems:[],characteristics:[],linearChar:[],emailAddress:[],urlAddress:[],telephoneData:[],faxData:[]};c={PRTInfo:{},dfps:{},FLEET:{},Stock:{},Partners:[],Permits:[],attachmentCount:"0",Guids:"",ConstrTypeMaxL:0,charValueMaxL:0,EqunrEnabled:false,EquipCatEnabled:false,MaintplantEnabled:false,BukrsEnabled:false,TplnrEnabled:false,SuperordinateEquipEnabled:false,DFPS:{}};c.Equnr=ee[te].Equnr;c.Eqktx=ee[te].Txtmi;c.EquipmentCatogory=ee[te].Eqtyp;c.EquipCatgDescription=ee[te].Etytx;c.ValidFrom=ee[te].DataEeqz;c.DatbEeqz=ee[te].DatbEeqz;c.LvormEqi=ee[te].LvormEqi;c.Deact=ee[te].Deact;c.DeactEnable=false;c.Stattext=ee[te].Stattext;c.UstaEqui=ee[te].UstaEqui;c.StsmEqui=ee[te].StsmEqui;c.StsmEquiDesc=ee[te].Statproftxt;c.UstwEqui=ee[te].UstwEqui;c.UswoEqui=ee[te].UswoEqui;c.TechnicalObjectTyp=ee[te].Eqart;c.Description=ee[te].Eartx;c.AuthorizGroup=ee[te].Begru;c.Begtx=ee[te].Begtx;c.GrossWt=ee[te].Brgew;c.Gewei=ee[te].Gewei;c.Invnr=ee[te].Invnr;c.GroesEqu=ee[te].GroesEqu;c.Inbdt=ee[te].Inbdt;c.Answt=ee[te].Answt;c.Waers=ee[te].Waers;c.Ansdt=ee[te].Ansdt;c.Herst=ee[te].Herst;c.Typbz=ee[te].Typbz;c.MapaEeqz=ee[te].MapaEeqz;c.Serge=ee[te].Serge;c.Herld=ee[te].Herld;c.CountryName=ee[te].CountryName;c.ConstructYear=ee[te].Baujj;c.ConstructMth=ee[te].BaummEqi;c.MonthName=ee[te].MonthName;c.Maintplant=ee[te].Swerk;c.MaintplantDesc=ee[te].Name1;c.Location=ee[te].StorEilo;c.Locationdesc=ee[te].Locationdesc;c.MsgrEilo=ee[te].MsgrEilo;c.Abckz=ee[te].AbckEilo;c.Abctx=ee[te].Abctx;c.BeberFl=ee[te].BebeEilo;c.Fing=ee[te].Fing;c.Tele=ee[te].Tele;c.EqfnEilo=ee[te].EqfnEilo;c.Bukrs=ee[te].BukrEilo;c.Butxt=ee[te].Butxt;c.GsbeEilo=ee[te].GsbeEilo;c.Gtext=ee[te].Gtext;c.Anl1Eilo=ee[te].Anl1Eilo;c.Anl2Eilo=ee[te].Anl2Eilo;c.AssesmentDesc=ee[te].Txt50;c.Kostl=ee[te].KostEilo;c.Kokrs=ee[te].KokrEilo;c.Mctxt=ee[te].Contareaname;c.Posid=ee[te].Posid;c.Post1=ee[te].Post1;c.DaufEilo=ee[te].DaufEilo;c.Standorderdesc=ee[te].Standorderdesc;c.Settlement=ee[te].AufnEilo;c.SettleOrdDesc=ee[te].SettleOrdDesc;c.Werks=ee[te].PplaEeqz;c.Planningplantdes=ee[te].Planningplantdes;c.Ingrp=ee[te].IngrEeqz;c.Innam=ee[te].Plannergrpdesc;c.Arbpl=ee[te].ArbpEilo;c.Ktext=ee[te].Workcenterdesc;c.WcWerks=ee[te].WorkCenterPlant;c.MainArbpl=ee[te].ArbpEeqz;c.MainKtext=ee[te].MainWcDesc;c.MainWerks=ee[te].MainWcPlant;c.RbnrEeqz=ee[te].RbnrEeqz;c.CatalogProfDesc=ee[te].Rbnrx;c.SuperordinateEquip=ee[te].HequEeqz;c.SuperordinateEquipDesc=ee[te].SuperordEqDes;c.EquipPosition=ee[te].HeqnEeqz;c.Liznr=ee[te].Liznr;c.TechIdNum=ee[te].TidnEeqz;c.ConstrType=ee[te].SubmEeqz;c.ConstructionDesc=ee[te].Constdesc;if(ee[te].Eqtyp!=="P"){c.Tplnr=ee[te].TplnEilo;c.Pltxt=ee[te].Flocdescription}else{c.Tplnr="";c.Pltxt=""}c.MatEqu=ee[te].MatEqu;c.Materialdesc=ee[te].Materialdesc;c.Sernr=ee[te].Sernr;c.Lsernr=ee[te].Lsernr;c.Kmatn=ee[te].Kmatn;c.Funcid=ee[te].Funcid;c.Frcfit=ee[te].Frcfit;c.Frcrmv=ee[te].Frcrmv;c.SubmEeqz=ee[te].SubmEeqz;c.Vkorg=ee[te].Vkorg;c.Vkorgtxt=ee[te].Vkorgtxt;c.Vtweg=ee[te].Vtweg;c.Vtwegtxt=ee[te].Vtwegtxt;c.Spart=ee[te].Spart;c.Sparttxt=ee[te].Sparttxt;c.Vkbur=ee[te].Vkbur;c.Vkburtxt=ee[te].Vkburtxt;c.Vkgrp=ee[te].Vkgrp;c.Vkgrptxt=ee[te].Vkgrptxt;c.CgwldtEq=ee[te].CgwldtEq;c.CgwlenEq=ee[te].CgwlenEq;c.CmganrEq=ee[te].CmganrEq;c.CwagetEq=ee[te].CwagetEq;c.CgaerbEq=ee[te].CgaerbEq;c.VgwldtEq=ee[te].VgwldtEq;c.VgwlenEq=ee[te].VgwlenEq;c.VmganrEq=ee[te].VmganrEq;c.VwagetEq=ee[te].VwagetEq;c.VgaerbEq=ee[te].VgaerbEq;c.EliefEqi=ee[te].EliefEqi;c.Kun1Eeqz=ee[te].Kun1Eeqz;c.Pstlz1=ee[te].Pstlz1;c.City1=ee[te].City1;c.Kun2Eeqz=ee[te].Kun2Eeqz;c.Pstlz2=ee[te].Pstlz2;c.City2=ee[te].City2;c.Kun3Eeqz=ee[te].Kun3Eeqz;c.Pstlz3=ee[te].Pstlz3;c.City3=ee[te].City3;c.AuldtEqi=ee[te].AuldtEqi;c.PstcdCcust=ee[te].PstcdCcust;c.LocatCcust=ee[te].LocatCcust;c.KundeEq=ee[te].KundeEq;c.Insdate=ee[te].Insdate===null?"":ee[te].Insdate;c.Instime=l.getTime(ee[te].Instime);c.Modelid=ee[te].Modelid;c.Modelname=ee[te].Modelnam;c.ModelDescription=ee[te].ModelDescription;c.Template=ee[te].Template;c.GlobalId=ee[te].GlobalId;c.Manuf=ee[te].Manuf;c.IsModel=ee[te].IsModel;c.CopyFrom=ee[te].CopyFrom;c.Modelid=ee[te].Modelid;c.Ppeguid=ee[te].Ppeguid;if(ee[te].Eqtyp==="L"&&n.EqLAM){var h=n.EqLAM.results;if(h){for(var S=0;S<h.length;S++){if(h[S].Equi===ee[te].Equnr){c.lam=h[S];c.lam.LrpidDesc=h[S].LrpDescr;c.lam.LinUnitDesc=h[S].Uomtext;break}}}}if(n.EqClass){var ae=n.EqClass.results;if(ae){if(ae.length>0){for(var re=0;re<ae.length;re++){if(c.Equnr===ae[re].Equi){ae[re].ctEnable=false;ae[re].classEnable=false;ae[re].ClassTypeDesc=ae[re].Artxt;delete ae[re].Artxt;ae[re].ClassDesc=ae[re].Kltxt;delete ae[re].Kltxt;delete ae[re].Changerequestid;delete ae[re].Clint;delete ae[re].Service;s.classItems.push(ae[re])}}}}}if(n.EqVal){var le=n.EqVal.results;if(le){if(le.length>0){for(var ne=0;ne<le.length;ne++){if(c.Equnr===le[ne].Equi){le[ne].cNameEnable=false;le[ne].Textbz=le[ne].Atwtb;delete le[ne].Ataut;delete le[ne].Ataw1;delete le[ne].Atawe;delete le[ne].Atcod;delete le[ne].Atflb;delete le[ne].Atflv;delete le[ne].Atimb;delete le[ne].Atsrt;delete le[ne].Atvglart;delete le[ne].Atzis;delete le[ne].Changerequestid;delete le[ne].Charid;delete le[ne].Classtype;delete le[ne].Service;delete le[ne].Valcnt;le[ne].slNo=I+1;le[ne].flag=le[ne].Class+"-"+le[ne].slNo;s.characteristics.push(le[ne])}}}}}if(n.EqLAMCH){var L=n.EqLAMCH.results;if(L){if(L.length>0){for(var y=0;y<L.length;y++){if(c.Equnr===L[y].Equi){L[y].linCharEnable=true;s.linearChar.push(L[y])}}}}}if(n.EqPRTNR){var se=n.EqPRTNR.results;if(se){if(se.length>0){for(var a=0;a<se.length;a++){if(c.Equnr===se[a].Equi){var oe={};oe.Partnrfun=se[a].Partnrfun;oe.Partnereq=se[a].Partnereq;oe.NameList=se[a].NameList;oe.Aadind=se[a].Aadind;oe.Address=se[a].Address;oe.Partnrfuntxt=se[a].Partnrfuntxt;c.Partners.push(oe)}}}}}if(n.EqPermt){var ie=n.EqPermt.results;if(ie){if(ie.length>0){for(var de=0;de<ie.length;de++){if(c.Equnr===ie[de].Equi){var ce={};ce.Countereq=ie[de].Countereq;ce.Pmsog=ie[de].Pmsog;ce.KAa=ie[de].KAa;ce.KAf=ie[de].KAf;ce.KDruck=ie[de].KDruck;ce.KPro=ie[de].KPro;ce.PmtLtext=ie[de].PmtLtext;c.Permits.push(ce)}}}}}if(n.EqPRT){if(n.EqPRT.results){var pe=n.EqPRT.results;if(pe){if(pe.length>0){for(var ue=0;ue<pe.length;ue++){if(c.Equnr===pe[ue].Equi){c.PRTInfo.PlanvPrt=pe[ue].PlanvPrt;c.PRTInfo.PlanvPrttxt=pe[ue].PlanvPrttxt;c.PRTInfo.Fgru1=pe[ue].Fgru1;c.PRTInfo.Fgru2=pe[ue].Fgru2;c.PRTInfo.Kzkbl=pe[ue].Kzkbl;c.PRTInfo.SteufPrt=pe[ue].SteufPrt;c.PRTInfo.SteufPrttxt=pe[ue].SteufPrttxt;c.PRTInfo.SteufRef=pe[ue].SteufRef;c.PRTInfo.KtschPrt=pe[ue].KtschPrt;c.PRTInfo.KtschPrttxt=pe[ue].KtschPrttxt;c.PRTInfo.Ktschref=pe[ue].Ktschref;c.PRTInfo.Ewformprt=pe[ue].Ewformprt;c.PRTInfo.Ewformprttxt=pe[ue].Ewformprttxt;c.PRTInfo.Ewformref=pe[ue].Ewformref;c.PRTInfo.Bzoffbprt=pe[ue].Bzoffbprt;c.PRTInfo.Bzoffbprttxt=pe[ue].Bzoffbprttxt;c.PRTInfo.Bzoffbref=pe[ue].Bzoffbref;c.PRTInfo.Offstb=pe[ue].Offstb;c.PRTInfo.Ehoffbprt=pe[ue].Ehoffbprt;c.PRTInfo.Offstbref=pe[ue].Offstbref;c.PRTInfo.Bzoffeprt=pe[ue].Bzoffeprt;c.PRTInfo.Bzoffeprttxt=pe[ue].Bzoffeprttxt;c.PRTInfo.Offsteref=pe[ue].Offsteref;c.PRTInfo.Offste=pe[ue].Offste;c.PRTInfo.Ehoffeprt=pe[ue].Ehoffeprt;c.PRTInfo.Offsteref=pe[ue].Offsteref;c.PRTInfo.Warpl=pe[ue].Warpl;c.PRTInfo.PointEq=pe[ue].PointEq}}}}}}if(n.EqFleet){if(n.EqFleet.results){var ge=n.EqFleet.results;if(ge){if(ge.length>0){for(var me=0;me<ge.length;me++){if(c.Equnr===ge[me].Equi){c.FLEET.FleetCat=ge[me].FleetCat;c.FLEET.FleetNum=ge[me].FleetNum;c.FLEET.LicenseN=ge[me].LicenseN;c.FLEET.ValidityEndDate=l.getDateFormat(ge[me].ExpiryDt);c.FLEET.FleetVin=ge[me].FleetVin;c.FLEET.Chasisnum=ge[me].Chasisnum;c.FLEET.FleetHgt=ge[me].FleetHgt;c.FLEET.DimUnit=ge[me].DimUnit;c.FLEET.FleetWid=ge[me].FleetWid;c.FLEET.FleetLen=ge[me].FleetLen;c.FLEET.BrgewFt=ge[me].BrgewFt;c.FLEET.GeweiFt=ge[me].GeweiFt;c.FLEET.GrossWgt=ge[me].GrossWgt;c.FLEET.LoadWgt=ge[me].LoadWgt;c.FLEET.LoadVol=ge[me].LoadVol;c.FLEET.VolUnit=ge[me].VolUnit;c.FLEET.LoadHgt=ge[me].LoadHgt;c.FLEET.Lddimunit=ge[me].Lddimunit;c.FLEET.LoadWid=ge[me].LoadWid;c.FLEET.LoadLen=ge[me].LoadLen;c.FLEET.Nocompart=ge[me].Nocompart;c.FLEET.FleetUse=ge[me].FleetUse;c.FLEET.CardNum=ge[me].CardNum;c.FLEET.KeyNum=ge[me].KeyNum;c.FLEET.NumAxle=ge[me].NumAxle;c.FLEET.Maxoccupa=ge[me].Maxoccupa;c.FLEET.FuelPri=ge[me].FuelPri;c.FLEET.FuelSec=ge[me].FuelSec;c.FLEET.OilType=ge[me].OilType;c.FLEET.Consumpmv=ge[me].Consumpmv;c.FLEET.Consumptl=ge[me].Consumptl;c.FLEET.PriCalc=ge[me].PriCalc;c.FLEET.Enginetyp=ge[me].Enginetyp;c.FLEET.Enginesnr=ge[me].Enginesnr;c.FLEET.SpeedMax=ge[me].SpeedMax;c.FLEET.Enginepow=ge[me].Enginepow;c.FLEET.Revlutons=ge[me].Revlutons;c.FLEET.Enginecap=ge[me].Enginecap;c.FLEET.Enginecyl=ge[me].Enginecyl;c.FLEET.ReplaDt=l.getDateFormat(ge[me].ReplaDt);c.FLEET.Enginecyl=ge[me].Enginecyl;c.FLEET.Enginecyl=ge[me].Enginecyl;c.FLEET.Replaodom=ge[me].Replaodom;c.FLEET.ReplaOph=ge[me].ReplaOph}}}}}}if(n.EqDFPS){if(n.EqDFPS.results){var fe=n.EqDFPS.results;if(fe){if(fe.length>0){for(var he=0;he<fe.length;he++){if(c.Equnr===fe[he].Equi){c.DFPS.MeOwner=fe[he].MeOwner;c.DFPS.MeUser=fe[he].MeUser;c.DFPS.DeviceId=fe[he].DeviceId;c.DFPS.Topsiteid=fe[he].Topsiteid;c.DFPS.Topsitede=fe[he].Topsitede;c.DFPS.SiteId=fe[he].SiteId;c.DFPS.SiteDesc=fe[he].SiteDesc;c.DFPS.MpoId=fe[he].MpoId;c.DFPS.MpoDescr=fe[he].MpoDescr;c.DFPS.RicId=fe[he].RicId;c.DFPS.RicDescr=fe[he].RicDescr;c.DFPS.ModelId=fe[he].ModelId;c.DFPS.ModelDes=fe[he].ModelDes;c.DFPS.Foreignob=fe[he].Foreignob;c.DFPS.TecState=fe[he].TecState;c.DFPS.DepState=fe[he].DepState;c.DFPS.DfpsRmrk=fe[he].DfpsRmrk}}}}}}if(n.EqStock){if(n.EqStock.results){var Se=n.EqStock.results[0];if(Se){if(Se.length>0){for(var Te=0;Te<Se.length;Te++){if(c.Equnr===Se[Te].Equi){c.Stock.Equilbbsa=Se[Te].Equilbbsa;c.Stock.BWerk=Se[Te].BWerk;c.Stock.BukrrsSk=Se[Te].BukrrsSk;c.Stock.Sloc2equi=Se[Te].Sloc2equi;c.Stock.Chrg2stk=Se[Te].Chrg2stk;c.Stock.Sobk2stk=Se[Te].Sobk2stk;c.Stock.Datlwb=l.getDateFormat(Se[Te].Datlwb);c.Stock.Kunnr=Se[Te].Kunnr;c.Stock.LifnrStc=Se[Te].LifnrStc;c.Stock.Kdauf=Se[Te].Kdauf;c.Stock.Kdpos=Se[Te].Kdpos;c.Stock.PsPspPn=Se[Te].PsPspPn}}}}}}if(n.EqAddr){if(n.EqAddr.results){var Me=n.EqAddr.results;if(Me){if(Me.length>0){for(var be=0;be<Me.length;be++){if(c.Equnr===Me[be].Equi){s.Title=Me[be].Titletxt;s.Name1=Me[be].Name1;s.Name2=Me[be].Name2;s.Name3=Me[be].Name3;s.Name4=Me[be].Name4;s.Sort1=Me[be].Sort1;s.Sort2=Me[be].Sort2;s.NameCo=Me[be].NameCo;s.Building=Me[be].Building;s.Floor=Me[be].Floor;s.Roomnum=Me[be].Roomnum;s.Street=Me[be].Street;s.HouseNr1=Me[be].HouseNr1;s.HouseNr2=Me[be].HouseNr2;s.Strsuppl1=Me[be].Strsuppl1;s.Strsuppl2=Me[be].Strsuppl2;s.Strsuppl3=Me[be].Strsuppl3;s.AddrLocation=Me[be].Location;s.District=Me[be].District;s.PostCod1=Me[be].PostCod1;s.City1=Me[be].City1;s.RPostafl=Me[be].RefPosta;s.Landx=Me[be].Landx;s.RfePost=Me[be].RfePost;s.Regiotxt=Me[be].Regiotxt;s.HomeCity=Me[be].HomeCity;s.TimeZone=Me[be].TimeZone;s.Taxjurcod=Me[be].Taxjurcod;s.Regiogrou=Me[be].Regiogrou;s.RfePostl=Me[be].RfePostl;s.Dontusestxt=Me[be].Dontusestxt;s.PoBox=Me[be].PoBox;s.PoboxNum=Me[be].PoboxNum;s.DlvsrvTy=Me[be].DlvsrvTy;s.DlvsrvNr=Me[be].DlvsrvNr;s.PostCod2=Me[be].PostCod2;s.PoboxLoc=Me[be].PoboxLoc;s.PoboxLby=Me[be].PoboxLby;s.PoboxCty=Me[be].PoboxCty;s.LandxP=Me[be].LandxP;s.RfePstal=Me[be].RfePstal;s.RegiotxtP=Me[be].RegiotxtP;s.Dontuseptxt=Me[be].Dontuseptxt;s.PostCod3=Me[be].PostCod3;s.Remark=Me[be].Remark}}}}}}var N=n.EqAddrI.results;if(N){for(var S=0;S<N.length;S++){if(N[S].Equi===c.Equnr){N[S].AdNationEnable=false;N[S].City1iVS="None";N[S].StreetiVS="None";s.intlAddr.push(N[S])}}}var Ee=n.AINHeaderinfo.results;if(Ee){for(var ve=0;ve<Ee.length;ve++){var Ce=Ee[0];var xe={};xe.Name=Ce.Name;xe.Modelid=Ce.Modelid;xe.Description=Ce.Description;xe.Manufacturer=Ce.Manufacturer;xe.Modeltemplate=Ce.Modeltemplate;xe.Globalid=Ce.Globalid;xe.moreInfo=true;xe.linkVisible=false;xe.deLinkVisible=false;xe.equiCreate=ee.AineqInd;xe.AinEqunr=ee.AinEqunr;sap.ui.getCore().getModel("ainMOP").getData().push({key:c.Equnr,AIN:xe})}}if(n.EqEmail){if(n.EqEmail.results){var Ve=n.EqEmail.results;if(Ve){if(Ve.length>0){for(var Pe=0;Pe<Ve.length;Pe++){if(c.Equnr===Ve[Pe].Equi){var Ie={};Ie.EAddress=Ve[Pe].EAddress;Ie.EFlgdeft=Ve[Pe].EFlgdeft;Ie.EFlgnous=Ve[Pe].EFlgnous;s.emailAddress.push(Ie)}}}}}}if(n.EqUrl){if(n.EqUrl.results){var Le=n.EqUrl.results;if(Le){if(Le.length>0){for(var ye=0;ye<Le.length;ye++){if(c.Equnr===Le[ye].Equi){var De={};De.Uritypetxt=Le[ye].Uritypetxt;De.UAddress=Le[ye].UAddress;De.UFlgdeft=Le[ye].UFlgdeft;De.UFlgnous=Le[ye].UFlgnous;s.urlAddress.push(De)}}}}}}if(n.EqTel){if(n.EqTel.results){var ke=n.EqTel.results;if(ke){if(ke.length>0){for(var R=0;R<ke.length;R++){if(c.Equnr===ke[R].Equi){var Fe={};Fe.Teltype=ke[R].Teltype;Fe.TCountry=ke[R].TCountry;Fe.Telefto=ke[R].Telefto;Fe.TNumber=ke[R].TNumber;Fe.TExtens=ke[R].TExtens;Fe.TFlgsms=ke[R].TFlgsms;Fe.TFlgdeft=ke[R].TFlgdeft;Fe.TFlgnous=ke[R].TFlgnous;s.telephoneData.push(Fe)}}}}}}if(n.EqFax){if(n.EqFax.results){var Ae=n.EqFax.results;if(Ae){if(Ae.length>0){for(var S=0;S<Ae.length;S++){if(c.Equnr===Ae[S].Equi){var we={};we.FCountry=Ae[S].FCountry;we.Telefto=Ae[S].Telefto;we.FNumber=Ae[S].FNumber;we.FExtens=Ae[S].FExtens;we.FFlgdeft=Ae[S].FFlgdeft;we.FFlgnous=Ae[S].FFlgnous;s.faxData.push(we)}}}}}}r.setCommonApprovalData(r.oModelAIWEQUI,s,true);r.handleCreatePress(r,c,r.oModelAIWEQUI)}}}}if(e==="MSPTTab"){g=sap.ui.getCore().getModel(r.oModelAIWMSPT).getData();if(g.length>0){return}if(n.MSPoint){var qe=n.MSPoint.results;if(qe){for(var We=0;We<qe.length;We++){s={classItems:[],characteristics:[]};c={attachmentCount:"0",Guids:"",MspointEnabled:false,ObtypMsEnabled:false,EqunrEnabled:false,TplnrEnabled:false,MptypEnabled:false,AtnamMsEnabled:false,countEnable:true,tEnable:true,valCodeStuffSel:false};c.Mspoint=qe[We].Point;c.Psort=qe[We].Psort;c.Pttxt=qe[We].Pttxt;c.ObtypMs=qe[We].ObtypMs;c.Txt=qe[We].Objtypetxt;c.Equnr=qe[We].Equnr;c.Eqktx=qe[We].Eqktx;c.Tplnr=qe[We].Tplnr;c.Pltxt=qe[We].Floctxt;c.Mptyp=qe[We].Mptyp;c.Mpttx=qe[We].Mpttx;c.Inact=qe[We].Inact;c.AtnamMs=qe[We].AtnamMs;c.Atbez=qe[We].Atbez;c.Mseh6=qe[We].Mseh6;c.Msehl=qe[We].Msehl;c.Decim=qe[We].Decim.toString();c.Codgr=qe[We].Codgr;c.Codgrtxt=qe[We].Codgrtxt;c.Locas=qe[We].Locas;c.Maktx=qe[We].Maktx;c.Begru=qe[We].Begru;c.Begtx=qe[We].Begtx;c.Indct=qe[We].Indct;c.Expon=qe[We].Expon;c.Cdsuf=qe[We].Cdsuf;c.Cjumc=qe[We].Cjumc;c.Pyeac=qe[We].Pyeac;c.Desir=qe[We].Desir;c.Mrngu=qe[We].Mrngu;c.Dstxt=qe[We].Dstxt;c.Indrv=qe[We].Indrv;c.Mrmax=qe[We].Mrmax;c.Mrmin=qe[We].Mrmin;c.Deact=qe[We].Inact;c.DeactEnable=false;c.readTransfSel=qe[We].Indtr;c.readTransf=qe[We].Trans;if(qe[We].Equnr!==""){c.EqunrLblVis=true;c.EqunrInpVis=true;c.EqktxInpVis=true;c.TplnrLblVis=false;c.TplnrInpVis=false;c.PltxtInpVis=false}else{c.EqunrLblVis=false;c.EqunrInpVis=false;c.EqktxInpVis=false;c.TplnrLblVis=true;c.TplnrInpVis=true;c.PltxtInpVis=true}if(qe[We].Mptyp==="L"&&n.MSLAM.results.length>0){var h=n.MSLAM.results;if(h){for(var S=0;S<h.length;S++){if(h[S].Mspoint===qe[We].Point){c.lam=h[S];c.lam.LrpidDesc=h[S].LrpDescr;c.lam.LinUnitDesc=h[S].Uomtext;break}}}}if(n.MSClass){var Be=n.MSClass.results;if(Be){if(Be.length>0){for(var y=0;y<Be.length;y++){if(c.Mspoint===Be[y].Mspoint){Be[y].ctEnable=false;Be[y].classEnable=false;Be[y].ClassTypeDesc=Be[y].Artxt;delete Be[y].Artxt;Be[y].ClassDesc=Be[y].Kltxt;delete Be[y].Kltxt;delete Be[y].Changerequestid;delete Be[y].Clint;delete Be[y].Service;s.classItems.push(Be[y])}}}}}if(n.MSVal){var Ne=n.MSVal.results;if(Ne){if(Ne.length>0){for(var Oe=0;Oe<Ne.length;Oe++){if(c.Mspoint===Ne[Oe].Mspoint){Ne[Oe].cNameEnable=false;Ne[Oe].Textbz=Ne[Oe].Atwtb;delete Ne[Oe].Ataut;delete Ne[Oe].Ataw1;delete Ne[Oe].Atawe;delete Ne[Oe].Atcod;delete Ne[Oe].Atflb;delete Ne[Oe].Atflv;delete Ne[Oe].Atimb;delete Ne[Oe].Atsrt;delete Ne[Oe].Atvglart;delete Ne[Oe].Atzis;delete Ne[Oe].Changerequestid;delete Ne[Oe].Charid;delete Ne[Oe].Classtype;delete Ne[Oe].Service;delete Ne[Oe].Valcnt;Ne[Oe].slNo=Oe+1;Ne[Oe].flag=Ne[Oe].Class+"-"+Ne[Oe].slNo;s.characteristics.push(Ne[Oe])}}}}}r.setCommonApprovalData(r.oModelAIWMSPT,s);r.handleCreatePress(r,c,r.oModelAIWMSPT)}}}}if(e==="MPMITab"){m=sap.ui.getCore().getModel(r.oModelAIWMPMI).getData();if(m.length>0){return}if(n.MPLAN){var Re=n.MPLAN.results;if(Re){for(var ve=0;ve<Re.length;ve++){s={classItems:[],characteristics:[]};c={attachmentCount:"0",Guids:"",cycleModel:[],itemModel:[],cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,WarplEnabled:false,StratEnabled:false,WsetEnabled:false,MehrfachEnabled:false,ScheIndRbTimeEnabled:false,ScheIndRbTimeKeyDateEnabled:false,ScheIndRbTimeFactCalEnabled:false,ScheIndRbPerformanceEnabled:false,MptypEnabled:false,cycleIndSingleEnabled:false,cycleIndStrategyEnabled:false,cycleIndMultCntrEnabled:false,FabklLBLReq:false,ButtonNewCycleEnabled:false,FabklEnabled:false,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,MaintenanceCycleMode:"None"};if(Re[ve].Stich!==""||Re[ve].Stich===undefined){c.Stich=parseInt(Re[ve].Stich)}else{c.Stich=0}c.Warpl=Re[ve].Warpl;c.Wptxt=Re[ve].Wptxt;c.Mptyp=Re[ve].Mptyp;c.Txt=Re[ve].Mplancatdesc;c.Strat=Re[ve].Strat;c.StratDesc=Re[ve].StratDesc;c.Puffp=Re[ve].Puffp;c.Deact=Re[ve].InactMp;c.DeactEnable=false;if(Re[ve].Mehrfach==="X"||Re[ve].Stich==="4"){c.cycleType=2;c.cycleSetSeqColVis=true;c.CycleSetSeqVis=true;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.OPText=true;c.OPTitle=true;c.OPLBL=true;c.OROPVis=true;c.AndOPvis=true;c.WsetLBL=true;c.WsetVis=true;c.KtextVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.MehrfachLBL=true;c.MehrfachVis=true;c.Mehrfach=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_STDATE");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndMultCntr=true}else if(Re[ve].Strat===""&&(Re[ve].Stich===""||Re[ve].Stich==="1"||Re[ve].Stich==="2")){c.cycleType=0;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndSingle=true}else if(Re[ve].Strat!==""&&Re[ve].Stich==="3"){c.cycleType=1;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.StadtLBL=false;c.StadtVis=false;c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.MpcyclenoLBL=true;c.MpcyclenoVis=true;c.cycleIndStrateg=true;r.readScheduling(Re[ve],Re[ve].Strat,r.oModelAIWMPMI)}else if(Re[ve].Strat.indexOf("TIME")>-1&&Re[ve].Mehrfach===""&&Re[ve].Stich!=="3"){c.cycleType=1;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.Strat=Re[ve].Strat;c.StadtLBL=true;c.StadtVis=true;c.Stadt=l.getDateFormat(Re[ve].Startdate);c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndStrateg=true;r.readScheduling(Re[ve],Re[ve].Strat,r.oModelAIWMPMI)}else if(Re[ve].Strat===""&&Re[ve].Stich==="3"&&Re[ve].Mehrfach===""){c.cycleIndSingle=true;c.cycleType=0;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.StadtLBL=false;c.StadtVis=false;c.StadtLBLText=r.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.Unitc=" ";c.MpcyclenoLBL=true;c.MpcyclenoVis=true}c.Stadt=l.getDateFormat(Re[ve].Startdate);c.Unitc=Re[ve].Unitc;c.Fabkl=Re[ve].Fabkl;c.FabklDesc=Re[ve].FabklDesc;if(Re[ve].Stich==="1"){c.ScheIndRbTimeKeyDate=true}else if(Re[ve].Stich==="2"){c.ScheIndRbTimeFactCal=true}else if(Re[ve].Stich==="3"){c.ScheIndRbPerformance=true}else if(Re[ve].Stich===""||Re[ve].Stich===" "){c.ScheIndRbTime=true}c.Wset=Re[ve].Wset;c.Ktext=Re[ve].Ktext;c.Sfakt=Re[ve].Sfakt;c.Abrho=Re[ve].Abrho;c.Hunit=Re[ve].Hunit;c.StratDesc=Re[ve].StratDesc;c.Szaeh=Re[ve].Szaeh;c.Mpcycleno=Re[ve].PointStp;c.Andor=Re[ve].Andor;if(Re[ve].PointStp!==""){c.Unitc=Re[ve].Unitc}if(Re[ve].Andor==="X"){c.AndOP=true}else{c.OROP=true}if(c.Mehrfach===true||(c.Wset!==""||c!==undefined)){c.HorizVisible=false}else{c.HorizVisible=true}c.Vspos=Re[ve].Vspos;c.Topos=Re[ve].Topos;c.Vsneg=Re[ve].Vsneg;c.Toneg=Re[ve].Toneg;c.Horiz=Re[ve].Horiz;c.CallConf=Re[ve].CallConf;c.PlanSort=Re[ve].PlanSort;c.Begru=Re[ve].Begru;if(n.MPCycle){var Ue=n.MPCycle.results;if(Ue){for(var ze=0;ze<Ue.length;ze++){if(c.Warpl===Ue[ze].Mplan){Ue[ze].Psort=Ue[ze].PointTxt;c.cycleModel.push(Ue[ze])}}}}if(n.MPItem){var Ke=n.MPItem.results;if(Ke){var He=[];for(var Ge=0;Ge<Ke.length;Ge++){if(c.Warpl===Ke[Ge].Mplan){var je={};je.Mitemnumb=Ke[Ge].Mitemnumb;je.Pstxt=Ke[Ge].Pstxt;je.Cycleseq=Ke[Ge].Cycleseq;je.Tplnr=Ke[Ge].TplnrMi;je.Pltxt=Ke[Ge].Flocdesc;je.Equnr=Ke[Ge].Equnr;je.Eqktx=Ke[Ge].Equipdesc;je.AsmblyOb=Ke[Ge].Bautl;je.Assemblydesc=Ke[Ge].Assemblydesc;je.Serialnr=Ke[Ge].Serialnr;je.Sermat=Ke[Ge].Sermat;je.UiiMitem=Ke[Ge].UiiMitem;je.Deviceid=Ke[Ge].Deviceid;je.Werks=Ke[Ge].PlntMi;je.Planningplantdes=Ke[Ge].Planningplantdes;je.Auart=Ke[Ge].Auart;je.oTypeTxt=Ke[Ge].Ordertypedesc;je.Qmart=Ke[Ge].Qmart;je.nTypeTxt=Ke[Ge].Qmartx;je.ArbpMi=Ke[Ge].ArbpMi;je.WergwMi=Ke[Ge].WergwMi;je.Ingrp=Ke[Ge].IngrpMi;je.Innam=Ke[Ge].Plannergrpdesc;var Qe=Ke[Ge].ItmPriotxt;Qe=Qe.substr(Qe.indexOf(" ")+1);je.Zeieh=Ke[Ge].Zeieh;je.Priok=Ke[Ge].Priok;je.ItmPriotxt=Qe;je.GsberMi=Ke[Ge].GsberMi;je.Gtext=Ke[Ge].Gtext;je.TaskDet=Ke[Ge].TaskDet;je.Ilart=Ke[Ge].Ilart;je.Ilatx=Ke[Ge].Ilatx;je.PlntyMi=Ke[Ge].PlntyMi;je.ApfktMi=Ke[Ge].ApfktMi;je.PlnnrMi=Ke[Ge].PlnnrMi;je.PlnalMi=Ke[Ge].PlnalMi;je.Gpcounterdesc=Ke[Ge].Gpcounterdesc;je.AnlzuMi=Ke[Ge].AnlzuMi;je.Anlzux=Ke[Ge].Anlzux;je.SwerkMil=Ke[Ge].SwerkMil;je.Name1=Ke[Ge].Name1;je.StortMil=Ke[Ge].StortMil;je.Locationdesc=Ke[Ge].Locationdesc;je.MsgrpIl=Ke[Ge].MsgrpIl;je.BeberMil=Ke[Ge].BeberMil;je.Fing=Ke[Ge].Fing;je.Tele=Ke[Ge].Tele;je.ArbplIl=Ke[Ge].ArbplIl;je.Workcenterdesc=Ke[Ge].Workcenterdesc;je.AbckzIl=Ke[Ge].AbckzIl;je.Abctx=Ke[Ge].Abctx;je.EqfnrIl=Ke[Ge].EqfnrIl;je.BukrsMil=Ke[Ge].BukrsMil;je.Butxt=Ke[Ge].Butxt;je.City=Ke[Ge].City;je.Anln1Mil=Ke[Ge].Anln1Mil;je.Anln2Mil=Ke[Ge].Anln2Mil;je.Txt50=Ke[Ge].Txt50;je.GsberIl=Ke[Ge].GsberIl;je.KostlMil=Ke[Ge].KostlMil;je.Contareaname=Ke[Ge].Contareaname;je.KokrsMil=Ke[Ge].KokrsMil;je.Posid=Ke[Ge].Posid;je.Post1=Ke[Ge].Post1;je.AufnrIl=Ke[Ge].AufnrIl;je.SettleOrdDesc=Ke[Ge].SettleOrdDesc;je.PlnnrMi=Ke[Ge].PlnnrMi;je.PlntyMi=Ke[Ge].PlntyMi;je.PlnalMi=Ke[Ge].PlnalMi;je.enableLoc=false;je.QmartLBL=true;je.QmartVis=true;je.nTypetxtVis=true;je.AuartLBL=true;je.AuartVis=true;je.oTypeTxtVis=true;je.CycleseqLBL=false;je.CycleseqVis=false;je.AsmblyObMaxLength=0;je.maintItemE=false;je.cycleSetE=false;je.TplnrEnabled=false;je.equiE=false;je.assemblyE=false;je.CycleseqVS="None";je.CycleseqVST="";je.TplnrVS="None";je.TplnrVST="";je.EqunrVS="None";je.EqunrVST="";je.AsmblyObVS="None";je.AsmblyObVST="";je.WerksVS="None";je.WerksVST="";je.AuartVS="None";je.AuartVST="";je.QmartVS="None";je.QmartVST="";je.ArbpMiVS="None";je.ArbpMiVST="";je.WergwMiVS="None";je.WergwMiVST="";je.IngrpVS="None";je.IngrpVST="";je.enableLoc=false;var _e=n.MPLAM.results;if(_e){for(var S=0;S<_e.length;S++){if(_e[S].Mplan===Ke[Ge].Mplan&&_e[S].Mitemnumb===Ke[Ge].Mitemnumb){var Je=_e[S];Je.LrpidDesc=_e[S].LrpDescr;Je.LinUnitDesc=_e[S].Uomtext;je.lam=Je;break}}}He.push(je)}}c.itemModel=He}}if(n.MPOBList){var $e=n.MPOBList.results;if($e){var Ze=[];for(var We=0;We<$e.length;We++){if(c.Warpl===$e[We].Mplan){var je={};je.Warpl=$e[We].Mplan;je.Mitemnumb=$e[We].Mitemnumb;je.MatnrObj=$e[We].MatnrObj;je.FlocObj=$e[We].FlocObj;je.EquiObj=$e[We].EquiObj;je.AsmblyOb=$e[We].AsmblyOb;je.Matnrtxt=$e[We].Matnrtxt;je.Equnrtxt=$e[We].Equnrtxt;je.Tplnrtxt=$e[We].Tplnrtxt;je.Bautltxt=$e[We].Bautltxt;je.Enable=false;Ze.push(je)}}c.ObjListItems=Ze}}if(n.ClassMpl){var Be=n.ClassMpl.results;if(Be){if(Be.length>0){for(var y=0;y<Be.length;y++){if(c.Warpl===Be[y].Mplan){Be[y].ctEnable=false;Be[y].classEnable=false;Be[y].ClassTypeDesc=Be[y].Artxt;delete Be[y].Artxt;Be[y].ClassDesc=Be[y].Kltxt;delete Be[y].Kltxt;delete Be[y].Changerequestid;delete Be[y].Clint;delete Be[y].Service;s.classItems.push(Be[y])}}}}}if(n.ValuaMpl){var Ne=n.ValuaMpl.results;if(Ne){if(Ne.length>0){for(var Oe=0;Oe<Ne.length;Oe++){if(c.Warpl===Ne[Oe].Mplan){Ne[Oe].cNameEnable=false;Ne[Oe].Textbz=Ne[Oe].Atwtb;delete Ne[Oe].Ataut;delete Ne[Oe].Ataw1;delete Ne[Oe].Atawe;delete Ne[Oe].Atcod;delete Ne[Oe].Atflb;delete Ne[Oe].Atflv;delete Ne[Oe].Atimb;delete Ne[Oe].Atsrt;delete Ne[Oe].Atvglart;delete Ne[Oe].Atzis;delete Ne[Oe].Changerequestid;delete Ne[Oe].Charid;delete Ne[Oe].Classtype;delete Ne[Oe].Service;delete Ne[Oe].Valcnt;Ne[Oe].slNo=Oe+1;Ne[Oe].flag=Ne[Oe].Class+"-"+Ne[Oe].slNo;s.characteristics.push(Ne[Oe])}}}}}r.setCommonApprovalData(r.oModelAIWMPMI,s);r.handleCreatePress(r,c,r.oModelAIWMPMI)}}}}if(e==="MBOMTab"){var Xe=sap.ui.getCore().getModel("AIWListMatModel").getData();if(Xe.length>0){return}var Ye=a.results[0].MRBHeader.results;for(var We=0;We<Ye.length;We++){var et={};et.Matnr=Ye[We].Matnr;et.Werks=Ye[We].Werks;et.Stlan=Ye[We].Stlan;et.Stalt=Ye[We].Stalt;et.Bomstatus=Ye[We].Bomstatus;et.Lngtxt=Ye[We].Txtmi;et.Validfrom=r.getDateFormat(Ye[We].Validfrom);et.BaseQty=Ye[We].Baseqty;et.BaseUom=Ye[We].Baseuom;et.Validtoda=r.getDateFormat(Ye[We].Validtoda);et.MatDesc=Ye[We].Maktx;et.WerksDesc=Ye[We].Plantname;et.StlanDesc=Ye[We].Bomusagetxt;et.BomstatusText=Ye[We].Bomstatustxt;et.Stktx=Ye[We].Stktx;et.matEnable=false;et.plantEnable=false;et.usageEnable=false;et.altbomEnable=false;et.LngtxtEnable=false;et.BomstatusEnable=false;et.BaseQtyEnable=false;et.fromDateEnable=false;et.addItemEnable=false;et.modeFlag="None";et.Authgroup=Ye[We].Authgroup;et.Sizdim=Ye[We].Sizdim;et.Labofc=Ye[We].Labofc;et.Labortxt=Ye[We].Labortxt;et.Stalt=Ye[We].Stalt;et.Flbomsub="";et.Delflg="";et.Invnr="";et.Herst="";et.Htypb="";et.Serge="";et.matItem=[];et.matSubItem=[];var tt=a.results[0].MRBItem.results;if(tt.length>0){for(var y=0;y<tt.length;y++){if(tt[y].Matnr===et.Matnr&&tt[y].Werks===et.Werks&&tt[y].Stlan===et.Stlan){tt[y].addSubItmEnable=false;tt[y].Pmper="-";tt[y].Pmpka="-";tt[y].Pmprv="-";tt[y].Pmpfe="-";tt[y].Pmpin="-";tt[y].Pmpko="-";et.matItem.push(tt[y])}}}else{et.matItem=[]}var at=a.results[0].MRBSBIT.results;if(at.length>0){for(var Oe=0;Oe<at.length;Oe++){if(at[Oe].Matnr===et.Matnr&&at[Oe].Werks===et.Werks&&at[Oe].Stlan===et.Stlan){at[Oe].intPointEnable=false;at[Oe].subQtyEnable=false;at[Oe].subTextEnable=false;et.matSubItem.push(at[Oe])}}}else{et.matSubItem=[]}Xe.push(et)}sap.ui.getCore().getModel("AIWListMatModel").setSizeLimit(Xe.length);sap.ui.getCore().getModel("AIWListMatModel").refresh();r.updateCount("MaterialBom",Xe)}if(e==="EBOMTab"){var rt=sap.ui.getCore().getModel("AIWListEqModel").getData();if(rt.length>0){return}var lt=a.results[0].EBHeader.results;for(var We=0;We<lt.length;We++){var nt={};nt.Eqnrbom=lt[We].Eqnrbom;nt.Werks=lt[We].Werks;nt.Stlan=lt[We].Stlan;nt.Bomstatus=lt[We].Bomstatus;nt.Lngtxt=lt[We].Txtmi;nt.Validfrom=r.getDateFormat(lt[We].Validfrom);nt.BaseQty=lt[We].Baseqty;nt.BaseUom=lt[We].Baseuom;nt.Validtoda=r.getDateFormat(lt[We].Validtoda);nt.EquiDesc=lt[We].Eqktx;nt.WerksDesc=lt[We].Plantname;nt.StlanDesc=lt[We].Bomusagetxt;nt.BomstatusText=lt[We].Bomstatustxt;nt.equipEnable=false;nt.plantEnable=false;nt.usageEnable=false;nt.LngtxtEnable=false;nt.fromDateEnable=false;nt.BomstatusEnable=false;nt.BaseQtyEnable=false;nt.addItemEnable=false;nt.modeFlag="None";nt.Authgroup=lt[We].Authgroup;nt.Sizdim=lt[We].Sizdim;nt.Labofc=lt[We].Labofc;nt.Labortxt=lt[We].Labortxt;nt.Delflg=lt[We].Delflg;nt.Invnr=lt[We].Invnr;nt.Herst=lt[We].Herst;nt.Htypb=lt[We].Htypb;nt.Serge=lt[We].Serge;nt.Flbomsub="";nt.Stalt="";nt.Stktx="";nt.eqItem=[];nt.eqSubItem=[];var st=a.results[0].EBItem.results;if(st.length>0){for(var y=0;y<st.length;y++){if(st[y].Eqnrbom===nt.Eqnrbom&&st[y].Werks===nt.Werks&&st[y].Stlan===nt.Stlan){st[y].addSubItmEnable=false;st[y].Pmper="-";st[y].Pmpka="-";st[y].Pmprv="-";st[y].Pmpfe="-";st[y].Pmpin="-";st[y].Pmpko="-";nt.eqItem.push(st[y])}}}else{nt.eqItem=[]}var ot=a.results[0].EBSBIT.results;if(ot.length>0){for(var Oe=0;Oe<ot.length;Oe++){if(ot[Oe].Eqnrbom===nt.Eqnrbom&&ot[Oe].Werks===nt.Werks&&ot[Oe].Stlan===nt.Stlan){ot[Oe].intPointEnable=false;ot[Oe].subQtyEnable=false;ot[Oe].subTextEnable=false;nt.eqSubItem.push(ot[Oe])}}}else{nt.eqSubItem=[]}rt.push(nt)}sap.ui.getCore().getModel("AIWListEqModel").setSizeLimit(rt.length);sap.ui.getCore().getModel("AIWListEqModel").refresh();r.updateCount("EquipmentBom",rt)}if(e==="FLBOMTab"){var it=sap.ui.getCore().getModel("AIWListFLModel").getData();if(it.length>0){return}var dt=a.results[0].FBHeader.results;for(var We=0;We<dt.length;We++){var ct={};ct.Tplnrbom=dt[We].Tplnrbom;ct.Werks=dt[We].Werks;ct.Stlan=dt[We].Stlan;ct.Bomstatus=dt[We].Bomstatus;ct.Lngtxt=dt[We].Txtmi;ct.Validfrom=r.getDateFormat(dt[We].Validfrom);ct.BaseQty=dt[We].Baseqty;ct.BaseUom=dt[We].Baseuom;ct.Validtoda=r.getDateFormat(dt[We].Validtoda);ct.FLDesc=dt[We].Pltxt;ct.WerksDesc=dt[We].Plantname;ct.StlanDesc=dt[We].Bomusagetxt;ct.BomstatusText=dt[We].Bomstatustxt;ct.FLEnable=false;ct.plantEnable=false;ct.usageEnable=false;ct.LngtxtEnable=false;ct.fromDateEnable=false;ct.BomstatusEnable=false;ct.BaseQtyEnable=false;ct.addItemEnable=false;ct.modeFlag="None";ct.Authgroup=dt[We].Authgroup;ct.Sizdim=dt[We].Sizdim;ct.Flbomsub=dt[We].Flbomsub;ct.Labofc=dt[We].Labofc;ct.Labortxt=dt[We].Labortxt;ct.Stalt="";ct.Delflg="";ct.Invnr="";ct.Herst="";ct.Htypb="";ct.Serge="";ct.Stktx="";ct.flItem=[];ct.flSubItem=[];var pt=a.results[0].FBItem.results;if(pt.length>0){for(var y=0;y<pt.length;y++){if(pt[y].Tplnrbom===ct.Tplnrbom&&pt[y].Werks===ct.Werks&&pt[y].Stlan===ct.Stlan){pt[y].addSubItmEnable=false;pt[y].Pmper="-";pt[y].Pmpka="-";pt[y].Pmprv="-";pt[y].Pmpfe="-";pt[y].Pmpin="-";pt[y].Pmpko="-";ct.flItem.push(pt[y])}}}else{ct.flItem=[]}var ut=a.results[0].FBSBIT.results;if(ut.length>0){for(var Oe=0;Oe<ut.length;Oe++){if(ut[Oe].Tplnrbom===ct.Tplnrbom&&ut[Oe].Werks===ct.Werks&&ut[Oe].Stlan===ct.Stlan){ut[Oe].intPointEnable=false;ut[Oe].subQtyEnable=false;ut[Oe].subTextEnable=false;ct.flSubItem.push(ut[Oe])}}}else{ct.flSubItem=[]}it.push(ct)}sap.ui.getCore().getModel("AIWListFLModel").setSizeLimit(it.length);sap.ui.getCore().getModel("AIWListFLModel").refresh();r.updateCount("FLBom",it)}if(e==="WBSBOMTab"){var gt=sap.ui.getCore().getModel("AIWListWBSModel").getData();if(gt.length>0){return}var mt=a.results[0].WBHeader.results;for(var We=0;We<mt.length;We++){var ft={};ft.WbsExt=mt[We].WbsExt;ft.Matnr=mt[We].MatnrWbs;ft.Werks=mt[We].Werks;ft.Stlan=mt[We].Stlan;ft.Bomstatus=mt[We].Bomstatus;ft.Lngtxt=mt[We].Txtmi;ft.Validfrom=r.getDateFormat(mt[We].Validfrom);ft.BaseQty=mt[We].Baseqty;ft.BaseUom=mt[We].Baseuom;ft.Validtoda=r.getDateFormat(mt[We].Validtoda);ft.WbsDesc=mt[We].Post1;ft.MatDesc=mt[We].Maktx;ft.WerksDesc=mt[We].Plantname;ft.StlanDesc=mt[We].Bomusagetxt;ft.BomstatusText=mt[We].Bomstatustxt;ft.wbsEnable=false;ft.matEnable=false;ft.plantEnable=false;ft.usageEnable=false;ft.LngtxtEnable=false;ft.fromDateEnable=false;ft.BomstatusEnable=false;ft.BaseQtyEnable=false;ft.addItemEnable=false;ft.modeFlag="None";ft.Authgroup=mt[We].Authgroup;ft.Sizdim=mt[We].Sizdim;ft.Labofc=mt[We].Labofc;ft.Labortxt=mt[We].Labortxt;ft.Stalt="";ft.Flbomsub="";ft.Delflg="";ft.Invnr="";ft.Herst="";ft.Htypb="";ft.Serge="";ft.Stktx="";ft.wbsItem=[];ft.wbsSubItem=[];var ht=a.results[0].WBItem.results;if(ht.length>0){for(var y=0;y<ht.length;y++){if(ht[y].MatnrWbs===ft.Matnr&&ht[y].Werks===ft.Werks&&ht[y].Stlan===ft.Stlan){ht[y].addSubItmEnable=false;ht[y].Pmper="-";ht[y].Pmpka="-";ht[y].Pmprv="-";ht[y].Pmpfe="-";ht[y].Pmpin="-";ht[y].Pmpko="-";ft.wbsItem.push(ht[y])}}}else{ft.wbsItem=[]}var St=a.results[0].WBSBIT.results;if(St.length>0){for(var Oe=0;Oe<St.length;Oe++){if(St[Oe].MatnrWbs===ft.Matnr&&St[Oe].Werks===ft.Werks&&St[Oe].Stlan===ft.Stlan){St[Oe].intPointEnable=false;St[Oe].subQtyEnable=false;St[Oe].subTextEnable=false;ft.wbsSubItem.push(St[Oe])}}}else{ft.wbsSubItem=[]}gt.push(ft)}sap.ui.getCore().getModel("AIWListWBSModel").setSizeLimit(gt.length);sap.ui.getCore().getModel("AIWListWBSModel").refresh();r.updateCount("WbsBom",gt)}if(e==="ON"){var Tt=sap.ui.getCore().getModel("AIWListONModel").getData();if(Tt.length>0){return}var Mt={};var bt=a.results[0].ONetwork.results;for(var We=0;We<bt.length;We++){Mt={};Mt.Objnetwrk=bt[We].Objnetwrk;Mt.Netgrp=bt[We].Netgrp;Mt.Netwtyp=bt[We].Netwtyp;Mt.Netxt=bt[We].Netxt;Mt.NetgrpDesc=bt[We].NetgroupTxt;Mt.NetwtypDesc=bt[We].NettypeTxt;Mt.NetIDEnable=false;Mt.Ntobjtyp=bt[We].Ntobjtyp;var Et=a.results[0].ONLAM.results;if(Et){for(var y=0;y<Et.length;y++){if(Et[y].Objnetwrk===bt[We].Objnetwrk){Mt.lam=Et[y];Mt.lam.LrpidDesc=Et[y].LrpDescr;Mt.lam.LinUnitDesc=Et[y].Uomtext;break}}}Tt.push(Mt)}sap.ui.getCore().getModel("AIWListONModel").setSizeLimit(Tt.length);sap.ui.getCore().getModel("AIWListONModel").refresh();r.updateCount("ObjNet",Tt);r.disableFields(e)}if(e==="WCTab"){if(n.Workcenter){var vt=n.Workcenter.results;if(vt){for(var Pe=0;Pe<vt.length;Pe++){var s={classItems:[],characteristics:[]};var Ct={};Ct=vt[Pe];Ct.wc=vt[Pe].Arbpl;Ct.wcDesc=vt[Pe].Txtmi;Ct.plant=vt[Pe].Werks;Ct.plantDesc=vt[Pe].Plantdesc;Ct.wcCat=vt[Pe].Verwe;Ct.wcCatDesc=vt[Pe].Ktext;Ct.person=vt[Pe].Crveran;Ct.personDesc=vt[Pe].Persresptxt;Ct.usg=vt[Pe].Planv;Ct.usgDesc=vt[Pe].UsageTxt;Ct.stdVal=vt[Pe].Vgwts;Ct.stdValDesc=vt[Pe].Vgwtx;Ct.ctrlKey=vt[Pe].Crsteus;Ct.ctrlKeyDesc=vt[Pe].Steutxt;Ct.wcValueState="None";Ct.wcDescValueState="None";Ct.plantValueState="None";Ct.wcCatValueState="None";Ct.personResValueState="None";Ct.usgValueState="None";Ct.stdValueState="None";Ct.cntrlKeyValueState="None";Ct.wcValueStateTxt="";Ct.wcDescValueStateTxt="";Ct.plantValueStateTxt="";Ct.wcCatValueStateTxt="";Ct.personResValueStateTxt="";Ct.usgValueStateTxt="";Ct.stdValueStateTxt="";Ct.cntrlKeyValueStateTxt="";Ct.enable=false;Ct.wcEnable=false;Ct.plEnable=false;Ct.wcatEnable=false;Ct.cost=[];Ct.capacity=[];var xt=n.WCCost.results;if(xt){if(xt.length>0){var Vt=[];for(var I=0;I<xt.length;I++){if(Ct.wc===xt[I].Arbpl){Vt.push(xt[I])}}var Pt=new sap.ui.model.json.JSONModel;Pt.setData(xt);Ct.cost=Vt}}var It=n.WCCapa.results;if(It){var Lt=[];if(It.length>0){for(var yt=0;yt<It.length;yt++){if(Ct.wc===It[yt].Arbpl){Lt.push(It[yt])}}var Dt=new sap.ui.model.json.JSONModel;Dt.setData(It);Ct.capacity=It}}var kt=n.ClassWC.results;if(kt){if(kt.length>0){for(var We=0;We<kt.length;We++){kt[We].ctEnable=false;kt[We].classEnable=false;kt[We].ClassTypeDesc=kt[We].Artxt;delete kt[We].Artxt;kt[We].ClassDesc=kt[We].Kltxt;delete kt[We].Kltxt;delete kt[We].Changerequestid;delete kt[We].Clint;delete kt[We].Service;s.classItems.push(kt[We])}}}var Ft=n.ValueWC.results;if(Ft){if(Ft.length>0){for(var y=0;y<Ft.length;y++){Ft[y].cNameEnable=false;delete Ft[y].Ataut;delete Ft[y].Ataw1;delete Ft[y].Atawe;delete Ft[y].Atcod;delete Ft[y].Atflb;delete Ft[y].Atflv;delete Ft[y].Atimb;delete Ft[y].Atsrt;delete Ft[y].Atvglart;delete Ft[y].Atzis;delete Ft[y].Changerequestid;delete Ft[y].CharName;delete Ft[y].Charid;delete Ft[y].Classtype;delete Ft[y].Service;delete Ft[y].Valcnt;Ft[y].slNo=y+1;Ft[y].flag=Ft[y].Class+"-"+Ft[y].slNo;s.characteristics.push(Ft[y])}}}b.push(Ct);r.setCommonApprovalData("AIWListWCModel",s)}}sap.ui.getCore().getModel("AIWListWCModel").setSizeLimit(b.length);sap.ui.getCore().getModel("AIWListWCModel").setData(b);r.updateCount("workCenter",b)}}else if(e==="GTLTab"){var At=n.GTList.results;if(At){for(var wt=0;wt<At.length;wt++){var qt={validFrm:l.getDateFormat(At[wt].Datuv),grp:At[wt].Tlgnhdr,vEquiLbl:false,vEqui:false,vEquiDesc:false,vFlocLbl:false,vFloc:false,vFlocDesc:false,flocEnb:false,equiEnb:false,bAddComponent:true,enable:false,KDenable:false,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var Wt=n.GTList.results;if(Wt.length>0){for(var K=0;K<Wt.length;K++){if(qt.grp===Wt[K].Tlgnhdr){var Bt={};Bt.PPenable=false;Bt.Grpenable=false;Bt.pPlantDesc=Wt[K].Iwerktxt;Bt.usageDesc=Wt[K].TlUsgTxt;Bt.plGrpDesc=Wt[K].Plnnrgrptxt;Bt.statusDesc=Wt[K].Statustxt;Bt.sysCondDesc=Wt[K].Anlzux;Bt.stratDesc=Wt[K].Strattxt;Bt.Plnal=Wt[K].Tplnal;Bt.Verwe=Wt[K].Tverwe;Bt.plEnable=false;Bt.valueStateT="None";Bt.valueStatePP="None";Bt.valueStateU="None";Bt.valueStateS="None";Bt.groupCounter=Wt[K].Tplnal;Bt.Ktext=Wt[K].Ktext;Bt.profile=Wt[K].Profident;Bt.wc=Wt[K].Tarbpl;Bt.keydate=Wt[K].Keydate;Bt.plant=Wt[K].Wcplant;Bt.Iwerk=Wt[K].Werks;Bt.usage=Wt[K].Tverwe;Bt.plannerGrp=Wt[K].Vagrp;Bt.Statu=Wt[K].Statu;Bt.systemCond=Wt[K].Anlzu;Bt.groupVal=Wt[K].Tlgnhdr;Bt.groupCounterDesc=Wt[K].Ktext;Bt.wcDesc=Wt[K].Wcdescription;Bt.assembly=Wt[K].Istru;Bt.deletion=Wt[K].Delkz;Bt.Plnnrgrptxt=Wt[K].Plnnrgrptxt;Bt.Statustxt=Wt[K].Statustxt;Bt.Anlzux=Wt[K].Anlzux;Bt.Istrux=Wt[K].Istrux;Bt.insPtDesc=Wt[K].Slwbeztxt;Bt.insPt=Wt[K].Slwbez;Bt.extNum=Wt[K].Extnumtxt;Bt.tlusg=Wt[K].Tverwe;Bt.grp=Wt[K].Tlgnhdr;Bt.assmbly=Wt[K].Istru;Bt.assmblyDesc=Wt[K].Istrux;Bt.Strat=Wt[K].Strat;qt.header.push(Bt)}}}var Nt=n.GTOprs.results;if(Nt.length>0){for(var te=0;te<Nt.length;te++){if(qt.grp===Nt[te].Tlgnhdr){var Ot={};Ot=Nt[te];Ot.calcKeyDesc="";Ot.actTypDesc="";Ot.Vornr=Nt[te].Vornr;Ot.flag=Nt[te].Tplnal+"-"+Nt[te].Vornr;Ot.Arbpl=Nt[te].TlArbpl;Ot.Plnal=Nt[te].Tplnal;Ot.opState="None";Ot.opDescState="None";Ot.wcState="None";Ot.plantState="None";Ot.ctrlKeyState="None";Ot.operation=Nt[te].Gvornr2op;Ot.subOp=Nt[te].Uvorn;Ot.workCenter=Nt[te].TlArbpl;Ot.plant=Nt[te].Werks2gop;Ot.controlKey=Nt[te].Steus2gop;Ot.Steus=Nt[te].Steus2gop;Ot.shortText=Nt[te].Ltxa1;Ot.work=Nt[te].Arbei;Ot.unitForWork=Nt[te].Arbeh;Ot.number=Nt[te].Anzzl;Ot.calcKey=Nt[te].Indet;Ot.normDuration=Nt[te].Dauno;Ot.uomDuration=Nt[te].Daune;Ot.workPerc=Nt[te].Prznt.toString();Ot.exeFactor=Nt[te].Aufkt;Ot.Werks=Nt[te].Werks2gop;Ot.actType=Nt[te].Larnt2gop;Ot.stdTextKey=Nt[te].Ktsch;Ot.assembly=Nt[te].Tistru;Ot.noOfTime=Nt[te].Loanz;Ot.sutability=Nt[te].Qualf2gop;Ot.wageGroup=Nt[te].Logrp2gop;Ot.wageType=Nt[te].Loart;Ot.sysCondition=Nt[te].Tanlzu;Ot.orderQty=Nt[te].Bmvrg;Ot.ordQtyUnit=Nt[te].Bmeih;Ot.netPrice=Nt[te].Opreis;Ot.currency=Nt[te].Owaers;Ot.priceUnit=Nt[te].Opeinh;Ot.planDelTime=Nt[te].Plifz;Ot.costElement=Nt[te].Sakto2gop;Ot.materialGrp=Nt[te].Omatkl;Ot.puchGroup=Nt[te].Oekgrp;Ot.vendor=Nt[te].Lifnr;Ot.purchOrg=Nt[te].Ekorg;Ot.shortTerm=Nt[te].Sortl;Ot.purchInfo=Nt[te].Infnr;Ot.fieldKey=Nt[te].Slwid;Ot.purchDoc=Nt[te].Ebeln;Ot.purchDocItem=Nt[te].Ebelp2gop;Ot.userFld=Nt[te].Slwid;Ot.capCat=Nt[te].Qlkapar;Ot.capCatDesc=Nt[te].Kapartxt;Ot.quantity1_=Nt[te].Use04;Ot.quantity1=Nt[te].Usr04;Ot.quantity2=Nt[te].Usr05;Ot.quantity2_=Nt[te].Use05;Ot.value3=Nt[te].Usr06;Ot.value4=Nt[te].Usr07;Ot.value3_=Nt[te].Use06;Ot.value4_=Nt[te].Use07;Ot.text1=Nt[te].Usr00;Ot.text2=Nt[te].Usr01;Ot.text3=Nt[te].Usr03;Ot.text4=Nt[te].Usr04;Ot.date1=Nt[te].Usr08;Ot.date2=Nt[te].Usr09;Ot.indicator1=Nt[te].Usr10;Ot.indicator2=Nt[te].Usr11;Ot.Usrtxtname1=Nt[te].Usrtxtname1;Ot.Usrtxtflg1=Nt[te].Usrtxtflg1;Ot.Usrtxtname2=Nt[te].Usrtxtname2;Ot.Usrtxtflg2=Nt[te].Usrtxtflg2;Ot.Usrtxtname3=Nt[te].Usrtxtname3;Ot.Usrtxtflg3=Nt[te].Usrtxtflg3;Ot.Usrtxtname4=Nt[te].Usrtxtname4;Ot.Usrtxtflg4=Nt[te].Usrtxtflg4;Ot.Usrqtyname1=Nt[te].Usrqtyname1;Ot.Usrqtyflg1=Nt[te].Usrqtyflg1;Ot.Usrqtyname2=Nt[te].Usrqtyname2;Ot.Usrqtyflg2=Nt[te].Usrqtyflg2;Ot.Usrvalname1=Nt[te].Usrvalname1;Ot.Usrvalflg1=Nt[te].Usrvalflg1;Ot.Usrvalname2=Nt[te].Usrvalname2;Ot.Usrvalflg2=Nt[te].Usrvalflg2;Ot.Usrdatename1=Nt[te].Usrdatename1;Ot.Usrdatflg1=Nt[te].Usrdatflg1;Ot.Usrdatename2=Nt[te].Usrdatename2;Ot.Usrdatflg2=Nt[te].Usrdatflg2;Ot.Usrindname1=Nt[te].Usrindname1;Ot.Usrindflag1=Nt[te].Usrindflag1;Ot.Usrindname2=Nt[te].Usrindname2;Ot.Usrindflag2=Nt[te].Usrindflag2;Ot.qual=Nt[te].Qlotype;Ot.search=Nt[te].Qsearchtm;Ot.groupCounter=Nt[te].Tplnal;Ot.VornrEnable=false;Ot.UvornEnable=false;Ot.equi=Nt[te].EqunrGop;Ot.floc=Nt[te].TplnrGop;Ot.PRT=[];Ot.OprRel=[];Ot.SrvPckgOvrw=[];Ot.InspChar=[];var Rt=n.GTRel.results;if(Rt&&Rt.length>0){for(var I in Rt){if(qt.grp===Rt[I].Tlgnhdr&&Ot.Plnal===Rt[I].Tplnal&&Ot===Rt[I].Vorn2){var Ut={Plnal:Rt[I].Tplnal,Vornr:Rt[I].Vorn2,OperationOR:Rt[I].Vornrgrel,Offset:Rt[I].Dauer,OUn:Rt[I].Zeinh,RelType:Rt[I].Aobar,PO:Rt[I].Gprznt,OI:Rt[I].Provg,ID:Rt[I].Gkalid,WrkCtrOR:Rt[I].Arbplgrel,PlantOR:Rt[I].Werksgrel};Ot.OprRel.push(Ut)}}}var zt=n.GTPRT.results;if(zt&&zt.length>0){for(var I=0;I<zt.length;I++){if(qt.grp===zt[I].Tlgnhdr&&Ot.Plnal===zt[I].Tplnal&&Ot.Vornr===zt[I].Vornrgprt){var Kt={grp:zt[I].Tlgnhdr,Plnal:zt[I].Tplnal,Vornr:zt[I].Vornrgprt,ItmNum:zt[I].Psnfh,ItmCat:zt[I].Fhmar,PRT:zt[I].Fhmnr,Qty:zt[I].Mgvgw,UOM:zt[I].Mgeinh,QtyFrmla:zt[I].Mgform,PRTCtrl:zt[I].Steuf,PRTCtrlDesc:zt[I].Stftxt,StdUsgVal:zt[I].Ewvgw,StdUsgUOM:zt[I].Eweinh,UsgValFrmla:zt[I].Ewform,Plant:zt[I].Fhwrk,docType:zt[I].Dokareprt,docTypeDesc:"",docPart:zt[I].Doktleprt,docVersion:zt[I].Dokvreprt,prtEnable:false};if(Kt.ItmCat==="M"){Kt.title="Material";Kt.matEnable=true;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="E"){Kt.title="Equipment";Kt.matEnable=false;Kt.eqEnable=true;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="P"){Kt.title="Measuring Point";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=true;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="D"){Kt.title="Document";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=true;Kt.othEnable=false}else if(Kt.ItmCat==="O"){Kt.title="Others";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=true}Ot.PRT.push(Kt)}}}var Ht=n.GTInsp.results;if(Ht&&Ht.length>0){for(var I=0;I<Ht.length;I++){if(qt.grp===Ht[I].Tlgnhdr&&Ot.Plnal===Ht[I].Tplnal&&Ot.Vornr===Ht[I].Vornrgins){var Gt={group:Ht[I].Tlgnhdr,Plnal:Ht[I].Tplnal,Vornr:Ht[I].Vornrgins,InspChar:Ht[I].Merknr,PrstInd:Ht[I].Vste2gins,QuanChar:l.statusSel(Ht[I].Quantitat),QualChar:l.statusSel(Ht[I].QpmkRef),MastInspChar:Ht[I].Verw2gins,Plant:Ht[I].Uzae2tlgn,Version:Ht[I].Ver2tlgni,ShrtTxt:Ht[I].Kurztext,InspMthd:Ht[I].Pmth2gins,InspMthdPlnt:Ht[I].Qwe2tlgni,TolKey:Ht[I].Toleranzs,VrsnInspMthd:Ht[I].Pmtversio,SampProc:Ht[I].Stichprve,SampUOM:Ht[I].Probemgeh,BaseSampQty:Ht[I].Pruefeinh.toString(),CodeGrp:Ht[I].Auswmenge,InspEnable:false};Ot.InspChar.push(Gt)}}}var jt=n.GTSpack.results;if(jt&&jt.length>0){for(var I=0;I<jt.length;I++){if(qt.grp===jt[I].Tlgnhdr&&Ot.Plnal===jt[I].Tplnal&&Ot.Vornr===jt[I].Vornrr){var Qt={group:jt[I].Tlgnhdr,Plnal:jt[I].Tplnal,Vornr:jt[I].Vornrr,LineNum:jt[I].SrvLine,DelIndSP:l.statusSel(jt[I].Del),ActNum:jt[I].Srvpos,ShrtTxt:jt[I].Ktext1,Qty:jt[I].Mengegspk,BUomSP:jt[I].Meinsgspk,GrossPrc:jt[I].Tbtwr,CurKey:jt[I].Waersgspk,Work:jt[I].IntWork,UnitOfWork:jt[I].Iwein,SPEnabled:false,DelIndSPEnabled:false};Ot.SrvPckgOvrw.push(Qt)}}}qt.operation.push(Ot);var _t=n.GTMpackRead.results;var Jt=[];if(_t.length>0){for(var Pe in _t){if(qt.grp===_t[Pe].Tlgnhdr&&Ot.Plnal===_t[Pe].Tplnal){Jt.push(_t[Pe])}}}var $t=n.GTMPack.results;var Zt=[];if($t&&$t.length>0){for(var ye in $t){if(qt.grp===$t[ye].Tlgnhdr&&Ot.Plnal===$t[ye].Tplnal&&Ot.Vornr===$t[ye].Vorn2gmpk){Zt.push($t[ye])}}}var Xt={};if(Jt.length>0){Xt={Plnal:Jt[0].Tplnal,Vornr:Ot.Vornr,Strat:Jt[0].Startgmpk,SOp:"",Ltxa1:Ot.Ltxa1,flag:Jt[0].Tplnal+"-"+Ot.Vornr,MPArr:[]};for(var B in Jt){var Yt=Jt[B];Xt[Yt.Paketgmpk]=false}}if(Zt.length>0){for(var S in Zt){Zt[S].Vornr=Zt[S].Vorn2gmpk;Zt[S].Strat=Zt[S].Startgmpk;Zt[S].Paket=Zt[S].Paketgmpk;Zt[S].MPEnable=false;var ea=Zt[S];Xt[ea.Paketgmpk]=true}Xt.MPArr=Zt}qt.MaintPckg.push(Xt)}}}var ta=n.GTComp.results;if(ta.length>0){for(var I=0;I<ta.length;I++){if(qt.grp===ta[I].Tlgnhdr){var aa={};aa=ta[I];aa.matDesc=ta[I].Maktx;aa.slNo=I+1;aa.Plnal=ta[I].Tplnal;aa.Vornr=ta[I].Vornr;aa.activity=ta[I].Vornr;aa.flag=ta[I].Tplnal+"-"+ta[I].Vornr+"-"+aa.slNo;aa.hFlag=ta[I].Tplnal+"-"+ta[I].Vornr;aa.group=ta[I].Tlgnhdr;aa.grp=ta[I].Tlgnhdr;aa.groupCounter=ta[I].Tplnal;aa.activity=ta[I].Vorn2gcmp;aa.Idnrk=ta[I].Idnrk;aa.component=ta[I].Idnrk;aa.compDesc=ta[I].Maktx;aa.Menge=ta[I].Menge;aa.compQty=ta[I].Menge;aa.MeinsGcp=ta[I].MeinsGcp;aa.compUnit=ta[I].MeinsGcp;aa.backFlush=ta[I].RgekzGcp;aa.resv=ta[I].Disp===""?ta[I].Disptxt:ta[I].Disp;aa.resvDesc=ta[I].Disptxt;aa.storageLoc=ta[I].Lgortgcmp;aa.costElement=ta[I].Saktogcmp;aa.bom=ta[I].Stlnrgcmp;aa.bomCat=ta[I].Stltygcmp;aa.bomCatDesc=ta[I].Stltygcmptxt;aa.itCat=ta[I].Postp;aa.assembly=ta[I].Istru;aa.sortStr=ta[I].Sortf;aa.itemNo=ta[I].Posnr;aa.plantMaint=ta[I].Sanin;aa.relSales=ta[I].Rvrel;aa.relCost=ta[I].Sanka;aa.pmAssembly=ta[I].Stkkz;aa.spare=ta[I].Erskz;aa.matProv=ta[I].Beikz;aa.isPlant=ta[I].Pswrk;aa.bulkMat=ta[I].Schgt;aa.plant=ta[I].Werksgcmp;aa.purchGrp=ta[I].Ekgrp;aa.price=ta[I].Preis;aa.currency=ta[I].Waers;aa.prUnit=ta[I].Peinh;aa.delTimeD=ta[I].Lifzt;aa.matGrp=ta[I].Matkl;aa.qtyFix=ta[I].Fmeng;aa.altBom=ta[I].Stlal;aa.cmpCompEnable=false;aa.cmpEnable=false;aa.cmpVisible=true;qt.component.push(aa)}}r.cmpData=ta}var kt=n.GTClass.results;if(kt){if(kt.length>0){for(var We=0;We<kt.length;We++){if(qt.grp===kt[We].Tlgnhdr){kt[We].ctEnable=false;kt[We].classEnable=false;kt[We].ClassTypeDesc=kt[We].Artxt;delete kt[We].Artxt;kt[We].ClassDesc=kt[We].Kltxt;delete kt[We].Kltxt;delete kt[We].Changerequestid;delete kt[We].Clint;delete kt[We].Service;kt[We].slNo=We+1;kt[We].Plnal=kt[We].Tplnal;kt[We].flag=kt[We].Tplnal+"-"+kt[We].slNo;qt.Class.push(kt[We])}}r.cData=kt}}var Ft=n.GTVal.results;if(Ft){if(Ft.length>0){for(var y=0;y<Ft.length;y++){if(qt.grp===Ft[y].Tlgnhdr){Ft[y].cNameEnable=false;delete Ft[y].Ataut;delete Ft[y].Ataw1;delete Ft[y].Atawe;delete Ft[y].Atcod;delete Ft[y].Atflb;delete Ft[y].Atflv;delete Ft[y].Atimb;delete Ft[y].Atsrt;delete Ft[y].Atvglart;delete Ft[y].Atzis;delete Ft[y].Changerequestid;delete Ft[y].Charid;delete Ft[y].Classtype;delete Ft[y].Service;delete Ft[y].Valcnt;Ft[y].slNo=y+1;Ft[y].Plnal=Ft[y].Tplnal;Ft[y].flag=Ft[y].Tplnal+"-"+Ft[y].Class+"-"+Ft[y].slNo;qt.Char.push(Ft[y])}r.chData=Ft}}}E.push(qt)}}sap.ui.getCore().getModel("AIWListGTLModel").setSizeLimit(E.length);sap.ui.getCore().getModel("AIWListGTLModel").setData(E);r.updateCount("generalTL",E)}else if(e==="EqTLTab"){if(n.ETList.results.length>0){var At=n.ETList.results;for(var ra=0;ra<At.length;ra++){var la={validFrm:l.getDateFormat(At[ra].Datuv),grp:At[ra].Tleqhdr,vEquiLbl:true,vEqui:true,vEquiDesc:true,vFlocLbl:false,vFloc:false,vFlocDesc:false,flocEnb:false,bAddComponent:true,enable:false,KDenable:false,equiEnb:false,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var Wt=n.ETList.results;if(Wt.length>0){for(var K=0;K<Wt.length;K++){if(la.grp===Wt[K].Tleqhdr){var na={};na.pPlantDesc=Wt[K].Iwerktxt;na.Grpenable=false;na.usageDesc=Wt[K].TlUsgTxt;na.plGrpDesc=Wt[K].Plnnrgrptxt;na.statusDesc=Wt[K].Statustxt;na.sysCondDesc=Wt[K].Anlzux;na.stratDesc=Wt[K].Strattxt;na.Plnal=Wt[K].Tplnal;na.Verwe=Wt[K].Tverwe;na.plEnable=false;na.Ktext=Wt[K].Ktext;na.valueStateT="None";na.valueStatePP="None";na.valueStateU="None";na.valueStateS="None";na.profile=Wt[K].Profident;na.keydate=Wt[K].Keydate;na.wc=Wt[K].Tarbpl;na.plant=Wt[K].Wcplant;na.Iwerk=Wt[K].Werks;na.usage=Wt[K].Tverwe;na.plannerGrp=Wt[K].Vagrp;na.Statu=Wt[K].Statu;na.systemCond=Wt[K].Anlzu;na.groupVal=Wt[K].Tleqhdr;na.groupCounterDesc=Wt[K].Eqktx;na.wcDesc=Wt[K].Wcdescription;na.equipment=Wt[K].Eq2tl;na.equipmentDesc=Wt[K].Eqktx;na.deletion=Wt[K].Delkz;na.TlUsgTxt=Wt[K].TlUsgTxt;na.Plnnrgrptxt=Wt[K].Plnnrgrptxt;na.Statustxt=Wt[K].Statustxt;na.Anlzux=Wt[K].Anlzux;na.insPtDesc=Wt[K].Slwbeztxt;na.insPt=Wt[K].Slwbez;na.extNum=Wt[K].Extnumtxt;na.tlusg=Wt[K].Tverwe;na.grp=Wt[K].Tlgnhdr;na.assmbly=Wt[K].Istru;na.assmblyDesc=Wt[K].Istrux;la.Strat=Wt[K].Strat;la.equipment=Wt[K].Eq2tl;la.equipmentDesc=Wt[K].Eqktx;la.header.push(na)}}}var Nt=n.ETOprs.results;if(Nt.length>0){for(var te=0;te<Nt.length;te++){if(la.grp===Nt[te].Tleqhdr){var sa={};sa=Nt[te];sa.calcKeyDesc="";sa.actTypDesc="";sa.flag=Nt[te].Tplnal+"-"+Nt[te].Vornr;sa.Arbpl=Nt[te].TlArbpl;sa.Plnal=Nt[te].Tplnal;sa.Vornr=Nt[te].Vornr;sa.opState="None";sa.opDescState="None";sa.wcState="None";sa.plantState="None";sa.ctrlKeyState="None";sa.operation=Nt[te].Evornr2op;sa.groupCounter=Nt[te].Tplnal;sa.subOp=Nt[te].Uvorn;sa.workCenter=Nt[te].TlArbpl;sa.Werks=Nt[te].Werks2eop;sa.plant=Nt[te].Werks2eop;sa.controlKey=Nt[te].Steus2eop;sa.Steus=Nt[te].Steus2gop;sa.shortText=Nt[te].Ltxa1;sa.work=Nt[te].Arbei;sa.unitForWork=Nt[te].Arbeh;sa.number=Nt[te].Anzzl;sa.calcKey=Nt[te].Indet;sa.normDuration=Nt[te].Dauno;sa.uomDuration=Nt[te].Daune;sa.workPerc=Nt[te].Prznt.toString();sa.exeFactor=Nt[te].Aufkt;sa.actType=Nt[te].Larnt2eop;sa.stdTextKey=Nt[te].Ktsch;sa.assembly=Nt[te].Tistru;sa.noOfTime=Nt[te].Loanz;sa.sutability=Nt[te].Qualf2eop;sa.wageGroup=Nt[te].Logrp2eop;sa.wageType=Nt[te].Loart;sa.sysCondition=Nt[te].Tanlzu;sa.orderQty=Nt[te].Bmvrg;sa.ordQtyUnit=Nt[te].Bmeih;sa.netPrice=Nt[te].Opreis;sa.currency=Nt[te].Owaers;sa.priceUnit=Nt[te].Opeinh;sa.planDelTime=Nt[te].Plifz;sa.costElement=Nt[te].Sakto2eop;sa.materialGrp=Nt[te].Omatkl;sa.puchGroup=Nt[te].Oekgrp;sa.vendor=Nt[te].Lifnr;sa.purchOrg=Nt[te].Ekorg;sa.shortTerm=Nt[te].Sortl;sa.purchInfo=Nt[te].Infnr;sa.fieldKey=Nt[te].Slwid;sa.purchDoc=Nt[te].Ebeln;sa.purchDocItem=Nt[te].Ebelp2eop;sa.userFld=Nt[te].Slwid;sa.capCat=Nt[te].Qlkapar;sa.capCatDesc=Nt[te].Kapartxt;sa.quantity1_=Nt[te].Use04;sa.quantity1=Nt[te].Usr04;sa.quantity2=Nt[te].Usr05;sa.quantity2_=Nt[te].Use05;sa.value3=Nt[te].Usr06;sa.value4=Nt[te].Usr07;sa.value3_=Nt[te].Use06;sa.value4_=Nt[te].Use07;sa.text1=Nt[te].Usr00;sa.text2=Nt[te].Usr01;sa.text3=Nt[te].Usr03;sa.text4=Nt[te].Usr04;sa.date1=Nt[te].Usr08;sa.date2=Nt[te].Usr09;sa.indicator1=Nt[te].Usr10;sa.indicator2=Nt[te].Usr11;sa.Usrtxtname1=Nt[te].Usrtxtname1;sa.Usrtxtflg1=Nt[te].Usrtxtflg1;sa.Usrtxtname2=Nt[te].Usrtxtname2;sa.Usrtxtflg2=Nt[te].Usrtxtflg2;sa.Usrtxtname3=Nt[te].Usrtxtname3;sa.Usrtxtflg3=Nt[te].Usrtxtflg3;sa.Usrtxtname4=Nt[te].Usrtxtname4;sa.Usrtxtflg4=Nt[te].Usrtxtflg4;sa.Usrqtyname1=Nt[te].Usrqtyname1;sa.Usrqtyflg1=Nt[te].Usrqtyflg1;sa.Usrqtyname2=Nt[te].Usrqtyname2;sa.Usrqtyflg2=Nt[te].Usrqtyflg2;sa.Usrvalname1=Nt[te].Usrvalname1;sa.Usrvalflg1=Nt[te].Usrvalflg1;sa.Usrvalname2=Nt[te].Usrvalname2;sa.Usrvalflg2=Nt[te].Usrvalflg2;sa.Usrdatename1=Nt[te].Usrdatename1;sa.Usrdatflg1=Nt[te].Usrdatflg1;sa.Usrdatename2=Nt[te].Usrdatename2;sa.Usrdatflg2=Nt[te].Usrdatflg2;sa.Usrindname1=Nt[te].Usrindname1;sa.Usrindflag1=Nt[te].Usrindflag1;sa.Usrindname2=Nt[te].Usrindname2;sa.Usrindflag2=Nt[te].Usrindflag2;sa.qual=Nt[te].Qlotype;sa.search=Nt[te].Qsearchtm;sa.VornrEnable=false;sa.UvornEnable=false;sa.equi=Nt[te].EqunrEop;sa.floc=Nt[te].TplnrEop;sa.PRT=[];sa.OprRel=[];sa.SrvPckgOvrw=[];sa.InspChar=[];var oa=n.ETRel.results;if(oa&&oa.length>0){for(var I=0;I<oa.length;I++){if(la.grp===oa[I].Tleqhdr&&sa.Plnal===oa[I].Tplnal&&sa.Vornr===oa[I].Vorn2){var Ut={Plnal:oa[I].Tplnal,Vornr:oa[I].Vorn2,OperationOR:oa[I].Vornrerel,Offset:oa[I].Dauer,OUn:oa[I].Zeinh,RelType:oa[I].Aobar,PO:oa[I].Eprznt,OI:oa[I].Provg,ID:oa[I].Ekalid,WrkCtrOR:oa[I].Arbplerel,PlantOR:oa[I].Werkserel};sa.OprRel.push(Ut)}}}var ia=n.ETInsp.results;if(ia&&ia.length>0){for(var I=0;I<ia.length;I++){if(la.grp===ia[I].Tleqhdr&&sa.Plnal===ia[I].Tplnal&&sa.Vornr===ia[I].Vornreins){var Gt={group:ia[I].Tlgnhdr,Plnal:ia[I].Tplnal,Vornr:ia[I].Vornreins,InspChar:ia[I].Merknr,PrstInd:ia[I].Vste2eins,QuanChar:l.statusSel(ia[I].Quantitat),QualChar:l.statusSel(ia[I].QpmkRef),MastInspChar:ia[I].Verw2eins,Plant:ia[I].Uzae2tlen,Version:ia[I].Ver2tleqi,ShrtTxt:ia[I].Kurztext,InspMthd:ia[I].Pmth2eins,InspMthdPlnt:ia[I].Qwe2tleqi,TolKey:ia[I].Toleranzs,VrsnInspMthd:ia[I].Pmtversio,SampProc:ia[I].Stichprve,SampUOM:ia[I].Probemgeh,BaseSampQty:ia[I].Pruefeinh.toString(),CodeGrp:ia[I].Auswmenge,InspEnable:false};sa.InspChar.push(Gt)}}}var da=n.ETSpack.results;if(da&&da.length>0){for(var I=0;I<da.length;I++){if(la.grp===da[I].Tleqhdr&&sa.Plnal===da[I].Tplnal&&sa.Vornr===da[I].Vornrr){var Qt={group:da[I].Tleqhdr,Plnal:da[I].Tplnal,Vornr:da[I].Vornrr,LineNum:da[I].SrvLine,DelIndSP:l.statusSel(da[I].Del),ActNum:da[I].Srvpos,ShrtTxt:da[I].Ktext1,Qty:da[I].Mengeespk,BUomSP:da[I].Meinsespk,GrossPrc:da[I].Tbtwr,CurKey:da[I].Waersespk,Work:da[I].IntWork,UnitOfWork:da[I].Iwein,DelIndSPEnabled:false,SPEnabled:false};sa.SrvPckgOvrw.push(Qt)}}}var ca=n.ETPRT.results;if(ca&&ca.length>0){for(var I=0;I<ca.length;I++){if(la.grp===ca[I].Tleqhdr&&sa.Plnal===ca[I].Tplnal&&sa.Vornr===ca[I].Vornreprt){var Kt={grp:ca[I].Tleqhdr,Plnal:ca[I].Tplnal,Vornr:ca[I].Vornreprt,ItmNum:ca[I].Psnfh,ItmCat:ca[I].Fhmar,PRT:ca[I].Fhmnr,Qty:ca[I].Mgvgw,UOM:ca[I].Mgeinh,QtyFrmla:ca[I].Mgform,PRTCtrl:ca[I].Steuf,PRTCtrlDesc:ca[I].Stftxt,StdUsgVal:ca[I].Ewvgw,StdUsgUOM:ca[I].Eweinh,UsgValFrmla:ca[I].Ewform,Plant:ca[I].Fhwrk,docType:ca[I].Dokareprt,docTypeDesc:"",docPart:ca[I].Doktleprt,docVersion:ca[I].Dokvreprt,prtEnable:false};if(Kt.ItmCat==="M"){Kt.title="Material";Kt.matEnable=true;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="E"){Kt.title="Equipment";Kt.matEnable=false;Kt.eqEnable=true;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="P"){Kt.title="Measuring Point";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=true;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="D"){Kt.title="Document";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=true;Kt.othEnable=false}else if(Kt.ItmCat==="O"){Kt.title="Others";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=true}sa.PRT.push(Kt)}}}la.operation.push(sa);var _t=n.ETMpackRead.results;var Jt=[];if(_t.length>0){for(var Pe in _t){if(la.grp===_t[Pe].Tleqhdr&&sa.Plnal===_t[Pe].Tplnal){Jt.push(_t[Pe])}}}var $t=n.ETMPack.results;var Zt=[];if($t.length>0){for(var ye in $t){if(la.grp===$t[ye].Tleqhdr&&sa.Plnal===$t[ye].Tplnal&&sa.Vornr===$t[ye].Vorn2empk){Zt.push($t[ye])}}}var Xt={};if(Jt.length>0){Xt={Plnal:Jt[0].Tplnal,Vornr:etOperationVornr,Strat:Jt[0].Startempk,SOp:"",Ltxa1:sa.Ltxa1,flag:Jt[0].Tplnal+"-"+sa.Vornr,MPArr:[]};for(var B in Jt){var Yt=Jt[B];Xt[Yt.Paketempk]=false}}if(Zt.length>0){for(var S in Zt){Zt[S].Vornr=Zt[S].Vorn2empk;Zt[S].Strat=Zt[S].Startempk;Zt[S].Paket=Zt[S].Paketempk;Zt[S].MPEnable=false;var ea=Zt[S];if(Zt[S].IsSelected==="X"){Xt[ea.Paketempk]=true}}Xt.MPArr=Zt}la.MaintPckg.push(Xt)}}r.oData=la.operation}ta=n.ETComp.results;if(ta.length>0){for(var w=0;w<ta.length;w++){if(la.grp===ta[w].Tleqhdr){var pa={};pa=ta[w];pa.matDesc=ta[w].Maktx;pa.slNo=w+1;pa.flag=ta[w].Tplnal+"-"+ta[w].Vornr+"-"+ta[w].slNo;pa.hFlag=ta[w].Tplnal+"-"+ta[w].Vornr;pa.Vornr=ta[w].Vornr;pa.activity=ta[w].Vornr;pa.group=ta[w].Tleqhdr;pa.grp=ta[w].Tleqhdr;pa.groupCounter=ta[w].Tplnal;pa.component=ta[w].Idnrk;pa.compDesc=ta[w].Maktx;pa.compQty=ta[w].Menge;pa.compUnit=ta[w].MeinsEcp;pa.backFlush=ta[w].RgekzEcp;pa.resv=ta[w].Disp===""?ta[w].Disptxt:ta[w].Disp;pa.resvDesc=ta[w].Disptxt;pa.storageLoc=ta[w].Lgortecmp;pa.costElement=ta[w].Saktoecmp;pa.bom=ta[w].Stlnrecmp;pa.bomCat=ta[w].Stltyecmp;pa.bomCatDesc=ta[w].Stltyecmptxt;pa.itCat=ta[w].Postp;pa.assembly=ta[w].Istru;pa.sortStr=ta[w].Sortf;pa.itemNo=ta[w].Posnr;pa.plantMaint=ta[w].Sanin;pa.relSales=ta[w].Rvrel;pa.relCost=ta[w].Sanka;pa.pmAssembly=ta[w].Stkkz;pa.spare=ta[w].Erskz;pa.matProv=ta[w].Beikz;pa.isPlant=ta[w].Pswrk;pa.bulkMat=ta[w].Schgt;pa.plant=ta[w].Werksecmp;pa.purchGrp=ta[w].Ekgrp;pa.price=ta[w].Preis;pa.currency=ta[w].Waers;pa.prUnit=ta[w].Peinh;pa.delTimeD=ta[w].Lifzt;pa.matGrp=ta[w].Matkl;pa.qtyFix=ta[w].Fmeng;pa.altBom=ta[w].Stlal;pa.cmpCompEnable=false;pa.cmpEnable=false;pa.cmpVisible=true;la.component.push(pa)}}r.cmpData=ta}var kt=n.ETClass.results;if(kt){if(kt.length>0){for(var We=0;We<kt.length;We++){if(la.grp===kt[We].Tleqhdr){kt[We].ctEnable=false;kt[We].classEnable=false;kt[We].ClassTypeDesc=kt[We].Artxt;delete kt[We].Artxt;kt[We].ClassDesc=kt[We].Kltxt;delete kt[We].Kltxt;delete kt[We].Changerequestid;delete kt[We].Clint;delete kt[We].Service;kt[We].slNo=We+1;kt[We].Plnal=kt[We].Tplnal;kt[We].flag=kt[We].Tplnal+"-"+kt[We].slNo;la.Class.push(kt[We])}}r.cData=kt}}var Ft=n.ETVal.results;if(Ft){if(Ft.length>0){for(var y=0;y<Ft.length;y++){if(la.grp===Ft[y].Tleqhdr){Ft[y].cNameEnable=false;delete Ft[y].Ataut;delete Ft[y].Ataw1;delete Ft[y].Atawe;delete Ft[y].Atcod;delete Ft[y].Atflb;delete Ft[y].Atflv;delete Ft[y].Atimb;delete Ft[y].Atsrt;delete Ft[y].Atvglart;delete Ft[y].Atzis;delete Ft[y].Changerequestid;delete Ft[y].Charid;delete Ft[y].Classtype;delete Ft[y].Service;delete Ft[y].Valcnt;Ft[y].slNo=y+1;Ft[y].Plnal=Ft[y].Tplnal;Ft[y].flag=Ft[y].Tplnal+"-"+Ft[y].Class+"-"+Ft[y].slNo;la.Char.push(Ft[y])}r.chData=Ft}}}v.push(la)}sap.ui.getCore().getModel("AIWListETLModel").setSizeLimit(v.length);sap.ui.getCore().getModel("AIWListETLModel").setData(v);r.updateCount("equiTL",v)}}else if(e==="FLOCTLTab"){if(n.FTList.results.length>0){var At=n.FTList.results;for(var ua=0;ua<At.length;ua++){var ga={validFrm:l.getDateFormat(At[ua].Datuv),grp:At[ua].Tlflhdr,vEquiLbl:false,vEqui:false,vEquiDesc:false,vFlocLbl:true,vFloc:true,vFlocDesc:true,flocEnb:false,equiEnb:false,bAddComponent:true,enable:false,KDenable:false,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var Wt=n.FTList.results;if(Wt.length>0){for(var K=0;K<Wt.length;K++){if(ga.grp===Wt[K].Tlflhdr){var ma={};ma.Grpenable=false;ma.pPlantDesc=Wt[K].Iwerktxt;ma.usageDesc=Wt[K].TlUsgTxt;ma.plGrpDesc=Wt[K].Plnnrgrptxt;ma.statusDesc=Wt[K].Statustxt;ma.sysCondDesc=Wt[K].Anlzux;ma.stratDesc=Wt[K].Strattxt;ma.Plnal=Wt[K].Tplnal;ma.Verwe=Wt[K].Tverwe;ma.plEnable=false;ma.Ktext=Wt[K].Ktext;ma.valueStateT="None";ma.valueStatePP="None";ma.valueStateU="None";ma.valueStateS="None";ma.profile=Wt[K].Profident;ma.keydate=Wt[K].Keydate;ma.wc=Wt[K].Tarbpl;ma.Iwerk=Wt[K].Werks;ma.plant=Wt[K].Wcplant;ma.tlusg=Wt[K].Tverwe;ma.plannerGrp=Wt[K].Vagrp;ma.Statu=Wt[K].Statu;ma.systemCond=Wt[K].Anlzu;ma.groupVal=Wt[K].Tlflhdr;ma.groupCounterDesc=Wt[K].Pltxt;ma.wcDesc=Wt[K].Wcdescription;ma.assembly=Wt[K].Istru;ma.floc=Wt[K].Fl2tl;ma.flocDesc=Wt[K].Pltxt;ma.deletion=Wt[K].Delkz;ma.TlUsgTxt=Wt[K].TlUsgTxt;ma.Plnnrgrptxt=Wt[K].Plnnrgrptxt;ma.Statustxt=Wt[K].Statustxt;ma.Anlzux=Wt[K].Anlzux;ma.insPtDesc=Wt[K].Slwbeztxt;ma.insPt=Wt[K].Slwbez;ma.extNum=Wt[K].Extnumtxt;ma.grp=Wt[K].Tlgnhdr;ma.assmbly=Wt[K].Istru;ma.assmblyDesc=Wt[K].Istrux;la.Strat=Wt[K].Strat;ga.floc=Wt[K].Fl2tl;ga.flocDesc=Wt[K].Pltxt;ga.header.push(ma)}}}var Nt=n.FTOprs.results;if(Nt.length>0){for(var te=0;te<Nt.length;te++){if(ga.grp===Nt[te].Tlflhdr){var fa={};fa=Nt[te];fa.calcKeyDesc="";fa.actTypDesc="";fa.flag=Nt[te].Tplnal+"-"+Nt[te].Vornr;fa.Arbpl=Nt[te].TlArbpl;fa.Plnal=Nt[te].Tplnal;fa.Vornr=Nt[te].Vornr;fa.opState="None";fa.opDescState="None";fa.wcState="None";fa.plantState="None";fa.ctrlKeyState="None";fa.groupCounter=Nt[te].Tplnal;fa.operation=Nt[te].Fvornr2op;fa.subOp=Nt[te].Uvorn;fa.workCenter=Nt[te].TlArbpl;fa.plant=Nt[te].Werks2fop;fa.controlKey=Nt[te].Steus2fop;fa.Steus=Nt[te].Steus2gop;fa.shortText=Nt[te].Ltxa1;fa.work=Nt[te].Arbei;fa.unitForWork=Nt[te].Arbeh;fa.number=Nt[te].Anzzl;fa.calcKey=Nt[te].Indet;fa.Werks=Nt[te].Werks2fop;fa.normDuration=Nt[te].Dauno;fa.uomDuration=Nt[te].Daune;fa.workPerc=Nt[te].Prznt.toString();fa.exeFactor=Nt[te].Aufkt;fa.actType=Nt[te].Larnt2fop;fa.stdTextKey=Nt[te].Ktsch;fa.assembly=Nt[te].Tistru;fa.noOfTime=Nt[te].Loanz;fa.sutability=Nt[te].Qualf2fop;fa.wageGroup=Nt[te].Logrp2fop;fa.wageType=Nt[te].Loart;fa.sysCondition=Nt[te].Tanlzu;fa.orderQty=Nt[te].Bmvrg;fa.ordQtyUnit=Nt[te].Bmeih;fa.netPrice=Nt[te].Opreis;fa.currency=Nt[te].Owaers;fa.priceUnit=Nt[te].Opeinh;fa.planDelTime=Nt[te].Plifz;fa.costElement=Nt[te].Sakto2fop;fa.materialGrp=Nt[te].Omatkl;fa.puchGroup=Nt[te].Oekgrp;fa.vendor=Nt[te].Lifnr;fa.purchOrg=Nt[te].Ekorg;fa.shortTerm=Nt[te].Sortl;fa.purchInfo=Nt[te].Infnr;fa.fieldKey=Nt[te].Slwid;fa.purchDoc=Nt[te].Ebeln;fa.purchDocItem=Nt[te].Ebelp2fop;fa.userFld=Nt[te].Slwid;fa.capCat=Nt[te].Qlkapar;fa.capCatDesc=Nt[te].Kapartxt;fa.quantity1_=Nt[te].Use04;fa.quantity1=Nt[te].Usr04;fa.quantity2=Nt[te].Usr05;fa.quantity2_=Nt[te].Use05;fa.value3=Nt[te].Usr06;fa.value4=Nt[te].Usr07;fa.value3_=Nt[te].Use06;fa.value4_=Nt[te].Use07;fa.text1=Nt[te].Usr00;fa.text2=Nt[te].Usr01;fa.text3=Nt[te].Usr03;fa.text4=Nt[te].Usr04;fa.date1=Nt[te].Usr08;fa.date2=Nt[te].Usr09;fa.indicator1=Nt[te].Usr10;fa.indicator2=Nt[te].Usr11;fa.Usrtxtname1=Nt[te].Usrtxtname1;fa.Usrtxtflg1=Nt[te].Usrtxtflg1;fa.Usrtxtname2=Nt[te].Usrtxtname2;fa.Usrtxtflg2=Nt[te].Usrtxtflg2;fa.Usrtxtname3=Nt[te].Usrtxtname3;fa.Usrtxtflg3=Nt[te].Usrtxtflg3;fa.Usrtxtname4=Nt[te].Usrtxtname4;fa.Usrtxtflg4=Nt[te].Usrtxtflg4;fa.Usrqtyname1=Nt[te].Usrqtyname1;fa.Usrqtyflg1=Nt[te].Usrqtyflg1;fa.Usrqtyname2=Nt[te].Usrqtyname2;fa.Usrqtyflg2=Nt[te].Usrqtyflg2;fa.Usrvalname1=Nt[te].Usrvalname1;fa.Usrvalflg1=Nt[te].Usrvalflg1;fa.Usrvalname2=Nt[te].Usrvalname2;fa.Usrvalflg2=Nt[te].Usrvalflg2;fa.Usrdatename1=Nt[te].Usrdatename1;fa.Usrdatflg1=Nt[te].Usrdatflg1;fa.Usrdatename2=Nt[te].Usrdatename2;fa.Usrdatflg2=Nt[te].Usrdatflg2;fa.Usrindname1=Nt[te].Usrindname1;fa.Usrindflag1=Nt[te].Usrindflag1;fa.Usrindname2=Nt[te].Usrindname2;fa.Usrindflag2=Nt[te].Usrindflag2;fa.qual=Nt[te].Qlotype;fa.search=Nt[te].Qsearchtm;fa.VornrEnable=false;fa.UvornEnable=false;fa.equi=Nt[te].EqunrFop;fa.floc=Nt[te].TplnrFop;fa.PRT=[];fa.OprRel=[];fa.SrvPckgOvrw=[];fa.InspChar=[];var ha=n.FTRel.results;if(ha&&ha.length>0){for(var I=0;I<ha.length;I++){if(ga.grp===ha[I].Tlflhdr&&fa.Plnal===ha[I].Tplnal&&fa.Vornr===ha[I].Vorn2){var Ut={Plnal:ha[I].Tplnal,Vornr:ha[I].Vorn2,OperationOR:ha[I].Vornrfrel,Offset:ha[I].Dauer,OUn:ha[I].Zeinh,RelType:ha[I].Aobar,PO:ha[I].Fprznt,OI:ha[I].Provg,ID:ha[I].Fkalid,WrkCtrOR:ha[I].Arbplfrel,PlantOR:ha[I].Werksfrel};fa.OprRel.push(Ut)}}}var Sa=n.FTInsp.results;if(Sa&&Sa.length>0){for(var I=0;I<Sa.length;I++){if(ga.grp===Sa[I].Tlflhdr&&fa.Plnal===Sa[I].Tplnal&&fa.Vornr===Sa[I].Vornrfins){var Gt={group:Sa[I].Tlflhdr,Plnal:Sa[I].Tplnal,Vornr:Sa[I].Vornrfins,InspChar:Sa[I].Merknr,PrstInd:Sa[I].Vste2fins,QuanChar:l.statusSel(Sa[I].Quantitat),QualChar:l.statusSel(Sa[I].QpmkRef),MastInspChar:Sa[I].Verw2fins,Plant:Sa[I].Uzae2tlfn,Version:Sa[I].Ver2tlfli,ShrtTxt:Sa[I].Kurztext,InspMthd:Sa[I].Pmth2fins,InspMthdPlnt:Sa[I].Qwe2tlfli,TolKey:Sa[I].Toleranzs,VrsnInspMthd:Sa[I].Pmtversio,SampProc:Sa[I].Stichprve,SampUOM:Sa[I].Probemgeh,BaseSampQty:Sa[I].Pruefeinh.toString(),CodeGrp:Sa[I].Auswmenge,InspEnable:false};fa.InspChar.push(Gt)}}}var Ta=n.FTSpack.results;if(Ta&&Ta.length>0){for(var I=0;I<Ta.length;I++){if(ga.grp===Ta[I].Tlflhdr&&fa.Plnal===Ta[I].Tplnal&&fa.Vornr===Ta[I].Vornrr){var Qt={group:Ta[I].Tlflhdr,Plnal:Ta[I].Tplnal,Vornr:Ta[I].Vornrr,LineNum:Ta[I].SrvLine,DelIndSP:l.statusSel(Ta[I].Del),ActNum:Ta[I].Srvpos,ShrtTxt:Ta[I].Ktext1,Qty:Ta[I].Mengefspk,BUomSP:Ta[I].Meinsfspk,GrossPrc:Ta[I].Tbtwr,CurKey:Ta[I].Waersfspk,Work:Ta[I].IntWork,UnitOfWork:Ta[I].Iwein,DelIndSPEnabled:false,SPEnabled:false};fa.SrvPckgOvrw.push(Qt)}}}var Ma=n.FTPRT.results;if(Ma&&Ma.length>0){for(var I=0;I<Ma.length;I++){if(ga.grp===Ma[I].Tlflhdr&&fa.Plnal===Ma[I].Tplnal&&fa.Vornr===Ma[I].Vornrfprt){var Kt={grp:Ma[I].Tlflhdr,Plnal:Ma[I].Tplnal,Vornr:Ma[I].Vornrfprt,ItmNum:Ma[I].Psnfh,ItmCat:Ma[I].Fhmar,PRT:Ma[I].Fhmnr,Qty:Ma[I].Mgvgw,UOM:Ma[I].Mgeinh,QtyFrmla:Ma[I].Mgform,PRTCtrl:Ma[I].Steuf,PRTCtrlDesc:Ma[I].Stftxt,StdUsgVal:Ma[I].Ewvgw,StdUsgUOM:Ma[I].Eweinh,UsgValFrmla:Ma[I].Ewform,Plant:Ma[I].Fhwrk,docType:Ma[I].Dokareprt,docTypeDesc:"",docPart:Ma[I].Doktleprt,docVersion:Ma[I].Dokvreprt,prtEnable:false};if(Kt.ItmCat==="M"){Kt.title="Material";Kt.matEnable=true;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="E"){Kt.title="Equipment";Kt.matEnable=false;Kt.eqEnable=true;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="P"){Kt.title="Measuring Point";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=true;Kt.docEnable=false;Kt.othEnable=false}else if(Kt.ItmCat==="D"){Kt.title="Document";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=true;Kt.othEnable=false}else if(Kt.ItmCat==="O"){Kt.title="Others";Kt.matEnable=false;Kt.eqEnable=false;Kt.msptEnable=false;Kt.docEnable=false;Kt.othEnable=true}fa.PRT.push(Kt)}}}ga.operation.push(fa);var _t=n.FTMpackRead.results;var Jt=[];if(_t.length>0){for(var Pe in _t){if(ga.grp===_t[Pe].Tlflhdr&&fa.Plnal===_t[Pe].Tplnal){Jt.push(_t[Pe])}}}var $t=n.FTMPack.results;var Zt=[];if($t.length>0){for(var ye in $t){if(ga.grp===$t[ye].Tlflhdr&&fa.Plnal===$t[ye].Tplnal&&fa.Vornr===$t[ye].Vorn2fmpk){Zt.push($t[ye])}}}var Xt={};if(Jt.length>0){Xt={Plnal:Jt[0].Tplnal,Vornr:fa.Vornr,Strat:Jt[0].Startfmpk,SOp:"",Ltxa1:fa.Ltxa1,flag:Jt[0].Tplnal+"-"+fa.Vornr,MPArr:[]};for(var B in Jt){var Yt=Jt[B];Xt[Yt.Paketfmpk]=false}}if(Zt.length>0){for(var S in Zt){Zt[S].Vornr=Zt[S].Vorn2fmpk;Zt[S].Strat=Zt[S].Startfmpk;Zt[S].Paket=Zt[S].Paketfmpk;Zt[S].MPEnable=true;var ea=Zt[S];if(Zt[S].IsSelected==="X"){Xt[ea.Paketfmpk]=true}}Xt.MPArr=Zt}ga.MaintPckg.push(Xt)}}}ta=n.FTComp.results;if(ta.length>0){for(var B=0;B<ta.length;B++){if(ga.grp===ta[B].Tlflhdr){var ba={};ba=ta[B];ba.matDesc=ta[B].Maktx;ba.slNo=w+1;ba.flag=ta[B].Tplnal+"-"+ta[B].Vornr+"-"+ta[B].slNo;ba.hFlag=ta[B].Tplnal+"-"+ta[B].Vornr;ba.group=ta[B].Tlflhdr;ba.grp=ta[B].Tlflhdr;ba.groupCounter=ta[B].Tplnal;ba.activity=ta[B].Vornr;ba.Vornr=ta[B].Vornr;ba.component=ta[B].Idnrk;ba.compDesc=ta[B].Maktx;ba.compQty=ta[B].Menge;ba.compUnit=ta[B].MeinsFcp;ba.backFlush=ta[B].RgekzFcp;ba.resv=ta[B].Disp===""?ta[B].Disptxt:ta[B].Disp;ba.resvDesc=ta[B].Disptxt;ba.storageLoc=ta[B].Lgortfcmp;ba.costElement=ta[B].Saktofcmp;ba.bom=ta[B].Stlnrfcmp;ba.bomCat=ta[B].Stltyfcmp;ba.bomCatDesc=ta[B].Stltyfcmptxt;ba.itCat=ta[B].Postp;ba.assembly=ta[B].Istru;ba.sortStr=ta[B].Sortf;ba.itemNo=ta[B].Posnr;ba.plantMaint=ta[B].Sanin;ba.relSales=ta[B].Rvrel;ba.relCost=ta[B].Sanka;ba.pmAssembly=ta[B].Stkkz;ba.spare=ta[B].Erskz;ba.matProv=ta[B].Beikz;ba.isPlant=ta[B].Pswrk;ba.bulkMat=ta[B].Schgt;ba.plant=ta[B].Werksfcmp;ba.purchGrp=ta[B].Ekgrp;ba.price=ta[B].Preis;ba.currency=ta[B].Waers;ba.prUnit=ta[B].Peinh;ba.delTimeD=ta[B].Lifzt;ba.matGrp=ta[B].Matkl;ba.qtyFix=ta[B].Fmeng;ba.altBom=ta[B].Stlal;ba.cmpCompEnable=false;ba.cmpEnable=false;ba.cmpVisible=true;ga.component.push(ba)}}r.cmpData=ta}var kt=n.FTClass.results;if(kt){if(kt.length>0){for(var We=0;We<kt.length;We++){if(ga.grp===kt[We].Tlflhdr){kt[We].ctEnable=false;kt[We].classEnable=false;kt[We].ClassTypeDesc=kt[We].Artxt;delete kt[We].Artxt;kt[We].ClassDesc=kt[We].Kltxt;delete kt[We].Kltxt;delete kt[We].Changerequestid;delete kt[We].Clint;delete kt[We].Service;kt[We].slNo=We+1;kt[We].Plnal=kt[We].Tplnal;kt[We].flag=kt[We].Tplnal+"-"+kt[We].slNo;ga.Class.push(kt[We])}}r.cData=kt}}var Ft=n.FTVal.results;if(Ft){if(Ft.length>0){for(var y=0;y<Ft.length;y++){if(ga.grp===Ft[y].Tlflhdr){Ft[y].cNameEnable=false;delete Ft[y].Ataut;delete Ft[y].Ataw1;delete Ft[y].Atawe;delete Ft[y].Atcod;delete Ft[y].Atflb;delete Ft[y].Atflv;delete Ft[y].Atimb;delete Ft[y].Atsrt;delete Ft[y].Atvglart;delete Ft[y].Atzis;delete Ft[y].Changerequestid;delete Ft[y].Charid;delete Ft[y].Classtype;delete Ft[y].Service;delete Ft[y].Valcnt;Ft[y].slNo=y+1;Ft[y].Plnal=Ft[y].Tplnal;Ft[y].flag=Ft[y].Tplnal+"-"+Ft[y].Class+"-"+Ft[y].slNo;ga.Char.push(Ft[y])}r.chData=Ft}}}C.push(ga)}sap.ui.getCore().getModel("AIWListFTLModel").setSizeLimit(C.length);sap.ui.getCore().getModel("AIWListFTLModel").setData(C);r.updateCount("flocTL",C)}}else if(e==="OLTab"){if(n.Olink){var k=n.Olink.results;if(k!==null){for(var We=0;We<k.length;We++){var s={classItems:[],characteristics:[]};var Ea={};Ea.lenable=false;Ea.linkCat=k[We].Netyp;Ea.objCat=k[We].Kantyp;Ea.link=k[We].Objlink;Ea.linkCatDesc=k[We].Netyptxt;Ea.objCat=k[We].Kantyp;Ea.objCatDesc=k[We].Kantyptxt;Ea.linkDesc=k[We].Kanxt;Ea.netId=k[We].Netid;Ea.netIdDesc=k[We].Netidtxt;Ea.linkNum=k[We].Lfdknr;Ea.autGrp=k[We].Begru;Ea.autGrpDesc=k[We].Begtx;Ea.validFrm=l.getDateFormat(k[We].Datva);Ea.timeFrm=l.getTime(k[We].Zeitva);Ea.validTo=l.getDateFormat(k[We].Datvb);Ea.timeTo=l.getTime(k[We].Zeitvb);Ea.medium=k[We].Mediu;Ea.mediumDesc=k[We].Medkxt;Ea.linkFrmFlEn=false;Ea.linkToFlEn=false;Ea.linkObjFlEn=false;Ea.linkFromEQEn=false;Ea.linkToEQEn=false;Ea.linkObjEqEn=false;Ea.linkCatEn=false;Ea.linkCatVS="None";Ea.objCatEn=false;Ea.objCatVS="None";Ea.linkFEqLblRQ=true;Ea.linkToEqLblRQ=true;Ea.linkFrmEq="";Ea.linkFrmEqDesc="";Ea.linkToEq="";Ea.linkToEqDesc="";Ea.linkObjEq="";Ea.linkObjEqDesc="";Ea.linkFrmflLblV=false;Ea.linkFrmFlV=false;Ea.linkFrmFlDescV=false;Ea.linkToFlLblV=false;Ea.linkToFlV=false;Ea.linkToFlDescV=false;Ea.linkObjFlLblV=false;Ea.linkObjFlV=false;Ea.linkObjFlDescV=false;Ea.linkFrmEqLblV=true;Ea.linkFrmEqV=true;Ea.linkFrmEqDescV=true;Ea.linkToEqLblV=true;Ea.linkToEQV=true;Ea.linkToEqDescV=true;Ea.linkObjEqLblV=true;Ea.linkObjEqV=true;Ea.linkObjEqDescV=true;Ea.enable=false;Ea.LAM=[];Ea.Class=[];Ea.Char=[];if(Ea.objCat==="E"){Ea.linkCatEn=false;Ea.linkFrmFlEn=false;Ea.linkToFlEn=false;Ea.linkObjFlEn=false;Ea.linkFEqLblRQ=true;Ea.linkToEqLblRQ=true;Ea.linkFrmflLblV=false;Ea.linkFrmFlV=false;Ea.linkFrmFlDescV=false;Ea.linkToFlLblV=false;Ea.linkToFlV=false;Ea.linkToFlDescV=false;Ea.linkObjFlLblV=false;Ea.linkObjFlV=false;Ea.linkObjFlDescV=false;Ea.linkCatVS="None";Ea.objCatEn=false;Ea.objCatVS="None";Ea.linkFEqLblRQ=true;Ea.linkToEqLblRQ=true;Ea.linkFrmEq=k[We].Eqvon;Ea.linkFrmEqDesc=k[We].Eqtxtf;Ea.linkToEq=k[We].Eqnach;Ea.linkToEqDesc=k[We].Eqtxtt;Ea.linkObjEq=k[We].Eqkant;Ea.linkObjEqDesc=k[We].Eqtxtl;Ea.linkFrmflLblV=false;Ea.linkFrmFlV=false;Ea.linkFrmFlDescV=false;Ea.linkToFlLblV=false;Ea.linkToFlV=false;Ea.linkToFlDescV=false;Ea.linkObjFlLblV=false;Ea.linkObjFlV=false;Ea.linkObjFlDescV=false;Ea.linkFrmEqLblV=true;Ea.linkFrmEqV=true;Ea.linkFrmEqDescV=true;Ea.linkToEqLblV=true;Ea.linkToEQV=true;Ea.linkToEqDescV=true;Ea.linkObjEqLblV=true;Ea.linkObjEqV=true;Ea.linkObjEqDescV=true}else if(Ea.objCat==="T"){Ea.linkCatEn=false;Ea.linkFromEQEn=false;Ea.linkToEQEn=false;Ea.linkObjEqEn=false;Ea.linkFrmflLblRQ=true;Ea.linkToFlLblRQ=true;Ea.linkFrmEqLblV=false;Ea.linkFrmEqV=false;Ea.linkFrmEqDescV=false;Ea.linkToEqLblV=false;Ea.linkToEQV=false;Ea.linkToEqDescV=false;Ea.linkObjEqLblV=false;Ea.linkObjEqV=false;Ea.linkObjEqDescV=false;Ea.linkCatVS="None";Ea.objCatEn=false;Ea.objCatVS="None";Ea.linkFrmflLblRQ=true;Ea.linkToFlLblRQ=true;Ea.linkFrmFl=k[We].Tpvon;Ea.linkFrmFlDesc=k[We].Fltxtf;Ea.linkToFl=k[We].Tpnach;Ea.linkToFlDesc=k[We].Fltxtt;Ea.linkObjFl=k[We].Tpkant;Ea.linkObjFlDesc=k[We].Fltxtl;Ea.linkFrmflLblV=true;Ea.linkFrmFlV=true;Ea.linkFrmFlDescV=true;Ea.linkToFlLblV=true;Ea.linkToFlV=true;Ea.linkToFlDescV=true;Ea.linkObjFlLblV=true;Ea.linkObjFlV=true;Ea.linkObjFlDescV=true;Ea.linkFrmEqLblV=false;Ea.linkFrmEqV=false;Ea.linkFrmEqDescV=false;Ea.linkToEqLblV=false;Ea.linkToEQV=false;Ea.linkToEqDescV=false;Ea.linkObjEqLblV=false;Ea.linkObjEqV=false;Ea.linkObjEqDescV=false}if(k[We].Bezarp==="2"){Ea.twoWayRel=true;Ea.oneWayRel=false}else if(k[We].Bezarp==="1"){Ea.oneWayRel=true;Ea.twoWayRel=false}if(k[We].Bezarl==="2"){Ea.twoWayUsd=true;Ea.oneWayUsd=false;Ea.relNotUsd=false}else if(k[We].Bezarl==="1"){Ea.oneWayUsd=true;Ea.relNotUsd=false;Ea.twoWayUsd=false}else if(k[We].Bezarl==="0"){Ea.relNotUsd=true;Ea.oneWayUsd=false;Ea.twoWayUsd=false}var va=n.OLLAM.results;if(va){var Ca=new sap.ui.model.json.JSONModel;Ca.setData(va);Ea.LAM=va}var kt=n.OLClass.results;if(kt){if(kt.length>0){for(var K=0;K<kt.length;K++){if(Ea.link===kt[K].Objlink){kt[K].ctEnable=false;kt[K].classEnable=false;kt[K].ClassTypeDesc=kt[K].Artxt;delete kt[K].Artxt;kt[K].ClassDesc=kt[K].Kltxt;delete kt[K].Kltxt;delete kt[K].Changerequestid;delete kt[K].Clint;delete kt[K].Service;s.classItems.push(kt[K])}}}var Ft=n.OLVal.results;if(Ft){if(Ft.length>0){for(var y=0;y<Ft.length;y++){if(Ea.link===Ft[y].Objlink){Ft[y].cNameEnable=false;delete Ft[y].Ataut;delete Ft[y].Ataw1;delete Ft[y].Atawe;delete Ft[y].Atcod;delete Ft[y].Atflb;delete Ft[y].Atflv;delete Ft[y].Atimb;delete Ft[y].Atsrt;delete Ft[y].Atvglart;delete Ft[y].Atzis;delete Ft[y].Changerequestid;delete Ft[y].Charid;delete Ft[y].Classtype;delete Ft[y].Service;delete Ft[y].Valcnt;Ft[y].slNo=y+1;Ft[y].flag=Ft[y].Class+"-"+Ft[y].slNo;s.characteristics.push(Ft[y])}}}}}x.push(Ea);r.setCommonApprovalData("AIWListOLModel",s)}P(x[x.length-1].linkCat,x.length)}}}}}};var y=function(e){var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var a=0;a<JSON.parse(e.responseText).error.innererror.errordetails.length;a++){t[a]=JSON.parse(e.responseText).error.innererror.errordetails[a].message}}var l=t.join("\n");r.invokeMessage(l);r.BusyDialog.close()};if(this.getState()==="MOCR"){this.BusyDialog.open();s.create(o,a,{success:I,error:y})}else{if(e==="MBOMTab"){var f=sap.ui.getCore().getModel("AIWListMatModel").getData();if(f.length>0){return}d=["MRBHeader","MRBItem","MRBSBIT","CrAttachments","Notes"]}if(e==="EBOMTab"){var h=sap.ui.getCore().getModel("AIWListEqModel").getData();if(h.length>0){return}d=["EBHeader","EBItem","EBSBIT","CrAttachments","Notes"]}if(e==="FLBOMTab"){var S=sap.ui.getCore().getModel("AIWListFLModel").getData();if(S.length>0){return}d=["FBHeader","FBItem","FBSBIT","CrAttachments","Notes"]}if(e==="WBSBOMTab"){var T=sap.ui.getCore().getModel("AIWListWBSModel").getData();if(T.length>0){return}d=["WBHeader","WBSBIT","WBItem","CrAttachments","Notes"]}if(e==="ON"){var M=sap.ui.getCore().getModel("AIWListONModel").getData();if(M.length>0){return}d=["ONALAM","ONatevt","ONattrp","ONetwork","ONLAM","ONLink","ONLLAM","ONText","ONVal","ONWClass","CrAttachments","Notes"]}if(e==="FLOCTab"){if(p.length>0){return}d=["FLAddr","FLAddrI","FLClass","FLEmail","FLFax","FLLAM","FLLAMCH","FLMltxt","FLPermit","FLPrtnr","FLTele","FLUrl","FLVal","FuncLoc","CrAttachments","Notes","FLALTLBEL"]}if(e==="EQUITab"){if(u.length>0){return}d=["EqClass","EqAddr","EqAddrI","EqEmail","EqFax","EqMltxt","EqPermt","Equipment","EqLAM","EqLAMCH","EqPRT","EqPRTNR","EqStock","EqTel","EqUrl","EqVal","EqFleet","EqDFPS","CrAttachments","Notes","AINHeaderinfo","AINAttachments","AINCharacteristics","AINAnnounce"]}if(e==="MSPTTab"){if(g.length>0){return}d=["MSClass","MSLAM","MSPoint","MSVal","CrAttachments","Notes"]}if(e==="MPMITab"){if(m.length>0){return}d=["MPCycle","MPItem","MPLAM","MPLAN","ClassMpl","ValuaMpl","MPOBList","CrAttachments","Notes"]}if(e==="WCTab"){var b=sap.ui.getCore().getModel("AIWListWCModel").getData();if(b.length>0){return}d=["WCCapa","WCCost","Workcenter","CrAttachments","Notes","ValueWC","ClassWC"]}else if(e==="GTLTab"){var E=sap.ui.getCore().getModel("AIWListGTLModel").getData();if(E.length>0){return}d=["GTClass","GTHdr","GTComp","GTInsp","GTList","GTMPack","GTMpackRead","GTOprs","GTPRT","GTRel","GTSpack","GTVal","CrAttachments","Notes"]}else if(e==="EqTLTab"){var v=sap.ui.getCore().getModel("AIWListETLModel").getData();if(v.length>0){return}d=["ETClass","ETComp","ETInsp","ETList","ETMPack","ETMpackRead","ETOprs","ETPRT","ETRel","ETSpack","ETVal","ETHdr","CrAttachments","Notes"]}else if(e==="FLOCTLTab"){var C=sap.ui.getCore().getModel("AIWListFTLModel").getData();if(C.length>0){return}d=["FTHdr","FTClass","FTComp","FTInsp","FTList","FTMPack","FTMpackRead","FTOprs","FTPRT","FTRel","FTSpack","FTVal","CrAttachments","Notes"]}else if(e==="OLTab"){var x=sap.ui.getCore().getModel("AIWListOLModel").getData();if(x.length>0){return}d=["OLClass","Olink","OLLAM","OLVal","CrAttachments","Notes"]}this.BusyDialog.open();n.read(o,{filters:i,urlParameters:{$expand:d},success:L,error:y})}},enableFields:function(e){var t=this;if(e==="OL"){var a=this.getView().getModel("AIWListOLModel");var r=a.getData();for(var l=0;l<r.length;l++){r[l].linkCatEn=true;r[l].objCatEn=true;r[l].linkFromEQEn=true;r[l].linkToEQEn=true;r[l].linkObjEqEn=true;r[l].linkFrmFlEn=true;r[l].linkToFlEn=true;r[l].linkObjFlEn=true;r[l].enable=true}a.setData(r);this.getView().setModel(a,"AIWListOLModel")}else if(e==="ON"){}},disableFields:function(e){var t=this;if(e==="OL"){var a=this.getView().getModel("AIWListOLModel");var r=a.getData();for(var l=0;l<r.length;l++){r[l].linkCatEn=false;r[l].objCatEn=false;r[l].linkFromEQEn=false;r[l].linkToEQEn=false;r[l].linkObjEqEn=false;r[l].linkFrmFlEn=false;r[l].linkToFlEn=false;r[l].linkObjFlEn=false;r[l].enable=false}a.setData(r);this.getView().setModel(a,"AIWListOLModel")}else if(e==="ON"){}},setHierPopover:function(e){this._hFragment=e},setManageHierFragment:function(e){this._mhFragment=e},setFilterObjectFragment:function(e){this._ftrFragment=e},getFilterObjectFragment:function(){return this._ftrFragment},getHierPopover:function(){return this._hFragment},getManageHierFragment:function(){return this._mhFragment},onHierarchyPress:function(){if(!this.getHierPopover()){this.setHierPopover(sap.ui.xmlfragment("ugiaiwui.mdg.aiw.library.fragments.hr.Heirarchy",this));this.getView().addDependent(this.getHierPopover())}if(!this.oDialog){this.oDialog=new o({title:"{i18n>aiwHierarchy}",width:"100%",contentWidth:"100%",afterClose:function(e){this.oDialog.close()}.bind(this),endButton:[new sap.m.Button({text:"{i18n>done}",press:function(e){this.oDialog.close()}.bind(this)})],content:this.getHierPopover()});this.getView().addDependent(this.oDialog);sap.ui.getCore().byId("copyBtn").setVisible(false);sap.ui.getCore().byId("massProc").setVisible(false);sap.ui.getCore().byId("removeAll").setVisible(false);sap.ui.getCore().byId("typeCol").setVisible(false);sap.ui.getCore().byId("strIndCol").setVisible(false)}this.createHierarchy(this.oDialog)},onCollapseAll:function(){var e=sap.ui.getCore().byId("hierarchyTab");e.collapseAll()},onExpandFirstLevel:function(){var e=sap.ui.getCore().byId("hierarchyTab");e.expandToLevel(99)},buildPayload:function(){var e=this;var t={ChangeRequestType:this.getCrType(),CrDescription:this.getView().byId("Description").getValue(),Reason:this.getView().byId("reasonForRequest").getSelectedKey(),AiwHierarchy:true,FuncLoc:[],FLAddr:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqClass:[],EqVal:[],MSPoint:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPCycle:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],GTList:[],GTOprs:[],GTComp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],Hierarchy:[]};var a=sap.ui.getCore().getModel(e.oModelAIWFLOC).getData();var r=sap.ui.getCore().getModel(e.oModelAIWEQUI).getData();var n=sap.ui.getCore().getModel(e.oModelAIWMSPT).getData();var s=sap.ui.getCore().getModel(e.oModelAIWMPMI).getData();var o=sap.ui.getCore().getModel("AIWListMatModel").getData();var i=sap.ui.getCore().getModel("AIWListEqModel").getData();var d=sap.ui.getCore().getModel("AIWListFLModel").getData();var c=sap.ui.getCore().getModel("AIWListWBSModel").getData();var p=sap.ui.getCore().getModel("AIWListONModel").getData();var u=sap.ui.getCore().getModel("AIWListWCModel").getData();var g=sap.ui.getCore().getModel("AIWListGTLModel").getData();var m=sap.ui.getCore().getModel("AIWListETLModel").getData();var f=sap.ui.getCore().getModel("AIWListFTLModel").getData();var h=sap.ui.getCore().getModel("AIWListOLModel").getData();if(a.length>0){for(var S=0;S<a.length;S++){var T={Tplnr:a[S].Functionallocation,Txtmi:a[S].Flocdescription,TplkzFlc:a[S].Strucindicator,Tplxt:a[S].StrucIndicatorDesc,EditMask:a[S].EditMask,Hierarchy:a[S].Hierarchy,Fltyp:a[S].Floccategory,Flttx:a[S].FlocCategoryDesc,Swerk:a[S].Maintplant,Plantname:a[S].MaintplantDesc,StorFloc:a[S].Location,Locationdesc:a[S].Locationdesc,Abckzfloc:a[S].Abckz,Abctx:a[S].Abctx,Bukrsfloc:a[S].Bukrs,Butxt:a[S].Butxt,City:a[S].City,KostFloc:a[S].Kostl,KokrFloc:a[S].Kokrs,Contareaname:a[S].Mctxt,PlntFloc:a[S].Werks,Planningplantdes:a[S].Planningplantdes,Ingrp:a[S].Ingrp,Plannergrpdesc:a[S].Innam,Arbplfloc:a[S].Arbpl,Workcenterdesc:a[S].Ktext,Wergwfloc:a[S].WcWerks,Gewrkfloc:a[S].MainArbpl,MainWcDesc:a[S].MainKtext,MainWcPlant:a[S].MainWerks,Tplma:a[S].SupFunctionallocation,Supflocdesc:a[S].SupFlocdescription,BeberFl:a[S].BeberFl,Fing:a[S].Fing,Tele:a[S].Tele,Submtiflo:a[S].ConstrType,Constdesc:a[S].ConstructionDesc,Eqart:a[S].TechnicalObjectTyp,Eartx:a[S].Description,Stattext:a[S].Stattext,StsmFloc:a[S].StsmEqui,Statproftxt:a[S].StsmEquiDesc,UstwFloc:a[S].UstwEqui,UswoFloc:a[S].UswoEqui,UstaFloc:a[S].UstaEqui};t.FuncLoc.push(T);var M={Funcloc:a[S].Functionallocation,Sort1:a[S].Sort1,Sort2:a[S].Sort1,NameCo:a[S].NameCo,PostCod1:a[S].PostCod1,City1:a[S].City1,Building:a[S].Building,Floor:a[S].Floor,Roomnum:a[S].Roomnum,Street:a[S].Street,Strsuppl1:a[S].Strsuppl1,Strsuppl2:a[S].Strsuppl2,Strsuppl3:a[S].Strsuppl3,RPostafl:a[S].RefPosta,Landx:a[S].Landx};t.FLAddr.push(M);var b=a.classItems;if(b){if(b.length>0){for(var E=0;E<b.length;E++){var v={Funcloc:a[S].Functionallocation,Classtype:b[E].Classtype,Class:b[E].Class,Clstatus1:b[E].Clstatus1};t.FLClass.push(v)}}}var C=a.characteristics;if(C){if(C.length>0){for(var x=0;x<C.length;x++){var V={Funcloc:a[S].Functionallocation,Atnam:C[x].Atnam,Textbez:C[x].Textbez,Atwrt:C[x].Atwrt,Class:C[x].Class};t.FLVal.push(V)}}}}}if(r.length>0){for(var P=0;P<r.length;P++){var I={Herst:r[P].Herst,Equnr:r[P].Equnr,Txtmi:r[P].Eqktx,Swerk:r[P].Maintplant,Name1:r[P].MaintplantDesc,TplnEilo:r[P].Tplnr,Flocdescription:r[P].Pltxt,Eqtyp:r[P].EquipmentCatogory,Etytx:r[P].EquipCatgDescription,Eqart:r[P].TechnicalObjectTyp,Eartx:r[P].Description,Typbz:r[P].Typbz,SubmEeqz:r[P].ConstrType,Constdesc:r[P].ConstructionDesc,BukrEilo:r[P].Bukrs,Butxt:r[P].Butxt,HequEeqz:r[P].SuperordinateEquip,SuperordEqDes:r[P].SuperordinateEquipDesc,TidnEeqz:r[P].TechIdNum,KostEilo:r[P].Kostl,KokrEilo:r[P].Kokrs,Contareaname:r[P].Mctxt,StorEilo:r[P].Location,Locationdesc:r[P].Locationdesc,AbckEilo:r[P].Abckz,Abctx:r[P].Abctx,PplaEeqz:r[P].Werks,Planningplantdes:r[P].Planningplantdes,IngrEeqz:r[P].Ingrp,Plannergrpdesc:r[P].Innam,Gernr:r[P].Serge,MapaEeqz:r[P].MapaEeqz,Stattext:r[P].Stattext,StsmEqui:r[P].StsmEqui,Statproftxt:r[P].StsmEquiDesc,UstwEqui:r[P].UstwEqui,UswoEqui:r[P].UswoEqui,UstaEqui:r[P].UstaEqui,Waers:r[P].Waers,ArbpEilo:r[P].Arbpl,Workcenterdesc:r[P].Ktext,WorkCenterPlant:r[P].WcWerks,ArbpEeqz:r[P].MainArbpl,MainWcDesc:r[P].MainKtext,MainWcPlant:r[P].MainWerks,BebeEilo:r[P].BeberFl,Fing:r[P].Fing,Tele:r[P].Tele,HeqnEeqz:r[P].EquipPosition};t.Equipment.push(I);var L={Equi:r[P].Equnr,Sort1:r[P].Sort1,Sort2:r[P].Sort1,NameCo:r[P].NameCo,PostCod1:r[P].PostCod1,City1:r[P].City1,Building:r[P].Building,Floor:r[P].Floor,Roomnum:r[P].Roomnum,Street:r[P].Street,Strsuppl1:r[P].Strsuppl1,Strsuppl2:r[P].Strsuppl2,Strsuppl3:r[P].Strsuppl3,RefPosta:r[P].RefPosta};t.EqAddr.push(L);var y=r.classItems;if(y){if(y.length>0){for(var D=0;D<y.length;D++){var k={Equi:r[P].Equnr,Classtype:y[D].Classtype,Class:y[D].Class,Clstatus1:y[D].Clstatus1};t.EqClass.push(k)}}}var F=r.characteristics;if(F){if(F.length>0){for(var A=0;A<F.length;A++){var w={Equi:r[P].Equnr,Atnam:F[A].Atnam,Textbez:F[A].Textbez,Atwrt:F[A].Atwrt,Class:F[A].Class};t.EqVal.push(w)}}}}}if(n.length>0){for(var q=0;q<n.length;q++){var W={Point:n[q].Mspoint,Equnr:n[q].Equnr,Eqktx:n[q].Eqktx,Tplnr:n[q].Tplnr,Floctxt:n[q].Pltxt,Mptyp:n[q].Mptyp,Mpttx:n[q].Mpttx,Codgr:n[q].Codgr,Codgrtxt:n[q].Codgrtxt,ObtypMs:n[q].ObtypMs,Objtypetxt:n[q].Txt,AtnamMs:n[q].AtnamMs,Atbez:n[q].Atbez,Indct:n[q].Indct,Cdsuf:n[q].Cdsuf,Cjumc:n[q].Cjumc,Desir:n[q].Desir,Pyeac:n[q].Pyeac,Mrmin:n[q].Mrmin,Mrmax:n[q].Mrmax,Pttxt:n[q].Pttxt,Psort:n[q].Psort,Inact:n[q].Inact,Mseh6:n[q].Mseh6,Msehl:n[q].Msehl,Decim:n[q].Decim.toString(),Locas:n[q].Locas,Maktx:n[q].Maktx,Begru:n[q].Begru,Begtx:n[q].Begtx,Expon:n[q].Expon,Mrngu:n[q].Mrngu,Dstxt:n[q].Dstxt,Indrv:n[q].Indrv};t.MSPoint.push(W);var B=n.classItems;if(B){if(B.length>0){for(var N=0;N<B.length;N++){var O={Mspoint:n[q].Mspoint,Classtype:B[N].Classtype,Class:B[N].Class,Clstatus1:B[N].Clstatus1};t.MsClass.push(O)}}}var R=n.characteristics;if(R){if(R.length>0){for(var U=0;U<R.length;U++){var z={Mspoint:n[q].Mspoint,Atnam:R[U].Atnam,Textbez:R[U].Textbez,Atwrt:R[U].Atwrt,Class:R[U].Class};t.MsVal.push(z)}}}}}if(s.length>0){for(var K=0;K<s.length;K++){var H={Warpl:s[K].Warpl,Abrho:s[K].Abrho,Hunit:s[K].Hunit,Mptyp:s[K].Mptyp,Wptxt:s[K].Wptxt,Stich:s[K].Stich,Fabkl:s[K].Fabkl,FabklDesc:s[K].FabklDesc,Sfakt:s[K].Sfakt,Andor:s[K].Andor,Mehrfach:s[K].Mehrfach,Strat:s[K].Strat,StratDesc:s[K].StratDesc,Wset:s[K].Wset,Ktext:s[K].Ktext,Startdate:s[K].Stadt,Unitc:s[K].Unitc,Szaeh:s[K].Szaeh,PointStp:s[K].Mpcycleno,Vspos:s[K].Vspos,Topos:s[K].Topos,Vsneg:s[K].Vsneg,Toneg:s[K].Toneg,Horiz:s[K].Horiz,CallConf:s[K].CallConf,PlanSort:s[K].PlanSort,Begru:s[K].Begru};t.MPLAN.push(H);var G=s.itemModel;if(G){for(var j=0;j<G.length;j++){var Q={Mplan:s[K].Warpl,Qmart:G[j].Qmart,Qmartx:G[j].nTypeTxt,PlntMi:G[j].Werks,Planningplantdes:G[j].Planningplantdes,IngrpMi:G[j].Ingrp,Plannergrpdesc:G[j].Innam,Pstxt:G[j].Pstxt,WergwMi:G[j].WergwMi,ArbpMi:G[j].ArbpMi,Auart:G[j].Auart,Ordertypedesc:G[j].oTypeTxt,Bautl:G[j].AsmblyOb,Cycleseq:G[j].Cycleseq,Equnr:G[j].Equnr,Equipdesc:G[j].Eqktx,TplnrMi:G[j].Tplnr,Flocdesc:G[j].Pltxt,Mitemnumb:G[j].Mitemnumb};t.MPItem.push(Q)}}var _=s.cycleModel;if(_){for(var J=0;J<_.length;J++){var $={Mplan:s[K].Warpl,Point:_[J].Point,Ofsetunit:_[J].Ofsetunit,PakText:_[J].PakText,Zeieh:_[J].Zeieh,Zykl1:_[J].Zykl1,Cycleseqi:_[J].Cycleseqi,Mpcycleno:_[J].Mpcycleno};t.MPCycle.push($)}}}}if(o.length>0){for(var U=0;U<o.length;U++){var Z={Matnr:o[U].Matnr,Stlan:o[U].Stlan,Werks:o[U].Werks,Bomstatus:o[U].Bomstatus,Lngtxt:o[U].Lngtxt,Txtmi:o[U].Lngtxt,Validfrom:this.formatter._formatDate(o[U].Validfrom),Baseqty:o[U].BaseQty,Baseuom:o[U].BaseUom,Validtoda:this.formatter._formatDate(o[U].Validtoda)};t.MRBHeader.push(Z);for(var q=0;q<o[U].matItem.length;q++){var X={Matnr:o[U].Matnr,Stlan:o[U].Stlan,Werks:o[U].Werks,Bomitmpos:o[U].matItem[q].Bomitmpos,Itemcat:o[U].matItem[q].Itemcat,Itemcomp:o[U].matItem[q].Itemcomp,Compdesc:"",Itmqty:o[U].matItem[q].Itmqty,Itmuom:o[U].matItem[q].Itmuom,Recurallo:o[U].matItem[q].Recurallo,Erskz:o[U].matItem[q].Erskz,Rvrel:o[U].matItem[q].Rvrel,Sanfe:o[U].matItem[q].Sanfe,Sanin:o[U].matItem[q].Sanin,Sanko:o[U].matItem[q].Sanko,Itmcmpdesc:o[U].matItem[q].Itmcmpdesc,Costgrelv:o[U].matItem[q].Costgrelv};if(o[U].bomType==="Change"){X.Bomitmnod=o[U].matItem[q].Bomitmnod}t.MRBItem.push(X)}for(var K=0;K<o[U].matSubItem.length;K++){var Y={Matnr:o[U].Matnr,Stlan:o[U].Stlan,Werks:o[U].Werks,Bomitmnod:o[U].matSubItem[K].Bomitmnod,Bomsubno:o[U].matSubItem[K].Bomsubno,Ebort:o[U].matSubItem[K].Ebort,Upmng:o[U].matSubItem[K].Upmng,Uptxt:o[U].matSubItem[K].Uptxt};t.MRBSBIT.push(Y)}}}if(i.length>0){for(var U=0;U<i.length;U++){var ee={Eqnrbom:i[U].Eqnrbom,Stlan:i[U].Stlan,Werks:i[U].Werks,Bomstatus:i[U].Bomstatus,Lngtxt:i[U].Lngtxt,Txtmi:i[U].Lngtxt,Validfrom:this.formatter._formatDate(i[U].Validfrom),Baseqty:i[U].BaseQty,Baseuom:i[U].BaseUom,Validtoda:this.formatter._formatDate(i[U].Validtoda)};t.EBHeader.push(ee);for(var q=0;q<i[U].eqItem.length;q++){var te={Eqnrbom:i[U].Eqnrbom,Stlan:i[U].Stlan,Werks:i[U].Werks,Bomitmpos:i[U].eqItem[q].Bomitmpos,Itemcat:i[U].eqItem[q].Itemcat,Itemcomp:i[U].eqItem[q].Itemcomp,Compdesc:"",Itmqty:i[U].eqItem[q].Itmqty,Itmuom:i[U].eqItem[q].Itmuom,Recurallo:i[U].eqItem[q].Recurallo,Erskz:i[U].eqItem[q].Erskz,Rvrel:i[U].eqItem[q].Rvrel,Sanfe:i[U].eqItem[q].Sanfe,Sanin:i[U].eqItem[q].Sanin,Sanko:i[U].eqItem[q].Sanko,Itmcmpdesc:i[U].eqItem[q].Itmcmpdesc,Costgrelv:i[U].eqItem[q].Costgrelv};if(i[U].bomType==="Change"){te.Bomitmnod=i[U].eqItem[q].Bomitmnod}t.EBItem.push(te)}for(var K=0;K<i[U].eqSubItem.length;K++){var ae={Eqnrbom:i[U].Eqnrbom,Stlan:i[U].Stlan,Werks:i[U].Werks,Bomitmnod:i[U].eqSubItem[K].Bomitmnod,Bomsubno:i[U].eqSubItem[K].Bomsubno,Ebort:i[U].eqSubItem[K].Ebort,Upmng:i[U].eqSubItem[K].Upmng,Uptxt:i[U].eqSubItem[K].Uptxt};t.EBSBIT.push(ae)}}}if(d.length>0){for(var U=0;U<d.length;U++){var re={Tplnrbom:d[U].Tplnrbom,Stlan:d[U].Stlan,Werks:d[U].Werks,Bomstatus:d[U].Bomstatus,Lngtxt:d[U].Lngtxt,Txtmi:d[U].Lngtxt,Validfrom:this.formatter._formatDate(d[U].Validfrom),Baseqty:d[U].BaseQty,Baseuom:d[U].BaseUom,Validtoda:this.formatter._formatDate(d[U].Validtoda)};t.FBHeader.push(re);for(var q=0;q<d[U].flItem.length;q++){var le={Tplnrbom:d[U].Tplnrbom,Stlan:d[U].Stlan,Werks:d[U].Werks,Bomitmpos:d[U].flItem[q].Bomitmpos,Itemcat:d[U].flItem[q].Itemcat,Itemcomp:d[U].flItem[q].Itemcomp,Compdesc:"",Itmqty:d[U].flItem[q].Itmqty,Itmuom:d[U].flItem[q].Itmuom,Recurallo:d[U].flItem[q].Recurallo,Erskz:d[U].flItem[q].Erskz,Rvrel:d[U].flItem[q].Rvrel,Sanfe:d[U].flItem[q].Sanfe,Sanin:d[U].flItem[q].Sanin,Sanko:d[U].flItem[q].Sanko,Itmcmpdesc:d[U].flItem[q].Itmcmpdesc,Costgrelv:d[U].flItem[q].Costgrelv};if(d[U].bomType==="Change"){le.Bomitmnod=d[U].flItem[q].Bomitmnod}t.FBItem.push(le)}for(var K=0;K<d[U].flSubItem.length;K++){var ne={Tplnrbom:d[U].Tplnrbom,Stlan:d[U].Stlan,Werks:d[U].Werks,Bomitmnod:d[U].flSubItem[K].Bomitmnod,Bomsubno:d[U].flSubItem[K].Bomsubno,Ebort:d[U].flSubItem[K].Ebort,Upmng:d[U].flSubItem[K].Upmng,Uptxt:d[U].flSubItem[K].Uptxt};t.FBSBIT.push(ne)}}}if(c.length>0){for(var U=0;U<c.length;U++){var se={WbsExt:c[U].WbsExt,MatnrWbs:c[U].Matnr,Stlan:c[U].Stlan,Werks:c[U].Werks,Bomstatus:c[U].Bomstatus,Lngtxt:c[U].Lngtxt,Txtmi:c[U].Lngtxt,Validfrom:this._formatDate(c[U].Validfrom),Baseqty:c[U].BaseQty,Baseuom:c[U].BaseUom,Validtoda:this._formatDate(c[U].Validtoda)};t.WBHeader.push(se);for(var q=0;q<c[U].wbsItem.length;q++){var oe={WbsExt:c[U].WbsExt,MatnrWbs:c[U].Matnr,Stlan:c[U].Stlan,Werks:c[U].Werks,Bomitmpos:c[U].wbsItem[q].Bomitmpos,Itemcat:c[U].wbsItem[q].Itemcat,Itemcomp:c[U].wbsItem[q].Itemcomp,Compdesc:"",Itmqty:c[U].wbsItem[q].Itmqty,Itmuom:c[U].wbsItem[q].Itmuom,Recurallo:c[U].wbsItem[q].Recurallo,Erskz:c[U].wbsItem[q].Erskz,Rvrel:c[U].wbsItem[q].Rvrel,Sanfe:c[U].wbsItem[q].Sanfe,Sanin:c[U].wbsItem[q].Sanin,Sanko:c[U].wbsItem[q].Sanko,Itmcmpdesc:c[U].wbsItem[q].Itmcmpdesc,Costgrelv:c[U].wbsItem[q].Costgrelv};if(c[U].bomType==="Change"){oe.Bomitmnod=c[U].wbsItem[q].Bomitmnod}t.WBItem.push(oe)}for(var K=0;K<c[U].wbsSubItem.length;K++){var ie={WbsExt:c[U].WbsExt,MatnrWbs:c[U].Matnr,Stlan:c[U].Stlan,Werks:c[U].Werks,Bomitmnod:c[U].wbsSubItem[K].Bomitmnod,Bomsubno:c[U].wbsSubItem[K].Bomsubno,Ebort:c[U].wbsSubItem[K].Ebort,Upmng:c[U].wbsSubItem[K].Upmng,Uptxt:c[U].wbsSubItem[K].Uptxt};t.WBSBIT.push(ie)}}}if(p.length>0){for(var U=0;U<p.length;U++){var de={Objnetwrk:p[U].Objnetwrk,Netgrp:p[U].Netgrp,Netwtyp:p[U].Netwtyp,Netxt:p[U].Netxt,Ntobjtyp:p[U].Ntobjtyp};t.ONetwork.push(de);var ce={Objnetwrk:p[U].Objnetwrk,Lrpid:p[U].Lrpid,Strtptatr:p[U].Strtptatr,Endptatr:p[U].Endptatr,Length:p[U].Length,LinUnit:p[U].LinUnit,Startmrkr:p[U].Startmrkr,Endmrkr:p[U].Endmrkr,Mrkdisst:p[U].Mrkdisst,Mrkdisend:p[U].Mrkdisend,MrkrUnit:p[U].MrkrUnit};t.ONLAM.push(ce)}}if(u.length>0){for(var U=0;U<u.length;U++){var Z={Werks:u[U].plant,Arbpl:u[U].wc,Txtmi:u[U].wcDesc,Verwe:u[U].wcCat,Crveran:u[U].person,Planv:u[U].usg,Vgwts:u[U].stdVal,Crsteus:u[U].ctrlKey};t.Workcenter.push(Z);if(u[U].cost){for(var q=0;q<u[U].cost.length;q++){var pe={Werks:u[U].cost[q].CrKokrs,Arbpl:u[U].wc,CrKostl:u[U].cost[q].CrKostl,Costcentxt:u[U].cost[q].Costcentxt,CrLstar:u[U].cost[q].CrLstar,Forn1:u[U].cost[q].Forn1,ActvttypeTxt:u[U].cost[q].ActvttypeTxt,Frmltxt:u[U].cost[q].Frmltxt};t.WCCost.push(pe)}}}}if(g.length>0){for(var U=0;U<g.length;U++){if(g[U].header){for(var q=0;q<g[U].header.length;q++){var ue={Werks:g[U].header[q].Iwerk,Wcplant:g[U].header[q].plant,Statu:g[U].header[q].Statu,Tverwe:g[U].header[q].usage,Ktext:g[U].header[q].Ktext,Tarbpl:g[U].header[q].workCenter,Vagrp:g[U].header[q].plannerGrp,Anlzu:g[U].header[q].systemCond,Tplnal:g[U].header[q].Plnal,Tlgnhdr:g[U].header[q].groupVal,Strat:g[U].header[q].stratDesc};t.GTList.push(ue)}}if(g[U].operation){for(var K=0;K<g[U].operation.length;K++){var ge={Tlgnhdr:g[U].operation[K].Tlgnhdr,Vornr:g[U].operation[K].Vornr,TlArbpl:g[U].operation[K].TlArbpl,Werks2gop:g[U].operation[K].Werks2gop,Steus2gop:g[U].operation[K].Steus2gop,Ltxa1:g[U].operation[K].ActvttypeTxt,Arbei:g[U].operation[K].Forn1,Dauno:g[U].operation[K].normDuration,Arbeh:g[U].operation[K].unitForWork,Anzzl:g[U].operation[K].number,Daune:g[U].operation[K].uomDuration,Indet:g[U].operation[K].calcKey,Tplnal:g[U].operation[K].Plnal};t.GTOprs.push(ge)}}if(g[U].component){for(var j=0;j<g[U].component.length;j++){var me={Tlgnhdr:g[U].component[j].Tlgnhdr,Idnrk:g[U].component[j].component,Menge:g[U].component[j].compQty,MeinsGcp:g[U].component[j].compUnit,Vornr:g[U].component[j].activity,Postp:g[U].component[j].itCat,Tplnal:g[U].component[j].Plnal};t.GTComp.push(me)}}if(g[U].Class){for(var J=0;J<g[U].Class.length;J++){var fe={Tlgnhdr:g[U].Class[J].Tlgnhdr,Classtype:g[U].Class[J].Classtype,Class:g[U].Class[J].Class,Clstatus1:g[U].Class[J].Clstatus1,Tplnal:g[U].Class[J].Tplnal};t.GTClass.push(fe)}}if(g[U].charList){for(var he=0;he<g[U].charList.length;he++){var Se={Tlgnhdr:g[U].charList[he].Tlgnhdr,Atnam:g[U].charList[he].Atnam,Textbez:g[U].charList[he].Textbez,Atwrt:g[U].charList[he].Atwrt,Class:g[U].charList[he].Class,Tplnal:g[U].charList[he].Tplnal};t.GTVal.push(Se)}}}}if(m.length>0){for(var U=0;U<m.length;U++){if(m[U].header){for(var q=0;q<m[U].header.length;q++){var Te={Werks:m[U].header[q].Iwerk,Wcplant:m[U].header[q].plant,Statu:m[U].header[q].Statu,Tverwe:m[U].header[q].usage,Ktext:m[U].header[q].Ktext,Tarbpl:m[U].header[q].workCenter,Vagrp:m[U].header[q].plannerGrp,Anlzu:m[U].header[q].systemCond,Tplnal:m[U].header[q].Plnal,Tlgnhdr:m[U].header[q].groupVal,Strat:m[U].header[q].stratDesc};t.ETList.push(Te)}}if(m[U].operation){for(var K=0;K<m[U].operation.length;K++){var Me={Tlgnhdr:m[U].operation[K].Tlgnhdr,Vornr:m[U].operation[K].Vornr,TlArbpl:m[U].operation[K].TlArbpl,Werks2gop:m[U].operation[K].Werks2gop,Steus2gop:m[U].operation[K].Steus2gop,Ltxa1:m[U].operation[K].ActvttypeTxt,Arbei:m[U].operation[K].Forn1,Dauno:m[U].operation[K].normDuration,Arbeh:m[U].operation[K].unitForWork,Anzzl:m[U].operation[K].number,Daune:m[U].operation[K].uomDuration,Indet:m[U].operation[K].calcKey,Tplnal:m[U].operation[K].Plnal};t.ETOprs.push(Me)}}if(m[U].component){for(var j=0;j<m[U].component.length;j++){var be={Tlgnhdr:m[U].component[j].Tlgnhdr,Idnrk:m[U].component[j].component,Menge:m[U].component[j].compQty,MeinsGcp:m[U].component[j].compUnit,Vornr:m[U].component[j].activity,Postp:m[U].component[j].itCat,Tplnal:m[U].component[j].Plnal};t.ETComp.push(be)}}if(m[U].Class){for(var J=0;J<m[U].Class.length;J++){var Ee={Tlgnhdr:m[U].Class[J].Tlgnhdr,Classtype:m[U].Class[J].Classtype,Class:m[U].Class[J].Class,Clstatus1:m[U].Class[J].Clstatus1,Tplnal:m[U].Class[J].Tplnal};t.ETClass.push(Ee)}}if(m[U].charList){for(var he=0;he<m[U].charList.length;he++){var ve={Tlgnhdr:m[U].charList[he].Tlgnhdr,Atnam:m[U].charList[he].Atnam,Textbez:m[U].charList[he].Textbez,Atwrt:m[U].charList[he].Atwrt,Class:m[U].charList[he].Class,Tplnal:m[U].charList[he].Tplnal};t.ETVal.push(ve)}}}}if(f.length>0){for(var U=0;U<f.length;U++){if(f[U].header){for(var q=0;q<f[U].header.length;q++){var Ce={Werks:f[U].header[q].Iwerk,Wcplant:f[U].header[q].plant,Statu:f[U].header[q].Statu,Tverwe:f[U].header[q].usage,Ktext:f[U].header[q].Ktext,Tarbpl:f[U].header[q].workCenter,Vagrp:f[U].header[q].plannerGrp,Anlzu:f[U].header[q].systemCond,Tplnal:f[U].header[q].Plnal,Tlgnhdr:f[U].header[q].groupVal,Strat:f[U].header[q].stratDesc};t.FTList.push(Ce)}}if(f[U].operation){for(var K=0;K<f[U].operation.length;K++){var xe={Tlgnhdr:f[U].operation[K].Tlgnhdr,Vornr:f[U].operation[K].Vornr,TlArbpl:f[U].operation[K].TlArbpl,Werks2gop:f[U].operation[K].Werks2gop,Steus2gop:f[U].operation[K].Steus2gop,Ltxa1:f[U].operation[K].ActvttypeTxt,Arbei:f[U].operation[K].Forn1,Dauno:f[U].operation[K].normDuration,Arbeh:f[U].operation[K].unitForWork,Anzzl:f[U].operation[K].number,Daune:f[U].operation[K].uomDuration,Indet:f[U].operation[K].calcKey,Tplnal:f[U].operation[K].Plnal};t.FTOprs.push(xe)}}if(f[U].component){for(var j=0;j<f[U].component.length;j++){var Ve={Tlgnhdr:f[U].component[j].Tlgnhdr,Idnrk:f[U].component[j].component,Menge:f[U].component[j].compQty,MeinsGcp:f[U].component[j].compUnit,Vornr:f[U].component[j].activity,Postp:f[U].component[j].itCat,Tplnal:f[U].component[j].Plnal};t.FTComp.push(Ve)}}if(f[U].Class){for(var J=0;J<f[U].Class.length;J++){var Pe={Tlgnhdr:f[U].Class[J].Tlgnhdr,Classtype:f[U].Class[J].Classtype,Class:f[U].Class[J].Class,Clstatus1:f[U].Class[J].Clstatus1,Tplnal:f[U].Class[J].Tplnal};t.FTClass.push(Pe)}}if(f[U].charList){for(var he=0;he<f[U].charList.length;he++){var Ie={Tlgnhdr:f[U].charList[he].Tlgnhdr,Atnam:f[U].charList[he].Atnam,Textbez:f[U].charList[he].Textbez,Atwrt:f[U].charList[he].Atwrt,Class:f[U].charList[he].Class,Tplnal:f[U].charList[he].Tplnal};t.FTVal.push(Ie)}}}}if(h.length>0){for(var U=0;U<h.length;U++){var Le={Begru:h[U].autGrp,Objlink:h[U].link,Kanxt:h[U].linkDesc,Eqkant:h[U].linkObjEq,Tpkant:h[U].linkObjFl,Netyp:h[U].linkCat,Eqvon:h[U].linkFrmEq,Tpvon:h[U].linkFrmFl,Eqnach:h[U].linkToEq,Tpnach:h[U].linkToFl,Mediu:h[U].medium,Lfdknr:h[U].linkNum,Kantyp:h[U].objCat,Netid:h[U].netId,Bezarp:h[U].Bezarp,Bezarl:h[U].Bezarl,Datva:l._formatDate(h[U].validFrm),Zeitva:l._timeConvert(h[U].timeFrm),Datvb:l._formatDate(h[U].validTo),Zeitvb:l._timeConvert(h[U].timeTo),Stattext:h[U].Stattext,StsmOl:h[U].StsmOl,UstwOl:h[U].UstwOl,UswoOl:h[U].UswoOl,UstaOl:h[U].UstaOl};t.Olink.push(Le);if(h[U].Class){for(var q=0;q<h[U].Class.length;q++){var ye={Objlink:h[U].Class[q].Objlink,Classtype:h[U].Class[q].Classtype,Class:h[U].Class[q].Class,Clstatus1:h[U].Class[q].Clstatus1};t.OLClass.push(ye)}}if(h[U].Char){for(var K=0;K<h[U].Char.length;K++){var De={Objlink:h[U].Char[K].Objlink,Atnam:h[U].Char[K].Atnam,Textbez:h[U].Char[K].Textbez,Atwrt:h[U].Char[K].Atwrt,Class:h[U].Char[K].Class};t.OLVal.push(De)}}}}return t},transformTreeData:function(e){var t=[];var a={};if(e){var r;var l;for(var n=0;n<e.length;n++){var s=e[n];r={RowKey:s.RowKey,Category:s.Category,Mplant:s.Mplant,Arbpl:s.Arbpl,Asset:s.Asset,Bukrs:s.Bukrs,ChildrenLoaded:s.ChildrenLoaded,CrEnt:s.CrEnt,CrExists:s.CrExists,Delind:s.Delind,EntKey:s.EntKey,Eqkant:s.Eqkant,Eqnach:s.Eqnach,Eqvon:s.Eqvon,Expanded:s.Expanded,Iloan:s.Iloan,Inact:s.Inact,IsLeaf:s.IsLeaf,IsChecked:s.IsChecked,Kantyp:s.Kantyp,Level:s.Level,Message:s.Message,Name:s.Name,Netid:s.Netid,NetidS:s.NetidS,Nodeid:s.Nodeid,Objnr:s.Objnr,ParentKey:s.ParentKey,ParentNodeid:s.ParentNodeid,Plnal:s.Plnal,Plnnr:s.Plnnr,Posnr:s.Posnr,Pplant:s.Pplant,SeqDis:s.SeqDis,Src40:s.Src40,StInd:s.StInd,Stalt:s.Stalt,State:s.State,Stlan:s.Stlan,Submt:s.Submt,Text:s.Text,Tpkant:s.Tpkant,Tplkz:s.Tplkz,Tpnach:s.Tpnach,Tpvon:s.Tpvon,Type:s.Type,Warpl:s.Warpl,Werks:s.Werks,WorkCtxt:s.WorkCtxt,children:[]};l=s.ParentKey;if(l&&l.length>0){var o=a[s.ParentKey];if(o){o.children.push(r)}}else{t.push(r)}a[r.RowKey]=r}}return t},flat:function(e){var t=this;var a=[];e.forEach(function(e){a.push(e);if(Array.isArray(e.children)){a=a.concat(t.flat(e.children))}});return a},createHierarchy:function(e){var t=this;var a=new sap.m.BusyDialog;a.open();var r=this.getView().getModel();var l="/ChangeRequestSet";var n=this.buildPayload();var s=function(r){a.close();var l=t.transformTreeData(r.Hierarchy.results);var n=sap.ui.getCore().byId("hierarchyTab");t.setModelData(l,n);e.open()};var o=function(t){a.close();e.open()};var i={"X-Requested-With":"xmlHTTPrequest"};r.setHeaders(i);r.create(l,n,{success:s,error:o})},setModelData:function(e,t){var a=this;var r=new sap.ui.model.json.JSONModel;r.setData({nodeRoot:{children:e}});t.setModel(r);t.bindRows({path:"/nodeRoot",parameters:{arrayNames:["children"]}})},onManageHierPress:function(){this.setManageHierFragment(sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.Hierarchy.ManageHierarchies",this));this.getView().addDependent(this.getManageHierFragment());this.getManageHierFragment().open()},onFilterObjDialogPress:function(){this.setFilterObjectFragment(sap.ui.xmlfragment("ugiaiwui.mdg.aiw.request.Fragments.Hierarchy.FilterObjects",this));this.getView().addDependent(this.getFilterObjectFragment());this.getFilterObjectFragment().open()},onMHOkPress:function(e){this.getManageHierFragment().close()},onMHCancelPress:function(e){this.getManageHierFragment().close()},onMHDialogClose:function(e){this.getManageHierFragment().destroy()},onFilterDialogClose:function(){this.getFilterObjectFragment().destroy()},onFilterOkPress:function(){this.getFilterObjectFragment().close()},onFilterCancelPress:function(){this.getFilterObjectFragment().close()},onSettingsPressed:function(){var e=this._oComponent.getModel("objects");if(!this.oList){this.oList=new sap.m.List({mode:"MultiSelect",includeItemInSelection:true,rememberSelections:true});var t=new sap.m.StandardListItem({title:"{name}",icon:"{nameUrl}",iconDensityAware:false,iconInset:false});this.oList.setModel(e);this.oList.bindAggregation("items","/objects",t)}var a=this;var r=new sap.m.Dialog({title:this.getView().getModel("i18n").getProperty("objectSelection"),beginButton:[new sap.m.Button({text:"OK",press:function(){var e=this.oList.getItems();for(var t=0;t<e.length;t++){var l=e[t];var n=l.getBindingContext();var s=a._oComponent.getModel("objects").getProperty(n.getPath());if(l.getProperty("selected")){a.getView().getModel("EnableModel").setProperty("/"+s.name,true)}else{a.getView().getModel("EnableModel").setProperty("/"+s.name,false)}}r.close()}.bind(this)})],content:this.oList});r.open()},clearData:function(){var e=this;this.getView().byId("Description").setValue();this.getView().byId("reasonForRequest").setSelectedKey();e.getView().byId("idPriority").setSelectedKey();e.getView().byId("idDueDate").setDateValue(null);this.getView().setModel(new t([]),this.oModelAIWFLOC);this.getView().setModel(new t([]),this.oModelAIWEQUI);this.getView().setModel(new t([]),this.oModelAIWMSPT);this.getView().setModel(new t([]),this.oModelAIWMPMI);sap.ui.getCore().setModel(new t([]),this.oModelAIWFLOC);sap.ui.getCore().setModel(new t([]),this.oModelAIWEQUI);sap.ui.getCore().setModel(new t([]),this.oModelAIWMSPT);sap.ui.getCore().setModel(new t([]),this.oModelAIWMPMI);sap.ui.getCore().setModel(new t([]),"AIWAPPROVE");var a=new t([]);sap.ui.getCore().setModel(a,"AIWListMatModel");this.getView().setModel(a,"AIWListMatModel");var r=new t([]);sap.ui.getCore().setModel(r,"AIWListEqModel");this.getView().setModel(r,"AIWListEqModel");var l=new t([]);sap.ui.getCore().setModel(l,"AIWListFLModel");this.getView().setModel(l,"AIWListFLModel");var n=new t([]);sap.ui.getCore().setModel(n,"AIWListWBSModel");this.getView().setModel(n,"AIWListWBSModel");var s=new t([]);sap.ui.getCore().setModel(s,"AIWListONModel");this.getView().setModel(s,"AIWListONModel");var o=new t([]);sap.ui.getCore().setModel(o,"AIWListWCModel");this.getView().setModel(o,"AIWListWCModel");var i=new t([]);i.getData().addGTLCounter=false;i.getData().addETLCounter=false;i.getData().addFTLCounter=false;this.getView().setModel(i,"aCounterModel");var d=new t([]);this.getView().setModel(d,"GTLHeaderModel");var c=new t([]);this.getView().setModel(c,"ETLHeaderModel");var p=new t([]);this.getView().setModel(p,"FTLHeaderModel");var u=new t([]);u.getData().addCounter=false;sap.ui.getCore().setModel(u,"AIWListGTLModel");this.getView().setModel(u,"AIWListGTLModel");var g=new t([]);g.getData().addCounter=false;sap.ui.getCore().setModel(g,"AIWListETLModel");this.getView().setModel(g,"AIWListETLModel");var m=new t([]);m.getData().addCounter=false;sap.ui.getCore().setModel(m,"AIWListFTLModel");this.getView().setModel(m,"AIWListFTLModel");var f=new t([]);sap.ui.getCore().setModel(f,"AIWListOLModel");this.getView().setModel(f,"AIWListOLModel");var h=new t({EQ:[],FL:[]});sap.ui.getCore().setModel(h,"dataOriginMOP");this.readDOIList("EQUI");this.readDOIList("FUNCLOC");var S=new t([]);sap.ui.getCore().setModel(S,"ainMOP");this.AIWModelDelete=false;var T={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"000",modelParKey:"",modelParKeyVS:"None",modelEnable:true,crtEnable:true,delEnable:false};var M=new t(T);this.getView().setModel(M,"AIWModel");sap.ui.getCore().setModel(M,"AIWModel");this._initializeAttachments();this._onRouteMatched(undefined,"main","clear");var b=[];var E=new t({items:b});this.getView().setModel(E,"notes");if(this.getMode()!=="display"){this.readChangeRequestType()}},onCancel:function(){var e=this;var t=this.getView().getModel("i18n").getProperty("dataLoss");var a=this.getView().getModel("i18n").getProperty("WARNING");sap.m.MessageBox.show(t,sap.m.MessageBox.Icon.WARNING,a,[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(t){if(t==="OK"){e.getView().byId("Description").setValue();e.getView().byId("reasonForRequest").setSelectedKey();window.history.back()}})},onRootFlocVH:function(e){d.RootFlocVH(e,this)},onRootFlocChange:function(e){d.RootFlocChange(e,this)},onAIWModelActionPress:function(e){var t=this;var a=e.getSource().getType();var r=this.getView().getModel("AIWModel");var l=r.getData();if(l.modelName===""||l.modelDesc===""||l.modelVer===""||l.modelParKey===""){if(l.modelName===""){l.modelNameVS="Error"}if(l.modelDesc===""){l.modelDescVS="Error"}if(l.modelParKey===""){l.modelParKeyVS="Error"}r.setData(l);return}var n="";if(a==="Accept"){n="C"}else{n="D"}this.readAIWModel(n)},readAIWModel:function(e){var t=this;var a=this.getView().getModel("AIWModel");var r=a.getData();var n=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();var s={ChangeRequestType:this.getCrType(),CrDescription:this.getView().byId("Description").getValue(),Reason:this.getView().byId("reasonForRequest").getSelectedKey(),Guids:this.oAttach,IsDraft:"C",ModelOperation:e,Messages:[],FuncLoc:[],FLAddr:[],FLAddrI:[],FLALTLBEL:[],FLLAM:[],FLClass:[],FLVal:[],Equipment:[],EqAddr:[],EqAddrI:[],EqPRT:[],EqLAM:[],EqDFPS:[],EqClass:[],EqVal:[],MSPoint:[],MSLAM:[],MSClass:[],MSVal:[],MPLAN:[],MPItem:[],MPLAM:[],MPOBList:[],MPCycle:[],ClassMpl:[],ValuaMpl:[],MRBHeader:[],MRBItem:[],MRBSBIT:[],EBHeader:[],EBItem:[],EBSBIT:[],FBHeader:[],FBItem:[],FBSBIT:[],WBHeader:[],WBItem:[],WBSBIT:[],ONetwork:[],ONLAM:[],Workcenter:[],WCCost:[],ClassWC:[],ValueWC:[],GTList:[],GTOprs:[],GTComp:[],GTMPack:[],GTRel:[],GTSpack:[],GTPRT:[],GTInsp:[],GTClass:[],GTVal:[],ETList:[],ETOprs:[],ETComp:[],ETMPack:[],ETRel:[],ETSpack:[],ETPRT:[],ETInsp:[],ETClass:[],ETVal:[],FTList:[],FTOprs:[],FTComp:[],FTMPack:[],FTRel:[],FTSpack:[],FTPRT:[],FTInsp:[],FTClass:[],FTVal:[],Olink:[],OLClass:[],OLVal:[],AiwModel:[],AiwModelRef:[]};if(n.length>0){for(var o=0;o<n.length;o++){var i={Tplnr:n[o].Functionallocation,Txtmi:n[o].Flocdescription,TplkzFlc:n[o].Strucindicator,Tplxt:n[o].StrucIndicatorDesc,EditMask:n[o].EditMask,Hierarchy:n[o].Hierarchy,Fltyp:n[o].Floccategory,Flttx:n[o].FlocCategoryDesc,Swerk:n[o].Maintplant,Plantname:n[o].MaintplantDesc,StorFloc:n[o].Location,Locationdesc:n[o].Locationdesc,Abckzfloc:n[o].Abckz,Abctx:n[o].Abctx,Bukrsfloc:n[o].Bukrs,Butxt:n[o].Butxt,City:n[o].City,KostFloc:n[o].Kostl,KokrFloc:n[o].Kokrs,Contareaname:n[o].Mctxt,PlntFloc:n[o].Werks,Planningplantdes:n[o].Planningplantdes,Ingrp:n[o].Ingrp,Plannergrpdesc:n[o].Innam,Arbplfloc:n[o].Arbpl,Wergwfloc:n[o].WcWerks,Gewrkfloc:n[o].MainArbpl,MainWcPlant:n[o].MainWerks,Tplma:n[o].SupFunctionallocation,Supflocdesc:n[o].SupFlocdescription,BeberFl:n[o].BeberFl,Fing:n[o].Fing,Tele:n[o].Tele,Submtiflo:n[o].ConstrType,Constdesc:n[o].ConstructionDesc,Eqart:n[o].TechnicalObjectTyp,Eartx:n[o].Description,Stattext:n[o].Stattext,StsmFloc:n[o].StsmEqui,Statproftxt:n[o].StsmEquiDesc,UstwFloc:n[o].UstwEqui,UswoFloc:n[o].UswoEqui,UstaFloc:n[o].UstaEqui,Adrnri:n[o].Adrnri,Deact:n[o].Deact,Type:n[o].viewParameter==="create"?true:false,Modeldesc:n[o].Modeldesc,Modelref:n[o].Modelref,Modelrver:n[o].Modelrver,Modelext:n[o].Modelext,Modelname:n[o].Modelname,Modelver:n[o].Modelver};s.FuncLoc.push(i);var d={Funcloc:n[o].Functionallocation};s.FLAddr.push(d);var c={Modelname:r.modelName,Version:r.modelVer,Parentkey:r.modelParKey,ModelnameRef:"",VersionRef:"",ParentkeyRef:"",Modeldesc:r.modelDesc};s.AiwModel.push(c)}}t.BusyDialog.open();var p=this.getView().getModel();p.create("/ChangeRequestSet",s,{success:function(n){t.BusyDialog.close();if(e==="C"){r.delEnable=true}else if(e==="D"){r.crtEnable=true;r.delEnable=false;r.modelName="";r.modelDesc="";r.modelVer="000";r.modelParKey=""}else if(e==="R"){if(n.AiwModel.results.length>0){var s=n.AiwModel.results[0];r.modelEnable=l.checkBooleanString(s.is_read_only);r.crtEnable=l.checkBooleanString(s.is_read_only);r.delEnable=l.checkBooleanString(s.is_read_only);r.modelName=s.Modelname;r.modelDesc=s.Modeldesc;r.modelVer=s.Version;r.modelParKey=s.Parentkey}r.AiwModelRef=n.AiwModelRef.results}a.setData(r);var o=sap.ui.getCore().getModel(t.oModelAIWFLOC).getData();for(var i=0;i<o.length;i++){if(o[i].Functionallocation===n.FuncLoc.results[i].Tplnr){o[i].Modeldesc=n.FuncLoc.results[i].Modeldesc;o[i].Modelref=n.FuncLoc.results[i].Modelref;o[i].Modelname=n.FuncLoc.results[i].Modelname;o[i].Modelver=n.FuncLoc.results[i].Modelver;o[i].Modelext=n.FuncLoc.results[i].Modelext}}},error:function(e){t.BusyDialog.close();var a=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){a[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){a[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=[];for(var n=0;n<a.length;n++){l.push({type:"Error",title:a[n]})}t.createMessagePopover(l,false)}})},onDrfatRefreshPress:function(){var e=this;var a=this.getView().getModel("valueHelp2");var r=[new sap.ui.model.Filter("Object","EQ","AIW")];a.read("/DraftSearchSet",{filters:r,success:function(a){var r=a.results;var l=new t(r);e.getView().byId("draftRequests").setModel(l);e.getView().byId("idDraftTab").setText("Drafts("+r.length+")")},error:function(e){}})},handleDraftItemPress:function(e){var t=this;var a=e.getSource().getBindingContext().getObject().UsmdCrequest;var r=!!t.getView().$().closest(".sapUiSizeCompact").length;sap.m.MessageBox.information(t.getView().getModel("i18n").getProperty("draft_check"),{actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:r?"sapUiSizeCompact":"",onClose:function(e){if(e==="OK"){t.readDraftCRdata(a)}}})},readDraftCRdata:function(e){var a=this;var r=new t({EQ:[],FL:[]});sap.ui.getCore().setModel(r,"dataOriginMOP");this.readDOIList("EQUI");this.readDOIList("FUNCLOC");var n=new t([]);sap.ui.getCore().setModel(n,"ainMOP");var s={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"000",modelParKey:"",modelParKeyVS:"None",modelEnable:true,crtEnable:true,delEnable:false};var o=new t(s);this.getView().setModel(o,"AIWModel");sap.ui.getCore().setModel(o,"AIWModel");this.onFirstObjectInit();this.onNextObjectInit();this.onLastObjectInit(true);var i=this.getView().getModel("ApprModel");function d(e,t){var r="/DeriveOLstatusSet(Netyp='"+e+"',Lvorm=false)";a.BusyDialog.open();i.read(r,{success:function(e){a.BusyDialog.close();var r=sap.ui.getCore().getModel("AIWListOLModel").getData();if(e.Statproftxt!==""&&(e.Ustw_oln!==""||e.Uswo_oln!=="")){r[t-1].usrSts=e.Usta_oln;r[t-1].stProfLblV=true;r[t-1].stsProf=e.Stsm_oln;r[t-1].stsProfV=true;r[t-1].stsProfDesc=e.Statproftxt;r[t-1].stsProfDescV=true;r[t-1].stsObj=e.Ustw_oln;r[t-1].stsObjLblV=true;r[t-1].stsObjV=true;r[t-1].stsWoLblV=true;r[t-1].stsWoNoV=true;r[t-1].stsWoNo=e.Uswo_oln;r[t-1].sysSts=e.Stattext}else{r[t-1].stProfLblV=false;r[t-1].stsProfV=false;r[t-1].stsProfDescV=false;r[t-1].stsObjLblV=false;r[t-1].stsObjV=false;r[t-1].stsWoLblV=false;r[t-1].stsWoNoV=false;r[t-1].usrSts="";r[t-1].stsProf="";r[t-1].stsProfDesc="";r[t-1].stsObj="";r[t-1].stsWoNo="";r[t-1].sysSts=""}if(t>1){t--;d(r[t-1].linkCat,t)}sap.ui.getCore().getModel("AIWListOLModel").setData(r);sap.ui.getCore().getModel("AIWListOLModel").refresh()},error:function(e){a.BusyDialog.close();var t=[];if(JSON.parse(e.responseText).error.innererror.errordetails===undefined||JSON.parse(e.responseText).error.innererror.errordetails.length===0){t[0]=JSON.parse(e.responseText).error.message.value}else{for(var r=0;r<JSON.parse(e.responseText).error.innererror.errordetails.length;r++){t[r]=JSON.parse(e.responseText).error.innererror.errordetails[r].message}}var l=t.join("\n");a.invokeMessage(l)}})}var c=[new sap.ui.model.Filter("Draft","EQ",e)];var p=["FLClass","FLAddr","FLAddrI","FLEmail","FLFax","FLMltxt","FLPermit","FuncLoc","FLLAM","FLLAMCH","FLPrtnr","FLTele","FLUrl","FLVal","FLALTLBEL","EqClass","EqAddr","EqAddrI","EqEmail","EqFax","EqMltxt","EqPermt","Equipment","EqLAM","EqLAMCH","EqPRT","EqPRTNR","EqStock","EqTel","EqUrl","EqVal","Equi_DOI","AINHeaderinfo","AINAttachments","AINCharacteristics","AINAnnounce","EqDFPS","MRBHeader","MRBItem","MRBSBIT","EBHeader","EBItem","EBSBIT","FBHeader","FBItem","FBSBIT","WBHeader","WBItem","WBSBIT","MSClass","MSLAM","MSPoint","MSVal","DataOrigin_N","Workcenter","WCCapa","WCCost","ValueWC","ClassWC","GTClass","GTComp","GTInsp","GTList","GTMPack","GTMpackRead","GTOprs","GTPRT","GTRel","GTSpack","GTVal","ETClass","ETComp","ETInsp","ETList","ETMPack","ETMpackRead","ETOprs","ETPRT","ETRel","ETSpack","ETVal","FTClass","FTComp","FTInsp","FTList","FTMPack","FTMpackRead","FTOprs","FTPRT","FTRel","FTSpack","FTVal","MPCycle","MPItem","MPLAM","MPLAN","MPOBList","ClassMpl","ValuaMpl","OLClass","OLVal","Olink","OLLAM","ONLAM","ONText","ONetwork","ONWClass","ONVal","ONALAM","ONatevt","ONattrp","ONLink","ONLLAM"];this.BusyDialog.open();i.read("/ChangeRequestSet",{filters:c,urlParameters:{$expand:p},success:function(e){a.BusyDialog.close();var r=e.results[0];a.getView().byId("reasonForRequest").setSelectedKey(r.Reason);a.getView().byId("Description").setValue(r.CrDescription);a.getView().byId("idPriority").setSelectedKey(r.Priority);a.getView().byId("idDueDate").setDateValue(r.Duedate);a.getView().byId("idDueDate").setDateValue();var n={modelName:"",modelNameVS:"None",modelDesc:"",modelDescVS:"None",modelVer:"000",modelParKey:"",modelParKeyVS:"None",modelEnable:true,crtEnable:true,delEnable:false};var s=new t(n);a.getView().setModel(s,"AIWModel");if(r.FuncLoc){var o=r.FuncLoc.results;if(o){for(var i=0;i<o.length;i++){var c={altlbl:[],attachmentCount:"0",Guids:"",TplnrEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,charNewButton:true,intlAddr:[],classItems:[],characteristics:[],FunctionallocationVS:"None",FunctionallocationVST:"",FlocdescriptionVS:"None",FlocdescriptionVST:"",StrucindicatorVS:"None",StrucindicatorVST:"",FloccategoryVS:"None",FloccategoryVST:"",SupFunctionallocationVS:"None",SupFunctionallocationVST:"",MaintplantVS:"None",MaintplantVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVST:"",AbckzVS:"None",AbckzVST:"",MainArbplVS:"None",MainArbplVST:"",BeberFlVS:"None",BeberFlVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ArbplVS:"None",ArbplVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",TplnrEnabled:true,FunctionalLocEnabled:true,FlocCatEnabled:true,StrucIndEnabled:true,MaintplantEnabled:true,BukrsEnabled:true};c.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"};c.Title=c.Title?c.Title:"";c.TitleCode=c.TitleCode?c.TitleCode:"";c.Name1=c.Name1?c.Name1:"";c.Name2=c.Name2?c.Name2:"";c.Name3=c.Name3?c.Name3:"";c.Name4=c.Name4?c.Name4:"";c.Sort1=c.Sort1?c.Sort1:"";c.Sort2=c.Sort2?c.Sort2:"";c.NameCo=c.NameCo?c.NameCo:"";c.PostCod1=c.PostCod1?c.PostCod1:"";c.City1=c.City1?c.City1:"";c.Building=c.Building?c.Building:"";c.Floor=c.Floor?c.Floor:"";c.Roomnum=c.Roomnum?c.Roomnum:"";c.Strsuppl1=c.Strsuppl1?c.Strsuppl1:"";c.Strsuppl2=c.Strsuppl2?c.Strsuppl2:"";c.Strsuppl3=c.Strsuppl3?c.Strsuppl3:"";c.AddrLocation=c.AddrLocation?c.AddrLocation:"";c.RefPosta=c.RefPosta?c.RefPosta:"";c.Landx=c.Landx?c.Landx:"";c.TimeZone=c.TimeZone?c.TimeZone:"";c.Region=c.Region?c.Region:"";c.RegionDesc=c.RegionDesc?c.RegionDesc:"";c.Tplnr=o[i].Tplnr;c.Functionallocation=o[i].FlocRef;c.Flocdescription=o[i].Txtmi;c.EditMask=o[i].EditMask;c.Hierarchy=o[i].Hierarchy;c.Floccategory=o[i].Fltyp;c.FlocCategoryDesc=o[i].Flttx;c.Strucindicator=o[i].TplkzFlc;c.StrucIndicatorDesc=o[i].Tplxt;c.Lvorm=o[i].Lvorm;c.Deact=o[i].Deact;c.Trpnr=o[i].Trpnr;c.Refflocdesc=o[i].Refflocdesc;c.SupFunctionallocation=o[i].Tplma;c.SupFlocdescription=o[i].Supflocdesc;c.Stattext=o[i].Stattext;c.UstaEqui=o[i].UstaFloc;c.StsmEqui=o[i].StsmFloc;c.StsmEquiDesc=o[i].Statproftxt;c.UstwEqui=o[i].UstwFloc;c.UswoEqui=o[i].UswoFloc;c.TechnicalObjectTyp=o[i].Eqart;c.Description=o[i].Eartx;c.Begru=o[i].Begru;c.Begtx=o[i].Begtx;c.Brgew=o[i].Brgew;c.Gewei=o[i].Gewei;c.Invnr=o[i].Invnr;c.Groes=o[i].Groes;c.Inbdt=o[i].Inbdt;c.Answt=o[i].Answt;c.Waers=o[i].Waers;c.Ansdt=o[i].Ansdt;c.Herst=o[i].Herst;c.Typbz=o[i].Typbz;c.Mapar=o[i].Mapar;c.Serge=o[i].Serge;c.Herld=o[i].Herld;c.Baujj=o[i].Baujj;c.Baumm=o[i].Baumm;c.MonthName=o[i].MonthName;c.Maintplant=o[i].Swerk;c.MaintplantDesc=o[i].Plantname;c.Location=o[i].StorFloc;c.Locationdesc=o[i].Locationdesc;c.Msgrp=o[i].Msgrp;c.BeberFl=o[i].BeberFl;c.Fing=o[i].Fing;c.Tele=o[i].Tele;c.Eqfnr=o[i].Eqfnr;c.Abckz=o[i].Abckzfloc;c.Abctx=o[i].Abctx;c.Bukrs=o[i].Bukrsfloc;c.Butxt=o[i].Butxt;c.City=o[i].City;c.GsbeFloc=o[i].GsbeFloc;c.Gtext=o[i].Gtext;c.Anln1Fl=o[i].Anln1Fl;c.AnlaFl=o[i].AnlaFl;c.Txt50=o[i].Txt50;c.Kostl=o[i].KostFloc;c.Kokrs=o[i].KokrFloc;c.Mctxt=o[i].Contareaname;c.Posid=o[i].Posid;c.Post1=o[i].Post1;c.DaufFloc=o[i].DaufFloc;c.Standorderdesc=o[i].Standorderdesc;c.AufnFloc=o[i].AufnFloc;c.SettleOrdDesc=o[i].SettleOrdDesc;c.Werks=o[i].PlntFloc;c.Planningplantdes=o[i].Planningplantdes;c.Ingrp=o[i].Ingrp;c.Innam=o[i].Plannergrpdesc;c.Arbpl=o[i].Arbplfloc;c.Ktext=o[i].Workcenterdesc;c.WcWerks=o[i].Wergwfloc;c.MainArbpl=o[i].Gewrkfloc;c.MainKtext=o[i].MainWcDesc;c.MainWerks=o[i].MainWcPlant;c.RbnrFloc=o[i].RbnrFloc;c.Rbnrx=o[i].Rbnrx;c.Tplma=o[i].Tplma;c.SupFunctionallocation=o[i].Tplma;c.Supflocdesc=o[i].Supflocdesc;c.SupFlocdescription=o.Supflocdesc;c.Posnr=o[i].Posnr;c.Trpnr=o[i].Trpnr;c.Refflocdesc=o[i].Refflocdesc;c.Iequi=o[i].Iequi;c.Einzl=o[i].Einzl;c.ConstrType=o[i].Submtiflo;c.ConstructionDesc=o[i].Constdesc;c.CgwldtFl=o[i].CgwldtFl;c.CgwlenFl=o[i].CgwlenFl;c.CmganrFl=o[i].CmganrFl;c.CwagetFl=o[i].CwagetFl;c.CgaerbFl=o[i].CgaerbFl;c.VgwldtFl=o[i].VgwldtFl;c.VgwlenFl=o[i].VgwlenFl;c.VmganrFl=o[i].VmganrFl;c.VwagetFl=o[i].VwagetFl;c.VgaerbFl=o[i].VgaerbFl;c.Vkorg=o[i].Vkorg;c.Vkorgtxt=o[i].Vkorgtxt;c.Vtweg=o[i].Vtweg;c.Vtwegtxt=o[i].Vtwegtxt;c.Spart=o[i].Spart;c.Sparttxt=o[i].Sparttxt;c.Vkbur=o[i].Vkbur;c.Vkburtxt=o[i].Vkburtxt;c.Vkgrp=o[i].Vkgrp;c.Vkgrptxt=o[i].Vkgrptxt;c.Alkey=o[i].Alkey;c.Altxt=o[i].Altxt;c.viewParameter=o[i].Type?"create":"change";c.Modeldesc=o[i].Modeldesc;c.Modelref=o[i].Modelref;c.Modelrver=o[i].Modelrver;c.Modelext=o[i].Modelext;c.Modelname=o[i].Modelname;c.Modelver=o[i].Modelver;c.Adrnr=o[i].Adrnr;if(o[i].Swerk!==""){c.BukrsEnabled=false}else{c.MaintplantEnabled=true;c.BukrsEnabled=true}if(o[i].Fltyp==="L"&&r.FLLAM){var p=r.FLLAM.results;if(p){for(var u=0;u<p.length;u++){if(p[u].Funcloc===o[i].Tplnr){c.lam=p[u];c.lam.LrpidDesc=p[u].LrpDescr;c.lam.LinUnitDesc=p[u].Uomtext;c.lam.enableLrp=true;c.lam.enableMarker=true;c.lam.LamDer="D";break}}}}if(r.FLClass){var g=$.map(r.FLClass.results,function(e){return $.extend(true,{},e)});if(g){if(g.length>0){for(var m=0;m<g.length;m++){if(c.Tplnr===g[m].Funcloc){g[m].ctEnable=false;g[m].classEnable=false;g[m].ClassTypeDesc=g[m].Artxt;delete g[m].Artxt;g[m].ClassDesc=g[m].Kltxt;delete g[m].Kltxt;delete g[m].Changerequestid;delete g[m].Clint;delete g[m].Service;g[m].classDelEnable=true;c.classItems.push(g[m])}}}}}if(r.FLVal){var f=$.map(r.FLVal.results,function(e){return $.extend(true,{},e)});if(f){if(f.length>0){for(var h=0;h<f.length;h++){if(c.Tplnr===f[h].Funcloc){f[h].cNameEnable=false;f[h].Textbz=f[h].Atwtb;delete f[h].Ataut;delete f[h].Ataw1;delete f[h].Atawe;delete f[h].Atcod;delete f[h].Atflb;delete f[h].Atflv;delete f[h].Atimb;delete f[h].Atsrt;delete f[h].Atvglart;delete f[h].Atzis;delete f[h].Changerequestid;delete f[h].Charid;delete f[h].Classtype;delete f[h].Service;delete f[h].Valcnt;f[h].slNo=h+1;f[h].flag=f[h].Class+"-"+f[h].slNo;c.characteristics.push(f[h]);for(var u=0;u<c.characteristics.length;u++){var S=1;for(var T=0;T<c.characteristics.length;T++){if(u===T){continue}if(c.characteristics[T].Atnam===c.characteristics[u].Atnam&&c.characteristics[T].Class===c.characteristics[u].Class){S++}}if(S>1){c.characteristics[u].charDltEnable=true}else{c.characteristics[u].charDltEnable=false}if(c.characteristics[u].Atein===true){c.characteristics[u].charAddEnable=false}}}}}}}if(r.FLAddr){if(r.FLAddr.results){var M=r.FLAddr.results;if(M){if(M.length>0){for(var b=0;b<M.length;b++){if(c.Tplnr===M[b].Funcloc){var E=sap.ui.getCore().getModel("flocAddressView");var v=E.getData();var C=true;var x;if(v.length>0){for(var V=0;V<v.length;V++){if(c.Functionallocation===v[V].Functionallocation){C=false;break}}}if(C){x={Functionallocation:c.Functionallocation,IsEditable:M[b].IsEditable};v.push(x);E.setData(v)}c.Title=M[b].Titletxt;c.Name1=M[b].Name1;c.Name2=M[b].Name2;c.Name3=M[b].Name3;c.Name4=M[b].Name4;c.Sort1=M[b].Sort1;c.Sort2=M[b].Sort2;c.NameCo=M[b].NameCo;c.Building=M[b].Building;c.Floor=M[b].Floor;c.Roomnum=M[b].Roomnum;c.Street=M[b].Street;c.HouseNr1=M[b].HouseNr1;c.HouseNr2=M[b].HouseNr2;c.Strsuppl1=M[b].Strsuppl1;c.Strsuppl2=M[b].Strsuppl2;c.Strsuppl3=M[b].Strsuppl3;c.AddrLocation=M[b].Location;c.District=M[b].District;c.PostCod1=M[b].PostCod1;c.City1=M[b].City1;c.RPostafl=M[b].RPostafl;c.RefPosta=M[b].RPostafl;c.Landx=M[b].Landx;c.RfePost=M[b].RPostFl;c.Region=M[b].RPostFl;c.Regiotxt=M[b].Regiotxt;c.RegionDesc=M[b].Regiotxt;c.HomeCity=M[b].HomeCity;c.TimeZone=M[b].TimeZone;c.Taxjurcod=M[b].Taxjurcod;c.Regiogrou=M[b].Regiogrou;c.RfePostl=M[b].RfePostl;c.Dontusestxt=M[b].Dontusestxt;c.PoBox=M[b].PoBox;c.PoboxNum=M[b].PoboxNum;c.DlvsrvTy=M[b].DlvsrvTy;c.DlvsrvNr=M[b].DlvsrvNr;c.PostCod2=M[b].PostCod2;c.PoboxLoc=M[b].PoboxLoc;c.PoboxLby=M[b].PoboxLby;c.PoboxCty=M[b].PoboxCty;c.LandxP=M[b].LandxP;c.RfePstal=M[b].RPstaFl;c.RegiotxtP=M[b].RegiotxtP;c.Dontuseptxt=M[b].Dontuseptxt;c.PostCod3=M[b].PostCod3;c.Remark=M[b].Remark}}}}}}var P=r.FLAddrI.results;if(P){for(var u=0;u<P.length;u++){if(P[u].Funcloc===c.Tplnr){P[u].AdNationEnable=false;P[u].City1iVS="None";P[u].StreetiVS="None";c.intlAddr.push(P[u])}}}var I=r.FLALTLBEL.results;if(I){for(var T=0;T<I.length;T++){if(I[T].Funcloc===c.Tplnr){var L={Funcloc:I[T].Funcloc,AltAlkey:I[T].AltAlkey,Altxt:I[T].Altxt,AltStrno:I[T].AltStrno,AltTplkz:I[T].AltTplkz,Tplxt:I[T].Tplxt,Name1i:I[T].Editm,Actvs:I[T].Actvs,AltPrkey:I[T].AltPrkey,AltReuse:I[T].AltReuse,enableLblSys:false,enableAltLbl:false,enableStrInd:false,LblSysVS:"None",AltLblVS:"None",StrIndVS:"None"};c.altlbl.push(L)}}}if(o[i].Modelname&&o[i].Modelname!==""){n.modelName=o[i].Modelname;n.modelDesc=o[i].Modeldesc;n.modelVer=o[i].Modelver;n.modelParKey=o[i].Tplnr;n.crtEnable=true;n.delEnable=true;var s=new t(n);a.getView().setModel(s,"AIWModel")}var y=$.map(a.DOIarrayFL,function(e){return $.extend(true,{},e)});sap.ui.getCore().getModel("dataOriginMOP").getData().FL.push({key:c.Functionallocation,DOI:y});a.handleCreatePress(a,c,a.oModelAIWFLOC)}var D=sap.ui.getCore().getModel("dataOriginMOP").getData().FL;for(var k=0;k<r.FuncLoc.results.length;k++){var F=r.FuncLoc.results[k];for(var u=0;u<D.length;u++){if(F.FlocRef===D[u].key){var A=D[u].DOI;if(F.Swerki===""){A[0].maintenance=false;A[0].instLoc=false;A[0].SupFlVal="";A[0].currentVal="";A[0].targetVal=""}else if(F.Swerki==="D"){A[0].maintenance=true;A[0].instLoc=false;A[0].SupFlVal="";A[0].currentVal=F.Swerk;A[0].targetVal=F.Swerk}else{A[0].maintenance=false;A[0].instLoc=true;A[0].SupFlVal=F.Swerk;A[0].currentVal="";A[0].targetVal=F.Swerk}if(F.Storti===""){A[1].maintenance=false;A[1].instLoc=false;A[1].SupFlVal="";A[1].currentVal="";A[1].targetVal=""}else if(F.Storti==="D"){A[1].maintenance=true;A[1].instLoc=false;A[1].SupFlVal="";A[1].currentVal=F.StorFloc;A[1].targetVal=F.StorFloc}else{A[1].maintenance=false;A[1].instLoc=true;A[1].SupFlVal=F.StorFloc;A[1].currentVal="";A[1].targetVal=F.StorFloc}if(F.Beberi===""){A[2].maintenance=false;A[2].instLoc=false;A[2].SupFlVal="";A[2].currentVal="";A[2].targetVal=""}else if(F.Beberi==="D"){A[2].maintenance=true;A[2].instLoc=false;A[2].SupFlVal="";A[2].currentVal=F.BeberFl;A[2].targetVal=F.BeberFl}else{A[2].maintenance=false;A[2].instLoc=true;A[2].SupFlVal=F.BeberFl;A[2].currentVal="";A[2].targetVal=F.BeberFl}if(F.Ppsidi===""){A[3].maintenance=false;A[3].instLoc=false;A[3].SupFlVal="";A[3].currentVal="";A[3].targetVal=""}else if(F.Ppsidi==="D"){A[3].maintenance=true;A[3].instLoc=false;A[3].SupFlVal="";A[3].currentVal=F.Arbplfloc;A[3].targetVal=F.Arbplfloc}else{A[3].maintenance=false;A[3].instLoc=true;A[3].SupFlVal=F.Arbplfloc;A[3].currentVal="";A[3].targetVal=F.Arbplfloc}if(F.Abckzi===""){A[4].maintenance=false;A[4].instLoc=false;A[4].SupFlVal="";A[4].currentVal="";A[4].targetVal=""}else if(F.Abckzi==="D"){A[4].maintenance=true;A[4].instLoc=false;A[4].SupFlVal="";A[4].currentVal=F.Abckzfloc;A[4].targetVal=F.Abckzfloc}else{A[4].maintenance=false;A[4].instLoc=true;A[4].SupFlVal=F.Abckzfloc;A[4].currentVal="";A[4].targetVal=F.Abckzfloc}if(F.Bukrsi===""){A[5].maintenance=false;A[5].instLoc=false;A[5].SupFlVal="";A[5].currentVal="";A[5].targetVal=""}else if(F.Bukrsi==="D"){A[5].maintenance=true;A[5].instLoc=false;A[5].SupFlVal="";A[5].currentVal=F.Bukrsfloc;A[5].targetVal=F.Bukrsfloc}else{A[5].maintenance=false;A[5].instLoc=true;A[5].SupFlVal=F.Bukrsfloc;A[5].currentVal="";A[5].targetVal=F.Bukrsfloc}if(F.Kostli===""){A[6].maintenance=false;A[6].instLoc=false;A[6].SupFlVal="";A[6].currentVal="";A[6].targetVal=""}else if(F.Kostli==="D"){A[6].maintenance=true;A[6].instLoc=false;A[6].SupFlVal="";A[6].currentVal=F.KostFloc;A[6].targetVal=F.KostFloc}else{A[6].maintenance=false;A[6].instLoc=true;A[6].SupFlVal=F.KostFloc;A[6].currentVal="";A[6].targetVal=F.KostFloc}if(F.Kokrsi===""){A[7].maintenance=false;A[7].instLoc=false;A[7].SupFlVal="";A[7].currentVal="";A[7].targetVal=""}else if(F.Kokrsi==="D"){A[7].maintenance=true;A[7].instLoc=false;A[7].SupFlVal="";A[7].currentVal=F.KokrFloc;A[7].targetVal=F.KokrFloc}else{A[7].maintenance=false;A[7].instLoc=true;A[7].SupFlVal=F.KokrFloc;A[7].currentVal="";A[7].targetVal=F.KokrFloc}if(F.Iwerki===""){A[8].maintenance=false;A[8].instLoc=false;A[8].SupFlVal="";A[8].currentVal="";A[8].targetVal=""}else if(F.Iwerki==="D"){A[8].maintenance=true;A[8].instLoc=false;A[8].SupFlVal="";A[8].currentVal=F.PlntFloc;A[8].targetVal=F.PlntFloc}else{A[8].maintenance=false;A[8].instLoc=true;A[8].SupFlVal=F.PlntFloc;A[8].currentVal="";A[8].targetVal=F.PlntFloc}if(F.Ingrpi===""){A[9].maintenance=false;A[9].instLoc=false;A[9].SupFlVal="";A[9].currentVal="";A[9].targetVal=""}else if(F.Ingrpi==="D"){A[9].maintenance=true;A[9].instLoc=false;A[9].SupFlVal="";A[9].currentVal=F.Ingrp;A[9].targetVal=F.Ingrp}else{A[9].maintenance=false;A[9].instLoc=true;A[9].SupFlVal=F.Ingrp;A[9].currentVal="";A[9].targetVal=F.Ingrp}if(F.Lgwidi===""){A[10].maintenance=false;A[10].instLoc=false;A[10].SupFlVal="";A[10].currentVal="";A[10].targetVal=""}else if(F.Lgwidi==="D"){A[10].maintenance=true;A[10].instLoc=false;A[10].SupFlVal="";A[10].currentVal=F.Gewrkfloc;A[10].targetVal=F.Gewrkfloc}else{A[10].maintenance=false;A[10].instLoc=true;A[10].SupFlVal=F.Gewrkfloc;A[10].currentVal="";A[10].targetVal=F.Gewrkfloc}if(F.Adrnri===""){A[12].maintenance=false;A[12].instLoc=false;A[12].SupFlVal="";A[12].currentVal="";A[12].targetVal=""}else if(F.Adrnri==="D"){A[12].maintenance=true;A[12].instLoc=false;A[12].SupFlVal="";A[12].currentVal=F.Adrnr;A[12].targetVal=F.Adrnr}else{A[12].maintenance=false;A[12].instLoc=true;A[12].SupFlVal=F.Adrnr;A[12].currentVal="";A[12].targetVal=F.Adrnr}}}}}}if(r.Equipment){var w=r.Equipment.results;if(w){for(var q=0;q<w.length;q++){var c={intlAddr:[],classItems:[],characteristics:[],PRTInfo:{},dfps:{},attachmentCount:"0",Guids:"",ConstrTypeMaxL:0,charValueMaxL:0,EqunrEnabled:true,EquipCatEnabled:true,MaintplantEnabled:true,BukrsEnabled:true,TplnrEnabled:true,SuperordinateEquipEnabled:true,EqunrVS:"None",EqunrVST:"",EqktxVS:"None",EqktxVST:"",EquipmentCatogoryVS:"None",EquipmentCatogoryVST:"",MaintplantVS:"None",MaintplantVST:"",TplnrVS:"None",TplnrVST:"",SuperordinateEquipVS:"None",SuperordinateEquipVST:"",StsmEquiVS:"None",StsmEquiVST:"",UstwEquiVS:"None",UstwEquiVST:"",UswoEquiVS:"None",UswoEquiVST:"",TechnicalObjectTypVS:"None",TechnicalObjectTypVST:"",LocationVS:"None",LocationVSTL:"",AbckzVS:"None",AbckzVST:"",ArbplVS:"None",ArbplVST:"",BukrsVS:"None",BukrsVST:"",KostlVS:"None",KostlVST:"",WerksVS:"None",WerksVST:"",IngrpVS:"None",IngrpVST:"",ConstrTypeVS:"None",ConstrTypeVST:"",RefPostaVS:"None",RefPostaVST:"",MainArbplVS:"None",MainArbplVST:"",LangucodeVS:"None",LangucodeVST:"",TimeZoneVS:"None",TimeZoneVST:"",PlanvPrtVS:"None",PlanvPrtVST:"",SteufPrtVS:"None",SteufPrtVST:"",KtschPrtVS:"None",KtschPrtVST:"",EwformprtVS:"None",EwformprtVST:"",ConstrTypeMaxL:0,charValueMaxL:0,charNewButton:true,dfps:{Tailno:"",TailnoVS:"None",Area:"",AreaDesc:"",AreaPrfl:"",Site:"",SiteDesc:"",SiteVS:"None",SitePrfl:"",MPO:"",MPODesc:"",RIC:"",RICDesc:"",ModelId:"",ModelIdDesc:"",ModelIdVS:"None",ForeignEq:false,TechSts:"",OperSts:"0001",Remark:"",dfpsCrtEnabled:true,dfpsDltEnabled:false,dfpsEnabled:false,TailnoReq:false}};c.Equnr=w[q].Equnr;c.Eqktx=w[q].Txtmi;c.EquipmentCatogory=w[q].Eqtyp;c.EquipCatgDescription=w[q].Etytx;c.ValidFrom=w[q].DataEeqz;c.DatbEeqz=w[q].DatbEeqz;c.LvormEqi=w[q].LvormEqi;c.Deact=w[q].Deact;c.DeactEnable=false;c.Stattext=w[q].Stattext;c.UstaEqui=w[q].UstaEqui;c.StsmEqui=w[q].StsmEqui;c.StsmEquiDesc=w[q].Statproftxt;c.UstwEqui=w[q].UstwEqui;c.UswoEqui=w[q].UswoEqui;c.TechnicalObjectTyp=w[q].Eqart;c.Description=w[q].Eartx;c.AuthorizGroup=w[q].Begru;c.Begtx=w[q].Begtx;c.GrossWt=w[q].Brgew;c.Gewei=w[q].Gewei;c.Invnr=w[q].Invnr;c.GroesEqu=w[q].GroesEqu;c.Inbdt=w[q].Inbdt;c.Answt=w[q].Answt;c.Waers=w[q].Waers;c.Ansdt=w[q].Ansdt;c.Herst=w[q].Herst;c.Typbz=w[q].Typbz;c.MapaEeqz=w[q].MapaEeqz;c.Serge=w[q].Serge;c.Herld=w[q].Herld;c.CountryName=w[q].CountryName;c.ConstructYear=w[q].Baujj;c.ConstructMth=w[q].BaummEqi;c.MonthName=w[q].MonthName;c.Maintplant=w[q].Swerk;c.MaintplantDesc=w[q].Name1;c.Location=w[q].StorEilo;c.Locationdesc=w[q].Locationdesc;c.MsgrEilo=w[q].MsgrEilo;c.Abckz=w[q].AbckEilo;c.Abctx=w[q].Abctx;c.BeberFl=w[q].BebeEilo;c.Fing=w[q].Fing;c.Tele=w[q].Tele;c.EqfnEilo=w[q].EqfnEilo;c.Bukrs=w[q].BukrEilo;c.Butxt=w[q].Butxt;c.GsbeEilo=w[q].GsbeEilo;c.Gtext=w[q].Gtext;c.Anl1Eilo=w[q].Anl1Eilo;c.Anl2Eilo=w[q].Anl2Eilo;c.AssesmentDesc=w[q].Txt50;c.Kostl=w[q].KostEilo;c.Kokrs=w[q].KokrEilo;c.Mctxt=w[q].Contareaname;c.Posid=w[q].Posid;c.Post1=w[q].Post1;c.DaufEilo=w[q].DaufEilo;c.Standorderdesc=w[q].Standorderdesc;c.Settlement=w[q].AufnEilo;c.SettleOrdDesc=w[q].SettleOrdDesc;c.Werks=w[q].PplaEeqz;c.Planningplantdes=w[q].Planningplantdes;c.Ingrp=w[q].IngrEeqz;c.Innam=w[q].Plannergrpdesc;c.Arbpl=w[q].ArbpEilo;c.Ktext=w[q].Workcenterdesc;c.WcWerks=w[q].WorkCenterPlant;c.MainArbpl=w[q].ArbpEeqz;c.MainKtext=w[q].MainWcDesc;c.MainWerks=w[q].MainWcPlant;c.RbnrEeqz=w[q].RbnrEeqz;c.CatalogProfDesc=w[q].Rbnrx;c.SuperordinateEquip=w[q].HequEeqz;c.SuperordinateEquipDesc=w[q].SuperordEqDes;c.EquipPosition=w[q].HeqnEeqz;c.Liznr=w[q].Liznr;c.Adrnr=w[q].Adrnr;c.TechIdNum=w[q].TidnEeqz;c.ConstrType=w[q].SubmEeqz;c.ConstructionDesc=w[q].Constdesc;c.viewParameter=w[q].Type?"create":"change";if(w.Swerk!==""){c.BukrsEnabled=false}else{c.BukrsEnabled=true}if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined){c.TplnrEnabled=false;c.SuperordinateEquipEnabled=true}if(c.SuperordinateEquip===""&&c.Tplnr!==""&&c.Tplnr!==undefined){c.TplnrEnabled=true;c.SuperordinateEquipEnabled=false}if(c.SuperordinateEquip!==""&&c.SuperordinateEquip!==undefined||c.Tplnr!==""&&c.Tplnr!==undefined){c.MaintplantEnabled=false}else{c.MaintplantEnabled=true}if(w[q].Eqtyp!=="P"){c.Tplnr=w[q].TplnEilo;c.Pltxt=w[q].Flocdescription}else{c.Tplnr="";c.Pltxt=""}c.MatEqu=w[q].MatEqu;c.Materialdesc=w[q].Materialdesc;c.Sernr=w[q].Sernr;c.Lsernr=w[q].Lsernr;c.Kmatn=w[q].Kmatn;c.Funcid=w[q].Funcid;c.Frcfit=w[q].Frcfit;c.Frcrmv=w[q].Frcrmv;c.SubmEeqz=w[q].SubmEeqz;c.Vkorg=w[q].Vkorg;c.Vkorgtxt=w[q].Vkorgtxt;c.Vtweg=w[q].Vtweg;c.Vtwegtxt=w[q].Vtwegtxt;c.Spart=w[q].Spart;c.Sparttxt=w[q].Sparttxt;c.Vkbur=w[q].Vkbur;c.Vkburtxt=w[q].Vkburtxt;c.Vkgrp=w[q].Vkgrp;c.Vkgrptxt=w[q].Vkgrptxt;c.CgwldtEq=w[q].CgwldtEq;c.CgwlenEq=w[q].CgwlenEq;c.CmganrEq=w[q].CmganrEq;c.CwagetEq=w[q].CwagetEq;c.CgaerbEq=w[q].CgaerbEq;c.VgwldtEq=w[q].VgwldtEq;c.VgwlenEq=w[q].VgwlenEq;c.VmganrEq=w[q].VmganrEq;c.VwagetEq=w[q].VwagetEq;c.VgaerbEq=w[q].VgaerbEq;c.EliefEqi=w[q].EliefEqi;c.Kun1Eeqz=w[q].Kun1Eeqz;c.Pstlz1=w[q].Pstlz1;c.City1=w[q].City1;c.Kun2Eeqz=w[q].Kun2Eeqz;c.Pstlz2=w[q].Pstlz2;c.City2=w[q].City2;c.Kun3Eeqz=w[q].Kun3Eeqz;c.Pstlz3=w[q].Pstlz3;c.City3=w[q].City3;c.AuldtEqi=w[q].AuldtEqi;c.PstcdCcust=w[q].PstcdCcust;c.LocatCcust=w[q].LocatCcust;c.KundeEq=w[q].KundeEq;c.Insdate=w[q].Insdate===null?"":w[q].Insdate;c.Instime=l.getTime(w[q].Instime);c.Modelid=w[q].Modelid;c.Modelname=w[q].Modelnam;c.ModelDescription=w[q].ModelDescription;c.Template=w[q].Template;c.GlobalId=w[q].GlobalId;c.Manuf=w[q].Manuf;c.IsModel=w[q].IsModel;c.CopyFrom=w[q].CopyFrom;c.Modelid=w[q].Modelid;c.Ppeguid=w[q].Ppeguid;c.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"};c.Title=c.Title?c.Title:"";c.TitleCode=c.TitleCode?c.TitleCode:"";c.Name1=c.Name1?c.Name1:"";c.Name2=c.Name2?c.Name2:"";c.Name3=c.Name3?c.Name3:"";c.Name4=c.Name4?c.Name4:"";c.Sort1=c.Sort1?c.Sort1:"";c.Sort2=c.Sort2?c.Sort2:"";c.NameCo=c.NameCo?c.NameCo:"";c.PostCod1=c.PostCod1?c.PostCod1:"";c.City1=c.City1?c.City1:"";c.Building=c.Building?c.Building:"";c.Floor=c.Floor?c.Floor:"";c.Roomnum=c.Roomnum?c.Roomnum:"";c.Strsuppl1=c.Strsuppl1?c.Strsuppl1:"";c.Strsuppl2=c.Strsuppl2?c.Strsuppl2:"";c.Strsuppl3=c.Strsuppl3?c.Strsuppl3:"";c.AddrLocation=c.AddrLocation?c.AddrLocation:"";c.RefPosta=c.RefPosta?c.RefPosta:"";c.Landx=c.Landx?c.Landx:"";c.TimeZone=c.TimeZone?c.TimeZone:"";c.Region=c.Region?c.Region:"";c.RegionDesc=c.RegionDesc?c.RegionDesc:"";if(w[q].Eqtyp==="L"&&r.EqLAM){var p=r.EqLAM.results;if(p){for(var u=0;u<p.length;u++){if(p[u].Equi===w[q].Equnr){c.lam=p[u];c.lam.LrpidDesc=p[u].LrpDescr;c.lam.LinUnitDesc=p[u].Uomtext;break}}}}if(r.EqPRT){if(r.EqPRT.results){var W=r.EqPRT.results;if(W){if(W.length>0){for(var B=0;B<W.length;B++){if(c.Equnr===W[B].Equi){c.PRTInfo.PlanvPrt=W[B].PlanvPrt;c.PRTInfo.PlanvPrttxt=W[B].PlanvPrttxt;c.PRTInfo.Fgru1=W[B].Fgru1;c.PRTInfo.Fgru2=W[B].Fgru2;c.PRTInfo.Kzkbl=W[B].Kzkbl;c.PRTInfo.SteufPrt=W[B].SteufPrt;c.PRTInfo.SteufPrttxt=W[B].SteufPrttxt;c.PRTInfo.SteufRef=W[B].SteufRef;c.PRTInfo.KtschPrt=W[B].KtschPrt;c.PRTInfo.KtschPrttxt=W[B].KtschPrttxt;c.PRTInfo.Ktschref=W[B].Ktschref;c.PRTInfo.Ewformprt=W[B].Ewformprt;c.PRTInfo.Ewformprttxt=W[B].Ewformprttxt;c.PRTInfo.Ewformref=W[B].Ewformref;c.PRTInfo.Bzoffbprt=W[B].Bzoffbprt;c.PRTInfo.Bzoffbprttxt=W[B].Bzoffbprttxt;c.PRTInfo.Bzoffbref=W[B].Bzoffbref;c.PRTInfo.Offstb=W[B].Offstb;c.PRTInfo.Ehoffbprt=W[B].Ehoffbprt;c.PRTInfo.Offstbref=W[B].Offstbref;c.PRTInfo.Bzoffeprt=W[B].Bzoffeprt;c.PRTInfo.Bzoffeprttxt=W[B].Bzoffeprttxt;c.PRTInfo.Offsteref=W[B].Offsteref;c.PRTInfo.Offste=W[B].Offste;c.PRTInfo.Ehoffeprt=W[B].Ehoffeprt;c.PRTInfo.Offsteref=W[B].Offsteref;c.PRTInfo.Warpl=W[B].Warpl;c.PRTInfo.PointEq=W[B].PointEq}}}}}}if(r.EqDFPS){if(r.EqDFPS.results){var N=r.EqDFPS.results;if(N){if(N.length>0){for(var O=0;O<N.length;O++){if(c.Equnr===N[O].Equi){c.dfps.MeOwner=N[O].MeOwner;c.dfps.MeUser=N[O].MeUser;c.dfps.Tailno=N[O].DeviceId;c.dfps.Area=N[O].Topsiteid;c.dfps.AreaDesc=N[O].Topsitede;c.dfps.AreaPro=N[O].AreaPrfl;c.dfps.Site=N[O].SiteId;c.dfps.SiteDesc=N[O].SiteDesc;c.dfps.MPO=N[O].MpoId;c.dfps.MPODesc=N[O].MpoDescr;c.dfps.RIC=N[O].RicId;c.dfps.RICDesc=N[O].RicDescr;c.dfps.ModelId=N[O].ModelId;c.dfps.ModelIdDesc=N[O].ModelDes;c.dfps.ForeignEq=l.XtoTrue(N[O].Foreignob);c.dfps.TechSts=N[O].TecState;c.dfps.OperSts=N[O].DepState;c.dfps.Remark=N[O].DfpsRmrk;if(N[O].DeviceId!==""){c.dfps.dfpsCrtEnabled=false;c.dfps.dfpsDltEnabled=true;c.dfps.dfpsEnabled=true;c.dfps.TailnoReq=true}}}}}}}if(r.EqAddr){if(r.EqAddr.results){var R=r.EqAddr.results;if(R){if(R.length>0){for(var U=0;U<R.length;U++){if(c.Equnr===R[U].Equi){c.Title=R[U].Titletxt;c.Name1=R[U].Name1;c.Name2=R[U].Name2;c.Name3=R[U].Name3;c.Name4=R[U].Name4;c.Sort1=R[U].Sort1;c.Sort2=R[U].Sort2;c.NameCo=R[U].NameCo;c.Building=R[U].Building;c.Floor=R[U].Floor;c.Roomnum=R[U].Roomnum;c.Street=R[U].Street;c.HouseNr1=R[U].HouseNr1;c.HouseNr2=R[U].HouseNr2;c.Strsuppl1=R[U].Strsuppl1;c.Strsuppl2=R[U].Strsuppl2;c.Strsuppl3=R[U].Strsuppl3;c.AddrLocation=R[U].Location;c.District=R[U].District;c.PostCod1=R[U].PostCod1;c.City1=R[U].City1;c.RPostafl=R[U].RefPosta;c.RefPosta=R[U].RefPosta;c.Landx=R[U].Landx;c.RfePost=R[U].RfePost;c.Regiotxt=R[U].Regiotxt;c.HomeCity=R[U].HomeCity;c.TimeZone=R[U].TimeZone;c.Taxjurcod=R[U].Taxjurcod;c.Regiogrou=R[U].Regiogrou;c.RfePostl=R[U].RfePostl;c.Dontusestxt=R[U].Dontusestxt;c.PoBox=R[U].PoBox;c.PoboxNum=R[U].PoboxNum;c.DlvsrvTy=R[U].DlvsrvTy;c.DlvsrvNr=R[U].DlvsrvNr;c.PostCod2=R[U].PostCod2;c.PoboxLoc=R[U].PoboxLoc;c.PoboxLby=R[U].PoboxLby;c.PoboxCty=R[U].PoboxCty;c.LandxP=R[U].LandxP;c.RfePstal=R[U].RfePstal;c.RegiotxtP=R[U].RegiotxtP;c.Dontuseptxt=R[U].Dontuseptxt;c.PostCod3=R[U].PostCod3;c.Remark=R[U].Remark}}}}}}var P=r.EqAddrI.results;if(P){for(var u=0;u<P.length;u++){if(P[u].Equi===c.Equnr){P[u].AdNationEnable=false;P[u].City1iVS="None";P[u].StreetiVS="None";c.intlAddr.push(P[u])}}}var z=r.AINHeaderinfo.results;if(z){for(var K=0;K<z.length;K++){var H=z[0];var G={};G.Name=H.Name;G.Modelid=H.Modelid;G.Description=H.Description;G.Manufacturer=H.Manufacturer;G.Modeltemplate=H.Modeltemplate;G.Globalid=H.Globalid;G.moreInfo=true;G.linkVisible=false;G.deLinkVisible=false;G.equiCreate=w.AineqInd;G.AinEqunr=w.AinEqunr;sap.ui.getCore().getModel("ainMOP").getData().push({key:c.Equnr,AIN:G})}}if(r.EqClass){var j=$.map(r.EqClass.results,function(e){return $.extend(true,{},e)});if(j){if(j.length>0){for(var Q=0;Q<j.length;Q++){if(c.Equnr===j[Q].Equi){j[Q].ctEnable=false;j[Q].classEnable=false;j[Q].ClassTypeDesc=j[Q].Artxt;delete j[Q].Artxt;j[Q].ClassDesc=j[Q].Kltxt;delete j[Q].Kltxt;delete j[Q].Changerequestid;delete j[Q].Clint;delete j[Q].Service;c.classItems.push(j[Q])}}}}}if(r.EqVal){var _=$.map(r.EqVal.results,function(e){return $.extend(true,{},e)});if(_){if(_.length>0){for(var J=0;J<_.length;J++){if(c.Equnr===_[J].Equi){_[J].cNameEnable=false;_[J].Textbz=_[J].Atwtb;delete _[J].Ataut;delete _[J].Ataw1;delete _[J].Atawe;delete _[J].Atcod;delete _[J].Atflb;delete _[J].Atflv;delete _[J].Atimb;delete _[J].Atsrt;delete _[J].Atvglart;delete _[J].Atzis;delete _[J].Changerequestid;delete _[J].Charid;delete _[J].Classtype;delete _[J].Service;delete _[J].Valcnt;_[J].slNo=h+1;_[J].flag=_[J].Class+"-"+_[J].slNo;c.characteristics.push(_[J])}}for(var u=0;u<c.characteristics.length;u++){var S=1;for(var T=0;T<c.characteristics.length;T++){if(u===T){continue}if(c.characteristics[T].Atnam===c.characteristics[u].Atnam&&c.characteristics[T].Class===c.characteristics[u].Class){S++}}if(S>1){c.characteristics[u].charDltEnable=true}else{c.characteristics[u].charDltEnable=false}if(c.characteristics[u].Atein===true){c.characteristics[u].charAddEnable=false}}}}}var Z=$.map(a.DOIarrayEQ,function(e){return $.extend(true,{},e)});sap.ui.getCore().getModel("dataOriginMOP").getData().EQ.push({key:c.Equnr,DOI:Z});a.handleCreatePress(a,c,a.oModelAIWEQUI)}var X=sap.ui.getCore().getModel("dataOriginMOP").getData().EQ;for(var k=0;k<r.Equipment.results.length;k++){var F=r.Equipment.results[k];for(var u=0;u<X.length;u++){if(F.Equnr===X[u].key){var A=X[u].DOI;if(F.Swerki===""){A[0].maintenance=false;A[0].instLoc=false;A[0].SupFlVal="";A[0].currentVal="";A[0].targetVal=""}else if(F.Swerki==="D"){A[0].maintenance=true;A[0].instLoc=false;A[0].SupFlVal="";A[0].currentVal=F.Swerk;A[0].targetVal=F.Swerk}else{A[0].maintenance=false;A[0].instLoc=true;A[0].SupFlVal=F.Swerk;A[0].currentVal="";A[0].targetVal=F.Swerk}if(F.Storti===""){A[1].maintenance=false;A[1].instLoc=false;A[1].SupFlVal="";A[1].currentVal="";A[1].targetVal=""}else if(F.Storti==="D"){A[1].maintenance=true;A[1].instLoc=false;A[1].SupFlVal="";A[1].currentVal=F.StorEilo;A[1].targetVal=F.StorEilo}else{A[1].maintenance=false;A[1].instLoc=true;A[1].SupFlVal=F.StorEilo;A[1].currentVal="";A[1].targetVal=F.StorEilo}if(F.Beberi===""){A[2].maintenance=false;A[2].instLoc=false;A[2].SupFlVal="";A[2].currentVal="";A[2].targetVal=""}else if(F.Beberi==="D"){A[2].maintenance=true;A[2].instLoc=false;A[2].SupFlVal="";A[2].currentVal=F.BebeEilo;A[2].targetVal=F.BebeEilo}else{A[2].maintenance=false;A[2].instLoc=true;A[2].SupFlVal=F.BebeEilo;A[2].currentVal="";A[2].targetVal=F.BebeEilo}if(F.Ppsidi===""){A[3].maintenance=false;A[3].instLoc=false;A[3].SupFlVal="";A[3].currentVal="";A[3].targetVal=""}else if(F.Ppsidi==="D"){A[3].maintenance=true;A[3].instLoc=false;A[3].SupFlVal="";A[3].currentVal=F.ArbpEilo;A[3].targetVal=F.ArbpEilo}else{A[3].maintenance=false;A[3].instLoc=true;A[3].SupFlVal=F.ArbpEilo;A[3].currentVal="";A[3].targetVal=F.ArbpEilo}if(F.Abckzi===""){A[4].maintenance=false;A[4].instLoc=false;A[4].SupFlVal="";A[4].currentVal="";A[4].targetVal=""}else if(F.Abckzi==="D"){A[4].maintenance=true;A[4].instLoc=false;A[4].SupFlVal="";A[4].currentVal=F.AbckEilo;A[4].targetVal=F.AbckEilo}else{A[4].maintenance=false;A[4].instLoc=true;A[4].SupFlVal=F.AbckEilo;A[4].currentVal="";A[4].targetVal=F.AbckEilo}if(F.Kostli===""){A[5].maintenance=false;A[5].instLoc=false;A[5].SupFlVal="";A[5].currentVal="";A[5].targetVal=""}else if(F.Kostli==="D"){A[5].maintenance=true;A[5].instLoc=false;A[5].SupFlVal="";A[5].currentVal=F.KostEilo;A[5].targetVal=F.KostEilo}else{A[5].maintenance=false;A[5].instLoc=true;A[5].SupFlVal=F.KostEilo;A[5].currentVal="";A[5].targetVal=F.KostEilo}if(F.Iwerki===""){A[6].maintenance=false;A[6].instLoc=false;A[6].SupFlVal="";A[6].currentVal="";A[6].targetVal=""}else if(F.Iwerki==="D"){A[6].maintenance=true;A[6].instLoc=false;A[6].SupFlVal="";A[6].currentVal=F.PplaEeqz;A[6].targetVal=F.PplaEeqz}else{A[6].maintenance=false;A[6].instLoc=true;A[6].SupFlVal=F.PplaEeqz;A[6].currentVal="";A[6].targetVal=F.PplaEeqz}if(F.Ingrpi===""){A[7].maintenance=false;A[7].instLoc=false;A[7].SupFlVal="";A[7].currentVal="";A[7].targetVal=""}else if(F.Ingrpi==="D"){A[7].maintenance=true;A[7].instLoc=false;A[7].SupFlVal="";A[7].currentVal=F.IngrEeqz;A[7].targetVal=F.IngrEeqz}else{A[7].maintenance=false;A[7].instLoc=true;A[7].SupFlVal=F.IngrEeqz;A[7].currentVal="";A[7].targetVal=F.IngrEeqz}if(F.Gewrki===""){A[8].maintenance=false;A[8].instLoc=false;A[8].SupFlVal="";A[8].currentVal="";A[8].targetVal=""}else if(F.Gewrki==="D"){A[8].maintenance=true;A[8].instLoc=false;A[8].SupFlVal="";A[8].currentVal=F.ArbpEeqz;A[8].targetVal=F.ArbpEeqz}else{A[8].maintenance=false;A[8].instLoc=true;A[8].SupFlVal=F.ArbpEeqz;A[8].currentVal="";A[8].targetVal=F.ArbpEeqz}if(F.Adrnri===""){A[10].maintenance=false;A[10].instLoc=false;A[10].SupFlVal="";A[10].currentVal="";A[10].targetVal=""}else if(F.Adrnri==="D"){A[10].maintenance=true;A[10].instLoc=false;A[10].SupFlVal="";A[10].currentVal=F.Adrnr;A[10].targetVal=F.Adrnr}else{A[10].maintenance=false;A[10].instLoc=true;A[10].SupFlVal=F.Adrnr;A[10].currentVal="";A[10].targetVal=F.Adrnr}}}}}}if(r.MSPoint){var Y=r.MSPoint.results;if(Y){for(var k=0;k<Y.length;k++){c={classItems:[],characteristics:[],attachmentCount:"0",Guids:"",MspointEnabled:true,ObtypMsEnabled:true,EqunrEnabled:true,TplnrEnabled:true,MptypEnabled:true,AtnamMsEnabled:true,countEnable:true,tEnable:true,valCodeStuffSel:false};c.Mspoint=Y[k].Point;c.Psort=Y[k].Psort;c.Pttxt=Y[k].Pttxt;c.ObtypMs=Y[k].ObtypMs;if(c.ObtypMs==="IFL"){c.EqunrEnabled=false;c.TplnrEnabled=true}else if(c.ObtypMs==="IEQ"){c.EqunrEnabled=true;c.TplnrEnabled=false}c.Txt=Y[k].Objtypetxt;c.Equnr=Y[k].Equnr;c.Eqktx=Y[k].Eqktx;c.Tplnr=Y[k].Tplnr;c.Pltxt=Y[k].Floctxt;c.Mptyp=Y[k].Mptyp;c.Mpttx=Y[k].Mpttx;c.Inact=Y[k].Inact;c.AtnamMs=Y[k].AtnamMs;c.Atbez=Y[k].Atbez;c.Mseh6=Y[k].Mseh6;c.Msehl=Y[k].Msehl;c.Decim=Y[k].Decim.toString();c.Codgr=Y[k].Codgr;c.Codgrtxt=Y[k].Codgrtxt;c.Locas=Y[k].Locas;c.Maktx=Y[k].Maktx;c.Begru=Y[k].Begru;c.Begtx=Y[k].Begtx;c.Indct=Y[k].Indct;c.Expon=Y[k].Expon;c.Cdsuf=Y[k].Cdsuf;c.Cjumc=Y[k].Cjumc;c.Pyeac=Y[k].Pyeac;c.Desir=Y[k].Desir;c.Mrngu=Y[k].Mrngu;c.Dstxt=Y[k].Dstxt;c.Indrv=Y[k].Indrv;c.Mrmax=Y[k].Mrmax;c.Mrmin=Y[k].Mrmin;c.Deact=Y[k].Inact;c.DeactEnable=false;c.readTransfSel=Y[k].Indtr;c.readTransf=Y[k].Trans;c.viewParameter=Y[k].Type?"create":"change";if(Y[k].Equnr!==""){c.EqunrLblVis=true;c.EqunrInpVis=true;c.EqktxInpVis=true;c.TplnrLblVis=false;c.TplnrInpVis=false;c.PltxtInpVis=false}else{c.EqunrLblVis=false;c.EqunrInpVis=false;c.EqktxInpVis=false;c.TplnrLblVis=true;c.TplnrInpVis=true;c.PltxtInpVis=true}if(r.DataOrigin_N.results.length>0){var ee=r.DataOrigin_N.results[0];c.RT={readTransfSel:true,readTransf:ee.Trans,RTValidFrom:l.dateFormat(ee.Datlo),RTTime:l.getTime(ee.Timlo),RTMeasPos:ee.Psort,RTMpDesc:ee.Pttxt,RTFloc:ee.Tplnr,RTFlocDesc:ee.Pltxt,RTEqui:ee.Equnr,RTEquiDesc:ee.Eqktx}}else{c.RT={readTransfSel:false,readTransf:"",RTValidFrom:"",RTTime:"",RTMeasPos:"",RTMpDesc:"",RTFloc:"",RTFlocDesc:"",RTEqui:"",RTEquiDesc:""}}c.lam={Lrpid:"",LrpidDesc:"",Strtptatr:"",Endptatr:"",Length:"",LinUnit:"",LinUnitDesc:"",Startmrkr:"",Endmrkr:"",Mrkdisst:"",Mrkdisend:"",MrkrUnit:"",enableLrp:true,enableMarker:false,LrpidVS:"None",StrtptatrVS:"None",EndptatrVS:"None",LinUnitVS:"None",StartmrkrVS:"None",EndmrkrVS:"None",MrkdisstVS:"None",MrkdisendVS:"None",MrkrUnitVS:"None"};if(Y[k].Mptyp==="L"&&r.MSLAM.results.length>0){var p=r.MSLAM.results;if(p){for(var u=0;u<p.length;u++){if(p[u].Mspoint===Y[k].Point){c.lam=p[u];c.lam.LrpidDesc=p[u].LrpDescr;c.lam.LinUnitDesc=p[u].Uomtext;break}}}}if(r.MSClass){var te=$.map(r.MSClass.results,function(e){return $.extend(true,{},e)});if(te){if(te.length>0){for(var ae=0;ae<te.length;ae++){if(c.Mspoint===te[ae].Mspoint){te[ae].ctEnable=false;te[ae].classEnable=false;te[ae].ClassTypeDesc=te[ae].Artxt;delete te[ae].Artxt;te[ae].ClassDesc=te[ae].Kltxt;delete te[ae].Kltxt;delete te[ae].Changerequestid;delete te[ae].Clint;delete te[ae].Service;c.classItems.push(te[ae])}}}}}if(r.MSVal){var re=$.map(r.MSVal.results,function(e){return $.extend(true,{},e)});if(re){if(re.length>0){for(var le=0;le<re.length;le++){if(c.Mspoint===re[le].Mspoint){re[le].cNameEnable=false;re[le].Textbz=re[le].Atwtb;delete re[le].Ataut;delete re[le].Ataw1;delete re[le].Atawe;delete re[le].Atcod;delete re[le].Atflb;delete re[le].Atflv;delete re[le].Atimb;delete re[le].Atsrt;delete re[le].Atvglart;delete re[le].Atzis;delete re[le].Changerequestid;delete re[le].Charid;delete re[le].Classtype;delete re[le].Service;delete re[le].Valcnt;re[le].slNo=le+1;re[le].flag=re[le].Class+"-"+re[le].slNo;c.characteristics.push(re[le])}}for(var u=0;u<c.characteristics.length;u++){var S=1;for(var T=0;T<c.characteristics.length;T++){if(u===T){continue}if(c.characteristics[T].Atnam===c.characteristics[u].Atnam&&c.characteristics[T].Class===c.characteristics[u].Class){S++}}if(S>1){c.characteristics[u].charDltEnable=true}else{c.characteristics[u].charDltEnable=false}if(c.characteristics[u].Atein===true){c.characteristics[u].charAddEnable=false}}}}}a.handleCreatePress(a,c,a.oModelAIWMSPT)}}}if(r.MPLAN){var ne=r.MPLAN.results;if(ne){for(var K=0;K<ne.length;K++){c={classItems:[],characteristics:[],attachmentCount:"0",Guids:"",cycleModel:[],itemModel:[],cycleIndSingle:false,cycleIndStrategy:false,cycleIndMultCntr:false,WarplEnabled:false,StratEnabled:false,WsetEnabled:false,MehrfachEnabled:false,ScheIndRbTimeEnabled:false,ScheIndRbTimeKeyDateEnabled:false,ScheIndRbTimeFactCalEnabled:false,ScheIndRbPerformanceEnabled:false,MptypEnabled:false,cycleIndSingleEnabled:false,cycleIndStrategyEnabled:false,cycleIndMultCntrEnabled:false,FabklLBLReq:false,ButtonNewCycleEnabled:false,FabklEnabled:false,OPText:false,OPTitle:false,OPLBL:false,MpcyclenoLBL:false,FabklLBL:true,AbrhoLBL:true,MehrfachLBL:false,ScheIndText:true,ScheIndTitle:true,ScheIndLBL:true,StratLBL:false,StratDescLBL:false,WsetLBL:false,SzaehLBL:false,StadtLBL:true,HorizVisible:false,cycleSetSeqColVis:false,OROPVis:false,AndOPvis:false,ScheIndRbTimeVis:true,ScheIndRbTimeKeyDateVis:true,ScheIndRbTimeFactCalVis:true,ScheIndRbPerformanceVis:true,MpcyclenoVis:false,HunitVis:true,AbrhoVis:true,MehrfachVis:false,StratVis:false,StratDescVis:false,WsetVis:false,KtextVis:false,SzaehVis:false,UnitcVis:false,StadtVis:true,MaintenanceCycleMode:"None"};if(ne[K].Stich!==""||ne[K].Stich===undefined){c.Stich=parseInt(ne[K].Stich)}else{c.Stich=0}c.Warpl=ne[K].Warpl;c.Wptxt=ne[K].Wptxt;c.Mptyp=ne[K].Mptyp;c.Txt=ne[K].Mplancatdesc;c.Strat=ne[K].Strat;c.StratDesc=ne[K].StratDesc;c.Puffp=ne[K].Puffp;c.Deact=ne[K].InactMp;c.DeactEnable=false;if(ne[K].Mehrfach==="X"||ne[K].Stich==="4"){c.cycleType=2;c.cycleSetSeqColVis=true;c.CycleSetSeqVis=true;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.OPText=true;c.OPTitle=true;c.OPLBL=true;c.OROPVis=true;c.AndOPvis=true;c.WsetLBL=true;c.WsetVis=true;c.KtextVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.MehrfachLBL=true;c.MehrfachVis=true;c.Mehrfach=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=a.getView().getModel("i18n").getProperty("CYCLE_STDATE");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndMultCntr=true}else if(ne[K].Strat===""&&(ne[K].Stich===""||ne[K].Stich==="1"||ne[K].Stich==="2")){c.cycleType=0;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StadtLBL=true;c.StadtVis=true;c.StadtLBLText=a.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndSingle=true}else if(ne[K].Strat!==""&&ne[K].Stich==="3"){c.cycleType=1;c.cycleSetSeqColVis=false;c.CycleSetSeqVis=false;c.ScheIndText=false;c.ScheIndTitle=false;c.ScheIndLBL=false;c.ScheIndRbTimeEnabled=false;c.ScheIndRbTimeKeyDateEnabled=false;c.ScheIndRbTimeFactCalEnabled=false;c.ScheIndRbPerformanceEnabled=false;c.ScheIndRbTimeVis=false;c.ScheIndRbTimeKeyDateVis=false;c.ScheIndRbTimeFactCalVis=false;c.ScheIndRbPerformanceVis=false;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=false;c.FabklVis=false;c.FabklDescVis=false;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.StadtLBL=false;c.StadtVis=false;c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.MpcyclenoLBL=true;c.MpcyclenoVis=true;c.cycleIndStrateg=true;a.readScheduling(ne[K],ne[K].Strat,a.oModelAIWMPMI)}else if(ne[K].Strat.indexOf("TIME")>-1&&ne[K].Mehrfach===""&&ne[K].Stich!=="3"){c.cycleType=1;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=true;c.AbrhoVis=true;c.HunitVis=true;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.Strat=ne[K].Strat;c.StadtLBL=true;c.StadtVis=true;c.Stadt=l.getDateFormat(ne[K].Startdate);c.StadtLBLText=a.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=false;c.SzaehVis=false;c.UnitcVis=false;c.MpcyclenoLBL=false;c.MpcyclenoVis=false;c.cycleIndStrateg=true;a.readScheduling(ne[K],ne[K].Strat,a.oModelAIWMPMI)}else if(ne[K].Strat===""&&ne[K].Stich==="3"&&ne[K].Mehrfach===""){c.cycleIndSingle=true;c.cycleType=0;c.ScheIndText=true;c.ScheIndTitle=true;c.ScheIndLBL=true;c.ScheIndRbTimeVis=true;c.ScheIndRbTimeKeyDateVis=true;c.ScheIndRbTimeFactCalVis=true;c.ScheIndRbPerformanceVis=true;c.AbrhoLBL=false;c.AbrhoVis=false;c.HunitVis=false;c.FabklLBL=true;c.FabklVis=true;c.FabklDescVis=true;c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.StadtLBL=false;c.StadtVis=false;c.StadtLBLText=a.getView().getModel("i18n").getProperty("CYCLE_START_TXT");c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.Unitc=" ";c.MpcyclenoLBL=true;c.MpcyclenoVis=true}c.Stadt=l.getDateFormat(ne[K].Startdate);c.Unitc=ne[K].Unitc;c.Fabkl=ne[K].Fabkl;c.FabklDesc=ne[K].FabklDesc;if(ne[K].Stich==="1"){c.ScheIndRbTimeKeyDate=true;c.FabklEnabled=true;c.Fabkl=ne.Fabkl;c.FabklDesc=ne.FabklDesc}else if(ne[K].Stich==="2"){c.ScheIndRbTimeFactCal=true;c.FabklEnabled=true;c.Fabkl=ne.Fabkl;c.FabklDesc=ne.FabklDesc}else if(ne[K].Stich==="3"){c.ScheIndRbPerformance=true;c.FabklEnabled=false}else if(ne[K].Stich===""||ne[K].Stich===" "){c.ScheIndRbTime=true;c.FabklEnabled=false;c.Fabkl=ne.Fabkl;c.FabklDesc=ne.FabklDesc}if(ne.Stich){c.Stich=parseInt(ne.Stich)}else{c.Stich=0}c.Wset=ne[K].Wset;c.Ktext=ne[K].Ktext;c.Sfakt=ne[K].Sfakt;c.Abrho=ne[K].Abrho;c.Hunit=ne[K].Hunit;c.StratDesc=ne[K].StratDesc;c.Szaeh=ne[K].Szaeh;c.Mpcycleno=ne[K].PointStp;c.Andor=ne[K].Andor;if(ne[K].PointStp!==""){c.Unitc=ne[K].Unitc}if(ne[K].Andor==="X"){c.AndOP=true}else{c.OROP=true}if(c.Mehrfach===true||(c.Wset!==""||c!==undefined)){c.HorizVisible=false}else{c.HorizVisible=true}c.Vspos=ne[K].Vspos;c.Topos=ne[K].Topos;c.Vsneg=ne[K].Vsneg;c.Toneg=ne[K].Toneg;c.Horiz=ne[K].Horiz;c.CallConf=ne[K].CallConf;c.PlanSort=ne[K].PlanSort;c.Begru=ne[K].Begru;switch(c.cycleType){case 0:c.cycleType=0;c.cycleIndSingle=true;c.cycleIndStrategyEnabled=false;c.cycleIndMultCntrEnabled=false;c.Strat=" ";c.StratDesc=" ";c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.Wset=" ";c.Ktext=" ";c.WsetLBL=false;c.WsetVis=false;c.KtextVis=false;c.Mehrfach=false;c.MehrfachLBL=false;c.MehrfachVis=false;c.ButtonNewCycleEnabled=true;if(c.ScheIndRbPerformance===true){c.SzaehLBL=true;c.SzaehVis=true;c.UnitcVis=true;c.StadtLBL=false;c.StadtVis=false}break;case 1:c.cycleType=1;c.cycleIndStrategy=true;c.cycleIndSingleEnabled=false;c.cycleIndMultCntrEnabled=false;c.StratLBL=true;c.StratVis=true;c.StratDescVis=true;c.StratEnabled=true;c.Mehrfach=false;c.MehrfachLBL=false;c.MehrfachVis=false;c.Wset=" ";c.Ktext=" ";c.WsetLBL=false;c.WsetVis=false;c.KtextVis=false;c.ButtonNewCycleEnabled=false;break;case 2:c.cycleType=2;c.cycleIndMultCntr=true;c.cycleIndStrategyEnabled=false;c.cycleIndSingleEnabled=false;c.Strat=" ";c.StratDesc=" ";c.StratLBL=false;c.StratVis=false;c.StratDescVis=false;c.MehrfachLBL=true;c.MehrfachVis=true;c.MehrfachEnabled=true;c.WsetLBL=true;c.WsetVis=true;c.WsetEnabled=true;c.KtextVis=true;c.ButtonNewCycleEnabled=true;c.cycleSetSeqColVis=true;break}if(r.MPCycle){var se=r.MPCycle.results;if(se){for(var oe=0;oe<se.length;oe++){if(c.Warpl===se[oe].Mplan){se[oe].Psort=se[oe].PointTxt;c.cycleModel.push(se[oe])}}}}if(r.MPItem){var ie=r.MPItem.results;if(ie){var de=[];for(var ce=0;ce<ie.length;ce++){if(c.Warpl===ie[ce].Mplan){var pe={};pe.Mitemnumb=ie[ce].Mitemnumb;pe.Pstxt=ie[ce].Pstxt;pe.Cycleseq=ie[ce].Cycleseq;pe.Tplnr=ie[ce].TplnrMi;pe.Pltxt=ie[ce].Flocdesc;pe.Equnr=ie[ce].Equnr;pe.Eqktx=ie[ce].Equipdesc;pe.AsmblyOb=ie[ce].Bautl;pe.Assemblydesc=ie[ce].Assemblydesc;pe.Serialnr=ie[ce].Serialnr;pe.Sermat=ie[ce].Sermat;pe.UiiMitem=ie[ce].UiiMitem;pe.Deviceid=ie[ce].Deviceid;pe.Werks=ie[ce].PlntMi;pe.Planningplantdes=ie[ce].Planningplantdes;pe.Auart=ie[ce].Auart;pe.oTypeTxt=ie[ce].Ordertypedesc;pe.Qmart=ie[ce].Qmart;pe.nTypeTxt=ie[ce].Qmartx;pe.ArbpMi=ie[ce].ArbpMi;pe.WergwMi=ie[ce].WergwMi;pe.Ingrp=ie[ce].IngrpMi;pe.Innam=ie[ce].Plannergrpdesc;var ue=ie[ce].ItmPriotxt;ue=ue.substr(ue.indexOf(" ")+1);pe.Zeieh=ie[ce].Zeieh;pe.Priok=ie[ce].Priok;pe.ItmPriotxt=ue;pe.GsberMi=ie[ce].GsberMi;pe.Gtext=ie[ce].Gtext;pe.TaskDet=ie[ce].TaskDet;pe.Ilart=ie[ce].Ilart;pe.Ilatx=ie[ce].Ilatx;pe.PlntyMi=ie[ce].PlntyMi;pe.ApfktMi=ie[ce].ApfktMi;pe.PlnnrMi=ie[ce].PlnnrMi;pe.PlnalMi=ie[ce].PlnalMi;pe.Gpcounterdesc=ie[ce].Gpcounterdesc;pe.AnlzuMi=ie[ce].AnlzuMi;pe.Anlzux=ie[ce].Anlzux;pe.SwerkMil=ie[ce].SwerkMil;pe.Name1=ie[ce].Name1;pe.StortMil=ie[ce].StortMil;pe.Locationdesc=ie[ce].Locationdesc;pe.MsgrpIl=ie[ce].MsgrpIl;pe.BeberMil=ie[ce].BeberMil;pe.Fing=ie[ce].Fing;pe.Tele=ie[ce].Tele;pe.ArbplIl=ie[ce].ArbplIl;pe.Workcenterdesc=ie[ce].Workcenterdesc;pe.AbckzIl=ie[ce].AbckzIl;pe.Abctx=ie[ce].Abctx;pe.EqfnrIl=ie[ce].EqfnrIl;pe.BukrsMil=ie[ce].BukrsMil;pe.Butxt=ie[ce].Butxt;pe.City=ie[ce].City;pe.Anln1Mil=ie[ce].Anln1Mil;pe.Anln2Mil=ie[ce].Anln2Mil;pe.Txt50=ie[ce].Txt50;pe.GsberIl=ie[ce].GsberIl;pe.KostlMil=ie[ce].KostlMil;pe.Contareaname=ie[ce].Contareaname;pe.KokrsMil=ie[ce].KokrsMil;pe.Posid=ie[ce].Posid;pe.Post1=ie[ce].Post1;pe.AufnrIl=ie[ce].AufnrIl;pe.SettleOrdDesc=ie[ce].SettleOrdDesc;pe.PlnnrMi=ie[ce].PlnnrMi;pe.PlntyMi=ie[ce].PlntyMi;pe.PlnalMi=ie[ce].PlnalMi;pe.enableLoc=false;pe.QmartLBL=true;pe.QmartVis=true;pe.nTypetxtVis=true;pe.AuartLBL=true;pe.AuartVis=true;pe.oTypeTxtVis=true;pe.CycleseqLBL=false;pe.CycleseqVis=false;pe.AsmblyObMaxLength=0;pe.maintItemE=false;pe.cycleSetE=false;pe.TplnrEnabled=false;pe.equiE=false;pe.assemblyE=false;pe.CycleseqVS="None";pe.CycleseqVST="";pe.TplnrVS="None";pe.TplnrVST="";pe.EqunrVS="None";pe.EqunrVST="";pe.AsmblyObVS="None";pe.AsmblyObVST="";pe.WerksVS="None";pe.WerksVST="";pe.AuartVS="None";pe.AuartVST="";pe.QmartVS="None";pe.QmartVST="";pe.ArbpMiVS="None";pe.ArbpMiVST="";pe.WergwMiVS="None";pe.WergwMiVST="";pe.IngrpVS="None";pe.IngrpVST="";pe.enableLoc=false;var ge=r.MPLAM.results;if(ge){for(var u=0;u<ge.length;u++){if(ge[u].Mplan===ie[ce].Mplan&&ge[u].Mitemnumb===ie[ce].Mitemnumb){var me=ge[u];me.LrpidDesc=ge[u].LrpDescr;me.LinUnitDesc=ge[u].Uomtext;pe.lam=me;break}}}de.push(pe)}}c.itemModel=de}}if(r.MPOBList){var fe=r.MPOBList.results;if(fe){var he=[];for(var k=0;k<fe.length;k++){if(c.Warpl===fe[k].Mplan){var pe={};pe.Warpl=fe[k].Mplan;pe.Mitemnumb=fe[k].Mitemnumb;pe.MatnrObj=fe[k].MatnrObj;pe.FlocObj=fe[k].FlocObj;pe.EquiObj=fe[k].EquiObj;pe.AsmblyOb=fe[k].AsmblyOb;pe.Matnrtxt=fe[k].Matnrtxt;pe.Equnrtxt=fe[k].Equnrtxt;pe.Tplnrtxt=fe[k].Tplnrtxt;pe.Bautltxt=fe[k].Bautltxt;pe.Enable=false;he.push(pe)}}c.ObjListItems=he}}if(r.ClassMpl){var te=$.map(r.ClassMpl.results,function(e){return $.extend(true,{},e)});if(te){if(te.length>0){for(var ae=0;ae<te.length;ae++){if(c.Warpl===te[ae].Mplan){te[ae].ctEnable=false;te[ae].classEnable=false;te[ae].ClassTypeDesc=te[ae].Artxt;delete te[ae].Artxt;te[ae].ClassDesc=te[ae].Kltxt;delete te[ae].Kltxt;delete te[ae].Changerequestid;delete te[ae].Clint;delete te[ae].Service;c.classItems.push(te[ae])}}}}}if(r.ValuaMpl){var re=$.map(r.ValuaMpl.results,function(e){return $.extend(true,{},e)});if(re){if(re.length>0){for(var le=0;le<re.length;le++){if(c.Warpl===re[le].Mplan){re[le].cNameEnable=false;re[le].Textbz=re[le].Atwtb;delete re[le].Ataut;delete re[le].Ataw1;delete re[le].Atawe;delete re[le].Atcod;delete re[le].Atflb;delete re[le].Atflv;delete re[le].Atimb;delete re[le].Atsrt;delete re[le].Atvglart;delete re[le].Atzis;delete re[le].Changerequestid;delete re[le].Charid;delete re[le].Classtype;delete re[le].Service;delete re[le].Valcnt;re[le].slNo=le+1;re[le].flag=re[le].Class+"-"+re[le].slNo;c.characteristics.push(re[le])}}for(var u=0;u<c.characteristics.length;u++){var S=1;for(var T=0;T<c.characteristics.length;T++){if(u===T){continue}if(c.characteristics[T].Atnam===c.characteristics[u].Atnam&&c.characteristics[T].Class===c.characteristics[u].Class){S++}}if(S>1){c.characteristics[u].charDltEnable=true}else{c.characteristics[u].charDltEnable=false}if(c.characteristics[u].Atein===true){c.characteristics[u].charAddEnable=false}}}}}a.handleCreatePress(a,c,a.oModelAIWMPMI)}}}var Se=sap.ui.getCore().getModel("AIWListMatModel").getData();var Te=e.results[0].MRBHeader.results;for(var k=0;k<Te.length;k++){var Me={};Me.Matnr=Te[k].Matnr;Me.Werks=Te[k].Werks;Me.Stlan=Te[k].Stlan;Me.Stalt=Te[k].Stalt;Me.Bomstatus=Te[k].Bomstatus;Me.Lngtxt=Te[k].Txtmi;Me.Validfrom=a.getDateFormat(Te[k].Validfrom);Me.BaseQty=Te[k].Baseqty;Me.BaseUom=Te[k].Baseuom;Me.Validtoda=a.getDateFormat(Te[k].Validtoda);Me.MatDesc=Te[k].Maktx;Me.WerksDesc=Te[k].Plantname;Me.StlanDesc=Te[k].Bomusagetxt;Me.BomstatusText=Te[k].Bomstatustxt;Me.Stktx=Te[k].Stktx;Me.matEnable=false;Me.plantEnable=false;Me.usageEnable=false;Me.altbomEnable=true;Me.LngtxtEnable=true;Me.BomstatusEnable=true;Me.BaseQtyEnable=true;Me.fromDateEnable=true;Me.addItemEnable=true;Me.modeFlag="Delete";Me.Authgroup=Te[k].Authgroup;Me.Sizdim=Te[k].Sizdim;Me.Labofc=Te[k].Labofc;Me.Labortxt=Te[k].Labortxt;if(Me.Stalt!==""){Me.altbomEnable=false}Me.Flbomsub="";Me.Delflg="";Me.Invnr="";Me.Herst="";Me.Htypb="";Me.Serge="";Me.matItem=[];Me.matSubItem=[];var be=e.results[0].MRBItem.results;if(be.length>0){for(var ae=0;ae<be.length;ae++){if(be[ae].Matnr===Me.Matnr&&be[ae].Werks===Me.Werks&&be[ae].Stlan===Me.Stlan){be[ae].addSubItmEnable=true;Me.matItem.push(be[ae])}}}var Ee=e.results[0].MRBSBIT.results;if(Ee.length>0){for(var le=0;le<Ee.length;le++){if(Ee[le].Matnr===Me.Matnr&&Ee[le].Werks===Me.Werks&&Ee[le].Stlan===Me.Stlan){Ee[le].intPointEnable=true;Ee[le].subQtyEnable=true;Ee[le].subTextEnable=true;Me.matSubItem.push(Ee[le])}}}Se.push(Me)}sap.ui.getCore().getModel("AIWListMatModel").setSizeLimit(Se.length);sap.ui.getCore().getModel("AIWListMatModel").refresh();a.updateCount("MaterialBom",Se);var ve=sap.ui.getCore().getModel("AIWListEqModel").getData();var Ce=e.results[0].EBHeader.results;for(var k=0;k<Ce.length;k++){var xe={};xe.Eqnrbom=Ce[k].Eqnrbom;xe.Werks=Ce[k].Werks;xe.Stlan=Ce[k].Stlan;xe.Bomstatus=Ce[k].Bomstatus;xe.Lngtxt=Ce[k].Txtmi;xe.Validfrom=a.getDateFormat(Ce[k].Validfrom);xe.BaseQty=Ce[k].Baseqty;xe.BaseUom=Ce[k].Baseuom;xe.Validtoda=a.getDateFormat(Ce[k].Validtoda);xe.EquiDesc=Ce[k].Eqktx;xe.WerksDesc=Ce[k].Plantname;xe.StlanDesc=Ce[k].Bomusagetxt;xe.BomstatusText=Ce[k].Bomstatustxt;xe.equipEnable=false;xe.plantEnable=false;xe.usageEnable=false;xe.LngtxtEnable=true;xe.fromDateEnable=true;xe.BomstatusEnable=true;xe.BaseQtyEnable=true;xe.addItemEnable=true;xe.modeFlag="Delete";xe.Authgroup=Ce[k].Authgroup;xe.Sizdim=Ce[k].Sizdim;xe.Labofc=Ce[k].Labofc;xe.Labortxt=Ce[k].Labortxt;xe.Delflg=Ce[k].Delflg;xe.Invnr=Ce[k].Invnr;xe.Herst=Ce[k].Herst;xe.Htypb=Ce[k].Htypb;xe.Serge=Ce[k].Serge;xe.Flbomsub="";xe.Stalt="";xe.Stktx="";xe.eqItem=[];xe.eqSubItem=[];var Ve=e.results[0].EBItem.results;if(Ve.length>0){for(var ae=0;ae<Ve.length;ae++){if(Ve[ae].Eqnrbom===xe.Eqnrbom&&Ve[ae].Werks===xe.Werks&&Ve[ae].Stlan===xe.Stlan){Ve[ae].addSubItmEnable=true;xe.eqItem.push(Ve[ae])}}}var Pe=e.results[0].EBSBIT.results;if(Pe.length>0){for(var le=0;le<Pe.length;le++){if(Pe[le].Eqnrbom===xe.Eqnrbom&&Pe[le].Werks===xe.Werks&&Pe[le].Stlan===xe.Stlan){Pe[le].intPointEnable=true;Pe[le].subQtyEnable=true;Pe[le].subTextEnable=true;xe.eqSubItem.push(Pe[le])}}}ve.push(xe)}sap.ui.getCore().getModel("AIWListEqModel").setSizeLimit(ve.length);sap.ui.getCore().getModel("AIWListEqModel").refresh();a.updateCount("EquipmentBom",ve);var Ie=sap.ui.getCore().getModel("AIWListFLModel").getData();var Le=e.results[0].FBHeader.results;for(var k=0;k<Le.length;k++){var ye={};ye.Tplnrbom=Le[k].Tplnrbom;ye.Werks=Le[k].Werks;ye.Stlan=Le[k].Stlan;ye.Bomstatus=Le[k].Bomstatus;ye.Lngtxt=Le[k].Txtmi;ye.Validfrom=a.getDateFormat(Le[k].Validfrom);ye.BaseQty=Le[k].Baseqty;ye.BaseUom=Le[k].Baseuom;ye.Validtoda=a.getDateFormat(Le[k].Validtoda);ye.FLDesc=Le[k].Pltxt;ye.WerksDesc=Le[k].Plantname;ye.StlanDesc=Le[k].Bomusagetxt;ye.BomstatusText=Le[k].Bomstatustxt;ye.FLEnable=false;ye.plantEnable=false;ye.usageEnable=false;ye.LngtxtEnable=true;ye.fromDateEnable=true;ye.BomstatusEnable=true;ye.BaseQtyEnable=true;ye.addItemEnable=true;ye.modeFlag="Delete";ye.Authgroup=Le[k].Authgroup;ye.Sizdim=Le[k].Sizdim;ye.Flbomsub=Le[k].Flbomsub;ye.Labofc=Le[k].Labofc;ye.Labortxt=Le[k].Labortxt;ye.Stalt="";ye.Delflg="";ye.Invnr="";ye.Herst="";ye.Htypb="";ye.Serge="";ye.Stktx="";ye.flItem=[];ye.flSubItem=[];var De=e.results[0].FBItem.results;if(De.length>0){for(var ae=0;ae<De.length;ae++){if(De[ae].Tplnrbom===ye.Tplnrbom&&De[ae].Werks===ye.Werks&&De[ae].Stlan===ye.Stlan){De[ae].addSubItmEnable=true;ye.flItem.push(De[ae])}}}var ke=e.results[0].FBSBIT.results;if(ke.length>0){for(var le=0;le<ke.length;le++){if(ke[le].Tplnrbom===ye.Tplnrbom&&ke[le].Werks===ye.Werks&&ke[le].Stlan===ye.Stlan){ke[le].intPointEnable=true;ke[le].subQtyEnable=true;ke[le].subTextEnable=true;ye.flSubItem.push(ke[le])}}}Ie.push(ye)}sap.ui.getCore().getModel("AIWListFLModel").setSizeLimit(Ie.length);sap.ui.getCore().getModel("AIWListFLModel").refresh();a.updateCount("FLBom",Ie);var Fe=sap.ui.getCore().getModel("AIWListWBSModel").getData();var Ae=e.results[0].WBHeader.results;for(var k=0;k<Ae.length;k++){var we={};we.WbsExt=Ae[k].WbsExt;we.Matnr=Ae[k].MatnrWbs;we.Werks=Ae[k].Werks;we.Stlan=Ae[k].Stlan;we.Bomstatus=Ae[k].Bomstatus;we.Lngtxt=Ae[k].Txtmi;we.Validfrom=a.getDateFormat(Ae[k].Validfrom);we.BaseQty=Ae[k].Baseqty;we.BaseUom=Ae[k].Baseuom;we.Validtoda=a.getDateFormat(Ae[k].Validtoda);we.WbsDesc=Ae[k].Post1;we.MatDesc=Ae[k].Maktx;we.WerksDesc=Ae[k].Plantname;we.StlanDesc=Ae[k].Bomusagetxt;we.BomstatusText=Ae[k].Bomstatustxt;we.wbsEnable=false;we.matEnable=false;we.plantEnable=false;we.usageEnable=false;we.LngtxtEnable=true;we.fromDateEnable=true;we.BomstatusEnable=true;we.BaseQtyEnable=true;we.addItemEnable=true;we.modeFlag="Delete";we.Authgroup=Ae[k].Authgroup;we.Sizdim=Ae[k].Sizdim;we.Labofc=Ae[k].Labofc;we.Labortxt=Ae[k].Labortxt;we.Stalt="";we.Flbomsub="";we.Delflg="";we.Invnr="";we.Herst="";we.Htypb="";we.Serge="";we.Stktx="";we.wbsItem=[];we.wbsSubItem=[];var qe=e.results[0].WBItem.results;if(qe.length>0){for(var ae=0;ae<qe.length;ae++){if(qe[ae].MatnrWbs===we.Matnr&&qe[ae].Werks===we.Werks&&qe[ae].Stlan===we.Stlan){qe[ae].addSubItmEnable=true;we.wbsItem.push(qe[ae])}}}var We=e.results[0].WBSBIT.results;if(We.length>0){for(var le=0;le<We.length;le++){if(We[le].MatnrWbs===we.Matnr&&We[le].Werks===we.Werks&&We[le].Stlan===we.Stlan){We[le].intPointEnable=true;We[le].subQtyEnable=true;We[le].subTextEnable=true;we.wbsSubItem.push(We[le])}}}Fe.push(we)}sap.ui.getCore().getModel("AIWListWBSModel").setSizeLimit(Fe.length);sap.ui.getCore().getModel("AIWListWBSModel").refresh();a.updateCount("WbsBom",Fe);var Be=sap.ui.getCore().getModel("AIWListONModel").getData();var Ne=e.results[0].ONetwork.results;for(var k=0;k<Ne.length;k++){var Oe={};Oe.Objnetwrk=Ne[k].Objnetwrk;Oe.Netgrp=Ne[k].Netgrp;Oe.Netwtyp=Ne[k].Netwtyp;Oe.Netxt=Ne[k].Netxt;Oe.NetgrpDesc=Ne[k].NetgroupTxt;Oe.NetwtypDesc=Ne[k].NettypeTxt;Oe.NetIDEnable=true;Oe.Ntobjtyp=Ne[k].Ntobjtyp;var Re=e.results[0].ONLAM.results;if(Re){for(var ae=0;ae<Re.length;ae++){if(Re[ae].Objnetwrk===Ne[k].Objnetwrk){Oe.lam=Re[ae];Oe.lam.LrpidDesc=Re[ae].LrpDescr;Oe.lam.LinUnitDesc=Re[ae].Uomtext;break}}}Be.push(Oe)}sap.ui.getCore().getModel("AIWListONModel").setSizeLimit(Be.length);sap.ui.getCore().getModel("AIWListONModel").refresh();a.enableFields("ON");a.updateCount("ObjNet",Be);var Ue=sap.ui.getCore().getModel("AIWListWCModel").getData();var ze=r.Workcenter.results;if(ze){for(var Ke=0;Ke<ze.length;Ke++){var He={};He=ze[Ke];He.wc=ze[Ke].Arbpl;He.wcDesc=ze[Ke].Txtmi;He.plant=ze[Ke].Werks;He.plantDesc=ze[Ke].Plantdesc;He.wcCat=ze[Ke].Verwe;He.wcCatDesc=ze[Ke].Ktext;He.person=ze[Ke].Crveran;He.personDesc=ze[Ke].Persresptxt;He.usg=ze[Ke].Planv;He.usgDesc=ze[Ke].UsageTxt;He.stdVal=ze[Ke].Vgwts;He.stdValDesc=ze[Ke].Vgwtx;He.ctrlKey=ze[Ke].Crsteus;He.ctrlKeyDesc=ze[Ke].Steutxt;He.wcValueState="None";He.wcDescValueState="None";He.plantValueState="None";He.wcCatValueState="None";He.personResValueState="None";He.usgValueState="None";He.stdValueState="None";He.cntrlKeyValueState="None";He.wcValueStateTxt="";He.wcDescValueStateTxt="";He.plantValueStateTxt="";He.wcCatValueStateTxt="";He.personResValueStateTxt="";He.usgValueStateTxt="";He.stdValueStateTxt="";He.cntrlKeyValueStateTxt="";He.enable=false;He.wcEnable=false;He.plEnable=false;He.wcatEnable=false;He.cost=[];He.capacity=[];He.classItems=[];He.characteristics=[];var Ge=r.WCCost.results;if(Ge){if(Ge.length>0){var je=[];for(var h=0;h<Ge.length;h++){if(He.wc===Ge[h].Arbpl){je.push(Ge[h])}}var Qe=new sap.ui.model.json.JSONModel;Qe.setData(Ge);He.cost=je}}var _e=r.WCCapa.results;if(_e){var Je=[];if(_e.length>0){for(var $e=0;$e<_e.length;$e++){if(He.wc===_e[$e].Arbpl){Je.push(_e[$e])}}var Ze=new sap.ui.model.json.JSONModel;Ze.setData(_e);He.capacity=_e}}var Xe=r.ClassWC.results;if(Xe){if(Xe.length>0){for(var k=0;k<Xe.length;k++){Xe[k].ctEnable=false;Xe[k].classEnable=false;Xe[k].ClassTypeDesc=Xe[k].Artxt;delete Xe[k].Artxt;Xe[k].ClassDesc=Xe[k].Kltxt;delete Xe[k].Kltxt;delete Xe[k].Changerequestid;delete Xe[k].Clint;delete Xe[k].Service;He.classItems.push(Xe[k])}}}var Ye=r.ValueWC.results;if(Ye){if(Ye.length>0){for(var ae=0;ae<Ye.length;ae++){Ye[ae].cNameEnable=false;delete Ye[ae].Ataut;delete Ye[ae].Ataw1;delete Ye[ae].Atawe;delete Ye[ae].Atcod;delete Ye[ae].Atflb;delete Ye[ae].Atflv;delete Ye[ae].Atimb;delete Ye[ae].Atsrt;delete Ye[ae].Atvglart;delete Ye[ae].Atzis;delete Ye[ae].Changerequestid;delete Ye[ae].CharName;delete Ye[ae].Charid;delete Ye[ae].Classtype;delete Ye[ae].Service;delete Ye[ae].Valcnt;Ye[ae].slNo=ae+1;Ye[ae].flag=Ye[ae].Class+"-"+Ye[ae].slNo;He.characteristics.push(Ye[ae])}for(var u=0;u<Ye.length;u++){var S=1;for(var T=0;T<Ye.length;T++){if(u===T){continue}if(Ye[T].Atnam===Ye[u].Atnam&&Ye[T].Class===Ye[u].Class){S++}}if(S>1){Ye[u].charDltEnable=true}else{Ye[u].charDltEnable=false}if(Ye[u].Atein===true){Ye[u].charAddEnable=false}}}}Ue.push(He)}}sap.ui.getCore().getModel("AIWListWCModel").setSizeLimit(Ue.length);sap.ui.getCore().getModel("AIWListWCModel").setData(Ue);a.updateCount("workCenter",Ue);var et=sap.ui.getCore().getModel("AIWListGTLModel").getData();var tt=r.GTList.results;if(tt){for(var at=0;at<tt.length;at++){var rt={validFrm:l.getDateFormat(tt[at].Datuv),grp:tt[at].Tlgnhdr,enable:true,KDenable:true,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var lt=r.GTList.results;if(lt.length>0){for(var F=0;F<lt.length;F++){if(rt.grp===lt[F].Tlgnhdr){var nt={};nt.PPenable=false;nt.Grpenable=false;nt.pPlantDesc=lt[F].Iwerktxt;nt.usageDesc=lt[F].TlUsgTxt;nt.plGrpDesc=lt[F].Plnnrgrptxt;nt.statusDesc=lt[F].Statustxt;nt.sysCondDesc=lt[F].Anlzux;nt.stratDesc=lt[F].Strattxt;nt.Plnal=lt[F].Tplnal;nt.Verwe=lt[F].Tverwe;nt.plEnable=false;nt.valueStateT="None";nt.valueStatePP="None";nt.valueStateU="None";nt.valueStateS="None";nt.groupCounter=lt[F].Tplnal;nt.Ktext=lt[F].Ktext;nt.profile=lt[F].Profident;nt.wc=lt[F].Tarbpl;nt.keydate=lt[F].Keydate;nt.plant=lt[F].Wcplant;nt.Iwerk=lt[F].Werks;nt.usage=lt[F].Tverwe;nt.plannerGrp=lt[F].Vagrp;nt.Statu=lt[F].Statu;nt.systemCond=lt[F].Anlzu;nt.groupVal=lt[F].Tlgnhdr;nt.groupCounterDesc=lt[F].Ktext;nt.wcDesc=lt[F].Wcdescription;nt.assembly=lt[F].Istru;nt.deletion=lt[F].Delkz;nt.Plnnrgrptxt=lt[F].Plnnrgrptxt;nt.Statustxt=lt[F].Statustxt;nt.Anlzux=lt[F].Anlzux;nt.Istrux=lt[F].Istrux;nt.insPtDesc=lt[F].Slwbeztxt;nt.insPt=lt[F].Slwbez;nt.extNum=lt[F].Extnumtxt;nt.tlusg=lt[F].Tverwe;nt.grp=lt[F].Tlgnhdr;nt.assmbly=lt[F].Istru;nt.assmblyDesc=lt[F].Istrux;nt.Strat=lt[F].Strat;nt.vEquiLbl=false;nt.vEqui=false;nt.vEquiDesc=false;nt.vFlocLbl=false;nt.vFloc=false;nt.vFlocDesc=false;nt.bAddComponent=true;rt.header.push(nt)}}}var st=r.GTOprs.results;if(st.length>0){for(var q=0;q<st.length;q++){if(rt.grp===st[q].Tlgnhdr){var ot={};ot=st[q];ot.calcKeyDesc="";ot.actTypDesc="";ot.Vornr=st[q].Vornr;ot.flag=st[q].Tplnal+"-"+st[q].Vornr;ot.Arbpl=st[q].TlArbpl;ot.Plnal=st[q].Tplnal;ot.opState="None";ot.opDescState="None";ot.wcState="None";ot.plantState="None";ot.ctrlKeyState="None";ot.operation=st[q].Gvornr2op;ot.subOp=st[q].Uvorn;ot.workCenter=st[q].TlArbpl;ot.plant=st[q].Werks2gop;ot.controlKey=st[q].Steus2gop;ot.Steus=st[q].Steus2gop;ot.shortText=st[q].Ltxa1;ot.work=st[q].Arbei;ot.unitForWork=st[q].Arbeh;ot.number=st[q].Anzzl;ot.calcKey=st[q].Indet;ot.normDuration=st[q].Dauno;ot.uomDuration=st[q].Daune;ot.workPerc=st[q].Prznt.toString();ot.exeFactor=st[q].Aufkt;ot.Werks=st[q].Werks2gop;ot.actType=st[q].Larnt2gop;ot.stdTextKey=st[q].Ktsch;ot.assembly=st[q].Tistru;ot.noOfTime=st[q].Loanz;ot.sutability=st[q].Qualf2gop;ot.wageGroup=st[q].Logrp2gop;ot.wageType=st[q].Loart;ot.sysCondition=st[q].Tanlzu;ot.orderQty=st[q].Bmvrg;ot.ordQtyUnit=st[q].Bmeih;ot.netPrice=st[q].Opreis;ot.currency=st[q].Owaers;ot.priceUnit=st[q].Opeinh;ot.planDelTime=st[q].Plifz;ot.costElement=st[q].Sakto2gop;ot.materialGrp=st[q].Omatkl;ot.puchGroup=st[q].Oekgrp;ot.vendor=st[q].Lifnr;ot.purchOrg=st[q].Ekorg;ot.shortTerm=st[q].Sortl;ot.purchInfo=st[q].Infnr;ot.fieldKey=st[q].Slwid;ot.purchDoc=st[q].Ebeln;ot.purchDocItem=st[q].Ebelp2gop;ot.userFld=st[q].Slwid;ot.capCat=st[q].Qlkapar;ot.capCatDesc=st[q].Kapartxt;ot.quantity1_=st[q].Use04;ot.quantity1=st[q].Usr04;ot.quantity2=st[q].Usr05;ot.quantity2_=st[q].Use05;ot.value3=st[q].Usr06;ot.value4=st[q].Usr07;ot.value3_=st[q].Use06;ot.value4_=st[q].Use07;ot.text1=st[q].Usr00;ot.text2=st[q].Usr01;ot.text3=st[q].Usr03;ot.text4=st[q].Usr04;ot.date1=st[q].Usr08;ot.date2=st[q].Usr09;ot.indicator1=st[q].Usr10;ot.indicator2=st[q].Usr11;ot.Usrtxtname1=st[q].Usrtxtname1;ot.Usrtxtflg1=st[q].Usrtxtflg1;ot.Usrtxtname2=st[q].Usrtxtname2;ot.Usrtxtflg2=st[q].Usrtxtflg2;ot.Usrtxtname3=st[q].Usrtxtname3;ot.Usrtxtflg3=st[q].Usrtxtflg3;ot.Usrtxtname4=st[q].Usrtxtname4;ot.Usrtxtflg4=st[q].Usrtxtflg4;ot.Usrqtyname1=st[q].Usrqtyname1;ot.Usrqtyflg1=st[q].Usrqtyflg1;ot.Usrqtyname2=st[q].Usrqtyname2;ot.Usrqtyflg2=st[q].Usrqtyflg2;ot.Usrvalname1=st[q].Usrvalname1;ot.Usrvalflg1=st[q].Usrvalflg1;ot.Usrvalname2=st[q].Usrvalname2;ot.Usrvalflg2=st[q].Usrvalflg2;ot.Usrdatename1=st[q].Usrdatename1;ot.Usrdatflg1=st[q].Usrdatflg1;ot.Usrdatename2=st[q].Usrdatename2;ot.Usrdatflg2=st[q].Usrdatflg2;ot.Usrindname1=st[q].Usrindname1;ot.Usrindflag1=st[q].Usrindflag1;ot.Usrindname2=st[q].Usrindname2;ot.Usrindflag2=st[q].Usrindflag2;ot.qual=st[q].Qlotype;ot.search=st[q].Qsearchtm;ot.groupCounter=st[q].Tplnal;ot.VornrEnable=false;ot.UvornEnable=false;ot.equi=st[q].EqunrGop;ot.floc=st[q].TplnrGop;ot.PRT=[];ot.OprRel=[];ot.SrvPckgOvrw=[];ot.InspChar=[];var it=r.GTRel.results;if(it&&it.length>0){for(var h in it){if(rt.grp===it[h].Tlgnhdr&&ot.Plnal===it[h].Tplnal&&ot===it[h].Vorn2){var dt={Plnal:it[h].Tplnal,Vornr:it[h].Vorn2,OperationOR:it[h].Vornrgrel,Offset:it[h].Dauer,OUn:it[h].Zeinh,RelType:it[h].Aobar,PO:it[h].Gprznt,OI:it[h].Provg,ID:it[h].Gkalid,WrkCtrOR:it[h].Arbplgrel,PlantOR:it[h].Werksgrel};ot.OprRel.push(dt)}}}var ct=r.GTPRT.results;if(ct&&ct.length>0){for(var h=0;h<ct.length;h++){if(rt.grp===ct[h].Tlgnhdr&&ot.Plnal===ct[h].Tplnal&&ot.Vornr===ct[h].Vornrgprt){var pt={grp:ct[h].Tlgnhdr,Plnal:ct[h].Tplnal,Vornr:ct[h].Vornrgprt,ItmNum:ct[h].Psnfh,ItmCat:ct[h].Fhmar,PRT:ct[h].Fhmnr,Qty:ct[h].Mgvgw,UOM:ct[h].Mgeinh,QtyFrmla:ct[h].Mgform,PRTCtrl:ct[h].Steuf,PRTCtrlDesc:ct[h].Stftxt,StdUsgVal:ct[h].Ewvgw,StdUsgUOM:ct[h].Eweinh,UsgValFrmla:ct[h].Ewform,Plant:ct[h].Fhwrk,docType:ct[h].Dokareprt,docTypeDesc:"",docPart:ct[h].Doktleprt,docVersion:ct[h].Dokvreprt,prtEnable:false};if(pt.ItmCat==="M"){pt.title="Material";pt.matEnable=true;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="E"){pt.title="Equipment";pt.matEnable=false;pt.eqEnable=true;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="P"){pt.title="Measuring Point";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=true;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="D"){pt.title="Document";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=true;pt.othEnable=false}else if(pt.ItmCat==="O"){pt.title="Others";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=true}ot.PRT.push(pt)}}}var ut=r.GTInsp.results;if(ut&&ut.length>0){for(var h=0;h<ut.length;h++){if(rt.grp===ut[h].Tlgnhdr&&ot.Plnal===ut[h].Tplnal&&ot.Vornr===ut[h].Vornrgins){var gt={group:ut[h].Tlgnhdr,Plnal:ut[h].Tplnal,Vornr:ut[h].Vornrgins,InspChar:ut[h].Merknr,PrstInd:ut[h].Vste2gins,QuanChar:l.statusSel(ut[h].Quantitat),QualChar:l.statusSel(ut[h].QpmkRef),MastInspChar:ut[h].Verw2gins,Plant:ut[h].Uzae2tlgn,Version:ut[h].Ver2tlgni,ShrtTxt:ut[h].Kurztext,InspMthd:ut[h].Pmth2gins,InspMthdPlnt:ut[h].Qwe2tlgni,TolKey:ut[h].Toleranzs,VrsnInspMthd:ut[h].Pmtversio,SampProc:ut[h].Stichprve,SampUOM:ut[h].Probemgeh,BaseSampQty:ut[h].Pruefeinh.toString(),CodeGrp:ut[h].Auswmenge,InspEnable:false};ot.InspChar.push(gt)}}}var mt=r.GTSpack.results;if(mt&&mt.length>0){for(var h=0;h<mt.length;h++){if(rt.grp===mt[h].Tlgnhdr&&ot.Plnal===mt[h].Tplnal&&ot.Vornr===mt[h].Vornrr){var ft={group:mt[h].Tlgnhdr,Plnal:mt[h].Tplnal,Vornr:mt[h].Vornrr,LineNum:mt[h].SrvLine,DelIndSP:l.statusSel(mt[h].Del),ActNum:mt[h].Srvpos,ShrtTxt:mt[h].Ktext1,Qty:mt[h].Mengegspk,BUomSP:mt[h].Meinsgspk,GrossPrc:mt[h].Tbtwr,CurKey:mt[h].Waersgspk,Work:mt[h].IntWork,UnitOfWork:mt[h].Iwein,SPEnabled:false,DelIndSPEnabled:false};ot.SrvPckgOvrw.push(ft)}}}rt.operation.push(ot);var ht=r.GTMpackRead.results;var St=[];if(ht.length>0){for(var Ke in ht){if(rt.grp===ht[Ke].Tlgnhdr&&ot.Plnal===ht[Ke].Tplnal){St.push(ht[Ke])}}}var Tt=r.GTMPack.results;var Mt=[];if(Tt&&Tt.length>0){for(var bt in Tt){if(rt.grp===Tt[bt].Tlgnhdr&&ot.Plnal===Tt[bt].Tplnal&&ot.Vornr===Tt[bt].Vorn2gmpk){Mt.push(Tt[bt])}}}var Et={};if(St.length>0){Et={Plnal:St[0].Tplnal,Vornr:ot.Vornr,Strat:St[0].Startgmpk,SOp:"",Ltxa1:ot.Ltxa1,flag:St[0].Tplnal+"-"+ot.Vornr,MPArr:[]};for(var b in St){var vt=St[b];Et[vt.Paketgmpk]=false}}if(Mt.length>0){for(var u in Mt){Mt[u].Vornr=Mt[u].Vorn2gmpk;Mt[u].Strat=Mt[u].Startgmpk;Mt[u].Paket=Mt[u].Paketgmpk;Mt[u].MPEnable=false;var Ct=Mt[u];Et[Ct.Paketgmpk]=true}Et.MPArr=Mt}rt.MaintPckg.push(Et)}}}var xt=r.GTComp.results;if(xt.length>0){for(var h=0;h<xt.length;h++){if(rt.grp===xt[h].Tlgnhdr){var Vt={};Vt=xt[h];Vt.matDesc=xt[h].Maktx;Vt.slNo=h+1;Vt.Plnal=xt[h].Tplnal;Vt.Vornr=xt[h].Vornr;Vt.activity=xt[h].Vornr;Vt.flag=xt[h].Tplnal+"-"+xt[h].Vornr+"-"+Vt.slNo;Vt.hFlag=xt[h].Tplnal+"-"+xt[h].Vornr;Vt.group=xt[h].Tlgnhdr;Vt.grp=xt[h].Tlgnhdr;Vt.groupCounter=xt[h].Tplnal;Vt.activity=xt[h].Vorn2gcmp;Vt.Idnrk=xt[h].Idnrk;Vt.component=xt[h].Idnrk;Vt.compDesc=xt[h].Maktx;Vt.Menge=xt[h].Menge;Vt.compQty=xt[h].Menge;Vt.MeinsGcp=xt[h].MeinsGcp;Vt.compUnit=xt[h].MeinsGcp;Vt.backFlush=xt[h].RgekzGcp;Vt.resv=xt[h].Disp===""?xt[h].Disptxt:xt[h].Disp;Vt.resvDesc=xt[h].Disptxt;Vt.storageLoc=xt[h].Lgortgcmp;Vt.costElement=xt[h].Saktogcmp;Vt.bom=xt[h].Stlnrgcmp;Vt.bomCat=xt[h].Stltygcmp;Vt.bomCatDesc=xt[h].Stltygcmptxt;Vt.itCat=xt[h].Postp;Vt.assembly=xt[h].Istru;Vt.sortStr=xt[h].Sortf;Vt.itemNo=xt[h].Posnr;Vt.plantMaint=xt[h].Sanin;Vt.relSales=xt[h].Rvrel;Vt.relCost=xt[h].Sanka;Vt.pmAssembly=xt[h].Stkkz;Vt.spare=xt[h].Erskz;Vt.matProv=xt[h].Beikz;Vt.isPlant=xt[h].Pswrk;Vt.bulkMat=xt[h].Schgt;Vt.plant=xt[h].Werksgcmp;Vt.purchGrp=xt[h].Ekgrp;Vt.price=xt[h].Preis;Vt.currency=xt[h].Waers;Vt.prUnit=xt[h].Peinh;Vt.delTimeD=xt[h].Lifzt;Vt.matGrp=xt[h].Matkl;Vt.qtyFix=xt[h].Fmeng;Vt.altBom=xt[h].Stlal;Vt.cmpCompEnable=false;Vt.cmpEnable=false;Vt.cmpVisible=true;rt.component.push(Vt)}}a.cmpData=xt}var Xe=r.GTClass.results;if(Xe){if(Xe.length>0){for(var k=0;k<Xe.length;k++){if(rt.grp===Xe[k].Tlgnhdr){Xe[k].ctEnable=false;Xe[k].classEnable=false;Xe[k].ClassTypeDesc=Xe[k].Artxt;delete Xe[k].Artxt;Xe[k].ClassDesc=Xe[k].Kltxt;delete Xe[k].Kltxt;delete Xe[k].Changerequestid;delete Xe[k].Clint;delete Xe[k].Service;Xe[k].slNo=k+1;Xe[k].Plnal=Xe[k].Tplnal;Xe[k].flag=Xe[k].Tplnal+"-"+Xe[k].slNo;rt.Class.push(Xe[k])}}a.cData=Xe}}var Ye=r.GTVal.results;if(Ye){if(Ye.length>0){for(var ae=0;ae<Ye.length;ae++){if(rt.grp===Ye[ae].Tlgnhdr){Ye[ae].cNameEnable=false;delete Ye[ae].Ataut;delete Ye[ae].Ataw1;delete Ye[ae].Atawe;delete Ye[ae].Atcod;delete Ye[ae].Atflb;delete Ye[ae].Atflv;delete Ye[ae].Atimb;delete Ye[ae].Atsrt;delete Ye[ae].Atvglart;delete Ye[ae].Atzis;delete Ye[ae].Changerequestid;delete Ye[ae].Charid;delete Ye[ae].Classtype;delete Ye[ae].Service;delete Ye[ae].Valcnt;Ye[ae].slNo=ae+1;Ye[ae].Plnal=Ye[ae].Tplnal;Ye[ae].flag=Ye[ae].Tplnal+"-"+Ye[ae].Class+"-"+Ye[ae].slNo;rt.Char.push(Ye[ae])}a.chData=Ye}for(var u=0;u<rt.Char.length;u++){var S=1;for(var T=0;T<rt.Char.length;T++){if(u===T){continue}if(rt.Char[T].Atnam===rt.Char[u].Atnam){S++}}if(S>1){rt.Char[u].charDltEnable=true}else{rt.Char[u].charDltEnable=false}}}}et.push(rt)}}sap.ui.getCore().getModel("AIWListGTLModel").setSizeLimit(et.length);sap.ui.getCore().getModel("AIWListGTLModel").setData(et);a.updateCount("generalTL",et);var Pt=sap.ui.getCore().getModel("AIWListETLModel").getData();var tt=r.ETList.results;for(var It=0;It<tt.length;It++){var Lt={validFrm:l.getDateFormat(tt[It].Datuv),grp:tt[It].Tleqhdr,enable:true,KDenable:true,equiEnb:false,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var lt=r.ETList.results;if(lt.length>0){for(var F=0;F<lt.length;F++){if(Lt.grp===lt[F].Tleqhdr){var yt={};yt.pPlantDesc=lt[F].Iwerktxt;yt.Grpenable=false;yt.usageDesc=lt[F].TlUsgTxt;yt.plGrpDesc=lt[F].Plnnrgrptxt;yt.statusDesc=lt[F].Statustxt;yt.sysCondDesc=lt[F].Anlzux;yt.stratDesc=lt[F].Strattxt;yt.Plnal=lt[F].Tplnal;yt.Verwe=lt[F].Tverwe;yt.plEnable=false;yt.Ktext=lt[F].Ktext;yt.valueStateT="None";yt.valueStatePP="None";yt.valueStateU="None";yt.valueStateS="None";yt.profile=lt[F].Profident;yt.keydate=lt[F].Keydate;yt.wc=lt[F].Tarbpl;yt.plant=lt[F].Wcplant;yt.Iwerk=lt[F].Werks;yt.usage=lt[F].Tverwe;yt.plannerGrp=lt[F].Vagrp;yt.Statu=lt[F].Statu;yt.systemCond=lt[F].Anlzu;yt.groupVal=lt[F].Tleqhdr;yt.groupCounterDesc=lt[F].Eqktx;yt.wcDesc=lt[F].Wcdescription;yt.equipment=lt[F].Eq2tl;yt.equipmentDesc=lt[F].Eqktx;yt.deletion=lt[F].Delkz;yt.TlUsgTxt=lt[F].TlUsgTxt;yt.Plnnrgrptxt=lt[F].Plnnrgrptxt;yt.Statustxt=lt[F].Statustxt;yt.Anlzux=lt[F].Anlzux;yt.insPtDesc=lt[F].Slwbeztxt;yt.insPt=lt[F].Slwbez;yt.extNum=lt[F].Extnumtxt;yt.tlusg=lt[F].Tverwe;yt.grp=lt[F].Tlgnhdr;yt.assmbly=lt[F].Istru;yt.assmblyDesc=lt[F].Istrux;Lt.Strat=lt[F].Strat;Lt.equipment=lt[F].Eq2tl;Lt.equipmentDesc=lt[F].Eqktx;Lt.vEquiLbl=true;Lt.vEqui=true;Lt.vEquiDesc=true;Lt.vFlocLbl=false;Lt.vFloc=false;Lt.vFlocDesc=false;Lt.bAddComponent=true;Lt.header.push(yt)}}}var st=r.ETOprs.results;if(st.length>0){for(var q=0;q<st.length;q++){if(Lt.grp===st[q].Tleqhdr){var Dt={};Dt=st[q];Dt.calcKeyDesc="";Dt.actTypDesc="";Dt.flag=st[q].Tplnal+"-"+st[q].Vornr;Dt.Arbpl=st[q].TlArbpl;Dt.Plnal=st[q].Tplnal;Dt.Vornr=st[q].Vornr;Dt.opState="None";Dt.opDescState="None";Dt.wcState="None";Dt.plantState="None";Dt.ctrlKeyState="None";Dt.operation=st[q].Evornr2op;Dt.groupCounter=st[q].Tplnal;Dt.subOp=st[q].Uvorn;Dt.workCenter=st[q].TlArbpl;Dt.Werks=st[q].Werks2eop;Dt.plant=st[q].Werks2eop;Dt.controlKey=st[q].Steus2eop;Dt.Steus=st[q].Steus2gop;Dt.shortText=st[q].Ltxa1;Dt.work=st[q].Arbei;Dt.unitForWork=st[q].Arbeh;Dt.number=st[q].Anzzl;Dt.calcKey=st[q].Indet;Dt.normDuration=st[q].Dauno;Dt.uomDuration=st[q].Daune;Dt.workPerc=st[q].Prznt.toString();Dt.exeFactor=st[q].Aufkt;Dt.actType=st[q].Larnt2eop;Dt.stdTextKey=st[q].Ktsch;Dt.assembly=st[q].Tistru;Dt.noOfTime=st[q].Loanz;Dt.sutability=st[q].Qualf2eop;Dt.wageGroup=st[q].Logrp2eop;Dt.wageType=st[q].Loart;Dt.sysCondition=st[q].Tanlzu;Dt.orderQty=st[q].Bmvrg;Dt.ordQtyUnit=st[q].Bmeih;Dt.netPrice=st[q].Opreis;Dt.currency=st[q].Owaers;Dt.priceUnit=st[q].Opeinh;Dt.planDelTime=st[q].Plifz;Dt.costElement=st[q].Sakto2eop;Dt.materialGrp=st[q].Omatkl;Dt.puchGroup=st[q].Oekgrp;Dt.vendor=st[q].Lifnr;Dt.purchOrg=st[q].Ekorg;Dt.shortTerm=st[q].Sortl;Dt.purchInfo=st[q].Infnr;Dt.fieldKey=st[q].Slwid;Dt.purchDoc=st[q].Ebeln;Dt.purchDocItem=st[q].Ebelp2eop;Dt.userFld=st[q].Slwid;Dt.capCat=st[q].Qlkapar;Dt.capCatDesc=st[q].Kapartxt;Dt.quantity1_=st[q].Use04;Dt.quantity1=st[q].Usr04;Dt.quantity2=st[q].Usr05;Dt.quantity2_=st[q].Use05;Dt.value3=st[q].Usr06;Dt.value4=st[q].Usr07;Dt.value3_=st[q].Use06;Dt.value4_=st[q].Use07;Dt.text1=st[q].Usr00;Dt.text2=st[q].Usr01;Dt.text3=st[q].Usr03;Dt.text4=st[q].Usr04;Dt.date1=st[q].Usr08;Dt.date2=st[q].Usr09;Dt.indicator1=st[q].Usr10;Dt.indicator2=st[q].Usr11;Dt.Usrtxtname1=st[q].Usrtxtname1;Dt.Usrtxtflg1=st[q].Usrtxtflg1;Dt.Usrtxtname2=st[q].Usrtxtname2;Dt.Usrtxtflg2=st[q].Usrtxtflg2;Dt.Usrtxtname3=st[q].Usrtxtname3;Dt.Usrtxtflg3=st[q].Usrtxtflg3;Dt.Usrtxtname4=st[q].Usrtxtname4;Dt.Usrtxtflg4=st[q].Usrtxtflg4;Dt.Usrqtyname1=st[q].Usrqtyname1;Dt.Usrqtyflg1=st[q].Usrqtyflg1;Dt.Usrqtyname2=st[q].Usrqtyname2;Dt.Usrqtyflg2=st[q].Usrqtyflg2;Dt.Usrvalname1=st[q].Usrvalname1;Dt.Usrvalflg1=st[q].Usrvalflg1;Dt.Usrvalname2=st[q].Usrvalname2;Dt.Usrvalflg2=st[q].Usrvalflg2;Dt.Usrdatename1=st[q].Usrdatename1;Dt.Usrdatflg1=st[q].Usrdatflg1;Dt.Usrdatename2=st[q].Usrdatename2;Dt.Usrdatflg2=st[q].Usrdatflg2;Dt.Usrindname1=st[q].Usrindname1;Dt.Usrindflag1=st[q].Usrindflag1;Dt.Usrindname2=st[q].Usrindname2;Dt.Usrindflag2=st[q].Usrindflag2;Dt.qual=st[q].Qlotype;Dt.search=st[q].Qsearchtm;Dt.VornrEnable=false;Dt.UvornEnable=false;Dt.equi=st[q].EqunrEop;Dt.floc=st[q].TplnrEop;Dt.PRT=[];Dt.OprRel=[];Dt.SrvPckgOvrw=[];Dt.InspChar=[];var kt=r.ETRel.results;if(kt&&kt.length>0){for(var h=0;h<kt.length;h++){if(Lt.grp===kt[h].Tleqhdr&&Dt.Plnal===kt[h].Tplnal&&Dt.Vornr===kt[h].Vorn2){var dt={Plnal:kt[h].Tplnal,Vornr:kt[h].Vorn2,OperationOR:kt[h].Vornrerel,Offset:kt[h].Dauer,OUn:kt[h].Zeinh,RelType:kt[h].Aobar,PO:kt[h].Eprznt,OI:kt[h].Provg,ID:kt[h].Ekalid,WrkCtrOR:kt[h].Arbplerel,PlantOR:kt[h].Werkserel};Dt.OprRel.push(dt)}}}var Ft=r.ETInsp.results;if(Ft&&Ft.length>0){for(var h=0;h<Ft.length;h++){if(Lt.grp===Ft[h].Tleqhdr&&Dt.Plnal===Ft[h].Tplnal&&Dt.Vornr===Ft[h].Vornreins){var gt={group:Ft[h].Tlgnhdr,Plnal:Ft[h].Tplnal,Vornr:Ft[h].Vornreins,InspChar:Ft[h].Merknr,PrstInd:Ft[h].Vste2eins,QuanChar:l.statusSel(Ft[h].Quantitat),QualChar:l.statusSel(Ft[h].QpmkRef),MastInspChar:Ft[h].Verw2eins,Plant:Ft[h].Uzae2tlen,Version:Ft[h].Ver2tleqi,ShrtTxt:Ft[h].Kurztext,InspMthd:Ft[h].Pmth2eins,InspMthdPlnt:Ft[h].Qwe2tleqi,TolKey:Ft[h].Toleranzs,VrsnInspMthd:Ft[h].Pmtversio,SampProc:Ft[h].Stichprve,SampUOM:Ft[h].Probemgeh,BaseSampQty:Ft[h].Pruefeinh.toString(),CodeGrp:Ft[h].Auswmenge,InspEnable:false};Dt.InspChar.push(gt)}}}var At=r.ETSpack.results;if(At&&At.length>0){for(var h=0;h<At.length;h++){if(Lt.grp===At[h].Tleqhdr&&Dt.Plnal===At[h].Tplnal&&Dt.Vornr===At[h].Vornrr){var ft={group:At[h].Tleqhdr,Plnal:At[h].Tplnal,Vornr:At[h].Vornrr,LineNum:At[h].SrvLine,DelIndSP:l.statusSel(At[h].Del),ActNum:At[h].Srvpos,ShrtTxt:At[h].Ktext1,Qty:At[h].Mengeespk,BUomSP:At[h].Meinsespk,GrossPrc:At[h].Tbtwr,CurKey:At[h].Waersespk,Work:At[h].IntWork,UnitOfWork:At[h].Iwein,DelIndSPEnabled:false,SPEnabled:false};Dt.SrvPckgOvrw.push(ft)}}}var wt=r.ETPRT.results;if(wt&&wt.length>0){for(var h=0;h<wt.length;h++){if(Lt.grp===wt[h].Tleqhdr&&Dt.Plnal===wt[h].Tplnal&&Dt.Vornr===wt[h].Vornreprt){var pt={grp:wt[h].Tleqhdr,Plnal:wt[h].Tplnal,Vornr:wt[h].Vornreprt,ItmNum:wt[h].Psnfh,ItmCat:wt[h].Fhmar,PRT:wt[h].Fhmnr,Qty:wt[h].Mgvgw,UOM:wt[h].Mgeinh,QtyFrmla:wt[h].Mgform,PRTCtrl:wt[h].Steuf,PRTCtrlDesc:wt[h].Stftxt,StdUsgVal:wt[h].Ewvgw,StdUsgUOM:wt[h].Eweinh,UsgValFrmla:wt[h].Ewform,Plant:wt[h].Fhwrk,docType:wt[h].Dokareprt,docTypeDesc:"",docPart:wt[h].Doktleprt,docVersion:wt[h].Dokvreprt,prtEnable:false};if(pt.ItmCat==="M"){pt.title="Material";pt.matEnable=true;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="E"){pt.title="Equipment";pt.matEnable=false;pt.eqEnable=true;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="P"){pt.title="Measuring Point";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=true;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="D"){pt.title="Document";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=true;pt.othEnable=false}else if(pt.ItmCat==="O"){pt.title="Others";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=true}Dt.PRT.push(pt)}}}Lt.operation.push(Dt);var ht=r.ETMpackRead.results;var St=[];if(ht.length>0){for(var Ke in ht){if(Lt.grp===ht[Ke].Tleqhdr&&Dt.Plnal===ht[Ke].Tplnal){St.push(ht[Ke])}}}var Tt=r.ETMPack.results;var Mt=[];if(Tt.length>0){for(var bt in Tt){if(Lt.grp===Tt[bt].Tleqhdr&&Dt.Plnal===Tt[bt].Tplnal&&Dt.Vornr===Tt[bt].Vorn2empk){Mt.push(Tt[bt])}}}var Et={};if(St.length>0){Et={Plnal:St[0].Tplnal,Vornr:etOperationVornr,Strat:St[0].Startempk,SOp:"",Ltxa1:Dt.Ltxa1,flag:St[0].Tplnal+"-"+Dt.Vornr,MPArr:[]};for(var b in St){var vt=St[b];Et[vt.Paketempk]=false}}if(Mt.length>0){for(var u in Mt){Mt[u].Vornr=Mt[u].Vorn2empk;Mt[u].Strat=Mt[u].Startempk;Mt[u].Paket=Mt[u].Paketempk;Mt[u].MPEnable=false;var Ct=Mt[u];if(Mt[u].IsSelected==="X"){Et[Ct.Paketempk]=true}}Et.MPArr=Mt}Lt.MaintPckg.push(Et)}}a.oData=Lt.operation}xt=r.ETComp.results;if(xt.length>0){for(var qt=0;qt<xt.length;qt++){if(Lt.grp===xt[qt].Tleqhdr){var Wt={};Wt=xt[qt];Wt.matDesc=xt[qt].Maktx;Wt.slNo=qt+1;Wt.flag=xt[qt].Tplnal+"-"+xt[qt].Vornr+"-"+xt[qt].slNo;Wt.hFlag=xt[qt].Tplnal+"-"+xt[qt].Vornr;Wt.Vornr=xt[qt].Vornr;Wt.activity=xt[qt].Vornr;Wt.group=xt[qt].Tleqhdr;Wt.grp=xt[qt].Tleqhdr;Wt.groupCounter=xt[qt].Tplnal;Wt.component=xt[qt].Idnrk;Wt.compDesc=xt[qt].Maktx;Wt.compQty=xt[qt].Menge;Wt.compUnit=xt[qt].MeinsEcp;Wt.backFlush=xt[qt].RgekzEcp;Wt.resv=xt[qt].Disp===""?xt[qt].Disptxt:xt[qt].Disp;Wt.resvDesc=xt[qt].Disptxt;Wt.storageLoc=xt[qt].Lgortecmp;Wt.costElement=xt[qt].Saktoecmp;Wt.bom=xt[qt].Stlnrecmp;Wt.bomCat=xt[qt].Stltyecmp;Wt.bomCatDesc=xt[qt].Stltyecmptxt;Wt.itCat=xt[qt].Postp;Wt.assembly=xt[qt].Istru;Wt.sortStr=xt[qt].Sortf;Wt.itemNo=xt[qt].Posnr;Wt.plantMaint=xt[qt].Sanin;Wt.relSales=xt[qt].Rvrel;Wt.relCost=xt[qt].Sanka;Wt.pmAssembly=xt[qt].Stkkz;Wt.spare=xt[qt].Erskz;Wt.matProv=xt[qt].Beikz;Wt.isPlant=xt[qt].Pswrk;Wt.bulkMat=xt[qt].Schgt;Wt.plant=xt[qt].Werksecmp;Wt.purchGrp=xt[qt].Ekgrp;Wt.price=xt[qt].Preis;Wt.currency=xt[qt].Waers;Wt.prUnit=xt[qt].Peinh;Wt.delTimeD=xt[qt].Lifzt;Wt.matGrp=xt[qt].Matkl;Wt.qtyFix=xt[qt].Fmeng;Wt.altBom=xt[qt].Stlal;Wt.cmpCompEnable=false;Wt.cmpEnable=false;Wt.cmpVisible=true;Lt.component.push(Wt)}}a.cmpData=xt}var Xe=r.ETClass.results;if(Xe){if(Xe.length>0){for(var k=0;k<Xe.length;k++){if(Lt.grp===Xe[k].Tleqhdr){Xe[k].ctEnable=false;Xe[k].classEnable=false;Xe[k].ClassTypeDesc=Xe[k].Artxt;delete Xe[k].Artxt;Xe[k].ClassDesc=Xe[k].Kltxt;delete Xe[k].Kltxt;delete Xe[k].Changerequestid;delete Xe[k].Clint;delete Xe[k].Service;Xe[k].slNo=k+1;Xe[k].Plnal=Xe[k].Tplnal;Xe[k].flag=Xe[k].Tplnal+"-"+Xe[k].slNo;Lt.Class.push(Xe[k])}}a.cData=Xe}}var Ye=r.ETVal.results;if(Ye){if(Ye.length>0){for(var ae=0;ae<Ye.length;ae++){if(Lt.grp===Ye[ae].Tleqhdr){Ye[ae].cNameEnable=false;delete Ye[ae].Ataut;delete Ye[ae].Ataw1;delete Ye[ae].Atawe;delete Ye[ae].Atcod;delete Ye[ae].Atflb;delete Ye[ae].Atflv;delete Ye[ae].Atimb;delete Ye[ae].Atsrt;delete Ye[ae].Atvglart;delete Ye[ae].Atzis;delete Ye[ae].Changerequestid;delete Ye[ae].Charid;delete Ye[ae].Classtype;delete Ye[ae].Service;delete Ye[ae].Valcnt;Ye[ae].slNo=ae+1;Ye[ae].Plnal=Ye[ae].Tplnal;Ye[ae].flag=Ye[ae].Tplnal+"-"+Ye[ae].Class+"-"+Ye[ae].slNo;Lt.Char.push(Ye[ae])}a.chData=Ye}for(var u=0;u<Lt.Char.length;u++){var S=1;for(var T=0;T<Lt.Char.length;T++){if(u===T){continue}if(Lt.Char[T].Atnam===Lt.Char[u].Atnam){S++}}if(S>1){Lt.Char[u].charDltEnable=true}else{Lt.Char[u].charDltEnable=false}}}}Pt.push(Lt)}sap.ui.getCore().getModel("AIWListETLModel").setSizeLimit(Pt.length);sap.ui.getCore().getModel("AIWListETLModel").setData(Pt);a.updateCount("equiTL",Pt);var Bt=sap.ui.getCore().getModel("AIWListFTLModel").getData();var tt=r.FTList.results;for(var Nt=0;Nt<tt.length;Nt++){var Ot={validFrm:l.getDateFormat(tt[Nt].Datuv),grp:tt[Nt].Tlflhdr,vEquiLbl:false,vEqui:false,vEquiDesc:false,enable:true,KDenable:true,header:[],operation:[],component:[],Class:[],Char:[],MaintPckg:[]};var lt=r.FTList.results;if(lt.length>0){for(var F=0;F<lt.length;F++){if(Ot.grp===lt[F].Tlflhdr){var Rt={};Rt.Grpenable=false;Rt.pPlantDesc=lt[F].Iwerktxt;Rt.usageDesc=lt[F].TlUsgTxt;Rt.plGrpDesc=lt[F].Plnnrgrptxt;Rt.statusDesc=lt[F].Statustxt;Rt.sysCondDesc=lt[F].Anlzux;Rt.stratDesc=lt[F].Strattxt;Rt.Plnal=lt[F].Tplnal;Rt.Verwe=lt[F].Tverwe;Rt.plEnable=false;Rt.Ktext=lt[F].Ktext;Rt.valueStateT="None";Rt.valueStatePP="None";Rt.valueStateU="None";Rt.valueStateS="None";Rt.profile=lt[F].Profident;Rt.keydate=lt[F].Keydate;Rt.wc=lt[F].Tarbpl;Rt.Iwerk=lt[F].Werks;Rt.plant=lt[F].Wcplant;Rt.tlusg=lt[F].Tverwe;Rt.plannerGrp=lt[F].Vagrp;Rt.Statu=lt[F].Statu;Rt.systemCond=lt[F].Anlzu;Rt.groupVal=lt[F].Tlflhdr;Rt.groupCounterDesc=lt[F].Pltxt;Rt.wcDesc=lt[F].Wcdescription;Rt.assembly=lt[F].Istru;Rt.floc=lt[F].Fl2tl;Rt.flocDesc=lt[F].Pltxt;Rt.deletion=lt[F].Delkz;Rt.TlUsgTxt=lt[F].TlUsgTxt;Rt.Plnnrgrptxt=lt[F].Plnnrgrptxt;Rt.Statustxt=lt[F].Statustxt;Rt.Anlzux=lt[F].Anlzux;Rt.insPtDesc=lt[F].Slwbeztxt;Rt.insPt=lt[F].Slwbez;Rt.extNum=lt[F].Extnumtxt;Rt.grp=lt[F].Tlgnhdr;Rt.assmbly=lt[F].Istru;Rt.assmblyDesc=lt[F].Istrux;Ot.Strat=lt[F].Strat;Ot.floc=lt[F].Fl2tl;Ot.flocDesc=lt[F].Pltxt;Ot.vEquiLbl=false;Ot.vEqui=false;Ot.vEquiDesc=false;Ot.vFlocLbl=true;Ot.vFloc=true;Ot.vFlocDesc=true;Ot.bAddComponent=true;Ot.header.push(Rt)}}}var st=r.FTOprs.results;if(st.length>0){for(var q=0;q<st.length;q++){if(Ot.grp===st[q].Tlflhdr){var Ut={};Ut=st[q];Ut.calcKeyDesc="";Ut.actTypDesc="";Ut.flag=st[q].Tplnal+"-"+st[q].Vornr;Ut.Arbpl=st[q].TlArbpl;Ut.Plnal=st[q].Tplnal;Ut.Vornr=st[q].Vornr;Ut.opState="None";Ut.opDescState="None";Ut.wcState="None";Ut.plantState="None";Ut.ctrlKeyState="None";Ut.groupCounter=st[q].Tplnal;Ut.operation=st[q].Fvornr2op;Ut.subOp=st[q].Uvorn;Ut.workCenter=st[q].TlArbpl;Ut.plant=st[q].Werks2fop;Ut.controlKey=st[q].Steus2fop;Ut.Steus=st[q].Steus2gop;Ut.shortText=st[q].Ltxa1;Ut.work=st[q].Arbei;Ut.unitForWork=st[q].Arbeh;Ut.number=st[q].Anzzl;Ut.calcKey=st[q].Indet;Ut.Werks=st[q].Werks2fop;Ut.normDuration=st[q].Dauno;Ut.uomDuration=st[q].Daune;Ut.workPerc=st[q].Prznt.toString();Ut.exeFactor=st[q].Aufkt;Ut.actType=st[q].Larnt2fop;Ut.stdTextKey=st[q].Ktsch;Ut.assembly=st[q].Tistru;Ut.noOfTime=st[q].Loanz;Ut.sutability=st[q].Qualf2fop;Ut.wageGroup=st[q].Logrp2fop;Ut.wageType=st[q].Loart;Ut.sysCondition=st[q].Tanlzu;Ut.orderQty=st[q].Bmvrg;Ut.ordQtyUnit=st[q].Bmeih;Ut.netPrice=st[q].Opreis;Ut.currency=st[q].Owaers;Ut.priceUnit=st[q].Opeinh;Ut.planDelTime=st[q].Plifz;Ut.costElement=st[q].Sakto2fop;Ut.materialGrp=st[q].Omatkl;Ut.puchGroup=st[q].Oekgrp;Ut.vendor=st[q].Lifnr;Ut.purchOrg=st[q].Ekorg;Ut.shortTerm=st[q].Sortl;Ut.purchInfo=st[q].Infnr;Ut.fieldKey=st[q].Slwid;Ut.purchDoc=st[q].Ebeln;Ut.purchDocItem=st[q].Ebelp2fop;Ut.userFld=st[q].Slwid;Ut.capCat=st[q].Qlkapar;Ut.capCatDesc=st[q].Kapartxt;Ut.quantity1_=st[q].Use04;Ut.quantity1=st[q].Usr04;Ut.quantity2=st[q].Usr05;Ut.quantity2_=st[q].Use05;Ut.value3=st[q].Usr06;Ut.value4=st[q].Usr07;Ut.value3_=st[q].Use06;Ut.value4_=st[q].Use07;Ut.text1=st[q].Usr00;Ut.text2=st[q].Usr01;Ut.text3=st[q].Usr03;Ut.text4=st[q].Usr04;Ut.date1=st[q].Usr08;Ut.date2=st[q].Usr09;Ut.indicator1=st[q].Usr10;Ut.indicator2=st[q].Usr11;Ut.Usrtxtname1=st[q].Usrtxtname1;Ut.Usrtxtflg1=st[q].Usrtxtflg1;Ut.Usrtxtname2=st[q].Usrtxtname2;Ut.Usrtxtflg2=st[q].Usrtxtflg2;Ut.Usrtxtname3=st[q].Usrtxtname3;Ut.Usrtxtflg3=st[q].Usrtxtflg3;Ut.Usrtxtname4=st[q].Usrtxtname4;Ut.Usrtxtflg4=st[q].Usrtxtflg4;Ut.Usrqtyname1=st[q].Usrqtyname1;Ut.Usrqtyflg1=st[q].Usrqtyflg1;Ut.Usrqtyname2=st[q].Usrqtyname2;Ut.Usrqtyflg2=st[q].Usrqtyflg2;Ut.Usrvalname1=st[q].Usrvalname1;Ut.Usrvalflg1=st[q].Usrvalflg1;Ut.Usrvalname2=st[q].Usrvalname2;Ut.Usrvalflg2=st[q].Usrvalflg2;Ut.Usrdatename1=st[q].Usrdatename1;Ut.Usrdatflg1=st[q].Usrdatflg1;Ut.Usrdatename2=st[q].Usrdatename2;Ut.Usrdatflg2=st[q].Usrdatflg2;Ut.Usrindname1=st[q].Usrindname1;Ut.Usrindflag1=st[q].Usrindflag1;Ut.Usrindname2=st[q].Usrindname2;Ut.Usrindflag2=st[q].Usrindflag2;Ut.qual=st[q].Qlotype;Ut.search=st[q].Qsearchtm;Ut.VornrEnable=false;Ut.UvornEnable=false;Ut.equi=st[q].EqunrFop;Ut.floc=st[q].TplnrFop;Ut.PRT=[];Ut.OprRel=[];Ut.SrvPckgOvrw=[];Ut.InspChar=[];var zt=r.FTRel.results;if(zt&&zt.length>0){for(var h=0;h<zt.length;h++){if(Ot.grp===zt[h].Tlflhdr&&Ut.Plnal===zt[h].Tplnal&&Ut.Vornr===zt[h].Vorn2){var dt={Plnal:zt[h].Tplnal,Vornr:zt[h].Vorn2,OperationOR:zt[h].Vornrfrel,Offset:zt[h].Dauer,OUn:zt[h].Zeinh,RelType:zt[h].Aobar,PO:zt[h].Fprznt,OI:zt[h].Provg,ID:zt[h].Fkalid,WrkCtrOR:zt[h].Arbplfrel,PlantOR:zt[h].Werksfrel};Ut.OprRel.push(dt)}}}var Kt=r.FTInsp.results;if(Kt&&Kt.length>0){for(var h=0;h<Kt.length;h++){if(Ot.grp===Kt[h].Tlflhdr&&Ut.Plnal===Kt[h].Tplnal&&Ut.Vornr===Kt[h].Vornrfins){var gt={group:Kt[h].Tlflhdr,Plnal:Kt[h].Tplnal,Vornr:Kt[h].Vornrfins,InspChar:Kt[h].Merknr,PrstInd:Kt[h].Vste2fins,QuanChar:l.statusSel(Kt[h].Quantitat),QualChar:l.statusSel(Kt[h].QpmkRef),MastInspChar:Kt[h].Verw2fins,Plant:Kt[h].Uzae2tlfn,Version:Kt[h].Ver2tlfli,ShrtTxt:Kt[h].Kurztext,InspMthd:Kt[h].Pmth2fins,InspMthdPlnt:Kt[h].Qwe2tlfli,TolKey:Kt[h].Toleranzs,VrsnInspMthd:Kt[h].Pmtversio,SampProc:Kt[h].Stichprve,SampUOM:Kt[h].Probemgeh,BaseSampQty:Kt[h].Pruefeinh.toString(),CodeGrp:Kt[h].Auswmenge,InspEnable:false};Ut.InspChar.push(gt)}}}var Ht=r.FTSpack.results;if(Ht&&Ht.length>0){for(var h=0;h<Ht.length;h++){if(Ot.grp===Ht[h].Tlflhdr&&Ut.Plnal===Ht[h].Tplnal&&Ut.Vornr===Ht[h].Vornrr){var ft={group:Ht[h].Tlflhdr,Plnal:Ht[h].Tplnal,Vornr:Ht[h].Vornrr,LineNum:Ht[h].SrvLine,DelIndSP:l.statusSel(Ht[h].Del),ActNum:Ht[h].Srvpos,ShrtTxt:Ht[h].Ktext1,Qty:Ht[h].Mengefspk,BUomSP:Ht[h].Meinsfspk,GrossPrc:Ht[h].Tbtwr,CurKey:Ht[h].Waersfspk,Work:Ht[h].IntWork,UnitOfWork:Ht[h].Iwein,DelIndSPEnabled:false,SPEnabled:false};Ut.SrvPckgOvrw.push(ft)}}}var Gt=r.FTPRT.results;if(Gt&&Gt.length>0){for(var h=0;h<Gt.length;h++){if(Ot.grp===Gt[h].Tlflhdr&&Ut.Plnal===Gt[h].Tplnal&&Ut.Vornr===Gt[h].Vornrfprt){var pt={grp:Gt[h].Tlflhdr,Plnal:Gt[h].Tplnal,Vornr:Gt[h].Vornrfprt,ItmNum:Gt[h].Psnfh,ItmCat:Gt[h].Fhmar,PRT:Gt[h].Fhmnr,Qty:Gt[h].Mgvgw,UOM:Gt[h].Mgeinh,QtyFrmla:Gt[h].Mgform,PRTCtrl:Gt[h].Steuf,PRTCtrlDesc:Gt[h].Stftxt,StdUsgVal:Gt[h].Ewvgw,StdUsgUOM:Gt[h].Eweinh,UsgValFrmla:Gt[h].Ewform,Plant:Gt[h].Fhwrk,docType:Gt[h].Dokareprt,docTypeDesc:"",docPart:Gt[h].Doktleprt,docVersion:Gt[h].Dokvreprt,prtEnable:false};if(pt.ItmCat==="M"){pt.title="Material";pt.matEnable=true;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="E"){pt.title="Equipment";pt.matEnable=false;pt.eqEnable=true;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="P"){pt.title="Measuring Point";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=true;pt.docEnable=false;pt.othEnable=false}else if(pt.ItmCat==="D"){pt.title="Document";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=true;pt.othEnable=false}else if(pt.ItmCat==="O"){pt.title="Others";pt.matEnable=false;pt.eqEnable=false;pt.msptEnable=false;pt.docEnable=false;pt.othEnable=true}Ut.PRT.push(pt)}}}Ot.operation.push(Ut);var ht=r.FTMpackRead.results;var St=[];if(ht.length>0){for(var Ke in ht){if(Ot.grp===ht[Ke].Tlflhdr&&Ut.Plnal===ht[Ke].Tplnal){St.push(ht[Ke])}}}var Tt=r.FTMPack.results;var Mt=[];if(Tt.length>0){for(var bt in Tt){if(Ot.grp===Tt[bt].Tlflhdr&&Ut.Plnal===Tt[bt].Tplnal&&Ut.Vornr===Tt[bt].Vorn2fmpk){Mt.push(Tt[bt])}}}var Et={};if(St.length>0){Et={Plnal:St[0].Tplnal,Vornr:Ut.Vornr,Strat:St[0].Startfmpk,SOp:"",Ltxa1:Ut.Ltxa1,flag:St[0].Tplnal+"-"+Ut.Vornr,MPArr:[]};for(var b in St){var vt=St[b];Et[vt.Paketfmpk]=false}}if(Mt.length>0){for(var u in Mt){Mt[u].Vornr=Mt[u].Vorn2fmpk;Mt[u].Strat=Mt[u].Startfmpk;Mt[u].Paket=Mt[u].Paketfmpk;Mt[u].MPEnable=true;var Ct=Mt[u];if(Mt[u].IsSelected==="X"){Et[Ct.Paketfmpk]=true}}Et.MPArr=Mt}Ot.MaintPckg.push(Et)}}}xt=r.FTComp.results;if(xt.length>0){for(var b=0;b<xt.length;b++){if(Ot.grp===xt[b].Tlflhdr){var jt={};jt=xt[b];jt.matDesc=xt[b].Maktx;jt.slNo=qt+1;jt.flag=xt[b].Tplnal+"-"+xt[b].Vornr+"-"+xt[b].slNo;jt.hFlag=xt[b].Tplnal+"-"+xt[b].Vornr;jt.group=xt[b].Tlflhdr;jt.grp=xt[b].Tlflhdr;jt.groupCounter=xt[b].Tplnal;jt.activity=xt[b].Vornr;jt.Vornr=xt[b].Vornr;jt.component=xt[b].Idnrk;jt.compDesc=xt[b].Maktx;jt.compQty=xt[b].Menge;jt.compUnit=xt[b].MeinsFcp;jt.backFlush=xt[b].RgekzFcp;jt.resv=xt[b].Disp===""?xt[b].Disptxt:xt[b].Disp;jt.resvDesc=xt[b].Disptxt;jt.storageLoc=xt[b].Lgortfcmp;jt.costElement=xt[b].Saktofcmp;jt.bom=xt[b].Stlnrfcmp;jt.bomCat=xt[b].Stltyfcmp;jt.bomCatDesc=xt[b].Stltyfcmptxt;jt.itCat=xt[b].Postp;jt.assembly=xt[b].Istru;jt.sortStr=xt[b].Sortf;jt.itemNo=xt[b].Posnr;jt.plantMaint=xt[b].Sanin;jt.relSales=xt[b].Rvrel;jt.relCost=xt[b].Sanka;jt.pmAssembly=xt[b].Stkkz;jt.spare=xt[b].Erskz;jt.matProv=xt[b].Beikz;jt.isPlant=xt[b].Pswrk;jt.bulkMat=xt[b].Schgt;jt.plant=xt[b].Werksfcmp;jt.purchGrp=xt[b].Ekgrp;jt.price=xt[b].Preis;jt.currency=xt[b].Waers;jt.prUnit=xt[b].Peinh;jt.delTimeD=xt[b].Lifzt;jt.matGrp=xt[b].Matkl;jt.qtyFix=xt[b].Fmeng;jt.altBom=xt[b].Stlal;jt.cmpCompEnable=false;jt.cmpEnable=false;jt.cmpVisible=true;Ot.component.push(jt)}}a.cmpData=xt}var Xe=r.FTClass.results;if(Xe){if(Xe.length>0){for(var k=0;k<Xe.length;k++){if(Ot.grp===Xe[k].Tlflhdr){Xe[k].ctEnable=false;Xe[k].classEnable=false;Xe[k].ClassTypeDesc=Xe[k].Artxt;delete Xe[k].Artxt;Xe[k].ClassDesc=Xe[k].Kltxt;delete Xe[k].Kltxt;delete Xe[k].Changerequestid;delete Xe[k].Clint;delete Xe[k].Service;Xe[k].slNo=k+1;Xe[k].Plnal=Xe[k].Tplnal;Xe[k].flag=Xe[k].Tplnal+"-"+Xe[k].slNo;Ot.Class.push(Xe[k])}}a.cData=Xe}}var Ye=r.FTVal.results;if(Ye){if(Ye.length>0){for(var ae=0;ae<Ye.length;ae++){if(Ot.grp===Ye[ae].Tlflhdr){Ye[ae].cNameEnable=false;delete Ye[ae].Ataut;delete Ye[ae].Ataw1;delete Ye[ae].Atawe;delete Ye[ae].Atcod;delete Ye[ae].Atflb;delete Ye[ae].Atflv;delete Ye[ae].Atimb;delete Ye[ae].Atsrt;delete Ye[ae].Atvglart;delete Ye[ae].Atzis;delete Ye[ae].Changerequestid;delete Ye[ae].Charid;delete Ye[ae].Classtype;delete Ye[ae].Service;delete Ye[ae].Valcnt;Ye[ae].slNo=ae+1;Ye[ae].Plnal=Ye[ae].Tplnal;Ye[ae].flag=Ye[ae].Tplnal+"-"+Ye[ae].Class+"-"+Ye[ae].slNo;Ot.Char.push(Ye[ae])}a.chData=Ye}for(var u=0;u<Ot.Char.length;u++){var S=1;for(var T=0;T<Ot.Char.length;T++){if(u===T){continue}if(Ot.Char[T].Atnam===Ot.Char[u].Atnam){S++}}if(S>1){Ot.Char[u].charDltEnable=true}else{Ot.Char[u].charDltEnable=false}}}}Bt.push(Ot)}sap.ui.getCore().getModel("AIWListFTLModel").setSizeLimit(Bt.length);sap.ui.getCore().getModel("AIWListFTLModel").setData(Bt);a.updateCount("flocTL",Bt);var Qt=sap.ui.getCore().getModel("AIWListOLModel").getData();var _t=r.Olink.results;if(_t!==null){for(var k=0;k<_t.length;k++){var Jt={};Jt.lenable=true;Jt.linkCat=_t[k].Netyp;Jt.objCat=_t[k].Kantyp;Jt.link=_t[k].Objlink;Jt.linkCatDesc=_t[k].Netyptxt;Jt.objCat=_t[k].Kantyp;Jt.objCatDesc=_t[k].Kantyptxt;Jt.linkDesc=_t[k].Kanxt;Jt.netId=_t[k].Netid;Jt.netIdDesc=_t[k].Netidtxt;Jt.linkNum=_t[k].Lfdknr;Jt.autGrp=_t[k].Begru;Jt.autGrpDesc=_t[k].Begtx;Jt.validFrm=l.getDateFormat(_t[k].Datva);Jt.timeFrm=l.getTime(_t[k].Zeitva);Jt.validTo=l.getDateFormat(_t[k].Datvb);Jt.timeTo=l.getTime(_t[k].Zeitvb);Jt.medium=_t[k].Mediu;Jt.mediumDesc=_t[k].Medkxt;Jt.linkFrmFlEn=false;Jt.linkToFlEn=false;Jt.linkObjFlEn=false;Jt.linkFromEQEn=false;Jt.linkToEQEn=false;Jt.linkObjEqEn=false;Jt.linkCatEn=false;Jt.linkCatVS="None";Jt.objCatEn=false;Jt.objCatVS="None";Jt.linkFEqLblRQ=true;Jt.linkToEqLblRQ=true;Jt.linkFrmEq="";Jt.linkFrmEqDesc="";Jt.linkToEq="";Jt.linkToEqDesc="";Jt.linkObjEq="";Jt.linkObjEqDesc="";Jt.linkFrmflLblV=false;Jt.linkFrmFlV=false;Jt.linkFrmFlDescV=false;Jt.linkToFlLblV=false;Jt.linkToFlV=false;Jt.linkToFlDescV=false;Jt.linkObjFlLblV=false;Jt.linkObjFlV=false;Jt.linkObjFlDescV=false;Jt.linkFrmEqLblV=true;Jt.linkFrmEqV=true;Jt.linkFrmEqDescV=true;Jt.linkToEqLblV=true;Jt.linkToEQV=true;Jt.linkToEqDescV=true;Jt.linkObjEqLblV=true;Jt.linkObjEqV=true;Jt.linkObjEqDescV=true;Jt.enable=true;Jt.LAM=[];Jt.Class=[];Jt.Char=[];Jt.classItems=[];Jt.characteristics=[];if(Jt.objCat==="E"){Jt.linkCatEn=false;Jt.linkFrmFlEn=false;Jt.linkToFlEn=false;Jt.linkObjFlEn=false;Jt.linkFromEQEn=true;Jt.linkToEQEn=true;Jt.linkObjEqEn=true;Jt.linkFEqLblRQ=true;Jt.linkToEqLblRQ=true;Jt.linkFrmflLblV=false;Jt.linkFrmFlV=false;Jt.linkFrmFlDescV=false;Jt.linkToFlLblV=false;Jt.linkToFlV=false;Jt.linkToFlDescV=false;Jt.linkObjFlLblV=false;Jt.linkObjFlV=false;Jt.linkObjFlDescV=false;Jt.linkCatVS="None";Jt.objCatEn=false;Jt.objCatVS="None";Jt.linkFEqLblRQ=true;Jt.linkToEqLblRQ=true;Jt.linkFrmEq=_t[k].Eqvon;Jt.linkFrmEqDesc=_t[k].Eqtxtf;Jt.linkToEq=_t[k].Eqnach;Jt.linkToEqDesc=_t[k].Eqtxtt;Jt.linkObjEq=_t[k].Eqkant;Jt.linkObjEqDesc=_t[k].Eqtxtl;Jt.linkFrmflLblV=false;Jt.linkFrmFlV=false;Jt.linkFrmFlDescV=false;Jt.linkToFlLblV=false;Jt.linkToFlV=false;Jt.linkToFlDescV=false;Jt.linkObjFlLblV=false;Jt.linkObjFlV=false;Jt.linkObjFlDescV=false;Jt.linkFrmEqLblV=true;Jt.linkFrmEqV=true;Jt.linkFrmEqDescV=true;Jt.linkToEqLblV=true;Jt.linkToEQV=true;Jt.linkToEqDescV=true;Jt.linkObjEqLblV=true;Jt.linkObjEqV=true;Jt.linkObjEqDescV=true}else if(Jt.objCat==="T"){Jt.linkCatEn=false;Jt.linkFromEQEn=false;Jt.linkToEQEn=false;Jt.linkObjEqEn=false;Jt.linkFrmFlEn=true;Jt.linkToFlEn=true;Jt.linkObjFlEn=true;Jt.linkFrmflLblRQ=true;Jt.linkToFlLblRQ=true;Jt.linkFrmEqLblV=false;Jt.linkFrmEqV=false;Jt.linkFrmEqDescV=false;Jt.linkToEqLblV=false;Jt.linkToEQV=false;Jt.linkToEqDescV=false;Jt.linkObjEqLblV=false;Jt.linkObjEqV=false;Jt.linkObjEqDescV=false;Jt.linkCatVS="None";Jt.objCatEn=false;Jt.objCatVS="None";Jt.linkFrmflLblRQ=true;Jt.linkToFlLblRQ=true;Jt.linkFrmFl=_t[k].Tpvon;Jt.linkFrmFlDesc=_t[k].Fltxtf;Jt.linkToFl=_t[k].Tpnach;Jt.linkToFlDesc=_t[k].Fltxtt;Jt.linkObjFl=_t[k].Tpkant;Jt.linkObjFlDesc=_t[k].Fltxtl;Jt.linkFrmflLblV=true;Jt.linkFrmFlV=true;Jt.linkFrmFlDescV=true;Jt.linkToFlLblV=true;Jt.linkToFlV=true;Jt.linkToFlDescV=true;Jt.linkObjFlLblV=true;Jt.linkObjFlV=true;Jt.linkObjFlDescV=true;Jt.linkFrmEqLblV=false;Jt.linkFrmEqV=false;Jt.linkFrmEqDescV=false;Jt.linkToEqLblV=false;Jt.linkToEQV=false;Jt.linkToEqDescV=false;Jt.linkObjEqLblV=false;Jt.linkObjEqV=false;Jt.linkObjEqDescV=false}if(_t[k].Bezarp==="2"){Jt.twoWayRel=true;Jt.oneWayRel=false}else if(_t[k].Bezarp==="1"){Jt.oneWayRel=true;Jt.twoWayRel=false}if(_t[k].Bezarl==="2"){Jt.twoWayUsd=true;Jt.oneWayUsd=false;Jt.relNotUsd=false}else if(_t[k].Bezarl==="1"){Jt.oneWayUsd=true;Jt.relNotUsd=false;Jt.twoWayUsd=false}else if(_t[k].Bezarl==="0"){Jt.relNotUsd=true;Jt.oneWayUsd=false;Jt.twoWayUsd=false}var $t=r.OLLAM.results;if($t){var Zt=new sap.ui.model.json.JSONModel;Zt.setData($t);Jt.LAM=$t}var Xe=r.OLClass.results;if(Xe){if(Xe.length>0){for(var F=0;F<Xe.length;F++){if(Jt.link===Xe[F].Objlink){Xe[F].ctEnable=false;Xe[F].classEnable=false;Xe[F].ClassTypeDesc=Xe[F].Artxt;delete Xe[F].Artxt;Xe[F].ClassDesc=Xe[F].Kltxt;delete Xe[F].Kltxt;delete Xe[F].Changerequestid;delete Xe[F].Clint;delete Xe[F].Service;Jt.Class.push(Xe[F])}}}}var Ye=r.OLVal.results;if(Ye){if(Ye.length>0){for(var ae=0;ae<Ye.length;ae++){if(Jt.link===Ye[ae].Objlink){Ye[ae].cNameEnable=false;delete Ye[ae].Ataut;delete Ye[ae].Ataw1;delete Ye[ae].Atawe;delete Ye[ae].Atcod;delete Ye[ae].Atflb;delete Ye[ae].Atflv;delete Ye[ae].Atimb;delete Ye[ae].Atsrt;delete Ye[ae].Atvglart;delete Ye[ae].Atzis;delete Ye[ae].Changerequestid;delete Ye[ae].Charid;delete Ye[ae].Classtype;delete Ye[ae].Service;delete Ye[ae].Valcnt;Ye[ae].slNo=ae+1;Ye[ae].flag=Ye[ae].Class+"-"+Ye[ae].slNo;Jt.Char.push(Ye[ae])}}for(var u=0;u<Jt.Char.Char.length;u++){var S=1;for(var T=0;T<Jt.Char.Char.length;T++){if(u===T){continue}if(Jt.Char.Char[T].Atnam===Jt.Char.Char[u].Atnam){S++}}if(S>1){Jt.Char.Char[u].charDltEnable=true}else{Jt.Char.Char[u].charDltEnable=false}}}}Qt.push(Jt)}sap.ui.getCore().getModel("AIWListOLModel").setData(Qt);sap.ui.getCore().getModel("AIWListOLModel").refresh();a.updateCount("objLink",Qt);if(Qt.length>0){d(Qt[Qt.length-1].linkCat,Qt.length)}}a.setTabVisibility();a.getView().byId("_iconTabBar1").setSelectedKey("General")},error:function(e){a.BusyDialog.close()}})},setTabVisibility:function(){var e=this;if(sap.ui.getCore().getModel("AIWMSPT").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Measuring Point",true)}if(sap.ui.getCore().getModel("AIWMPMI").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Maintenance Plan",true)}if(sap.ui.getCore().getModel("AIWListWCModel").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Work Center",true)}if(sap.ui.getCore().getModel("AIWListGTLModel").getData().length>0||sap.ui.getCore().getModel("AIWListETLModel").getData().length>0||sap.ui.getCore().getModel("AIWListFTLModel").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Task List",true)}if(sap.ui.getCore().getModel("AIWListOLModel").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Object Link",true)}if(sap.ui.getCore().getModel("AIWListONModel").getData().length>0){e.getView().getModel("EnableModel").setProperty("/Object Network",true)}e.getView().getModel("EnableModel").refresh()}})});